{"version":3,"file":"smartcomments.min.js","sources":["../node_modules/@vue/shared/dist/shared.esm-bundler.js","../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js","../node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js","../node_modules/vue-demi/lib/index.mjs","../node_modules/@vue/devtools-api/lib/esm/env.js","../node_modules/vue/dist/vue.runtime.esm-bundler.js","../node_modules/@vue/devtools-api/lib/esm/time.js","../node_modules/@vue/devtools-api/lib/esm/proxy.js","../node_modules/@vue/devtools-api/lib/esm/const.js","../node_modules/@vue/devtools-api/lib/esm/index.js","../node_modules/pinia/dist/pinia.mjs","../src/store/userStore.js","../src/store/appStateStore.js","../src/composables/selection/shared/SelectionConstants.js","../src/utils/constants.js","../src/composables/selection/shared/SelectionUtils.js","../src/composables/core/useMessages.js","../src/composables/features/useComments.js","../src/composables/highlights/shared/HighlightErrorHandler.js","../src/composables/highlights/shared/HighlightUtils.js","../src/composables/highlights/useHighlightData.js","../src/composables/setup/useSmartCommentsSetup.js","../src/composables/selection/shared/SelectionErrorHandler.js","../src/utils/screenshotTargetManager.js","../node_modules/html2canvas/dist/html2canvas.esm.js","../src/composables/features/useScreenshot.js","../src/strategies/BaseSelectionStrategy.js","../src/composables/features/useSelectionScreenshot.js","../src/strategies/TextSelectionStrategy.js","../src/strategies/ImageSelectionStrategy.js","../src/strategies/SVGSelectionStrategy.js","../src/strategies/DynamicBlockSelectionStrategy.js","../src/factories/SelectionStrategyFactory.js","../src/composables/selection/useSelection.js","../src/composables/ui/useHoverEffects.js","../src/utils/smartCommentsEvents.js","../src/composables/selection/useSelectionEvents.js","../src/composables/features/useLinkPrevention.js","../src/composables/highlights/useTextHighlight.js","../src/composables/highlights/useSelectorHighlight.js","../src/composables/highlights/useHighlightListeners.js","../src/composables/highlights/useHighlightManager.js","../src/composables/highlights/useSVGHighlight.js","../src/store/commentsStore.js","../src/directives/highlightDirective.js","../src/components/ReplyForm.vue","../src/components/CommentMessage.vue","../src/components/ReplyList.vue","../src/components/CommentActions.vue","../src/components/CommentBody.vue","../src/components/Comment.vue","../src/components/NewCommentDialog.vue","../src/components/CommentTimeline.vue","../src/SmartComments.vue","../src/composables/highlights/useHighlightOrchestrator.js","../src/composables/ui/useKeyboardShortcuts.js","../src/composables/core/useCustomProperties.js","../src/composables/ui/useSmartCommentsEventHandlers.js","../src/composables/features/useUrlNavigation.js","../node_modules/rangy/lib/rangy-core.js","../node_modules/rangy/lib/rangy-classapplier.js","../node_modules/rangy/lib/rangy-highlighter.js","../node_modules/rangy/lib/rangy-serializer.js","../node_modules/rangy/lib/rangy-textrange.js","../src/App.js"],"sourcesContent":["/**\n* @vue/shared v3.5.16\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str) {\n  const map = /* @__PURE__ */ Object.create(null);\n  for (const key of str.split(\",\")) map[key] = 1;\n  return (val) => val in map;\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction(\n  (str) => {\n    return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n  }\n);\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction(\n  (str) => {\n    const s = str ? `on${capitalize(str)}` : ``;\n    return s;\n  }\n);\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\nfunction genCacheKey(source, options) {\n  return source + JSON.stringify(\n    options,\n    (_, val) => typeof val === \"function\" ? val.toString() : val\n  );\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"CACHED\": -1,\n  \"-1\": \"CACHED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  if (!styles) return \"\";\n  if (isString(styles)) return styles;\n  let ret = \"\";\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nconst isKnownMathMLAttr = /* @__PURE__ */ makeMap(\n  `accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\nconst cssVarNameEscapeSymbolsRE = /[ !\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~]/g;\nfunction getEscapedCssVarName(key, doubleEscape) {\n  return key.replace(\n    cssVarNameEscapeSymbolsRE,\n    (s) => doubleEscape ? s === '\"' ? '\\\\\\\\\\\\\"' : `\\\\\\\\${s}` : `\\\\${s}`\n  );\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst isRef = (val) => {\n  return !!(val && val[\"__v_isRef\"] === true);\n};\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (isRef(val)) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, cssVarNameEscapeSymbolsRE, def, escapeHtml, escapeHtmlComment, extend, genCacheKey, genPropsAccessExp, generateCodeFrame, getEscapedCssVarName, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownMathMLAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","/**\n* @vue/reactivity v3.5.16\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { extend, hasChanged, isArray, isIntegerKey, isSymbol, isMap, hasOwn, makeMap, isObject, capitalize, toRawType, def, isFunction, EMPTY_OBJ, isSet, isPlainObject, remove, NOOP } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal track `on` calls, allow `on` call multiple times\n     */\n    this._on = 0;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this._isPaused = false;\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  pause() {\n    if (this._active) {\n      this._isPaused = true;\n      let i, l;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].pause();\n        }\n      }\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].pause();\n      }\n    }\n  }\n  /**\n   * Resumes the effect scope, including all child scopes and effects.\n   */\n  resume() {\n    if (this._active) {\n      if (this._isPaused) {\n        this._isPaused = false;\n        let i, l;\n        if (this.scopes) {\n          for (i = 0, l = this.scopes.length; i < l; i++) {\n            this.scopes[i].resume();\n          }\n        }\n        for (i = 0, l = this.effects.length; i < l; i++) {\n          this.effects[i].resume();\n        }\n      }\n    }\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    if (++this._on === 1) {\n      this.prevScope = activeEffectScope;\n      activeEffectScope = this;\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    if (this._on > 0 && --this._on === 0) {\n      activeEffectScope = this.prevScope;\n      this.prevScope = void 0;\n    }\n  }\n  stop(fromParent) {\n    if (this._active) {\n      this._active = false;\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      this.effects.length = 0;\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      this.cleanups.length = 0;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n        this.scopes.length = 0;\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn, failSilently = false) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeSub;\nconst EffectFlags = {\n  \"ACTIVE\": 1,\n  \"1\": \"ACTIVE\",\n  \"RUNNING\": 2,\n  \"2\": \"RUNNING\",\n  \"TRACKING\": 4,\n  \"4\": \"TRACKING\",\n  \"NOTIFIED\": 8,\n  \"8\": \"NOTIFIED\",\n  \"DIRTY\": 16,\n  \"16\": \"DIRTY\",\n  \"ALLOW_RECURSE\": 32,\n  \"32\": \"ALLOW_RECURSE\",\n  \"PAUSED\": 64,\n  \"64\": \"PAUSED\",\n  \"EVALUATED\": 128,\n  \"128\": \"EVALUATED\"\n};\nconst pausedQueueEffects = /* @__PURE__ */ new WeakSet();\nclass ReactiveEffect {\n  constructor(fn) {\n    this.fn = fn;\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 1 | 4;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    /**\n     * @internal\n     */\n    this.cleanup = void 0;\n    this.scheduler = void 0;\n    if (activeEffectScope && activeEffectScope.active) {\n      activeEffectScope.effects.push(this);\n    }\n  }\n  pause() {\n    this.flags |= 64;\n  }\n  resume() {\n    if (this.flags & 64) {\n      this.flags &= -65;\n      if (pausedQueueEffects.has(this)) {\n        pausedQueueEffects.delete(this);\n        this.trigger();\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    if (this.flags & 2 && !(this.flags & 32)) {\n      return;\n    }\n    if (!(this.flags & 8)) {\n      batch(this);\n    }\n  }\n  run() {\n    if (!(this.flags & 1)) {\n      return this.fn();\n    }\n    this.flags |= 2;\n    cleanupEffect(this);\n    prepareDeps(this);\n    const prevEffect = activeSub;\n    const prevShouldTrack = shouldTrack;\n    activeSub = this;\n    shouldTrack = true;\n    try {\n      return this.fn();\n    } finally {\n      if (!!(process.env.NODE_ENV !== \"production\") && activeSub !== this) {\n        warn(\n          \"Active effect was not restored correctly - this is likely a Vue internal bug.\"\n        );\n      }\n      cleanupDeps(this);\n      activeSub = prevEffect;\n      shouldTrack = prevShouldTrack;\n      this.flags &= -3;\n    }\n  }\n  stop() {\n    if (this.flags & 1) {\n      for (let link = this.deps; link; link = link.nextDep) {\n        removeSub(link);\n      }\n      this.deps = this.depsTail = void 0;\n      cleanupEffect(this);\n      this.onStop && this.onStop();\n      this.flags &= -2;\n    }\n  }\n  trigger() {\n    if (this.flags & 64) {\n      pausedQueueEffects.add(this);\n    } else if (this.scheduler) {\n      this.scheduler();\n    } else {\n      this.runIfDirty();\n    }\n  }\n  /**\n   * @internal\n   */\n  runIfDirty() {\n    if (isDirty(this)) {\n      this.run();\n    }\n  }\n  get dirty() {\n    return isDirty(this);\n  }\n}\nlet batchDepth = 0;\nlet batchedSub;\nlet batchedComputed;\nfunction batch(sub, isComputed = false) {\n  sub.flags |= 8;\n  if (isComputed) {\n    sub.next = batchedComputed;\n    batchedComputed = sub;\n    return;\n  }\n  sub.next = batchedSub;\n  batchedSub = sub;\n}\nfunction startBatch() {\n  batchDepth++;\n}\nfunction endBatch() {\n  if (--batchDepth > 0) {\n    return;\n  }\n  if (batchedComputed) {\n    let e = batchedComputed;\n    batchedComputed = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= -9;\n      e = next;\n    }\n  }\n  let error;\n  while (batchedSub) {\n    let e = batchedSub;\n    batchedSub = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= -9;\n      if (e.flags & 1) {\n        try {\n          ;\n          e.trigger();\n        } catch (err) {\n          if (!error) error = err;\n        }\n      }\n      e = next;\n    }\n  }\n  if (error) throw error;\n}\nfunction prepareDeps(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    link.version = -1;\n    link.prevActiveLink = link.dep.activeLink;\n    link.dep.activeLink = link;\n  }\n}\nfunction cleanupDeps(sub) {\n  let head;\n  let tail = sub.depsTail;\n  let link = tail;\n  while (link) {\n    const prev = link.prevDep;\n    if (link.version === -1) {\n      if (link === tail) tail = prev;\n      removeSub(link);\n      removeDep(link);\n    } else {\n      head = link;\n    }\n    link.dep.activeLink = link.prevActiveLink;\n    link.prevActiveLink = void 0;\n    link = prev;\n  }\n  sub.deps = head;\n  sub.depsTail = tail;\n}\nfunction isDirty(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {\n      return true;\n    }\n  }\n  if (sub._dirty) {\n    return true;\n  }\n  return false;\n}\nfunction refreshComputed(computed) {\n  if (computed.flags & 4 && !(computed.flags & 16)) {\n    return;\n  }\n  computed.flags &= -17;\n  if (computed.globalVersion === globalVersion) {\n    return;\n  }\n  computed.globalVersion = globalVersion;\n  if (!computed.isSSR && computed.flags & 128 && (!computed.deps && !computed._dirty || !isDirty(computed))) {\n    return;\n  }\n  computed.flags |= 2;\n  const dep = computed.dep;\n  const prevSub = activeSub;\n  const prevShouldTrack = shouldTrack;\n  activeSub = computed;\n  shouldTrack = true;\n  try {\n    prepareDeps(computed);\n    const value = computed.fn(computed._value);\n    if (dep.version === 0 || hasChanged(value, computed._value)) {\n      computed.flags |= 128;\n      computed._value = value;\n      dep.version++;\n    }\n  } catch (err) {\n    dep.version++;\n    throw err;\n  } finally {\n    activeSub = prevSub;\n    shouldTrack = prevShouldTrack;\n    cleanupDeps(computed);\n    computed.flags &= -3;\n  }\n}\nfunction removeSub(link, soft = false) {\n  const { dep, prevSub, nextSub } = link;\n  if (prevSub) {\n    prevSub.nextSub = nextSub;\n    link.prevSub = void 0;\n  }\n  if (nextSub) {\n    nextSub.prevSub = prevSub;\n    link.nextSub = void 0;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && dep.subsHead === link) {\n    dep.subsHead = nextSub;\n  }\n  if (dep.subs === link) {\n    dep.subs = prevSub;\n    if (!prevSub && dep.computed) {\n      dep.computed.flags &= -5;\n      for (let l = dep.computed.deps; l; l = l.nextDep) {\n        removeSub(l, true);\n      }\n    }\n  }\n  if (!soft && !--dep.sc && dep.map) {\n    dep.map.delete(dep.key);\n  }\n}\nfunction removeDep(link) {\n  const { prevDep, nextDep } = link;\n  if (prevDep) {\n    prevDep.nextDep = nextDep;\n    link.prevDep = void 0;\n  }\n  if (nextDep) {\n    nextDep.prevDep = prevDep;\n    link.nextDep = void 0;\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const e = new ReactiveEffect(fn);\n  if (options) {\n    extend(e, options);\n  }\n  try {\n    e.run();\n  } catch (err) {\n    e.stop();\n    throw err;\n  }\n  const runner = e.run.bind(e);\n  runner.effect = e;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction onEffectCleanup(fn, failSilently = false) {\n  if (activeSub instanceof ReactiveEffect) {\n    activeSub.cleanup = fn;\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onEffectCleanup() was called when there was no active effect to associate with.`\n    );\n  }\n}\nfunction cleanupEffect(e) {\n  const { cleanup } = e;\n  e.cleanup = void 0;\n  if (cleanup) {\n    const prevSub = activeSub;\n    activeSub = void 0;\n    try {\n      cleanup();\n    } finally {\n      activeSub = prevSub;\n    }\n  }\n}\n\nlet globalVersion = 0;\nclass Link {\n  constructor(sub, dep) {\n    this.sub = sub;\n    this.dep = dep;\n    this.version = dep.version;\n    this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;\n  }\n}\nclass Dep {\n  constructor(computed) {\n    this.computed = computed;\n    this.version = 0;\n    /**\n     * Link between this dep and the current active effect\n     */\n    this.activeLink = void 0;\n    /**\n     * Doubly linked list representing the subscribing effects (tail)\n     */\n    this.subs = void 0;\n    /**\n     * For object property deps cleanup\n     */\n    this.map = void 0;\n    this.key = void 0;\n    /**\n     * Subscriber counter\n     */\n    this.sc = 0;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.subsHead = void 0;\n    }\n  }\n  track(debugInfo) {\n    if (!activeSub || !shouldTrack || activeSub === this.computed) {\n      return;\n    }\n    let link = this.activeLink;\n    if (link === void 0 || link.sub !== activeSub) {\n      link = this.activeLink = new Link(activeSub, this);\n      if (!activeSub.deps) {\n        activeSub.deps = activeSub.depsTail = link;\n      } else {\n        link.prevDep = activeSub.depsTail;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n      }\n      addSub(link);\n    } else if (link.version === -1) {\n      link.version = this.version;\n      if (link.nextDep) {\n        const next = link.nextDep;\n        next.prevDep = link.prevDep;\n        if (link.prevDep) {\n          link.prevDep.nextDep = next;\n        }\n        link.prevDep = activeSub.depsTail;\n        link.nextDep = void 0;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n        if (activeSub.deps === link) {\n          activeSub.deps = next;\n        }\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && activeSub.onTrack) {\n      activeSub.onTrack(\n        extend(\n          {\n            effect: activeSub\n          },\n          debugInfo\n        )\n      );\n    }\n    return link;\n  }\n  trigger(debugInfo) {\n    this.version++;\n    globalVersion++;\n    this.notify(debugInfo);\n  }\n  notify(debugInfo) {\n    startBatch();\n    try {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (let head = this.subsHead; head; head = head.nextSub) {\n          if (head.sub.onTrigger && !(head.sub.flags & 8)) {\n            head.sub.onTrigger(\n              extend(\n                {\n                  effect: head.sub\n                },\n                debugInfo\n              )\n            );\n          }\n        }\n      }\n      for (let link = this.subs; link; link = link.prevSub) {\n        if (link.sub.notify()) {\n          ;\n          link.sub.dep.notify();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n  }\n}\nfunction addSub(link) {\n  link.dep.sc++;\n  if (link.sub.flags & 4) {\n    const computed = link.dep.computed;\n    if (computed && !link.dep.subs) {\n      computed.flags |= 4 | 16;\n      for (let l = computed.deps; l; l = l.nextDep) {\n        addSub(l);\n      }\n    }\n    const currentTail = link.dep.subs;\n    if (currentTail !== link) {\n      link.prevSub = currentTail;\n      if (currentTail) currentTail.nextSub = link;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && link.dep.subsHead === void 0) {\n      link.dep.subsHead = link;\n    }\n    link.dep.subs = link;\n  }\n}\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Object iterate\" : \"\"\n);\nconst MAP_KEY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Map keys iterate\" : \"\"\n);\nconst ARRAY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Array iterate\" : \"\"\n);\nfunction track(target, type, key) {\n  if (shouldTrack && activeSub) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = new Dep());\n      dep.map = depsMap;\n      dep.key = key;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      dep.track({\n        target,\n        type,\n        key\n      });\n    } else {\n      dep.track();\n    }\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    globalVersion++;\n    return;\n  }\n  const run = (dep) => {\n    if (dep) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        dep.trigger({\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        });\n      } else {\n        dep.trigger();\n      }\n    }\n  };\n  startBatch();\n  if (type === \"clear\") {\n    depsMap.forEach(run);\n  } else {\n    const targetIsArray = isArray(target);\n    const isArrayIndex = targetIsArray && isIntegerKey(key);\n    if (targetIsArray && key === \"length\") {\n      const newLength = Number(newValue);\n      depsMap.forEach((dep, key2) => {\n        if (key2 === \"length\" || key2 === ARRAY_ITERATE_KEY || !isSymbol(key2) && key2 >= newLength) {\n          run(dep);\n        }\n      });\n    } else {\n      if (key !== void 0 || depsMap.has(void 0)) {\n        run(depsMap.get(key));\n      }\n      if (isArrayIndex) {\n        run(depsMap.get(ARRAY_ITERATE_KEY));\n      }\n      switch (type) {\n        case \"add\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          } else if (isArrayIndex) {\n            run(depsMap.get(\"length\"));\n          }\n          break;\n        case \"delete\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          }\n          break;\n        case \"set\":\n          if (isMap(target)) {\n            run(depsMap.get(ITERATE_KEY));\n          }\n          break;\n      }\n    }\n  }\n  endBatch();\n}\nfunction getDepFromReactive(object, key) {\n  const depMap = targetMap.get(object);\n  return depMap && depMap.get(key);\n}\n\nfunction reactiveReadArray(array) {\n  const raw = toRaw(array);\n  if (raw === array) return raw;\n  track(raw, \"iterate\", ARRAY_ITERATE_KEY);\n  return isShallow(array) ? raw : raw.map(toReactive);\n}\nfunction shallowReadArray(arr) {\n  track(arr = toRaw(arr), \"iterate\", ARRAY_ITERATE_KEY);\n  return arr;\n}\nconst arrayInstrumentations = {\n  __proto__: null,\n  [Symbol.iterator]() {\n    return iterator(this, Symbol.iterator, toReactive);\n  },\n  concat(...args) {\n    return reactiveReadArray(this).concat(\n      ...args.map((x) => isArray(x) ? reactiveReadArray(x) : x)\n    );\n  },\n  entries() {\n    return iterator(this, \"entries\", (value) => {\n      value[1] = toReactive(value[1]);\n      return value;\n    });\n  },\n  every(fn, thisArg) {\n    return apply(this, \"every\", fn, thisArg, void 0, arguments);\n  },\n  filter(fn, thisArg) {\n    return apply(this, \"filter\", fn, thisArg, (v) => v.map(toReactive), arguments);\n  },\n  find(fn, thisArg) {\n    return apply(this, \"find\", fn, thisArg, toReactive, arguments);\n  },\n  findIndex(fn, thisArg) {\n    return apply(this, \"findIndex\", fn, thisArg, void 0, arguments);\n  },\n  findLast(fn, thisArg) {\n    return apply(this, \"findLast\", fn, thisArg, toReactive, arguments);\n  },\n  findLastIndex(fn, thisArg) {\n    return apply(this, \"findLastIndex\", fn, thisArg, void 0, arguments);\n  },\n  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement\n  forEach(fn, thisArg) {\n    return apply(this, \"forEach\", fn, thisArg, void 0, arguments);\n  },\n  includes(...args) {\n    return searchProxy(this, \"includes\", args);\n  },\n  indexOf(...args) {\n    return searchProxy(this, \"indexOf\", args);\n  },\n  join(separator) {\n    return reactiveReadArray(this).join(separator);\n  },\n  // keys() iterator only reads `length`, no optimisation required\n  lastIndexOf(...args) {\n    return searchProxy(this, \"lastIndexOf\", args);\n  },\n  map(fn, thisArg) {\n    return apply(this, \"map\", fn, thisArg, void 0, arguments);\n  },\n  pop() {\n    return noTracking(this, \"pop\");\n  },\n  push(...args) {\n    return noTracking(this, \"push\", args);\n  },\n  reduce(fn, ...args) {\n    return reduce(this, \"reduce\", fn, args);\n  },\n  reduceRight(fn, ...args) {\n    return reduce(this, \"reduceRight\", fn, args);\n  },\n  shift() {\n    return noTracking(this, \"shift\");\n  },\n  // slice could use ARRAY_ITERATE but also seems to beg for range tracking\n  some(fn, thisArg) {\n    return apply(this, \"some\", fn, thisArg, void 0, arguments);\n  },\n  splice(...args) {\n    return noTracking(this, \"splice\", args);\n  },\n  toReversed() {\n    return reactiveReadArray(this).toReversed();\n  },\n  toSorted(comparer) {\n    return reactiveReadArray(this).toSorted(comparer);\n  },\n  toSpliced(...args) {\n    return reactiveReadArray(this).toSpliced(...args);\n  },\n  unshift(...args) {\n    return noTracking(this, \"unshift\", args);\n  },\n  values() {\n    return iterator(this, \"values\", toReactive);\n  }\n};\nfunction iterator(self, method, wrapValue) {\n  const arr = shallowReadArray(self);\n  const iter = arr[method]();\n  if (arr !== self && !isShallow(self)) {\n    iter._next = iter.next;\n    iter.next = () => {\n      const result = iter._next();\n      if (result.value) {\n        result.value = wrapValue(result.value);\n      }\n      return result;\n    };\n  }\n  return iter;\n}\nconst arrayProto = Array.prototype;\nfunction apply(self, method, fn, thisArg, wrappedRetFn, args) {\n  const arr = shallowReadArray(self);\n  const needsWrap = arr !== self && !isShallow(self);\n  const methodFn = arr[method];\n  if (methodFn !== arrayProto[method]) {\n    const result2 = methodFn.apply(self, args);\n    return needsWrap ? toReactive(result2) : result2;\n  }\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (needsWrap) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, toReactive(item), index, self);\n      };\n    } else if (fn.length > 2) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, item, index, self);\n      };\n    }\n  }\n  const result = methodFn.call(arr, wrappedFn, thisArg);\n  return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;\n}\nfunction reduce(self, method, fn, args) {\n  const arr = shallowReadArray(self);\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (!isShallow(self)) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, toReactive(item), index, self);\n      };\n    } else if (fn.length > 3) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, item, index, self);\n      };\n    }\n  }\n  return arr[method](wrappedFn, ...args);\n}\nfunction searchProxy(self, method, args) {\n  const arr = toRaw(self);\n  track(arr, \"iterate\", ARRAY_ITERATE_KEY);\n  const res = arr[method](...args);\n  if ((res === -1 || res === false) && isProxy(args[0])) {\n    args[0] = toRaw(args[0]);\n    return arr[method](...args);\n  }\n  return res;\n}\nfunction noTracking(self, method, args = []) {\n  pauseTracking();\n  startBatch();\n  const res = toRaw(self)[method].apply(self, args);\n  endBatch();\n  resetTracking();\n  return res;\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key)) key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    if (key === \"__v_skip\") return target[\"__v_skip\"];\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the receiver is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      let fn;\n      if (targetIsArray && (fn = arrayInstrumentations[key])) {\n        return fn;\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(\n      target,\n      key,\n      // if this is a proxy wrapping a ref, return methods using the raw ref\n      // as receiver so that we don't have to call `toRaw` on the ref in all\n      // its class methods\n      isRef(target) ? target : receiver\n    );\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      return targetIsArray && isIntegerKey(key) ? res : res.value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          return false;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(\n      target,\n      key,\n      value,\n      isRef(target) ? target : receiver\n    );\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(true);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction createIterableMethod(method, isReadonly2, isShallow2) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;\n    !isReadonly2 && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations(readonly, shallow) {\n  const instrumentations = {\n    get(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"get\", key);\n        }\n        track(rawTarget, \"get\", rawKey);\n      }\n      const { has } = getProto(rawTarget);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n      } else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n      } else if (target !== rawTarget) {\n        target.get(key);\n      }\n    },\n    get size() {\n      const target = this[\"__v_raw\"];\n      !readonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n      return Reflect.get(target, \"size\", target);\n    },\n    has(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"has\", key);\n        }\n        track(rawTarget, \"has\", rawKey);\n      }\n      return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n    },\n    forEach(callback, thisArg) {\n      const observed = this;\n      const target = observed[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      !readonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n      return target.forEach((value, key) => {\n        return callback.call(thisArg, wrap(value), wrap(key), observed);\n      });\n    }\n  };\n  extend(\n    instrumentations,\n    readonly ? {\n      add: createReadonlyMethod(\"add\"),\n      set: createReadonlyMethod(\"set\"),\n      delete: createReadonlyMethod(\"delete\"),\n      clear: createReadonlyMethod(\"clear\")\n    } : {\n      add(value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const proto = getProto(target);\n        const hadKey = proto.has.call(target, value);\n        if (!hadKey) {\n          target.add(value);\n          trigger(target, \"add\", value, value);\n        }\n        return this;\n      },\n      set(key, value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get.call(target, key);\n        target.set(key, value);\n        if (!hadKey) {\n          trigger(target, \"add\", key, value);\n        } else if (hasChanged(value, oldValue)) {\n          trigger(target, \"set\", key, value, oldValue);\n        }\n        return this;\n      },\n      delete(key) {\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get ? get.call(target, key) : void 0;\n        const result = target.delete(key);\n        if (hadKey) {\n          trigger(target, \"delete\", key, void 0, oldValue);\n        }\n        return result;\n      },\n      clear() {\n        const target = toRaw(this);\n        const hadItems = target.size !== 0;\n        const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n        const result = target.clear();\n        if (hadItems) {\n          trigger(\n            target,\n            \"clear\",\n            void 0,\n            void 0,\n            oldTarget\n          );\n        }\n        return result;\n      }\n    }\n  );\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    instrumentations[method] = createIterableMethod(method, readonly, shallow);\n  });\n  return instrumentations;\n}\nfunction createInstrumentationGetter(isReadonly2, shallow) {\n  const instrumentations = createInstrumentations(isReadonly2, shallow);\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `value cannot be made ${isReadonly2 ? \"readonly\" : \"reactive\"}: ${String(\n          target\n        )}`\n      );\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (!hasOwn(value, \"__v_skip\") && Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction isRef(r) {\n  return r ? r[\"__v_isRef\"] === true : false;\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, isShallow2) {\n    this.dep = new Dep();\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isShallow\"] = false;\n    this._rawValue = isShallow2 ? value : toRaw(value);\n    this._value = isShallow2 ? value : toReactive(value);\n    this[\"__v_isShallow\"] = isShallow2;\n  }\n  get value() {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.dep.track({\n        target: this,\n        type: \"get\",\n        key: \"value\"\n      });\n    } else {\n      this.dep.track();\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    const oldValue = this._rawValue;\n    const useDirectValue = this[\"__v_isShallow\"] || isShallow(newValue) || isReadonly(newValue);\n    newValue = useDirectValue ? newValue : toRaw(newValue);\n    if (hasChanged(newValue, oldValue)) {\n      this._rawValue = newValue;\n      this._value = useDirectValue ? newValue : toReactive(newValue);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        this.dep.trigger({\n          target: this,\n          type: \"set\",\n          key: \"value\",\n          newValue,\n          oldValue\n        });\n      } else {\n        this.dep.trigger();\n      }\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  if (ref2.dep) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      ref2.dep.trigger({\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: ref2._value\n      });\n    } else {\n      ref2.dep.trigger();\n    }\n  }\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => key === \"__v_raw\" ? target : unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n    const dep = this.dep = new Dep();\n    const { get, set } = factory(dep.track.bind(dep), dep.trigger.bind(dep));\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._value = this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    const val = this._object[this._key];\n    return this._value = val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(toRaw(this._object), this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isReadonly\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    return this._value = this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  const val = source[key];\n  return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);\n}\n\nclass ComputedRefImpl {\n  constructor(fn, setter, isSSR) {\n    this.fn = fn;\n    this.setter = setter;\n    /**\n     * @internal\n     */\n    this._value = void 0;\n    /**\n     * @internal\n     */\n    this.dep = new Dep(this);\n    /**\n     * @internal\n     */\n    this.__v_isRef = true;\n    // TODO isolatedDeclarations \"__v_isReadonly\"\n    // A computed is also a subscriber that tracks other deps\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 16;\n    /**\n     * @internal\n     */\n    this.globalVersion = globalVersion - 1;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    // for backwards compat\n    this.effect = this;\n    this[\"__v_isReadonly\"] = !setter;\n    this.isSSR = isSSR;\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    this.flags |= 16;\n    if (!(this.flags & 8) && // avoid infinite self recursion\n    activeSub !== this) {\n      batch(this, true);\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) ;\n  }\n  get value() {\n    const link = !!(process.env.NODE_ENV !== \"production\") ? this.dep.track({\n      target: this,\n      type: \"get\",\n      key: \"value\"\n    }) : this.dep.track();\n    refreshComputed(this);\n    if (link) {\n      link.version = this.dep.version;\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    if (this.setter) {\n      this.setter(newValue);\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\"Write operation failed: computed value is readonly\");\n    }\n  }\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.onTrack = debugOptions.onTrack;\n    cRef.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\",\n  \"IS_REF\": \"__v_isRef\"\n};\n\nconst WatchErrorCodes = {\n  \"WATCH_GETTER\": 2,\n  \"2\": \"WATCH_GETTER\",\n  \"WATCH_CALLBACK\": 3,\n  \"3\": \"WATCH_CALLBACK\",\n  \"WATCH_CLEANUP\": 4,\n  \"4\": \"WATCH_CLEANUP\"\n};\nconst INITIAL_WATCHER_VALUE = {};\nconst cleanupMap = /* @__PURE__ */ new WeakMap();\nlet activeWatcher = void 0;\nfunction getCurrentWatcher() {\n  return activeWatcher;\n}\nfunction onWatcherCleanup(cleanupFn, failSilently = false, owner = activeWatcher) {\n  if (owner) {\n    let cleanups = cleanupMap.get(owner);\n    if (!cleanups) cleanupMap.set(owner, cleanups = []);\n    cleanups.push(cleanupFn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onWatcherCleanup() was called when there was no active watcher to associate with.`\n    );\n  }\n}\nfunction watch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, once, scheduler, augmentJob, call } = options;\n  const warnInvalidSource = (s) => {\n    (options.onWarn || warn)(\n      `Invalid watch source: `,\n      s,\n      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`\n    );\n  };\n  const reactiveGetter = (source2) => {\n    if (deep) return source2;\n    if (isShallow(source2) || deep === false || deep === 0)\n      return traverse(source2, 1);\n    return traverse(source2);\n  };\n  let effect;\n  let getter;\n  let cleanup;\n  let boundCleanup;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => reactiveGetter(source);\n    forceTrigger = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));\n    getter = () => source.map((s) => {\n      if (isRef(s)) {\n        return s.value;\n      } else if (isReactive(s)) {\n        return reactiveGetter(s);\n      } else if (isFunction(s)) {\n        return call ? call(s, 2) : s();\n      } else {\n        !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(s);\n      }\n    });\n  } else if (isFunction(source)) {\n    if (cb) {\n      getter = call ? () => call(source, 2) : source;\n    } else {\n      getter = () => {\n        if (cleanup) {\n          pauseTracking();\n          try {\n            cleanup();\n          } finally {\n            resetTracking();\n          }\n        }\n        const currentEffect = activeWatcher;\n        activeWatcher = effect;\n        try {\n          return call ? call(source, 3, [boundCleanup]) : source(boundCleanup);\n        } finally {\n          activeWatcher = currentEffect;\n        }\n      };\n    }\n  } else {\n    getter = NOOP;\n    !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(source);\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    const depth = deep === true ? Infinity : deep;\n    getter = () => traverse(baseGetter(), depth);\n  }\n  const scope = getCurrentScope();\n  const watchHandle = () => {\n    effect.stop();\n    if (scope && scope.active) {\n      remove(scope.effects, effect);\n    }\n  };\n  if (once && cb) {\n    const _cb = cb;\n    cb = (...args) => {\n      _cb(...args);\n      watchHandle();\n    };\n  }\n  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;\n  const job = (immediateFirstRun) => {\n    if (!(effect.flags & 1) || !effect.dirty && !immediateFirstRun) {\n      return;\n    }\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {\n        if (cleanup) {\n          cleanup();\n        }\n        const currentWatcher = activeWatcher;\n        activeWatcher = effect;\n        try {\n          const args = [\n            newValue,\n            // pass undefined as the old value when it's changed for the first time\n            oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,\n            boundCleanup\n          ];\n          oldValue = newValue;\n          call ? call(cb, 3, args) : (\n            // @ts-expect-error\n            cb(...args)\n          );\n        } finally {\n          activeWatcher = currentWatcher;\n        }\n      }\n    } else {\n      effect.run();\n    }\n  };\n  if (augmentJob) {\n    augmentJob(job);\n  }\n  effect = new ReactiveEffect(getter);\n  effect.scheduler = scheduler ? () => scheduler(job, false) : job;\n  boundCleanup = (fn) => onWatcherCleanup(fn, false, effect);\n  cleanup = effect.onStop = () => {\n    const cleanups = cleanupMap.get(effect);\n    if (cleanups) {\n      if (call) {\n        call(cleanups, 4);\n      } else {\n        for (const cleanup2 of cleanups) cleanup2();\n      }\n      cleanupMap.delete(effect);\n    }\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    effect.onTrack = options.onTrack;\n    effect.onTrigger = options.onTrigger;\n  }\n  if (cb) {\n    if (immediate) {\n      job(true);\n    } else {\n      oldValue = effect.run();\n    }\n  } else if (scheduler) {\n    scheduler(job.bind(null, true), true);\n  } else {\n    effect.run();\n  }\n  watchHandle.pause = effect.pause.bind(effect);\n  watchHandle.resume = effect.resume.bind(effect);\n  watchHandle.stop = watchHandle;\n  return watchHandle;\n}\nfunction traverse(value, depth = Infinity, seen) {\n  if (depth <= 0 || !isObject(value) || value[\"__v_skip\"]) {\n    return value;\n  }\n  seen = seen || /* @__PURE__ */ new Set();\n  if (seen.has(value)) {\n    return value;\n  }\n  seen.add(value);\n  depth--;\n  if (isRef(value)) {\n    traverse(value.value, depth, seen);\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], depth, seen);\n    }\n  } else if (isSet(value) || isMap(value)) {\n    value.forEach((v) => {\n      traverse(v, depth, seen);\n    });\n  } else if (isPlainObject(value)) {\n    for (const key in value) {\n      traverse(value[key], depth, seen);\n    }\n    for (const key of Object.getOwnPropertySymbols(value)) {\n      if (Object.prototype.propertyIsEnumerable.call(value, key)) {\n        traverse(value[key], depth, seen);\n      }\n    }\n  }\n  return value;\n}\n\nexport { ARRAY_ITERATE_KEY, EffectFlags, EffectScope, ITERATE_KEY, MAP_KEY_ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, WatchErrorCodes, computed, customRef, effect, effectScope, enableTracking, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onEffectCleanup, onScopeDispose, onWatcherCleanup, pauseTracking, proxyRefs, reactive, reactiveReadArray, readonly, ref, resetTracking, shallowReactive, shallowReadArray, shallowReadonly, shallowRef, stop, toRaw, toReactive, toReadonly, toRef, toRefs, toValue, track, traverse, trigger, triggerRef, unref, watch };\n","/**\n* @vue/runtime-core v3.5.16\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { pauseTracking, resetTracking, isRef, toRaw, traverse, shallowRef, readonly, isReactive, ref, isShallow, isReadonly, shallowReadArray, toReadonly, toReactive, shallowReadonly, track, reactive, shallowReactive, trigger, ReactiveEffect, watch as watch$1, customRef, isProxy, proxyRefs, markRaw, EffectScope, computed as computed$1 } from '@vue/reactivity';\nexport { EffectScope, ReactiveEffect, TrackOpTypes, TriggerOpTypes, customRef, effect, effectScope, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, onWatcherCleanup, proxyRefs, reactive, readonly, ref, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, toValue, triggerRef, unref } from '@vue/reactivity';\nimport { isString, isFunction, EMPTY_OBJ, isPromise, isArray, NOOP, getGlobalThis, extend, isBuiltInDirective, hasOwn, remove, def, isOn, isReservedProp, normalizeClass, stringifyStyle, normalizeStyle, isKnownSvgAttr, isBooleanAttr, isKnownHtmlAttr, includeBooleanAttr, isRenderableAttrValue, getEscapedCssVarName, isObject, isRegExp, invokeArrayFns, toHandlerKey, camelize, capitalize, isSymbol, isGloballyAllowed, NO, EMPTY_ARR, hyphenate, makeMap, toRawType, hasChanged, looseToNumber, isModelListener, toNumber } from '@vue/shared';\nexport { camelize, capitalize, normalizeClass, normalizeProps, normalizeStyle, toDisplayString, toHandlerKey } from '@vue/shared';\n\nconst stack = [];\nfunction pushWarningContext(vnode) {\n  stack.push(vnode);\n}\nfunction popWarningContext() {\n  stack.pop();\n}\nlet isWarning = false;\nfunction warn$1(msg, ...args) {\n  if (isWarning) return;\n  isWarning = true;\n  pauseTracking();\n  const instance = stack.length ? stack[stack.length - 1].component : null;\n  const appWarnHandler = instance && instance.appContext.config.warnHandler;\n  const trace = getComponentTrace();\n  if (appWarnHandler) {\n    callWithErrorHandling(\n      appWarnHandler,\n      instance,\n      11,\n      [\n        // eslint-disable-next-line no-restricted-syntax\n        msg + args.map((a) => {\n          var _a, _b;\n          return (_b = (_a = a.toString) == null ? void 0 : _a.call(a)) != null ? _b : JSON.stringify(a);\n        }).join(\"\"),\n        instance && instance.proxy,\n        trace.map(\n          ({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`\n        ).join(\"\\n\"),\n        trace\n      ]\n    );\n  } else {\n    const warnArgs = [`[Vue warn]: ${msg}`, ...args];\n    if (trace.length && // avoid spamming console during tests\n    true) {\n      warnArgs.push(`\n`, ...formatTrace(trace));\n    }\n    console.warn(...warnArgs);\n  }\n  resetTracking();\n  isWarning = false;\n}\nfunction getComponentTrace() {\n  let currentVNode = stack[stack.length - 1];\n  if (!currentVNode) {\n    return [];\n  }\n  const normalizedStack = [];\n  while (currentVNode) {\n    const last = normalizedStack[0];\n    if (last && last.vnode === currentVNode) {\n      last.recurseCount++;\n    } else {\n      normalizedStack.push({\n        vnode: currentVNode,\n        recurseCount: 0\n      });\n    }\n    const parentInstance = currentVNode.component && currentVNode.component.parent;\n    currentVNode = parentInstance && parentInstance.vnode;\n  }\n  return normalizedStack;\n}\nfunction formatTrace(trace) {\n  const logs = [];\n  trace.forEach((entry, i) => {\n    logs.push(...i === 0 ? [] : [`\n`], ...formatTraceEntry(entry));\n  });\n  return logs;\n}\nfunction formatTraceEntry({ vnode, recurseCount }) {\n  const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;\n  const isRoot = vnode.component ? vnode.component.parent == null : false;\n  const open = ` at <${formatComponentName(\n    vnode.component,\n    vnode.type,\n    isRoot\n  )}`;\n  const close = `>` + postfix;\n  return vnode.props ? [open, ...formatProps(vnode.props), close] : [open + close];\n}\nfunction formatProps(props) {\n  const res = [];\n  const keys = Object.keys(props);\n  keys.slice(0, 3).forEach((key) => {\n    res.push(...formatProp(key, props[key]));\n  });\n  if (keys.length > 3) {\n    res.push(` ...`);\n  }\n  return res;\n}\nfunction formatProp(key, value, raw) {\n  if (isString(value)) {\n    value = JSON.stringify(value);\n    return raw ? value : [`${key}=${value}`];\n  } else if (typeof value === \"number\" || typeof value === \"boolean\" || value == null) {\n    return raw ? value : [`${key}=${value}`];\n  } else if (isRef(value)) {\n    value = formatProp(key, toRaw(value.value), true);\n    return raw ? value : [`${key}=Ref<`, value, `>`];\n  } else if (isFunction(value)) {\n    return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];\n  } else {\n    value = toRaw(value);\n    return raw ? value : [`${key}=`, value];\n  }\n}\nfunction assertNumber(val, type) {\n  if (!!!(process.env.NODE_ENV !== \"production\")) return;\n  if (val === void 0) {\n    return;\n  } else if (typeof val !== \"number\") {\n    warn$1(`${type} is not a valid number - got ${JSON.stringify(val)}.`);\n  } else if (isNaN(val)) {\n    warn$1(`${type} is NaN - the duration expression might be incorrect.`);\n  }\n}\n\nconst ErrorCodes = {\n  \"SETUP_FUNCTION\": 0,\n  \"0\": \"SETUP_FUNCTION\",\n  \"RENDER_FUNCTION\": 1,\n  \"1\": \"RENDER_FUNCTION\",\n  \"NATIVE_EVENT_HANDLER\": 5,\n  \"5\": \"NATIVE_EVENT_HANDLER\",\n  \"COMPONENT_EVENT_HANDLER\": 6,\n  \"6\": \"COMPONENT_EVENT_HANDLER\",\n  \"VNODE_HOOK\": 7,\n  \"7\": \"VNODE_HOOK\",\n  \"DIRECTIVE_HOOK\": 8,\n  \"8\": \"DIRECTIVE_HOOK\",\n  \"TRANSITION_HOOK\": 9,\n  \"9\": \"TRANSITION_HOOK\",\n  \"APP_ERROR_HANDLER\": 10,\n  \"10\": \"APP_ERROR_HANDLER\",\n  \"APP_WARN_HANDLER\": 11,\n  \"11\": \"APP_WARN_HANDLER\",\n  \"FUNCTION_REF\": 12,\n  \"12\": \"FUNCTION_REF\",\n  \"ASYNC_COMPONENT_LOADER\": 13,\n  \"13\": \"ASYNC_COMPONENT_LOADER\",\n  \"SCHEDULER\": 14,\n  \"14\": \"SCHEDULER\",\n  \"COMPONENT_UPDATE\": 15,\n  \"15\": \"COMPONENT_UPDATE\",\n  \"APP_UNMOUNT_CLEANUP\": 16,\n  \"16\": \"APP_UNMOUNT_CLEANUP\"\n};\nconst ErrorTypeStrings$1 = {\n  [\"sp\"]: \"serverPrefetch hook\",\n  [\"bc\"]: \"beforeCreate hook\",\n  [\"c\"]: \"created hook\",\n  [\"bm\"]: \"beforeMount hook\",\n  [\"m\"]: \"mounted hook\",\n  [\"bu\"]: \"beforeUpdate hook\",\n  [\"u\"]: \"updated\",\n  [\"bum\"]: \"beforeUnmount hook\",\n  [\"um\"]: \"unmounted hook\",\n  [\"a\"]: \"activated hook\",\n  [\"da\"]: \"deactivated hook\",\n  [\"ec\"]: \"errorCaptured hook\",\n  [\"rtc\"]: \"renderTracked hook\",\n  [\"rtg\"]: \"renderTriggered hook\",\n  [0]: \"setup function\",\n  [1]: \"render function\",\n  [2]: \"watcher getter\",\n  [3]: \"watcher callback\",\n  [4]: \"watcher cleanup function\",\n  [5]: \"native event handler\",\n  [6]: \"component event handler\",\n  [7]: \"vnode hook\",\n  [8]: \"directive hook\",\n  [9]: \"transition hook\",\n  [10]: \"app errorHandler\",\n  [11]: \"app warnHandler\",\n  [12]: \"ref function\",\n  [13]: \"async component loader\",\n  [14]: \"scheduler flush\",\n  [15]: \"component update\",\n  [16]: \"app unmount cleanup function\"\n};\nfunction callWithErrorHandling(fn, instance, type, args) {\n  try {\n    return args ? fn(...args) : fn();\n  } catch (err) {\n    handleError(err, instance, type);\n  }\n}\nfunction callWithAsyncErrorHandling(fn, instance, type, args) {\n  if (isFunction(fn)) {\n    const res = callWithErrorHandling(fn, instance, type, args);\n    if (res && isPromise(res)) {\n      res.catch((err) => {\n        handleError(err, instance, type);\n      });\n    }\n    return res;\n  }\n  if (isArray(fn)) {\n    const values = [];\n    for (let i = 0; i < fn.length; i++) {\n      values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));\n    }\n    return values;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `Invalid value type passed to callWithAsyncErrorHandling(): ${typeof fn}`\n    );\n  }\n}\nfunction handleError(err, instance, type, throwInDev = true) {\n  const contextVNode = instance ? instance.vnode : null;\n  const { errorHandler, throwUnhandledErrorInProduction } = instance && instance.appContext.config || EMPTY_OBJ;\n  if (instance) {\n    let cur = instance.parent;\n    const exposedInstance = instance.proxy;\n    const errorInfo = !!(process.env.NODE_ENV !== \"production\") ? ErrorTypeStrings$1[type] : `https://vuejs.org/error-reference/#runtime-${type}`;\n    while (cur) {\n      const errorCapturedHooks = cur.ec;\n      if (errorCapturedHooks) {\n        for (let i = 0; i < errorCapturedHooks.length; i++) {\n          if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {\n            return;\n          }\n        }\n      }\n      cur = cur.parent;\n    }\n    if (errorHandler) {\n      pauseTracking();\n      callWithErrorHandling(errorHandler, null, 10, [\n        err,\n        exposedInstance,\n        errorInfo\n      ]);\n      resetTracking();\n      return;\n    }\n  }\n  logError(err, type, contextVNode, throwInDev, throwUnhandledErrorInProduction);\n}\nfunction logError(err, type, contextVNode, throwInDev = true, throwInProd = false) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const info = ErrorTypeStrings$1[type];\n    if (contextVNode) {\n      pushWarningContext(contextVNode);\n    }\n    warn$1(`Unhandled error${info ? ` during execution of ${info}` : ``}`);\n    if (contextVNode) {\n      popWarningContext();\n    }\n    if (throwInDev) {\n      throw err;\n    } else {\n      console.error(err);\n    }\n  } else if (throwInProd) {\n    throw err;\n  } else {\n    console.error(err);\n  }\n}\n\nconst queue = [];\nlet flushIndex = -1;\nconst pendingPostFlushCbs = [];\nlet activePostFlushCbs = null;\nlet postFlushIndex = 0;\nconst resolvedPromise = /* @__PURE__ */ Promise.resolve();\nlet currentFlushPromise = null;\nconst RECURSION_LIMIT = 100;\nfunction nextTick(fn) {\n  const p = currentFlushPromise || resolvedPromise;\n  return fn ? p.then(this ? fn.bind(this) : fn) : p;\n}\nfunction findInsertionIndex(id) {\n  let start = flushIndex + 1;\n  let end = queue.length;\n  while (start < end) {\n    const middle = start + end >>> 1;\n    const middleJob = queue[middle];\n    const middleJobId = getId(middleJob);\n    if (middleJobId < id || middleJobId === id && middleJob.flags & 2) {\n      start = middle + 1;\n    } else {\n      end = middle;\n    }\n  }\n  return start;\n}\nfunction queueJob(job) {\n  if (!(job.flags & 1)) {\n    const jobId = getId(job);\n    const lastJob = queue[queue.length - 1];\n    if (!lastJob || // fast path when the job id is larger than the tail\n    !(job.flags & 2) && jobId >= getId(lastJob)) {\n      queue.push(job);\n    } else {\n      queue.splice(findInsertionIndex(jobId), 0, job);\n    }\n    job.flags |= 1;\n    queueFlush();\n  }\n}\nfunction queueFlush() {\n  if (!currentFlushPromise) {\n    currentFlushPromise = resolvedPromise.then(flushJobs);\n  }\n}\nfunction queuePostFlushCb(cb) {\n  if (!isArray(cb)) {\n    if (activePostFlushCbs && cb.id === -1) {\n      activePostFlushCbs.splice(postFlushIndex + 1, 0, cb);\n    } else if (!(cb.flags & 1)) {\n      pendingPostFlushCbs.push(cb);\n      cb.flags |= 1;\n    }\n  } else {\n    pendingPostFlushCbs.push(...cb);\n  }\n  queueFlush();\n}\nfunction flushPreFlushCbs(instance, seen, i = flushIndex + 1) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    seen = seen || /* @__PURE__ */ new Map();\n  }\n  for (; i < queue.length; i++) {\n    const cb = queue[i];\n    if (cb && cb.flags & 2) {\n      if (instance && cb.id !== instance.uid) {\n        continue;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && checkRecursiveUpdates(seen, cb)) {\n        continue;\n      }\n      queue.splice(i, 1);\n      i--;\n      if (cb.flags & 4) {\n        cb.flags &= -2;\n      }\n      cb();\n      if (!(cb.flags & 4)) {\n        cb.flags &= -2;\n      }\n    }\n  }\n}\nfunction flushPostFlushCbs(seen) {\n  if (pendingPostFlushCbs.length) {\n    const deduped = [...new Set(pendingPostFlushCbs)].sort(\n      (a, b) => getId(a) - getId(b)\n    );\n    pendingPostFlushCbs.length = 0;\n    if (activePostFlushCbs) {\n      activePostFlushCbs.push(...deduped);\n      return;\n    }\n    activePostFlushCbs = deduped;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      seen = seen || /* @__PURE__ */ new Map();\n    }\n    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {\n      const cb = activePostFlushCbs[postFlushIndex];\n      if (!!(process.env.NODE_ENV !== \"production\") && checkRecursiveUpdates(seen, cb)) {\n        continue;\n      }\n      if (cb.flags & 4) {\n        cb.flags &= -2;\n      }\n      if (!(cb.flags & 8)) cb();\n      cb.flags &= -2;\n    }\n    activePostFlushCbs = null;\n    postFlushIndex = 0;\n  }\n}\nconst getId = (job) => job.id == null ? job.flags & 2 ? -1 : Infinity : job.id;\nfunction flushJobs(seen) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    seen = seen || /* @__PURE__ */ new Map();\n  }\n  const check = !!(process.env.NODE_ENV !== \"production\") ? (job) => checkRecursiveUpdates(seen, job) : NOOP;\n  try {\n    for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {\n      const job = queue[flushIndex];\n      if (job && !(job.flags & 8)) {\n        if (!!(process.env.NODE_ENV !== \"production\") && check(job)) {\n          continue;\n        }\n        if (job.flags & 4) {\n          job.flags &= ~1;\n        }\n        callWithErrorHandling(\n          job,\n          job.i,\n          job.i ? 15 : 14\n        );\n        if (!(job.flags & 4)) {\n          job.flags &= ~1;\n        }\n      }\n    }\n  } finally {\n    for (; flushIndex < queue.length; flushIndex++) {\n      const job = queue[flushIndex];\n      if (job) {\n        job.flags &= -2;\n      }\n    }\n    flushIndex = -1;\n    queue.length = 0;\n    flushPostFlushCbs(seen);\n    currentFlushPromise = null;\n    if (queue.length || pendingPostFlushCbs.length) {\n      flushJobs(seen);\n    }\n  }\n}\nfunction checkRecursiveUpdates(seen, fn) {\n  const count = seen.get(fn) || 0;\n  if (count > RECURSION_LIMIT) {\n    const instance = fn.i;\n    const componentName = instance && getComponentName(instance.type);\n    handleError(\n      `Maximum recursive updates exceeded${componentName ? ` in component <${componentName}>` : ``}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,\n      null,\n      10\n    );\n    return true;\n  }\n  seen.set(fn, count + 1);\n  return false;\n}\n\nlet isHmrUpdating = false;\nconst hmrDirtyComponents = /* @__PURE__ */ new Map();\nif (!!(process.env.NODE_ENV !== \"production\")) {\n  getGlobalThis().__VUE_HMR_RUNTIME__ = {\n    createRecord: tryWrap(createRecord),\n    rerender: tryWrap(rerender),\n    reload: tryWrap(reload)\n  };\n}\nconst map = /* @__PURE__ */ new Map();\nfunction registerHMR(instance) {\n  const id = instance.type.__hmrId;\n  let record = map.get(id);\n  if (!record) {\n    createRecord(id, instance.type);\n    record = map.get(id);\n  }\n  record.instances.add(instance);\n}\nfunction unregisterHMR(instance) {\n  map.get(instance.type.__hmrId).instances.delete(instance);\n}\nfunction createRecord(id, initialDef) {\n  if (map.has(id)) {\n    return false;\n  }\n  map.set(id, {\n    initialDef: normalizeClassComponent(initialDef),\n    instances: /* @__PURE__ */ new Set()\n  });\n  return true;\n}\nfunction normalizeClassComponent(component) {\n  return isClassComponent(component) ? component.__vccOpts : component;\n}\nfunction rerender(id, newRender) {\n  const record = map.get(id);\n  if (!record) {\n    return;\n  }\n  record.initialDef.render = newRender;\n  [...record.instances].forEach((instance) => {\n    if (newRender) {\n      instance.render = newRender;\n      normalizeClassComponent(instance.type).render = newRender;\n    }\n    instance.renderCache = [];\n    isHmrUpdating = true;\n    instance.update();\n    isHmrUpdating = false;\n  });\n}\nfunction reload(id, newComp) {\n  const record = map.get(id);\n  if (!record) return;\n  newComp = normalizeClassComponent(newComp);\n  updateComponentDef(record.initialDef, newComp);\n  const instances = [...record.instances];\n  for (let i = 0; i < instances.length; i++) {\n    const instance = instances[i];\n    const oldComp = normalizeClassComponent(instance.type);\n    let dirtyInstances = hmrDirtyComponents.get(oldComp);\n    if (!dirtyInstances) {\n      if (oldComp !== record.initialDef) {\n        updateComponentDef(oldComp, newComp);\n      }\n      hmrDirtyComponents.set(oldComp, dirtyInstances = /* @__PURE__ */ new Set());\n    }\n    dirtyInstances.add(instance);\n    instance.appContext.propsCache.delete(instance.type);\n    instance.appContext.emitsCache.delete(instance.type);\n    instance.appContext.optionsCache.delete(instance.type);\n    if (instance.ceReload) {\n      dirtyInstances.add(instance);\n      instance.ceReload(newComp.styles);\n      dirtyInstances.delete(instance);\n    } else if (instance.parent) {\n      queueJob(() => {\n        isHmrUpdating = true;\n        instance.parent.update();\n        isHmrUpdating = false;\n        dirtyInstances.delete(instance);\n      });\n    } else if (instance.appContext.reload) {\n      instance.appContext.reload();\n    } else if (typeof window !== \"undefined\") {\n      window.location.reload();\n    } else {\n      console.warn(\n        \"[HMR] Root or manually mounted instance modified. Full reload required.\"\n      );\n    }\n    if (instance.root.ce && instance !== instance.root) {\n      instance.root.ce._removeChildStyle(oldComp);\n    }\n  }\n  queuePostFlushCb(() => {\n    hmrDirtyComponents.clear();\n  });\n}\nfunction updateComponentDef(oldComp, newComp) {\n  extend(oldComp, newComp);\n  for (const key in oldComp) {\n    if (key !== \"__file\" && !(key in newComp)) {\n      delete oldComp[key];\n    }\n  }\n}\nfunction tryWrap(fn) {\n  return (id, arg) => {\n    try {\n      return fn(id, arg);\n    } catch (e) {\n      console.error(e);\n      console.warn(\n        `[HMR] Something went wrong during Vue component hot-reload. Full reload required.`\n      );\n    }\n  };\n}\n\nlet devtools$1;\nlet buffer = [];\nlet devtoolsNotInstalled = false;\nfunction emit$1(event, ...args) {\n  if (devtools$1) {\n    devtools$1.emit(event, ...args);\n  } else if (!devtoolsNotInstalled) {\n    buffer.push({ event, args });\n  }\n}\nfunction setDevtoolsHook$1(hook, target) {\n  var _a, _b;\n  devtools$1 = hook;\n  if (devtools$1) {\n    devtools$1.enabled = true;\n    buffer.forEach(({ event, args }) => devtools$1.emit(event, ...args));\n    buffer = [];\n  } else if (\n    // handle late devtools injection - only do this if we are in an actual\n    // browser environment to avoid the timer handle stalling test runner exit\n    // (#4815)\n    typeof window !== \"undefined\" && // some envs mock window but not fully\n    window.HTMLElement && // also exclude jsdom\n    // eslint-disable-next-line no-restricted-syntax\n    !((_b = (_a = window.navigator) == null ? void 0 : _a.userAgent) == null ? void 0 : _b.includes(\"jsdom\"))\n  ) {\n    const replay = target.__VUE_DEVTOOLS_HOOK_REPLAY__ = target.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];\n    replay.push((newHook) => {\n      setDevtoolsHook$1(newHook, target);\n    });\n    setTimeout(() => {\n      if (!devtools$1) {\n        target.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;\n        devtoolsNotInstalled = true;\n        buffer = [];\n      }\n    }, 3e3);\n  } else {\n    devtoolsNotInstalled = true;\n    buffer = [];\n  }\n}\nfunction devtoolsInitApp(app, version) {\n  emit$1(\"app:init\" /* APP_INIT */, app, version, {\n    Fragment,\n    Text,\n    Comment,\n    Static\n  });\n}\nfunction devtoolsUnmountApp(app) {\n  emit$1(\"app:unmount\" /* APP_UNMOUNT */, app);\n}\nconst devtoolsComponentAdded = /* @__PURE__ */ createDevtoolsComponentHook(\"component:added\" /* COMPONENT_ADDED */);\nconst devtoolsComponentUpdated = /* @__PURE__ */ createDevtoolsComponentHook(\"component:updated\" /* COMPONENT_UPDATED */);\nconst _devtoolsComponentRemoved = /* @__PURE__ */ createDevtoolsComponentHook(\n  \"component:removed\" /* COMPONENT_REMOVED */\n);\nconst devtoolsComponentRemoved = (component) => {\n  if (devtools$1 && typeof devtools$1.cleanupBuffer === \"function\" && // remove the component if it wasn't buffered\n  !devtools$1.cleanupBuffer(component)) {\n    _devtoolsComponentRemoved(component);\n  }\n};\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction createDevtoolsComponentHook(hook) {\n  return (component) => {\n    emit$1(\n      hook,\n      component.appContext.app,\n      component.uid,\n      component.parent ? component.parent.uid : void 0,\n      component\n    );\n  };\n}\nconst devtoolsPerfStart = /* @__PURE__ */ createDevtoolsPerformanceHook(\"perf:start\" /* PERFORMANCE_START */);\nconst devtoolsPerfEnd = /* @__PURE__ */ createDevtoolsPerformanceHook(\"perf:end\" /* PERFORMANCE_END */);\nfunction createDevtoolsPerformanceHook(hook) {\n  return (component, type, time) => {\n    emit$1(hook, component.appContext.app, component.uid, component, type, time);\n  };\n}\nfunction devtoolsComponentEmit(component, event, params) {\n  emit$1(\n    \"component:emit\" /* COMPONENT_EMIT */,\n    component.appContext.app,\n    component,\n    event,\n    params\n  );\n}\n\nlet currentRenderingInstance = null;\nlet currentScopeId = null;\nfunction setCurrentRenderingInstance(instance) {\n  const prev = currentRenderingInstance;\n  currentRenderingInstance = instance;\n  currentScopeId = instance && instance.type.__scopeId || null;\n  return prev;\n}\nfunction pushScopeId(id) {\n  currentScopeId = id;\n}\nfunction popScopeId() {\n  currentScopeId = null;\n}\nconst withScopeId = (_id) => withCtx;\nfunction withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot) {\n  if (!ctx) return fn;\n  if (fn._n) {\n    return fn;\n  }\n  const renderFnWithContext = (...args) => {\n    if (renderFnWithContext._d) {\n      setBlockTracking(-1);\n    }\n    const prevInstance = setCurrentRenderingInstance(ctx);\n    let res;\n    try {\n      res = fn(...args);\n    } finally {\n      setCurrentRenderingInstance(prevInstance);\n      if (renderFnWithContext._d) {\n        setBlockTracking(1);\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      devtoolsComponentUpdated(ctx);\n    }\n    return res;\n  };\n  renderFnWithContext._n = true;\n  renderFnWithContext._c = true;\n  renderFnWithContext._d = true;\n  return renderFnWithContext;\n}\n\nfunction validateDirectiveName(name) {\n  if (isBuiltInDirective(name)) {\n    warn$1(\"Do not use built-in directive ids as custom directive id: \" + name);\n  }\n}\nfunction withDirectives(vnode, directives) {\n  if (currentRenderingInstance === null) {\n    !!(process.env.NODE_ENV !== \"production\") && warn$1(`withDirectives can only be used inside render functions.`);\n    return vnode;\n  }\n  const instance = getComponentPublicInstance(currentRenderingInstance);\n  const bindings = vnode.dirs || (vnode.dirs = []);\n  for (let i = 0; i < directives.length; i++) {\n    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];\n    if (dir) {\n      if (isFunction(dir)) {\n        dir = {\n          mounted: dir,\n          updated: dir\n        };\n      }\n      if (dir.deep) {\n        traverse(value);\n      }\n      bindings.push({\n        dir,\n        instance,\n        value,\n        oldValue: void 0,\n        arg,\n        modifiers\n      });\n    }\n  }\n  return vnode;\n}\nfunction invokeDirectiveHook(vnode, prevVNode, instance, name) {\n  const bindings = vnode.dirs;\n  const oldBindings = prevVNode && prevVNode.dirs;\n  for (let i = 0; i < bindings.length; i++) {\n    const binding = bindings[i];\n    if (oldBindings) {\n      binding.oldValue = oldBindings[i].value;\n    }\n    let hook = binding.dir[name];\n    if (hook) {\n      pauseTracking();\n      callWithAsyncErrorHandling(hook, instance, 8, [\n        vnode.el,\n        binding,\n        vnode,\n        prevVNode\n      ]);\n      resetTracking();\n    }\n  }\n}\n\nconst TeleportEndKey = Symbol(\"_vte\");\nconst isTeleport = (type) => type.__isTeleport;\nconst isTeleportDisabled = (props) => props && (props.disabled || props.disabled === \"\");\nconst isTeleportDeferred = (props) => props && (props.defer || props.defer === \"\");\nconst isTargetSVG = (target) => typeof SVGElement !== \"undefined\" && target instanceof SVGElement;\nconst isTargetMathML = (target) => typeof MathMLElement === \"function\" && target instanceof MathMLElement;\nconst resolveTarget = (props, select) => {\n  const targetSelector = props && props.to;\n  if (isString(targetSelector)) {\n    if (!select) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Current renderer does not support string target for Teleports. (missing querySelector renderer option)`\n      );\n      return null;\n    } else {\n      const target = select(targetSelector);\n      if (!!(process.env.NODE_ENV !== \"production\") && !target && !isTeleportDisabled(props)) {\n        warn$1(\n          `Failed to locate Teleport target with selector \"${targetSelector}\". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`\n        );\n      }\n      return target;\n    }\n  } else {\n    if (!!(process.env.NODE_ENV !== \"production\") && !targetSelector && !isTeleportDisabled(props)) {\n      warn$1(`Invalid Teleport target: ${targetSelector}`);\n    }\n    return targetSelector;\n  }\n};\nconst TeleportImpl = {\n  name: \"Teleport\",\n  __isTeleport: true,\n  process(n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, internals) {\n    const {\n      mc: mountChildren,\n      pc: patchChildren,\n      pbc: patchBlockChildren,\n      o: { insert, querySelector, createText, createComment }\n    } = internals;\n    const disabled = isTeleportDisabled(n2.props);\n    let { shapeFlag, children, dynamicChildren } = n2;\n    if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (n1 == null) {\n      const placeholder = n2.el = !!(process.env.NODE_ENV !== \"production\") ? createComment(\"teleport start\") : createText(\"\");\n      const mainAnchor = n2.anchor = !!(process.env.NODE_ENV !== \"production\") ? createComment(\"teleport end\") : createText(\"\");\n      insert(placeholder, container, anchor);\n      insert(mainAnchor, container, anchor);\n      const mount = (container2, anchor2) => {\n        if (shapeFlag & 16) {\n          if (parentComponent && parentComponent.isCE) {\n            parentComponent.ce._teleportTarget = container2;\n          }\n          mountChildren(\n            children,\n            container2,\n            anchor2,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        }\n      };\n      const mountToTarget = () => {\n        const target = n2.target = resolveTarget(n2.props, querySelector);\n        const targetAnchor = prepareAnchor(target, n2, createText, insert);\n        if (target) {\n          if (namespace !== \"svg\" && isTargetSVG(target)) {\n            namespace = \"svg\";\n          } else if (namespace !== \"mathml\" && isTargetMathML(target)) {\n            namespace = \"mathml\";\n          }\n          if (!disabled) {\n            mount(target, targetAnchor);\n            updateCssVars(n2, false);\n          }\n        } else if (!!(process.env.NODE_ENV !== \"production\") && !disabled) {\n          warn$1(\n            \"Invalid Teleport target on mount:\",\n            target,\n            `(${typeof target})`\n          );\n        }\n      };\n      if (disabled) {\n        mount(container, mainAnchor);\n        updateCssVars(n2, true);\n      }\n      if (isTeleportDeferred(n2.props)) {\n        n2.el.__isMounted = false;\n        queuePostRenderEffect(() => {\n          mountToTarget();\n          delete n2.el.__isMounted;\n        }, parentSuspense);\n      } else {\n        mountToTarget();\n      }\n    } else {\n      if (isTeleportDeferred(n2.props) && n1.el.__isMounted === false) {\n        queuePostRenderEffect(() => {\n          TeleportImpl.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n        }, parentSuspense);\n        return;\n      }\n      n2.el = n1.el;\n      n2.targetStart = n1.targetStart;\n      const mainAnchor = n2.anchor = n1.anchor;\n      const target = n2.target = n1.target;\n      const targetAnchor = n2.targetAnchor = n1.targetAnchor;\n      const wasDisabled = isTeleportDisabled(n1.props);\n      const currentContainer = wasDisabled ? container : target;\n      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;\n      if (namespace === \"svg\" || isTargetSVG(target)) {\n        namespace = \"svg\";\n      } else if (namespace === \"mathml\" || isTargetMathML(target)) {\n        namespace = \"mathml\";\n      }\n      if (dynamicChildren) {\n        patchBlockChildren(\n          n1.dynamicChildren,\n          dynamicChildren,\n          currentContainer,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds\n        );\n        traverseStaticChildren(n1, n2, !!!(process.env.NODE_ENV !== \"production\"));\n      } else if (!optimized) {\n        patchChildren(\n          n1,\n          n2,\n          currentContainer,\n          currentAnchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          false\n        );\n      }\n      if (disabled) {\n        if (!wasDisabled) {\n          moveTeleport(\n            n2,\n            container,\n            mainAnchor,\n            internals,\n            1\n          );\n        } else {\n          if (n2.props && n1.props && n2.props.to !== n1.props.to) {\n            n2.props.to = n1.props.to;\n          }\n        }\n      } else {\n        if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {\n          const nextTarget = n2.target = resolveTarget(\n            n2.props,\n            querySelector\n          );\n          if (nextTarget) {\n            moveTeleport(\n              n2,\n              nextTarget,\n              null,\n              internals,\n              0\n            );\n          } else if (!!(process.env.NODE_ENV !== \"production\")) {\n            warn$1(\n              \"Invalid Teleport target on update:\",\n              target,\n              `(${typeof target})`\n            );\n          }\n        } else if (wasDisabled) {\n          moveTeleport(\n            n2,\n            target,\n            targetAnchor,\n            internals,\n            1\n          );\n        }\n      }\n      updateCssVars(n2, disabled);\n    }\n  },\n  remove(vnode, parentComponent, parentSuspense, { um: unmount, o: { remove: hostRemove } }, doRemove) {\n    const {\n      shapeFlag,\n      children,\n      anchor,\n      targetStart,\n      targetAnchor,\n      target,\n      props\n    } = vnode;\n    if (target) {\n      hostRemove(targetStart);\n      hostRemove(targetAnchor);\n    }\n    doRemove && hostRemove(anchor);\n    if (shapeFlag & 16) {\n      const shouldRemove = doRemove || !isTeleportDisabled(props);\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        unmount(\n          child,\n          parentComponent,\n          parentSuspense,\n          shouldRemove,\n          !!child.dynamicChildren\n        );\n      }\n    }\n  },\n  move: moveTeleport,\n  hydrate: hydrateTeleport\n};\nfunction moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2) {\n  if (moveType === 0) {\n    insert(vnode.targetAnchor, container, parentAnchor);\n  }\n  const { el, anchor, shapeFlag, children, props } = vnode;\n  const isReorder = moveType === 2;\n  if (isReorder) {\n    insert(el, container, parentAnchor);\n  }\n  if (!isReorder || isTeleportDisabled(props)) {\n    if (shapeFlag & 16) {\n      for (let i = 0; i < children.length; i++) {\n        move(\n          children[i],\n          container,\n          parentAnchor,\n          2\n        );\n      }\n    }\n  }\n  if (isReorder) {\n    insert(anchor, container, parentAnchor);\n  }\n}\nfunction hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, {\n  o: { nextSibling, parentNode, querySelector, insert, createText }\n}, hydrateChildren) {\n  const target = vnode.target = resolveTarget(\n    vnode.props,\n    querySelector\n  );\n  if (target) {\n    const disabled = isTeleportDisabled(vnode.props);\n    const targetNode = target._lpa || target.firstChild;\n    if (vnode.shapeFlag & 16) {\n      if (disabled) {\n        vnode.anchor = hydrateChildren(\n          nextSibling(node),\n          vnode,\n          parentNode(node),\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n        vnode.targetStart = targetNode;\n        vnode.targetAnchor = targetNode && nextSibling(targetNode);\n      } else {\n        vnode.anchor = nextSibling(node);\n        let targetAnchor = targetNode;\n        while (targetAnchor) {\n          if (targetAnchor && targetAnchor.nodeType === 8) {\n            if (targetAnchor.data === \"teleport start anchor\") {\n              vnode.targetStart = targetAnchor;\n            } else if (targetAnchor.data === \"teleport anchor\") {\n              vnode.targetAnchor = targetAnchor;\n              target._lpa = vnode.targetAnchor && nextSibling(vnode.targetAnchor);\n              break;\n            }\n          }\n          targetAnchor = nextSibling(targetAnchor);\n        }\n        if (!vnode.targetAnchor) {\n          prepareAnchor(target, vnode, createText, insert);\n        }\n        hydrateChildren(\n          targetNode && nextSibling(targetNode),\n          vnode,\n          target,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n      }\n    }\n    updateCssVars(vnode, disabled);\n  }\n  return vnode.anchor && nextSibling(vnode.anchor);\n}\nconst Teleport = TeleportImpl;\nfunction updateCssVars(vnode, isDisabled) {\n  const ctx = vnode.ctx;\n  if (ctx && ctx.ut) {\n    let node, anchor;\n    if (isDisabled) {\n      node = vnode.el;\n      anchor = vnode.anchor;\n    } else {\n      node = vnode.targetStart;\n      anchor = vnode.targetAnchor;\n    }\n    while (node && node !== anchor) {\n      if (node.nodeType === 1) node.setAttribute(\"data-v-owner\", ctx.uid);\n      node = node.nextSibling;\n    }\n    ctx.ut();\n  }\n}\nfunction prepareAnchor(target, vnode, createText, insert) {\n  const targetStart = vnode.targetStart = createText(\"\");\n  const targetAnchor = vnode.targetAnchor = createText(\"\");\n  targetStart[TeleportEndKey] = targetAnchor;\n  if (target) {\n    insert(targetStart, target);\n    insert(targetAnchor, target);\n  }\n  return targetAnchor;\n}\n\nconst leaveCbKey = Symbol(\"_leaveCb\");\nconst enterCbKey = Symbol(\"_enterCb\");\nfunction useTransitionState() {\n  const state = {\n    isMounted: false,\n    isLeaving: false,\n    isUnmounting: false,\n    leavingVNodes: /* @__PURE__ */ new Map()\n  };\n  onMounted(() => {\n    state.isMounted = true;\n  });\n  onBeforeUnmount(() => {\n    state.isUnmounting = true;\n  });\n  return state;\n}\nconst TransitionHookValidator = [Function, Array];\nconst BaseTransitionPropsValidators = {\n  mode: String,\n  appear: Boolean,\n  persisted: Boolean,\n  // enter\n  onBeforeEnter: TransitionHookValidator,\n  onEnter: TransitionHookValidator,\n  onAfterEnter: TransitionHookValidator,\n  onEnterCancelled: TransitionHookValidator,\n  // leave\n  onBeforeLeave: TransitionHookValidator,\n  onLeave: TransitionHookValidator,\n  onAfterLeave: TransitionHookValidator,\n  onLeaveCancelled: TransitionHookValidator,\n  // appear\n  onBeforeAppear: TransitionHookValidator,\n  onAppear: TransitionHookValidator,\n  onAfterAppear: TransitionHookValidator,\n  onAppearCancelled: TransitionHookValidator\n};\nconst recursiveGetSubtree = (instance) => {\n  const subTree = instance.subTree;\n  return subTree.component ? recursiveGetSubtree(subTree.component) : subTree;\n};\nconst BaseTransitionImpl = {\n  name: `BaseTransition`,\n  props: BaseTransitionPropsValidators,\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const state = useTransitionState();\n    return () => {\n      const children = slots.default && getTransitionRawChildren(slots.default(), true);\n      if (!children || !children.length) {\n        return;\n      }\n      const child = findNonCommentChild(children);\n      const rawProps = toRaw(props);\n      const { mode } = rawProps;\n      if (!!(process.env.NODE_ENV !== \"production\") && mode && mode !== \"in-out\" && mode !== \"out-in\" && mode !== \"default\") {\n        warn$1(`invalid <transition> mode: ${mode}`);\n      }\n      if (state.isLeaving) {\n        return emptyPlaceholder(child);\n      }\n      const innerChild = getInnerChild$1(child);\n      if (!innerChild) {\n        return emptyPlaceholder(child);\n      }\n      let enterHooks = resolveTransitionHooks(\n        innerChild,\n        rawProps,\n        state,\n        instance,\n        // #11061, ensure enterHooks is fresh after clone\n        (hooks) => enterHooks = hooks\n      );\n      if (innerChild.type !== Comment) {\n        setTransitionHooks(innerChild, enterHooks);\n      }\n      let oldInnerChild = instance.subTree && getInnerChild$1(instance.subTree);\n      if (oldInnerChild && oldInnerChild.type !== Comment && !isSameVNodeType(innerChild, oldInnerChild) && recursiveGetSubtree(instance).type !== Comment) {\n        let leavingHooks = resolveTransitionHooks(\n          oldInnerChild,\n          rawProps,\n          state,\n          instance\n        );\n        setTransitionHooks(oldInnerChild, leavingHooks);\n        if (mode === \"out-in\" && innerChild.type !== Comment) {\n          state.isLeaving = true;\n          leavingHooks.afterLeave = () => {\n            state.isLeaving = false;\n            if (!(instance.job.flags & 8)) {\n              instance.update();\n            }\n            delete leavingHooks.afterLeave;\n            oldInnerChild = void 0;\n          };\n          return emptyPlaceholder(child);\n        } else if (mode === \"in-out\" && innerChild.type !== Comment) {\n          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {\n            const leavingVNodesCache = getLeavingNodesForType(\n              state,\n              oldInnerChild\n            );\n            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;\n            el[leaveCbKey] = () => {\n              earlyRemove();\n              el[leaveCbKey] = void 0;\n              delete enterHooks.delayedLeave;\n              oldInnerChild = void 0;\n            };\n            enterHooks.delayedLeave = () => {\n              delayedLeave();\n              delete enterHooks.delayedLeave;\n              oldInnerChild = void 0;\n            };\n          };\n        } else {\n          oldInnerChild = void 0;\n        }\n      } else if (oldInnerChild) {\n        oldInnerChild = void 0;\n      }\n      return child;\n    };\n  }\n};\nfunction findNonCommentChild(children) {\n  let child = children[0];\n  if (children.length > 1) {\n    let hasFound = false;\n    for (const c of children) {\n      if (c.type !== Comment) {\n        if (!!(process.env.NODE_ENV !== \"production\") && hasFound) {\n          warn$1(\n            \"<transition> can only be used on a single element or component. Use <transition-group> for lists.\"\n          );\n          break;\n        }\n        child = c;\n        hasFound = true;\n        if (!!!(process.env.NODE_ENV !== \"production\")) break;\n      }\n    }\n  }\n  return child;\n}\nconst BaseTransition = BaseTransitionImpl;\nfunction getLeavingNodesForType(state, vnode) {\n  const { leavingVNodes } = state;\n  let leavingVNodesCache = leavingVNodes.get(vnode.type);\n  if (!leavingVNodesCache) {\n    leavingVNodesCache = /* @__PURE__ */ Object.create(null);\n    leavingVNodes.set(vnode.type, leavingVNodesCache);\n  }\n  return leavingVNodesCache;\n}\nfunction resolveTransitionHooks(vnode, props, state, instance, postClone) {\n  const {\n    appear,\n    mode,\n    persisted = false,\n    onBeforeEnter,\n    onEnter,\n    onAfterEnter,\n    onEnterCancelled,\n    onBeforeLeave,\n    onLeave,\n    onAfterLeave,\n    onLeaveCancelled,\n    onBeforeAppear,\n    onAppear,\n    onAfterAppear,\n    onAppearCancelled\n  } = props;\n  const key = String(vnode.key);\n  const leavingVNodesCache = getLeavingNodesForType(state, vnode);\n  const callHook = (hook, args) => {\n    hook && callWithAsyncErrorHandling(\n      hook,\n      instance,\n      9,\n      args\n    );\n  };\n  const callAsyncHook = (hook, args) => {\n    const done = args[1];\n    callHook(hook, args);\n    if (isArray(hook)) {\n      if (hook.every((hook2) => hook2.length <= 1)) done();\n    } else if (hook.length <= 1) {\n      done();\n    }\n  };\n  const hooks = {\n    mode,\n    persisted,\n    beforeEnter(el) {\n      let hook = onBeforeEnter;\n      if (!state.isMounted) {\n        if (appear) {\n          hook = onBeforeAppear || onBeforeEnter;\n        } else {\n          return;\n        }\n      }\n      if (el[leaveCbKey]) {\n        el[leaveCbKey](\n          true\n          /* cancelled */\n        );\n      }\n      const leavingVNode = leavingVNodesCache[key];\n      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el[leaveCbKey]) {\n        leavingVNode.el[leaveCbKey]();\n      }\n      callHook(hook, [el]);\n    },\n    enter(el) {\n      let hook = onEnter;\n      let afterHook = onAfterEnter;\n      let cancelHook = onEnterCancelled;\n      if (!state.isMounted) {\n        if (appear) {\n          hook = onAppear || onEnter;\n          afterHook = onAfterAppear || onAfterEnter;\n          cancelHook = onAppearCancelled || onEnterCancelled;\n        } else {\n          return;\n        }\n      }\n      let called = false;\n      const done = el[enterCbKey] = (cancelled) => {\n        if (called) return;\n        called = true;\n        if (cancelled) {\n          callHook(cancelHook, [el]);\n        } else {\n          callHook(afterHook, [el]);\n        }\n        if (hooks.delayedLeave) {\n          hooks.delayedLeave();\n        }\n        el[enterCbKey] = void 0;\n      };\n      if (hook) {\n        callAsyncHook(hook, [el, done]);\n      } else {\n        done();\n      }\n    },\n    leave(el, remove) {\n      const key2 = String(vnode.key);\n      if (el[enterCbKey]) {\n        el[enterCbKey](\n          true\n          /* cancelled */\n        );\n      }\n      if (state.isUnmounting) {\n        return remove();\n      }\n      callHook(onBeforeLeave, [el]);\n      let called = false;\n      const done = el[leaveCbKey] = (cancelled) => {\n        if (called) return;\n        called = true;\n        remove();\n        if (cancelled) {\n          callHook(onLeaveCancelled, [el]);\n        } else {\n          callHook(onAfterLeave, [el]);\n        }\n        el[leaveCbKey] = void 0;\n        if (leavingVNodesCache[key2] === vnode) {\n          delete leavingVNodesCache[key2];\n        }\n      };\n      leavingVNodesCache[key2] = vnode;\n      if (onLeave) {\n        callAsyncHook(onLeave, [el, done]);\n      } else {\n        done();\n      }\n    },\n    clone(vnode2) {\n      const hooks2 = resolveTransitionHooks(\n        vnode2,\n        props,\n        state,\n        instance,\n        postClone\n      );\n      if (postClone) postClone(hooks2);\n      return hooks2;\n    }\n  };\n  return hooks;\n}\nfunction emptyPlaceholder(vnode) {\n  if (isKeepAlive(vnode)) {\n    vnode = cloneVNode(vnode);\n    vnode.children = null;\n    return vnode;\n  }\n}\nfunction getInnerChild$1(vnode) {\n  if (!isKeepAlive(vnode)) {\n    if (isTeleport(vnode.type) && vnode.children) {\n      return findNonCommentChild(vnode.children);\n    }\n    return vnode;\n  }\n  if (vnode.component) {\n    return vnode.component.subTree;\n  }\n  const { shapeFlag, children } = vnode;\n  if (children) {\n    if (shapeFlag & 16) {\n      return children[0];\n    }\n    if (shapeFlag & 32 && isFunction(children.default)) {\n      return children.default();\n    }\n  }\n}\nfunction setTransitionHooks(vnode, hooks) {\n  if (vnode.shapeFlag & 6 && vnode.component) {\n    vnode.transition = hooks;\n    setTransitionHooks(vnode.component.subTree, hooks);\n  } else if (vnode.shapeFlag & 128) {\n    vnode.ssContent.transition = hooks.clone(vnode.ssContent);\n    vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);\n  } else {\n    vnode.transition = hooks;\n  }\n}\nfunction getTransitionRawChildren(children, keepComment = false, parentKey) {\n  let ret = [];\n  let keyedFragmentCount = 0;\n  for (let i = 0; i < children.length; i++) {\n    let child = children[i];\n    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i);\n    if (child.type === Fragment) {\n      if (child.patchFlag & 128) keyedFragmentCount++;\n      ret = ret.concat(\n        getTransitionRawChildren(child.children, keepComment, key)\n      );\n    } else if (keepComment || child.type !== Comment) {\n      ret.push(key != null ? cloneVNode(child, { key }) : child);\n    }\n  }\n  if (keyedFragmentCount > 1) {\n    for (let i = 0; i < ret.length; i++) {\n      ret[i].patchFlag = -2;\n    }\n  }\n  return ret;\n}\n\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineComponent(options, extraOptions) {\n  return isFunction(options) ? (\n    // #8236: extend call and options.name access are considered side-effects\n    // by Rollup, so we have to wrap it in a pure-annotated IIFE.\n    /* @__PURE__ */ (() => extend({ name: options.name }, extraOptions, { setup: options }))()\n  ) : options;\n}\n\nfunction useId() {\n  const i = getCurrentInstance();\n  if (i) {\n    return (i.appContext.config.idPrefix || \"v\") + \"-\" + i.ids[0] + i.ids[1]++;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `useId() is called when there is no active component instance to be associated with.`\n    );\n  }\n  return \"\";\n}\nfunction markAsyncBoundary(instance) {\n  instance.ids = [instance.ids[0] + instance.ids[2]++ + \"-\", 0, 0];\n}\n\nconst knownTemplateRefs = /* @__PURE__ */ new WeakSet();\nfunction useTemplateRef(key) {\n  const i = getCurrentInstance();\n  const r = shallowRef(null);\n  if (i) {\n    const refs = i.refs === EMPTY_OBJ ? i.refs = {} : i.refs;\n    let desc;\n    if (!!(process.env.NODE_ENV !== \"production\") && (desc = Object.getOwnPropertyDescriptor(refs, key)) && !desc.configurable) {\n      warn$1(`useTemplateRef('${key}') already exists.`);\n    } else {\n      Object.defineProperty(refs, key, {\n        enumerable: true,\n        get: () => r.value,\n        set: (val) => r.value = val\n      });\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `useTemplateRef() is called when there is no active component instance to be associated with.`\n    );\n  }\n  const ret = !!(process.env.NODE_ENV !== \"production\") ? readonly(r) : r;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    knownTemplateRefs.add(ret);\n  }\n  return ret;\n}\n\nfunction setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {\n  if (isArray(rawRef)) {\n    rawRef.forEach(\n      (r, i) => setRef(\n        r,\n        oldRawRef && (isArray(oldRawRef) ? oldRawRef[i] : oldRawRef),\n        parentSuspense,\n        vnode,\n        isUnmount\n      )\n    );\n    return;\n  }\n  if (isAsyncWrapper(vnode) && !isUnmount) {\n    if (vnode.shapeFlag & 512 && vnode.type.__asyncResolved && vnode.component.subTree.component) {\n      setRef(rawRef, oldRawRef, parentSuspense, vnode.component.subTree);\n    }\n    return;\n  }\n  const refValue = vnode.shapeFlag & 4 ? getComponentPublicInstance(vnode.component) : vnode.el;\n  const value = isUnmount ? null : refValue;\n  const { i: owner, r: ref } = rawRef;\n  if (!!(process.env.NODE_ENV !== \"production\") && !owner) {\n    warn$1(\n      `Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.`\n    );\n    return;\n  }\n  const oldRef = oldRawRef && oldRawRef.r;\n  const refs = owner.refs === EMPTY_OBJ ? owner.refs = {} : owner.refs;\n  const setupState = owner.setupState;\n  const rawSetupState = toRaw(setupState);\n  const canSetSetupRef = setupState === EMPTY_OBJ ? () => false : (key) => {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      if (hasOwn(rawSetupState, key) && !isRef(rawSetupState[key])) {\n        warn$1(\n          `Template ref \"${key}\" used on a non-ref value. It will not work in the production build.`\n        );\n      }\n      if (knownTemplateRefs.has(rawSetupState[key])) {\n        return false;\n      }\n    }\n    return hasOwn(rawSetupState, key);\n  };\n  if (oldRef != null && oldRef !== ref) {\n    if (isString(oldRef)) {\n      refs[oldRef] = null;\n      if (canSetSetupRef(oldRef)) {\n        setupState[oldRef] = null;\n      }\n    } else if (isRef(oldRef)) {\n      oldRef.value = null;\n    }\n  }\n  if (isFunction(ref)) {\n    callWithErrorHandling(ref, owner, 12, [value, refs]);\n  } else {\n    const _isString = isString(ref);\n    const _isRef = isRef(ref);\n    if (_isString || _isRef) {\n      const doSet = () => {\n        if (rawRef.f) {\n          const existing = _isString ? canSetSetupRef(ref) ? setupState[ref] : refs[ref] : ref.value;\n          if (isUnmount) {\n            isArray(existing) && remove(existing, refValue);\n          } else {\n            if (!isArray(existing)) {\n              if (_isString) {\n                refs[ref] = [refValue];\n                if (canSetSetupRef(ref)) {\n                  setupState[ref] = refs[ref];\n                }\n              } else {\n                ref.value = [refValue];\n                if (rawRef.k) refs[rawRef.k] = ref.value;\n              }\n            } else if (!existing.includes(refValue)) {\n              existing.push(refValue);\n            }\n          }\n        } else if (_isString) {\n          refs[ref] = value;\n          if (canSetSetupRef(ref)) {\n            setupState[ref] = value;\n          }\n        } else if (_isRef) {\n          ref.value = value;\n          if (rawRef.k) refs[rawRef.k] = value;\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Invalid template ref type:\", ref, `(${typeof ref})`);\n        }\n      };\n      if (value) {\n        doSet.id = -1;\n        queuePostRenderEffect(doSet, parentSuspense);\n      } else {\n        doSet();\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(\"Invalid template ref type:\", ref, `(${typeof ref})`);\n    }\n  }\n}\n\nlet hasLoggedMismatchError = false;\nconst logMismatchError = () => {\n  if (hasLoggedMismatchError) {\n    return;\n  }\n  console.error(\"Hydration completed but contains mismatches.\");\n  hasLoggedMismatchError = true;\n};\nconst isSVGContainer = (container) => container.namespaceURI.includes(\"svg\") && container.tagName !== \"foreignObject\";\nconst isMathMLContainer = (container) => container.namespaceURI.includes(\"MathML\");\nconst getContainerType = (container) => {\n  if (container.nodeType !== 1) return void 0;\n  if (isSVGContainer(container)) return \"svg\";\n  if (isMathMLContainer(container)) return \"mathml\";\n  return void 0;\n};\nconst isComment = (node) => node.nodeType === 8;\nfunction createHydrationFunctions(rendererInternals) {\n  const {\n    mt: mountComponent,\n    p: patch,\n    o: {\n      patchProp,\n      createText,\n      nextSibling,\n      parentNode,\n      remove,\n      insert,\n      createComment\n    }\n  } = rendererInternals;\n  const hydrate = (vnode, container) => {\n    if (!container.hasChildNodes()) {\n      (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n        `Attempting to hydrate existing markup but container is empty. Performing full mount instead.`\n      );\n      patch(null, vnode, container);\n      flushPostFlushCbs();\n      container._vnode = vnode;\n      return;\n    }\n    hydrateNode(container.firstChild, vnode, null, null, null);\n    flushPostFlushCbs();\n    container._vnode = vnode;\n  };\n  const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {\n    optimized = optimized || !!vnode.dynamicChildren;\n    const isFragmentStart = isComment(node) && node.data === \"[\";\n    const onMismatch = () => handleMismatch(\n      node,\n      vnode,\n      parentComponent,\n      parentSuspense,\n      slotScopeIds,\n      isFragmentStart\n    );\n    const { type, ref, shapeFlag, patchFlag } = vnode;\n    let domType = node.nodeType;\n    vnode.el = node;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      def(node, \"__vnode\", vnode, true);\n      def(node, \"__vueParentComponent\", parentComponent, true);\n    }\n    if (patchFlag === -2) {\n      optimized = false;\n      vnode.dynamicChildren = null;\n    }\n    let nextNode = null;\n    switch (type) {\n      case Text:\n        if (domType !== 3) {\n          if (vnode.children === \"\") {\n            insert(vnode.el = createText(\"\"), parentNode(node), node);\n            nextNode = node;\n          } else {\n            nextNode = onMismatch();\n          }\n        } else {\n          if (node.data !== vnode.children) {\n            (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n              `Hydration text mismatch in`,\n              node.parentNode,\n              `\n  - rendered on server: ${JSON.stringify(\n                node.data\n              )}\n  - expected on client: ${JSON.stringify(vnode.children)}`\n            );\n            logMismatchError();\n            node.data = vnode.children;\n          }\n          nextNode = nextSibling(node);\n        }\n        break;\n      case Comment:\n        if (isTemplateNode(node)) {\n          nextNode = nextSibling(node);\n          replaceNode(\n            vnode.el = node.content.firstChild,\n            node,\n            parentComponent\n          );\n        } else if (domType !== 8 || isFragmentStart) {\n          nextNode = onMismatch();\n        } else {\n          nextNode = nextSibling(node);\n        }\n        break;\n      case Static:\n        if (isFragmentStart) {\n          node = nextSibling(node);\n          domType = node.nodeType;\n        }\n        if (domType === 1 || domType === 3) {\n          nextNode = node;\n          const needToAdoptContent = !vnode.children.length;\n          for (let i = 0; i < vnode.staticCount; i++) {\n            if (needToAdoptContent)\n              vnode.children += nextNode.nodeType === 1 ? nextNode.outerHTML : nextNode.data;\n            if (i === vnode.staticCount - 1) {\n              vnode.anchor = nextNode;\n            }\n            nextNode = nextSibling(nextNode);\n          }\n          return isFragmentStart ? nextSibling(nextNode) : nextNode;\n        } else {\n          onMismatch();\n        }\n        break;\n      case Fragment:\n        if (!isFragmentStart) {\n          nextNode = onMismatch();\n        } else {\n          nextNode = hydrateFragment(\n            node,\n            vnode,\n            parentComponent,\n            parentSuspense,\n            slotScopeIds,\n            optimized\n          );\n        }\n        break;\n      default:\n        if (shapeFlag & 1) {\n          if ((domType !== 1 || vnode.type.toLowerCase() !== node.tagName.toLowerCase()) && !isTemplateNode(node)) {\n            nextNode = onMismatch();\n          } else {\n            nextNode = hydrateElement(\n              node,\n              vnode,\n              parentComponent,\n              parentSuspense,\n              slotScopeIds,\n              optimized\n            );\n          }\n        } else if (shapeFlag & 6) {\n          vnode.slotScopeIds = slotScopeIds;\n          const container = parentNode(node);\n          if (isFragmentStart) {\n            nextNode = locateClosingAnchor(node);\n          } else if (isComment(node) && node.data === \"teleport start\") {\n            nextNode = locateClosingAnchor(node, node.data, \"teleport end\");\n          } else {\n            nextNode = nextSibling(node);\n          }\n          mountComponent(\n            vnode,\n            container,\n            null,\n            parentComponent,\n            parentSuspense,\n            getContainerType(container),\n            optimized\n          );\n          if (isAsyncWrapper(vnode) && !vnode.type.__asyncResolved) {\n            let subTree;\n            if (isFragmentStart) {\n              subTree = createVNode(Fragment);\n              subTree.anchor = nextNode ? nextNode.previousSibling : container.lastChild;\n            } else {\n              subTree = node.nodeType === 3 ? createTextVNode(\"\") : createVNode(\"div\");\n            }\n            subTree.el = node;\n            vnode.component.subTree = subTree;\n          }\n        } else if (shapeFlag & 64) {\n          if (domType !== 8) {\n            nextNode = onMismatch();\n          } else {\n            nextNode = vnode.type.hydrate(\n              node,\n              vnode,\n              parentComponent,\n              parentSuspense,\n              slotScopeIds,\n              optimized,\n              rendererInternals,\n              hydrateChildren\n            );\n          }\n        } else if (shapeFlag & 128) {\n          nextNode = vnode.type.hydrate(\n            node,\n            vnode,\n            parentComponent,\n            parentSuspense,\n            getContainerType(parentNode(node)),\n            slotScopeIds,\n            optimized,\n            rendererInternals,\n            hydrateNode\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) {\n          warn$1(\"Invalid HostVNode type:\", type, `(${typeof type})`);\n        }\n    }\n    if (ref != null) {\n      setRef(ref, null, parentSuspense, vnode);\n    }\n    return nextNode;\n  };\n  const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    optimized = optimized || !!vnode.dynamicChildren;\n    const { type, props, patchFlag, shapeFlag, dirs, transition } = vnode;\n    const forcePatch = type === \"input\" || type === \"option\";\n    if (!!(process.env.NODE_ENV !== \"production\") || forcePatch || patchFlag !== -1) {\n      if (dirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"created\");\n      }\n      let needCallTransitionHooks = false;\n      if (isTemplateNode(el)) {\n        needCallTransitionHooks = needTransition(\n          null,\n          // no need check parentSuspense in hydration\n          transition\n        ) && parentComponent && parentComponent.vnode.props && parentComponent.vnode.props.appear;\n        const content = el.content.firstChild;\n        if (needCallTransitionHooks) {\n          const cls = content.getAttribute(\"class\");\n          if (cls) content.$cls = cls;\n          transition.beforeEnter(content);\n        }\n        replaceNode(content, el, parentComponent);\n        vnode.el = el = content;\n      }\n      if (shapeFlag & 16 && // skip if element has innerHTML / textContent\n      !(props && (props.innerHTML || props.textContent))) {\n        let next = hydrateChildren(\n          el.firstChild,\n          vnode,\n          el,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n        let hasWarned = false;\n        while (next) {\n          if (!isMismatchAllowed(el, 1 /* CHILDREN */)) {\n            if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && !hasWarned) {\n              warn$1(\n                `Hydration children mismatch on`,\n                el,\n                `\nServer rendered element contains more child nodes than client vdom.`\n              );\n              hasWarned = true;\n            }\n            logMismatchError();\n          }\n          const cur = next;\n          next = next.nextSibling;\n          remove(cur);\n        }\n      } else if (shapeFlag & 8) {\n        let clientText = vnode.children;\n        if (clientText[0] === \"\\n\" && (el.tagName === \"PRE\" || el.tagName === \"TEXTAREA\")) {\n          clientText = clientText.slice(1);\n        }\n        if (el.textContent !== clientText) {\n          if (!isMismatchAllowed(el, 0 /* TEXT */)) {\n            (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n              `Hydration text content mismatch on`,\n              el,\n              `\n  - rendered on server: ${el.textContent}\n  - expected on client: ${vnode.children}`\n            );\n            logMismatchError();\n          }\n          el.textContent = vnode.children;\n        }\n      }\n      if (props) {\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__ || forcePatch || !optimized || patchFlag & (16 | 32)) {\n          const isCustomElement = el.tagName.includes(\"-\");\n          for (const key in props) {\n            if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && // #11189 skip if this node has directives that have created hooks\n            // as it could have mutated the DOM in any possible way\n            !(dirs && dirs.some((d) => d.dir.created)) && propHasMismatch(el, key, props[key], vnode, parentComponent)) {\n              logMismatchError();\n            }\n            if (forcePatch && (key.endsWith(\"value\") || key === \"indeterminate\") || isOn(key) && !isReservedProp(key) || // force hydrate v-bind with .prop modifiers\n            key[0] === \".\" || isCustomElement) {\n              patchProp(el, key, null, props[key], void 0, parentComponent);\n            }\n          }\n        } else if (props.onClick) {\n          patchProp(\n            el,\n            \"onClick\",\n            null,\n            props.onClick,\n            void 0,\n            parentComponent\n          );\n        } else if (patchFlag & 4 && isReactive(props.style)) {\n          for (const key in props.style) props.style[key];\n        }\n      }\n      let vnodeHooks;\n      if (vnodeHooks = props && props.onVnodeBeforeMount) {\n        invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n      }\n      if (dirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"beforeMount\");\n      }\n      if ((vnodeHooks = props && props.onVnodeMounted) || dirs || needCallTransitionHooks) {\n        queueEffectWithSuspense(() => {\n          vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n          needCallTransitionHooks && transition.enter(el);\n          dirs && invokeDirectiveHook(vnode, null, parentComponent, \"mounted\");\n        }, parentSuspense);\n      }\n    }\n    return el.nextSibling;\n  };\n  const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    optimized = optimized || !!parentVNode.dynamicChildren;\n    const children = parentVNode.children;\n    const l = children.length;\n    let hasWarned = false;\n    for (let i = 0; i < l; i++) {\n      const vnode = optimized ? children[i] : children[i] = normalizeVNode(children[i]);\n      const isText = vnode.type === Text;\n      if (node) {\n        if (isText && !optimized) {\n          if (i + 1 < l && normalizeVNode(children[i + 1]).type === Text) {\n            insert(\n              createText(\n                node.data.slice(vnode.children.length)\n              ),\n              container,\n              nextSibling(node)\n            );\n            node.data = vnode.children;\n          }\n        }\n        node = hydrateNode(\n          node,\n          vnode,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n      } else if (isText && !vnode.children) {\n        insert(vnode.el = createText(\"\"), container);\n      } else {\n        if (!isMismatchAllowed(container, 1 /* CHILDREN */)) {\n          if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && !hasWarned) {\n            warn$1(\n              `Hydration children mismatch on`,\n              container,\n              `\nServer rendered element contains fewer child nodes than client vdom.`\n            );\n            hasWarned = true;\n          }\n          logMismatchError();\n        }\n        patch(\n          null,\n          vnode,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          getContainerType(container),\n          slotScopeIds\n        );\n      }\n    }\n    return node;\n  };\n  const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    const { slotScopeIds: fragmentSlotScopeIds } = vnode;\n    if (fragmentSlotScopeIds) {\n      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;\n    }\n    const container = parentNode(node);\n    const next = hydrateChildren(\n      nextSibling(node),\n      vnode,\n      container,\n      parentComponent,\n      parentSuspense,\n      slotScopeIds,\n      optimized\n    );\n    if (next && isComment(next) && next.data === \"]\") {\n      return nextSibling(vnode.anchor = next);\n    } else {\n      logMismatchError();\n      insert(vnode.anchor = createComment(`]`), container, next);\n      return next;\n    }\n  };\n  const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {\n    if (!isMismatchAllowed(node.parentElement, 1 /* CHILDREN */)) {\n      (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n        `Hydration node mismatch:\n- rendered on server:`,\n        node,\n        node.nodeType === 3 ? `(text)` : isComment(node) && node.data === \"[\" ? `(start of fragment)` : ``,\n        `\n- expected on client:`,\n        vnode.type\n      );\n      logMismatchError();\n    }\n    vnode.el = null;\n    if (isFragment) {\n      const end = locateClosingAnchor(node);\n      while (true) {\n        const next2 = nextSibling(node);\n        if (next2 && next2 !== end) {\n          remove(next2);\n        } else {\n          break;\n        }\n      }\n    }\n    const next = nextSibling(node);\n    const container = parentNode(node);\n    remove(node);\n    patch(\n      null,\n      vnode,\n      container,\n      next,\n      parentComponent,\n      parentSuspense,\n      getContainerType(container),\n      slotScopeIds\n    );\n    if (parentComponent) {\n      parentComponent.vnode.el = vnode.el;\n      updateHOCHostEl(parentComponent, vnode.el);\n    }\n    return next;\n  };\n  const locateClosingAnchor = (node, open = \"[\", close = \"]\") => {\n    let match = 0;\n    while (node) {\n      node = nextSibling(node);\n      if (node && isComment(node)) {\n        if (node.data === open) match++;\n        if (node.data === close) {\n          if (match === 0) {\n            return nextSibling(node);\n          } else {\n            match--;\n          }\n        }\n      }\n    }\n    return node;\n  };\n  const replaceNode = (newNode, oldNode, parentComponent) => {\n    const parentNode2 = oldNode.parentNode;\n    if (parentNode2) {\n      parentNode2.replaceChild(newNode, oldNode);\n    }\n    let parent = parentComponent;\n    while (parent) {\n      if (parent.vnode.el === oldNode) {\n        parent.vnode.el = parent.subTree.el = newNode;\n      }\n      parent = parent.parent;\n    }\n  };\n  const isTemplateNode = (node) => {\n    return node.nodeType === 1 && node.tagName === \"TEMPLATE\";\n  };\n  return [hydrate, hydrateNode];\n}\nfunction propHasMismatch(el, key, clientValue, vnode, instance) {\n  let mismatchType;\n  let mismatchKey;\n  let actual;\n  let expected;\n  if (key === \"class\") {\n    if (el.$cls) {\n      actual = el.$cls;\n      delete el.$cls;\n    } else {\n      actual = el.getAttribute(\"class\");\n    }\n    expected = normalizeClass(clientValue);\n    if (!isSetEqual(toClassSet(actual || \"\"), toClassSet(expected))) {\n      mismatchType = 2 /* CLASS */;\n      mismatchKey = `class`;\n    }\n  } else if (key === \"style\") {\n    actual = el.getAttribute(\"style\") || \"\";\n    expected = isString(clientValue) ? clientValue : stringifyStyle(normalizeStyle(clientValue));\n    const actualMap = toStyleMap(actual);\n    const expectedMap = toStyleMap(expected);\n    if (vnode.dirs) {\n      for (const { dir, value } of vnode.dirs) {\n        if (dir.name === \"show\" && !value) {\n          expectedMap.set(\"display\", \"none\");\n        }\n      }\n    }\n    if (instance) {\n      resolveCssVars(instance, vnode, expectedMap);\n    }\n    if (!isMapEqual(actualMap, expectedMap)) {\n      mismatchType = 3 /* STYLE */;\n      mismatchKey = \"style\";\n    }\n  } else if (el instanceof SVGElement && isKnownSvgAttr(key) || el instanceof HTMLElement && (isBooleanAttr(key) || isKnownHtmlAttr(key))) {\n    if (isBooleanAttr(key)) {\n      actual = el.hasAttribute(key);\n      expected = includeBooleanAttr(clientValue);\n    } else if (clientValue == null) {\n      actual = el.hasAttribute(key);\n      expected = false;\n    } else {\n      if (el.hasAttribute(key)) {\n        actual = el.getAttribute(key);\n      } else if (key === \"value\" && el.tagName === \"TEXTAREA\") {\n        actual = el.value;\n      } else {\n        actual = false;\n      }\n      expected = isRenderableAttrValue(clientValue) ? String(clientValue) : false;\n    }\n    if (actual !== expected) {\n      mismatchType = 4 /* ATTRIBUTE */;\n      mismatchKey = key;\n    }\n  }\n  if (mismatchType != null && !isMismatchAllowed(el, mismatchType)) {\n    const format = (v) => v === false ? `(not rendered)` : `${mismatchKey}=\"${v}\"`;\n    const preSegment = `Hydration ${MismatchTypeString[mismatchType]} mismatch on`;\n    const postSegment = `\n  - rendered on server: ${format(actual)}\n  - expected on client: ${format(expected)}\n  Note: this mismatch is check-only. The DOM will not be rectified in production due to performance overhead.\n  You should fix the source of the mismatch.`;\n    {\n      warn$1(preSegment, el, postSegment);\n    }\n    return true;\n  }\n  return false;\n}\nfunction toClassSet(str) {\n  return new Set(str.trim().split(/\\s+/));\n}\nfunction isSetEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const s of a) {\n    if (!b.has(s)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction toStyleMap(str) {\n  const styleMap = /* @__PURE__ */ new Map();\n  for (const item of str.split(\";\")) {\n    let [key, value] = item.split(\":\");\n    key = key.trim();\n    value = value && value.trim();\n    if (key && value) {\n      styleMap.set(key, value);\n    }\n  }\n  return styleMap;\n}\nfunction isMapEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const [key, value] of a) {\n    if (value !== b.get(key)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction resolveCssVars(instance, vnode, expectedMap) {\n  const root = instance.subTree;\n  if (instance.getCssVars && (vnode === root || root && root.type === Fragment && root.children.includes(vnode))) {\n    const cssVars = instance.getCssVars();\n    for (const key in cssVars) {\n      expectedMap.set(\n        `--${getEscapedCssVarName(key, false)}`,\n        String(cssVars[key])\n      );\n    }\n  }\n  if (vnode === root && instance.parent) {\n    resolveCssVars(instance.parent, instance.vnode, expectedMap);\n  }\n}\nconst allowMismatchAttr = \"data-allow-mismatch\";\nconst MismatchTypeString = {\n  [0 /* TEXT */]: \"text\",\n  [1 /* CHILDREN */]: \"children\",\n  [2 /* CLASS */]: \"class\",\n  [3 /* STYLE */]: \"style\",\n  [4 /* ATTRIBUTE */]: \"attribute\"\n};\nfunction isMismatchAllowed(el, allowedType) {\n  if (allowedType === 0 /* TEXT */ || allowedType === 1 /* CHILDREN */) {\n    while (el && !el.hasAttribute(allowMismatchAttr)) {\n      el = el.parentElement;\n    }\n  }\n  const allowedAttr = el && el.getAttribute(allowMismatchAttr);\n  if (allowedAttr == null) {\n    return false;\n  } else if (allowedAttr === \"\") {\n    return true;\n  } else {\n    const list = allowedAttr.split(\",\");\n    if (allowedType === 0 /* TEXT */ && list.includes(\"children\")) {\n      return true;\n    }\n    return allowedAttr.split(\",\").includes(MismatchTypeString[allowedType]);\n  }\n}\n\nconst requestIdleCallback = getGlobalThis().requestIdleCallback || ((cb) => setTimeout(cb, 1));\nconst cancelIdleCallback = getGlobalThis().cancelIdleCallback || ((id) => clearTimeout(id));\nconst hydrateOnIdle = (timeout = 1e4) => (hydrate) => {\n  const id = requestIdleCallback(hydrate, { timeout });\n  return () => cancelIdleCallback(id);\n};\nfunction elementIsVisibleInViewport(el) {\n  const { top, left, bottom, right } = el.getBoundingClientRect();\n  const { innerHeight, innerWidth } = window;\n  return (top > 0 && top < innerHeight || bottom > 0 && bottom < innerHeight) && (left > 0 && left < innerWidth || right > 0 && right < innerWidth);\n}\nconst hydrateOnVisible = (opts) => (hydrate, forEach) => {\n  const ob = new IntersectionObserver((entries) => {\n    for (const e of entries) {\n      if (!e.isIntersecting) continue;\n      ob.disconnect();\n      hydrate();\n      break;\n    }\n  }, opts);\n  forEach((el) => {\n    if (!(el instanceof Element)) return;\n    if (elementIsVisibleInViewport(el)) {\n      hydrate();\n      ob.disconnect();\n      return false;\n    }\n    ob.observe(el);\n  });\n  return () => ob.disconnect();\n};\nconst hydrateOnMediaQuery = (query) => (hydrate) => {\n  if (query) {\n    const mql = matchMedia(query);\n    if (mql.matches) {\n      hydrate();\n    } else {\n      mql.addEventListener(\"change\", hydrate, { once: true });\n      return () => mql.removeEventListener(\"change\", hydrate);\n    }\n  }\n};\nconst hydrateOnInteraction = (interactions = []) => (hydrate, forEach) => {\n  if (isString(interactions)) interactions = [interactions];\n  let hasHydrated = false;\n  const doHydrate = (e) => {\n    if (!hasHydrated) {\n      hasHydrated = true;\n      teardown();\n      hydrate();\n      e.target.dispatchEvent(new e.constructor(e.type, e));\n    }\n  };\n  const teardown = () => {\n    forEach((el) => {\n      for (const i of interactions) {\n        el.removeEventListener(i, doHydrate);\n      }\n    });\n  };\n  forEach((el) => {\n    for (const i of interactions) {\n      el.addEventListener(i, doHydrate, { once: true });\n    }\n  });\n  return teardown;\n};\nfunction forEachElement(node, cb) {\n  if (isComment(node) && node.data === \"[\") {\n    let depth = 1;\n    let next = node.nextSibling;\n    while (next) {\n      if (next.nodeType === 1) {\n        const result = cb(next);\n        if (result === false) {\n          break;\n        }\n      } else if (isComment(next)) {\n        if (next.data === \"]\") {\n          if (--depth === 0) break;\n        } else if (next.data === \"[\") {\n          depth++;\n        }\n      }\n      next = next.nextSibling;\n    }\n  } else {\n    cb(node);\n  }\n}\n\nconst isAsyncWrapper = (i) => !!i.type.__asyncLoader;\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineAsyncComponent(source) {\n  if (isFunction(source)) {\n    source = { loader: source };\n  }\n  const {\n    loader,\n    loadingComponent,\n    errorComponent,\n    delay = 200,\n    hydrate: hydrateStrategy,\n    timeout,\n    // undefined = never times out\n    suspensible = true,\n    onError: userOnError\n  } = source;\n  let pendingRequest = null;\n  let resolvedComp;\n  let retries = 0;\n  const retry = () => {\n    retries++;\n    pendingRequest = null;\n    return load();\n  };\n  const load = () => {\n    let thisRequest;\n    return pendingRequest || (thisRequest = pendingRequest = loader().catch((err) => {\n      err = err instanceof Error ? err : new Error(String(err));\n      if (userOnError) {\n        return new Promise((resolve, reject) => {\n          const userRetry = () => resolve(retry());\n          const userFail = () => reject(err);\n          userOnError(err, userRetry, userFail, retries + 1);\n        });\n      } else {\n        throw err;\n      }\n    }).then((comp) => {\n      if (thisRequest !== pendingRequest && pendingRequest) {\n        return pendingRequest;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && !comp) {\n        warn$1(\n          `Async component loader resolved to undefined. If you are using retry(), make sure to return its return value.`\n        );\n      }\n      if (comp && (comp.__esModule || comp[Symbol.toStringTag] === \"Module\")) {\n        comp = comp.default;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && comp && !isObject(comp) && !isFunction(comp)) {\n        throw new Error(`Invalid async component load result: ${comp}`);\n      }\n      resolvedComp = comp;\n      return comp;\n    }));\n  };\n  return defineComponent({\n    name: \"AsyncComponentWrapper\",\n    __asyncLoader: load,\n    __asyncHydrate(el, instance, hydrate) {\n      let patched = false;\n      const doHydrate = hydrateStrategy ? () => {\n        const performHydrate = () => {\n          if (!!(process.env.NODE_ENV !== \"production\") && patched) {\n            warn$1(\n              `Skipping lazy hydration for component '${getComponentName(resolvedComp)}': it was updated before lazy hydration performed.`\n            );\n            return;\n          }\n          hydrate();\n        };\n        const teardown = hydrateStrategy(\n          performHydrate,\n          (cb) => forEachElement(el, cb)\n        );\n        if (teardown) {\n          (instance.bum || (instance.bum = [])).push(teardown);\n        }\n        (instance.u || (instance.u = [])).push(() => patched = true);\n      } : hydrate;\n      if (resolvedComp) {\n        doHydrate();\n      } else {\n        load().then(() => !instance.isUnmounted && doHydrate());\n      }\n    },\n    get __asyncResolved() {\n      return resolvedComp;\n    },\n    setup() {\n      const instance = currentInstance;\n      markAsyncBoundary(instance);\n      if (resolvedComp) {\n        return () => createInnerComp(resolvedComp, instance);\n      }\n      const onError = (err) => {\n        pendingRequest = null;\n        handleError(\n          err,\n          instance,\n          13,\n          !errorComponent\n        );\n      };\n      if (suspensible && instance.suspense || isInSSRComponentSetup) {\n        return load().then((comp) => {\n          return () => createInnerComp(comp, instance);\n        }).catch((err) => {\n          onError(err);\n          return () => errorComponent ? createVNode(errorComponent, {\n            error: err\n          }) : null;\n        });\n      }\n      const loaded = ref(false);\n      const error = ref();\n      const delayed = ref(!!delay);\n      if (delay) {\n        setTimeout(() => {\n          delayed.value = false;\n        }, delay);\n      }\n      if (timeout != null) {\n        setTimeout(() => {\n          if (!loaded.value && !error.value) {\n            const err = new Error(\n              `Async component timed out after ${timeout}ms.`\n            );\n            onError(err);\n            error.value = err;\n          }\n        }, timeout);\n      }\n      load().then(() => {\n        loaded.value = true;\n        if (instance.parent && isKeepAlive(instance.parent.vnode)) {\n          instance.parent.update();\n        }\n      }).catch((err) => {\n        onError(err);\n        error.value = err;\n      });\n      return () => {\n        if (loaded.value && resolvedComp) {\n          return createInnerComp(resolvedComp, instance);\n        } else if (error.value && errorComponent) {\n          return createVNode(errorComponent, {\n            error: error.value\n          });\n        } else if (loadingComponent && !delayed.value) {\n          return createVNode(loadingComponent);\n        }\n      };\n    }\n  });\n}\nfunction createInnerComp(comp, parent) {\n  const { ref: ref2, props, children, ce } = parent.vnode;\n  const vnode = createVNode(comp, props, children);\n  vnode.ref = ref2;\n  vnode.ce = ce;\n  delete parent.vnode.ce;\n  return vnode;\n}\n\nconst isKeepAlive = (vnode) => vnode.type.__isKeepAlive;\nconst KeepAliveImpl = {\n  name: `KeepAlive`,\n  // Marker for special handling inside the renderer. We are not using a ===\n  // check directly on KeepAlive in the renderer, because importing it directly\n  // would prevent it from being tree-shaken.\n  __isKeepAlive: true,\n  props: {\n    include: [String, RegExp, Array],\n    exclude: [String, RegExp, Array],\n    max: [String, Number]\n  },\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const sharedContext = instance.ctx;\n    if (!sharedContext.renderer) {\n      return () => {\n        const children = slots.default && slots.default();\n        return children && children.length === 1 ? children[0] : children;\n      };\n    }\n    const cache = /* @__PURE__ */ new Map();\n    const keys = /* @__PURE__ */ new Set();\n    let current = null;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      instance.__v_cache = cache;\n    }\n    const parentSuspense = instance.suspense;\n    const {\n      renderer: {\n        p: patch,\n        m: move,\n        um: _unmount,\n        o: { createElement }\n      }\n    } = sharedContext;\n    const storageContainer = createElement(\"div\");\n    sharedContext.activate = (vnode, container, anchor, namespace, optimized) => {\n      const instance2 = vnode.component;\n      move(vnode, container, anchor, 0, parentSuspense);\n      patch(\n        instance2.vnode,\n        vnode,\n        container,\n        anchor,\n        instance2,\n        parentSuspense,\n        namespace,\n        vnode.slotScopeIds,\n        optimized\n      );\n      queuePostRenderEffect(() => {\n        instance2.isDeactivated = false;\n        if (instance2.a) {\n          invokeArrayFns(instance2.a);\n        }\n        const vnodeHook = vnode.props && vnode.props.onVnodeMounted;\n        if (vnodeHook) {\n          invokeVNodeHook(vnodeHook, instance2.parent, vnode);\n        }\n      }, parentSuspense);\n      if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n        devtoolsComponentAdded(instance2);\n      }\n    };\n    sharedContext.deactivate = (vnode) => {\n      const instance2 = vnode.component;\n      invalidateMount(instance2.m);\n      invalidateMount(instance2.a);\n      move(vnode, storageContainer, null, 1, parentSuspense);\n      queuePostRenderEffect(() => {\n        if (instance2.da) {\n          invokeArrayFns(instance2.da);\n        }\n        const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;\n        if (vnodeHook) {\n          invokeVNodeHook(vnodeHook, instance2.parent, vnode);\n        }\n        instance2.isDeactivated = true;\n      }, parentSuspense);\n      if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n        devtoolsComponentAdded(instance2);\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && true) {\n        instance2.__keepAliveStorageContainer = storageContainer;\n      }\n    };\n    function unmount(vnode) {\n      resetShapeFlag(vnode);\n      _unmount(vnode, instance, parentSuspense, true);\n    }\n    function pruneCache(filter) {\n      cache.forEach((vnode, key) => {\n        const name = getComponentName(vnode.type);\n        if (name && !filter(name)) {\n          pruneCacheEntry(key);\n        }\n      });\n    }\n    function pruneCacheEntry(key) {\n      const cached = cache.get(key);\n      if (cached && (!current || !isSameVNodeType(cached, current))) {\n        unmount(cached);\n      } else if (current) {\n        resetShapeFlag(current);\n      }\n      cache.delete(key);\n      keys.delete(key);\n    }\n    watch(\n      () => [props.include, props.exclude],\n      ([include, exclude]) => {\n        include && pruneCache((name) => matches(include, name));\n        exclude && pruneCache((name) => !matches(exclude, name));\n      },\n      // prune post-render after `current` has been updated\n      { flush: \"post\", deep: true }\n    );\n    let pendingCacheKey = null;\n    const cacheSubtree = () => {\n      if (pendingCacheKey != null) {\n        if (isSuspense(instance.subTree.type)) {\n          queuePostRenderEffect(() => {\n            cache.set(pendingCacheKey, getInnerChild(instance.subTree));\n          }, instance.subTree.suspense);\n        } else {\n          cache.set(pendingCacheKey, getInnerChild(instance.subTree));\n        }\n      }\n    };\n    onMounted(cacheSubtree);\n    onUpdated(cacheSubtree);\n    onBeforeUnmount(() => {\n      cache.forEach((cached) => {\n        const { subTree, suspense } = instance;\n        const vnode = getInnerChild(subTree);\n        if (cached.type === vnode.type && cached.key === vnode.key) {\n          resetShapeFlag(vnode);\n          const da = vnode.component.da;\n          da && queuePostRenderEffect(da, suspense);\n          return;\n        }\n        unmount(cached);\n      });\n    });\n    return () => {\n      pendingCacheKey = null;\n      if (!slots.default) {\n        return current = null;\n      }\n      const children = slots.default();\n      const rawVNode = children[0];\n      if (children.length > 1) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(`KeepAlive should contain exactly one component child.`);\n        }\n        current = null;\n        return children;\n      } else if (!isVNode(rawVNode) || !(rawVNode.shapeFlag & 4) && !(rawVNode.shapeFlag & 128)) {\n        current = null;\n        return rawVNode;\n      }\n      let vnode = getInnerChild(rawVNode);\n      if (vnode.type === Comment) {\n        current = null;\n        return vnode;\n      }\n      const comp = vnode.type;\n      const name = getComponentName(\n        isAsyncWrapper(vnode) ? vnode.type.__asyncResolved || {} : comp\n      );\n      const { include, exclude, max } = props;\n      if (include && (!name || !matches(include, name)) || exclude && name && matches(exclude, name)) {\n        vnode.shapeFlag &= -257;\n        current = vnode;\n        return rawVNode;\n      }\n      const key = vnode.key == null ? comp : vnode.key;\n      const cachedVNode = cache.get(key);\n      if (vnode.el) {\n        vnode = cloneVNode(vnode);\n        if (rawVNode.shapeFlag & 128) {\n          rawVNode.ssContent = vnode;\n        }\n      }\n      pendingCacheKey = key;\n      if (cachedVNode) {\n        vnode.el = cachedVNode.el;\n        vnode.component = cachedVNode.component;\n        if (vnode.transition) {\n          setTransitionHooks(vnode, vnode.transition);\n        }\n        vnode.shapeFlag |= 512;\n        keys.delete(key);\n        keys.add(key);\n      } else {\n        keys.add(key);\n        if (max && keys.size > parseInt(max, 10)) {\n          pruneCacheEntry(keys.values().next().value);\n        }\n      }\n      vnode.shapeFlag |= 256;\n      current = vnode;\n      return isSuspense(rawVNode.type) ? rawVNode : vnode;\n    };\n  }\n};\nconst KeepAlive = KeepAliveImpl;\nfunction matches(pattern, name) {\n  if (isArray(pattern)) {\n    return pattern.some((p) => matches(p, name));\n  } else if (isString(pattern)) {\n    return pattern.split(\",\").includes(name);\n  } else if (isRegExp(pattern)) {\n    pattern.lastIndex = 0;\n    return pattern.test(name);\n  }\n  return false;\n}\nfunction onActivated(hook, target) {\n  registerKeepAliveHook(hook, \"a\", target);\n}\nfunction onDeactivated(hook, target) {\n  registerKeepAliveHook(hook, \"da\", target);\n}\nfunction registerKeepAliveHook(hook, type, target = currentInstance) {\n  const wrappedHook = hook.__wdc || (hook.__wdc = () => {\n    let current = target;\n    while (current) {\n      if (current.isDeactivated) {\n        return;\n      }\n      current = current.parent;\n    }\n    return hook();\n  });\n  injectHook(type, wrappedHook, target);\n  if (target) {\n    let current = target.parent;\n    while (current && current.parent) {\n      if (isKeepAlive(current.parent.vnode)) {\n        injectToKeepAliveRoot(wrappedHook, type, target, current);\n      }\n      current = current.parent;\n    }\n  }\n}\nfunction injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {\n  const injected = injectHook(\n    type,\n    hook,\n    keepAliveRoot,\n    true\n    /* prepend */\n  );\n  onUnmounted(() => {\n    remove(keepAliveRoot[type], injected);\n  }, target);\n}\nfunction resetShapeFlag(vnode) {\n  vnode.shapeFlag &= -257;\n  vnode.shapeFlag &= -513;\n}\nfunction getInnerChild(vnode) {\n  return vnode.shapeFlag & 128 ? vnode.ssContent : vnode;\n}\n\nfunction injectHook(type, hook, target = currentInstance, prepend = false) {\n  if (target) {\n    const hooks = target[type] || (target[type] = []);\n    const wrappedHook = hook.__weh || (hook.__weh = (...args) => {\n      pauseTracking();\n      const reset = setCurrentInstance(target);\n      const res = callWithAsyncErrorHandling(hook, target, type, args);\n      reset();\n      resetTracking();\n      return res;\n    });\n    if (prepend) {\n      hooks.unshift(wrappedHook);\n    } else {\n      hooks.push(wrappedHook);\n    }\n    return wrappedHook;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    const apiName = toHandlerKey(ErrorTypeStrings$1[type].replace(/ hook$/, \"\"));\n    warn$1(\n      `${apiName} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup().` + (` If you are using async setup(), make sure to register lifecycle hooks before the first await statement.` )\n    );\n  }\n}\nconst createHook = (lifecycle) => (hook, target = currentInstance) => {\n  if (!isInSSRComponentSetup || lifecycle === \"sp\") {\n    injectHook(lifecycle, (...args) => hook(...args), target);\n  }\n};\nconst onBeforeMount = createHook(\"bm\");\nconst onMounted = createHook(\"m\");\nconst onBeforeUpdate = createHook(\n  \"bu\"\n);\nconst onUpdated = createHook(\"u\");\nconst onBeforeUnmount = createHook(\n  \"bum\"\n);\nconst onUnmounted = createHook(\"um\");\nconst onServerPrefetch = createHook(\n  \"sp\"\n);\nconst onRenderTriggered = createHook(\"rtg\");\nconst onRenderTracked = createHook(\"rtc\");\nfunction onErrorCaptured(hook, target = currentInstance) {\n  injectHook(\"ec\", hook, target);\n}\n\nconst COMPONENTS = \"components\";\nconst DIRECTIVES = \"directives\";\nfunction resolveComponent(name, maybeSelfReference) {\n  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;\n}\nconst NULL_DYNAMIC_COMPONENT = Symbol.for(\"v-ndc\");\nfunction resolveDynamicComponent(component) {\n  if (isString(component)) {\n    return resolveAsset(COMPONENTS, component, false) || component;\n  } else {\n    return component || NULL_DYNAMIC_COMPONENT;\n  }\n}\nfunction resolveDirective(name) {\n  return resolveAsset(DIRECTIVES, name);\n}\nfunction resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {\n  const instance = currentRenderingInstance || currentInstance;\n  if (instance) {\n    const Component = instance.type;\n    if (type === COMPONENTS) {\n      const selfName = getComponentName(\n        Component,\n        false\n      );\n      if (selfName && (selfName === name || selfName === camelize(name) || selfName === capitalize(camelize(name)))) {\n        return Component;\n      }\n    }\n    const res = (\n      // local registration\n      // check instance[type] first which is resolved for options API\n      resolve(instance[type] || Component[type], name) || // global registration\n      resolve(instance.appContext[type], name)\n    );\n    if (!res && maybeSelfReference) {\n      return Component;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && warnMissing && !res) {\n      const extra = type === COMPONENTS ? `\nIf this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.` : ``;\n      warn$1(`Failed to resolve ${type.slice(0, -1)}: ${name}${extra}`);\n    }\n    return res;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `resolve${capitalize(type.slice(0, -1))} can only be used in render() or setup().`\n    );\n  }\n}\nfunction resolve(registry, name) {\n  return registry && (registry[name] || registry[camelize(name)] || registry[capitalize(camelize(name))]);\n}\n\nfunction renderList(source, renderItem, cache, index) {\n  let ret;\n  const cached = cache && cache[index];\n  const sourceIsArray = isArray(source);\n  if (sourceIsArray || isString(source)) {\n    const sourceIsReactiveArray = sourceIsArray && isReactive(source);\n    let needsWrap = false;\n    let isReadonlySource = false;\n    if (sourceIsReactiveArray) {\n      needsWrap = !isShallow(source);\n      isReadonlySource = isReadonly(source);\n      source = shallowReadArray(source);\n    }\n    ret = new Array(source.length);\n    for (let i = 0, l = source.length; i < l; i++) {\n      ret[i] = renderItem(\n        needsWrap ? isReadonlySource ? toReadonly(toReactive(source[i])) : toReactive(source[i]) : source[i],\n        i,\n        void 0,\n        cached && cached[i]\n      );\n    }\n  } else if (typeof source === \"number\") {\n    if (!!(process.env.NODE_ENV !== \"production\") && !Number.isInteger(source)) {\n      warn$1(`The v-for range expect an integer value but got ${source}.`);\n    }\n    ret = new Array(source);\n    for (let i = 0; i < source; i++) {\n      ret[i] = renderItem(i + 1, i, void 0, cached && cached[i]);\n    }\n  } else if (isObject(source)) {\n    if (source[Symbol.iterator]) {\n      ret = Array.from(\n        source,\n        (item, i) => renderItem(item, i, void 0, cached && cached[i])\n      );\n    } else {\n      const keys = Object.keys(source);\n      ret = new Array(keys.length);\n      for (let i = 0, l = keys.length; i < l; i++) {\n        const key = keys[i];\n        ret[i] = renderItem(source[key], key, i, cached && cached[i]);\n      }\n    }\n  } else {\n    ret = [];\n  }\n  if (cache) {\n    cache[index] = ret;\n  }\n  return ret;\n}\n\nfunction createSlots(slots, dynamicSlots) {\n  for (let i = 0; i < dynamicSlots.length; i++) {\n    const slot = dynamicSlots[i];\n    if (isArray(slot)) {\n      for (let j = 0; j < slot.length; j++) {\n        slots[slot[j].name] = slot[j].fn;\n      }\n    } else if (slot) {\n      slots[slot.name] = slot.key ? (...args) => {\n        const res = slot.fn(...args);\n        if (res) res.key = slot.key;\n        return res;\n      } : slot.fn;\n    }\n  }\n  return slots;\n}\n\nfunction renderSlot(slots, name, props = {}, fallback, noSlotted) {\n  if (currentRenderingInstance.ce || currentRenderingInstance.parent && isAsyncWrapper(currentRenderingInstance.parent) && currentRenderingInstance.parent.ce) {\n    if (name !== \"default\") props.name = name;\n    return openBlock(), createBlock(\n      Fragment,\n      null,\n      [createVNode(\"slot\", props, fallback && fallback())],\n      64\n    );\n  }\n  let slot = slots[name];\n  if (!!(process.env.NODE_ENV !== \"production\") && slot && slot.length > 1) {\n    warn$1(\n      `SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template.`\n    );\n    slot = () => [];\n  }\n  if (slot && slot._c) {\n    slot._d = false;\n  }\n  openBlock();\n  const validSlotContent = slot && ensureValidVNode(slot(props));\n  const slotKey = props.key || // slot content array of a dynamic conditional slot may have a branch\n  // key attached in the `createSlots` helper, respect that\n  validSlotContent && validSlotContent.key;\n  const rendered = createBlock(\n    Fragment,\n    {\n      key: (slotKey && !isSymbol(slotKey) ? slotKey : `_${name}`) + // #7256 force differentiate fallback content from actual content\n      (!validSlotContent && fallback ? \"_fb\" : \"\")\n    },\n    validSlotContent || (fallback ? fallback() : []),\n    validSlotContent && slots._ === 1 ? 64 : -2\n  );\n  if (!noSlotted && rendered.scopeId) {\n    rendered.slotScopeIds = [rendered.scopeId + \"-s\"];\n  }\n  if (slot && slot._c) {\n    slot._d = true;\n  }\n  return rendered;\n}\nfunction ensureValidVNode(vnodes) {\n  return vnodes.some((child) => {\n    if (!isVNode(child)) return true;\n    if (child.type === Comment) return false;\n    if (child.type === Fragment && !ensureValidVNode(child.children))\n      return false;\n    return true;\n  }) ? vnodes : null;\n}\n\nfunction toHandlers(obj, preserveCaseIfNecessary) {\n  const ret = {};\n  if (!!(process.env.NODE_ENV !== \"production\") && !isObject(obj)) {\n    warn$1(`v-on with no argument expects an object value.`);\n    return ret;\n  }\n  for (const key in obj) {\n    ret[preserveCaseIfNecessary && /[A-Z]/.test(key) ? `on:${key}` : toHandlerKey(key)] = obj[key];\n  }\n  return ret;\n}\n\nconst getPublicInstance = (i) => {\n  if (!i) return null;\n  if (isStatefulComponent(i)) return getComponentPublicInstance(i);\n  return getPublicInstance(i.parent);\n};\nconst publicPropertiesMap = (\n  // Move PURE marker to new line to workaround compiler discarding it\n  // due to type annotation\n  /* @__PURE__ */ extend(/* @__PURE__ */ Object.create(null), {\n    $: (i) => i,\n    $el: (i) => i.vnode.el,\n    $data: (i) => i.data,\n    $props: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.props) : i.props,\n    $attrs: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.attrs) : i.attrs,\n    $slots: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.slots) : i.slots,\n    $refs: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.refs) : i.refs,\n    $parent: (i) => getPublicInstance(i.parent),\n    $root: (i) => getPublicInstance(i.root),\n    $host: (i) => i.ce,\n    $emit: (i) => i.emit,\n    $options: (i) => __VUE_OPTIONS_API__ ? resolveMergedOptions(i) : i.type,\n    $forceUpdate: (i) => i.f || (i.f = () => {\n      queueJob(i.update);\n    }),\n    $nextTick: (i) => i.n || (i.n = nextTick.bind(i.proxy)),\n    $watch: (i) => __VUE_OPTIONS_API__ ? instanceWatch.bind(i) : NOOP\n  })\n);\nconst isReservedPrefix = (key) => key === \"_\" || key === \"$\";\nconst hasSetupBinding = (state, key) => state !== EMPTY_OBJ && !state.__isScriptSetup && hasOwn(state, key);\nconst PublicInstanceProxyHandlers = {\n  get({ _: instance }, key) {\n    if (key === \"__v_skip\") {\n      return true;\n    }\n    const { ctx, setupState, data, props, accessCache, type, appContext } = instance;\n    if (!!(process.env.NODE_ENV !== \"production\") && key === \"__isVue\") {\n      return true;\n    }\n    let normalizedProps;\n    if (key[0] !== \"$\") {\n      const n = accessCache[key];\n      if (n !== void 0) {\n        switch (n) {\n          case 1 /* SETUP */:\n            return setupState[key];\n          case 2 /* DATA */:\n            return data[key];\n          case 4 /* CONTEXT */:\n            return ctx[key];\n          case 3 /* PROPS */:\n            return props[key];\n        }\n      } else if (hasSetupBinding(setupState, key)) {\n        accessCache[key] = 1 /* SETUP */;\n        return setupState[key];\n      } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n        accessCache[key] = 2 /* DATA */;\n        return data[key];\n      } else if (\n        // only cache other properties when instance has declared (thus stable)\n        // props\n        (normalizedProps = instance.propsOptions[0]) && hasOwn(normalizedProps, key)\n      ) {\n        accessCache[key] = 3 /* PROPS */;\n        return props[key];\n      } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n        accessCache[key] = 4 /* CONTEXT */;\n        return ctx[key];\n      } else if (!__VUE_OPTIONS_API__ || shouldCacheAccess) {\n        accessCache[key] = 0 /* OTHER */;\n      }\n    }\n    const publicGetter = publicPropertiesMap[key];\n    let cssModule, globalProperties;\n    if (publicGetter) {\n      if (key === \"$attrs\") {\n        track(instance.attrs, \"get\", \"\");\n        !!(process.env.NODE_ENV !== \"production\") && markAttrsAccessed();\n      } else if (!!(process.env.NODE_ENV !== \"production\") && key === \"$slots\") {\n        track(instance, \"get\", key);\n      }\n      return publicGetter(instance);\n    } else if (\n      // css module (injected by vue-loader)\n      (cssModule = type.__cssModules) && (cssModule = cssModule[key])\n    ) {\n      return cssModule;\n    } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n      accessCache[key] = 4 /* CONTEXT */;\n      return ctx[key];\n    } else if (\n      // global properties\n      globalProperties = appContext.config.globalProperties, hasOwn(globalProperties, key)\n    ) {\n      {\n        return globalProperties[key];\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\") && currentRenderingInstance && (!isString(key) || // #1091 avoid internal isRef/isVNode checks on component instance leading\n    // to infinite warning loop\n    key.indexOf(\"__v\") !== 0)) {\n      if (data !== EMPTY_OBJ && isReservedPrefix(key[0]) && hasOwn(data, key)) {\n        warn$1(\n          `Property ${JSON.stringify(\n            key\n          )} must be accessed via $data because it starts with a reserved character (\"$\" or \"_\") and is not proxied on the render context.`\n        );\n      } else if (instance === currentRenderingInstance) {\n        warn$1(\n          `Property ${JSON.stringify(key)} was accessed during render but is not defined on instance.`\n        );\n      }\n    }\n  },\n  set({ _: instance }, key, value) {\n    const { data, setupState, ctx } = instance;\n    if (hasSetupBinding(setupState, key)) {\n      setupState[key] = value;\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\") && setupState.__isScriptSetup && hasOwn(setupState, key)) {\n      warn$1(`Cannot mutate <script setup> binding \"${key}\" from Options API.`);\n      return false;\n    } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n      data[key] = value;\n      return true;\n    } else if (hasOwn(instance.props, key)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`Attempting to mutate prop \"${key}\". Props are readonly.`);\n      return false;\n    }\n    if (key[0] === \"$\" && key.slice(1) in instance) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Attempting to mutate public property \"${key}\". Properties starting with $ are reserved and readonly.`\n      );\n      return false;\n    } else {\n      if (!!(process.env.NODE_ENV !== \"production\") && key in instance.appContext.config.globalProperties) {\n        Object.defineProperty(ctx, key, {\n          enumerable: true,\n          configurable: true,\n          value\n        });\n      } else {\n        ctx[key] = value;\n      }\n    }\n    return true;\n  },\n  has({\n    _: { data, setupState, accessCache, ctx, appContext, propsOptions }\n  }, key) {\n    let normalizedProps;\n    return !!accessCache[key] || data !== EMPTY_OBJ && hasOwn(data, key) || hasSetupBinding(setupState, key) || (normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key) || hasOwn(ctx, key) || hasOwn(publicPropertiesMap, key) || hasOwn(appContext.config.globalProperties, key);\n  },\n  defineProperty(target, key, descriptor) {\n    if (descriptor.get != null) {\n      target._.accessCache[key] = 0;\n    } else if (hasOwn(descriptor, \"value\")) {\n      this.set(target, key, descriptor.value, null);\n    }\n    return Reflect.defineProperty(target, key, descriptor);\n  }\n};\nif (!!(process.env.NODE_ENV !== \"production\") && true) {\n  PublicInstanceProxyHandlers.ownKeys = (target) => {\n    warn$1(\n      `Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead.`\n    );\n    return Reflect.ownKeys(target);\n  };\n}\nconst RuntimeCompiledPublicInstanceProxyHandlers = /* @__PURE__ */ extend({}, PublicInstanceProxyHandlers, {\n  get(target, key) {\n    if (key === Symbol.unscopables) {\n      return;\n    }\n    return PublicInstanceProxyHandlers.get(target, key, target);\n  },\n  has(_, key) {\n    const has = key[0] !== \"_\" && !isGloballyAllowed(key);\n    if (!!(process.env.NODE_ENV !== \"production\") && !has && PublicInstanceProxyHandlers.has(_, key)) {\n      warn$1(\n        `Property ${JSON.stringify(\n          key\n        )} should not start with _ which is a reserved prefix for Vue internals.`\n      );\n    }\n    return has;\n  }\n});\nfunction createDevRenderContext(instance) {\n  const target = {};\n  Object.defineProperty(target, `_`, {\n    configurable: true,\n    enumerable: false,\n    get: () => instance\n  });\n  Object.keys(publicPropertiesMap).forEach((key) => {\n    Object.defineProperty(target, key, {\n      configurable: true,\n      enumerable: false,\n      get: () => publicPropertiesMap[key](instance),\n      // intercepted by the proxy so no need for implementation,\n      // but needed to prevent set errors\n      set: NOOP\n    });\n  });\n  return target;\n}\nfunction exposePropsOnRenderContext(instance) {\n  const {\n    ctx,\n    propsOptions: [propsOptions]\n  } = instance;\n  if (propsOptions) {\n    Object.keys(propsOptions).forEach((key) => {\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => instance.props[key],\n        set: NOOP\n      });\n    });\n  }\n}\nfunction exposeSetupStateOnRenderContext(instance) {\n  const { ctx, setupState } = instance;\n  Object.keys(toRaw(setupState)).forEach((key) => {\n    if (!setupState.__isScriptSetup) {\n      if (isReservedPrefix(key[0])) {\n        warn$1(\n          `setup() return property ${JSON.stringify(\n            key\n          )} should not start with \"$\" or \"_\" which are reserved prefixes for Vue internals.`\n        );\n        return;\n      }\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => setupState[key],\n        set: NOOP\n      });\n    }\n  });\n}\n\nconst warnRuntimeUsage = (method) => warn$1(\n  `${method}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`\n);\nfunction defineProps() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineProps`);\n  }\n  return null;\n}\nfunction defineEmits() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineEmits`);\n  }\n  return null;\n}\nfunction defineExpose(exposed) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineExpose`);\n  }\n}\nfunction defineOptions(options) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineOptions`);\n  }\n}\nfunction defineSlots() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineSlots`);\n  }\n  return null;\n}\nfunction defineModel() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(\"defineModel\");\n  }\n}\nfunction withDefaults(props, defaults) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`withDefaults`);\n  }\n  return null;\n}\nfunction useSlots() {\n  return getContext().slots;\n}\nfunction useAttrs() {\n  return getContext().attrs;\n}\nfunction getContext() {\n  const i = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !i) {\n    warn$1(`useContext() called without active instance.`);\n  }\n  return i.setupContext || (i.setupContext = createSetupContext(i));\n}\nfunction normalizePropsOrEmits(props) {\n  return isArray(props) ? props.reduce(\n    (normalized, p) => (normalized[p] = null, normalized),\n    {}\n  ) : props;\n}\nfunction mergeDefaults(raw, defaults) {\n  const props = normalizePropsOrEmits(raw);\n  for (const key in defaults) {\n    if (key.startsWith(\"__skip\")) continue;\n    let opt = props[key];\n    if (opt) {\n      if (isArray(opt) || isFunction(opt)) {\n        opt = props[key] = { type: opt, default: defaults[key] };\n      } else {\n        opt.default = defaults[key];\n      }\n    } else if (opt === null) {\n      opt = props[key] = { default: defaults[key] };\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`props default key \"${key}\" has no corresponding declaration.`);\n    }\n    if (opt && defaults[`__skip_${key}`]) {\n      opt.skipFactory = true;\n    }\n  }\n  return props;\n}\nfunction mergeModels(a, b) {\n  if (!a || !b) return a || b;\n  if (isArray(a) && isArray(b)) return a.concat(b);\n  return extend({}, normalizePropsOrEmits(a), normalizePropsOrEmits(b));\n}\nfunction createPropsRestProxy(props, excludedKeys) {\n  const ret = {};\n  for (const key in props) {\n    if (!excludedKeys.includes(key)) {\n      Object.defineProperty(ret, key, {\n        enumerable: true,\n        get: () => props[key]\n      });\n    }\n  }\n  return ret;\n}\nfunction withAsyncContext(getAwaitable) {\n  const ctx = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !ctx) {\n    warn$1(\n      `withAsyncContext called without active current instance. This is likely a bug.`\n    );\n  }\n  let awaitable = getAwaitable();\n  unsetCurrentInstance();\n  if (isPromise(awaitable)) {\n    awaitable = awaitable.catch((e) => {\n      setCurrentInstance(ctx);\n      throw e;\n    });\n  }\n  return [awaitable, () => setCurrentInstance(ctx)];\n}\n\nfunction createDuplicateChecker() {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (type, key) => {\n    if (cache[key]) {\n      warn$1(`${type} property \"${key}\" is already defined in ${cache[key]}.`);\n    } else {\n      cache[key] = type;\n    }\n  };\n}\nlet shouldCacheAccess = true;\nfunction applyOptions(instance) {\n  const options = resolveMergedOptions(instance);\n  const publicThis = instance.proxy;\n  const ctx = instance.ctx;\n  shouldCacheAccess = false;\n  if (options.beforeCreate) {\n    callHook(options.beforeCreate, instance, \"bc\");\n  }\n  const {\n    // state\n    data: dataOptions,\n    computed: computedOptions,\n    methods,\n    watch: watchOptions,\n    provide: provideOptions,\n    inject: injectOptions,\n    // lifecycle\n    created,\n    beforeMount,\n    mounted,\n    beforeUpdate,\n    updated,\n    activated,\n    deactivated,\n    beforeDestroy,\n    beforeUnmount,\n    destroyed,\n    unmounted,\n    render,\n    renderTracked,\n    renderTriggered,\n    errorCaptured,\n    serverPrefetch,\n    // public API\n    expose,\n    inheritAttrs,\n    // assets\n    components,\n    directives,\n    filters\n  } = options;\n  const checkDuplicateProperties = !!(process.env.NODE_ENV !== \"production\") ? createDuplicateChecker() : null;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const [propsOptions] = instance.propsOptions;\n    if (propsOptions) {\n      for (const key in propsOptions) {\n        checkDuplicateProperties(\"Props\" /* PROPS */, key);\n      }\n    }\n  }\n  if (injectOptions) {\n    resolveInjections(injectOptions, ctx, checkDuplicateProperties);\n  }\n  if (methods) {\n    for (const key in methods) {\n      const methodHandler = methods[key];\n      if (isFunction(methodHandler)) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          Object.defineProperty(ctx, key, {\n            value: methodHandler.bind(publicThis),\n            configurable: true,\n            enumerable: true,\n            writable: true\n          });\n        } else {\n          ctx[key] = methodHandler.bind(publicThis);\n        }\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkDuplicateProperties(\"Methods\" /* METHODS */, key);\n        }\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn$1(\n          `Method \"${key}\" has type \"${typeof methodHandler}\" in the component definition. Did you reference the function correctly?`\n        );\n      }\n    }\n  }\n  if (dataOptions) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isFunction(dataOptions)) {\n      warn$1(\n        `The data option must be a function. Plain object usage is no longer supported.`\n      );\n    }\n    const data = dataOptions.call(publicThis, publicThis);\n    if (!!(process.env.NODE_ENV !== \"production\") && isPromise(data)) {\n      warn$1(\n        `data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>.`\n      );\n    }\n    if (!isObject(data)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`data() should return an object.`);\n    } else {\n      instance.data = reactive(data);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (const key in data) {\n          checkDuplicateProperties(\"Data\" /* DATA */, key);\n          if (!isReservedPrefix(key[0])) {\n            Object.defineProperty(ctx, key, {\n              configurable: true,\n              enumerable: true,\n              get: () => data[key],\n              set: NOOP\n            });\n          }\n        }\n      }\n    }\n  }\n  shouldCacheAccess = true;\n  if (computedOptions) {\n    for (const key in computedOptions) {\n      const opt = computedOptions[key];\n      const get = isFunction(opt) ? opt.bind(publicThis, publicThis) : isFunction(opt.get) ? opt.get.bind(publicThis, publicThis) : NOOP;\n      if (!!(process.env.NODE_ENV !== \"production\") && get === NOOP) {\n        warn$1(`Computed property \"${key}\" has no getter.`);\n      }\n      const set = !isFunction(opt) && isFunction(opt.set) ? opt.set.bind(publicThis) : !!(process.env.NODE_ENV !== \"production\") ? () => {\n        warn$1(\n          `Write operation failed: computed property \"${key}\" is readonly.`\n        );\n      } : NOOP;\n      const c = computed({\n        get,\n        set\n      });\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => c.value,\n        set: (v) => c.value = v\n      });\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        checkDuplicateProperties(\"Computed\" /* COMPUTED */, key);\n      }\n    }\n  }\n  if (watchOptions) {\n    for (const key in watchOptions) {\n      createWatcher(watchOptions[key], ctx, publicThis, key);\n    }\n  }\n  if (provideOptions) {\n    const provides = isFunction(provideOptions) ? provideOptions.call(publicThis) : provideOptions;\n    Reflect.ownKeys(provides).forEach((key) => {\n      provide(key, provides[key]);\n    });\n  }\n  if (created) {\n    callHook(created, instance, \"c\");\n  }\n  function registerLifecycleHook(register, hook) {\n    if (isArray(hook)) {\n      hook.forEach((_hook) => register(_hook.bind(publicThis)));\n    } else if (hook) {\n      register(hook.bind(publicThis));\n    }\n  }\n  registerLifecycleHook(onBeforeMount, beforeMount);\n  registerLifecycleHook(onMounted, mounted);\n  registerLifecycleHook(onBeforeUpdate, beforeUpdate);\n  registerLifecycleHook(onUpdated, updated);\n  registerLifecycleHook(onActivated, activated);\n  registerLifecycleHook(onDeactivated, deactivated);\n  registerLifecycleHook(onErrorCaptured, errorCaptured);\n  registerLifecycleHook(onRenderTracked, renderTracked);\n  registerLifecycleHook(onRenderTriggered, renderTriggered);\n  registerLifecycleHook(onBeforeUnmount, beforeUnmount);\n  registerLifecycleHook(onUnmounted, unmounted);\n  registerLifecycleHook(onServerPrefetch, serverPrefetch);\n  if (isArray(expose)) {\n    if (expose.length) {\n      const exposed = instance.exposed || (instance.exposed = {});\n      expose.forEach((key) => {\n        Object.defineProperty(exposed, key, {\n          get: () => publicThis[key],\n          set: (val) => publicThis[key] = val\n        });\n      });\n    } else if (!instance.exposed) {\n      instance.exposed = {};\n    }\n  }\n  if (render && instance.render === NOOP) {\n    instance.render = render;\n  }\n  if (inheritAttrs != null) {\n    instance.inheritAttrs = inheritAttrs;\n  }\n  if (components) instance.components = components;\n  if (directives) instance.directives = directives;\n  if (serverPrefetch) {\n    markAsyncBoundary(instance);\n  }\n}\nfunction resolveInjections(injectOptions, ctx, checkDuplicateProperties = NOOP) {\n  if (isArray(injectOptions)) {\n    injectOptions = normalizeInject(injectOptions);\n  }\n  for (const key in injectOptions) {\n    const opt = injectOptions[key];\n    let injected;\n    if (isObject(opt)) {\n      if (\"default\" in opt) {\n        injected = inject(\n          opt.from || key,\n          opt.default,\n          true\n        );\n      } else {\n        injected = inject(opt.from || key);\n      }\n    } else {\n      injected = inject(opt);\n    }\n    if (isRef(injected)) {\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => injected.value,\n        set: (v) => injected.value = v\n      });\n    } else {\n      ctx[key] = injected;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      checkDuplicateProperties(\"Inject\" /* INJECT */, key);\n    }\n  }\n}\nfunction callHook(hook, instance, type) {\n  callWithAsyncErrorHandling(\n    isArray(hook) ? hook.map((h) => h.bind(instance.proxy)) : hook.bind(instance.proxy),\n    instance,\n    type\n  );\n}\nfunction createWatcher(raw, ctx, publicThis, key) {\n  let getter = key.includes(\".\") ? createPathGetter(publicThis, key) : () => publicThis[key];\n  if (isString(raw)) {\n    const handler = ctx[raw];\n    if (isFunction(handler)) {\n      {\n        watch(getter, handler);\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`Invalid watch handler specified by key \"${raw}\"`, handler);\n    }\n  } else if (isFunction(raw)) {\n    {\n      watch(getter, raw.bind(publicThis));\n    }\n  } else if (isObject(raw)) {\n    if (isArray(raw)) {\n      raw.forEach((r) => createWatcher(r, ctx, publicThis, key));\n    } else {\n      const handler = isFunction(raw.handler) ? raw.handler.bind(publicThis) : ctx[raw.handler];\n      if (isFunction(handler)) {\n        watch(getter, handler, raw);\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn$1(`Invalid watch handler specified by key \"${raw.handler}\"`, handler);\n      }\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`Invalid watch option: \"${key}\"`, raw);\n  }\n}\nfunction resolveMergedOptions(instance) {\n  const base = instance.type;\n  const { mixins, extends: extendsOptions } = base;\n  const {\n    mixins: globalMixins,\n    optionsCache: cache,\n    config: { optionMergeStrategies }\n  } = instance.appContext;\n  const cached = cache.get(base);\n  let resolved;\n  if (cached) {\n    resolved = cached;\n  } else if (!globalMixins.length && !mixins && !extendsOptions) {\n    {\n      resolved = base;\n    }\n  } else {\n    resolved = {};\n    if (globalMixins.length) {\n      globalMixins.forEach(\n        (m) => mergeOptions(resolved, m, optionMergeStrategies, true)\n      );\n    }\n    mergeOptions(resolved, base, optionMergeStrategies);\n  }\n  if (isObject(base)) {\n    cache.set(base, resolved);\n  }\n  return resolved;\n}\nfunction mergeOptions(to, from, strats, asMixin = false) {\n  const { mixins, extends: extendsOptions } = from;\n  if (extendsOptions) {\n    mergeOptions(to, extendsOptions, strats, true);\n  }\n  if (mixins) {\n    mixins.forEach(\n      (m) => mergeOptions(to, m, strats, true)\n    );\n  }\n  for (const key in from) {\n    if (asMixin && key === \"expose\") {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `\"expose\" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.`\n      );\n    } else {\n      const strat = internalOptionMergeStrats[key] || strats && strats[key];\n      to[key] = strat ? strat(to[key], from[key]) : from[key];\n    }\n  }\n  return to;\n}\nconst internalOptionMergeStrats = {\n  data: mergeDataFn,\n  props: mergeEmitsOrPropsOptions,\n  emits: mergeEmitsOrPropsOptions,\n  // objects\n  methods: mergeObjectOptions,\n  computed: mergeObjectOptions,\n  // lifecycle\n  beforeCreate: mergeAsArray,\n  created: mergeAsArray,\n  beforeMount: mergeAsArray,\n  mounted: mergeAsArray,\n  beforeUpdate: mergeAsArray,\n  updated: mergeAsArray,\n  beforeDestroy: mergeAsArray,\n  beforeUnmount: mergeAsArray,\n  destroyed: mergeAsArray,\n  unmounted: mergeAsArray,\n  activated: mergeAsArray,\n  deactivated: mergeAsArray,\n  errorCaptured: mergeAsArray,\n  serverPrefetch: mergeAsArray,\n  // assets\n  components: mergeObjectOptions,\n  directives: mergeObjectOptions,\n  // watch\n  watch: mergeWatchOptions,\n  // provide / inject\n  provide: mergeDataFn,\n  inject: mergeInject\n};\nfunction mergeDataFn(to, from) {\n  if (!from) {\n    return to;\n  }\n  if (!to) {\n    return from;\n  }\n  return function mergedDataFn() {\n    return (extend)(\n      isFunction(to) ? to.call(this, this) : to,\n      isFunction(from) ? from.call(this, this) : from\n    );\n  };\n}\nfunction mergeInject(to, from) {\n  return mergeObjectOptions(normalizeInject(to), normalizeInject(from));\n}\nfunction normalizeInject(raw) {\n  if (isArray(raw)) {\n    const res = {};\n    for (let i = 0; i < raw.length; i++) {\n      res[raw[i]] = raw[i];\n    }\n    return res;\n  }\n  return raw;\n}\nfunction mergeAsArray(to, from) {\n  return to ? [...new Set([].concat(to, from))] : from;\n}\nfunction mergeObjectOptions(to, from) {\n  return to ? extend(/* @__PURE__ */ Object.create(null), to, from) : from;\n}\nfunction mergeEmitsOrPropsOptions(to, from) {\n  if (to) {\n    if (isArray(to) && isArray(from)) {\n      return [.../* @__PURE__ */ new Set([...to, ...from])];\n    }\n    return extend(\n      /* @__PURE__ */ Object.create(null),\n      normalizePropsOrEmits(to),\n      normalizePropsOrEmits(from != null ? from : {})\n    );\n  } else {\n    return from;\n  }\n}\nfunction mergeWatchOptions(to, from) {\n  if (!to) return from;\n  if (!from) return to;\n  const merged = extend(/* @__PURE__ */ Object.create(null), to);\n  for (const key in from) {\n    merged[key] = mergeAsArray(to[key], from[key]);\n  }\n  return merged;\n}\n\nfunction createAppContext() {\n  return {\n    app: null,\n    config: {\n      isNativeTag: NO,\n      performance: false,\n      globalProperties: {},\n      optionMergeStrategies: {},\n      errorHandler: void 0,\n      warnHandler: void 0,\n      compilerOptions: {}\n    },\n    mixins: [],\n    components: {},\n    directives: {},\n    provides: /* @__PURE__ */ Object.create(null),\n    optionsCache: /* @__PURE__ */ new WeakMap(),\n    propsCache: /* @__PURE__ */ new WeakMap(),\n    emitsCache: /* @__PURE__ */ new WeakMap()\n  };\n}\nlet uid$1 = 0;\nfunction createAppAPI(render, hydrate) {\n  return function createApp(rootComponent, rootProps = null) {\n    if (!isFunction(rootComponent)) {\n      rootComponent = extend({}, rootComponent);\n    }\n    if (rootProps != null && !isObject(rootProps)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`root props passed to app.mount() must be an object.`);\n      rootProps = null;\n    }\n    const context = createAppContext();\n    const installedPlugins = /* @__PURE__ */ new WeakSet();\n    const pluginCleanupFns = [];\n    let isMounted = false;\n    const app = context.app = {\n      _uid: uid$1++,\n      _component: rootComponent,\n      _props: rootProps,\n      _container: null,\n      _context: context,\n      _instance: null,\n      version,\n      get config() {\n        return context.config;\n      },\n      set config(v) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `app.config cannot be replaced. Modify individual options instead.`\n          );\n        }\n      },\n      use(plugin, ...options) {\n        if (installedPlugins.has(plugin)) {\n          !!(process.env.NODE_ENV !== \"production\") && warn$1(`Plugin has already been applied to target app.`);\n        } else if (plugin && isFunction(plugin.install)) {\n          installedPlugins.add(plugin);\n          plugin.install(app, ...options);\n        } else if (isFunction(plugin)) {\n          installedPlugins.add(plugin);\n          plugin(app, ...options);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `A plugin must either be a function or an object with an \"install\" function.`\n          );\n        }\n        return app;\n      },\n      mixin(mixin) {\n        if (__VUE_OPTIONS_API__) {\n          if (!context.mixins.includes(mixin)) {\n            context.mixins.push(mixin);\n          } else if (!!(process.env.NODE_ENV !== \"production\")) {\n            warn$1(\n              \"Mixin has already been applied to target app\" + (mixin.name ? `: ${mixin.name}` : \"\")\n            );\n          }\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Mixins are only available in builds supporting Options API\");\n        }\n        return app;\n      },\n      component(name, component) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          validateComponentName(name, context.config);\n        }\n        if (!component) {\n          return context.components[name];\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") && context.components[name]) {\n          warn$1(`Component \"${name}\" has already been registered in target app.`);\n        }\n        context.components[name] = component;\n        return app;\n      },\n      directive(name, directive) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          validateDirectiveName(name);\n        }\n        if (!directive) {\n          return context.directives[name];\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") && context.directives[name]) {\n          warn$1(`Directive \"${name}\" has already been registered in target app.`);\n        }\n        context.directives[name] = directive;\n        return app;\n      },\n      mount(rootContainer, isHydrate, namespace) {\n        if (!isMounted) {\n          if (!!(process.env.NODE_ENV !== \"production\") && rootContainer.__vue_app__) {\n            warn$1(\n              `There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling \\`app.unmount()\\` first.`\n            );\n          }\n          const vnode = app._ceVNode || createVNode(rootComponent, rootProps);\n          vnode.appContext = context;\n          if (namespace === true) {\n            namespace = \"svg\";\n          } else if (namespace === false) {\n            namespace = void 0;\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            context.reload = () => {\n              const cloned = cloneVNode(vnode);\n              cloned.el = null;\n              render(cloned, rootContainer, namespace);\n            };\n          }\n          if (isHydrate && hydrate) {\n            hydrate(vnode, rootContainer);\n          } else {\n            render(vnode, rootContainer, namespace);\n          }\n          isMounted = true;\n          app._container = rootContainer;\n          rootContainer.__vue_app__ = app;\n          if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n            app._instance = vnode.component;\n            devtoolsInitApp(app, version);\n          }\n          return getComponentPublicInstance(vnode.component);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. \\`const createMyApp = () => createApp(App)\\``\n          );\n        }\n      },\n      onUnmount(cleanupFn) {\n        if (!!(process.env.NODE_ENV !== \"production\") && typeof cleanupFn !== \"function\") {\n          warn$1(\n            `Expected function as first argument to app.onUnmount(), but got ${typeof cleanupFn}`\n          );\n        }\n        pluginCleanupFns.push(cleanupFn);\n      },\n      unmount() {\n        if (isMounted) {\n          callWithAsyncErrorHandling(\n            pluginCleanupFns,\n            app._instance,\n            16\n          );\n          render(null, app._container);\n          if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n            app._instance = null;\n            devtoolsUnmountApp(app);\n          }\n          delete app._container.__vue_app__;\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(`Cannot unmount an app that is not mounted.`);\n        }\n      },\n      provide(key, value) {\n        if (!!(process.env.NODE_ENV !== \"production\") && key in context.provides) {\n          if (hasOwn(context.provides, key)) {\n            warn$1(\n              `App already provides property with key \"${String(key)}\". It will be overwritten with the new value.`\n            );\n          } else {\n            warn$1(\n              `App already provides property with key \"${String(key)}\" inherited from its parent element. It will be overwritten with the new value.`\n            );\n          }\n        }\n        context.provides[key] = value;\n        return app;\n      },\n      runWithContext(fn) {\n        const lastApp = currentApp;\n        currentApp = app;\n        try {\n          return fn();\n        } finally {\n          currentApp = lastApp;\n        }\n      }\n    };\n    return app;\n  };\n}\nlet currentApp = null;\n\nfunction provide(key, value) {\n  if (!currentInstance) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`provide() can only be used inside setup().`);\n    }\n  } else {\n    let provides = currentInstance.provides;\n    const parentProvides = currentInstance.parent && currentInstance.parent.provides;\n    if (parentProvides === provides) {\n      provides = currentInstance.provides = Object.create(parentProvides);\n    }\n    provides[key] = value;\n  }\n}\nfunction inject(key, defaultValue, treatDefaultAsFactory = false) {\n  const instance = currentInstance || currentRenderingInstance;\n  if (instance || currentApp) {\n    let provides = currentApp ? currentApp._context.provides : instance ? instance.parent == null || instance.ce ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides : void 0;\n    if (provides && key in provides) {\n      return provides[key];\n    } else if (arguments.length > 1) {\n      return treatDefaultAsFactory && isFunction(defaultValue) ? defaultValue.call(instance && instance.proxy) : defaultValue;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`injection \"${String(key)}\" not found.`);\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`inject() can only be used inside setup() or functional components.`);\n  }\n}\nfunction hasInjectionContext() {\n  return !!(currentInstance || currentRenderingInstance || currentApp);\n}\n\nconst internalObjectProto = {};\nconst createInternalObject = () => Object.create(internalObjectProto);\nconst isInternalObject = (obj) => Object.getPrototypeOf(obj) === internalObjectProto;\n\nfunction initProps(instance, rawProps, isStateful, isSSR = false) {\n  const props = {};\n  const attrs = createInternalObject();\n  instance.propsDefaults = /* @__PURE__ */ Object.create(null);\n  setFullProps(instance, rawProps, props, attrs);\n  for (const key in instance.propsOptions[0]) {\n    if (!(key in props)) {\n      props[key] = void 0;\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    validateProps(rawProps || {}, props, instance);\n  }\n  if (isStateful) {\n    instance.props = isSSR ? props : shallowReactive(props);\n  } else {\n    if (!instance.type.props) {\n      instance.props = attrs;\n    } else {\n      instance.props = props;\n    }\n  }\n  instance.attrs = attrs;\n}\nfunction isInHmrContext(instance) {\n  while (instance) {\n    if (instance.type.__hmrId) return true;\n    instance = instance.parent;\n  }\n}\nfunction updateProps(instance, rawProps, rawPrevProps, optimized) {\n  const {\n    props,\n    attrs,\n    vnode: { patchFlag }\n  } = instance;\n  const rawCurrentProps = toRaw(props);\n  const [options] = instance.propsOptions;\n  let hasAttrsChanged = false;\n  if (\n    // always force full diff in dev\n    // - #1942 if hmr is enabled with sfc component\n    // - vite#872 non-sfc component used by sfc component\n    !(!!(process.env.NODE_ENV !== \"production\") && isInHmrContext(instance)) && (optimized || patchFlag > 0) && !(patchFlag & 16)\n  ) {\n    if (patchFlag & 8) {\n      const propsToUpdate = instance.vnode.dynamicProps;\n      for (let i = 0; i < propsToUpdate.length; i++) {\n        let key = propsToUpdate[i];\n        if (isEmitListener(instance.emitsOptions, key)) {\n          continue;\n        }\n        const value = rawProps[key];\n        if (options) {\n          if (hasOwn(attrs, key)) {\n            if (value !== attrs[key]) {\n              attrs[key] = value;\n              hasAttrsChanged = true;\n            }\n          } else {\n            const camelizedKey = camelize(key);\n            props[camelizedKey] = resolvePropValue(\n              options,\n              rawCurrentProps,\n              camelizedKey,\n              value,\n              instance,\n              false\n            );\n          }\n        } else {\n          if (value !== attrs[key]) {\n            attrs[key] = value;\n            hasAttrsChanged = true;\n          }\n        }\n      }\n    }\n  } else {\n    if (setFullProps(instance, rawProps, props, attrs)) {\n      hasAttrsChanged = true;\n    }\n    let kebabKey;\n    for (const key in rawCurrentProps) {\n      if (!rawProps || // for camelCase\n      !hasOwn(rawProps, key) && // it's possible the original props was passed in as kebab-case\n      // and converted to camelCase (#955)\n      ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey))) {\n        if (options) {\n          if (rawPrevProps && // for camelCase\n          (rawPrevProps[key] !== void 0 || // for kebab-case\n          rawPrevProps[kebabKey] !== void 0)) {\n            props[key] = resolvePropValue(\n              options,\n              rawCurrentProps,\n              key,\n              void 0,\n              instance,\n              true\n            );\n          }\n        } else {\n          delete props[key];\n        }\n      }\n    }\n    if (attrs !== rawCurrentProps) {\n      for (const key in attrs) {\n        if (!rawProps || !hasOwn(rawProps, key) && true) {\n          delete attrs[key];\n          hasAttrsChanged = true;\n        }\n      }\n    }\n  }\n  if (hasAttrsChanged) {\n    trigger(instance.attrs, \"set\", \"\");\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    validateProps(rawProps || {}, props, instance);\n  }\n}\nfunction setFullProps(instance, rawProps, props, attrs) {\n  const [options, needCastKeys] = instance.propsOptions;\n  let hasAttrsChanged = false;\n  let rawCastValues;\n  if (rawProps) {\n    for (let key in rawProps) {\n      if (isReservedProp(key)) {\n        continue;\n      }\n      const value = rawProps[key];\n      let camelKey;\n      if (options && hasOwn(options, camelKey = camelize(key))) {\n        if (!needCastKeys || !needCastKeys.includes(camelKey)) {\n          props[camelKey] = value;\n        } else {\n          (rawCastValues || (rawCastValues = {}))[camelKey] = value;\n        }\n      } else if (!isEmitListener(instance.emitsOptions, key)) {\n        if (!(key in attrs) || value !== attrs[key]) {\n          attrs[key] = value;\n          hasAttrsChanged = true;\n        }\n      }\n    }\n  }\n  if (needCastKeys) {\n    const rawCurrentProps = toRaw(props);\n    const castValues = rawCastValues || EMPTY_OBJ;\n    for (let i = 0; i < needCastKeys.length; i++) {\n      const key = needCastKeys[i];\n      props[key] = resolvePropValue(\n        options,\n        rawCurrentProps,\n        key,\n        castValues[key],\n        instance,\n        !hasOwn(castValues, key)\n      );\n    }\n  }\n  return hasAttrsChanged;\n}\nfunction resolvePropValue(options, props, key, value, instance, isAbsent) {\n  const opt = options[key];\n  if (opt != null) {\n    const hasDefault = hasOwn(opt, \"default\");\n    if (hasDefault && value === void 0) {\n      const defaultValue = opt.default;\n      if (opt.type !== Function && !opt.skipFactory && isFunction(defaultValue)) {\n        const { propsDefaults } = instance;\n        if (key in propsDefaults) {\n          value = propsDefaults[key];\n        } else {\n          const reset = setCurrentInstance(instance);\n          value = propsDefaults[key] = defaultValue.call(\n            null,\n            props\n          );\n          reset();\n        }\n      } else {\n        value = defaultValue;\n      }\n      if (instance.ce) {\n        instance.ce._setProp(key, value);\n      }\n    }\n    if (opt[0 /* shouldCast */]) {\n      if (isAbsent && !hasDefault) {\n        value = false;\n      } else if (opt[1 /* shouldCastTrue */] && (value === \"\" || value === hyphenate(key))) {\n        value = true;\n      }\n    }\n  }\n  return value;\n}\nconst mixinPropsCache = /* @__PURE__ */ new WeakMap();\nfunction normalizePropsOptions(comp, appContext, asMixin = false) {\n  const cache = __VUE_OPTIONS_API__ && asMixin ? mixinPropsCache : appContext.propsCache;\n  const cached = cache.get(comp);\n  if (cached) {\n    return cached;\n  }\n  const raw = comp.props;\n  const normalized = {};\n  const needCastKeys = [];\n  let hasExtends = false;\n  if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n    const extendProps = (raw2) => {\n      hasExtends = true;\n      const [props, keys] = normalizePropsOptions(raw2, appContext, true);\n      extend(normalized, props);\n      if (keys) needCastKeys.push(...keys);\n    };\n    if (!asMixin && appContext.mixins.length) {\n      appContext.mixins.forEach(extendProps);\n    }\n    if (comp.extends) {\n      extendProps(comp.extends);\n    }\n    if (comp.mixins) {\n      comp.mixins.forEach(extendProps);\n    }\n  }\n  if (!raw && !hasExtends) {\n    if (isObject(comp)) {\n      cache.set(comp, EMPTY_ARR);\n    }\n    return EMPTY_ARR;\n  }\n  if (isArray(raw)) {\n    for (let i = 0; i < raw.length; i++) {\n      if (!!(process.env.NODE_ENV !== \"production\") && !isString(raw[i])) {\n        warn$1(`props must be strings when using array syntax.`, raw[i]);\n      }\n      const normalizedKey = camelize(raw[i]);\n      if (validatePropName(normalizedKey)) {\n        normalized[normalizedKey] = EMPTY_OBJ;\n      }\n    }\n  } else if (raw) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isObject(raw)) {\n      warn$1(`invalid props options`, raw);\n    }\n    for (const key in raw) {\n      const normalizedKey = camelize(key);\n      if (validatePropName(normalizedKey)) {\n        const opt = raw[key];\n        const prop = normalized[normalizedKey] = isArray(opt) || isFunction(opt) ? { type: opt } : extend({}, opt);\n        const propType = prop.type;\n        let shouldCast = false;\n        let shouldCastTrue = true;\n        if (isArray(propType)) {\n          for (let index = 0; index < propType.length; ++index) {\n            const type = propType[index];\n            const typeName = isFunction(type) && type.name;\n            if (typeName === \"Boolean\") {\n              shouldCast = true;\n              break;\n            } else if (typeName === \"String\") {\n              shouldCastTrue = false;\n            }\n          }\n        } else {\n          shouldCast = isFunction(propType) && propType.name === \"Boolean\";\n        }\n        prop[0 /* shouldCast */] = shouldCast;\n        prop[1 /* shouldCastTrue */] = shouldCastTrue;\n        if (shouldCast || hasOwn(prop, \"default\")) {\n          needCastKeys.push(normalizedKey);\n        }\n      }\n    }\n  }\n  const res = [normalized, needCastKeys];\n  if (isObject(comp)) {\n    cache.set(comp, res);\n  }\n  return res;\n}\nfunction validatePropName(key) {\n  if (key[0] !== \"$\" && !isReservedProp(key)) {\n    return true;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`Invalid prop name: \"${key}\" is a reserved property.`);\n  }\n  return false;\n}\nfunction getType(ctor) {\n  if (ctor === null) {\n    return \"null\";\n  }\n  if (typeof ctor === \"function\") {\n    return ctor.name || \"\";\n  } else if (typeof ctor === \"object\") {\n    const name = ctor.constructor && ctor.constructor.name;\n    return name || \"\";\n  }\n  return \"\";\n}\nfunction validateProps(rawProps, props, instance) {\n  const resolvedValues = toRaw(props);\n  const options = instance.propsOptions[0];\n  const camelizePropsKey = Object.keys(rawProps).map((key) => camelize(key));\n  for (const key in options) {\n    let opt = options[key];\n    if (opt == null) continue;\n    validateProp(\n      key,\n      resolvedValues[key],\n      opt,\n      !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(resolvedValues) : resolvedValues,\n      !camelizePropsKey.includes(key)\n    );\n  }\n}\nfunction validateProp(name, value, prop, props, isAbsent) {\n  const { type, required, validator, skipCheck } = prop;\n  if (required && isAbsent) {\n    warn$1('Missing required prop: \"' + name + '\"');\n    return;\n  }\n  if (value == null && !required) {\n    return;\n  }\n  if (type != null && type !== true && !skipCheck) {\n    let isValid = false;\n    const types = isArray(type) ? type : [type];\n    const expectedTypes = [];\n    for (let i = 0; i < types.length && !isValid; i++) {\n      const { valid, expectedType } = assertType(value, types[i]);\n      expectedTypes.push(expectedType || \"\");\n      isValid = valid;\n    }\n    if (!isValid) {\n      warn$1(getInvalidTypeMessage(name, value, expectedTypes));\n      return;\n    }\n  }\n  if (validator && !validator(value, props)) {\n    warn$1('Invalid prop: custom validator check failed for prop \"' + name + '\".');\n  }\n}\nconst isSimpleType = /* @__PURE__ */ makeMap(\n  \"String,Number,Boolean,Function,Symbol,BigInt\"\n);\nfunction assertType(value, type) {\n  let valid;\n  const expectedType = getType(type);\n  if (expectedType === \"null\") {\n    valid = value === null;\n  } else if (isSimpleType(expectedType)) {\n    const t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    if (!valid && t === \"object\") {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === \"Object\") {\n    valid = isObject(value);\n  } else if (expectedType === \"Array\") {\n    valid = isArray(value);\n  } else {\n    valid = value instanceof type;\n  }\n  return {\n    valid,\n    expectedType\n  };\n}\nfunction getInvalidTypeMessage(name, value, expectedTypes) {\n  if (expectedTypes.length === 0) {\n    return `Prop type [] for prop \"${name}\" won't match anything. Did you mean to use type Array instead?`;\n  }\n  let message = `Invalid prop: type check failed for prop \"${name}\". Expected ${expectedTypes.map(capitalize).join(\" | \")}`;\n  const expectedType = expectedTypes[0];\n  const receivedType = toRawType(value);\n  const expectedValue = styleValue(value, expectedType);\n  const receivedValue = styleValue(value, receivedType);\n  if (expectedTypes.length === 1 && isExplicable(expectedType) && !isBoolean(expectedType, receivedType)) {\n    message += ` with value ${expectedValue}`;\n  }\n  message += `, got ${receivedType} `;\n  if (isExplicable(receivedType)) {\n    message += `with value ${receivedValue}.`;\n  }\n  return message;\n}\nfunction styleValue(value, type) {\n  if (type === \"String\") {\n    return `\"${value}\"`;\n  } else if (type === \"Number\") {\n    return `${Number(value)}`;\n  } else {\n    return `${value}`;\n  }\n}\nfunction isExplicable(type) {\n  const explicitTypes = [\"string\", \"number\", \"boolean\"];\n  return explicitTypes.some((elem) => type.toLowerCase() === elem);\n}\nfunction isBoolean(...args) {\n  return args.some((elem) => elem.toLowerCase() === \"boolean\");\n}\n\nconst isInternalKey = (key) => key[0] === \"_\" || key === \"$stable\";\nconst normalizeSlotValue = (value) => isArray(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];\nconst normalizeSlot = (key, rawSlot, ctx) => {\n  if (rawSlot._n) {\n    return rawSlot;\n  }\n  const normalized = withCtx((...args) => {\n    if (!!(process.env.NODE_ENV !== \"production\") && currentInstance && !(ctx === null && currentRenderingInstance) && !(ctx && ctx.root !== currentInstance.root)) {\n      warn$1(\n        `Slot \"${key}\" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`\n      );\n    }\n    return normalizeSlotValue(rawSlot(...args));\n  }, ctx);\n  normalized._c = false;\n  return normalized;\n};\nconst normalizeObjectSlots = (rawSlots, slots, instance) => {\n  const ctx = rawSlots._ctx;\n  for (const key in rawSlots) {\n    if (isInternalKey(key)) continue;\n    const value = rawSlots[key];\n    if (isFunction(value)) {\n      slots[key] = normalizeSlot(key, value, ctx);\n    } else if (value != null) {\n      if (!!(process.env.NODE_ENV !== \"production\") && true) {\n        warn$1(\n          `Non-function value encountered for slot \"${key}\". Prefer function slots for better performance.`\n        );\n      }\n      const normalized = normalizeSlotValue(value);\n      slots[key] = () => normalized;\n    }\n  }\n};\nconst normalizeVNodeSlots = (instance, children) => {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isKeepAlive(instance.vnode) && true) {\n    warn$1(\n      `Non-function value encountered for default slot. Prefer function slots for better performance.`\n    );\n  }\n  const normalized = normalizeSlotValue(children);\n  instance.slots.default = () => normalized;\n};\nconst assignSlots = (slots, children, optimized) => {\n  for (const key in children) {\n    if (optimized || !isInternalKey(key)) {\n      slots[key] = children[key];\n    }\n  }\n};\nconst initSlots = (instance, children, optimized) => {\n  const slots = instance.slots = createInternalObject();\n  if (instance.vnode.shapeFlag & 32) {\n    const type = children._;\n    if (type) {\n      assignSlots(slots, children, optimized);\n      if (optimized) {\n        def(slots, \"_\", type, true);\n      }\n    } else {\n      normalizeObjectSlots(children, slots);\n    }\n  } else if (children) {\n    normalizeVNodeSlots(instance, children);\n  }\n};\nconst updateSlots = (instance, children, optimized) => {\n  const { vnode, slots } = instance;\n  let needDeletionCheck = true;\n  let deletionComparisonTarget = EMPTY_OBJ;\n  if (vnode.shapeFlag & 32) {\n    const type = children._;\n    if (type) {\n      if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n        assignSlots(slots, children, optimized);\n        trigger(instance, \"set\", \"$slots\");\n      } else if (optimized && type === 1) {\n        needDeletionCheck = false;\n      } else {\n        assignSlots(slots, children, optimized);\n      }\n    } else {\n      needDeletionCheck = !children.$stable;\n      normalizeObjectSlots(children, slots);\n    }\n    deletionComparisonTarget = children;\n  } else if (children) {\n    normalizeVNodeSlots(instance, children);\n    deletionComparisonTarget = { default: 1 };\n  }\n  if (needDeletionCheck) {\n    for (const key in slots) {\n      if (!isInternalKey(key) && deletionComparisonTarget[key] == null) {\n        delete slots[key];\n      }\n    }\n  }\n};\n\nlet supported;\nlet perf;\nfunction startMeasure(instance, type) {\n  if (instance.appContext.config.performance && isSupported()) {\n    perf.mark(`vue-${type}-${instance.uid}`);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsPerfStart(instance, type, isSupported() ? perf.now() : Date.now());\n  }\n}\nfunction endMeasure(instance, type) {\n  if (instance.appContext.config.performance && isSupported()) {\n    const startTag = `vue-${type}-${instance.uid}`;\n    const endTag = startTag + `:end`;\n    perf.mark(endTag);\n    perf.measure(\n      `<${formatComponentName(instance, instance.type)}> ${type}`,\n      startTag,\n      endTag\n    );\n    perf.clearMarks(startTag);\n    perf.clearMarks(endTag);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsPerfEnd(instance, type, isSupported() ? perf.now() : Date.now());\n  }\n}\nfunction isSupported() {\n  if (supported !== void 0) {\n    return supported;\n  }\n  if (typeof window !== \"undefined\" && window.performance) {\n    supported = true;\n    perf = window.performance;\n  } else {\n    supported = false;\n  }\n  return supported;\n}\n\nfunction initFeatureFlags() {\n  const needWarn = [];\n  if (typeof __VUE_OPTIONS_API__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_OPTIONS_API__`);\n    getGlobalThis().__VUE_OPTIONS_API__ = true;\n  }\n  if (typeof __VUE_PROD_DEVTOOLS__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_PROD_DEVTOOLS__`);\n    getGlobalThis().__VUE_PROD_DEVTOOLS__ = false;\n  }\n  if (typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_PROD_HYDRATION_MISMATCH_DETAILS__`);\n    getGlobalThis().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__ = false;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && needWarn.length) {\n    const multi = needWarn.length > 1;\n    console.warn(\n      `Feature flag${multi ? `s` : ``} ${needWarn.join(\", \")} ${multi ? `are` : `is`} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.\n\nFor more details, see https://link.vuejs.org/feature-flags.`\n    );\n  }\n}\n\nconst queuePostRenderEffect = queueEffectWithSuspense ;\nfunction createRenderer(options) {\n  return baseCreateRenderer(options);\n}\nfunction createHydrationRenderer(options) {\n  return baseCreateRenderer(options, createHydrationFunctions);\n}\nfunction baseCreateRenderer(options, createHydrationFns) {\n  {\n    initFeatureFlags();\n  }\n  const target = getGlobalThis();\n  target.__VUE__ = true;\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    setDevtoolsHook$1(target.__VUE_DEVTOOLS_GLOBAL_HOOK__, target);\n  }\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    createComment: hostCreateComment,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling,\n    setScopeId: hostSetScopeId = NOOP,\n    insertStaticContent: hostInsertStaticContent\n  } = options;\n  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, namespace = void 0, slotScopeIds = null, optimized = !!(process.env.NODE_ENV !== \"production\") && isHmrUpdating ? false : !!n2.dynamicChildren) => {\n    if (n1 === n2) {\n      return;\n    }\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      anchor = getNextHostNode(n1);\n      unmount(n1, parentComponent, parentSuspense, true);\n      n1 = null;\n    }\n    if (n2.patchFlag === -2) {\n      optimized = false;\n      n2.dynamicChildren = null;\n    }\n    const { type, ref, shapeFlag } = n2;\n    switch (type) {\n      case Text:\n        processText(n1, n2, container, anchor);\n        break;\n      case Comment:\n        processCommentNode(n1, n2, container, anchor);\n        break;\n      case Static:\n        if (n1 == null) {\n          mountStaticNode(n2, container, anchor, namespace);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          patchStaticNode(n1, n2, container, namespace);\n        }\n        break;\n      case Fragment:\n        processFragment(\n          n1,\n          n2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        break;\n      default:\n        if (shapeFlag & 1) {\n          processElement(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (shapeFlag & 6) {\n          processComponent(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (shapeFlag & 64) {\n          type.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n        } else if (shapeFlag & 128) {\n          type.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Invalid VNode type:\", type, `(${typeof type})`);\n        }\n    }\n    if (ref != null && parentComponent) {\n      setRef(ref, n1 && n1.ref, parentSuspense, n2 || n1, !n2);\n    }\n  };\n  const processText = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(\n        n2.el = hostCreateText(n2.children),\n        container,\n        anchor\n      );\n    } else {\n      const el = n2.el = n1.el;\n      if (n2.children !== n1.children) {\n        hostSetText(el, n2.children);\n      }\n    }\n  };\n  const processCommentNode = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(\n        n2.el = hostCreateComment(n2.children || \"\"),\n        container,\n        anchor\n      );\n    } else {\n      n2.el = n1.el;\n    }\n  };\n  const mountStaticNode = (n2, container, anchor, namespace) => {\n    [n2.el, n2.anchor] = hostInsertStaticContent(\n      n2.children,\n      container,\n      anchor,\n      namespace,\n      n2.el,\n      n2.anchor\n    );\n  };\n  const patchStaticNode = (n1, n2, container, namespace) => {\n    if (n2.children !== n1.children) {\n      const anchor = hostNextSibling(n1.anchor);\n      removeStaticNode(n1);\n      [n2.el, n2.anchor] = hostInsertStaticContent(\n        n2.children,\n        container,\n        anchor,\n        namespace\n      );\n    } else {\n      n2.el = n1.el;\n      n2.anchor = n1.anchor;\n    }\n  };\n  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {\n    let next;\n    while (el && el !== anchor) {\n      next = hostNextSibling(el);\n      hostInsert(el, container, nextSibling);\n      el = next;\n    }\n    hostInsert(anchor, container, nextSibling);\n  };\n  const removeStaticNode = ({ el, anchor }) => {\n    let next;\n    while (el && el !== anchor) {\n      next = hostNextSibling(el);\n      hostRemove(el);\n      el = next;\n    }\n    hostRemove(anchor);\n  };\n  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    if (n2.type === \"svg\") {\n      namespace = \"svg\";\n    } else if (n2.type === \"math\") {\n      namespace = \"mathml\";\n    }\n    if (n1 == null) {\n      mountElement(\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    } else {\n      patchElement(\n        n1,\n        n2,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n  };\n  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    let el;\n    let vnodeHook;\n    const { props, shapeFlag, transition, dirs } = vnode;\n    el = vnode.el = hostCreateElement(\n      vnode.type,\n      namespace,\n      props && props.is,\n      props\n    );\n    if (shapeFlag & 8) {\n      hostSetElementText(el, vnode.children);\n    } else if (shapeFlag & 16) {\n      mountChildren(\n        vnode.children,\n        el,\n        null,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(vnode, namespace),\n        slotScopeIds,\n        optimized\n      );\n    }\n    if (dirs) {\n      invokeDirectiveHook(vnode, null, parentComponent, \"created\");\n    }\n    setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);\n    if (props) {\n      for (const key in props) {\n        if (key !== \"value\" && !isReservedProp(key)) {\n          hostPatchProp(el, key, null, props[key], namespace, parentComponent);\n        }\n      }\n      if (\"value\" in props) {\n        hostPatchProp(el, \"value\", null, props.value, namespace);\n      }\n      if (vnodeHook = props.onVnodeBeforeMount) {\n        invokeVNodeHook(vnodeHook, parentComponent, vnode);\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      def(el, \"__vnode\", vnode, true);\n      def(el, \"__vueParentComponent\", parentComponent, true);\n    }\n    if (dirs) {\n      invokeDirectiveHook(vnode, null, parentComponent, \"beforeMount\");\n    }\n    const needCallTransitionHooks = needTransition(parentSuspense, transition);\n    if (needCallTransitionHooks) {\n      transition.beforeEnter(el);\n    }\n    hostInsert(el, container, anchor);\n    if ((vnodeHook = props && props.onVnodeMounted) || needCallTransitionHooks || dirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n        needCallTransitionHooks && transition.enter(el);\n        dirs && invokeDirectiveHook(vnode, null, parentComponent, \"mounted\");\n      }, parentSuspense);\n    }\n  };\n  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {\n    if (scopeId) {\n      hostSetScopeId(el, scopeId);\n    }\n    if (slotScopeIds) {\n      for (let i = 0; i < slotScopeIds.length; i++) {\n        hostSetScopeId(el, slotScopeIds[i]);\n      }\n    }\n    if (parentComponent) {\n      let subTree = parentComponent.subTree;\n      if (!!(process.env.NODE_ENV !== \"production\") && subTree.patchFlag > 0 && subTree.patchFlag & 2048) {\n        subTree = filterSingleRoot(subTree.children) || subTree;\n      }\n      if (vnode === subTree || isSuspense(subTree.type) && (subTree.ssContent === vnode || subTree.ssFallback === vnode)) {\n        const parentVNode = parentComponent.vnode;\n        setScopeId(\n          el,\n          parentVNode,\n          parentVNode.scopeId,\n          parentVNode.slotScopeIds,\n          parentComponent.parent\n        );\n      }\n    }\n  };\n  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, start = 0) => {\n    for (let i = start; i < children.length; i++) {\n      const child = children[i] = optimized ? cloneIfMounted(children[i]) : normalizeVNode(children[i]);\n      patch(\n        null,\n        child,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n  };\n  const patchElement = (n1, n2, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    const el = n2.el = n1.el;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      el.__vnode = n2;\n    }\n    let { patchFlag, dynamicChildren, dirs } = n2;\n    patchFlag |= n1.patchFlag & 16;\n    const oldProps = n1.props || EMPTY_OBJ;\n    const newProps = n2.props || EMPTY_OBJ;\n    let vnodeHook;\n    parentComponent && toggleRecurse(parentComponent, false);\n    if (vnodeHook = newProps.onVnodeBeforeUpdate) {\n      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n    }\n    if (dirs) {\n      invokeDirectiveHook(n2, n1, parentComponent, \"beforeUpdate\");\n    }\n    parentComponent && toggleRecurse(parentComponent, true);\n    if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n      patchFlag = 0;\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (oldProps.innerHTML && newProps.innerHTML == null || oldProps.textContent && newProps.textContent == null) {\n      hostSetElementText(el, \"\");\n    }\n    if (dynamicChildren) {\n      patchBlockChildren(\n        n1.dynamicChildren,\n        dynamicChildren,\n        el,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(n2, namespace),\n        slotScopeIds\n      );\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        traverseStaticChildren(n1, n2);\n      }\n    } else if (!optimized) {\n      patchChildren(\n        n1,\n        n2,\n        el,\n        null,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(n2, namespace),\n        slotScopeIds,\n        false\n      );\n    }\n    if (patchFlag > 0) {\n      if (patchFlag & 16) {\n        patchProps(el, oldProps, newProps, parentComponent, namespace);\n      } else {\n        if (patchFlag & 2) {\n          if (oldProps.class !== newProps.class) {\n            hostPatchProp(el, \"class\", null, newProps.class, namespace);\n          }\n        }\n        if (patchFlag & 4) {\n          hostPatchProp(el, \"style\", oldProps.style, newProps.style, namespace);\n        }\n        if (patchFlag & 8) {\n          const propsToUpdate = n2.dynamicProps;\n          for (let i = 0; i < propsToUpdate.length; i++) {\n            const key = propsToUpdate[i];\n            const prev = oldProps[key];\n            const next = newProps[key];\n            if (next !== prev || key === \"value\") {\n              hostPatchProp(el, key, prev, next, namespace, parentComponent);\n            }\n          }\n        }\n      }\n      if (patchFlag & 1) {\n        if (n1.children !== n2.children) {\n          hostSetElementText(el, n2.children);\n        }\n      }\n    } else if (!optimized && dynamicChildren == null) {\n      patchProps(el, oldProps, newProps, parentComponent, namespace);\n    }\n    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n        dirs && invokeDirectiveHook(n2, n1, parentComponent, \"updated\");\n      }, parentSuspense);\n    }\n  };\n  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, namespace, slotScopeIds) => {\n    for (let i = 0; i < newChildren.length; i++) {\n      const oldVNode = oldChildren[i];\n      const newVNode = newChildren[i];\n      const container = (\n        // oldVNode may be an errored async setup() component inside Suspense\n        // which will not have a mounted element\n        oldVNode.el && // - In the case of a Fragment, we need to provide the actual parent\n        // of the Fragment itself so it can move its children.\n        (oldVNode.type === Fragment || // - In the case of different nodes, there is going to be a replacement\n        // which also requires the correct parent container\n        !isSameVNodeType(oldVNode, newVNode) || // - In the case of a component, it could contain anything.\n        oldVNode.shapeFlag & (6 | 64 | 128)) ? hostParentNode(oldVNode.el) : (\n          // In other cases, the parent container is not actually used so we\n          // just pass the block element here to avoid a DOM parentNode call.\n          fallbackContainer\n        )\n      );\n      patch(\n        oldVNode,\n        newVNode,\n        container,\n        null,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        true\n      );\n    }\n  };\n  const patchProps = (el, oldProps, newProps, parentComponent, namespace) => {\n    if (oldProps !== newProps) {\n      if (oldProps !== EMPTY_OBJ) {\n        for (const key in oldProps) {\n          if (!isReservedProp(key) && !(key in newProps)) {\n            hostPatchProp(\n              el,\n              key,\n              oldProps[key],\n              null,\n              namespace,\n              parentComponent\n            );\n          }\n        }\n      }\n      for (const key in newProps) {\n        if (isReservedProp(key)) continue;\n        const next = newProps[key];\n        const prev = oldProps[key];\n        if (next !== prev && key !== \"value\") {\n          hostPatchProp(el, key, prev, next, namespace, parentComponent);\n        }\n      }\n      if (\"value\" in newProps) {\n        hostPatchProp(el, \"value\", oldProps.value, newProps.value, namespace);\n      }\n    }\n  };\n  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText(\"\");\n    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText(\"\");\n    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;\n    if (!!(process.env.NODE_ENV !== \"production\") && // #5523 dev root fragment may inherit directives\n    (isHmrUpdating || patchFlag & 2048)) {\n      patchFlag = 0;\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (fragmentSlotScopeIds) {\n      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;\n    }\n    if (n1 == null) {\n      hostInsert(fragmentStartAnchor, container, anchor);\n      hostInsert(fragmentEndAnchor, container, anchor);\n      mountChildren(\n        // #10007\n        // such fragment like `<></>` will be compiled into\n        // a fragment which doesn't have a children.\n        // In this case fallback to an empty array\n        n2.children || [],\n        container,\n        fragmentEndAnchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    } else {\n      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && // #2715 the previous fragment could've been a BAILed one as a result\n      // of renderSlot() with no valid children\n      n1.dynamicChildren) {\n        patchBlockChildren(\n          n1.dynamicChildren,\n          dynamicChildren,\n          container,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds\n        );\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          traverseStaticChildren(n1, n2);\n        } else if (\n          // #2080 if the stable fragment has a key, it's a <template v-for> that may\n          //  get moved around. Make sure all root level vnodes inherit el.\n          // #2134 or if it's a component root, it may also get moved around\n          // as the component is being moved.\n          n2.key != null || parentComponent && n2 === parentComponent.subTree\n        ) {\n          traverseStaticChildren(\n            n1,\n            n2,\n            true\n            /* shallow */\n          );\n        }\n      } else {\n        patchChildren(\n          n1,\n          n2,\n          container,\n          fragmentEndAnchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      }\n    }\n  };\n  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    n2.slotScopeIds = slotScopeIds;\n    if (n1 == null) {\n      if (n2.shapeFlag & 512) {\n        parentComponent.ctx.activate(\n          n2,\n          container,\n          anchor,\n          namespace,\n          optimized\n        );\n      } else {\n        mountComponent(\n          n2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          optimized\n        );\n      }\n    } else {\n      updateComponent(n1, n2, optimized);\n    }\n  };\n  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, namespace, optimized) => {\n    const instance = (initialVNode.component = createComponentInstance(\n      initialVNode,\n      parentComponent,\n      parentSuspense\n    ));\n    if (!!(process.env.NODE_ENV !== \"production\") && instance.type.__hmrId) {\n      registerHMR(instance);\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      pushWarningContext(initialVNode);\n      startMeasure(instance, `mount`);\n    }\n    if (isKeepAlive(initialVNode)) {\n      instance.ctx.renderer = internals;\n    }\n    {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        startMeasure(instance, `init`);\n      }\n      setupComponent(instance, false, optimized);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        endMeasure(instance, `init`);\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) initialVNode.el = null;\n    if (instance.asyncDep) {\n      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect, optimized);\n      if (!initialVNode.el) {\n        const placeholder = instance.subTree = createVNode(Comment);\n        processCommentNode(null, placeholder, container, anchor);\n      }\n    } else {\n      setupRenderEffect(\n        instance,\n        initialVNode,\n        container,\n        anchor,\n        parentSuspense,\n        namespace,\n        optimized\n      );\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      popWarningContext();\n      endMeasure(instance, `mount`);\n    }\n  };\n  const updateComponent = (n1, n2, optimized) => {\n    const instance = n2.component = n1.component;\n    if (shouldUpdateComponent(n1, n2, optimized)) {\n      if (instance.asyncDep && !instance.asyncResolved) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(n2);\n        }\n        updateComponentPreRender(instance, n2, optimized);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n        return;\n      } else {\n        instance.next = n2;\n        instance.update();\n      }\n    } else {\n      n2.el = n1.el;\n      instance.vnode = n2;\n    }\n  };\n  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, namespace, optimized) => {\n    const componentUpdateFn = () => {\n      if (!instance.isMounted) {\n        let vnodeHook;\n        const { el, props } = initialVNode;\n        const { bm, m, parent, root, type } = instance;\n        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);\n        toggleRecurse(instance, false);\n        if (bm) {\n          invokeArrayFns(bm);\n        }\n        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeBeforeMount)) {\n          invokeVNodeHook(vnodeHook, parent, initialVNode);\n        }\n        toggleRecurse(instance, true);\n        if (el && hydrateNode) {\n          const hydrateSubTree = () => {\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              startMeasure(instance, `render`);\n            }\n            instance.subTree = renderComponentRoot(instance);\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              endMeasure(instance, `render`);\n            }\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              startMeasure(instance, `hydrate`);\n            }\n            hydrateNode(\n              el,\n              instance.subTree,\n              instance,\n              parentSuspense,\n              null\n            );\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              endMeasure(instance, `hydrate`);\n            }\n          };\n          if (isAsyncWrapperVNode && type.__asyncHydrate) {\n            type.__asyncHydrate(\n              el,\n              instance,\n              hydrateSubTree\n            );\n          } else {\n            hydrateSubTree();\n          }\n        } else {\n          if (root.ce) {\n            root.ce._injectChildStyle(type);\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            startMeasure(instance, `render`);\n          }\n          const subTree = instance.subTree = renderComponentRoot(instance);\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            endMeasure(instance, `render`);\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            startMeasure(instance, `patch`);\n          }\n          patch(\n            null,\n            subTree,\n            container,\n            anchor,\n            instance,\n            parentSuspense,\n            namespace\n          );\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            endMeasure(instance, `patch`);\n          }\n          initialVNode.el = subTree.el;\n        }\n        if (m) {\n          queuePostRenderEffect(m, parentSuspense);\n        }\n        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeMounted)) {\n          const scopedInitialVNode = initialVNode;\n          queuePostRenderEffect(\n            () => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode),\n            parentSuspense\n          );\n        }\n        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {\n          instance.a && queuePostRenderEffect(instance.a, parentSuspense);\n        }\n        instance.isMounted = true;\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n          devtoolsComponentAdded(instance);\n        }\n        initialVNode = container = anchor = null;\n      } else {\n        let { next, bu, u, parent, vnode } = instance;\n        {\n          const nonHydratedAsyncRoot = locateNonHydratedAsyncRoot(instance);\n          if (nonHydratedAsyncRoot) {\n            if (next) {\n              next.el = vnode.el;\n              updateComponentPreRender(instance, next, optimized);\n            }\n            nonHydratedAsyncRoot.asyncDep.then(() => {\n              if (!instance.isUnmounted) {\n                componentUpdateFn();\n              }\n            });\n            return;\n          }\n        }\n        let originNext = next;\n        let vnodeHook;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(next || instance.vnode);\n        }\n        toggleRecurse(instance, false);\n        if (next) {\n          next.el = vnode.el;\n          updateComponentPreRender(instance, next, optimized);\n        } else {\n          next = vnode;\n        }\n        if (bu) {\n          invokeArrayFns(bu);\n        }\n        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {\n          invokeVNodeHook(vnodeHook, parent, next, vnode);\n        }\n        toggleRecurse(instance, true);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `render`);\n        }\n        const nextTree = renderComponentRoot(instance);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `render`);\n        }\n        const prevTree = instance.subTree;\n        instance.subTree = nextTree;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `patch`);\n        }\n        patch(\n          prevTree,\n          nextTree,\n          // parent may have changed if it's in a teleport\n          hostParentNode(prevTree.el),\n          // anchor may have changed if it's in a fragment\n          getNextHostNode(prevTree),\n          instance,\n          parentSuspense,\n          namespace\n        );\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `patch`);\n        }\n        next.el = nextTree.el;\n        if (originNext === null) {\n          updateHOCHostEl(instance, nextTree.el);\n        }\n        if (u) {\n          queuePostRenderEffect(u, parentSuspense);\n        }\n        if (vnodeHook = next.props && next.props.onVnodeUpdated) {\n          queuePostRenderEffect(\n            () => invokeVNodeHook(vnodeHook, parent, next, vnode),\n            parentSuspense\n          );\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n          devtoolsComponentUpdated(instance);\n        }\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n      }\n    };\n    instance.scope.on();\n    const effect = instance.effect = new ReactiveEffect(componentUpdateFn);\n    instance.scope.off();\n    const update = instance.update = effect.run.bind(effect);\n    const job = instance.job = effect.runIfDirty.bind(effect);\n    job.i = instance;\n    job.id = instance.uid;\n    effect.scheduler = () => queueJob(job);\n    toggleRecurse(instance, true);\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      effect.onTrack = instance.rtc ? (e) => invokeArrayFns(instance.rtc, e) : void 0;\n      effect.onTrigger = instance.rtg ? (e) => invokeArrayFns(instance.rtg, e) : void 0;\n    }\n    update();\n  };\n  const updateComponentPreRender = (instance, nextVNode, optimized) => {\n    nextVNode.component = instance;\n    const prevProps = instance.vnode.props;\n    instance.vnode = nextVNode;\n    instance.next = null;\n    updateProps(instance, nextVNode.props, prevProps, optimized);\n    updateSlots(instance, nextVNode.children, optimized);\n    pauseTracking();\n    flushPreFlushCbs(instance);\n    resetTracking();\n  };\n  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized = false) => {\n    const c1 = n1 && n1.children;\n    const prevShapeFlag = n1 ? n1.shapeFlag : 0;\n    const c2 = n2.children;\n    const { patchFlag, shapeFlag } = n2;\n    if (patchFlag > 0) {\n      if (patchFlag & 128) {\n        patchKeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        return;\n      } else if (patchFlag & 256) {\n        patchUnkeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        return;\n      }\n    }\n    if (shapeFlag & 8) {\n      if (prevShapeFlag & 16) {\n        unmountChildren(c1, parentComponent, parentSuspense);\n      }\n      if (c2 !== c1) {\n        hostSetElementText(container, c2);\n      }\n    } else {\n      if (prevShapeFlag & 16) {\n        if (shapeFlag & 16) {\n          patchKeyedChildren(\n            c1,\n            c2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else {\n          unmountChildren(c1, parentComponent, parentSuspense, true);\n        }\n      } else {\n        if (prevShapeFlag & 8) {\n          hostSetElementText(container, \"\");\n        }\n        if (shapeFlag & 16) {\n          mountChildren(\n            c2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        }\n      }\n    }\n  };\n  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    c1 = c1 || EMPTY_ARR;\n    c2 = c2 || EMPTY_ARR;\n    const oldLength = c1.length;\n    const newLength = c2.length;\n    const commonLength = Math.min(oldLength, newLength);\n    let i;\n    for (i = 0; i < commonLength; i++) {\n      const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n      patch(\n        c1[i],\n        nextChild,\n        container,\n        null,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n    if (oldLength > newLength) {\n      unmountChildren(\n        c1,\n        parentComponent,\n        parentSuspense,\n        true,\n        false,\n        commonLength\n      );\n    } else {\n      mountChildren(\n        c2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized,\n        commonLength\n      );\n    }\n  };\n  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    let i = 0;\n    const l2 = c2.length;\n    let e1 = c1.length - 1;\n    let e2 = l2 - 1;\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[i];\n      const n2 = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n      if (isSameVNodeType(n1, n2)) {\n        patch(\n          n1,\n          n2,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      } else {\n        break;\n      }\n      i++;\n    }\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[e1];\n      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);\n      if (isSameVNodeType(n1, n2)) {\n        patch(\n          n1,\n          n2,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      } else {\n        break;\n      }\n      e1--;\n      e2--;\n    }\n    if (i > e1) {\n      if (i <= e2) {\n        const nextPos = e2 + 1;\n        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;\n        while (i <= e2) {\n          patch(\n            null,\n            c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]),\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          i++;\n        }\n      }\n    } else if (i > e2) {\n      while (i <= e1) {\n        unmount(c1[i], parentComponent, parentSuspense, true);\n        i++;\n      }\n    } else {\n      const s1 = i;\n      const s2 = i;\n      const keyToNewIndexMap = /* @__PURE__ */ new Map();\n      for (i = s2; i <= e2; i++) {\n        const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n        if (nextChild.key != null) {\n          if (!!(process.env.NODE_ENV !== \"production\") && keyToNewIndexMap.has(nextChild.key)) {\n            warn$1(\n              `Duplicate keys found during update:`,\n              JSON.stringify(nextChild.key),\n              `Make sure keys are unique.`\n            );\n          }\n          keyToNewIndexMap.set(nextChild.key, i);\n        }\n      }\n      let j;\n      let patched = 0;\n      const toBePatched = e2 - s2 + 1;\n      let moved = false;\n      let maxNewIndexSoFar = 0;\n      const newIndexToOldIndexMap = new Array(toBePatched);\n      for (i = 0; i < toBePatched; i++) newIndexToOldIndexMap[i] = 0;\n      for (i = s1; i <= e1; i++) {\n        const prevChild = c1[i];\n        if (patched >= toBePatched) {\n          unmount(prevChild, parentComponent, parentSuspense, true);\n          continue;\n        }\n        let newIndex;\n        if (prevChild.key != null) {\n          newIndex = keyToNewIndexMap.get(prevChild.key);\n        } else {\n          for (j = s2; j <= e2; j++) {\n            if (newIndexToOldIndexMap[j - s2] === 0 && isSameVNodeType(prevChild, c2[j])) {\n              newIndex = j;\n              break;\n            }\n          }\n        }\n        if (newIndex === void 0) {\n          unmount(prevChild, parentComponent, parentSuspense, true);\n        } else {\n          newIndexToOldIndexMap[newIndex - s2] = i + 1;\n          if (newIndex >= maxNewIndexSoFar) {\n            maxNewIndexSoFar = newIndex;\n          } else {\n            moved = true;\n          }\n          patch(\n            prevChild,\n            c2[newIndex],\n            container,\n            null,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          patched++;\n        }\n      }\n      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : EMPTY_ARR;\n      j = increasingNewIndexSequence.length - 1;\n      for (i = toBePatched - 1; i >= 0; i--) {\n        const nextIndex = s2 + i;\n        const nextChild = c2[nextIndex];\n        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;\n        if (newIndexToOldIndexMap[i] === 0) {\n          patch(\n            null,\n            nextChild,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (moved) {\n          if (j < 0 || i !== increasingNewIndexSequence[j]) {\n            move(nextChild, container, anchor, 2);\n          } else {\n            j--;\n          }\n        }\n      }\n    }\n  };\n  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {\n    const { el, type, transition, children, shapeFlag } = vnode;\n    if (shapeFlag & 6) {\n      move(vnode.component.subTree, container, anchor, moveType);\n      return;\n    }\n    if (shapeFlag & 128) {\n      vnode.suspense.move(container, anchor, moveType);\n      return;\n    }\n    if (shapeFlag & 64) {\n      type.move(vnode, container, anchor, internals);\n      return;\n    }\n    if (type === Fragment) {\n      hostInsert(el, container, anchor);\n      for (let i = 0; i < children.length; i++) {\n        move(children[i], container, anchor, moveType);\n      }\n      hostInsert(vnode.anchor, container, anchor);\n      return;\n    }\n    if (type === Static) {\n      moveStaticNode(vnode, container, anchor);\n      return;\n    }\n    const needTransition2 = moveType !== 2 && shapeFlag & 1 && transition;\n    if (needTransition2) {\n      if (moveType === 0) {\n        transition.beforeEnter(el);\n        hostInsert(el, container, anchor);\n        queuePostRenderEffect(() => transition.enter(el), parentSuspense);\n      } else {\n        const { leave, delayLeave, afterLeave } = transition;\n        const remove2 = () => {\n          if (vnode.ctx.isUnmounted) {\n            hostRemove(el);\n          } else {\n            hostInsert(el, container, anchor);\n          }\n        };\n        const performLeave = () => {\n          leave(el, () => {\n            remove2();\n            afterLeave && afterLeave();\n          });\n        };\n        if (delayLeave) {\n          delayLeave(el, remove2, performLeave);\n        } else {\n          performLeave();\n        }\n      }\n    } else {\n      hostInsert(el, container, anchor);\n    }\n  };\n  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {\n    const {\n      type,\n      props,\n      ref,\n      children,\n      dynamicChildren,\n      shapeFlag,\n      patchFlag,\n      dirs,\n      cacheIndex\n    } = vnode;\n    if (patchFlag === -2) {\n      optimized = false;\n    }\n    if (ref != null) {\n      pauseTracking();\n      setRef(ref, null, parentSuspense, vnode, true);\n      resetTracking();\n    }\n    if (cacheIndex != null) {\n      parentComponent.renderCache[cacheIndex] = void 0;\n    }\n    if (shapeFlag & 256) {\n      parentComponent.ctx.deactivate(vnode);\n      return;\n    }\n    const shouldInvokeDirs = shapeFlag & 1 && dirs;\n    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);\n    let vnodeHook;\n    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeBeforeUnmount)) {\n      invokeVNodeHook(vnodeHook, parentComponent, vnode);\n    }\n    if (shapeFlag & 6) {\n      unmountComponent(vnode.component, parentSuspense, doRemove);\n    } else {\n      if (shapeFlag & 128) {\n        vnode.suspense.unmount(parentSuspense, doRemove);\n        return;\n      }\n      if (shouldInvokeDirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"beforeUnmount\");\n      }\n      if (shapeFlag & 64) {\n        vnode.type.remove(\n          vnode,\n          parentComponent,\n          parentSuspense,\n          internals,\n          doRemove\n        );\n      } else if (dynamicChildren && // #5154\n      // when v-once is used inside a block, setBlockTracking(-1) marks the\n      // parent block with hasOnce: true\n      // so that it doesn't take the fast path during unmount - otherwise\n      // components nested in v-once are never unmounted.\n      !dynamicChildren.hasOnce && // #1153: fast path should not be taken for non-stable (v-for) fragments\n      (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {\n        unmountChildren(\n          dynamicChildren,\n          parentComponent,\n          parentSuspense,\n          false,\n          true\n        );\n      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {\n        unmountChildren(children, parentComponent, parentSuspense);\n      }\n      if (doRemove) {\n        remove(vnode);\n      }\n    }\n    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeUnmounted) || shouldInvokeDirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, \"unmounted\");\n      }, parentSuspense);\n    }\n  };\n  const remove = (vnode) => {\n    const { type, el, anchor, transition } = vnode;\n    if (type === Fragment) {\n      if (!!(process.env.NODE_ENV !== \"production\") && vnode.patchFlag > 0 && vnode.patchFlag & 2048 && transition && !transition.persisted) {\n        vnode.children.forEach((child) => {\n          if (child.type === Comment) {\n            hostRemove(child.el);\n          } else {\n            remove(child);\n          }\n        });\n      } else {\n        removeFragment(el, anchor);\n      }\n      return;\n    }\n    if (type === Static) {\n      removeStaticNode(vnode);\n      return;\n    }\n    const performRemove = () => {\n      hostRemove(el);\n      if (transition && !transition.persisted && transition.afterLeave) {\n        transition.afterLeave();\n      }\n    };\n    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {\n      const { leave, delayLeave } = transition;\n      const performLeave = () => leave(el, performRemove);\n      if (delayLeave) {\n        delayLeave(vnode.el, performRemove, performLeave);\n      } else {\n        performLeave();\n      }\n    } else {\n      performRemove();\n    }\n  };\n  const removeFragment = (cur, end) => {\n    let next;\n    while (cur !== end) {\n      next = hostNextSibling(cur);\n      hostRemove(cur);\n      cur = next;\n    }\n    hostRemove(end);\n  };\n  const unmountComponent = (instance, parentSuspense, doRemove) => {\n    if (!!(process.env.NODE_ENV !== \"production\") && instance.type.__hmrId) {\n      unregisterHMR(instance);\n    }\n    const {\n      bum,\n      scope,\n      job,\n      subTree,\n      um,\n      m,\n      a,\n      parent,\n      slots: { __: slotCacheKeys }\n    } = instance;\n    invalidateMount(m);\n    invalidateMount(a);\n    if (bum) {\n      invokeArrayFns(bum);\n    }\n    if (parent && isArray(slotCacheKeys)) {\n      slotCacheKeys.forEach((v) => {\n        parent.renderCache[v] = void 0;\n      });\n    }\n    scope.stop();\n    if (job) {\n      job.flags |= 8;\n      unmount(subTree, instance, parentSuspense, doRemove);\n    }\n    if (um) {\n      queuePostRenderEffect(um, parentSuspense);\n    }\n    queuePostRenderEffect(() => {\n      instance.isUnmounted = true;\n    }, parentSuspense);\n    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {\n      parentSuspense.deps--;\n      if (parentSuspense.deps === 0) {\n        parentSuspense.resolve();\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      devtoolsComponentRemoved(instance);\n    }\n  };\n  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {\n    for (let i = start; i < children.length; i++) {\n      unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);\n    }\n  };\n  const getNextHostNode = (vnode) => {\n    if (vnode.shapeFlag & 6) {\n      return getNextHostNode(vnode.component.subTree);\n    }\n    if (vnode.shapeFlag & 128) {\n      return vnode.suspense.next();\n    }\n    const el = hostNextSibling(vnode.anchor || vnode.el);\n    const teleportEnd = el && el[TeleportEndKey];\n    return teleportEnd ? hostNextSibling(teleportEnd) : el;\n  };\n  let isFlushing = false;\n  const render = (vnode, container, namespace) => {\n    if (vnode == null) {\n      if (container._vnode) {\n        unmount(container._vnode, null, null, true);\n      }\n    } else {\n      patch(\n        container._vnode || null,\n        vnode,\n        container,\n        null,\n        null,\n        null,\n        namespace\n      );\n    }\n    container._vnode = vnode;\n    if (!isFlushing) {\n      isFlushing = true;\n      flushPreFlushCbs();\n      flushPostFlushCbs();\n      isFlushing = false;\n    }\n  };\n  const internals = {\n    p: patch,\n    um: unmount,\n    m: move,\n    r: remove,\n    mt: mountComponent,\n    mc: mountChildren,\n    pc: patchChildren,\n    pbc: patchBlockChildren,\n    n: getNextHostNode,\n    o: options\n  };\n  let hydrate;\n  let hydrateNode;\n  if (createHydrationFns) {\n    [hydrate, hydrateNode] = createHydrationFns(\n      internals\n    );\n  }\n  return {\n    render,\n    hydrate,\n    createApp: createAppAPI(render, hydrate)\n  };\n}\nfunction resolveChildrenNamespace({ type, props }, currentNamespace) {\n  return currentNamespace === \"svg\" && type === \"foreignObject\" || currentNamespace === \"mathml\" && type === \"annotation-xml\" && props && props.encoding && props.encoding.includes(\"html\") ? void 0 : currentNamespace;\n}\nfunction toggleRecurse({ effect, job }, allowed) {\n  if (allowed) {\n    effect.flags |= 32;\n    job.flags |= 4;\n  } else {\n    effect.flags &= -33;\n    job.flags &= -5;\n  }\n}\nfunction needTransition(parentSuspense, transition) {\n  return (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;\n}\nfunction traverseStaticChildren(n1, n2, shallow = false) {\n  const ch1 = n1.children;\n  const ch2 = n2.children;\n  if (isArray(ch1) && isArray(ch2)) {\n    for (let i = 0; i < ch1.length; i++) {\n      const c1 = ch1[i];\n      let c2 = ch2[i];\n      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {\n        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {\n          c2 = ch2[i] = cloneIfMounted(ch2[i]);\n          c2.el = c1.el;\n        }\n        if (!shallow && c2.patchFlag !== -2)\n          traverseStaticChildren(c1, c2);\n      }\n      if (c2.type === Text) {\n        c2.el = c1.el;\n      }\n      if (c2.type === Comment && !c2.el) {\n        c2.el = c1.el;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        c2.el && (c2.el.__vnode = c2);\n      }\n    }\n  }\n}\nfunction getSequence(arr) {\n  const p = arr.slice();\n  const result = [0];\n  let i, j, u, v, c;\n  const len = arr.length;\n  for (i = 0; i < len; i++) {\n    const arrI = arr[i];\n    if (arrI !== 0) {\n      j = result[result.length - 1];\n      if (arr[j] < arrI) {\n        p[i] = j;\n        result.push(i);\n        continue;\n      }\n      u = 0;\n      v = result.length - 1;\n      while (u < v) {\n        c = u + v >> 1;\n        if (arr[result[c]] < arrI) {\n          u = c + 1;\n        } else {\n          v = c;\n        }\n      }\n      if (arrI < arr[result[u]]) {\n        if (u > 0) {\n          p[i] = result[u - 1];\n        }\n        result[u] = i;\n      }\n    }\n  }\n  u = result.length;\n  v = result[u - 1];\n  while (u-- > 0) {\n    result[u] = v;\n    v = p[v];\n  }\n  return result;\n}\nfunction locateNonHydratedAsyncRoot(instance) {\n  const subComponent = instance.subTree.component;\n  if (subComponent) {\n    if (subComponent.asyncDep && !subComponent.asyncResolved) {\n      return subComponent;\n    } else {\n      return locateNonHydratedAsyncRoot(subComponent);\n    }\n  }\n}\nfunction invalidateMount(hooks) {\n  if (hooks) {\n    for (let i = 0; i < hooks.length; i++)\n      hooks[i].flags |= 8;\n  }\n}\n\nconst ssrContextKey = Symbol.for(\"v-scx\");\nconst useSSRContext = () => {\n  {\n    const ctx = inject(ssrContextKey);\n    if (!ctx) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build.`\n      );\n    }\n    return ctx;\n  }\n};\n\nfunction watchEffect(effect, options) {\n  return doWatch(effect, null, options);\n}\nfunction watchPostEffect(effect, options) {\n  return doWatch(\n    effect,\n    null,\n    !!(process.env.NODE_ENV !== \"production\") ? extend({}, options, { flush: \"post\" }) : { flush: \"post\" }\n  );\n}\nfunction watchSyncEffect(effect, options) {\n  return doWatch(\n    effect,\n    null,\n    !!(process.env.NODE_ENV !== \"production\") ? extend({}, options, { flush: \"sync\" }) : { flush: \"sync\" }\n  );\n}\nfunction watch(source, cb, options) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isFunction(cb)) {\n    warn$1(\n      `\\`watch(fn, options?)\\` signature has been moved to a separate API. Use \\`watchEffect(fn, options?)\\` instead. \\`watch\\` now only supports \\`watch(source, cb, options?) signature.`\n    );\n  }\n  return doWatch(source, cb, options);\n}\nfunction doWatch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, flush, once } = options;\n  if (!!(process.env.NODE_ENV !== \"production\") && !cb) {\n    if (immediate !== void 0) {\n      warn$1(\n        `watch() \"immediate\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n    if (deep !== void 0) {\n      warn$1(\n        `watch() \"deep\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n    if (once !== void 0) {\n      warn$1(\n        `watch() \"once\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n  }\n  const baseWatchOptions = extend({}, options);\n  if (!!(process.env.NODE_ENV !== \"production\")) baseWatchOptions.onWarn = warn$1;\n  const runsImmediately = cb && immediate || !cb && flush !== \"post\";\n  let ssrCleanup;\n  if (isInSSRComponentSetup) {\n    if (flush === \"sync\") {\n      const ctx = useSSRContext();\n      ssrCleanup = ctx.__watcherHandles || (ctx.__watcherHandles = []);\n    } else if (!runsImmediately) {\n      const watchStopHandle = () => {\n      };\n      watchStopHandle.stop = NOOP;\n      watchStopHandle.resume = NOOP;\n      watchStopHandle.pause = NOOP;\n      return watchStopHandle;\n    }\n  }\n  const instance = currentInstance;\n  baseWatchOptions.call = (fn, type, args) => callWithAsyncErrorHandling(fn, instance, type, args);\n  let isPre = false;\n  if (flush === \"post\") {\n    baseWatchOptions.scheduler = (job) => {\n      queuePostRenderEffect(job, instance && instance.suspense);\n    };\n  } else if (flush !== \"sync\") {\n    isPre = true;\n    baseWatchOptions.scheduler = (job, isFirstRun) => {\n      if (isFirstRun) {\n        job();\n      } else {\n        queueJob(job);\n      }\n    };\n  }\n  baseWatchOptions.augmentJob = (job) => {\n    if (cb) {\n      job.flags |= 4;\n    }\n    if (isPre) {\n      job.flags |= 2;\n      if (instance) {\n        job.id = instance.uid;\n        job.i = instance;\n      }\n    }\n  };\n  const watchHandle = watch$1(source, cb, baseWatchOptions);\n  if (isInSSRComponentSetup) {\n    if (ssrCleanup) {\n      ssrCleanup.push(watchHandle);\n    } else if (runsImmediately) {\n      watchHandle();\n    }\n  }\n  return watchHandle;\n}\nfunction instanceWatch(source, value, options) {\n  const publicThis = this.proxy;\n  const getter = isString(source) ? source.includes(\".\") ? createPathGetter(publicThis, source) : () => publicThis[source] : source.bind(publicThis, publicThis);\n  let cb;\n  if (isFunction(value)) {\n    cb = value;\n  } else {\n    cb = value.handler;\n    options = value;\n  }\n  const reset = setCurrentInstance(this);\n  const res = doWatch(getter, cb.bind(publicThis), options);\n  reset();\n  return res;\n}\nfunction createPathGetter(ctx, path) {\n  const segments = path.split(\".\");\n  return () => {\n    let cur = ctx;\n    for (let i = 0; i < segments.length && cur; i++) {\n      cur = cur[segments[i]];\n    }\n    return cur;\n  };\n}\n\nfunction useModel(props, name, options = EMPTY_OBJ) {\n  const i = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !i) {\n    warn$1(`useModel() called without active instance.`);\n    return ref();\n  }\n  const camelizedName = camelize(name);\n  if (!!(process.env.NODE_ENV !== \"production\") && !i.propsOptions[0][camelizedName]) {\n    warn$1(`useModel() called with prop \"${name}\" which is not declared.`);\n    return ref();\n  }\n  const hyphenatedName = hyphenate(name);\n  const modifiers = getModelModifiers(props, camelizedName);\n  const res = customRef((track, trigger) => {\n    let localValue;\n    let prevSetValue = EMPTY_OBJ;\n    let prevEmittedValue;\n    watchSyncEffect(() => {\n      const propValue = props[camelizedName];\n      if (hasChanged(localValue, propValue)) {\n        localValue = propValue;\n        trigger();\n      }\n    });\n    return {\n      get() {\n        track();\n        return options.get ? options.get(localValue) : localValue;\n      },\n      set(value) {\n        const emittedValue = options.set ? options.set(value) : value;\n        if (!hasChanged(emittedValue, localValue) && !(prevSetValue !== EMPTY_OBJ && hasChanged(value, prevSetValue))) {\n          return;\n        }\n        const rawProps = i.vnode.props;\n        if (!(rawProps && // check if parent has passed v-model\n        (name in rawProps || camelizedName in rawProps || hyphenatedName in rawProps) && (`onUpdate:${name}` in rawProps || `onUpdate:${camelizedName}` in rawProps || `onUpdate:${hyphenatedName}` in rawProps))) {\n          localValue = value;\n          trigger();\n        }\n        i.emit(`update:${name}`, emittedValue);\n        if (hasChanged(value, emittedValue) && hasChanged(value, prevSetValue) && !hasChanged(emittedValue, prevEmittedValue)) {\n          trigger();\n        }\n        prevSetValue = value;\n        prevEmittedValue = emittedValue;\n      }\n    };\n  });\n  res[Symbol.iterator] = () => {\n    let i2 = 0;\n    return {\n      next() {\n        if (i2 < 2) {\n          return { value: i2++ ? modifiers || EMPTY_OBJ : res, done: false };\n        } else {\n          return { done: true };\n        }\n      }\n    };\n  };\n  return res;\n}\nconst getModelModifiers = (props, modelName) => {\n  return modelName === \"modelValue\" || modelName === \"model-value\" ? props.modelModifiers : props[`${modelName}Modifiers`] || props[`${camelize(modelName)}Modifiers`] || props[`${hyphenate(modelName)}Modifiers`];\n};\n\nfunction emit(instance, event, ...rawArgs) {\n  if (instance.isUnmounted) return;\n  const props = instance.vnode.props || EMPTY_OBJ;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const {\n      emitsOptions,\n      propsOptions: [propsOptions]\n    } = instance;\n    if (emitsOptions) {\n      if (!(event in emitsOptions) && true) {\n        if (!propsOptions || !(toHandlerKey(camelize(event)) in propsOptions)) {\n          warn$1(\n            `Component emitted event \"${event}\" but it is neither declared in the emits option nor as an \"${toHandlerKey(camelize(event))}\" prop.`\n          );\n        }\n      } else {\n        const validator = emitsOptions[event];\n        if (isFunction(validator)) {\n          const isValid = validator(...rawArgs);\n          if (!isValid) {\n            warn$1(\n              `Invalid event arguments: event validation failed for event \"${event}\".`\n            );\n          }\n        }\n      }\n    }\n  }\n  let args = rawArgs;\n  const isModelListener = event.startsWith(\"update:\");\n  const modifiers = isModelListener && getModelModifiers(props, event.slice(7));\n  if (modifiers) {\n    if (modifiers.trim) {\n      args = rawArgs.map((a) => isString(a) ? a.trim() : a);\n    }\n    if (modifiers.number) {\n      args = rawArgs.map(looseToNumber);\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsComponentEmit(instance, event, args);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const lowerCaseEvent = event.toLowerCase();\n    if (lowerCaseEvent !== event && props[toHandlerKey(lowerCaseEvent)]) {\n      warn$1(\n        `Event \"${lowerCaseEvent}\" is emitted in component ${formatComponentName(\n          instance,\n          instance.type\n        )} but the handler is registered for \"${event}\". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use \"${hyphenate(\n          event\n        )}\" instead of \"${event}\".`\n      );\n    }\n  }\n  let handlerName;\n  let handler = props[handlerName = toHandlerKey(event)] || // also try camelCase event handler (#2249)\n  props[handlerName = toHandlerKey(camelize(event))];\n  if (!handler && isModelListener) {\n    handler = props[handlerName = toHandlerKey(hyphenate(event))];\n  }\n  if (handler) {\n    callWithAsyncErrorHandling(\n      handler,\n      instance,\n      6,\n      args\n    );\n  }\n  const onceHandler = props[handlerName + `Once`];\n  if (onceHandler) {\n    if (!instance.emitted) {\n      instance.emitted = {};\n    } else if (instance.emitted[handlerName]) {\n      return;\n    }\n    instance.emitted[handlerName] = true;\n    callWithAsyncErrorHandling(\n      onceHandler,\n      instance,\n      6,\n      args\n    );\n  }\n}\nfunction normalizeEmitsOptions(comp, appContext, asMixin = false) {\n  const cache = appContext.emitsCache;\n  const cached = cache.get(comp);\n  if (cached !== void 0) {\n    return cached;\n  }\n  const raw = comp.emits;\n  let normalized = {};\n  let hasExtends = false;\n  if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n    const extendEmits = (raw2) => {\n      const normalizedFromExtend = normalizeEmitsOptions(raw2, appContext, true);\n      if (normalizedFromExtend) {\n        hasExtends = true;\n        extend(normalized, normalizedFromExtend);\n      }\n    };\n    if (!asMixin && appContext.mixins.length) {\n      appContext.mixins.forEach(extendEmits);\n    }\n    if (comp.extends) {\n      extendEmits(comp.extends);\n    }\n    if (comp.mixins) {\n      comp.mixins.forEach(extendEmits);\n    }\n  }\n  if (!raw && !hasExtends) {\n    if (isObject(comp)) {\n      cache.set(comp, null);\n    }\n    return null;\n  }\n  if (isArray(raw)) {\n    raw.forEach((key) => normalized[key] = null);\n  } else {\n    extend(normalized, raw);\n  }\n  if (isObject(comp)) {\n    cache.set(comp, normalized);\n  }\n  return normalized;\n}\nfunction isEmitListener(options, key) {\n  if (!options || !isOn(key)) {\n    return false;\n  }\n  key = key.slice(2).replace(/Once$/, \"\");\n  return hasOwn(options, key[0].toLowerCase() + key.slice(1)) || hasOwn(options, hyphenate(key)) || hasOwn(options, key);\n}\n\nlet accessedAttrs = false;\nfunction markAttrsAccessed() {\n  accessedAttrs = true;\n}\nfunction renderComponentRoot(instance) {\n  const {\n    type: Component,\n    vnode,\n    proxy,\n    withProxy,\n    propsOptions: [propsOptions],\n    slots,\n    attrs,\n    emit,\n    render,\n    renderCache,\n    props,\n    data,\n    setupState,\n    ctx,\n    inheritAttrs\n  } = instance;\n  const prev = setCurrentRenderingInstance(instance);\n  let result;\n  let fallthroughAttrs;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    accessedAttrs = false;\n  }\n  try {\n    if (vnode.shapeFlag & 4) {\n      const proxyToUse = withProxy || proxy;\n      const thisProxy = !!(process.env.NODE_ENV !== \"production\") && setupState.__isScriptSetup ? new Proxy(proxyToUse, {\n        get(target, key, receiver) {\n          warn$1(\n            `Property '${String(\n              key\n            )}' was accessed via 'this'. Avoid using 'this' in templates.`\n          );\n          return Reflect.get(target, key, receiver);\n        }\n      }) : proxyToUse;\n      result = normalizeVNode(\n        render.call(\n          thisProxy,\n          proxyToUse,\n          renderCache,\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          setupState,\n          data,\n          ctx\n        )\n      );\n      fallthroughAttrs = attrs;\n    } else {\n      const render2 = Component;\n      if (!!(process.env.NODE_ENV !== \"production\") && attrs === props) {\n        markAttrsAccessed();\n      }\n      result = normalizeVNode(\n        render2.length > 1 ? render2(\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          !!(process.env.NODE_ENV !== \"production\") ? {\n            get attrs() {\n              markAttrsAccessed();\n              return shallowReadonly(attrs);\n            },\n            slots,\n            emit\n          } : { attrs, slots, emit }\n        ) : render2(\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          null\n        )\n      );\n      fallthroughAttrs = Component.props ? attrs : getFunctionalFallthrough(attrs);\n    }\n  } catch (err) {\n    blockStack.length = 0;\n    handleError(err, instance, 1);\n    result = createVNode(Comment);\n  }\n  let root = result;\n  let setRoot = void 0;\n  if (!!(process.env.NODE_ENV !== \"production\") && result.patchFlag > 0 && result.patchFlag & 2048) {\n    [root, setRoot] = getChildRoot(result);\n  }\n  if (fallthroughAttrs && inheritAttrs !== false) {\n    const keys = Object.keys(fallthroughAttrs);\n    const { shapeFlag } = root;\n    if (keys.length) {\n      if (shapeFlag & (1 | 6)) {\n        if (propsOptions && keys.some(isModelListener)) {\n          fallthroughAttrs = filterModelListeners(\n            fallthroughAttrs,\n            propsOptions\n          );\n        }\n        root = cloneVNode(root, fallthroughAttrs, false, true);\n      } else if (!!(process.env.NODE_ENV !== \"production\") && !accessedAttrs && root.type !== Comment) {\n        const allAttrs = Object.keys(attrs);\n        const eventAttrs = [];\n        const extraAttrs = [];\n        for (let i = 0, l = allAttrs.length; i < l; i++) {\n          const key = allAttrs[i];\n          if (isOn(key)) {\n            if (!isModelListener(key)) {\n              eventAttrs.push(key[2].toLowerCase() + key.slice(3));\n            }\n          } else {\n            extraAttrs.push(key);\n          }\n        }\n        if (extraAttrs.length) {\n          warn$1(\n            `Extraneous non-props attributes (${extraAttrs.join(\", \")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`\n          );\n        }\n        if (eventAttrs.length) {\n          warn$1(\n            `Extraneous non-emits event listeners (${eventAttrs.join(\", \")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the \"emits\" option.`\n          );\n        }\n      }\n    }\n  }\n  if (vnode.dirs) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isElementRoot(root)) {\n      warn$1(\n        `Runtime directive used on component with non-element root node. The directives will not function as intended.`\n      );\n    }\n    root = cloneVNode(root, null, false, true);\n    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;\n  }\n  if (vnode.transition) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isElementRoot(root)) {\n      warn$1(\n        `Component inside <Transition> renders non-element root node that cannot be animated.`\n      );\n    }\n    setTransitionHooks(root, vnode.transition);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && setRoot) {\n    setRoot(root);\n  } else {\n    result = root;\n  }\n  setCurrentRenderingInstance(prev);\n  return result;\n}\nconst getChildRoot = (vnode) => {\n  const rawChildren = vnode.children;\n  const dynamicChildren = vnode.dynamicChildren;\n  const childRoot = filterSingleRoot(rawChildren, false);\n  if (!childRoot) {\n    return [vnode, void 0];\n  } else if (!!(process.env.NODE_ENV !== \"production\") && childRoot.patchFlag > 0 && childRoot.patchFlag & 2048) {\n    return getChildRoot(childRoot);\n  }\n  const index = rawChildren.indexOf(childRoot);\n  const dynamicIndex = dynamicChildren ? dynamicChildren.indexOf(childRoot) : -1;\n  const setRoot = (updatedRoot) => {\n    rawChildren[index] = updatedRoot;\n    if (dynamicChildren) {\n      if (dynamicIndex > -1) {\n        dynamicChildren[dynamicIndex] = updatedRoot;\n      } else if (updatedRoot.patchFlag > 0) {\n        vnode.dynamicChildren = [...dynamicChildren, updatedRoot];\n      }\n    }\n  };\n  return [normalizeVNode(childRoot), setRoot];\n};\nfunction filterSingleRoot(children, recurse = true) {\n  let singleRoot;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (isVNode(child)) {\n      if (child.type !== Comment || child.children === \"v-if\") {\n        if (singleRoot) {\n          return;\n        } else {\n          singleRoot = child;\n          if (!!(process.env.NODE_ENV !== \"production\") && recurse && singleRoot.patchFlag > 0 && singleRoot.patchFlag & 2048) {\n            return filterSingleRoot(singleRoot.children);\n          }\n        }\n      }\n    } else {\n      return;\n    }\n  }\n  return singleRoot;\n}\nconst getFunctionalFallthrough = (attrs) => {\n  let res;\n  for (const key in attrs) {\n    if (key === \"class\" || key === \"style\" || isOn(key)) {\n      (res || (res = {}))[key] = attrs[key];\n    }\n  }\n  return res;\n};\nconst filterModelListeners = (attrs, props) => {\n  const res = {};\n  for (const key in attrs) {\n    if (!isModelListener(key) || !(key.slice(9) in props)) {\n      res[key] = attrs[key];\n    }\n  }\n  return res;\n};\nconst isElementRoot = (vnode) => {\n  return vnode.shapeFlag & (6 | 1) || vnode.type === Comment;\n};\nfunction shouldUpdateComponent(prevVNode, nextVNode, optimized) {\n  const { props: prevProps, children: prevChildren, component } = prevVNode;\n  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;\n  const emits = component.emitsOptions;\n  if (!!(process.env.NODE_ENV !== \"production\") && (prevChildren || nextChildren) && isHmrUpdating) {\n    return true;\n  }\n  if (nextVNode.dirs || nextVNode.transition) {\n    return true;\n  }\n  if (optimized && patchFlag >= 0) {\n    if (patchFlag & 1024) {\n      return true;\n    }\n    if (patchFlag & 16) {\n      if (!prevProps) {\n        return !!nextProps;\n      }\n      return hasPropsChanged(prevProps, nextProps, emits);\n    } else if (patchFlag & 8) {\n      const dynamicProps = nextVNode.dynamicProps;\n      for (let i = 0; i < dynamicProps.length; i++) {\n        const key = dynamicProps[i];\n        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {\n          return true;\n        }\n      }\n    }\n  } else {\n    if (prevChildren || nextChildren) {\n      if (!nextChildren || !nextChildren.$stable) {\n        return true;\n      }\n    }\n    if (prevProps === nextProps) {\n      return false;\n    }\n    if (!prevProps) {\n      return !!nextProps;\n    }\n    if (!nextProps) {\n      return true;\n    }\n    return hasPropsChanged(prevProps, nextProps, emits);\n  }\n  return false;\n}\nfunction hasPropsChanged(prevProps, nextProps, emitsOptions) {\n  const nextKeys = Object.keys(nextProps);\n  if (nextKeys.length !== Object.keys(prevProps).length) {\n    return true;\n  }\n  for (let i = 0; i < nextKeys.length; i++) {\n    const key = nextKeys[i];\n    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction updateHOCHostEl({ vnode, parent }, el) {\n  while (parent) {\n    const root = parent.subTree;\n    if (root.suspense && root.suspense.activeBranch === vnode) {\n      root.el = vnode.el;\n    }\n    if (root === vnode) {\n      (vnode = parent.vnode).el = el;\n      parent = parent.parent;\n    } else {\n      break;\n    }\n  }\n}\n\nconst isSuspense = (type) => type.__isSuspense;\nlet suspenseId = 0;\nconst SuspenseImpl = {\n  name: \"Suspense\",\n  // In order to make Suspense tree-shakable, we need to avoid importing it\n  // directly in the renderer. The renderer checks for the __isSuspense flag\n  // on a vnode's type and calls the `process` method, passing in renderer\n  // internals.\n  __isSuspense: true,\n  process(n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals) {\n    if (n1 == null) {\n      mountSuspense(\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized,\n        rendererInternals\n      );\n    } else {\n      if (parentSuspense && parentSuspense.deps > 0 && !n1.suspense.isInFallback) {\n        n2.suspense = n1.suspense;\n        n2.suspense.vnode = n2;\n        n2.el = n1.el;\n        return;\n      }\n      patchSuspense(\n        n1,\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        namespace,\n        slotScopeIds,\n        optimized,\n        rendererInternals\n      );\n    }\n  },\n  hydrate: hydrateSuspense,\n  normalize: normalizeSuspenseChildren\n};\nconst Suspense = SuspenseImpl ;\nfunction triggerEvent(vnode, name) {\n  const eventListener = vnode.props && vnode.props[name];\n  if (isFunction(eventListener)) {\n    eventListener();\n  }\n}\nfunction mountSuspense(vnode, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals) {\n  const {\n    p: patch,\n    o: { createElement }\n  } = rendererInternals;\n  const hiddenContainer = createElement(\"div\");\n  const suspense = vnode.suspense = createSuspenseBoundary(\n    vnode,\n    parentSuspense,\n    parentComponent,\n    container,\n    hiddenContainer,\n    anchor,\n    namespace,\n    slotScopeIds,\n    optimized,\n    rendererInternals\n  );\n  patch(\n    null,\n    suspense.pendingBranch = vnode.ssContent,\n    hiddenContainer,\n    null,\n    parentComponent,\n    suspense,\n    namespace,\n    slotScopeIds\n  );\n  if (suspense.deps > 0) {\n    triggerEvent(vnode, \"onPending\");\n    triggerEvent(vnode, \"onFallback\");\n    patch(\n      null,\n      vnode.ssFallback,\n      container,\n      anchor,\n      parentComponent,\n      null,\n      // fallback tree will not have suspense context\n      namespace,\n      slotScopeIds\n    );\n    setActiveBranch(suspense, vnode.ssFallback);\n  } else {\n    suspense.resolve(false, true);\n  }\n}\nfunction patchSuspense(n1, n2, container, anchor, parentComponent, namespace, slotScopeIds, optimized, { p: patch, um: unmount, o: { createElement } }) {\n  const suspense = n2.suspense = n1.suspense;\n  suspense.vnode = n2;\n  n2.el = n1.el;\n  const newBranch = n2.ssContent;\n  const newFallback = n2.ssFallback;\n  const { activeBranch, pendingBranch, isInFallback, isHydrating } = suspense;\n  if (pendingBranch) {\n    suspense.pendingBranch = newBranch;\n    if (isSameVNodeType(newBranch, pendingBranch)) {\n      patch(\n        pendingBranch,\n        newBranch,\n        suspense.hiddenContainer,\n        null,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      if (suspense.deps <= 0) {\n        suspense.resolve();\n      } else if (isInFallback) {\n        if (!isHydrating) {\n          patch(\n            activeBranch,\n            newFallback,\n            container,\n            anchor,\n            parentComponent,\n            null,\n            // fallback tree will not have suspense context\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          setActiveBranch(suspense, newFallback);\n        }\n      }\n    } else {\n      suspense.pendingId = suspenseId++;\n      if (isHydrating) {\n        suspense.isHydrating = false;\n        suspense.activeBranch = pendingBranch;\n      } else {\n        unmount(pendingBranch, parentComponent, suspense);\n      }\n      suspense.deps = 0;\n      suspense.effects.length = 0;\n      suspense.hiddenContainer = createElement(\"div\");\n      if (isInFallback) {\n        patch(\n          null,\n          newBranch,\n          suspense.hiddenContainer,\n          null,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        if (suspense.deps <= 0) {\n          suspense.resolve();\n        } else {\n          patch(\n            activeBranch,\n            newFallback,\n            container,\n            anchor,\n            parentComponent,\n            null,\n            // fallback tree will not have suspense context\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          setActiveBranch(suspense, newFallback);\n        }\n      } else if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n        patch(\n          activeBranch,\n          newBranch,\n          container,\n          anchor,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        suspense.resolve(true);\n      } else {\n        patch(\n          null,\n          newBranch,\n          suspense.hiddenContainer,\n          null,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        if (suspense.deps <= 0) {\n          suspense.resolve();\n        }\n      }\n    }\n  } else {\n    if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n      patch(\n        activeBranch,\n        newBranch,\n        container,\n        anchor,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      setActiveBranch(suspense, newBranch);\n    } else {\n      triggerEvent(n2, \"onPending\");\n      suspense.pendingBranch = newBranch;\n      if (newBranch.shapeFlag & 512) {\n        suspense.pendingId = newBranch.component.suspenseId;\n      } else {\n        suspense.pendingId = suspenseId++;\n      }\n      patch(\n        null,\n        newBranch,\n        suspense.hiddenContainer,\n        null,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      if (suspense.deps <= 0) {\n        suspense.resolve();\n      } else {\n        const { timeout, pendingId } = suspense;\n        if (timeout > 0) {\n          setTimeout(() => {\n            if (suspense.pendingId === pendingId) {\n              suspense.fallback(newFallback);\n            }\n          }, timeout);\n        } else if (timeout === 0) {\n          suspense.fallback(newFallback);\n        }\n      }\n    }\n  }\n}\nlet hasWarned = false;\nfunction createSuspenseBoundary(vnode, parentSuspense, parentComponent, container, hiddenContainer, anchor, namespace, slotScopeIds, optimized, rendererInternals, isHydrating = false) {\n  if (!!(process.env.NODE_ENV !== \"production\") && true && !hasWarned) {\n    hasWarned = true;\n    console[console.info ? \"info\" : \"log\"](\n      `<Suspense> is an experimental feature and its API will likely change.`\n    );\n  }\n  const {\n    p: patch,\n    m: move,\n    um: unmount,\n    n: next,\n    o: { parentNode, remove }\n  } = rendererInternals;\n  let parentSuspenseId;\n  const isSuspensible = isVNodeSuspensible(vnode);\n  if (isSuspensible) {\n    if (parentSuspense && parentSuspense.pendingBranch) {\n      parentSuspenseId = parentSuspense.pendingId;\n      parentSuspense.deps++;\n    }\n  }\n  const timeout = vnode.props ? toNumber(vnode.props.timeout) : void 0;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    assertNumber(timeout, `Suspense timeout`);\n  }\n  const initialAnchor = anchor;\n  const suspense = {\n    vnode,\n    parent: parentSuspense,\n    parentComponent,\n    namespace,\n    container,\n    hiddenContainer,\n    deps: 0,\n    pendingId: suspenseId++,\n    timeout: typeof timeout === \"number\" ? timeout : -1,\n    activeBranch: null,\n    pendingBranch: null,\n    isInFallback: !isHydrating,\n    isHydrating,\n    isUnmounted: false,\n    effects: [],\n    resolve(resume = false, sync = false) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        if (!resume && !suspense.pendingBranch) {\n          throw new Error(\n            `suspense.resolve() is called without a pending branch.`\n          );\n        }\n        if (suspense.isUnmounted) {\n          throw new Error(\n            `suspense.resolve() is called on an already unmounted suspense boundary.`\n          );\n        }\n      }\n      const {\n        vnode: vnode2,\n        activeBranch,\n        pendingBranch,\n        pendingId,\n        effects,\n        parentComponent: parentComponent2,\n        container: container2\n      } = suspense;\n      let delayEnter = false;\n      if (suspense.isHydrating) {\n        suspense.isHydrating = false;\n      } else if (!resume) {\n        delayEnter = activeBranch && pendingBranch.transition && pendingBranch.transition.mode === \"out-in\";\n        if (delayEnter) {\n          activeBranch.transition.afterLeave = () => {\n            if (pendingId === suspense.pendingId) {\n              move(\n                pendingBranch,\n                container2,\n                anchor === initialAnchor ? next(activeBranch) : anchor,\n                0\n              );\n              queuePostFlushCb(effects);\n            }\n          };\n        }\n        if (activeBranch) {\n          if (parentNode(activeBranch.el) === container2) {\n            anchor = next(activeBranch);\n          }\n          unmount(activeBranch, parentComponent2, suspense, true);\n        }\n        if (!delayEnter) {\n          move(pendingBranch, container2, anchor, 0);\n        }\n      }\n      setActiveBranch(suspense, pendingBranch);\n      suspense.pendingBranch = null;\n      suspense.isInFallback = false;\n      let parent = suspense.parent;\n      let hasUnresolvedAncestor = false;\n      while (parent) {\n        if (parent.pendingBranch) {\n          parent.effects.push(...effects);\n          hasUnresolvedAncestor = true;\n          break;\n        }\n        parent = parent.parent;\n      }\n      if (!hasUnresolvedAncestor && !delayEnter) {\n        queuePostFlushCb(effects);\n      }\n      suspense.effects = [];\n      if (isSuspensible) {\n        if (parentSuspense && parentSuspense.pendingBranch && parentSuspenseId === parentSuspense.pendingId) {\n          parentSuspense.deps--;\n          if (parentSuspense.deps === 0 && !sync) {\n            parentSuspense.resolve();\n          }\n        }\n      }\n      triggerEvent(vnode2, \"onResolve\");\n    },\n    fallback(fallbackVNode) {\n      if (!suspense.pendingBranch) {\n        return;\n      }\n      const { vnode: vnode2, activeBranch, parentComponent: parentComponent2, container: container2, namespace: namespace2 } = suspense;\n      triggerEvent(vnode2, \"onFallback\");\n      const anchor2 = next(activeBranch);\n      const mountFallback = () => {\n        if (!suspense.isInFallback) {\n          return;\n        }\n        patch(\n          null,\n          fallbackVNode,\n          container2,\n          anchor2,\n          parentComponent2,\n          null,\n          // fallback tree will not have suspense context\n          namespace2,\n          slotScopeIds,\n          optimized\n        );\n        setActiveBranch(suspense, fallbackVNode);\n      };\n      const delayEnter = fallbackVNode.transition && fallbackVNode.transition.mode === \"out-in\";\n      if (delayEnter) {\n        activeBranch.transition.afterLeave = mountFallback;\n      }\n      suspense.isInFallback = true;\n      unmount(\n        activeBranch,\n        parentComponent2,\n        null,\n        // no suspense so unmount hooks fire now\n        true\n        // shouldRemove\n      );\n      if (!delayEnter) {\n        mountFallback();\n      }\n    },\n    move(container2, anchor2, type) {\n      suspense.activeBranch && move(suspense.activeBranch, container2, anchor2, type);\n      suspense.container = container2;\n    },\n    next() {\n      return suspense.activeBranch && next(suspense.activeBranch);\n    },\n    registerDep(instance, setupRenderEffect, optimized2) {\n      const isInPendingSuspense = !!suspense.pendingBranch;\n      if (isInPendingSuspense) {\n        suspense.deps++;\n      }\n      const hydratedEl = instance.vnode.el;\n      instance.asyncDep.catch((err) => {\n        handleError(err, instance, 0);\n      }).then((asyncSetupResult) => {\n        if (instance.isUnmounted || suspense.isUnmounted || suspense.pendingId !== instance.suspenseId) {\n          return;\n        }\n        instance.asyncResolved = true;\n        const { vnode: vnode2 } = instance;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(vnode2);\n        }\n        handleSetupResult(instance, asyncSetupResult, false);\n        if (hydratedEl) {\n          vnode2.el = hydratedEl;\n        }\n        const placeholder = !hydratedEl && instance.subTree.el;\n        setupRenderEffect(\n          instance,\n          vnode2,\n          // component may have been moved before resolve.\n          // if this is not a hydration, instance.subTree will be the comment\n          // placeholder.\n          parentNode(hydratedEl || instance.subTree.el),\n          // anchor will not be used if this is hydration, so only need to\n          // consider the comment placeholder case.\n          hydratedEl ? null : next(instance.subTree),\n          suspense,\n          namespace,\n          optimized2\n        );\n        if (placeholder) {\n          remove(placeholder);\n        }\n        updateHOCHostEl(instance, vnode2.el);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n        if (isInPendingSuspense && --suspense.deps === 0) {\n          suspense.resolve();\n        }\n      });\n    },\n    unmount(parentSuspense2, doRemove) {\n      suspense.isUnmounted = true;\n      if (suspense.activeBranch) {\n        unmount(\n          suspense.activeBranch,\n          parentComponent,\n          parentSuspense2,\n          doRemove\n        );\n      }\n      if (suspense.pendingBranch) {\n        unmount(\n          suspense.pendingBranch,\n          parentComponent,\n          parentSuspense2,\n          doRemove\n        );\n      }\n    }\n  };\n  return suspense;\n}\nfunction hydrateSuspense(node, vnode, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals, hydrateNode) {\n  const suspense = vnode.suspense = createSuspenseBoundary(\n    vnode,\n    parentSuspense,\n    parentComponent,\n    node.parentNode,\n    // eslint-disable-next-line no-restricted-globals\n    document.createElement(\"div\"),\n    null,\n    namespace,\n    slotScopeIds,\n    optimized,\n    rendererInternals,\n    true\n  );\n  const result = hydrateNode(\n    node,\n    suspense.pendingBranch = vnode.ssContent,\n    parentComponent,\n    suspense,\n    slotScopeIds,\n    optimized\n  );\n  if (suspense.deps === 0) {\n    suspense.resolve(false, true);\n  }\n  return result;\n}\nfunction normalizeSuspenseChildren(vnode) {\n  const { shapeFlag, children } = vnode;\n  const isSlotChildren = shapeFlag & 32;\n  vnode.ssContent = normalizeSuspenseSlot(\n    isSlotChildren ? children.default : children\n  );\n  vnode.ssFallback = isSlotChildren ? normalizeSuspenseSlot(children.fallback) : createVNode(Comment);\n}\nfunction normalizeSuspenseSlot(s) {\n  let block;\n  if (isFunction(s)) {\n    const trackBlock = isBlockTreeEnabled && s._c;\n    if (trackBlock) {\n      s._d = false;\n      openBlock();\n    }\n    s = s();\n    if (trackBlock) {\n      s._d = true;\n      block = currentBlock;\n      closeBlock();\n    }\n  }\n  if (isArray(s)) {\n    const singleChild = filterSingleRoot(s);\n    if (!!(process.env.NODE_ENV !== \"production\") && !singleChild && s.filter((child) => child !== NULL_DYNAMIC_COMPONENT).length > 0) {\n      warn$1(`<Suspense> slots expect a single root node.`);\n    }\n    s = singleChild;\n  }\n  s = normalizeVNode(s);\n  if (block && !s.dynamicChildren) {\n    s.dynamicChildren = block.filter((c) => c !== s);\n  }\n  return s;\n}\nfunction queueEffectWithSuspense(fn, suspense) {\n  if (suspense && suspense.pendingBranch) {\n    if (isArray(fn)) {\n      suspense.effects.push(...fn);\n    } else {\n      suspense.effects.push(fn);\n    }\n  } else {\n    queuePostFlushCb(fn);\n  }\n}\nfunction setActiveBranch(suspense, branch) {\n  suspense.activeBranch = branch;\n  const { vnode, parentComponent } = suspense;\n  let el = branch.el;\n  while (!el && branch.component) {\n    branch = branch.component.subTree;\n    el = branch.el;\n  }\n  vnode.el = el;\n  if (parentComponent && parentComponent.subTree === vnode) {\n    parentComponent.vnode.el = el;\n    updateHOCHostEl(parentComponent, el);\n  }\n}\nfunction isVNodeSuspensible(vnode) {\n  const suspensible = vnode.props && vnode.props.suspensible;\n  return suspensible != null && suspensible !== false;\n}\n\nconst Fragment = Symbol.for(\"v-fgt\");\nconst Text = Symbol.for(\"v-txt\");\nconst Comment = Symbol.for(\"v-cmt\");\nconst Static = Symbol.for(\"v-stc\");\nconst blockStack = [];\nlet currentBlock = null;\nfunction openBlock(disableTracking = false) {\n  blockStack.push(currentBlock = disableTracking ? null : []);\n}\nfunction closeBlock() {\n  blockStack.pop();\n  currentBlock = blockStack[blockStack.length - 1] || null;\n}\nlet isBlockTreeEnabled = 1;\nfunction setBlockTracking(value, inVOnce = false) {\n  isBlockTreeEnabled += value;\n  if (value < 0 && currentBlock && inVOnce) {\n    currentBlock.hasOnce = true;\n  }\n}\nfunction setupBlock(vnode) {\n  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;\n  closeBlock();\n  if (isBlockTreeEnabled > 0 && currentBlock) {\n    currentBlock.push(vnode);\n  }\n  return vnode;\n}\nfunction createElementBlock(type, props, children, patchFlag, dynamicProps, shapeFlag) {\n  return setupBlock(\n    createBaseVNode(\n      type,\n      props,\n      children,\n      patchFlag,\n      dynamicProps,\n      shapeFlag,\n      true\n    )\n  );\n}\nfunction createBlock(type, props, children, patchFlag, dynamicProps) {\n  return setupBlock(\n    createVNode(\n      type,\n      props,\n      children,\n      patchFlag,\n      dynamicProps,\n      true\n    )\n  );\n}\nfunction isVNode(value) {\n  return value ? value.__v_isVNode === true : false;\n}\nfunction isSameVNodeType(n1, n2) {\n  if (!!(process.env.NODE_ENV !== \"production\") && n2.shapeFlag & 6 && n1.component) {\n    const dirtyInstances = hmrDirtyComponents.get(n2.type);\n    if (dirtyInstances && dirtyInstances.has(n1.component)) {\n      n1.shapeFlag &= -257;\n      n2.shapeFlag &= -513;\n      return false;\n    }\n  }\n  return n1.type === n2.type && n1.key === n2.key;\n}\nlet vnodeArgsTransformer;\nfunction transformVNodeArgs(transformer) {\n  vnodeArgsTransformer = transformer;\n}\nconst createVNodeWithArgsTransform = (...args) => {\n  return _createVNode(\n    ...vnodeArgsTransformer ? vnodeArgsTransformer(args, currentRenderingInstance) : args\n  );\n};\nconst normalizeKey = ({ key }) => key != null ? key : null;\nconst normalizeRef = ({\n  ref,\n  ref_key,\n  ref_for\n}) => {\n  if (typeof ref === \"number\") {\n    ref = \"\" + ref;\n  }\n  return ref != null ? isString(ref) || isRef(ref) || isFunction(ref) ? { i: currentRenderingInstance, r: ref, k: ref_key, f: !!ref_for } : ref : null;\n};\nfunction createBaseVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {\n  const vnode = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type,\n    props,\n    key: props && normalizeKey(props),\n    ref: props && normalizeRef(props),\n    scopeId: currentScopeId,\n    slotScopeIds: null,\n    children,\n    component: null,\n    suspense: null,\n    ssContent: null,\n    ssFallback: null,\n    dirs: null,\n    transition: null,\n    el: null,\n    anchor: null,\n    target: null,\n    targetStart: null,\n    targetAnchor: null,\n    staticCount: 0,\n    shapeFlag,\n    patchFlag,\n    dynamicProps,\n    dynamicChildren: null,\n    appContext: null,\n    ctx: currentRenderingInstance\n  };\n  if (needFullChildrenNormalization) {\n    normalizeChildren(vnode, children);\n    if (shapeFlag & 128) {\n      type.normalize(vnode);\n    }\n  } else if (children) {\n    vnode.shapeFlag |= isString(children) ? 8 : 16;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && vnode.key !== vnode.key) {\n    warn$1(`VNode created with invalid key (NaN). VNode type:`, vnode.type);\n  }\n  if (isBlockTreeEnabled > 0 && // avoid a block node from tracking itself\n  !isBlockNode && // has current parent block\n  currentBlock && // presence of a patch flag indicates this node needs patching on updates.\n  // component nodes also should always be patched, because even if the\n  // component doesn't need to update, it needs to persist the instance on to\n  // the next vnode so that it can be properly unmounted later.\n  (vnode.patchFlag > 0 || shapeFlag & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the\n  // vnode should not be considered dynamic due to handler caching.\n  vnode.patchFlag !== 32) {\n    currentBlock.push(vnode);\n  }\n  return vnode;\n}\nconst createVNode = !!(process.env.NODE_ENV !== \"production\") ? createVNodeWithArgsTransform : _createVNode;\nfunction _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {\n  if (!type || type === NULL_DYNAMIC_COMPONENT) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !type) {\n      warn$1(`Invalid vnode type when creating vnode: ${type}.`);\n    }\n    type = Comment;\n  }\n  if (isVNode(type)) {\n    const cloned = cloneVNode(\n      type,\n      props,\n      true\n      /* mergeRef: true */\n    );\n    if (children) {\n      normalizeChildren(cloned, children);\n    }\n    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {\n      if (cloned.shapeFlag & 6) {\n        currentBlock[currentBlock.indexOf(type)] = cloned;\n      } else {\n        currentBlock.push(cloned);\n      }\n    }\n    cloned.patchFlag = -2;\n    return cloned;\n  }\n  if (isClassComponent(type)) {\n    type = type.__vccOpts;\n  }\n  if (props) {\n    props = guardReactiveProps(props);\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n      props.class = normalizeClass(klass);\n    }\n    if (isObject(style)) {\n      if (isProxy(style) && !isArray(style)) {\n        style = extend({}, style);\n      }\n      props.style = normalizeStyle(style);\n    }\n  }\n  const shapeFlag = isString(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : isObject(type) ? 4 : isFunction(type) ? 2 : 0;\n  if (!!(process.env.NODE_ENV !== \"production\") && shapeFlag & 4 && isProxy(type)) {\n    type = toRaw(type);\n    warn$1(\n      `Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with \\`markRaw\\` or using \\`shallowRef\\` instead of \\`ref\\`.`,\n      `\nComponent that was made reactive: `,\n      type\n    );\n  }\n  return createBaseVNode(\n    type,\n    props,\n    children,\n    patchFlag,\n    dynamicProps,\n    shapeFlag,\n    isBlockNode,\n    true\n  );\n}\nfunction guardReactiveProps(props) {\n  if (!props) return null;\n  return isProxy(props) || isInternalObject(props) ? extend({}, props) : props;\n}\nfunction cloneVNode(vnode, extraProps, mergeRef = false, cloneTransition = false) {\n  const { props, ref, patchFlag, children, transition } = vnode;\n  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;\n  const cloned = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type: vnode.type,\n    props: mergedProps,\n    key: mergedProps && normalizeKey(mergedProps),\n    ref: extraProps && extraProps.ref ? (\n      // #2078 in the case of <component :is=\"vnode\" ref=\"extra\"/>\n      // if the vnode itself already has a ref, cloneVNode will need to merge\n      // the refs so the single vnode can be set on multiple refs\n      mergeRef && ref ? isArray(ref) ? ref.concat(normalizeRef(extraProps)) : [ref, normalizeRef(extraProps)] : normalizeRef(extraProps)\n    ) : ref,\n    scopeId: vnode.scopeId,\n    slotScopeIds: vnode.slotScopeIds,\n    children: !!(process.env.NODE_ENV !== \"production\") && patchFlag === -1 && isArray(children) ? children.map(deepCloneVNode) : children,\n    target: vnode.target,\n    targetStart: vnode.targetStart,\n    targetAnchor: vnode.targetAnchor,\n    staticCount: vnode.staticCount,\n    shapeFlag: vnode.shapeFlag,\n    // if the vnode is cloned with extra props, we can no longer assume its\n    // existing patch flag to be reliable and need to add the FULL_PROPS flag.\n    // note: preserve flag for fragments since they use the flag for children\n    // fast paths only.\n    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,\n    dynamicProps: vnode.dynamicProps,\n    dynamicChildren: vnode.dynamicChildren,\n    appContext: vnode.appContext,\n    dirs: vnode.dirs,\n    transition,\n    // These should technically only be non-null on mounted VNodes. However,\n    // they *should* be copied for kept-alive vnodes. So we just always copy\n    // them since them being non-null during a mount doesn't affect the logic as\n    // they will simply be overwritten.\n    component: vnode.component,\n    suspense: vnode.suspense,\n    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),\n    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),\n    el: vnode.el,\n    anchor: vnode.anchor,\n    ctx: vnode.ctx,\n    ce: vnode.ce\n  };\n  if (transition && cloneTransition) {\n    setTransitionHooks(\n      cloned,\n      transition.clone(cloned)\n    );\n  }\n  return cloned;\n}\nfunction deepCloneVNode(vnode) {\n  const cloned = cloneVNode(vnode);\n  if (isArray(vnode.children)) {\n    cloned.children = vnode.children.map(deepCloneVNode);\n  }\n  return cloned;\n}\nfunction createTextVNode(text = \" \", flag = 0) {\n  return createVNode(Text, null, text, flag);\n}\nfunction createStaticVNode(content, numberOfNodes) {\n  const vnode = createVNode(Static, null, content);\n  vnode.staticCount = numberOfNodes;\n  return vnode;\n}\nfunction createCommentVNode(text = \"\", asBlock = false) {\n  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);\n}\nfunction normalizeVNode(child) {\n  if (child == null || typeof child === \"boolean\") {\n    return createVNode(Comment);\n  } else if (isArray(child)) {\n    return createVNode(\n      Fragment,\n      null,\n      // #3666, avoid reference pollution when reusing vnode\n      child.slice()\n    );\n  } else if (isVNode(child)) {\n    return cloneIfMounted(child);\n  } else {\n    return createVNode(Text, null, String(child));\n  }\n}\nfunction cloneIfMounted(child) {\n  return child.el === null && child.patchFlag !== -1 || child.memo ? child : cloneVNode(child);\n}\nfunction normalizeChildren(vnode, children) {\n  let type = 0;\n  const { shapeFlag } = vnode;\n  if (children == null) {\n    children = null;\n  } else if (isArray(children)) {\n    type = 16;\n  } else if (typeof children === \"object\") {\n    if (shapeFlag & (1 | 64)) {\n      const slot = children.default;\n      if (slot) {\n        slot._c && (slot._d = false);\n        normalizeChildren(vnode, slot());\n        slot._c && (slot._d = true);\n      }\n      return;\n    } else {\n      type = 32;\n      const slotFlag = children._;\n      if (!slotFlag && !isInternalObject(children)) {\n        children._ctx = currentRenderingInstance;\n      } else if (slotFlag === 3 && currentRenderingInstance) {\n        if (currentRenderingInstance.slots._ === 1) {\n          children._ = 1;\n        } else {\n          children._ = 2;\n          vnode.patchFlag |= 1024;\n        }\n      }\n    }\n  } else if (isFunction(children)) {\n    children = { default: children, _ctx: currentRenderingInstance };\n    type = 32;\n  } else {\n    children = String(children);\n    if (shapeFlag & 64) {\n      type = 16;\n      children = [createTextVNode(children)];\n    } else {\n      type = 8;\n    }\n  }\n  vnode.children = children;\n  vnode.shapeFlag |= type;\n}\nfunction mergeProps(...args) {\n  const ret = {};\n  for (let i = 0; i < args.length; i++) {\n    const toMerge = args[i];\n    for (const key in toMerge) {\n      if (key === \"class\") {\n        if (ret.class !== toMerge.class) {\n          ret.class = normalizeClass([ret.class, toMerge.class]);\n        }\n      } else if (key === \"style\") {\n        ret.style = normalizeStyle([ret.style, toMerge.style]);\n      } else if (isOn(key)) {\n        const existing = ret[key];\n        const incoming = toMerge[key];\n        if (incoming && existing !== incoming && !(isArray(existing) && existing.includes(incoming))) {\n          ret[key] = existing ? [].concat(existing, incoming) : incoming;\n        }\n      } else if (key !== \"\") {\n        ret[key] = toMerge[key];\n      }\n    }\n  }\n  return ret;\n}\nfunction invokeVNodeHook(hook, instance, vnode, prevVNode = null) {\n  callWithAsyncErrorHandling(hook, instance, 7, [\n    vnode,\n    prevVNode\n  ]);\n}\n\nconst emptyAppContext = createAppContext();\nlet uid = 0;\nfunction createComponentInstance(vnode, parent, suspense) {\n  const type = vnode.type;\n  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;\n  const instance = {\n    uid: uid++,\n    vnode,\n    type,\n    parent,\n    appContext,\n    root: null,\n    // to be immediately set\n    next: null,\n    subTree: null,\n    // will be set synchronously right after creation\n    effect: null,\n    update: null,\n    // will be set synchronously right after creation\n    job: null,\n    scope: new EffectScope(\n      true\n      /* detached */\n    ),\n    render: null,\n    proxy: null,\n    exposed: null,\n    exposeProxy: null,\n    withProxy: null,\n    provides: parent ? parent.provides : Object.create(appContext.provides),\n    ids: parent ? parent.ids : [\"\", 0, 0],\n    accessCache: null,\n    renderCache: [],\n    // local resolved assets\n    components: null,\n    directives: null,\n    // resolved props and emits options\n    propsOptions: normalizePropsOptions(type, appContext),\n    emitsOptions: normalizeEmitsOptions(type, appContext),\n    // emit\n    emit: null,\n    // to be set immediately\n    emitted: null,\n    // props default value\n    propsDefaults: EMPTY_OBJ,\n    // inheritAttrs\n    inheritAttrs: type.inheritAttrs,\n    // state\n    ctx: EMPTY_OBJ,\n    data: EMPTY_OBJ,\n    props: EMPTY_OBJ,\n    attrs: EMPTY_OBJ,\n    slots: EMPTY_OBJ,\n    refs: EMPTY_OBJ,\n    setupState: EMPTY_OBJ,\n    setupContext: null,\n    // suspense related\n    suspense,\n    suspenseId: suspense ? suspense.pendingId : 0,\n    asyncDep: null,\n    asyncResolved: false,\n    // lifecycle hooks\n    // not using enums here because it results in computed properties\n    isMounted: false,\n    isUnmounted: false,\n    isDeactivated: false,\n    bc: null,\n    c: null,\n    bm: null,\n    m: null,\n    bu: null,\n    u: null,\n    um: null,\n    bum: null,\n    da: null,\n    a: null,\n    rtg: null,\n    rtc: null,\n    ec: null,\n    sp: null\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    instance.ctx = createDevRenderContext(instance);\n  } else {\n    instance.ctx = { _: instance };\n  }\n  instance.root = parent ? parent.root : instance;\n  instance.emit = emit.bind(null, instance);\n  if (vnode.ce) {\n    vnode.ce(instance);\n  }\n  return instance;\n}\nlet currentInstance = null;\nconst getCurrentInstance = () => currentInstance || currentRenderingInstance;\nlet internalSetCurrentInstance;\nlet setInSSRSetupState;\n{\n  const g = getGlobalThis();\n  const registerGlobalSetter = (key, setter) => {\n    let setters;\n    if (!(setters = g[key])) setters = g[key] = [];\n    setters.push(setter);\n    return (v) => {\n      if (setters.length > 1) setters.forEach((set) => set(v));\n      else setters[0](v);\n    };\n  };\n  internalSetCurrentInstance = registerGlobalSetter(\n    `__VUE_INSTANCE_SETTERS__`,\n    (v) => currentInstance = v\n  );\n  setInSSRSetupState = registerGlobalSetter(\n    `__VUE_SSR_SETTERS__`,\n    (v) => isInSSRComponentSetup = v\n  );\n}\nconst setCurrentInstance = (instance) => {\n  const prev = currentInstance;\n  internalSetCurrentInstance(instance);\n  instance.scope.on();\n  return () => {\n    instance.scope.off();\n    internalSetCurrentInstance(prev);\n  };\n};\nconst unsetCurrentInstance = () => {\n  currentInstance && currentInstance.scope.off();\n  internalSetCurrentInstance(null);\n};\nconst isBuiltInTag = /* @__PURE__ */ makeMap(\"slot,component\");\nfunction validateComponentName(name, { isNativeTag }) {\n  if (isBuiltInTag(name) || isNativeTag(name)) {\n    warn$1(\n      \"Do not use built-in or reserved HTML elements as component id: \" + name\n    );\n  }\n}\nfunction isStatefulComponent(instance) {\n  return instance.vnode.shapeFlag & 4;\n}\nlet isInSSRComponentSetup = false;\nfunction setupComponent(instance, isSSR = false, optimized = false) {\n  isSSR && setInSSRSetupState(isSSR);\n  const { props, children } = instance.vnode;\n  const isStateful = isStatefulComponent(instance);\n  initProps(instance, props, isStateful, isSSR);\n  initSlots(instance, children, optimized || isSSR);\n  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;\n  isSSR && setInSSRSetupState(false);\n  return setupResult;\n}\nfunction setupStatefulComponent(instance, isSSR) {\n  var _a;\n  const Component = instance.type;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    if (Component.name) {\n      validateComponentName(Component.name, instance.appContext.config);\n    }\n    if (Component.components) {\n      const names = Object.keys(Component.components);\n      for (let i = 0; i < names.length; i++) {\n        validateComponentName(names[i], instance.appContext.config);\n      }\n    }\n    if (Component.directives) {\n      const names = Object.keys(Component.directives);\n      for (let i = 0; i < names.length; i++) {\n        validateDirectiveName(names[i]);\n      }\n    }\n    if (Component.compilerOptions && isRuntimeOnly()) {\n      warn$1(\n        `\"compilerOptions\" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.`\n      );\n    }\n  }\n  instance.accessCache = /* @__PURE__ */ Object.create(null);\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    exposePropsOnRenderContext(instance);\n  }\n  const { setup } = Component;\n  if (setup) {\n    pauseTracking();\n    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;\n    const reset = setCurrentInstance(instance);\n    const setupResult = callWithErrorHandling(\n      setup,\n      instance,\n      0,\n      [\n        !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(instance.props) : instance.props,\n        setupContext\n      ]\n    );\n    const isAsyncSetup = isPromise(setupResult);\n    resetTracking();\n    reset();\n    if ((isAsyncSetup || instance.sp) && !isAsyncWrapper(instance)) {\n      markAsyncBoundary(instance);\n    }\n    if (isAsyncSetup) {\n      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);\n      if (isSSR) {\n        return setupResult.then((resolvedResult) => {\n          handleSetupResult(instance, resolvedResult, isSSR);\n        }).catch((e) => {\n          handleError(e, instance, 0);\n        });\n      } else {\n        instance.asyncDep = setupResult;\n        if (!!(process.env.NODE_ENV !== \"production\") && !instance.suspense) {\n          const name = (_a = Component.name) != null ? _a : \"Anonymous\";\n          warn$1(\n            `Component <${name}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`\n          );\n        }\n      }\n    } else {\n      handleSetupResult(instance, setupResult, isSSR);\n    }\n  } else {\n    finishComponentSetup(instance, isSSR);\n  }\n}\nfunction handleSetupResult(instance, setupResult, isSSR) {\n  if (isFunction(setupResult)) {\n    if (instance.type.__ssrInlineRender) {\n      instance.ssrRender = setupResult;\n    } else {\n      instance.render = setupResult;\n    }\n  } else if (isObject(setupResult)) {\n    if (!!(process.env.NODE_ENV !== \"production\") && isVNode(setupResult)) {\n      warn$1(\n        `setup() should not return VNodes directly - return a render function instead.`\n      );\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      instance.devtoolsRawSetupState = setupResult;\n    }\n    instance.setupState = proxyRefs(setupResult);\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      exposeSetupStateOnRenderContext(instance);\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\") && setupResult !== void 0) {\n    warn$1(\n      `setup() should return an object. Received: ${setupResult === null ? \"null\" : typeof setupResult}`\n    );\n  }\n  finishComponentSetup(instance, isSSR);\n}\nlet compile;\nlet installWithProxy;\nfunction registerRuntimeCompiler(_compile) {\n  compile = _compile;\n  installWithProxy = (i) => {\n    if (i.render._rc) {\n      i.withProxy = new Proxy(i.ctx, RuntimeCompiledPublicInstanceProxyHandlers);\n    }\n  };\n}\nconst isRuntimeOnly = () => !compile;\nfunction finishComponentSetup(instance, isSSR, skipOptions) {\n  const Component = instance.type;\n  if (!instance.render) {\n    if (!isSSR && compile && !Component.render) {\n      const template = Component.template || __VUE_OPTIONS_API__ && resolveMergedOptions(instance).template;\n      if (template) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `compile`);\n        }\n        const { isCustomElement, compilerOptions } = instance.appContext.config;\n        const { delimiters, compilerOptions: componentCompilerOptions } = Component;\n        const finalCompilerOptions = extend(\n          extend(\n            {\n              isCustomElement,\n              delimiters\n            },\n            compilerOptions\n          ),\n          componentCompilerOptions\n        );\n        Component.render = compile(template, finalCompilerOptions);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `compile`);\n        }\n      }\n    }\n    instance.render = Component.render || NOOP;\n    if (installWithProxy) {\n      installWithProxy(instance);\n    }\n  }\n  if (__VUE_OPTIONS_API__ && true) {\n    const reset = setCurrentInstance(instance);\n    pauseTracking();\n    try {\n      applyOptions(instance);\n    } finally {\n      resetTracking();\n      reset();\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && !Component.render && instance.render === NOOP && !isSSR) {\n    if (!compile && Component.template) {\n      warn$1(\n        `Component provided template option but runtime compilation is not supported in this build of Vue.` + (` Configure your bundler to alias \"vue\" to \"vue/dist/vue.esm-bundler.js\".` )\n      );\n    } else {\n      warn$1(`Component is missing template or render function: `, Component);\n    }\n  }\n}\nconst attrsProxyHandlers = !!(process.env.NODE_ENV !== \"production\") ? {\n  get(target, key) {\n    markAttrsAccessed();\n    track(target, \"get\", \"\");\n    return target[key];\n  },\n  set() {\n    warn$1(`setupContext.attrs is readonly.`);\n    return false;\n  },\n  deleteProperty() {\n    warn$1(`setupContext.attrs is readonly.`);\n    return false;\n  }\n} : {\n  get(target, key) {\n    track(target, \"get\", \"\");\n    return target[key];\n  }\n};\nfunction getSlotsProxy(instance) {\n  return new Proxy(instance.slots, {\n    get(target, key) {\n      track(instance, \"get\", \"$slots\");\n      return target[key];\n    }\n  });\n}\nfunction createSetupContext(instance) {\n  const expose = (exposed) => {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      if (instance.exposed) {\n        warn$1(`expose() should be called only once per setup().`);\n      }\n      if (exposed != null) {\n        let exposedType = typeof exposed;\n        if (exposedType === \"object\") {\n          if (isArray(exposed)) {\n            exposedType = \"array\";\n          } else if (isRef(exposed)) {\n            exposedType = \"ref\";\n          }\n        }\n        if (exposedType !== \"object\") {\n          warn$1(\n            `expose() should be passed a plain object, received ${exposedType}.`\n          );\n        }\n      }\n    }\n    instance.exposed = exposed || {};\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    let attrsProxy;\n    let slotsProxy;\n    return Object.freeze({\n      get attrs() {\n        return attrsProxy || (attrsProxy = new Proxy(instance.attrs, attrsProxyHandlers));\n      },\n      get slots() {\n        return slotsProxy || (slotsProxy = getSlotsProxy(instance));\n      },\n      get emit() {\n        return (event, ...args) => instance.emit(event, ...args);\n      },\n      expose\n    });\n  } else {\n    return {\n      attrs: new Proxy(instance.attrs, attrsProxyHandlers),\n      slots: instance.slots,\n      emit: instance.emit,\n      expose\n    };\n  }\n}\nfunction getComponentPublicInstance(instance) {\n  if (instance.exposed) {\n    return instance.exposeProxy || (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {\n      get(target, key) {\n        if (key in target) {\n          return target[key];\n        } else if (key in publicPropertiesMap) {\n          return publicPropertiesMap[key](instance);\n        }\n      },\n      has(target, key) {\n        return key in target || key in publicPropertiesMap;\n      }\n    }));\n  } else {\n    return instance.proxy;\n  }\n}\nconst classifyRE = /(?:^|[-_])(\\w)/g;\nconst classify = (str) => str.replace(classifyRE, (c) => c.toUpperCase()).replace(/[-_]/g, \"\");\nfunction getComponentName(Component, includeInferred = true) {\n  return isFunction(Component) ? Component.displayName || Component.name : Component.name || includeInferred && Component.__name;\n}\nfunction formatComponentName(instance, Component, isRoot = false) {\n  let name = getComponentName(Component);\n  if (!name && Component.__file) {\n    const match = Component.__file.match(/([^/\\\\]+)\\.\\w+$/);\n    if (match) {\n      name = match[1];\n    }\n  }\n  if (!name && instance && instance.parent) {\n    const inferFromRegistry = (registry) => {\n      for (const key in registry) {\n        if (registry[key] === Component) {\n          return key;\n        }\n      }\n    };\n    name = inferFromRegistry(\n      instance.components || instance.parent.type.components\n    ) || inferFromRegistry(instance.appContext.components);\n  }\n  return name ? classify(name) : isRoot ? `App` : `Anonymous`;\n}\nfunction isClassComponent(value) {\n  return isFunction(value) && \"__vccOpts\" in value;\n}\n\nconst computed = (getterOrOptions, debugOptions) => {\n  const c = computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const i = getCurrentInstance();\n    if (i && i.appContext.config.warnRecursiveComputed) {\n      c._warnRecursive = true;\n    }\n  }\n  return c;\n};\n\nfunction h(type, propsOrChildren, children) {\n  const l = arguments.length;\n  if (l === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      if (isVNode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren]);\n      }\n      return createVNode(type, propsOrChildren);\n    } else {\n      return createVNode(type, null, propsOrChildren);\n    }\n  } else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2);\n    } else if (l === 3 && isVNode(children)) {\n      children = [children];\n    }\n    return createVNode(type, propsOrChildren, children);\n  }\n}\n\nfunction initCustomFormatter() {\n  if (!!!(process.env.NODE_ENV !== \"production\") || typeof window === \"undefined\") {\n    return;\n  }\n  const vueStyle = { style: \"color:#3ba776\" };\n  const numberStyle = { style: \"color:#1677ff\" };\n  const stringStyle = { style: \"color:#f5222d\" };\n  const keywordStyle = { style: \"color:#eb2f96\" };\n  const formatter = {\n    __vue_custom_formatter: true,\n    header(obj) {\n      if (!isObject(obj)) {\n        return null;\n      }\n      if (obj.__isVue) {\n        return [\"div\", vueStyle, `VueInstance`];\n      } else if (isRef(obj)) {\n        pauseTracking();\n        const value = obj.value;\n        resetTracking();\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, genRefFlag(obj)],\n          \"<\",\n          formatValue(value),\n          `>`\n        ];\n      } else if (isReactive(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, isShallow(obj) ? \"ShallowReactive\" : \"Reactive\"],\n          \"<\",\n          formatValue(obj),\n          `>${isReadonly(obj) ? ` (readonly)` : ``}`\n        ];\n      } else if (isReadonly(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, isShallow(obj) ? \"ShallowReadonly\" : \"Readonly\"],\n          \"<\",\n          formatValue(obj),\n          \">\"\n        ];\n      }\n      return null;\n    },\n    hasBody(obj) {\n      return obj && obj.__isVue;\n    },\n    body(obj) {\n      if (obj && obj.__isVue) {\n        return [\n          \"div\",\n          {},\n          ...formatInstance(obj.$)\n        ];\n      }\n    }\n  };\n  function formatInstance(instance) {\n    const blocks = [];\n    if (instance.type.props && instance.props) {\n      blocks.push(createInstanceBlock(\"props\", toRaw(instance.props)));\n    }\n    if (instance.setupState !== EMPTY_OBJ) {\n      blocks.push(createInstanceBlock(\"setup\", instance.setupState));\n    }\n    if (instance.data !== EMPTY_OBJ) {\n      blocks.push(createInstanceBlock(\"data\", toRaw(instance.data)));\n    }\n    const computed = extractKeys(instance, \"computed\");\n    if (computed) {\n      blocks.push(createInstanceBlock(\"computed\", computed));\n    }\n    const injected = extractKeys(instance, \"inject\");\n    if (injected) {\n      blocks.push(createInstanceBlock(\"injected\", injected));\n    }\n    blocks.push([\n      \"div\",\n      {},\n      [\n        \"span\",\n        {\n          style: keywordStyle.style + \";opacity:0.66\"\n        },\n        \"$ (internal): \"\n      ],\n      [\"object\", { object: instance }]\n    ]);\n    return blocks;\n  }\n  function createInstanceBlock(type, target) {\n    target = extend({}, target);\n    if (!Object.keys(target).length) {\n      return [\"span\", {}];\n    }\n    return [\n      \"div\",\n      { style: \"line-height:1.25em;margin-bottom:0.6em\" },\n      [\n        \"div\",\n        {\n          style: \"color:#476582\"\n        },\n        type\n      ],\n      [\n        \"div\",\n        {\n          style: \"padding-left:1.25em\"\n        },\n        ...Object.keys(target).map((key) => {\n          return [\n            \"div\",\n            {},\n            [\"span\", keywordStyle, key + \": \"],\n            formatValue(target[key], false)\n          ];\n        })\n      ]\n    ];\n  }\n  function formatValue(v, asRaw = true) {\n    if (typeof v === \"number\") {\n      return [\"span\", numberStyle, v];\n    } else if (typeof v === \"string\") {\n      return [\"span\", stringStyle, JSON.stringify(v)];\n    } else if (typeof v === \"boolean\") {\n      return [\"span\", keywordStyle, v];\n    } else if (isObject(v)) {\n      return [\"object\", { object: asRaw ? toRaw(v) : v }];\n    } else {\n      return [\"span\", stringStyle, String(v)];\n    }\n  }\n  function extractKeys(instance, type) {\n    const Comp = instance.type;\n    if (isFunction(Comp)) {\n      return;\n    }\n    const extracted = {};\n    for (const key in instance.ctx) {\n      if (isKeyOfType(Comp, key, type)) {\n        extracted[key] = instance.ctx[key];\n      }\n    }\n    return extracted;\n  }\n  function isKeyOfType(Comp, key, type) {\n    const opts = Comp[type];\n    if (isArray(opts) && opts.includes(key) || isObject(opts) && key in opts) {\n      return true;\n    }\n    if (Comp.extends && isKeyOfType(Comp.extends, key, type)) {\n      return true;\n    }\n    if (Comp.mixins && Comp.mixins.some((m) => isKeyOfType(m, key, type))) {\n      return true;\n    }\n  }\n  function genRefFlag(v) {\n    if (isShallow(v)) {\n      return `ShallowRef`;\n    }\n    if (v.effect) {\n      return `ComputedRef`;\n    }\n    return `Ref`;\n  }\n  if (window.devtoolsFormatters) {\n    window.devtoolsFormatters.push(formatter);\n  } else {\n    window.devtoolsFormatters = [formatter];\n  }\n}\n\nfunction withMemo(memo, render, cache, index) {\n  const cached = cache[index];\n  if (cached && isMemoSame(cached, memo)) {\n    return cached;\n  }\n  const ret = render();\n  ret.memo = memo.slice();\n  ret.cacheIndex = index;\n  return cache[index] = ret;\n}\nfunction isMemoSame(cached, memo) {\n  const prev = cached.memo;\n  if (prev.length != memo.length) {\n    return false;\n  }\n  for (let i = 0; i < prev.length; i++) {\n    if (hasChanged(prev[i], memo[i])) {\n      return false;\n    }\n  }\n  if (isBlockTreeEnabled > 0 && currentBlock) {\n    currentBlock.push(cached);\n  }\n  return true;\n}\n\nconst version = \"3.5.16\";\nconst warn = !!(process.env.NODE_ENV !== \"production\") ? warn$1 : NOOP;\nconst ErrorTypeStrings = ErrorTypeStrings$1 ;\nconst devtools = !!(process.env.NODE_ENV !== \"production\") || true ? devtools$1 : void 0;\nconst setDevtoolsHook = !!(process.env.NODE_ENV !== \"production\") || true ? setDevtoolsHook$1 : NOOP;\nconst _ssrUtils = {\n  createComponentInstance,\n  setupComponent,\n  renderComponentRoot,\n  setCurrentRenderingInstance,\n  isVNode: isVNode,\n  normalizeVNode,\n  getComponentPublicInstance,\n  ensureValidVNode,\n  pushWarningContext,\n  popWarningContext\n};\nconst ssrUtils = _ssrUtils ;\nconst resolveFilter = null;\nconst compatUtils = null;\nconst DeprecationTypes = null;\n\nexport { BaseTransition, BaseTransitionPropsValidators, Comment, DeprecationTypes, ErrorCodes, ErrorTypeStrings, Fragment, KeepAlive, Static, Suspense, Teleport, Text, assertNumber, callWithAsyncErrorHandling, callWithErrorHandling, cloneVNode, compatUtils, computed, createBlock, createCommentVNode, createElementBlock, createBaseVNode as createElementVNode, createHydrationRenderer, createPropsRestProxy, createRenderer, createSlots, createStaticVNode, createTextVNode, createVNode, defineAsyncComponent, defineComponent, defineEmits, defineExpose, defineModel, defineOptions, defineProps, defineSlots, devtools, getCurrentInstance, getTransitionRawChildren, guardReactiveProps, h, handleError, hasInjectionContext, hydrateOnIdle, hydrateOnInteraction, hydrateOnMediaQuery, hydrateOnVisible, initCustomFormatter, inject, isMemoSame, isRuntimeOnly, isVNode, mergeDefaults, mergeModels, mergeProps, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onRenderTracked, onRenderTriggered, onServerPrefetch, onUnmounted, onUpdated, openBlock, popScopeId, provide, pushScopeId, queuePostFlushCb, registerRuntimeCompiler, renderList, renderSlot, resolveComponent, resolveDirective, resolveDynamicComponent, resolveFilter, resolveTransitionHooks, setBlockTracking, setDevtoolsHook, setTransitionHooks, ssrContextKey, ssrUtils, toHandlers, transformVNodeArgs, useAttrs, useId, useModel, useSSRContext, useSlots, useTemplateRef, useTransitionState, version, warn, watch, watchEffect, watchPostEffect, watchSyncEffect, withAsyncContext, withCtx, withDefaults, withDirectives, withMemo, withScopeId };\n","/**\n* @vue/runtime-dom v3.5.16\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { warn, BaseTransitionPropsValidators, h, BaseTransition, assertNumber, getCurrentInstance, onBeforeUpdate, queuePostFlushCb, onMounted, watch, onUnmounted, Fragment, Static, camelize, callWithAsyncErrorHandling, defineComponent, nextTick, unref, createVNode, useTransitionState, onUpdated, toRaw, getTransitionRawChildren, setTransitionHooks, resolveTransitionHooks, Text, createRenderer, createHydrationRenderer, isRuntimeOnly } from '@vue/runtime-core';\nexport * from '@vue/runtime-core';\nimport { extend, isObject, toNumber, isArray, NOOP, isString, hyphenate, capitalize, isSpecialBooleanAttr, includeBooleanAttr, isSymbol, isFunction, isOn, isModelListener, camelize as camelize$1, isPlainObject, hasOwn, EMPTY_OBJ, looseToNumber, looseIndexOf, isSet, looseEqual, invokeArrayFns, isHTMLTag, isSVGTag, isMathMLTag } from '@vue/shared';\n\nlet policy = void 0;\nconst tt = typeof window !== \"undefined\" && window.trustedTypes;\nif (tt) {\n  try {\n    policy = /* @__PURE__ */ tt.createPolicy(\"vue\", {\n      createHTML: (val) => val\n    });\n  } catch (e) {\n    !!(process.env.NODE_ENV !== \"production\") && warn(`Error creating trusted types policy: ${e}`);\n  }\n}\nconst unsafeToTrustedHTML = policy ? (val) => policy.createHTML(val) : (val) => val;\nconst svgNS = \"http://www.w3.org/2000/svg\";\nconst mathmlNS = \"http://www.w3.org/1998/Math/MathML\";\nconst doc = typeof document !== \"undefined\" ? document : null;\nconst templateContainer = doc && /* @__PURE__ */ doc.createElement(\"template\");\nconst nodeOps = {\n  insert: (child, parent, anchor) => {\n    parent.insertBefore(child, anchor || null);\n  },\n  remove: (child) => {\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child);\n    }\n  },\n  createElement: (tag, namespace, is, props) => {\n    const el = namespace === \"svg\" ? doc.createElementNS(svgNS, tag) : namespace === \"mathml\" ? doc.createElementNS(mathmlNS, tag) : is ? doc.createElement(tag, { is }) : doc.createElement(tag);\n    if (tag === \"select\" && props && props.multiple != null) {\n      el.setAttribute(\"multiple\", props.multiple);\n    }\n    return el;\n  },\n  createText: (text) => doc.createTextNode(text),\n  createComment: (text) => doc.createComment(text),\n  setText: (node, text) => {\n    node.nodeValue = text;\n  },\n  setElementText: (el, text) => {\n    el.textContent = text;\n  },\n  parentNode: (node) => node.parentNode,\n  nextSibling: (node) => node.nextSibling,\n  querySelector: (selector) => doc.querySelector(selector),\n  setScopeId(el, id) {\n    el.setAttribute(id, \"\");\n  },\n  // __UNSAFE__\n  // Reason: innerHTML.\n  // Static content here can only come from compiled templates.\n  // As long as the user only uses trusted templates, this is safe.\n  insertStaticContent(content, parent, anchor, namespace, start, end) {\n    const before = anchor ? anchor.previousSibling : parent.lastChild;\n    if (start && (start === end || start.nextSibling)) {\n      while (true) {\n        parent.insertBefore(start.cloneNode(true), anchor);\n        if (start === end || !(start = start.nextSibling)) break;\n      }\n    } else {\n      templateContainer.innerHTML = unsafeToTrustedHTML(\n        namespace === \"svg\" ? `<svg>${content}</svg>` : namespace === \"mathml\" ? `<math>${content}</math>` : content\n      );\n      const template = templateContainer.content;\n      if (namespace === \"svg\" || namespace === \"mathml\") {\n        const wrapper = template.firstChild;\n        while (wrapper.firstChild) {\n          template.appendChild(wrapper.firstChild);\n        }\n        template.removeChild(wrapper);\n      }\n      parent.insertBefore(template, anchor);\n    }\n    return [\n      // first\n      before ? before.nextSibling : parent.firstChild,\n      // last\n      anchor ? anchor.previousSibling : parent.lastChild\n    ];\n  }\n};\n\nconst TRANSITION = \"transition\";\nconst ANIMATION = \"animation\";\nconst vtcKey = Symbol(\"_vtc\");\nconst DOMTransitionPropsValidators = {\n  name: String,\n  type: String,\n  css: {\n    type: Boolean,\n    default: true\n  },\n  duration: [String, Number, Object],\n  enterFromClass: String,\n  enterActiveClass: String,\n  enterToClass: String,\n  appearFromClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  leaveFromClass: String,\n  leaveActiveClass: String,\n  leaveToClass: String\n};\nconst TransitionPropsValidators = /* @__PURE__ */ extend(\n  {},\n  BaseTransitionPropsValidators,\n  DOMTransitionPropsValidators\n);\nconst decorate$1 = (t) => {\n  t.displayName = \"Transition\";\n  t.props = TransitionPropsValidators;\n  return t;\n};\nconst Transition = /* @__PURE__ */ decorate$1(\n  (props, { slots }) => h(BaseTransition, resolveTransitionProps(props), slots)\n);\nconst callHook = (hook, args = []) => {\n  if (isArray(hook)) {\n    hook.forEach((h2) => h2(...args));\n  } else if (hook) {\n    hook(...args);\n  }\n};\nconst hasExplicitCallback = (hook) => {\n  return hook ? isArray(hook) ? hook.some((h2) => h2.length > 1) : hook.length > 1 : false;\n};\nfunction resolveTransitionProps(rawProps) {\n  const baseProps = {};\n  for (const key in rawProps) {\n    if (!(key in DOMTransitionPropsValidators)) {\n      baseProps[key] = rawProps[key];\n    }\n  }\n  if (rawProps.css === false) {\n    return baseProps;\n  }\n  const {\n    name = \"v\",\n    type,\n    duration,\n    enterFromClass = `${name}-enter-from`,\n    enterActiveClass = `${name}-enter-active`,\n    enterToClass = `${name}-enter-to`,\n    appearFromClass = enterFromClass,\n    appearActiveClass = enterActiveClass,\n    appearToClass = enterToClass,\n    leaveFromClass = `${name}-leave-from`,\n    leaveActiveClass = `${name}-leave-active`,\n    leaveToClass = `${name}-leave-to`\n  } = rawProps;\n  const durations = normalizeDuration(duration);\n  const enterDuration = durations && durations[0];\n  const leaveDuration = durations && durations[1];\n  const {\n    onBeforeEnter,\n    onEnter,\n    onEnterCancelled,\n    onLeave,\n    onLeaveCancelled,\n    onBeforeAppear = onBeforeEnter,\n    onAppear = onEnter,\n    onAppearCancelled = onEnterCancelled\n  } = baseProps;\n  const finishEnter = (el, isAppear, done, isCancelled) => {\n    el._enterCancelled = isCancelled;\n    removeTransitionClass(el, isAppear ? appearToClass : enterToClass);\n    removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);\n    done && done();\n  };\n  const finishLeave = (el, done) => {\n    el._isLeaving = false;\n    removeTransitionClass(el, leaveFromClass);\n    removeTransitionClass(el, leaveToClass);\n    removeTransitionClass(el, leaveActiveClass);\n    done && done();\n  };\n  const makeEnterHook = (isAppear) => {\n    return (el, done) => {\n      const hook = isAppear ? onAppear : onEnter;\n      const resolve = () => finishEnter(el, isAppear, done);\n      callHook(hook, [el, resolve]);\n      nextFrame(() => {\n        removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);\n        addTransitionClass(el, isAppear ? appearToClass : enterToClass);\n        if (!hasExplicitCallback(hook)) {\n          whenTransitionEnds(el, type, enterDuration, resolve);\n        }\n      });\n    };\n  };\n  return extend(baseProps, {\n    onBeforeEnter(el) {\n      callHook(onBeforeEnter, [el]);\n      addTransitionClass(el, enterFromClass);\n      addTransitionClass(el, enterActiveClass);\n    },\n    onBeforeAppear(el) {\n      callHook(onBeforeAppear, [el]);\n      addTransitionClass(el, appearFromClass);\n      addTransitionClass(el, appearActiveClass);\n    },\n    onEnter: makeEnterHook(false),\n    onAppear: makeEnterHook(true),\n    onLeave(el, done) {\n      el._isLeaving = true;\n      const resolve = () => finishLeave(el, done);\n      addTransitionClass(el, leaveFromClass);\n      if (!el._enterCancelled) {\n        forceReflow();\n        addTransitionClass(el, leaveActiveClass);\n      } else {\n        addTransitionClass(el, leaveActiveClass);\n        forceReflow();\n      }\n      nextFrame(() => {\n        if (!el._isLeaving) {\n          return;\n        }\n        removeTransitionClass(el, leaveFromClass);\n        addTransitionClass(el, leaveToClass);\n        if (!hasExplicitCallback(onLeave)) {\n          whenTransitionEnds(el, type, leaveDuration, resolve);\n        }\n      });\n      callHook(onLeave, [el, resolve]);\n    },\n    onEnterCancelled(el) {\n      finishEnter(el, false, void 0, true);\n      callHook(onEnterCancelled, [el]);\n    },\n    onAppearCancelled(el) {\n      finishEnter(el, true, void 0, true);\n      callHook(onAppearCancelled, [el]);\n    },\n    onLeaveCancelled(el) {\n      finishLeave(el);\n      callHook(onLeaveCancelled, [el]);\n    }\n  });\n}\nfunction normalizeDuration(duration) {\n  if (duration == null) {\n    return null;\n  } else if (isObject(duration)) {\n    return [NumberOf(duration.enter), NumberOf(duration.leave)];\n  } else {\n    const n = NumberOf(duration);\n    return [n, n];\n  }\n}\nfunction NumberOf(val) {\n  const res = toNumber(val);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    assertNumber(res, \"<transition> explicit duration\");\n  }\n  return res;\n}\nfunction addTransitionClass(el, cls) {\n  cls.split(/\\s+/).forEach((c) => c && el.classList.add(c));\n  (el[vtcKey] || (el[vtcKey] = /* @__PURE__ */ new Set())).add(cls);\n}\nfunction removeTransitionClass(el, cls) {\n  cls.split(/\\s+/).forEach((c) => c && el.classList.remove(c));\n  const _vtc = el[vtcKey];\n  if (_vtc) {\n    _vtc.delete(cls);\n    if (!_vtc.size) {\n      el[vtcKey] = void 0;\n    }\n  }\n}\nfunction nextFrame(cb) {\n  requestAnimationFrame(() => {\n    requestAnimationFrame(cb);\n  });\n}\nlet endId = 0;\nfunction whenTransitionEnds(el, expectedType, explicitTimeout, resolve) {\n  const id = el._endId = ++endId;\n  const resolveIfNotStale = () => {\n    if (id === el._endId) {\n      resolve();\n    }\n  };\n  if (explicitTimeout != null) {\n    return setTimeout(resolveIfNotStale, explicitTimeout);\n  }\n  const { type, timeout, propCount } = getTransitionInfo(el, expectedType);\n  if (!type) {\n    return resolve();\n  }\n  const endEvent = type + \"end\";\n  let ended = 0;\n  const end = () => {\n    el.removeEventListener(endEvent, onEnd);\n    resolveIfNotStale();\n  };\n  const onEnd = (e) => {\n    if (e.target === el && ++ended >= propCount) {\n      end();\n    }\n  };\n  setTimeout(() => {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(endEvent, onEnd);\n}\nfunction getTransitionInfo(el, expectedType) {\n  const styles = window.getComputedStyle(el);\n  const getStyleProperties = (key) => (styles[key] || \"\").split(\", \");\n  const transitionDelays = getStyleProperties(`${TRANSITION}Delay`);\n  const transitionDurations = getStyleProperties(`${TRANSITION}Duration`);\n  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  const animationDelays = getStyleProperties(`${ANIMATION}Delay`);\n  const animationDurations = getStyleProperties(`${ANIMATION}Duration`);\n  const animationTimeout = getTimeout(animationDelays, animationDurations);\n  let type = null;\n  let timeout = 0;\n  let propCount = 0;\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0 ? transitionTimeout > animationTimeout ? TRANSITION : ANIMATION : null;\n    propCount = type ? type === TRANSITION ? transitionDurations.length : animationDurations.length : 0;\n  }\n  const hasTransform = type === TRANSITION && /\\b(transform|all)(,|$)/.test(\n    getStyleProperties(`${TRANSITION}Property`).toString()\n  );\n  return {\n    type,\n    timeout,\n    propCount,\n    hasTransform\n  };\n}\nfunction getTimeout(delays, durations) {\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));\n}\nfunction toMs(s) {\n  if (s === \"auto\") return 0;\n  return Number(s.slice(0, -1).replace(\",\", \".\")) * 1e3;\n}\nfunction forceReflow() {\n  return document.body.offsetHeight;\n}\n\nfunction patchClass(el, value, isSVG) {\n  const transitionClasses = el[vtcKey];\n  if (transitionClasses) {\n    value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(\" \");\n  }\n  if (value == null) {\n    el.removeAttribute(\"class\");\n  } else if (isSVG) {\n    el.setAttribute(\"class\", value);\n  } else {\n    el.className = value;\n  }\n}\n\nconst vShowOriginalDisplay = Symbol(\"_vod\");\nconst vShowHidden = Symbol(\"_vsh\");\nconst vShow = {\n  beforeMount(el, { value }, { transition }) {\n    el[vShowOriginalDisplay] = el.style.display === \"none\" ? \"\" : el.style.display;\n    if (transition && value) {\n      transition.beforeEnter(el);\n    } else {\n      setDisplay(el, value);\n    }\n  },\n  mounted(el, { value }, { transition }) {\n    if (transition && value) {\n      transition.enter(el);\n    }\n  },\n  updated(el, { value, oldValue }, { transition }) {\n    if (!value === !oldValue) return;\n    if (transition) {\n      if (value) {\n        transition.beforeEnter(el);\n        setDisplay(el, true);\n        transition.enter(el);\n      } else {\n        transition.leave(el, () => {\n          setDisplay(el, false);\n        });\n      }\n    } else {\n      setDisplay(el, value);\n    }\n  },\n  beforeUnmount(el, { value }) {\n    setDisplay(el, value);\n  }\n};\nif (!!(process.env.NODE_ENV !== \"production\")) {\n  vShow.name = \"show\";\n}\nfunction setDisplay(el, value) {\n  el.style.display = value ? el[vShowOriginalDisplay] : \"none\";\n  el[vShowHidden] = !value;\n}\nfunction initVShowForSSR() {\n  vShow.getSSRProps = ({ value }) => {\n    if (!value) {\n      return { style: { display: \"none\" } };\n    }\n  };\n}\n\nconst CSS_VAR_TEXT = Symbol(!!(process.env.NODE_ENV !== \"production\") ? \"CSS_VAR_TEXT\" : \"\");\nfunction useCssVars(getter) {\n  const instance = getCurrentInstance();\n  if (!instance) {\n    !!(process.env.NODE_ENV !== \"production\") && warn(`useCssVars is called without current active component instance.`);\n    return;\n  }\n  const updateTeleports = instance.ut = (vars = getter(instance.proxy)) => {\n    Array.from(\n      document.querySelectorAll(`[data-v-owner=\"${instance.uid}\"]`)\n    ).forEach((node) => setVarsOnNode(node, vars));\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    instance.getCssVars = () => getter(instance.proxy);\n  }\n  const setVars = () => {\n    const vars = getter(instance.proxy);\n    if (instance.ce) {\n      setVarsOnNode(instance.ce, vars);\n    } else {\n      setVarsOnVNode(instance.subTree, vars);\n    }\n    updateTeleports(vars);\n  };\n  onBeforeUpdate(() => {\n    queuePostFlushCb(setVars);\n  });\n  onMounted(() => {\n    watch(setVars, NOOP, { flush: \"post\" });\n    const ob = new MutationObserver(setVars);\n    ob.observe(instance.subTree.el.parentNode, { childList: true });\n    onUnmounted(() => ob.disconnect());\n  });\n}\nfunction setVarsOnVNode(vnode, vars) {\n  if (vnode.shapeFlag & 128) {\n    const suspense = vnode.suspense;\n    vnode = suspense.activeBranch;\n    if (suspense.pendingBranch && !suspense.isHydrating) {\n      suspense.effects.push(() => {\n        setVarsOnVNode(suspense.activeBranch, vars);\n      });\n    }\n  }\n  while (vnode.component) {\n    vnode = vnode.component.subTree;\n  }\n  if (vnode.shapeFlag & 1 && vnode.el) {\n    setVarsOnNode(vnode.el, vars);\n  } else if (vnode.type === Fragment) {\n    vnode.children.forEach((c) => setVarsOnVNode(c, vars));\n  } else if (vnode.type === Static) {\n    let { el, anchor } = vnode;\n    while (el) {\n      setVarsOnNode(el, vars);\n      if (el === anchor) break;\n      el = el.nextSibling;\n    }\n  }\n}\nfunction setVarsOnNode(el, vars) {\n  if (el.nodeType === 1) {\n    const style = el.style;\n    let cssText = \"\";\n    for (const key in vars) {\n      style.setProperty(`--${key}`, vars[key]);\n      cssText += `--${key}: ${vars[key]};`;\n    }\n    style[CSS_VAR_TEXT] = cssText;\n  }\n}\n\nconst displayRE = /(^|;)\\s*display\\s*:/;\nfunction patchStyle(el, prev, next) {\n  const style = el.style;\n  const isCssString = isString(next);\n  let hasControlledDisplay = false;\n  if (next && !isCssString) {\n    if (prev) {\n      if (!isString(prev)) {\n        for (const key in prev) {\n          if (next[key] == null) {\n            setStyle(style, key, \"\");\n          }\n        }\n      } else {\n        for (const prevStyle of prev.split(\";\")) {\n          const key = prevStyle.slice(0, prevStyle.indexOf(\":\")).trim();\n          if (next[key] == null) {\n            setStyle(style, key, \"\");\n          }\n        }\n      }\n    }\n    for (const key in next) {\n      if (key === \"display\") {\n        hasControlledDisplay = true;\n      }\n      setStyle(style, key, next[key]);\n    }\n  } else {\n    if (isCssString) {\n      if (prev !== next) {\n        const cssVarText = style[CSS_VAR_TEXT];\n        if (cssVarText) {\n          next += \";\" + cssVarText;\n        }\n        style.cssText = next;\n        hasControlledDisplay = displayRE.test(next);\n      }\n    } else if (prev) {\n      el.removeAttribute(\"style\");\n    }\n  }\n  if (vShowOriginalDisplay in el) {\n    el[vShowOriginalDisplay] = hasControlledDisplay ? style.display : \"\";\n    if (el[vShowHidden]) {\n      style.display = \"none\";\n    }\n  }\n}\nconst semicolonRE = /[^\\\\];\\s*$/;\nconst importantRE = /\\s*!important$/;\nfunction setStyle(style, name, val) {\n  if (isArray(val)) {\n    val.forEach((v) => setStyle(style, name, v));\n  } else {\n    if (val == null) val = \"\";\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      if (semicolonRE.test(val)) {\n        warn(\n          `Unexpected semicolon at the end of '${name}' style value: '${val}'`\n        );\n      }\n    }\n    if (name.startsWith(\"--\")) {\n      style.setProperty(name, val);\n    } else {\n      const prefixed = autoPrefix(style, name);\n      if (importantRE.test(val)) {\n        style.setProperty(\n          hyphenate(prefixed),\n          val.replace(importantRE, \"\"),\n          \"important\"\n        );\n      } else {\n        style[prefixed] = val;\n      }\n    }\n  }\n}\nconst prefixes = [\"Webkit\", \"Moz\", \"ms\"];\nconst prefixCache = {};\nfunction autoPrefix(style, rawName) {\n  const cached = prefixCache[rawName];\n  if (cached) {\n    return cached;\n  }\n  let name = camelize(rawName);\n  if (name !== \"filter\" && name in style) {\n    return prefixCache[rawName] = name;\n  }\n  name = capitalize(name);\n  for (let i = 0; i < prefixes.length; i++) {\n    const prefixed = prefixes[i] + name;\n    if (prefixed in style) {\n      return prefixCache[rawName] = prefixed;\n    }\n  }\n  return rawName;\n}\n\nconst xlinkNS = \"http://www.w3.org/1999/xlink\";\nfunction patchAttr(el, key, value, isSVG, instance, isBoolean = isSpecialBooleanAttr(key)) {\n  if (isSVG && key.startsWith(\"xlink:\")) {\n    if (value == null) {\n      el.removeAttributeNS(xlinkNS, key.slice(6, key.length));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    if (value == null || isBoolean && !includeBooleanAttr(value)) {\n      el.removeAttribute(key);\n    } else {\n      el.setAttribute(\n        key,\n        isBoolean ? \"\" : isSymbol(value) ? String(value) : value\n      );\n    }\n  }\n}\n\nfunction patchDOMProp(el, key, value, parentComponent, attrName) {\n  if (key === \"innerHTML\" || key === \"textContent\") {\n    if (value != null) {\n      el[key] = key === \"innerHTML\" ? unsafeToTrustedHTML(value) : value;\n    }\n    return;\n  }\n  const tag = el.tagName;\n  if (key === \"value\" && tag !== \"PROGRESS\" && // custom elements may use _value internally\n  !tag.includes(\"-\")) {\n    const oldValue = tag === \"OPTION\" ? el.getAttribute(\"value\") || \"\" : el.value;\n    const newValue = value == null ? (\n      // #11647: value should be set as empty string for null and undefined,\n      // but <input type=\"checkbox\"> should be set as 'on'.\n      el.type === \"checkbox\" ? \"on\" : \"\"\n    ) : String(value);\n    if (oldValue !== newValue || !(\"_value\" in el)) {\n      el.value = newValue;\n    }\n    if (value == null) {\n      el.removeAttribute(key);\n    }\n    el._value = value;\n    return;\n  }\n  let needRemove = false;\n  if (value === \"\" || value == null) {\n    const type = typeof el[key];\n    if (type === \"boolean\") {\n      value = includeBooleanAttr(value);\n    } else if (value == null && type === \"string\") {\n      value = \"\";\n      needRemove = true;\n    } else if (type === \"number\") {\n      value = 0;\n      needRemove = true;\n    }\n  }\n  try {\n    el[key] = value;\n  } catch (e) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !needRemove) {\n      warn(\n        `Failed setting prop \"${key}\" on <${tag.toLowerCase()}>: value ${value} is invalid.`,\n        e\n      );\n    }\n  }\n  needRemove && el.removeAttribute(attrName || key);\n}\n\nfunction addEventListener(el, event, handler, options) {\n  el.addEventListener(event, handler, options);\n}\nfunction removeEventListener(el, event, handler, options) {\n  el.removeEventListener(event, handler, options);\n}\nconst veiKey = Symbol(\"_vei\");\nfunction patchEvent(el, rawName, prevValue, nextValue, instance = null) {\n  const invokers = el[veiKey] || (el[veiKey] = {});\n  const existingInvoker = invokers[rawName];\n  if (nextValue && existingInvoker) {\n    existingInvoker.value = !!(process.env.NODE_ENV !== \"production\") ? sanitizeEventValue(nextValue, rawName) : nextValue;\n  } else {\n    const [name, options] = parseName(rawName);\n    if (nextValue) {\n      const invoker = invokers[rawName] = createInvoker(\n        !!(process.env.NODE_ENV !== \"production\") ? sanitizeEventValue(nextValue, rawName) : nextValue,\n        instance\n      );\n      addEventListener(el, name, invoker, options);\n    } else if (existingInvoker) {\n      removeEventListener(el, name, existingInvoker, options);\n      invokers[rawName] = void 0;\n    }\n  }\n}\nconst optionsModifierRE = /(?:Once|Passive|Capture)$/;\nfunction parseName(name) {\n  let options;\n  if (optionsModifierRE.test(name)) {\n    options = {};\n    let m;\n    while (m = name.match(optionsModifierRE)) {\n      name = name.slice(0, name.length - m[0].length);\n      options[m[0].toLowerCase()] = true;\n    }\n  }\n  const event = name[2] === \":\" ? name.slice(3) : hyphenate(name.slice(2));\n  return [event, options];\n}\nlet cachedNow = 0;\nconst p = /* @__PURE__ */ Promise.resolve();\nconst getNow = () => cachedNow || (p.then(() => cachedNow = 0), cachedNow = Date.now());\nfunction createInvoker(initialValue, instance) {\n  const invoker = (e) => {\n    if (!e._vts) {\n      e._vts = Date.now();\n    } else if (e._vts <= invoker.attached) {\n      return;\n    }\n    callWithAsyncErrorHandling(\n      patchStopImmediatePropagation(e, invoker.value),\n      instance,\n      5,\n      [e]\n    );\n  };\n  invoker.value = initialValue;\n  invoker.attached = getNow();\n  return invoker;\n}\nfunction sanitizeEventValue(value, propName) {\n  if (isFunction(value) || isArray(value)) {\n    return value;\n  }\n  warn(\n    `Wrong type passed as event handler to ${propName} - did you forget @ or : in front of your prop?\nExpected function or array of functions, received type ${typeof value}.`\n  );\n  return NOOP;\n}\nfunction patchStopImmediatePropagation(e, value) {\n  if (isArray(value)) {\n    const originalStop = e.stopImmediatePropagation;\n    e.stopImmediatePropagation = () => {\n      originalStop.call(e);\n      e._stopped = true;\n    };\n    return value.map(\n      (fn) => (e2) => !e2._stopped && fn && fn(e2)\n    );\n  } else {\n    return value;\n  }\n}\n\nconst isNativeOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // lowercase letter\nkey.charCodeAt(2) > 96 && key.charCodeAt(2) < 123;\nconst patchProp = (el, key, prevValue, nextValue, namespace, parentComponent) => {\n  const isSVG = namespace === \"svg\";\n  if (key === \"class\") {\n    patchClass(el, nextValue, isSVG);\n  } else if (key === \"style\") {\n    patchStyle(el, prevValue, nextValue);\n  } else if (isOn(key)) {\n    if (!isModelListener(key)) {\n      patchEvent(el, key, prevValue, nextValue, parentComponent);\n    }\n  } else if (key[0] === \".\" ? (key = key.slice(1), true) : key[0] === \"^\" ? (key = key.slice(1), false) : shouldSetAsProp(el, key, nextValue, isSVG)) {\n    patchDOMProp(el, key, nextValue);\n    if (!el.tagName.includes(\"-\") && (key === \"value\" || key === \"checked\" || key === \"selected\")) {\n      patchAttr(el, key, nextValue, isSVG, parentComponent, key !== \"value\");\n    }\n  } else if (\n    // #11081 force set props for possible async custom element\n    el._isVueCE && (/[A-Z]/.test(key) || !isString(nextValue))\n  ) {\n    patchDOMProp(el, camelize$1(key), nextValue, parentComponent, key);\n  } else {\n    if (key === \"true-value\") {\n      el._trueValue = nextValue;\n    } else if (key === \"false-value\") {\n      el._falseValue = nextValue;\n    }\n    patchAttr(el, key, nextValue, isSVG);\n  }\n};\nfunction shouldSetAsProp(el, key, value, isSVG) {\n  if (isSVG) {\n    if (key === \"innerHTML\" || key === \"textContent\") {\n      return true;\n    }\n    if (key in el && isNativeOn(key) && isFunction(value)) {\n      return true;\n    }\n    return false;\n  }\n  if (key === \"spellcheck\" || key === \"draggable\" || key === \"translate\" || key === \"autocorrect\") {\n    return false;\n  }\n  if (key === \"form\") {\n    return false;\n  }\n  if (key === \"list\" && el.tagName === \"INPUT\") {\n    return false;\n  }\n  if (key === \"type\" && el.tagName === \"TEXTAREA\") {\n    return false;\n  }\n  if (key === \"width\" || key === \"height\") {\n    const tag = el.tagName;\n    if (tag === \"IMG\" || tag === \"VIDEO\" || tag === \"CANVAS\" || tag === \"SOURCE\") {\n      return false;\n    }\n  }\n  if (isNativeOn(key) && isString(value)) {\n    return false;\n  }\n  return key in el;\n}\n\nconst REMOVAL = {};\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineCustomElement(options, extraOptions, _createApp) {\n  const Comp = defineComponent(options, extraOptions);\n  if (isPlainObject(Comp)) extend(Comp, extraOptions);\n  class VueCustomElement extends VueElement {\n    constructor(initialProps) {\n      super(Comp, initialProps, _createApp);\n    }\n  }\n  VueCustomElement.def = Comp;\n  return VueCustomElement;\n}\n/*! #__NO_SIDE_EFFECTS__ */\nconst defineSSRCustomElement = /* @__NO_SIDE_EFFECTS__ */ (options, extraOptions) => {\n  return /* @__PURE__ */ defineCustomElement(options, extraOptions, createSSRApp);\n};\nconst BaseClass = typeof HTMLElement !== \"undefined\" ? HTMLElement : class {\n};\nclass VueElement extends BaseClass {\n  constructor(_def, _props = {}, _createApp = createApp) {\n    super();\n    this._def = _def;\n    this._props = _props;\n    this._createApp = _createApp;\n    this._isVueCE = true;\n    /**\n     * @internal\n     */\n    this._instance = null;\n    /**\n     * @internal\n     */\n    this._app = null;\n    /**\n     * @internal\n     */\n    this._nonce = this._def.nonce;\n    this._connected = false;\n    this._resolved = false;\n    this._numberProps = null;\n    this._styleChildren = /* @__PURE__ */ new WeakSet();\n    this._ob = null;\n    if (this.shadowRoot && _createApp !== createApp) {\n      this._root = this.shadowRoot;\n    } else {\n      if (!!(process.env.NODE_ENV !== \"production\") && this.shadowRoot) {\n        warn(\n          `Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use \\`defineSSRCustomElement\\`.`\n        );\n      }\n      if (_def.shadowRoot !== false) {\n        this.attachShadow({ mode: \"open\" });\n        this._root = this.shadowRoot;\n      } else {\n        this._root = this;\n      }\n    }\n  }\n  connectedCallback() {\n    if (!this.isConnected) return;\n    if (!this.shadowRoot && !this._resolved) {\n      this._parseSlots();\n    }\n    this._connected = true;\n    let parent = this;\n    while (parent = parent && (parent.parentNode || parent.host)) {\n      if (parent instanceof VueElement) {\n        this._parent = parent;\n        break;\n      }\n    }\n    if (!this._instance) {\n      if (this._resolved) {\n        this._mount(this._def);\n      } else {\n        if (parent && parent._pendingResolve) {\n          this._pendingResolve = parent._pendingResolve.then(() => {\n            this._pendingResolve = void 0;\n            this._resolveDef();\n          });\n        } else {\n          this._resolveDef();\n        }\n      }\n    }\n  }\n  _setParent(parent = this._parent) {\n    if (parent) {\n      this._instance.parent = parent._instance;\n      this._inheritParentContext(parent);\n    }\n  }\n  _inheritParentContext(parent = this._parent) {\n    if (parent && this._app) {\n      Object.setPrototypeOf(\n        this._app._context.provides,\n        parent._instance.provides\n      );\n    }\n  }\n  disconnectedCallback() {\n    this._connected = false;\n    nextTick(() => {\n      if (!this._connected) {\n        if (this._ob) {\n          this._ob.disconnect();\n          this._ob = null;\n        }\n        this._app && this._app.unmount();\n        if (this._instance) this._instance.ce = void 0;\n        this._app = this._instance = null;\n      }\n    });\n  }\n  /**\n   * resolve inner component definition (handle possible async component)\n   */\n  _resolveDef() {\n    if (this._pendingResolve) {\n      return;\n    }\n    for (let i = 0; i < this.attributes.length; i++) {\n      this._setAttr(this.attributes[i].name);\n    }\n    this._ob = new MutationObserver((mutations) => {\n      for (const m of mutations) {\n        this._setAttr(m.attributeName);\n      }\n    });\n    this._ob.observe(this, { attributes: true });\n    const resolve = (def, isAsync = false) => {\n      this._resolved = true;\n      this._pendingResolve = void 0;\n      const { props, styles } = def;\n      let numberProps;\n      if (props && !isArray(props)) {\n        for (const key in props) {\n          const opt = props[key];\n          if (opt === Number || opt && opt.type === Number) {\n            if (key in this._props) {\n              this._props[key] = toNumber(this._props[key]);\n            }\n            (numberProps || (numberProps = /* @__PURE__ */ Object.create(null)))[camelize$1(key)] = true;\n          }\n        }\n      }\n      this._numberProps = numberProps;\n      this._resolveProps(def);\n      if (this.shadowRoot) {\n        this._applyStyles(styles);\n      } else if (!!(process.env.NODE_ENV !== \"production\") && styles) {\n        warn(\n          \"Custom element style injection is not supported when using shadowRoot: false\"\n        );\n      }\n      this._mount(def);\n    };\n    const asyncDef = this._def.__asyncLoader;\n    if (asyncDef) {\n      this._pendingResolve = asyncDef().then(\n        (def) => resolve(this._def = def, true)\n      );\n    } else {\n      resolve(this._def);\n    }\n  }\n  _mount(def) {\n    if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) && !def.name) {\n      def.name = \"VueElement\";\n    }\n    this._app = this._createApp(def);\n    this._inheritParentContext();\n    if (def.configureApp) {\n      def.configureApp(this._app);\n    }\n    this._app._ceVNode = this._createVNode();\n    this._app.mount(this._root);\n    const exposed = this._instance && this._instance.exposed;\n    if (!exposed) return;\n    for (const key in exposed) {\n      if (!hasOwn(this, key)) {\n        Object.defineProperty(this, key, {\n          // unwrap ref to be consistent with public instance behavior\n          get: () => unref(exposed[key])\n        });\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn(`Exposed property \"${key}\" already exists on custom element.`);\n      }\n    }\n  }\n  _resolveProps(def) {\n    const { props } = def;\n    const declaredPropKeys = isArray(props) ? props : Object.keys(props || {});\n    for (const key of Object.keys(this)) {\n      if (key[0] !== \"_\" && declaredPropKeys.includes(key)) {\n        this._setProp(key, this[key]);\n      }\n    }\n    for (const key of declaredPropKeys.map(camelize$1)) {\n      Object.defineProperty(this, key, {\n        get() {\n          return this._getProp(key);\n        },\n        set(val) {\n          this._setProp(key, val, true, true);\n        }\n      });\n    }\n  }\n  _setAttr(key) {\n    if (key.startsWith(\"data-v-\")) return;\n    const has = this.hasAttribute(key);\n    let value = has ? this.getAttribute(key) : REMOVAL;\n    const camelKey = camelize$1(key);\n    if (has && this._numberProps && this._numberProps[camelKey]) {\n      value = toNumber(value);\n    }\n    this._setProp(camelKey, value, false, true);\n  }\n  /**\n   * @internal\n   */\n  _getProp(key) {\n    return this._props[key];\n  }\n  /**\n   * @internal\n   */\n  _setProp(key, val, shouldReflect = true, shouldUpdate = false) {\n    if (val !== this._props[key]) {\n      if (val === REMOVAL) {\n        delete this._props[key];\n      } else {\n        this._props[key] = val;\n        if (key === \"key\" && this._app) {\n          this._app._ceVNode.key = val;\n        }\n      }\n      if (shouldUpdate && this._instance) {\n        this._update();\n      }\n      if (shouldReflect) {\n        const ob = this._ob;\n        ob && ob.disconnect();\n        if (val === true) {\n          this.setAttribute(hyphenate(key), \"\");\n        } else if (typeof val === \"string\" || typeof val === \"number\") {\n          this.setAttribute(hyphenate(key), val + \"\");\n        } else if (!val) {\n          this.removeAttribute(hyphenate(key));\n        }\n        ob && ob.observe(this, { attributes: true });\n      }\n    }\n  }\n  _update() {\n    const vnode = this._createVNode();\n    if (this._app) vnode.appContext = this._app._context;\n    render(vnode, this._root);\n  }\n  _createVNode() {\n    const baseProps = {};\n    if (!this.shadowRoot) {\n      baseProps.onVnodeMounted = baseProps.onVnodeUpdated = this._renderSlots.bind(this);\n    }\n    const vnode = createVNode(this._def, extend(baseProps, this._props));\n    if (!this._instance) {\n      vnode.ce = (instance) => {\n        this._instance = instance;\n        instance.ce = this;\n        instance.isCE = true;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          instance.ceReload = (newStyles) => {\n            if (this._styles) {\n              this._styles.forEach((s) => this._root.removeChild(s));\n              this._styles.length = 0;\n            }\n            this._applyStyles(newStyles);\n            this._instance = null;\n            this._update();\n          };\n        }\n        const dispatch = (event, args) => {\n          this.dispatchEvent(\n            new CustomEvent(\n              event,\n              isPlainObject(args[0]) ? extend({ detail: args }, args[0]) : { detail: args }\n            )\n          );\n        };\n        instance.emit = (event, ...args) => {\n          dispatch(event, args);\n          if (hyphenate(event) !== event) {\n            dispatch(hyphenate(event), args);\n          }\n        };\n        this._setParent();\n      };\n    }\n    return vnode;\n  }\n  _applyStyles(styles, owner) {\n    if (!styles) return;\n    if (owner) {\n      if (owner === this._def || this._styleChildren.has(owner)) {\n        return;\n      }\n      this._styleChildren.add(owner);\n    }\n    const nonce = this._nonce;\n    for (let i = styles.length - 1; i >= 0; i--) {\n      const s = document.createElement(\"style\");\n      if (nonce) s.setAttribute(\"nonce\", nonce);\n      s.textContent = styles[i];\n      this.shadowRoot.prepend(s);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        if (owner) {\n          if (owner.__hmrId) {\n            if (!this._childStyles) this._childStyles = /* @__PURE__ */ new Map();\n            let entry = this._childStyles.get(owner.__hmrId);\n            if (!entry) {\n              this._childStyles.set(owner.__hmrId, entry = []);\n            }\n            entry.push(s);\n          }\n        } else {\n          (this._styles || (this._styles = [])).push(s);\n        }\n      }\n    }\n  }\n  /**\n   * Only called when shadowRoot is false\n   */\n  _parseSlots() {\n    const slots = this._slots = {};\n    let n;\n    while (n = this.firstChild) {\n      const slotName = n.nodeType === 1 && n.getAttribute(\"slot\") || \"default\";\n      (slots[slotName] || (slots[slotName] = [])).push(n);\n      this.removeChild(n);\n    }\n  }\n  /**\n   * Only called when shadowRoot is false\n   */\n  _renderSlots() {\n    const outlets = (this._teleportTarget || this).querySelectorAll(\"slot\");\n    const scopeId = this._instance.type.__scopeId;\n    for (let i = 0; i < outlets.length; i++) {\n      const o = outlets[i];\n      const slotName = o.getAttribute(\"name\") || \"default\";\n      const content = this._slots[slotName];\n      const parent = o.parentNode;\n      if (content) {\n        for (const n of content) {\n          if (scopeId && n.nodeType === 1) {\n            const id = scopeId + \"-s\";\n            const walker = document.createTreeWalker(n, 1);\n            n.setAttribute(id, \"\");\n            let child;\n            while (child = walker.nextNode()) {\n              child.setAttribute(id, \"\");\n            }\n          }\n          parent.insertBefore(n, o);\n        }\n      } else {\n        while (o.firstChild) parent.insertBefore(o.firstChild, o);\n      }\n      parent.removeChild(o);\n    }\n  }\n  /**\n   * @internal\n   */\n  _injectChildStyle(comp) {\n    this._applyStyles(comp.styles, comp);\n  }\n  /**\n   * @internal\n   */\n  _removeChildStyle(comp) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this._styleChildren.delete(comp);\n      if (this._childStyles && comp.__hmrId) {\n        const oldStyles = this._childStyles.get(comp.__hmrId);\n        if (oldStyles) {\n          oldStyles.forEach((s) => this._root.removeChild(s));\n          oldStyles.length = 0;\n        }\n      }\n    }\n  }\n}\nfunction useHost(caller) {\n  const instance = getCurrentInstance();\n  const el = instance && instance.ce;\n  if (el) {\n    return el;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    if (!instance) {\n      warn(\n        `${caller || \"useHost\"} called without an active component instance.`\n      );\n    } else {\n      warn(\n        `${caller || \"useHost\"} can only be used in components defined via defineCustomElement.`\n      );\n    }\n  }\n  return null;\n}\nfunction useShadowRoot() {\n  const el = !!(process.env.NODE_ENV !== \"production\") ? useHost(\"useShadowRoot\") : useHost();\n  return el && el.shadowRoot;\n}\n\nfunction useCssModule(name = \"$style\") {\n  {\n    const instance = getCurrentInstance();\n    if (!instance) {\n      !!(process.env.NODE_ENV !== \"production\") && warn(`useCssModule must be called inside setup()`);\n      return EMPTY_OBJ;\n    }\n    const modules = instance.type.__cssModules;\n    if (!modules) {\n      !!(process.env.NODE_ENV !== \"production\") && warn(`Current instance does not have CSS modules injected.`);\n      return EMPTY_OBJ;\n    }\n    const mod = modules[name];\n    if (!mod) {\n      !!(process.env.NODE_ENV !== \"production\") && warn(`Current instance does not have CSS module named \"${name}\".`);\n      return EMPTY_OBJ;\n    }\n    return mod;\n  }\n}\n\nconst positionMap = /* @__PURE__ */ new WeakMap();\nconst newPositionMap = /* @__PURE__ */ new WeakMap();\nconst moveCbKey = Symbol(\"_moveCb\");\nconst enterCbKey = Symbol(\"_enterCb\");\nconst decorate = (t) => {\n  delete t.props.mode;\n  return t;\n};\nconst TransitionGroupImpl = /* @__PURE__ */ decorate({\n  name: \"TransitionGroup\",\n  props: /* @__PURE__ */ extend({}, TransitionPropsValidators, {\n    tag: String,\n    moveClass: String\n  }),\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const state = useTransitionState();\n    let prevChildren;\n    let children;\n    onUpdated(() => {\n      if (!prevChildren.length) {\n        return;\n      }\n      const moveClass = props.moveClass || `${props.name || \"v\"}-move`;\n      if (!hasCSSTransform(\n        prevChildren[0].el,\n        instance.vnode.el,\n        moveClass\n      )) {\n        prevChildren = [];\n        return;\n      }\n      prevChildren.forEach(callPendingCbs);\n      prevChildren.forEach(recordPosition);\n      const movedChildren = prevChildren.filter(applyTranslation);\n      forceReflow();\n      movedChildren.forEach((c) => {\n        const el = c.el;\n        const style = el.style;\n        addTransitionClass(el, moveClass);\n        style.transform = style.webkitTransform = style.transitionDuration = \"\";\n        const cb = el[moveCbKey] = (e) => {\n          if (e && e.target !== el) {\n            return;\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(\"transitionend\", cb);\n            el[moveCbKey] = null;\n            removeTransitionClass(el, moveClass);\n          }\n        };\n        el.addEventListener(\"transitionend\", cb);\n      });\n      prevChildren = [];\n    });\n    return () => {\n      const rawProps = toRaw(props);\n      const cssTransitionProps = resolveTransitionProps(rawProps);\n      let tag = rawProps.tag || Fragment;\n      prevChildren = [];\n      if (children) {\n        for (let i = 0; i < children.length; i++) {\n          const child = children[i];\n          if (child.el && child.el instanceof Element) {\n            prevChildren.push(child);\n            setTransitionHooks(\n              child,\n              resolveTransitionHooks(\n                child,\n                cssTransitionProps,\n                state,\n                instance\n              )\n            );\n            positionMap.set(\n              child,\n              child.el.getBoundingClientRect()\n            );\n          }\n        }\n      }\n      children = slots.default ? getTransitionRawChildren(slots.default()) : [];\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        if (child.key != null) {\n          setTransitionHooks(\n            child,\n            resolveTransitionHooks(child, cssTransitionProps, state, instance)\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\") && child.type !== Text) {\n          warn(`<TransitionGroup> children must be keyed.`);\n        }\n      }\n      return createVNode(tag, null, children);\n    };\n  }\n});\nconst TransitionGroup = TransitionGroupImpl;\nfunction callPendingCbs(c) {\n  const el = c.el;\n  if (el[moveCbKey]) {\n    el[moveCbKey]();\n  }\n  if (el[enterCbKey]) {\n    el[enterCbKey]();\n  }\n}\nfunction recordPosition(c) {\n  newPositionMap.set(c, c.el.getBoundingClientRect());\n}\nfunction applyTranslation(c) {\n  const oldPos = positionMap.get(c);\n  const newPos = newPositionMap.get(c);\n  const dx = oldPos.left - newPos.left;\n  const dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    const s = c.el.style;\n    s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;\n    s.transitionDuration = \"0s\";\n    return c;\n  }\n}\nfunction hasCSSTransform(el, root, moveClass) {\n  const clone = el.cloneNode();\n  const _vtc = el[vtcKey];\n  if (_vtc) {\n    _vtc.forEach((cls) => {\n      cls.split(/\\s+/).forEach((c) => c && clone.classList.remove(c));\n    });\n  }\n  moveClass.split(/\\s+/).forEach((c) => c && clone.classList.add(c));\n  clone.style.display = \"none\";\n  const container = root.nodeType === 1 ? root : root.parentNode;\n  container.appendChild(clone);\n  const { hasTransform } = getTransitionInfo(clone);\n  container.removeChild(clone);\n  return hasTransform;\n}\n\nconst getModelAssigner = (vnode) => {\n  const fn = vnode.props[\"onUpdate:modelValue\"] || false;\n  return isArray(fn) ? (value) => invokeArrayFns(fn, value) : fn;\n};\nfunction onCompositionStart(e) {\n  e.target.composing = true;\n}\nfunction onCompositionEnd(e) {\n  const target = e.target;\n  if (target.composing) {\n    target.composing = false;\n    target.dispatchEvent(new Event(\"input\"));\n  }\n}\nconst assignKey = Symbol(\"_assign\");\nconst vModelText = {\n  created(el, { modifiers: { lazy, trim, number } }, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    const castToNumber = number || vnode.props && vnode.props.type === \"number\";\n    addEventListener(el, lazy ? \"change\" : \"input\", (e) => {\n      if (e.target.composing) return;\n      let domValue = el.value;\n      if (trim) {\n        domValue = domValue.trim();\n      }\n      if (castToNumber) {\n        domValue = looseToNumber(domValue);\n      }\n      el[assignKey](domValue);\n    });\n    if (trim) {\n      addEventListener(el, \"change\", () => {\n        el.value = el.value.trim();\n      });\n    }\n    if (!lazy) {\n      addEventListener(el, \"compositionstart\", onCompositionStart);\n      addEventListener(el, \"compositionend\", onCompositionEnd);\n      addEventListener(el, \"change\", onCompositionEnd);\n    }\n  },\n  // set value on mounted so it's after min/max for type=\"range\"\n  mounted(el, { value }) {\n    el.value = value == null ? \"\" : value;\n  },\n  beforeUpdate(el, { value, oldValue, modifiers: { lazy, trim, number } }, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    if (el.composing) return;\n    const elValue = (number || el.type === \"number\") && !/^0\\d/.test(el.value) ? looseToNumber(el.value) : el.value;\n    const newValue = value == null ? \"\" : value;\n    if (elValue === newValue) {\n      return;\n    }\n    if (document.activeElement === el && el.type !== \"range\") {\n      if (lazy && value === oldValue) {\n        return;\n      }\n      if (trim && el.value.trim() === newValue) {\n        return;\n      }\n    }\n    el.value = newValue;\n  }\n};\nconst vModelCheckbox = {\n  // #4096 array checkboxes need to be deep traversed\n  deep: true,\n  created(el, _, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    addEventListener(el, \"change\", () => {\n      const modelValue = el._modelValue;\n      const elementValue = getValue(el);\n      const checked = el.checked;\n      const assign = el[assignKey];\n      if (isArray(modelValue)) {\n        const index = looseIndexOf(modelValue, elementValue);\n        const found = index !== -1;\n        if (checked && !found) {\n          assign(modelValue.concat(elementValue));\n        } else if (!checked && found) {\n          const filtered = [...modelValue];\n          filtered.splice(index, 1);\n          assign(filtered);\n        }\n      } else if (isSet(modelValue)) {\n        const cloned = new Set(modelValue);\n        if (checked) {\n          cloned.add(elementValue);\n        } else {\n          cloned.delete(elementValue);\n        }\n        assign(cloned);\n      } else {\n        assign(getCheckboxValue(el, checked));\n      }\n    });\n  },\n  // set initial checked on mount to wait for true-value/false-value\n  mounted: setChecked,\n  beforeUpdate(el, binding, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    setChecked(el, binding, vnode);\n  }\n};\nfunction setChecked(el, { value, oldValue }, vnode) {\n  el._modelValue = value;\n  let checked;\n  if (isArray(value)) {\n    checked = looseIndexOf(value, vnode.props.value) > -1;\n  } else if (isSet(value)) {\n    checked = value.has(vnode.props.value);\n  } else {\n    if (value === oldValue) return;\n    checked = looseEqual(value, getCheckboxValue(el, true));\n  }\n  if (el.checked !== checked) {\n    el.checked = checked;\n  }\n}\nconst vModelRadio = {\n  created(el, { value }, vnode) {\n    el.checked = looseEqual(value, vnode.props.value);\n    el[assignKey] = getModelAssigner(vnode);\n    addEventListener(el, \"change\", () => {\n      el[assignKey](getValue(el));\n    });\n  },\n  beforeUpdate(el, { value, oldValue }, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    if (value !== oldValue) {\n      el.checked = looseEqual(value, vnode.props.value);\n    }\n  }\n};\nconst vModelSelect = {\n  // <select multiple> value need to be deep traversed\n  deep: true,\n  created(el, { value, modifiers: { number } }, vnode) {\n    const isSetModel = isSet(value);\n    addEventListener(el, \"change\", () => {\n      const selectedVal = Array.prototype.filter.call(el.options, (o) => o.selected).map(\n        (o) => number ? looseToNumber(getValue(o)) : getValue(o)\n      );\n      el[assignKey](\n        el.multiple ? isSetModel ? new Set(selectedVal) : selectedVal : selectedVal[0]\n      );\n      el._assigning = true;\n      nextTick(() => {\n        el._assigning = false;\n      });\n    });\n    el[assignKey] = getModelAssigner(vnode);\n  },\n  // set value in mounted & updated because <select> relies on its children\n  // <option>s.\n  mounted(el, { value }) {\n    setSelected(el, value);\n  },\n  beforeUpdate(el, _binding, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n  },\n  updated(el, { value }) {\n    if (!el._assigning) {\n      setSelected(el, value);\n    }\n  }\n};\nfunction setSelected(el, value) {\n  const isMultiple = el.multiple;\n  const isArrayValue = isArray(value);\n  if (isMultiple && !isArrayValue && !isSet(value)) {\n    !!(process.env.NODE_ENV !== \"production\") && warn(\n      `<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(value).slice(8, -1)}.`\n    );\n    return;\n  }\n  for (let i = 0, l = el.options.length; i < l; i++) {\n    const option = el.options[i];\n    const optionValue = getValue(option);\n    if (isMultiple) {\n      if (isArrayValue) {\n        const optionType = typeof optionValue;\n        if (optionType === \"string\" || optionType === \"number\") {\n          option.selected = value.some((v) => String(v) === String(optionValue));\n        } else {\n          option.selected = looseIndexOf(value, optionValue) > -1;\n        }\n      } else {\n        option.selected = value.has(optionValue);\n      }\n    } else if (looseEqual(getValue(option), value)) {\n      if (el.selectedIndex !== i) el.selectedIndex = i;\n      return;\n    }\n  }\n  if (!isMultiple && el.selectedIndex !== -1) {\n    el.selectedIndex = -1;\n  }\n}\nfunction getValue(el) {\n  return \"_value\" in el ? el._value : el.value;\n}\nfunction getCheckboxValue(el, checked) {\n  const key = checked ? \"_trueValue\" : \"_falseValue\";\n  return key in el ? el[key] : checked;\n}\nconst vModelDynamic = {\n  created(el, binding, vnode) {\n    callModelHook(el, binding, vnode, null, \"created\");\n  },\n  mounted(el, binding, vnode) {\n    callModelHook(el, binding, vnode, null, \"mounted\");\n  },\n  beforeUpdate(el, binding, vnode, prevVNode) {\n    callModelHook(el, binding, vnode, prevVNode, \"beforeUpdate\");\n  },\n  updated(el, binding, vnode, prevVNode) {\n    callModelHook(el, binding, vnode, prevVNode, \"updated\");\n  }\n};\nfunction resolveDynamicModel(tagName, type) {\n  switch (tagName) {\n    case \"SELECT\":\n      return vModelSelect;\n    case \"TEXTAREA\":\n      return vModelText;\n    default:\n      switch (type) {\n        case \"checkbox\":\n          return vModelCheckbox;\n        case \"radio\":\n          return vModelRadio;\n        default:\n          return vModelText;\n      }\n  }\n}\nfunction callModelHook(el, binding, vnode, prevVNode, hook) {\n  const modelToUse = resolveDynamicModel(\n    el.tagName,\n    vnode.props && vnode.props.type\n  );\n  const fn = modelToUse[hook];\n  fn && fn(el, binding, vnode, prevVNode);\n}\nfunction initVModelForSSR() {\n  vModelText.getSSRProps = ({ value }) => ({ value });\n  vModelRadio.getSSRProps = ({ value }, vnode) => {\n    if (vnode.props && looseEqual(vnode.props.value, value)) {\n      return { checked: true };\n    }\n  };\n  vModelCheckbox.getSSRProps = ({ value }, vnode) => {\n    if (isArray(value)) {\n      if (vnode.props && looseIndexOf(value, vnode.props.value) > -1) {\n        return { checked: true };\n      }\n    } else if (isSet(value)) {\n      if (vnode.props && value.has(vnode.props.value)) {\n        return { checked: true };\n      }\n    } else if (value) {\n      return { checked: true };\n    }\n  };\n  vModelDynamic.getSSRProps = (binding, vnode) => {\n    if (typeof vnode.type !== \"string\") {\n      return;\n    }\n    const modelToUse = resolveDynamicModel(\n      // resolveDynamicModel expects an uppercase tag name, but vnode.type is lowercase\n      vnode.type.toUpperCase(),\n      vnode.props && vnode.props.type\n    );\n    if (modelToUse.getSSRProps) {\n      return modelToUse.getSSRProps(binding, vnode);\n    }\n  };\n}\n\nconst systemModifiers = [\"ctrl\", \"shift\", \"alt\", \"meta\"];\nconst modifierGuards = {\n  stop: (e) => e.stopPropagation(),\n  prevent: (e) => e.preventDefault(),\n  self: (e) => e.target !== e.currentTarget,\n  ctrl: (e) => !e.ctrlKey,\n  shift: (e) => !e.shiftKey,\n  alt: (e) => !e.altKey,\n  meta: (e) => !e.metaKey,\n  left: (e) => \"button\" in e && e.button !== 0,\n  middle: (e) => \"button\" in e && e.button !== 1,\n  right: (e) => \"button\" in e && e.button !== 2,\n  exact: (e, modifiers) => systemModifiers.some((m) => e[`${m}Key`] && !modifiers.includes(m))\n};\nconst withModifiers = (fn, modifiers) => {\n  const cache = fn._withMods || (fn._withMods = {});\n  const cacheKey = modifiers.join(\".\");\n  return cache[cacheKey] || (cache[cacheKey] = (event, ...args) => {\n    for (let i = 0; i < modifiers.length; i++) {\n      const guard = modifierGuards[modifiers[i]];\n      if (guard && guard(event, modifiers)) return;\n    }\n    return fn(event, ...args);\n  });\n};\nconst keyNames = {\n  esc: \"escape\",\n  space: \" \",\n  up: \"arrow-up\",\n  left: \"arrow-left\",\n  right: \"arrow-right\",\n  down: \"arrow-down\",\n  delete: \"backspace\"\n};\nconst withKeys = (fn, modifiers) => {\n  const cache = fn._withKeys || (fn._withKeys = {});\n  const cacheKey = modifiers.join(\".\");\n  return cache[cacheKey] || (cache[cacheKey] = (event) => {\n    if (!(\"key\" in event)) {\n      return;\n    }\n    const eventKey = hyphenate(event.key);\n    if (modifiers.some(\n      (k) => k === eventKey || keyNames[k] === eventKey\n    )) {\n      return fn(event);\n    }\n  });\n};\n\nconst rendererOptions = /* @__PURE__ */ extend({ patchProp }, nodeOps);\nlet renderer;\nlet enabledHydration = false;\nfunction ensureRenderer() {\n  return renderer || (renderer = createRenderer(rendererOptions));\n}\nfunction ensureHydrationRenderer() {\n  renderer = enabledHydration ? renderer : createHydrationRenderer(rendererOptions);\n  enabledHydration = true;\n  return renderer;\n}\nconst render = (...args) => {\n  ensureRenderer().render(...args);\n};\nconst hydrate = (...args) => {\n  ensureHydrationRenderer().hydrate(...args);\n};\nconst createApp = (...args) => {\n  const app = ensureRenderer().createApp(...args);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    injectNativeTagCheck(app);\n    injectCompilerOptionsCheck(app);\n  }\n  const { mount } = app;\n  app.mount = (containerOrSelector) => {\n    const container = normalizeContainer(containerOrSelector);\n    if (!container) return;\n    const component = app._component;\n    if (!isFunction(component) && !component.render && !component.template) {\n      component.template = container.innerHTML;\n    }\n    if (container.nodeType === 1) {\n      container.textContent = \"\";\n    }\n    const proxy = mount(container, false, resolveRootNamespace(container));\n    if (container instanceof Element) {\n      container.removeAttribute(\"v-cloak\");\n      container.setAttribute(\"data-v-app\", \"\");\n    }\n    return proxy;\n  };\n  return app;\n};\nconst createSSRApp = (...args) => {\n  const app = ensureHydrationRenderer().createApp(...args);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    injectNativeTagCheck(app);\n    injectCompilerOptionsCheck(app);\n  }\n  const { mount } = app;\n  app.mount = (containerOrSelector) => {\n    const container = normalizeContainer(containerOrSelector);\n    if (container) {\n      return mount(container, true, resolveRootNamespace(container));\n    }\n  };\n  return app;\n};\nfunction resolveRootNamespace(container) {\n  if (container instanceof SVGElement) {\n    return \"svg\";\n  }\n  if (typeof MathMLElement === \"function\" && container instanceof MathMLElement) {\n    return \"mathml\";\n  }\n}\nfunction injectNativeTagCheck(app) {\n  Object.defineProperty(app.config, \"isNativeTag\", {\n    value: (tag) => isHTMLTag(tag) || isSVGTag(tag) || isMathMLTag(tag),\n    writable: false\n  });\n}\nfunction injectCompilerOptionsCheck(app) {\n  if (isRuntimeOnly()) {\n    const isCustomElement = app.config.isCustomElement;\n    Object.defineProperty(app.config, \"isCustomElement\", {\n      get() {\n        return isCustomElement;\n      },\n      set() {\n        warn(\n          `The \\`isCustomElement\\` config option is deprecated. Use \\`compilerOptions.isCustomElement\\` instead.`\n        );\n      }\n    });\n    const compilerOptions = app.config.compilerOptions;\n    const msg = `The \\`compilerOptions\\` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka \"full build\"). Since you are using the runtime-only build, \\`compilerOptions\\` must be passed to \\`@vue/compiler-dom\\` in the build setup instead.\n- For vue-loader: pass it via vue-loader's \\`compilerOptions\\` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc`;\n    Object.defineProperty(app.config, \"compilerOptions\", {\n      get() {\n        warn(msg);\n        return compilerOptions;\n      },\n      set() {\n        warn(msg);\n      }\n    });\n  }\n}\nfunction normalizeContainer(container) {\n  if (isString(container)) {\n    const res = document.querySelector(container);\n    if (!!(process.env.NODE_ENV !== \"production\") && !res) {\n      warn(\n        `Failed to mount app: mount target selector \"${container}\" returned null.`\n      );\n    }\n    return res;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && window.ShadowRoot && container instanceof window.ShadowRoot && container.mode === \"closed\") {\n    warn(\n      `mounting on a ShadowRoot with \\`{mode: \"closed\"}\\` may lead to unpredictable bugs`\n    );\n  }\n  return container;\n}\nlet ssrDirectiveInitialized = false;\nconst initDirectivesForSSR = () => {\n  if (!ssrDirectiveInitialized) {\n    ssrDirectiveInitialized = true;\n    initVModelForSSR();\n    initVShowForSSR();\n  }\n} ;\n\nexport { Transition, TransitionGroup, VueElement, createApp, createSSRApp, defineCustomElement, defineSSRCustomElement, hydrate, initDirectivesForSSR, render, useCssModule, useCssVars, useHost, useShadowRoot, vModelCheckbox, vModelDynamic, vModelRadio, vModelSelect, vModelText, vShow, withKeys, withModifiers };\n","import * as Vue from 'vue'\n\nvar isVue2 = false\nvar isVue3 = true\nvar Vue2 = undefined\n\nfunction install() {}\n\nexport function set(target, key, val) {\n  if (Array.isArray(target)) {\n    target.length = Math.max(target.length, key)\n    target.splice(key, 1, val)\n    return val\n  }\n  target[key] = val\n  return val\n}\n\nexport function del(target, key) {\n  if (Array.isArray(target)) {\n    target.splice(key, 1)\n    return\n  }\n  delete target[key]\n}\n\nexport * from 'vue'\nexport {\n  Vue,\n  Vue2,\n  isVue2,\n  isVue3,\n  install,\n}\n","export function getDevtoolsGlobalHook() {\n    return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;\n}\nexport function getTarget() {\n    // @ts-expect-error navigator and windows are not available in all environments\n    return (typeof navigator !== 'undefined' && typeof window !== 'undefined')\n        ? window\n        : typeof globalThis !== 'undefined'\n            ? globalThis\n            : {};\n}\nexport const isProxyAvailable = typeof Proxy === 'function';\n","/**\n* vue v3.5.16\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { initCustomFormatter, warn } from '@vue/runtime-dom';\nexport * from '@vue/runtime-dom';\n\nfunction initDev() {\n  {\n    initCustomFormatter();\n  }\n}\n\nif (!!(process.env.NODE_ENV !== \"production\")) {\n  initDev();\n}\nconst compile = () => {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn(\n      `Runtime compilation is not supported in this build of Vue.` + (` Configure your bundler to alias \"vue\" to \"vue/dist/vue.esm-bundler.js\".` )\n    );\n  }\n};\n\nexport { compile };\n","let supported;\nlet perf;\nexport function isPerformanceSupported() {\n    var _a;\n    if (supported !== undefined) {\n        return supported;\n    }\n    if (typeof window !== 'undefined' && window.performance) {\n        supported = true;\n        perf = window.performance;\n    }\n    else if (typeof globalThis !== 'undefined' && ((_a = globalThis.perf_hooks) === null || _a === void 0 ? void 0 : _a.performance)) {\n        supported = true;\n        perf = globalThis.perf_hooks.performance;\n    }\n    else {\n        supported = false;\n    }\n    return supported;\n}\nexport function now() {\n    return isPerformanceSupported() ? perf.now() : Date.now();\n}\n","import { HOOK_PLUGIN_SETTINGS_SET } from './const.js';\nimport { now } from './time.js';\nexport class ApiProxy {\n    constructor(plugin, hook) {\n        this.target = null;\n        this.targetQueue = [];\n        this.onQueue = [];\n        this.plugin = plugin;\n        this.hook = hook;\n        const defaultSettings = {};\n        if (plugin.settings) {\n            for (const id in plugin.settings) {\n                const item = plugin.settings[id];\n                defaultSettings[id] = item.defaultValue;\n            }\n        }\n        const localSettingsSaveId = `__vue-devtools-plugin-settings__${plugin.id}`;\n        let currentSettings = Object.assign({}, defaultSettings);\n        try {\n            const raw = localStorage.getItem(localSettingsSaveId);\n            const data = JSON.parse(raw);\n            Object.assign(currentSettings, data);\n        }\n        catch (e) {\n            // noop\n        }\n        this.fallbacks = {\n            getSettings() {\n                return currentSettings;\n            },\n            setSettings(value) {\n                try {\n                    localStorage.setItem(localSettingsSaveId, JSON.stringify(value));\n                }\n                catch (e) {\n                    // noop\n                }\n                currentSettings = value;\n            },\n            now() {\n                return now();\n            },\n        };\n        if (hook) {\n            hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) => {\n                if (pluginId === this.plugin.id) {\n                    this.fallbacks.setSettings(value);\n                }\n            });\n        }\n        this.proxiedOn = new Proxy({}, {\n            get: (_target, prop) => {\n                if (this.target) {\n                    return this.target.on[prop];\n                }\n                else {\n                    return (...args) => {\n                        this.onQueue.push({\n                            method: prop,\n                            args,\n                        });\n                    };\n                }\n            },\n        });\n        this.proxiedTarget = new Proxy({}, {\n            get: (_target, prop) => {\n                if (this.target) {\n                    return this.target[prop];\n                }\n                else if (prop === 'on') {\n                    return this.proxiedOn;\n                }\n                else if (Object.keys(this.fallbacks).includes(prop)) {\n                    return (...args) => {\n                        this.targetQueue.push({\n                            method: prop,\n                            args,\n                            resolve: () => { },\n                        });\n                        return this.fallbacks[prop](...args);\n                    };\n                }\n                else {\n                    return (...args) => {\n                        return new Promise((resolve) => {\n                            this.targetQueue.push({\n                                method: prop,\n                                args,\n                                resolve,\n                            });\n                        });\n                    };\n                }\n            },\n        });\n    }\n    async setRealTarget(target) {\n        this.target = target;\n        for (const item of this.onQueue) {\n            this.target.on[item.method](...item.args);\n        }\n        for (const item of this.targetQueue) {\n            item.resolve(await this.target[item.method](...item.args));\n        }\n    }\n}\n","export const HOOK_SETUP = 'devtools-plugin:setup';\nexport const HOOK_PLUGIN_SETTINGS_SET = 'plugin:settings:set';\n","import { getDevtoolsGlobalHook, getTarget, isProxyAvailable } from './env.js';\nimport { HOOK_SETUP } from './const.js';\nimport { ApiProxy } from './proxy.js';\nexport * from './api/index.js';\nexport * from './plugin.js';\nexport * from './time.js';\nexport function setupDevtoolsPlugin(pluginDescriptor, setupFn) {\n    const descriptor = pluginDescriptor;\n    const target = getTarget();\n    const hook = getDevtoolsGlobalHook();\n    const enableProxy = isProxyAvailable && descriptor.enableEarlyProxy;\n    if (hook && (target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {\n        hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);\n    }\n    else {\n        const proxy = enableProxy ? new ApiProxy(descriptor, hook) : null;\n        const list = target.__VUE_DEVTOOLS_PLUGINS__ = target.__VUE_DEVTOOLS_PLUGINS__ || [];\n        list.push({\n            pluginDescriptor: descriptor,\n            setupFn,\n            proxy,\n        });\n        if (proxy) {\n            setupFn(proxy.proxiedTarget);\n        }\n    }\n}\n","/*!\n * pinia v2.3.1\n * (c) 2025 Eduardo San Martin Morote\n * @license MIT\n */\nimport { hasInjectionContext, inject, toRaw, watch, unref, markRaw, effectScope, ref, isVue2, isRef, isReactive, set, getCurrentScope, onScopeDispose, getCurrentInstance, reactive, toRef, del, nextTick, computed, toRefs } from 'vue-demi';\nimport { setupDevtoolsPlugin } from '@vue/devtools-api';\n\n/**\n * setActivePinia must be called to handle SSR at the top of functions like\n * `fetch`, `setup`, `serverPrefetch` and others\n */\nlet activePinia;\n/**\n * Sets or unsets the active pinia. Used in SSR and internally when calling\n * actions and getters\n *\n * @param pinia - Pinia instance\n */\n// @ts-expect-error: cannot constrain the type of the return\nconst setActivePinia = (pinia) => (activePinia = pinia);\n/**\n * Get the currently active pinia if there is any.\n */\nconst getActivePinia = () => (hasInjectionContext() && inject(piniaSymbol)) || activePinia;\nconst piniaSymbol = ((process.env.NODE_ENV !== 'production') ? Symbol('pinia') : /* istanbul ignore next */ Symbol());\n\nfunction isPlainObject(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\no) {\n    return (o &&\n        typeof o === 'object' &&\n        Object.prototype.toString.call(o) === '[object Object]' &&\n        typeof o.toJSON !== 'function');\n}\n// type DeepReadonly<T> = { readonly [P in keyof T]: DeepReadonly<T[P]> }\n// TODO: can we change these to numbers?\n/**\n * Possible types for SubscriptionCallback\n */\nvar MutationType;\n(function (MutationType) {\n    /**\n     * Direct mutation of the state:\n     *\n     * - `store.name = 'new name'`\n     * - `store.$state.name = 'new name'`\n     * - `store.list.push('new item')`\n     */\n    MutationType[\"direct\"] = \"direct\";\n    /**\n     * Mutated the state with `$patch` and an object\n     *\n     * - `store.$patch({ name: 'newName' })`\n     */\n    MutationType[\"patchObject\"] = \"patch object\";\n    /**\n     * Mutated the state with `$patch` and a function\n     *\n     * - `store.$patch(state => state.name = 'newName')`\n     */\n    MutationType[\"patchFunction\"] = \"patch function\";\n    // maybe reset? for $state = {} and $reset\n})(MutationType || (MutationType = {}));\n\nconst IS_CLIENT = typeof window !== 'undefined';\n\n/*\n * FileSaver.js A saveAs() FileSaver implementation.\n *\n * Originally by Eli Grey, adapted as an ESM module by Eduardo San Martin\n * Morote.\n *\n * License : MIT\n */\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nconst _global = /*#__PURE__*/ (() => typeof window === 'object' && window.window === window\n    ? window\n    : typeof self === 'object' && self.self === self\n        ? self\n        : typeof global === 'object' && global.global === global\n            ? global\n            : typeof globalThis === 'object'\n                ? globalThis\n                : { HTMLElement: null })();\nfunction bom(blob, { autoBom = false } = {}) {\n    // prepend BOM for UTF-8 XML and text/* types (including HTML)\n    // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n    if (autoBom &&\n        /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n        return new Blob([String.fromCharCode(0xfeff), blob], { type: blob.type });\n    }\n    return blob;\n}\nfunction download(url, name, opts) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        saveAs(xhr.response, name, opts);\n    };\n    xhr.onerror = function () {\n        console.error('could not download file');\n    };\n    xhr.send();\n}\nfunction corsEnabled(url) {\n    const xhr = new XMLHttpRequest();\n    // use sync to avoid popup blocker\n    xhr.open('HEAD', url, false);\n    try {\n        xhr.send();\n    }\n    catch (e) { }\n    return xhr.status >= 200 && xhr.status <= 299;\n}\n// `a.click()` doesn't work for all browsers (#465)\nfunction click(node) {\n    try {\n        node.dispatchEvent(new MouseEvent('click'));\n    }\n    catch (e) {\n        const evt = document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n        node.dispatchEvent(evt);\n    }\n}\nconst _navigator = typeof navigator === 'object' ? navigator : { userAgent: '' };\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nconst isMacOSWebView = /*#__PURE__*/ (() => /Macintosh/.test(_navigator.userAgent) &&\n    /AppleWebKit/.test(_navigator.userAgent) &&\n    !/Safari/.test(_navigator.userAgent))();\nconst saveAs = !IS_CLIENT\n    ? () => { } // noop\n    : // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program\n        typeof HTMLAnchorElement !== 'undefined' &&\n            'download' in HTMLAnchorElement.prototype &&\n            !isMacOSWebView\n            ? downloadSaveAs\n            : // Use msSaveOrOpenBlob as a second approach\n                'msSaveOrOpenBlob' in _navigator\n                    ? msSaveAs\n                    : // Fallback to using FileReader and a popup\n                        fileSaverSaveAs;\nfunction downloadSaveAs(blob, name = 'download', opts) {\n    const a = document.createElement('a');\n    a.download = name;\n    a.rel = 'noopener'; // tabnabbing\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n    if (typeof blob === 'string') {\n        // Support regular links\n        a.href = blob;\n        if (a.origin !== location.origin) {\n            if (corsEnabled(a.href)) {\n                download(blob, name, opts);\n            }\n            else {\n                a.target = '_blank';\n                click(a);\n            }\n        }\n        else {\n            click(a);\n        }\n    }\n    else {\n        // Support blobs\n        a.href = URL.createObjectURL(blob);\n        setTimeout(function () {\n            URL.revokeObjectURL(a.href);\n        }, 4e4); // 40s\n        setTimeout(function () {\n            click(a);\n        }, 0);\n    }\n}\nfunction msSaveAs(blob, name = 'download', opts) {\n    if (typeof blob === 'string') {\n        if (corsEnabled(blob)) {\n            download(blob, name, opts);\n        }\n        else {\n            const a = document.createElement('a');\n            a.href = blob;\n            a.target = '_blank';\n            setTimeout(function () {\n                click(a);\n            });\n        }\n    }\n    else {\n        // @ts-ignore: works on windows\n        navigator.msSaveOrOpenBlob(bom(blob, opts), name);\n    }\n}\nfunction fileSaverSaveAs(blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank');\n    if (popup) {\n        popup.document.title = popup.document.body.innerText = 'downloading...';\n    }\n    if (typeof blob === 'string')\n        return download(blob, name, opts);\n    const force = blob.type === 'application/octet-stream';\n    const isSafari = /constructor/i.test(String(_global.HTMLElement)) || 'safari' in _global;\n    const isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) &&\n        typeof FileReader !== 'undefined') {\n        // Safari doesn't allow downloading of blob URLs\n        const reader = new FileReader();\n        reader.onloadend = function () {\n            let url = reader.result;\n            if (typeof url !== 'string') {\n                popup = null;\n                throw new Error('Wrong reader.result type');\n            }\n            url = isChromeIOS\n                ? url\n                : url.replace(/^data:[^;]*;/, 'data:attachment/file;');\n            if (popup) {\n                popup.location.href = url;\n            }\n            else {\n                location.assign(url);\n            }\n            popup = null; // reverse-tabnabbing #460\n        };\n        reader.readAsDataURL(blob);\n    }\n    else {\n        const url = URL.createObjectURL(blob);\n        if (popup)\n            popup.location.assign(url);\n        else\n            location.href = url;\n        popup = null; // reverse-tabnabbing #460\n        setTimeout(function () {\n            URL.revokeObjectURL(url);\n        }, 4e4); // 40s\n    }\n}\n\n/**\n * Shows a toast or console.log\n *\n * @param message - message to log\n * @param type - different color of the tooltip\n */\nfunction toastMessage(message, type) {\n    const piniaMessage = ' ' + message;\n    if (typeof __VUE_DEVTOOLS_TOAST__ === 'function') {\n        // No longer available :(\n        __VUE_DEVTOOLS_TOAST__(piniaMessage, type);\n    }\n    else if (type === 'error') {\n        console.error(piniaMessage);\n    }\n    else if (type === 'warn') {\n        console.warn(piniaMessage);\n    }\n    else {\n        console.log(piniaMessage);\n    }\n}\nfunction isPinia(o) {\n    return '_a' in o && 'install' in o;\n}\n\n/**\n * This file contain devtools actions, they are not Pinia actions.\n */\n// ---\nfunction checkClipboardAccess() {\n    if (!('clipboard' in navigator)) {\n        toastMessage(`Your browser doesn't support the Clipboard API`, 'error');\n        return true;\n    }\n}\nfunction checkNotFocusedError(error) {\n    if (error instanceof Error &&\n        error.message.toLowerCase().includes('document is not focused')) {\n        toastMessage('You need to activate the \"Emulate a focused page\" setting in the \"Rendering\" panel of devtools.', 'warn');\n        return true;\n    }\n    return false;\n}\nasync function actionGlobalCopyState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));\n        toastMessage('Global state copied to clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to serialize the state. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalPasteState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));\n        toastMessage('Global state pasted from clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalSaveState(pinia) {\n    try {\n        saveAs(new Blob([JSON.stringify(pinia.state.value)], {\n            type: 'text/plain;charset=utf-8',\n        }), 'pinia-state.json');\n    }\n    catch (error) {\n        toastMessage(`Failed to export the state as JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nlet fileInput;\nfunction getFileOpener() {\n    if (!fileInput) {\n        fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = '.json';\n    }\n    function openFile() {\n        return new Promise((resolve, reject) => {\n            fileInput.onchange = async () => {\n                const files = fileInput.files;\n                if (!files)\n                    return resolve(null);\n                const file = files.item(0);\n                if (!file)\n                    return resolve(null);\n                return resolve({ text: await file.text(), file });\n            };\n            // @ts-ignore: TODO: changed from 4.3 to 4.4\n            fileInput.oncancel = () => resolve(null);\n            fileInput.onerror = reject;\n            fileInput.click();\n        });\n    }\n    return openFile;\n}\nasync function actionGlobalOpenStateFile(pinia) {\n    try {\n        const open = getFileOpener();\n        const result = await open();\n        if (!result)\n            return;\n        const { text, file } = result;\n        loadStoresState(pinia, JSON.parse(text));\n        toastMessage(`Global state imported from \"${file.name}\".`);\n    }\n    catch (error) {\n        toastMessage(`Failed to import the state from JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nfunction loadStoresState(pinia, state) {\n    for (const key in state) {\n        const storeState = pinia.state.value[key];\n        // store is already instantiated, patch it\n        if (storeState) {\n            Object.assign(storeState, state[key]);\n        }\n        else {\n            // store is not instantiated, set the initial state\n            pinia.state.value[key] = state[key];\n        }\n    }\n}\n\nfunction formatDisplay(display) {\n    return {\n        _custom: {\n            display,\n        },\n    };\n}\nconst PINIA_ROOT_LABEL = ' Pinia (root)';\nconst PINIA_ROOT_ID = '_root';\nfunction formatStoreForInspectorTree(store) {\n    return isPinia(store)\n        ? {\n            id: PINIA_ROOT_ID,\n            label: PINIA_ROOT_LABEL,\n        }\n        : {\n            id: store.$id,\n            label: store.$id,\n        };\n}\nfunction formatStoreForInspectorState(store) {\n    if (isPinia(store)) {\n        const storeNames = Array.from(store._s.keys());\n        const storeMap = store._s;\n        const state = {\n            state: storeNames.map((storeId) => ({\n                editable: true,\n                key: storeId,\n                value: store.state.value[storeId],\n            })),\n            getters: storeNames\n                .filter((id) => storeMap.get(id)._getters)\n                .map((id) => {\n                const store = storeMap.get(id);\n                return {\n                    editable: false,\n                    key: id,\n                    value: store._getters.reduce((getters, key) => {\n                        getters[key] = store[key];\n                        return getters;\n                    }, {}),\n                };\n            }),\n        };\n        return state;\n    }\n    const state = {\n        state: Object.keys(store.$state).map((key) => ({\n            editable: true,\n            key,\n            value: store.$state[key],\n        })),\n    };\n    // avoid adding empty getters\n    if (store._getters && store._getters.length) {\n        state.getters = store._getters.map((getterName) => ({\n            editable: false,\n            key: getterName,\n            value: store[getterName],\n        }));\n    }\n    if (store._customProperties.size) {\n        state.customProperties = Array.from(store._customProperties).map((key) => ({\n            editable: true,\n            key,\n            value: store[key],\n        }));\n    }\n    return state;\n}\nfunction formatEventData(events) {\n    if (!events)\n        return {};\n    if (Array.isArray(events)) {\n        // TODO: handle add and delete for arrays and objects\n        return events.reduce((data, event) => {\n            data.keys.push(event.key);\n            data.operations.push(event.type);\n            data.oldValue[event.key] = event.oldValue;\n            data.newValue[event.key] = event.newValue;\n            return data;\n        }, {\n            oldValue: {},\n            keys: [],\n            operations: [],\n            newValue: {},\n        });\n    }\n    else {\n        return {\n            operation: formatDisplay(events.type),\n            key: formatDisplay(events.key),\n            oldValue: events.oldValue,\n            newValue: events.newValue,\n        };\n    }\n}\nfunction formatMutationType(type) {\n    switch (type) {\n        case MutationType.direct:\n            return 'mutation';\n        case MutationType.patchFunction:\n            return '$patch';\n        case MutationType.patchObject:\n            return '$patch';\n        default:\n            return 'unknown';\n    }\n}\n\n// timeline can be paused when directly changing the state\nlet isTimelineActive = true;\nconst componentStateTypes = [];\nconst MUTATIONS_LAYER_ID = 'pinia:mutations';\nconst INSPECTOR_ID = 'pinia';\nconst { assign: assign$1 } = Object;\n/**\n * Gets the displayed name of a store in devtools\n *\n * @param id - id of the store\n * @returns a formatted string\n */\nconst getStoreType = (id) => ' ' + id;\n/**\n * Add the pinia plugin without any store. Allows displaying a Pinia plugin tab\n * as soon as it is added to the application.\n *\n * @param app - Vue application\n * @param pinia - pinia instance\n */\nfunction registerPiniaDevtools(app, pinia) {\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n    }, (api) => {\n        if (typeof api.now !== 'function') {\n            toastMessage('You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.');\n        }\n        api.addTimelineLayer({\n            id: MUTATIONS_LAYER_ID,\n            label: `Pinia `,\n            color: 0xe5df88,\n        });\n        api.addInspector({\n            id: INSPECTOR_ID,\n            label: 'Pinia ',\n            icon: 'storage',\n            treeFilterPlaceholder: 'Search stores',\n            actions: [\n                {\n                    icon: 'content_copy',\n                    action: () => {\n                        actionGlobalCopyState(pinia);\n                    },\n                    tooltip: 'Serialize and copy the state',\n                },\n                {\n                    icon: 'content_paste',\n                    action: async () => {\n                        await actionGlobalPasteState(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Replace the state with the content of your clipboard',\n                },\n                {\n                    icon: 'save',\n                    action: () => {\n                        actionGlobalSaveState(pinia);\n                    },\n                    tooltip: 'Save the state as a JSON file',\n                },\n                {\n                    icon: 'folder_open',\n                    action: async () => {\n                        await actionGlobalOpenStateFile(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Import the state from a JSON file',\n                },\n            ],\n            nodeActions: [\n                {\n                    icon: 'restore',\n                    tooltip: 'Reset the state (with \"$reset\")',\n                    action: (nodeId) => {\n                        const store = pinia._s.get(nodeId);\n                        if (!store) {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it wasn't found.`, 'warn');\n                        }\n                        else if (typeof store.$reset !== 'function') {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it doesn't have a \"$reset\" method implemented.`, 'warn');\n                        }\n                        else {\n                            store.$reset();\n                            toastMessage(`Store \"${nodeId}\" reset.`);\n                        }\n                    },\n                },\n            ],\n        });\n        api.on.inspectComponent((payload, ctx) => {\n            const proxy = (payload.componentInstance &&\n                payload.componentInstance.proxy);\n            if (proxy && proxy._pStores) {\n                const piniaStores = payload.componentInstance.proxy._pStores;\n                Object.values(piniaStores).forEach((store) => {\n                    payload.instanceData.state.push({\n                        type: getStoreType(store.$id),\n                        key: 'state',\n                        editable: true,\n                        value: store._isOptionsAPI\n                            ? {\n                                _custom: {\n                                    value: toRaw(store.$state),\n                                    actions: [\n                                        {\n                                            icon: 'restore',\n                                            tooltip: 'Reset the state of this store',\n                                            action: () => store.$reset(),\n                                        },\n                                    ],\n                                },\n                            }\n                            : // NOTE: workaround to unwrap transferred refs\n                                Object.keys(store.$state).reduce((state, key) => {\n                                    state[key] = store.$state[key];\n                                    return state;\n                                }, {}),\n                    });\n                    if (store._getters && store._getters.length) {\n                        payload.instanceData.state.push({\n                            type: getStoreType(store.$id),\n                            key: 'getters',\n                            editable: false,\n                            value: store._getters.reduce((getters, key) => {\n                                try {\n                                    getters[key] = store[key];\n                                }\n                                catch (error) {\n                                    // @ts-expect-error: we just want to show it in devtools\n                                    getters[key] = error;\n                                }\n                                return getters;\n                            }, {}),\n                        });\n                    }\n                });\n            }\n        });\n        api.on.getInspectorTree((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                let stores = [pinia];\n                stores = stores.concat(Array.from(pinia._s.values()));\n                payload.rootNodes = (payload.filter\n                    ? stores.filter((store) => '$id' in store\n                        ? store.$id\n                            .toLowerCase()\n                            .includes(payload.filter.toLowerCase())\n                        : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase()))\n                    : stores).map(formatStoreForInspectorTree);\n            }\n        });\n        // Expose pinia instance as $pinia to window\n        globalThis.$pinia = pinia;\n        api.on.getInspectorState((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    // this could be the selected store restored for a different project\n                    // so it's better not to say anything here\n                    return;\n                }\n                if (inspectedStore) {\n                    // Expose selected store as $store to window\n                    if (payload.nodeId !== PINIA_ROOT_ID)\n                        globalThis.$store = toRaw(inspectedStore);\n                    payload.state = formatStoreForInspectorState(inspectedStore);\n                }\n            }\n        });\n        api.on.editInspectorState((payload, ctx) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    return toastMessage(`store \"${payload.nodeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (!isPinia(inspectedStore)) {\n                    // access only the state\n                    if (path.length !== 1 ||\n                        !inspectedStore._customProperties.has(path[0]) ||\n                        path[0] in inspectedStore.$state) {\n                        path.unshift('$state');\n                    }\n                }\n                else {\n                    // Root access, we can omit the `.value` because the devtools API does it for us\n                    path.unshift('state');\n                }\n                isTimelineActive = false;\n                payload.set(inspectedStore, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n        api.on.editComponentState((payload) => {\n            if (payload.type.startsWith('')) {\n                const storeId = payload.type.replace(/^\\s*/, '');\n                const store = pinia._s.get(storeId);\n                if (!store) {\n                    return toastMessage(`store \"${storeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (path[0] !== 'state') {\n                    return toastMessage(`Invalid path for store \"${storeId}\":\\n${path}\\nOnly state can be modified.`);\n                }\n                // rewrite the first entry to be able to directly set the state as\n                // well as any other path\n                path[0] = '$state';\n                isTimelineActive = false;\n                payload.set(store, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n    });\n}\nfunction addStoreToDevtools(app, store) {\n    if (!componentStateTypes.includes(getStoreType(store.$id))) {\n        componentStateTypes.push(getStoreType(store.$id));\n    }\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n        settings: {\n            logStoreChanges: {\n                label: 'Notify about new/deleted stores',\n                type: 'boolean',\n                defaultValue: true,\n            },\n            // useEmojis: {\n            //   label: 'Use emojis in messages ',\n            //   type: 'boolean',\n            //   defaultValue: true,\n            // },\n        },\n    }, (api) => {\n        // gracefully handle errors\n        const now = typeof api.now === 'function' ? api.now.bind(api) : Date.now;\n        store.$onAction(({ after, onError, name, args }) => {\n            const groupId = runningActionId++;\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: ' ' + name,\n                    subtitle: 'start',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        action: formatDisplay(name),\n                        args,\n                    },\n                    groupId,\n                },\n            });\n            after((result) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        title: ' ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            result,\n                        },\n                        groupId,\n                    },\n                });\n            });\n            onError((error) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        logType: 'error',\n                        title: ' ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            error,\n                        },\n                        groupId,\n                    },\n                });\n            });\n        }, true);\n        store._customProperties.forEach((name) => {\n            watch(() => unref(store[name]), (newValue, oldValue) => {\n                api.notifyComponentUpdate();\n                api.sendInspectorState(INSPECTOR_ID);\n                if (isTimelineActive) {\n                    api.addTimelineEvent({\n                        layerId: MUTATIONS_LAYER_ID,\n                        event: {\n                            time: now(),\n                            title: 'Change',\n                            subtitle: name,\n                            data: {\n                                newValue,\n                                oldValue,\n                            },\n                            groupId: activeAction,\n                        },\n                    });\n                }\n            }, { deep: true });\n        });\n        store.$subscribe(({ events, type }, state) => {\n            api.notifyComponentUpdate();\n            api.sendInspectorState(INSPECTOR_ID);\n            if (!isTimelineActive)\n                return;\n            // rootStore.state[store.id] = state\n            const eventData = {\n                time: now(),\n                title: formatMutationType(type),\n                data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),\n                groupId: activeAction,\n            };\n            if (type === MutationType.patchFunction) {\n                eventData.subtitle = '';\n            }\n            else if (type === MutationType.patchObject) {\n                eventData.subtitle = '';\n            }\n            else if (events && !Array.isArray(events)) {\n                eventData.subtitle = events.type;\n            }\n            if (events) {\n                eventData.data['rawEvent(s)'] = {\n                    _custom: {\n                        display: 'DebuggerEvent',\n                        type: 'object',\n                        tooltip: 'raw DebuggerEvent[]',\n                        value: events,\n                    },\n                };\n            }\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: eventData,\n            });\n        }, { detached: true, flush: 'sync' });\n        const hotUpdate = store._hotUpdate;\n        store._hotUpdate = markRaw((newStore) => {\n            hotUpdate(newStore);\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: ' ' + store.$id,\n                    subtitle: 'HMR update',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        info: formatDisplay(`HMR update`),\n                    },\n                },\n            });\n            // update the devtools too\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n        });\n        const { $dispose } = store;\n        store.$dispose = () => {\n            $dispose();\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n            api.getSettings().logStoreChanges &&\n                toastMessage(`Disposed \"${store.$id}\" store `);\n        };\n        // trigger an update so it can display new registered stores\n        api.notifyComponentUpdate();\n        api.sendInspectorTree(INSPECTOR_ID);\n        api.sendInspectorState(INSPECTOR_ID);\n        api.getSettings().logStoreChanges &&\n            toastMessage(`\"${store.$id}\" store installed `);\n    });\n}\nlet runningActionId = 0;\nlet activeAction;\n/**\n * Patches a store to enable action grouping in devtools by wrapping the store with a Proxy that is passed as the\n * context of all actions, allowing us to set `runningAction` on each access and effectively associating any state\n * mutation to the action.\n *\n * @param store - store to patch\n * @param actionNames - list of actionst to patch\n */\nfunction patchActionForGrouping(store, actionNames, wrapWithProxy) {\n    // original actions of the store as they are given by pinia. We are going to override them\n    const actions = actionNames.reduce((storeActions, actionName) => {\n        // use toRaw to avoid tracking #541\n        storeActions[actionName] = toRaw(store)[actionName];\n        return storeActions;\n    }, {});\n    for (const actionName in actions) {\n        store[actionName] = function () {\n            // the running action id is incremented in a before action hook\n            const _actionId = runningActionId;\n            const trackedStore = wrapWithProxy\n                ? new Proxy(store, {\n                    get(...args) {\n                        activeAction = _actionId;\n                        return Reflect.get(...args);\n                    },\n                    set(...args) {\n                        activeAction = _actionId;\n                        return Reflect.set(...args);\n                    },\n                })\n                : store;\n            // For Setup Stores we need https://github.com/tc39/proposal-async-context\n            activeAction = _actionId;\n            const retValue = actions[actionName].apply(trackedStore, arguments);\n            // this is safer as async actions in Setup Stores would associate mutations done outside of the action\n            activeAction = undefined;\n            return retValue;\n        };\n    }\n}\n/**\n * pinia.use(devtoolsPlugin)\n */\nfunction devtoolsPlugin({ app, store, options }) {\n    // HMR module\n    if (store.$id.startsWith('__hot:')) {\n        return;\n    }\n    // detect option api vs setup api\n    store._isOptionsAPI = !!options.state;\n    // Do not overwrite actions mocked by @pinia/testing (#2298)\n    if (!store._p._testing) {\n        patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);\n        // Upgrade the HMR to also update the new actions\n        const originalHotUpdate = store._hotUpdate;\n        toRaw(store)._hotUpdate = function (newStore) {\n            originalHotUpdate.apply(this, arguments);\n            patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);\n        };\n    }\n    addStoreToDevtools(app, \n    // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?\n    store);\n}\n\n/**\n * Creates a Pinia instance to be used by the application\n */\nfunction createPinia() {\n    const scope = effectScope(true);\n    // NOTE: here we could check the window object for a state and directly set it\n    // if there is anything like it with Vue 3 SSR\n    const state = scope.run(() => ref({}));\n    let _p = [];\n    // plugins added before calling app.use(pinia)\n    let toBeInstalled = [];\n    const pinia = markRaw({\n        install(app) {\n            // this allows calling useStore() outside of a component setup after\n            // installing pinia's plugin\n            setActivePinia(pinia);\n            if (!isVue2) {\n                pinia._a = app;\n                app.provide(piniaSymbol, pinia);\n                app.config.globalProperties.$pinia = pinia;\n                /* istanbul ignore else */\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(app, pinia);\n                }\n                toBeInstalled.forEach((plugin) => _p.push(plugin));\n                toBeInstalled = [];\n            }\n        },\n        use(plugin) {\n            if (!this._a && !isVue2) {\n                toBeInstalled.push(plugin);\n            }\n            else {\n                _p.push(plugin);\n            }\n            return this;\n        },\n        _p,\n        // it's actually undefined here\n        // @ts-expect-error\n        _a: null,\n        _e: scope,\n        _s: new Map(),\n        state,\n    });\n    // pinia devtools rely on dev only features so they cannot be forced unless\n    // the dev build of Vue is used. Avoid old browsers like IE11.\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT && typeof Proxy !== 'undefined') {\n        pinia.use(devtoolsPlugin);\n    }\n    return pinia;\n}\n/**\n * Dispose a Pinia instance by stopping its effectScope and removing the state, plugins and stores. This is mostly\n * useful in tests, with both a testing pinia or a regular pinia and in applications that use multiple pinia instances.\n * Once disposed, the pinia instance cannot be used anymore.\n *\n * @param pinia - pinia instance\n */\nfunction disposePinia(pinia) {\n    pinia._e.stop();\n    pinia._s.clear();\n    pinia._p.splice(0);\n    pinia.state.value = {};\n    // @ts-expect-error: non valid\n    pinia._a = null;\n}\n\n/**\n * Checks if a function is a `StoreDefinition`.\n *\n * @param fn - object to test\n * @returns true if `fn` is a StoreDefinition\n */\nconst isUseStore = (fn) => {\n    return typeof fn === 'function' && typeof fn.$id === 'string';\n};\n/**\n * Mutates in place `newState` with `oldState` to _hot update_ it. It will\n * remove any key not existing in `newState` and recursively merge plain\n * objects.\n *\n * @param newState - new state object to be patched\n * @param oldState - old state that should be used to patch newState\n * @returns - newState\n */\nfunction patchObject(newState, oldState) {\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in oldState) {\n        const subPatch = oldState[key];\n        // skip the whole sub tree\n        if (!(key in newState)) {\n            continue;\n        }\n        const targetValue = newState[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            newState[key] = patchObject(targetValue, subPatch);\n        }\n        else {\n            // objects are either a bit more complex (e.g. refs) or primitives, so we\n            // just set the whole thing\n            if (isVue2) {\n                set(newState, key, subPatch);\n            }\n            else {\n                newState[key] = subPatch;\n            }\n        }\n    }\n    return newState;\n}\n/**\n * Creates an _accept_ function to pass to `import.meta.hot` in Vite applications.\n *\n * @example\n * ```js\n * const useUser = defineStore(...)\n * if (import.meta.hot) {\n *   import.meta.hot.accept(acceptHMRUpdate(useUser, import.meta.hot))\n * }\n * ```\n *\n * @param initialUseStore - return of the defineStore to hot update\n * @param hot - `import.meta.hot`\n */\nfunction acceptHMRUpdate(initialUseStore, hot) {\n    // strip as much as possible from iife.prod\n    if (!(process.env.NODE_ENV !== 'production')) {\n        return () => { };\n    }\n    return (newModule) => {\n        const pinia = hot.data.pinia || initialUseStore._pinia;\n        if (!pinia) {\n            // this store is still not used\n            return;\n        }\n        // preserve the pinia instance across loads\n        hot.data.pinia = pinia;\n        // console.log('got data', newStore)\n        for (const exportName in newModule) {\n            const useStore = newModule[exportName];\n            // console.log('checking for', exportName)\n            if (isUseStore(useStore) && pinia._s.has(useStore.$id)) {\n                // console.log('Accepting update for', useStore.$id)\n                const id = useStore.$id;\n                if (id !== initialUseStore.$id) {\n                    console.warn(`The id of the store changed from \"${initialUseStore.$id}\" to \"${id}\". Reloading.`);\n                    // return import.meta.hot.invalidate()\n                    return hot.invalidate();\n                }\n                const existingStore = pinia._s.get(id);\n                if (!existingStore) {\n                    console.log(`[Pinia]: skipping hmr because store doesn't exist yet`);\n                    return;\n                }\n                useStore(pinia, existingStore);\n            }\n        }\n    };\n}\n\nconst noop = () => { };\nfunction addSubscription(subscriptions, callback, detached, onCleanup = noop) {\n    subscriptions.push(callback);\n    const removeSubscription = () => {\n        const idx = subscriptions.indexOf(callback);\n        if (idx > -1) {\n            subscriptions.splice(idx, 1);\n            onCleanup();\n        }\n    };\n    if (!detached && getCurrentScope()) {\n        onScopeDispose(removeSubscription);\n    }\n    return removeSubscription;\n}\nfunction triggerSubscriptions(subscriptions, ...args) {\n    subscriptions.slice().forEach((callback) => {\n        callback(...args);\n    });\n}\n\nconst fallbackRunWithContext = (fn) => fn();\n/**\n * Marks a function as an action for `$onAction`\n * @internal\n */\nconst ACTION_MARKER = Symbol();\n/**\n * Action name symbol. Allows to add a name to an action after defining it\n * @internal\n */\nconst ACTION_NAME = Symbol();\nfunction mergeReactiveObjects(target, patchToApply) {\n    // Handle Map instances\n    if (target instanceof Map && patchToApply instanceof Map) {\n        patchToApply.forEach((value, key) => target.set(key, value));\n    }\n    else if (target instanceof Set && patchToApply instanceof Set) {\n        // Handle Set instances\n        patchToApply.forEach(target.add, target);\n    }\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in patchToApply) {\n        if (!patchToApply.hasOwnProperty(key))\n            continue;\n        const subPatch = patchToApply[key];\n        const targetValue = target[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            target.hasOwnProperty(key) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            // NOTE: here I wanted to warn about inconsistent types but it's not possible because in setup stores one might\n            // start the value of a property as a certain type e.g. a Map, and then for some reason, during SSR, change that\n            // to `undefined`. When trying to hydrate, we want to override the Map with `undefined`.\n            target[key] = mergeReactiveObjects(targetValue, subPatch);\n        }\n        else {\n            // @ts-expect-error: subPatch is a valid value\n            target[key] = subPatch;\n        }\n    }\n    return target;\n}\nconst skipHydrateSymbol = (process.env.NODE_ENV !== 'production')\n    ? Symbol('pinia:skipHydration')\n    : /* istanbul ignore next */ Symbol();\n/**\n * Tells Pinia to skip the hydration process of a given object. This is useful in setup stores (only) when you return a\n * stateful object in the store but it isn't really state. e.g. returning a router instance in a setup store.\n *\n * @param obj - target object\n * @returns obj\n */\nfunction skipHydrate(obj) {\n    return Object.defineProperty(obj, skipHydrateSymbol, {});\n}\n/**\n * Returns whether a value should be hydrated\n *\n * @param obj - target variable\n * @returns true if `obj` should be hydrated\n */\nfunction shouldHydrate(obj) {\n    return !isPlainObject(obj) || !obj.hasOwnProperty(skipHydrateSymbol);\n}\nconst { assign } = Object;\nfunction isComputed(o) {\n    return !!(isRef(o) && o.effect);\n}\nfunction createOptionsStore(id, options, pinia, hot) {\n    const { state, actions, getters } = options;\n    const initialState = pinia.state.value[id];\n    let store;\n    function setup() {\n        if (!initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(pinia.state.value, id, state ? state() : {});\n            }\n            else {\n                pinia.state.value[id] = state ? state() : {};\n            }\n        }\n        // avoid creating a state in pinia.state.value\n        const localState = (process.env.NODE_ENV !== 'production') && hot\n            ? // use ref() to unwrap refs inside state TODO: check if this is still necessary\n                toRefs(ref(state ? state() : {}).value)\n            : toRefs(pinia.state.value[id]);\n        return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {\n            if ((process.env.NODE_ENV !== 'production') && name in localState) {\n                console.warn(`[]: A getter cannot have the same name as another state property. Rename one of them. Found with \"${name}\" in store \"${id}\".`);\n            }\n            computedGetters[name] = markRaw(computed(() => {\n                setActivePinia(pinia);\n                // it was created just before\n                const store = pinia._s.get(id);\n                // allow cross using stores\n                /* istanbul ignore if */\n                if (isVue2 && !store._r)\n                    return;\n                // @ts-expect-error\n                // return getters![name].call(context, context)\n                // TODO: avoid reading the getter while assigning with a global variable\n                return getters[name].call(store, store);\n            }));\n            return computedGetters;\n        }, {}));\n    }\n    store = createSetupStore(id, setup, options, pinia, hot, true);\n    return store;\n}\nfunction createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {\n    let scope;\n    const optionsForPlugin = assign({ actions: {} }, options);\n    /* istanbul ignore if */\n    if ((process.env.NODE_ENV !== 'production') && !pinia._e.active) {\n        throw new Error('Pinia destroyed');\n    }\n    // watcher options for $subscribe\n    const $subscribeOptions = { deep: true };\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production') && !isVue2) {\n        $subscribeOptions.onTrigger = (event) => {\n            /* istanbul ignore else */\n            if (isListening) {\n                debuggerEvents = event;\n                // avoid triggering this while the store is being built and the state is being set in pinia\n            }\n            else if (isListening == false && !store._hotUpdating) {\n                // let patch send all the events together later\n                /* istanbul ignore else */\n                if (Array.isArray(debuggerEvents)) {\n                    debuggerEvents.push(event);\n                }\n                else {\n                    console.error(' debuggerEvents should be an array. This is most likely an internal Pinia bug.');\n                }\n            }\n        };\n    }\n    // internal state\n    let isListening; // set to true at the end\n    let isSyncListening; // set to true at the end\n    let subscriptions = [];\n    let actionSubscriptions = [];\n    let debuggerEvents;\n    const initialState = pinia.state.value[$id];\n    // avoid setting the state for option stores if it is set\n    // by the setup\n    if (!isOptionsStore && !initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n        /* istanbul ignore if */\n        if (isVue2) {\n            set(pinia.state.value, $id, {});\n        }\n        else {\n            pinia.state.value[$id] = {};\n        }\n    }\n    const hotState = ref({});\n    // avoid triggering too many listeners\n    // https://github.com/vuejs/pinia/issues/1129\n    let activeListener;\n    function $patch(partialStateOrMutator) {\n        let subscriptionMutation;\n        isListening = isSyncListening = false;\n        // reset the debugger events since patches are sync\n        /* istanbul ignore else */\n        if ((process.env.NODE_ENV !== 'production')) {\n            debuggerEvents = [];\n        }\n        if (typeof partialStateOrMutator === 'function') {\n            partialStateOrMutator(pinia.state.value[$id]);\n            subscriptionMutation = {\n                type: MutationType.patchFunction,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        else {\n            mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);\n            subscriptionMutation = {\n                type: MutationType.patchObject,\n                payload: partialStateOrMutator,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        const myListenerId = (activeListener = Symbol());\n        nextTick().then(() => {\n            if (activeListener === myListenerId) {\n                isListening = true;\n            }\n        });\n        isSyncListening = true;\n        // because we paused the watcher, we need to manually call the subscriptions\n        triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);\n    }\n    const $reset = isOptionsStore\n        ? function $reset() {\n            const { state } = options;\n            const newState = state ? state() : {};\n            // we use a patch to group all changes into one single subscription\n            this.$patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, newState);\n            });\n        }\n        : /* istanbul ignore next */\n            (process.env.NODE_ENV !== 'production')\n                ? () => {\n                    throw new Error(`: Store \"${$id}\" is built using the setup syntax and does not implement $reset().`);\n                }\n                : noop;\n    function $dispose() {\n        scope.stop();\n        subscriptions = [];\n        actionSubscriptions = [];\n        pinia._s.delete($id);\n    }\n    /**\n     * Helper that wraps function so it can be tracked with $onAction\n     * @param fn - action to wrap\n     * @param name - name of the action\n     */\n    const action = (fn, name = '') => {\n        if (ACTION_MARKER in fn) {\n            fn[ACTION_NAME] = name;\n            return fn;\n        }\n        const wrappedAction = function () {\n            setActivePinia(pinia);\n            const args = Array.from(arguments);\n            const afterCallbackList = [];\n            const onErrorCallbackList = [];\n            function after(callback) {\n                afterCallbackList.push(callback);\n            }\n            function onError(callback) {\n                onErrorCallbackList.push(callback);\n            }\n            // @ts-expect-error\n            triggerSubscriptions(actionSubscriptions, {\n                args,\n                name: wrappedAction[ACTION_NAME],\n                store,\n                after,\n                onError,\n            });\n            let ret;\n            try {\n                ret = fn.apply(this && this.$id === $id ? this : store, args);\n                // handle sync errors\n            }\n            catch (error) {\n                triggerSubscriptions(onErrorCallbackList, error);\n                throw error;\n            }\n            if (ret instanceof Promise) {\n                return ret\n                    .then((value) => {\n                    triggerSubscriptions(afterCallbackList, value);\n                    return value;\n                })\n                    .catch((error) => {\n                    triggerSubscriptions(onErrorCallbackList, error);\n                    return Promise.reject(error);\n                });\n            }\n            // trigger after callbacks\n            triggerSubscriptions(afterCallbackList, ret);\n            return ret;\n        };\n        wrappedAction[ACTION_MARKER] = true;\n        wrappedAction[ACTION_NAME] = name; // will be set later\n        // @ts-expect-error: we are intentionally limiting the returned type to just Fn\n        // because all the added properties are internals that are exposed through `$onAction()` only\n        return wrappedAction;\n    };\n    const _hmrPayload = /*#__PURE__*/ markRaw({\n        actions: {},\n        getters: {},\n        state: [],\n        hotState,\n    });\n    const partialStore = {\n        _p: pinia,\n        // _s: scope,\n        $id,\n        $onAction: addSubscription.bind(null, actionSubscriptions),\n        $patch,\n        $reset,\n        $subscribe(callback, options = {}) {\n            const removeSubscription = addSubscription(subscriptions, callback, options.detached, () => stopWatcher());\n            const stopWatcher = scope.run(() => watch(() => pinia.state.value[$id], (state) => {\n                if (options.flush === 'sync' ? isSyncListening : isListening) {\n                    callback({\n                        storeId: $id,\n                        type: MutationType.direct,\n                        events: debuggerEvents,\n                    }, state);\n                }\n            }, assign({}, $subscribeOptions, options)));\n            return removeSubscription;\n        },\n        $dispose,\n    };\n    /* istanbul ignore if */\n    if (isVue2) {\n        // start as non ready\n        partialStore._r = false;\n    }\n    const store = reactive((process.env.NODE_ENV !== 'production') || ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT)\n        ? assign({\n            _hmrPayload,\n            _customProperties: markRaw(new Set()), // devtools custom properties\n        }, partialStore\n        // must be added later\n        // setupStore\n        )\n        : partialStore);\n    // store the partial store now so the setup of stores can instantiate each other before they are finished without\n    // creating infinite loops.\n    pinia._s.set($id, store);\n    const runWithContext = (pinia._a && pinia._a.runWithContext) || fallbackRunWithContext;\n    // TODO: idea create skipSerialize that marks properties as non serializable and they are skipped\n    const setupStore = runWithContext(() => pinia._e.run(() => (scope = effectScope()).run(() => setup({ action }))));\n    // overwrite existing actions to support $onAction\n    for (const key in setupStore) {\n        const prop = setupStore[key];\n        if ((isRef(prop) && !isComputed(prop)) || isReactive(prop)) {\n            // mark it as a piece of state to be serialized\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                set(hotState.value, key, toRef(setupStore, key));\n                // createOptionStore directly sets the state in pinia.state.value so we\n                // can just skip that\n            }\n            else if (!isOptionsStore) {\n                // in setup stores we must hydrate the state and sync pinia state tree with the refs the user just created\n                if (initialState && shouldHydrate(prop)) {\n                    if (isRef(prop)) {\n                        prop.value = initialState[key];\n                    }\n                    else {\n                        // probably a reactive object, lets recursively assign\n                        // @ts-expect-error: prop is unknown\n                        mergeReactiveObjects(prop, initialState[key]);\n                    }\n                }\n                // transfer the ref to the pinia state to keep everything in sync\n                /* istanbul ignore if */\n                if (isVue2) {\n                    set(pinia.state.value[$id], key, prop);\n                }\n                else {\n                    pinia.state.value[$id][key] = prop;\n                }\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.state.push(key);\n            }\n            // action\n        }\n        else if (typeof prop === 'function') {\n            const actionValue = (process.env.NODE_ENV !== 'production') && hot ? prop : action(prop, key);\n            // this a hot module replacement store because the hotUpdate method needs\n            // to do it with the right context\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(setupStore, key, actionValue);\n            }\n            else {\n                // @ts-expect-error\n                setupStore[key] = actionValue;\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.actions[key] = prop;\n            }\n            // list actions so they can be used in plugins\n            // @ts-expect-error\n            optionsForPlugin.actions[key] = prop;\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            // add getters for devtools\n            if (isComputed(prop)) {\n                _hmrPayload.getters[key] = isOptionsStore\n                    ? // @ts-expect-error\n                        options.getters[key]\n                    : prop;\n                if (IS_CLIENT) {\n                    const getters = setupStore._getters ||\n                        // @ts-expect-error: same\n                        (setupStore._getters = markRaw([]));\n                    getters.push(key);\n                }\n            }\n        }\n    }\n    // add the state, getters, and action properties\n    /* istanbul ignore if */\n    if (isVue2) {\n        Object.keys(setupStore).forEach((key) => {\n            set(store, key, setupStore[key]);\n        });\n    }\n    else {\n        assign(store, setupStore);\n        // allows retrieving reactive objects with `storeToRefs()`. Must be called after assigning to the reactive object.\n        // Make `storeToRefs()` work with `reactive()` #799\n        assign(toRaw(store), setupStore);\n    }\n    // use this instead of a computed with setter to be able to create it anywhere\n    // without linking the computed lifespan to wherever the store is first\n    // created.\n    Object.defineProperty(store, '$state', {\n        get: () => ((process.env.NODE_ENV !== 'production') && hot ? hotState.value : pinia.state.value[$id]),\n        set: (state) => {\n            /* istanbul ignore if */\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                throw new Error('cannot set hotState');\n            }\n            $patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, state);\n            });\n        },\n    });\n    // add the hotUpdate before plugins to allow them to override it\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production')) {\n        store._hotUpdate = markRaw((newStore) => {\n            store._hotUpdating = true;\n            newStore._hmrPayload.state.forEach((stateKey) => {\n                if (stateKey in store.$state) {\n                    const newStateTarget = newStore.$state[stateKey];\n                    const oldStateSource = store.$state[stateKey];\n                    if (typeof newStateTarget === 'object' &&\n                        isPlainObject(newStateTarget) &&\n                        isPlainObject(oldStateSource)) {\n                        patchObject(newStateTarget, oldStateSource);\n                    }\n                    else {\n                        // transfer the ref\n                        newStore.$state[stateKey] = oldStateSource;\n                    }\n                }\n                // patch direct access properties to allow store.stateProperty to work as\n                // store.$state.stateProperty\n                set(store, stateKey, toRef(newStore.$state, stateKey));\n            });\n            // remove deleted state properties\n            Object.keys(store.$state).forEach((stateKey) => {\n                if (!(stateKey in newStore.$state)) {\n                    del(store, stateKey);\n                }\n            });\n            // avoid devtools logging this as a mutation\n            isListening = false;\n            isSyncListening = false;\n            pinia.state.value[$id] = toRef(newStore._hmrPayload, 'hotState');\n            isSyncListening = true;\n            nextTick().then(() => {\n                isListening = true;\n            });\n            for (const actionName in newStore._hmrPayload.actions) {\n                const actionFn = newStore[actionName];\n                set(store, actionName, action(actionFn, actionName));\n            }\n            // TODO: does this work in both setup and option store?\n            for (const getterName in newStore._hmrPayload.getters) {\n                const getter = newStore._hmrPayload.getters[getterName];\n                const getterValue = isOptionsStore\n                    ? // special handling of options api\n                        computed(() => {\n                            setActivePinia(pinia);\n                            return getter.call(store, store);\n                        })\n                    : getter;\n                set(store, getterName, getterValue);\n            }\n            // remove deleted getters\n            Object.keys(store._hmrPayload.getters).forEach((key) => {\n                if (!(key in newStore._hmrPayload.getters)) {\n                    del(store, key);\n                }\n            });\n            // remove old actions\n            Object.keys(store._hmrPayload.actions).forEach((key) => {\n                if (!(key in newStore._hmrPayload.actions)) {\n                    del(store, key);\n                }\n            });\n            // update the values used in devtools and to allow deleting new properties later on\n            store._hmrPayload = newStore._hmrPayload;\n            store._getters = newStore._getters;\n            store._hotUpdating = false;\n        });\n    }\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n        const nonEnumerable = {\n            writable: true,\n            configurable: true,\n            // avoid warning on devtools trying to display this property\n            enumerable: false,\n        };\n        ['_p', '_hmrPayload', '_getters', '_customProperties'].forEach((p) => {\n            Object.defineProperty(store, p, assign({ value: store[p] }, nonEnumerable));\n        });\n    }\n    /* istanbul ignore if */\n    if (isVue2) {\n        // mark the store as ready before plugins\n        store._r = true;\n    }\n    // apply all plugins\n    pinia._p.forEach((extender) => {\n        /* istanbul ignore else */\n        if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n            const extensions = scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            }));\n            Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));\n            assign(store, extensions);\n        }\n        else {\n            assign(store, scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            })));\n        }\n    });\n    if ((process.env.NODE_ENV !== 'production') &&\n        store.$state &&\n        typeof store.$state === 'object' &&\n        typeof store.$state.constructor === 'function' &&\n        !store.$state.constructor.toString().includes('[native code]')) {\n        console.warn(`[]: The \"state\" must be a plain object. It cannot be\\n` +\n            `\\tstate: () => new MyClass()\\n` +\n            `Found in store \"${store.$id}\".`);\n    }\n    // only apply hydrate to option stores with an initial state in pinia\n    if (initialState &&\n        isOptionsStore &&\n        options.hydrate) {\n        options.hydrate(store.$state, initialState);\n    }\n    isListening = true;\n    isSyncListening = true;\n    return store;\n}\n// allows unused stores to be tree shaken\n/*! #__NO_SIDE_EFFECTS__ */\nfunction defineStore(\n// TODO: add proper types from above\nidOrOptions, setup, setupOptions) {\n    let id;\n    let options;\n    const isSetupStore = typeof setup === 'function';\n    if (typeof idOrOptions === 'string') {\n        id = idOrOptions;\n        // the option store setup will contain the actual options in this case\n        options = isSetupStore ? setupOptions : setup;\n    }\n    else {\n        options = idOrOptions;\n        id = idOrOptions.id;\n        if ((process.env.NODE_ENV !== 'production') && typeof id !== 'string') {\n            throw new Error(`[]: \"defineStore()\" must be passed a store id as its first argument.`);\n        }\n    }\n    function useStore(pinia, hot) {\n        const hasContext = hasInjectionContext();\n        pinia =\n            // in test mode, ignore the argument provided as we can always retrieve a\n            // pinia instance with getActivePinia()\n            ((process.env.NODE_ENV === 'test') && activePinia && activePinia._testing ? null : pinia) ||\n                (hasContext ? inject(piniaSymbol, null) : null);\n        if (pinia)\n            setActivePinia(pinia);\n        if ((process.env.NODE_ENV !== 'production') && !activePinia) {\n            throw new Error(`[]: \"getActivePinia()\" was called but there was no active Pinia. Are you trying to use a store before calling \"app.use(pinia)\"?\\n` +\n                `See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.\\n` +\n                `This will fail in production.`);\n        }\n        pinia = activePinia;\n        if (!pinia._s.has(id)) {\n            // creating the store registers it in `pinia._s`\n            if (isSetupStore) {\n                createSetupStore(id, setup, options, pinia);\n            }\n            else {\n                createOptionsStore(id, options, pinia);\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                // @ts-expect-error: not the right inferred type\n                useStore._pinia = pinia;\n            }\n        }\n        const store = pinia._s.get(id);\n        if ((process.env.NODE_ENV !== 'production') && hot) {\n            const hotId = '__hot:' + id;\n            const newStore = isSetupStore\n                ? createSetupStore(hotId, setup, options, pinia, true)\n                : createOptionsStore(hotId, assign({}, options), pinia, true);\n            hot._hotUpdate(newStore);\n            // cleanup the state properties and the store from the cache\n            delete pinia.state.value[hotId];\n            pinia._s.delete(hotId);\n        }\n        if ((process.env.NODE_ENV !== 'production') && IS_CLIENT) {\n            const currentInstance = getCurrentInstance();\n            // save stores in instances to access them devtools\n            if (currentInstance &&\n                currentInstance.proxy &&\n                // avoid adding stores that are just built for hot module replacement\n                !hot) {\n                const vm = currentInstance.proxy;\n                const cache = '_pStores' in vm ? vm._pStores : (vm._pStores = {});\n                cache[id] = store;\n            }\n        }\n        // StoreGeneric cannot be casted towards Store\n        return store;\n    }\n    useStore.$id = id;\n    return useStore;\n}\n\nlet mapStoreSuffix = 'Store';\n/**\n * Changes the suffix added by `mapStores()`. Can be set to an empty string.\n * Defaults to `\"Store\"`. Make sure to extend the MapStoresCustomization\n * interface if you are using TypeScript.\n *\n * @param suffix - new suffix\n */\nfunction setMapStoreSuffix(suffix // could be 'Store' but that would be annoying for JS\n) {\n    mapStoreSuffix = suffix;\n}\n/**\n * Allows using stores without the composition API (`setup()`) by generating an\n * object to be spread in the `computed` field of a component. It accepts a list\n * of store definitions.\n *\n * @example\n * ```js\n * export default {\n *   computed: {\n *     // other computed properties\n *     ...mapStores(useUserStore, useCartStore)\n *   },\n *\n *   created() {\n *     this.userStore // store with id \"user\"\n *     this.cartStore // store with id \"cart\"\n *   }\n * }\n * ```\n *\n * @param stores - list of stores to map to an object\n */\nfunction mapStores(...stores) {\n    if ((process.env.NODE_ENV !== 'production') && Array.isArray(stores[0])) {\n        console.warn(`[]: Directly pass all stores to \"mapStores()\" without putting them in an array:\\n` +\n            `Replace\\n` +\n            `\\tmapStores([useAuthStore, useCartStore])\\n` +\n            `with\\n` +\n            `\\tmapStores(useAuthStore, useCartStore)\\n` +\n            `This will fail in production if not fixed.`);\n        stores = stores[0];\n    }\n    return stores.reduce((reduced, useStore) => {\n        // @ts-expect-error: $id is added by defineStore\n        reduced[useStore.$id + mapStoreSuffix] = function () {\n            return useStore(this.$pinia);\n        };\n        return reduced;\n    }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = function () {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key];\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function () {\n                const store = useStore(this.$pinia);\n                const storeKey = keysOrMapper[key];\n                // for some reason TS is unable to infer the type of storeKey to be a\n                // function\n                return typeof storeKey === 'function'\n                    ? storeKey.call(this, store)\n                    : // @ts-expect-error: FIXME: should work?\n                        store[storeKey];\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Alias for `mapState()`. You should use `mapState()` instead.\n * @deprecated use `mapState()` instead.\n */\nconst mapGetters = mapState;\n/**\n * Allows directly using actions from your store without using the composition\n * API (`setup()`) by generating an object to be spread in the `methods` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapActions(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key](...args);\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[keysOrMapper[key]](...args);\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapWritableState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[key];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[key] = value);\n                },\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[keysOrMapper[key]];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[keysOrMapper[key]] = value);\n                },\n            };\n            return reduced;\n        }, {});\n}\n\n/**\n * Creates an object of references with all the state, getters, and plugin-added\n * state properties of the store. Similar to `toRefs()` but specifically\n * designed for Pinia stores so methods and non reactive properties are\n * completely ignored.\n *\n * @param store - store to extract the refs from\n */\nfunction storeToRefs(store) {\n    // See https://github.com/vuejs/pinia/issues/852\n    // It's easier to just use toRefs() even if it includes more stuff\n    if (isVue2) {\n        // @ts-expect-error: toRefs include methods and others\n        return toRefs(store);\n    }\n    else {\n        const rawStore = toRaw(store);\n        const refs = {};\n        for (const key in rawStore) {\n            const value = rawStore[key];\n            // There is no native method to check for a computed\n            // https://github.com/vuejs/core/pull/4165\n            if (value.effect) {\n                // @ts-expect-error: too hard to type correctly\n                refs[key] =\n                    // ...\n                    computed({\n                        get: () => store[key],\n                        set(value) {\n                            store[key] = value;\n                        },\n                    });\n            }\n            else if (isRef(value) || isReactive(value)) {\n                // @ts-expect-error: the key is state or getter\n                refs[key] =\n                    // ---\n                    toRef(store, key);\n            }\n        }\n        return refs;\n    }\n}\n\n/**\n * Vue 2 Plugin that must be installed for pinia to work. Note **you don't need\n * this plugin if you are using Nuxt.js**. Use the `buildModule` instead:\n * https://pinia.vuejs.org/ssr/nuxt.html.\n *\n * @example\n * ```js\n * import Vue from 'vue'\n * import { PiniaVuePlugin, createPinia } from 'pinia'\n *\n * Vue.use(PiniaVuePlugin)\n * const pinia = createPinia()\n *\n * new Vue({\n *   el: '#app',\n *   // ...\n *   pinia,\n * })\n * ```\n *\n * @param _Vue - `Vue` imported from 'vue'.\n */\nconst PiniaVuePlugin = function (_Vue) {\n    // Equivalent of\n    // app.config.globalProperties.$pinia = pinia\n    _Vue.mixin({\n        beforeCreate() {\n            const options = this.$options;\n            if (options.pinia) {\n                const pinia = options.pinia;\n                // HACK: taken from provide(): https://github.com/vuejs/composition-api/blob/main/src/apis/inject.ts#L31\n                /* istanbul ignore else */\n                if (!this._provided) {\n                    const provideCache = {};\n                    Object.defineProperty(this, '_provided', {\n                        get: () => provideCache,\n                        set: (v) => Object.assign(provideCache, v),\n                    });\n                }\n                this._provided[piniaSymbol] = pinia;\n                // propagate the pinia instance in an SSR friendly way\n                // avoid adding it to nuxt twice\n                /* istanbul ignore else */\n                if (!this.$pinia) {\n                    this.$pinia = pinia;\n                }\n                pinia._a = this;\n                if (IS_CLIENT) {\n                    // this allows calling useStore() outside of a component setup after\n                    // installing pinia's plugin\n                    setActivePinia(pinia);\n                }\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(pinia._a, pinia);\n                }\n            }\n            else if (!this.$pinia && options.parent && options.parent.$pinia) {\n                this.$pinia = options.parent.$pinia;\n            }\n        },\n        destroyed() {\n            delete this._pStores;\n        },\n    });\n};\n\nexport { MutationType, PiniaVuePlugin, acceptHMRUpdate, createPinia, defineStore, disposePinia, getActivePinia, mapActions, mapGetters, mapState, mapStores, mapWritableState, setActivePinia, setMapStoreSuffix, shouldHydrate, skipHydrate, storeToRefs };\n","import {defineStore} from \"pinia\";\n\nexport default defineStore( \"userStore\", {\n\tstate: () => ( {\n\t\tuserRights: [],\n\t\tisLoading: false,\n\t\terror: null,\n\t} ),\n\n\tgetters: {\n\t\tcanManageComments: ( state ) => {\n\t\t\treturn state.userRights.includes( \"manage-inlinecomments\" );\n\t\t},\n\n\t\tcanAddComments: ( state ) => {\n\t\t\treturn state.userRights.includes( \"add-inlinecomments\" );\n\t\t},\n\t},\n\n\tactions: {\n\t\tasync fetchUserRights() {\n\t\t\tthis.isLoading = true;\n\t\t\tthis.error = null;\n\n\t\t\ttry {\n\t\t\t\tthis.userRights = await mw.user.getRights();\n\t\t\t} catch ( error ) {\n\t\t\t\tthis.error = error;\n\t\t\t\tconsole.error( \"userStore: Failed to fetch user rights:\", error );\n\t\t\t} finally {\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t},\n\n\t\tsetLoading( loading ) {\n\t\t\tthis.isLoading = loading;\n\t\t},\n\n\t\tsetError( error ) {\n\t\t\tthis.error = error;\n\t\t},\n\n\t\tclearError() {\n\t\t\tthis.error = null;\n\t\t},\n\t},\n} );\n","import {defineStore} from \"pinia\";\nimport useUserStore from \"./userStore.js\";\n\nexport const useAppStateStore = defineStore( \"appStore\", {\n\tstate: () => ( {\n\t\tisEnabled: false,\n\t} ),\n\tgetters: {\n\t\tgetIsEnabled: ( state ) => state.isEnabled,\n\t},\n\tactions: {\n\t\t/**\n\t\t * Update the button's UI based on the current state.\n\t\t * @returns {void}\n\t\t */\n\t\t_updateButtonUI() {\n\t\t\tconst toggleElement = document.getElementById( \"ca-comments\" );\n\t\t\tif ( !toggleElement ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.isEnabled ) {\n\t\t\t\t// Comments are enabled, button should offer to disable\n\t\t\t\ttoggleElement.classList.add( \"selected\" );\n\t\t\t\ttoggleElement.classList.remove( \"sic-enable-commenting\" );\n\t\t\t\ttoggleElement.classList.add( \"sic-disable-commenting\" );\n\t\t\t\t// Update body class\n\t\t\t\tdocument.body.classList.add( \"smartcomments-enabled\" );\n\t\t\t} else {\n\t\t\t\t// Comments are disabled, button should offer to enable\n\t\t\t\ttoggleElement.classList.remove( \"selected\" );\n\t\t\t\ttoggleElement.classList.remove( \"sic-disable-commenting\" );\n\t\t\t\ttoggleElement.classList.add( \"sic-enable-commenting\" );\n\t\t\t\t// Update body class\n\t\t\t\tdocument.body.classList.remove( \"smartcomments-enabled\" );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Initialize the store's state and related stores.\n\t\t * @returns {void}\n\t\t */\n\t\tasync initializeState() {\n\t\t\t// Initialize userStore\n\t\t\tconst userStore = useUserStore();\n\t\t\tawait userStore.fetchUserRights();\n\n\t\t\t// Initialize toggle button\n\t\t\tconst toggleElement = document.getElementById( \"ca-comments\" );\n\t\t\tif ( toggleElement ) {\n\t\t\t\t// Use arrow function for onclick to preserve 'this' context\n\t\t\t\ttoggleElement.onclick = () => this.toggleAppState();\n\t\t\t\t// Set initial button state based on initial isEnabled state\n\t\t\t\tthis._updateButtonUI();\n\t\t\t} else {\n\t\t\t\tconsole.error(\n\t\t\t\t\t'appStateStore: Toggle element \"ca-comments\" not found during initialization.',\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Enables the comments UI\n\t\t * @returns {void}\n\t\t */\n\t\tenableAppState() {\n\t\t\tif ( this.isEnabled ) return;\n\t\t\tthis.isEnabled = true;\n\t\t\tthis._updateButtonUI();\n\t\t},\n\n\t\t/**\n\t\t * Disables the comments UI\n\t\t * @returns {void}\n\t\t */\n\t\tdisableAppState() {\n\t\t\tif ( !this.isEnabled ) return;\n\t\t\tthis.isEnabled = false;\n\t\t\tthis._updateButtonUI();\n\t\t},\n\n\t\t/**\n\t\t * Toggles the comments UI\n\t\t * @returns {void}\n\t\t */\n\t\ttoggleAppState() {\n\t\t\tif ( this.isEnabled ) {\n\t\t\t\tthis.disableAppState();\n\t\t\t} else {\n\t\t\t\tthis.enableAppState();\n\t\t\t}\n\t\t},\n\t},\n} );\n","/**\n * Selection constants for SmartComments\n * Centralizes all magic numbers, timeouts, and configuration values\n */\n\nexport const SELECTION_TIMEOUTS = {\n\tTEXT_SELECTION_DELAY: 10,\n\tSCREENSHOT_TIMEOUT: 1000,\n\tVALIDATION_TIMEOUT: 1000,\n};\n\nexport const SELECTION_LIMITS = {\n\tMAX_TEXT_LENGTH: 10000,\n\tMAX_HTML_LENGTH: 50000,\n\tMIN_TEXT_LENGTH: 1,\n\tMAX_SEARCH_ITERATIONS: 1000,\n};\n\nexport const SELECTION_PATTERNS = {\n\tHTML_TAG_REGEX: /<[^>]*>/,\n\tLINEBREAK_REGEX: /[\\n\\r]/,\n\tWHITESPACE_CLEANUP: /[\\s\\uFEFF\\xA0]+/g,\n\tIMAGE_POSITION_PREFIX: \"img[\",\n\tSVG_POSITION_PREFIX: \"svg[\",\n\tPOSITION_SEPARATOR: \"|\",\n};\n\nexport const SELECTION_CLASSES = {\n\tTEMP_HIGHLIGHT: \"sc-selection-highlight-temp\",\n\tPERMANENT_HIGHLIGHT: \"sc-selection-highlight\",\n\tDYNAMIC_BLOCK: \"sc-dynamic-block\",\n\tIMAGE_BLOCK: \"sc-image-block\",\n\tCOMMENT_VIEW: \"smartcomment-comment-view\",\n\tCOMMENT_COMPONENT: \"sc-comment-component\",\n};\n\nexport const SELECTION_ERRORS = {\n\tRANGY_NOT_AVAILABLE: \"Rangy library not available\",\n\tCONTENT_ROOT_NOT_FOUND: \"MediaWiki content root not found\",\n\tSELECTION_EMPTY: \"Selection is empty or contains no searchable content\",\n\tSCREENSHOT_FAILED: \"Screenshot capture failed\",\n\tVALIDATION_FAILED: \"Selection validation failed\",\n\tPROCESSING_FAILED: \"Selection processing failed\",\n};\n\nexport const SCREENSHOT_CONFIG = {\n\tDEFAULT_QUALITY: 0.8,\n\tDEFAULT_FORMAT: \"image/png\",\n\tCAPTURE_DELAY: 10,\n\tRETRY_ATTEMPTS: 3,\n\tRETRY_DELAY: 500,\n\tFIXED_WIDTH: 500,\n\tMAX_HEIGHT: 150,\n\tMIN_HEIGHT: 50,\n};\n\nexport default {\n\tSELECTION_TIMEOUTS,\n\tSELECTION_LIMITS,\n\tSELECTION_PATTERNS,\n\tSELECTION_CLASSES,\n\tSELECTION_ERRORS,\n\tSCREENSHOT_CONFIG,\n};\n","import {\n\tSELECTION_CLASSES,\n\tSCREENSHOT_CONFIG,\n\tSELECTION_TIMEOUTS,\n} from \"../composables/selection/shared/SelectionConstants.js\";\n\n/**\n * Global constants for SmartComments frontend\n */\n\n// MediaWiki content selectors in order of preference\nexport const MEDIAWIKI_SELECTORS = {\n\tCONTENT_TEXT: \"mw-content-text\",\n\tCONTENT_TEXT_FULL: \"#mw-content-text\",\n\tPARSER_OUTPUT: \"#mw-content-text > .mw-parser-output\",\n\tBODY_CONTENT: \".mw-body-content\",\n\tCONTENT: \"#content\",\n\tBODY: \"body\",\n};\n\n// Ordered array of selectors to try when finding content root\nexport const CONTENT_ROOT_SELECTORS = [\n\tMEDIAWIKI_SELECTORS.PARSER_OUTPUT,\n\tMEDIAWIKI_SELECTORS.CONTENT_TEXT_FULL,\n\tMEDIAWIKI_SELECTORS.BODY_CONTENT,\n\tMEDIAWIKI_SELECTORS.CONTENT,\n\tMEDIAWIKI_SELECTORS.BODY,\n];\n\n// Selection validation codes - consolidated from SELECTION_ENUMS and SELECTION_VALIDATION_CODES\nexport const SELECTION_VALIDATION = {\n\tVALID: 0,\n\tALREADY_COMMENTED: 1,\n\tDYNAMIC_CONTENT: 2,\n\tLINEBREAKS: 3,\n\tEMPTY: 4,\n\tHTML_CONTENT: 5,\n\tUNKNOWN_ERROR: 99,\n};\n\n// Legacy aliases for backward compatibility\nexport const SELECTION_VALIDATION_CODES = SELECTION_VALIDATION;\nexport const SELECTION_ENUMS = {\n\tSELECTION_VALID: SELECTION_VALIDATION.VALID,\n\tINVALID_SELECTION_ALREADY_COMMENTED: SELECTION_VALIDATION.ALREADY_COMMENTED,\n\tINVALID_SELECTION_INCLUDES_DYNAMIC_CONTENT:\n\tSELECTION_VALIDATION.DYNAMIC_CONTENT,\n\tINVALID_SELECTION_CONTAINS_LINEBREAKS: SELECTION_VALIDATION.LINEBREAKS,\n\tINVALID_SELECTION_IS_EMPTY: SELECTION_VALIDATION.EMPTY,\n\tINVALID_SELECTION_CONTAINS_HTML: SELECTION_VALIDATION.HTML_CONTENT,\n\tUNKNOWN_ERROR: SELECTION_VALIDATION.UNKNOWN_ERROR,\n};\n\n// CSS classes used by SmartComments\nexport const SMARTCOMMENTS_CLASSES = {\n\tHIGHLIGHT_TEMP: \"sc-highlight-temp\",\n\tHIGHLIGHT: \"smartcomment-hl-\",\n\tDYNAMIC_BLOCK: \"sc-dynamic-block\",\n\tSELECTION_HIGHLIGHT: \"sc-selection-highlight\",\n\tCANVAS: \"sic-canvas\",\n\tSCREENSHOT_TARGET: \"sc-screenshot-target\",\n\tSVG_HOVER: \"sc-svg-hover\",\n};\n\n// Screenshot targeting configuration\nexport const SCREENSHOT_TARGETING = {\n\t// HTML elements that should be skipped for screenshot targeting\n\tSKIP_ELEMENTS: [\"img\", \"svg\", \"canvas\", \"video\", \"audio\", \"iframe\"],\n\n\t// Semantic parent elements that make good screenshot targets (in priority order)\n\tSEMANTIC_PARENTS: [\n\t\t\"li\",\n\t\t\"p\",\n\t\t\"div\",\n\t\t\"article\",\n\t\t\"section\",\n\t\t\"header\",\n\t\t\"footer\",\n\t\t\"nav\",\n\t\t\"main\",\n\t\t\"aside\",\n\t\t\"blockquote\",\n\t\t\"figure\",\n\t\t\"td\",\n\t\t\"th\",\n\t\t\"tr\",\n\t],\n\n\t// Minimum content length to consider an element substantial\n\tMIN_CONTENT_LENGTH: 50,\n\n\t// Classes that trigger screenshot target management\n\tTEMP_HIGHLIGHT_CLASSES: [\"sc-highlight-temp\", \"sc-selection-highlight-temp\"],\n};\n\n/**\n * Get the MediaWiki content root element\n * @returns {Element} - The content root element, fallback to body\n */\nexport function getMediaWikiContentRoot() {\n\t// First try the simple ID approach for screenshot use case\n\tconst contentTextElement = document.getElementById(\n\t\tMEDIAWIKI_SELECTORS.CONTENT_TEXT,\n\t);\n\tif ( contentTextElement ) {\n\t\treturn contentTextElement;\n\t}\n\n\t// Try different selectors in order of preference for selection use cases\n\tfor ( const selector of CONTENT_ROOT_SELECTORS ) {\n\t\tconst element = document.querySelector( selector );\n\t\tif ( element ) {\n\t\t\treturn element;\n\t\t}\n\t}\n\n\treturn document.body;\n}\n\nexport {SELECTION_TIMEOUTS, SELECTION_CLASSES, SCREENSHOT_CONFIG};\n\nexport default {\n\tMEDIAWIKI_SELECTORS,\n\tCONTENT_ROOT_SELECTORS,\n\tSELECTION_VALIDATION,\n\tSELECTION_VALIDATION_CODES,\n\tSELECTION_ENUMS,\n\tSMARTCOMMENTS_CLASSES,\n\tSCREENSHOT_TARGETING,\n\tgetMediaWikiContentRoot,\n\tSELECTION_CLASSES,\n\tSCREENSHOT_CONFIG,\n\tSELECTION_TIMEOUTS,\n};\n","/**\n * Selection utilities for SmartComments\n * Maintains compatibility with PHP backend expectations\n * Enhanced with security fixes and performance improvements\n */\nimport {useAppStateStore} from \"../../../store/appStateStore.js\";\nimport {\n\tCONTENT_ROOT_SELECTORS,\n\tSELECTION_VALIDATION,\n\tSMARTCOMMENTS_CLASSES,\n\tgetMediaWikiContentRoot,\n} from \"../../../utils/constants.js\";\nimport {\n\tSELECTION_PATTERNS,\n\tSELECTION_LIMITS,\n\tSELECTION_CLASSES,\n} from \"./SelectionConstants.js\";\n\n// Cache for frequently accessed elements\nconst elementCache = new Map();\nconst CACHE_TTL = 30000; // 30 seconds\n\n/**\n * Initialize rangy library if not already available\n * @returns {boolean} - Whether rangy was successfully initialized\n */\nexport function initializeRangy() {\n\t// Check if rangy is already initialized\n\tif ( window.rangy && window.rangy.initialized ) {\n\t\treturn true;\n\t}\n\n\t// Check if rangy is available\n\tif ( typeof window.rangy === \"undefined\" ) {\n\t\tconsole.error(\n\t\t\t\"Rangy library not found. Text selection may not work properly.\",\n\t\t);\n\t\treturn false;\n\t}\n\n\ttry {\n\t\t// Initialize rangy if not already initialized\n\t\tif ( !window.rangy.initialized && window.rangy.init ) {\n\t\t\twindow.rangy.init();\n\t\t}\n\t\treturn true;\n\t} catch ( error ) {\n\t\tconsole.error( \"Failed to initialize Rangy:\", error );\n\t\treturn false;\n\t}\n}\n\n/**\n * Validate selection based on the original validation rules\n * Enhanced with XSS protection and better validation\n * @param {*} selection - Rangy selection, HTML string, or DOM element\n * @returns {number} - Validation result code from SELECTION_VALIDATION\n */\nexport function validateSelectionContent( selection ) {\n\tlet selectionHTML;\n\n\tif ( typeof selection === \"string\" ) {\n\t\tselectionHTML = sanitizeHTMLForValidation( selection );\n\t} else if ( selection && typeof selection.toHtml === \"function\" ) {\n\t\tselectionHTML = sanitizeHTMLForValidation( selection.toHtml() );\n\t} else if ( selection && typeof selection.toString === \"function\" ) {\n\t\t// For rangy range objects, toString() gives the plain text\n\t\tselectionHTML = selection.toString();\n\n\t\t// For empty strings, check if it's a range around an element (like image)\n\t\tif (\n\t\t\t!selectionHTML &&\n\t\t\tselection.commonAncestorContainer &&\n\t\t\tselection.commonAncestorContainer.nodeType === Node.ELEMENT_NODE\n\t\t) {\n\t\t\tconst container = selection.commonAncestorContainer;\n\t\t\tif ( container.querySelector( \"img\" ) ) {\n\t\t\t\tselectionHTML = sanitizeHTMLForValidation( container.outerHTML );\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn SELECTION_VALIDATION.EMPTY;\n\t}\n\n\t// Check if empty (after sanitization)\n\tif ( !selectionHTML || selectionHTML.trim() === \"\" ) {\n\t\treturn SELECTION_VALIDATION.EMPTY;\n\t}\n\n\t// Check length limits\n\tif ( selectionHTML.length > SELECTION_LIMITS.MAX_HTML_LENGTH ) {\n\t\tconsole.warn( `Selection too long: ${selectionHTML.length} characters` );\n\t\treturn SELECTION_VALIDATION.HTML_CONTENT; // Treat as invalid HTML\n\t}\n\n\t// Check for existing comments\n\tif ( selectionHTML.includes( SELECTION_CLASSES.PERMANENT_HIGHLIGHT ) ) {\n\t\treturn SELECTION_VALIDATION.ALREADY_COMMENTED;\n\t}\n\n\t// Check for dynamic content with enhanced logic\n\tif ( containsDynamicContent( selectionHTML ) ) {\n\t\treturn SELECTION_VALIDATION.DYNAMIC_CONTENT;\n\t}\n\n\t// Check for line breaks (relevant for text selections)\n\tif ( selection.constructor && selection.constructor.name === \"Range\" ) {\n\t\tif ( SELECTION_PATTERNS.LINEBREAK_REGEX.test( selection.toString() ) ) {\n\t\t\treturn SELECTION_VALIDATION.LINEBREAKS;\n\t\t}\n\t}\n\n\t// Check for HTML content in text selections\n\tif ( selectionHTML && SELECTION_PATTERNS.HTML_TAG_REGEX.test( selectionHTML ) ) {\n\t\treturn SELECTION_VALIDATION.HTML_CONTENT;\n\t}\n\n\treturn SELECTION_VALIDATION.VALID;\n}\n\n/**\n * Sanitize HTML content for validation (removes dangerous content)\n * @param {string} html - Raw HTML content\n * @returns {string} - Sanitized HTML\n */\nexport function sanitizeHTMLForValidation( html ) {\n\tif ( typeof html !== \"string\" ) {\n\t\treturn \"\";\n\t}\n\n\t// Remove script tags and dangerous attributes\n\tlet sanitized = html\n\t\t.replace( /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, \"\" )\n\t\t.replace( /<style\\b[^<]*(?:(?!<\\/style>)<[^<]*)*<\\/style>/gi, \"\" )\n\t\t.replace( /javascript:/gi, \"\" )\n\t\t.replace( /on\\w+\\s*=/gi, \"\" )\n\t\t.replace( /vbscript:/gi, \"\" )\n\t\t.replace( /data:/gi, \"\" )\n\t\t.trim();\n\n\t// Limit length for performance\n\tif ( sanitized.length > SELECTION_LIMITS.MAX_HTML_LENGTH ) {\n\t\tsanitized =\n\t\t\tsanitized.substring( 0, SELECTION_LIMITS.MAX_HTML_LENGTH ) + \"...\";\n\t}\n\n\treturn sanitized;\n}\n\n/**\n * Check if HTML contains dynamic content that should not be selected\n * @param {string} html - HTML content to check\n * @returns {boolean} - Whether HTML contains problematic dynamic content\n */\nexport function containsDynamicContent( html ) {\n\tif ( !html ) return false;\n\n\t// Create a safe DOM parser for checking structure\n\tconst parser = new DOMParser();\n\tlet doc;\n\n\ttry {\n\t\tdoc = parser.parseFromString( `<div>${html}</div>`, \"text/html\" );\n\t} catch ( error ) {\n\t\tconsole.warn( \"Failed to parse HTML for dynamic content check:\", error );\n\t\treturn false;\n\t}\n\n\tconst container = doc.body.firstChild;\n\tif ( !container ) return false;\n\n\t// Check if the entire selection is a single dynamic block (allowed)\n\tif (\n\t\tcontainer.children.length === 1 &&\n\t\tcontainer.firstElementChild.classList.contains(\n\t\t\tSELECTION_CLASSES.DYNAMIC_BLOCK,\n\t\t)\n\t) {\n\t\treturn false;\n\t}\n\n\t// Check for embedded dynamic blocks (not allowed)\n\tconst dynamicBlocks = container.querySelectorAll(\n\t\t`.${SELECTION_CLASSES.DYNAMIC_BLOCK}`,\n\t);\n\treturn dynamicBlocks.length > 0;\n}\n\n/**\n * Format selection data for backend compatibility\n * @param {Object} selectionData - Raw selection data\n * @returns {Object} - Formatted selection data\n */\nexport function formatSelectionForBackend( selectionData ) {\n\tif ( !selectionData ) {\n\t\treturn null;\n\t}\n\n\tconst formatted = {\n\t\ttext: String( selectionData.text || \"\" ),\n\t\tindex: Number( selectionData.index ) || 0,\n\t\ttype: String( selectionData.type || \"text\" ),\n\t};\n\n\t// For text selections, include additional data that PHP expects\n\tif ( selectionData.type === \"text\" ) {\n\t\t// Format as \"text|index\" for compatibility with existing PHP code\n\t\tformatted.position = `${formatted.text}${SELECTION_PATTERNS.POSITION_SEPARATOR}${formatted.index}`;\n\t} else {\n\t\t// For non-text selections (images, dynamic blocks), just use the text\n\t\tformatted.position = formatted.text;\n\t}\n\n\treturn formatted;\n}\n\n/**\n * Parse selection data from backend format\n * @param {string} position - Backend position string\n * @returns {Object} - Parsed selection data\n */\nexport function parseSelectionFromBackend( position ) {\n\tif ( !position || typeof position !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Check if it's in \"text|index\" format\n\tconst separatorIndex = position.indexOf(\n\t\tSELECTION_PATTERNS.POSITION_SEPARATOR,\n\t);\n\tif ( separatorIndex !== -1 ) {\n\t\tconst parts = [\n\t\t\tposition.substring( 0, separatorIndex ),\n\t\t\tposition.substring( separatorIndex + 1 ),\n\t\t];\n\n\t\treturn {\n\t\t\ttext: parts[ 0 ],\n\t\t\tindex: parseInt( parts[ 1 ], 10 ) || 0,\n\t\t\ttype: \"text\",\n\t\t\tposition: position,\n\t\t};\n\t}\n\n\t// Check if it's an image selector\n\tif ( position.startsWith( SELECTION_PATTERNS.IMAGE_POSITION_PREFIX ) ) {\n\t\treturn {\n\t\t\ttext: position,\n\t\t\ttype: \"image\",\n\t\t\tposition: position,\n\t\t};\n\t}\n\n\t// Check if it's an SVG selector\n\tif ( position.startsWith( SELECTION_PATTERNS.SVG_POSITION_PREFIX ) ) {\n\t\treturn {\n\t\t\ttext: position,\n\t\t\ttype: \"svg\",\n\t\t\tposition: position,\n\t\t};\n\t}\n\n\t// For dynamic blocks or other selectors, return as-is\n\treturn {\n\t\ttext: position,\n\t\ttype: \"dynamic-block\",\n\t\tposition: position,\n\t};\n}\n\n/**\n * Clean selection HTML for display\n * @param {string} html - Raw HTML content\n * @returns {string} - Cleaned HTML\n */\nexport function cleanSelectionHTML( html ) {\n\tif ( !html ) return \"\";\n\n\treturn sanitizeHTMLForValidation( html ).replace( /\\s+/g, \" \" ).trim();\n}\n\n/**\n * Check if selection functionality is enabled\n * @returns {boolean} - Whether selection is enabled\n */\nexport function isSelectionEnabled() {\n\tconst store = useAppStateStore();\n\treturn store.isEnabled;\n}\n\n/**\n * Generate a simple hash for content\n * @param {string} content - Content to hash\n * @returns {string} - Hash string\n */\nexport function simpleHash( content ) {\n\tif ( !content ) return \"\";\n\n\tlet hash = 0;\n\tfor ( let i = 0; i < content.length; i++ ) {\n\t\tconst char = content.charCodeAt( i );\n\t\thash = ( hash << 5 ) - hash + char;\n\t\thash = hash & hash; // Convert to 32-bit integer\n\t}\n\n\t// Convert to positive hex string\n\treturn Math.abs( hash ).toString( 16 );\n}\n\n/**\n * Create a hash for an image based on its properties\n * @param {string} src - Image source URL\n * @param {number} width - Image width\n * @param {number} height - Image height\n * @returns {string} - Image hash\n */\nexport function createImageHash( src, width, height ) {\n\tif ( !src ) return \"\";\n\n\tconst normalized = src.replace( /^https?:\\/\\//, \"\" );\n\tconst dimensions = `${width || 0}x${height || 0}`;\n\treturn simpleHash( `${normalized}|${dimensions}` );\n}\n\n/**\n * Create a hash for an SVG element\n * @param {string} uniqueId - SVG unique ID\n * @param {string} href - SVG href attribute\n * @param {string} textContent - SVG text content\n * @returns {string} - SVG hash\n */\nexport function createSVGHash( uniqueId, href, textContent ) {\n\tconst parts = [uniqueId || \"\", href || \"\", ( textContent || \"\" ).trim()].filter(\n\t\tBoolean,\n\t);\n\n\treturn simpleHash( parts.join( \"|\" ) );\n}\n\n/**\n * Get the content root element\n * @returns {Element} - Content root element\n */\nexport function getContentRoot() {\n\t// Try cache first\n\tconst cached = getCachedElement( \"contentRoot\" );\n\tif ( cached ) return cached;\n\n\t// Find the root element\n\tconst root = getMediaWikiContentRoot();\n\tif ( !root ) {\n\t\tconsole.error( \"Could not find MediaWiki content root element\" );\n\t\treturn document.body;\n\t}\n\n\t// Cache the result\n\tsetCachedElement( \"contentRoot\", root );\n\treturn root;\n}\n\n/**\n * Set a cached element with TTL\n * @param {string} key - Cache key\n * @param {Element} element - Element to cache\n */\nexport function setCachedElement( key, element ) {\n\tif ( !key || !element ) return;\n\n\telementCache.set( key, {\n\t\telement,\n\t\ttimestamp: Date.now(),\n\t} );\n}\n\n/**\n * Get a cached element if not expired\n * @param {string} key - Cache key\n * @returns {Element|null} - Cached element or null\n */\nexport function getCachedElement( key ) {\n\tif ( !key ) return null;\n\n\tconst cached = elementCache.get( key );\n\tif ( !cached ) return null;\n\n\t// Check if expired\n\tif ( Date.now() - cached.timestamp > CACHE_TTL ) {\n\t\telementCache.delete( key );\n\t\treturn null;\n\t}\n\n\treturn cached.element;\n}\n\n/**\n * Clear the element cache\n */\nexport function clearElementCache() {\n\telementCache.clear();\n}\n\n/**\n * Clean text content for display\n * @param {string} text - Raw text content\n * @returns {string} - Cleaned text\n */\nexport function getCleanText( text ) {\n\tif ( !text ) return \"\";\n\n\treturn text.replace( SELECTION_PATTERNS.WHITESPACE_CLEANUP, \" \" ).trim();\n}\n\n/**\n * Check if SmartComments functionality is enabled\n * @returns {boolean} - Whether SmartComments is enabled\n */\nexport function isSmartCommentsEnabled() {\n\treturn isSelectionEnabled();\n}\n\n/**\n * Validate a URL string\n * @param {string} url - URL to validate\n * @returns {boolean} - Whether URL is valid\n */\nexport function isValidURL( url ) {\n\tif ( !url ) return false;\n\n\ttry {\n\t\tconst parsed = new URL( url );\n\t\treturn [\"http:\", \"https:\"].includes( parsed.protocol );\n\t} catch ( e ) {\n\t\treturn false;\n\t}\n}\n\n/**\n * Sanitize a string for use as an ID\n * @param {string} str - Input string\n * @returns {string} - Sanitized string\n */\nexport function sanitizeIdString( str ) {\n\tif ( !str ) return \"\";\n\n\treturn str\n\t\t.replace( /[^a-z0-9-]/gi, \"-\" )\n\t\t.replace( /-+/g, \"-\" )\n\t\t.toLowerCase();\n}\n\n/**\n * Get performance metrics for debugging\n * @returns {Object} - Performance metrics\n */\nexport function getPerformanceMetrics() {\n\treturn {\n\t\tcacheSize: elementCache.size,\n\t\tcacheKeys: Array.from( elementCache.keys() ),\n\t\ttimestamp: Date.now(),\n\t};\n}\n\nexport default {\n\tinitializeRangy,\n\tvalidateSelectionContent,\n\tsanitizeHTMLForValidation,\n\tcontainsDynamicContent,\n\tformatSelectionForBackend,\n\tparseSelectionFromBackend,\n\tcleanSelectionHTML,\n\tisSelectionEnabled,\n\tsimpleHash,\n\tcreateImageHash,\n\tcreateSVGHash,\n\tgetContentRoot,\n\tsetCachedElement,\n\tgetCachedElement,\n\tclearElementCache,\n\tgetCleanText,\n\tisSmartCommentsEnabled,\n\tisValidURL,\n\tsanitizeIdString,\n\tgetPerformanceMetrics,\n};\n","/**\n * Composable for accessing MediaWiki message strings\n * Provides a consistent interface for internationalization across Vue components\n */\n\n/**\n * Get a MediaWiki message with fallback\n * @param {string} key - The message key\n * @param {Array} params - Optional parameters for the message\n * @param {string} fallback - Optional fallback text if message is not found\n * @returns {string} The localized message\n */\nfunction getMessage( key, params = [], fallback = \"\" ) {\n\tif ( typeof mw !== \"undefined\" && mw.msg ) {\n\t\ttry {\n\t\t\tconst message = mw.msg( key, ...params );\n\t\t\t// Check if the message was found (MediaWiki returns the key if not found)\n\t\t\tif ( message !== key ) {\n\t\t\t\treturn message;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\tconsole.warn( `Error getting message for key \"${key}\":`, e );\n\t\t}\n\t}\n\n\t// Return fallback or the key itself as last resort\n\treturn fallback || key;\n}\n\n/**\n * Composable for using MediaWiki messages in Vue components\n * @returns {Object} Message helper functions\n */\nfunction useMessages() {\n\t/**\n\t * Get a message with parameters\n\t */\n\tconst msg = ( key, ...params ) => {\n\t\treturn getMessage( key, params );\n\t};\n\n\t/**\n\t * Get a message with fallback\n\t */\n\tconst msgWithFallback = ( key, fallback, ...params ) => {\n\t\treturn getMessage( key, params, fallback );\n\t};\n\n\t/**\n\t * Check if a message exists\n\t */\n\tconst hasMessage = ( key ) => {\n\t\tif ( typeof mw !== \"undefined\" && mw.msg ) {\n\t\t\ttry {\n\t\t\t\tconst message = mw.msg( key );\n\t\t\t\treturn message !== key;\n\t\t\t} catch ( e ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Common message getters for frequently used strings\n\t */\n\tconst messages = {\n\t\t// Buttons\n\t\tsave: () => msg( \"sic-button-save\" ),\n\t\tcancel: () => msg( \"sic-button-cancel\" ),\n\t\tclose: () => msg( \"sic-button-close\" ),\n\t\tcomplete: () => msg( \"sic-button-complete\" ),\n\t\tdelete: () => msg( \"sic-button-delete\" ),\n\t\tedit: () => msg( \"sic-button-edit\" ),\n\t\treopen: () => msg( \"sic-button-reopen\" ),\n\t\toverview: () => msg( \"sic-button-overview\" ),\n\t\tnewComment: () => msg( \"sic-button-new-comment\" ),\n\t\tnewReply: () => msg( \"sic-button-new-reply\" ),\n\n\t\t// Input labels\n\t\tcommentInput: () => msg( \"sic-input-newcomment\" ),\n\t\treplyInput: () => msg( \"sic-input-commenttext\" ),\n\n\t\t// Titles\n\t\tnewCommentTitle: () => msg( \"sic-title-new\" ),\n\n\t\t// Errors\n\t\terrorTitle: () => msg( \"sic-error-title\" ),\n\t\terrorEmpty: () => msg( \"sic-error-empty\" ),\n\t\tapiError: () => msg( \"api-error\" ),\n\n\t\t// Status messages\n\t\tjustNow: () => msg( \"sic-date-justnow\" ),\n\t\tcommentAdded: () => msg( \"sic-added-comment\" ),\n\t\tcommentAddedRefreshing: () => msg( \"sic-added-comment-refreshing\" ),\n\n\t\t// Special messages\n\t\tunlocalizedComment: () => msg( \"sic-unlocalized-comment\" ),\n\n\t\t// Selection errors\n\t\tselectionError1: () => msg( \"sic-selection-error-1\" ),\n\t\tselectionError2: () => msg( \"sic-selection-error-2\" ),\n\t\tselectionError3: () => msg( \"sic-selection-error-3\" ),\n\t\tselectionError4: () => msg( \"sic-selection-error-4\" ),\n\t\tselectionError5: () => msg( \"sic-selection-error-5\" ),\n\n\t\t// Reply form messages\n\t\treplyHeader: () => msg( \"sic-reply-header\" ),\n\t\treplyPlaceholder: () => msg( \"sic-reply-placeholder\" ),\n\t\treplySubmit: () => msg( \"sic-reply-submit\" ),\n\n\t\t// Comment actions\n\t\tpreviousComment: () => msg( \"sic-previous-comment\" ),\n\t\tnextComment: () => msg( \"sic-next-comment\" ),\n\t\tactions: () => msg( \"sic-actions\" ),\n\t\tmarkComplete: () => msg( \"sic-mark-complete\" ),\n\t\tmarkDelete: () => msg( \"sic-mark-delete\" ),\n\t\tviewOverview: () => msg( \"sic-view-overview\" ),\n\n\t\t// Link prevention messages\n\t\tlinkDisabledWarn: () => msg( \"sic-link-disabled-warn\" ),\n\t\tlinkCommentHighlightWarn: () => msg( \"sic-link-comment-highlight-warn\" ),\n\n\t\t// Generic error messages\n\t\tselectionGenericError: () => msg( \"sic-selection-generic-error\" ),\n\t};\n\n\treturn {\n\t\tmsg,\n\t\tmsgWithFallback,\n\t\thasMessage,\n\t\tmessages,\n\t};\n}\n\nexport default useMessages;\n","import {ref} from \"vue\";\nimport {\n\tformatSelectionForBackend,\n\tparseSelectionFromBackend,\n} from \"../selection/shared/SelectionUtils.js\";\nimport useMessages from \"../core/useMessages.js\";\n\n/**\n * @typedef {Object} Comment\n * @property {string} id - Unique identifier for the comment\n * @property {string} text - The content of the comment\n * @property {string} status - Current status of the comment\n * @property {string} user - The user who created the comment\n * @property {string} timestamp - When the comment was created\n * @property {string} [parentId] - Optional parent comment ID\n * @property {string} page - The page the comment belongs to\n */\n\n/**\n * @typedef {Object} ApiResponse\n * @property {string} success - Whether the operation was successful ('1' for success, '0' for failure)\n * @property {string} [message] - Optional message, especially for errors\n * @property {Object} [data] - Optional data returned from the API\n */\n\n/**\n * @typedef {Object} CommentsState\n * @property {Array<Comment>} comments - List of comments\n * @property {boolean} isLoading - Whether comments are being loaded\n * @property {Error|null} error - Any error that occurred\n * @property {boolean} blockedMode - Whether the wiki is in blocked mode\n */\n\n/**\n * Composable for managing smart comments\n * @returns {Object} Comments composable functions and state\n */\nfunction useComments() {\n\tconst comments = ref( [] );\n\tconst isLoading = ref( false );\n\tconst error = ref( null );\n\tconst blockedMode = ref( false );\n\n\tconst {messages} = useMessages();\n\n\t/**\n\t * Make API requests to the MediaWiki API\n\t * @param {string} method - The method to call\n\t * @param {Object} params - Parameters for the API request\n\t * @returns {Promise<Object>} - The API response\n\t */\n\tconst apiRequest = async ( method, params = {} ) => {\n\t\tconst api = new mw.Api();\n\n\t\tconst requestData = {\n\t\t\taction: \"smartcomments\",\n\t\t\tmethod: method,\n\t\t\tformat: \"json\",\n\t\t\t...params,\n\t\t};\n\n\t\ttry {\n\t\t\tconst result = await api.post( requestData );\n\t\t\treturn result;\n\t\t} catch ( err ) {\n\t\t\tconsole.error( \"API request failed:\", err );\n\t\t\tthrow err;\n\t\t}\n\t};\n\n\t/**\n\t * Fetch comments for the current page\n\t * @returns {Promise<void>}\n\t */\n\tconst fetchComments = async () => {\n\t\tisLoading.value = true;\n\t\terror.value = null;\n\n\t\ttry {\n\t\t\tconst data = await apiRequest( \"lista\", {\n\t\t\t\tpage: mw.config.get( \"wgPageName\" ),\n\t\t\t\tstatus: \"open\",\n\t\t\t} );\n\n\t\t\tconst rawAnchors = data.smartcomments?.anchors || [];\n\n\t\t\tcomments.value = rawAnchors\n\t\t\t\t.map( ( anchor ) => {\n\t\t\t\t\tconst processedAnchor = {...anchor};\n\t\t\t\t\tconst selectionDetails = parseSelectionFromBackend( anchor.pos );\n\n\t\t\t\t\tif ( selectionDetails ) {\n\t\t\t\t\t\tprocessedAnchor.parsedSelection = selectionDetails;\n\n\t\t\t\t\t\tif ( selectionDetails.type === \"text\" ) {\n\t\t\t\t\t\t\tprocessedAnchor.highlight_type = \"wordIndex\";\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tselectionDetails.type === \"image\" ||\n\t\t\t\t\t\t\tselectionDetails.type === \"dynamic-block\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tprocessedAnchor.highlight_type = \"selector\";\n\t\t\t\t\t\t} else if ( selectionDetails.type === \"svg\" ) {\n\t\t\t\t\t\t\tprocessedAnchor.highlight_type = \"svg\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tprocessedAnchor.highlight_type = \"unknown\";\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\"fetchComments: Unknown highlight type for anchor:\",\n\t\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprocessedAnchor.highlight_type = \"unknown\";\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\"fetchComments: Could not parse backend position string for anchor:\",\n\t\t\t\t\t\t\tanchor,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn processedAnchor;\n\t\t\t\t} )\n\t\t\t\t.filter( ( anchor ) => anchor.highlight_type !== \"unknown\" );\n\n\t\t\tisLoading.value = false;\n\t\t} catch ( err ) {\n\t\t\terror.value = err;\n\t\t\tisLoading.value = false;\n\t\t\tconsole.error( \"Error fetching comments:\", err );\n\t\t}\n\t};\n\n\t/**\n\t * Get a specific comment by ID\n\t * @param {string|number} commentId - The ID of the comment\n\t * @param {string} group - Group parameter\n\t * @returns {Promise<Comment|null>} - The comment data\n\t */\n\tconst getComment = async ( commentId, group ) => {\n\t\ttry {\n\t\t\tconst data = await apiRequest( \"get\", {\n\t\t\t\tcomment: commentId,\n\t\t\t} );\n\n\t\t\treturn data.smartcomments?.comment || null;\n\t\t} catch ( err ) {\n\t\t\terror.value = err;\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t/**\n\t * Create a new comment\n\t * @param {string} text - The comment text\n\t * @param {Object} selectionData - Optional selection data (if not provided, will use current selection)\n\t * @returns {Promise<ApiResponse>} - The result of the operation\n\t */\n\tconst saveComment = async ( text, selectionData ) => {\n\t\tisLoading.value = true;\n\t\terror.value = null;\n\n\t\tif ( !text || text.trim() === \"\" ) {\n\t\t\tisLoading.value = false;\n\t\t\treturn {success: \"0\", message: messages.errorEmpty()};\n\t\t}\n\n\t\t// For replies, we only need parentId, not selection text\n\t\tconst isReply = selectionData && selectionData.parentId;\n\n\t\tif ( !isReply && ( !selectionData || !selectionData.text ) ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"saveComment called without valid selectionData. This path might be deprecated or require legacy handling.\",\n\t\t\t);\n\t\t\tisLoading.value = false;\n\t\t\treturn {success: \"0\", message: messages.selectionError5()};\n\t\t}\n\n\t\ttry {\n\t\t\tlet posString = \"\";\n\n\t\t\t// For replies, we don't need position data\n\t\t\tif ( !isReply ) {\n\t\t\t\tconst formattedSelection = formatSelectionForBackend( selectionData );\n\t\t\t\tposString = formattedSelection.position;\n\t\t\t}\n\n\t\t\tconst params = {\n\t\t\t\tpos: posString,\n\t\t\t\tcomment: selectionData?.parentId || \"\",\n\t\t\t\ttext: text,\n\t\t\t\tpage: mw.config.get( \"wgPageName\" ),\n\t\t\t\timage: selectionData?.image || \"\",\n\t\t\t};\n\n\t\t\tconst data = await apiRequest( \"new\", params );\n\n\t\t\tisLoading.value = false;\n\t\t\tif ( data && data.smartcomments && data.smartcomments.success === \"1\" ) {\n\t\t\t\treturn data.smartcomments;\n\t\t\t} else if ( data && data.smartcomments ) {\n\t\t\t\treturn data.smartcomments;\n\t\t\t} else {\n\t\t\t\tconsole.error( \"saveComment: Unexpected API response format:\", data );\n\t\t\t\treturn {success: \"0\", message: messages.apiError()};\n\t\t\t}\n\t\t} catch ( err ) {\n\t\t\tisLoading.value = false;\n\t\t\terror.value = err;\n\t\t\tconsole.error( \"Error saving comment:\", err );\n\t\t\treturn {success: \"0\", message: messages.apiError()};\n\t\t}\n\t};\n\n\t/**\n\t * Update an existing comment\n\t * @param {string|number} commentId - The ID of the comment\n\t * @param {string} status - The new status\n\t * @param {string} text - The updated text\n\t * @param {string} page - Optional page name\n\t * @returns {Promise<ApiResponse>} - The result of the operation\n\t */\n\tconst updateComment = async (\n\t\tcommentId,\n\t\tstatus,\n\t\ttext,\n\t\tpage = mw.config.get( \"wgPageName\" ),\n\t) => {\n\t\ttry {\n\t\t\tconst data = await apiRequest( \"update\", {\n\t\t\t\tcomment: commentId,\n\t\t\t\tstatus,\n\t\t\t\ttext,\n\t\t\t\tpage,\n\t\t\t} );\n\n\t\t\treturn (\n\t\t\t\tdata.smartcomments || {success: \"0\", message: messages.apiError()}\n\t\t\t);\n\t\t} catch ( err ) {\n\t\t\terror.value = err;\n\t\t\treturn {success: \"0\", message: messages.apiError()};\n\t\t}\n\t};\n\n\t/**\n\t * Delete a comment\n\t * @param {string|number} commentId - The ID of the comment\n\t * @param {string} page - Optional page name\n\t * @returns {Promise<ApiResponse>} - The result of the operation\n\t */\n\tconst deleteComment = async (\n\t\tcommentId,\n\t\tpage = mw.config.get( \"wgPageName\" ),\n\t) => {\n\t\ttry {\n\t\t\tconst data = await apiRequest( \"delete\", {\n\t\t\t\tcomment: commentId,\n\t\t\t\tpage,\n\t\t\t} );\n\n\t\t\treturn (\n\t\t\t\tdata.smartcomments || {success: \"0\", message: messages.apiError()}\n\t\t\t);\n\t\t} catch ( err ) {\n\t\t\terror.value = err;\n\t\t\treturn {success: \"0\", message: messages.apiError()};\n\t\t}\n\t};\n\n\t/**\n\t * Check if the wiki is in blocked mode\n\t * @returns {Promise<void>}\n\t */\n\tconst checkBlockedMode = async () => {\n\t\ttry {\n\t\t\tconst data = await apiRequest( \"blockedmode\" );\n\t\t\tblockedMode.value = data.smartcomments?.message === \"true\";\n\t\t} catch ( err ) {\n\t\t\terror.value = err;\n\t\t}\n\t};\n\n\t/**\n\t * Check if a comment can be saved\n\t * @returns {boolean} - Whether the comment can be saved\n\t */\n\tconst canSaveComment = () => {\n\t\tconst selection = window.getSelection();\n\t\treturn selection && selection.toString().length > 0;\n\t};\n\n\treturn {\n\t\tcomments,\n\t\tisLoading,\n\t\terror,\n\t\tblockedMode,\n\t\tfetchComments,\n\t\tgetComment,\n\t\tsaveComment,\n\t\tupdateComment,\n\t\tdeleteComment,\n\t\tcheckBlockedMode,\n\t\tcanSaveComment,\n\t};\n}\n\nexport default useComments;\n","/**\n * Centralized error handling for highlight operations\n * Provides consistent error handling and logging across all highlight types\n */\n\n/**\n * Error types for highlight operations\n */\nexport const ERROR_TYPES = {\n\tVALIDATION: \"VALIDATION_ERROR\",\n\tDOM_MANIPULATION: \"DOM_MANIPULATION_ERROR\",\n\tRANGY: \"RANGY_ERROR\",\n\tSELECTOR: \"SELECTOR_ERROR\",\n\tLISTENER: \"LISTENER_ERROR\",\n\tCLEANUP: \"CLEANUP_ERROR\",\n};\n\n/**\n * Error severity levels\n */\nexport const SEVERITY_LEVELS = {\n\tLOW: \"low\",\n\tMEDIUM: \"medium\",\n\tHIGH: \"high\",\n\tCRITICAL: \"critical\",\n};\n\n/**\n * Base error class for highlight operations\n */\nexport class HighlightError extends Error {\n\tconstructor( message, type, severity = SEVERITY_LEVELS.MEDIUM, context = {} ) {\n\t\tsuper( message );\n\t\tthis.name = \"HighlightError\";\n\t\tthis.type = type;\n\t\tthis.severity = severity;\n\t\tthis.context = context;\n\t\tthis.timestamp = new Date().toISOString();\n\t}\n}\n\n/**\n * Error handler class for managing highlight errors\n */\nexport class HighlightErrorHandler {\n\tconstructor() {\n\t\tthis.errorLog = [];\n\t\tthis.maxLogSize = 100; // Keep last 100 errors\n\t}\n\n\t/**\n\t * Handle validation errors\n\t * @param {string} message - Error message\n\t * @param {Object} context - Error context\n\t * @throws {HighlightError}\n\t */\n\thandleValidationError( message, context = {} ) {\n\t\tconst error = new HighlightError(\n\t\t\tmessage,\n\t\t\tERROR_TYPES.VALIDATION,\n\t\t\tSEVERITY_LEVELS.HIGH,\n\t\t\tcontext,\n\t\t);\n\t\tthis._logError( error );\n\t\tthrow error;\n\t}\n\n\t/**\n\t * Handle DOM manipulation errors (non-fatal)\n\t * @param {string} message - Error message\n\t * @param {Object} context - Error context\n\t * @param {Error} [originalError] - Original error if available\n\t */\n\thandleDOMError( message, context = {}, originalError = null ) {\n\t\tconst error = new HighlightError(\n\t\t\tmessage,\n\t\t\tERROR_TYPES.DOM_MANIPULATION,\n\t\t\tSEVERITY_LEVELS.MEDIUM,\n\t\t\t{...context, originalError: originalError?.message},\n\t\t);\n\t\tthis._logError( error );\n\t\tconsole.warn(\n\t\t\t`HighlightError [${error.type}]:`,\n\t\t\terror.message,\n\t\t\terror.context,\n\t\t);\n\t}\n\n\t/**\n\t * Handle Rangy library errors\n\t * @param {string} message - Error message\n\t * @param {Object} context - Error context\n\t * @param {Error} [originalError] - Original error if available\n\t */\n\thandleRangyError( message, context = {}, originalError = null ) {\n\t\tconst error = new HighlightError(\n\t\t\tmessage,\n\t\t\tERROR_TYPES.RANGY,\n\t\t\tSEVERITY_LEVELS.HIGH,\n\t\t\t{...context, originalError: originalError?.message},\n\t\t);\n\t\tthis._logError( error );\n\t\tconsole.error(\n\t\t\t`HighlightError [${error.type}]:`,\n\t\t\terror.message,\n\t\t\terror.context,\n\t\t);\n\t}\n\n\t/**\n\t * Handle CSS selector errors\n\t * @param {string} selector - The problematic selector\n\t * @param {Object} context - Error context\n\t * @param {Error} [originalError] - Original error if available\n\t */\n\thandleSelectorError( selector, context = {}, originalError = null ) {\n\t\tconst error = new HighlightError(\n\t\t\t`Invalid or dangerous CSS selector: ${selector}`,\n\t\t\tERROR_TYPES.SELECTOR,\n\t\t\tSEVERITY_LEVELS.HIGH,\n\t\t\t{...context, selector, originalError: originalError?.message},\n\t\t);\n\t\tthis._logError( error );\n\t\tconsole.error(\n\t\t\t`HighlightError [${error.type}]:`,\n\t\t\terror.message,\n\t\t\terror.context,\n\t\t);\n\t}\n\n\t/**\n\t * Handle event listener errors\n\t * @param {string} message - Error message\n\t * @param {Object} context - Error context\n\t * @param {Error} [originalError] - Original error if available\n\t */\n\thandleListenerError( message, context = {}, originalError = null ) {\n\t\tconst error = new HighlightError(\n\t\t\tmessage,\n\t\t\tERROR_TYPES.LISTENER,\n\t\t\tSEVERITY_LEVELS.MEDIUM,\n\t\t\t{...context, originalError: originalError?.message},\n\t\t);\n\t\tthis._logError( error );\n\t\tconsole.warn(\n\t\t\t`HighlightError [${error.type}]:`,\n\t\t\terror.message,\n\t\t\terror.context,\n\t\t);\n\t}\n\n\t/**\n\t * Handle cleanup errors (usually non-fatal)\n\t * @param {string} message - Error message\n\t * @param {Object} context - Error context\n\t * @param {Error} [originalError] - Original error if available\n\t */\n\thandleCleanupError( message, context = {}, originalError = null ) {\n\t\tconst error = new HighlightError(\n\t\t\tmessage,\n\t\t\tERROR_TYPES.CLEANUP,\n\t\t\tSEVERITY_LEVELS.LOW,\n\t\t\t{...context, originalError: originalError?.message},\n\t\t);\n\t\tthis._logError( error );\n\t\tconsole.warn(\n\t\t\t`HighlightError [${error.type}]:`,\n\t\t\terror.message,\n\t\t\terror.context,\n\t\t);\n\t}\n\n\t/**\n\t * Validate highlight data and throw if invalid\n\t * @param {Object} highlightData - The highlight data to validate\n\t * @throws {HighlightError}\n\t */\n\tvalidateHighlightData( highlightData ) {\n\t\tif ( !highlightData ) {\n\t\t\tthis.handleValidationError( \"Highlight data is null or undefined\" );\n\t\t}\n\n\t\tif ( !highlightData.type ) {\n\t\t\tthis.handleValidationError( \"Highlight data missing type\", {\n\t\t\t\thighlightData,\n\t\t\t} );\n\t\t}\n\n\t\tif ( !highlightData.comment ) {\n\t\t\tthis.handleValidationError( \"Highlight data missing comment\", {\n\t\t\t\thighlightData,\n\t\t\t} );\n\t\t}\n\n\t\tif ( !highlightData.comment.data_id ) {\n\t\t\tthis.handleValidationError( \"Comment missing data_id\", {\n\t\t\t\thighlightData,\n\t\t\t\tcomment: highlightData.comment,\n\t\t\t} );\n\t\t}\n\n\t\t// Type-specific validations\n\t\tswitch ( highlightData.type ) {\n\t\t\tcase \"wordIndex\":\n\t\t\t\tif ( !highlightData.comment.pos ) {\n\t\t\t\t\tthis.handleValidationError( \"Text highlight missing pos data\", {\n\t\t\t\t\t\thighlightData,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"selector\":\n\t\t\t\tif ( !highlightData.comment.pos ) {\n\t\t\t\t\tthis.handleValidationError( \"Selector highlight missing pos data\", {\n\t\t\t\t\t\thighlightData,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"svg\":\n\t\t\t\tif (\n\t\t\t\t\t!highlightData.comment.pos ||\n\t\t\t\t\t!highlightData.comment.pos.startsWith( \"svg[\" )\n\t\t\t\t) {\n\t\t\t\t\tthis.handleValidationError(\n\t\t\t\t\t\t\"SVG highlight missing or invalid pos data\",\n\t\t\t\t\t\t{highlightData},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.handleValidationError(\n\t\t\t\t\t`Unknown highlight type: ${highlightData.type}`,\n\t\t\t\t\t{highlightData},\n\t\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Validate selection highlight data\n\t * @param {Object} highlightData - The highlight data to validate\n\t * @throws {HighlightError}\n\t */\n\tvalidateSelectionHighlightData( highlightData ) {\n\t\tif ( !highlightData ) {\n\t\t\tthis.handleValidationError(\n\t\t\t\t\"Selection highlight data is null or undefined\",\n\t\t\t);\n\t\t}\n\n\t\tif ( !highlightData.text ) {\n\t\t\tthis.handleValidationError( \"Selection highlight missing text\", {\n\t\t\t\thighlightData,\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof highlightData.index !== \"number\" ) {\n\t\t\tthis.handleValidationError(\n\t\t\t\t\"Selection highlight missing or invalid index\",\n\t\t\t\t{highlightData},\n\t\t\t);\n\t\t}\n\n\t\tif ( !highlightData.type ) {\n\t\t\tthis.handleValidationError( \"Selection highlight missing type\", {\n\t\t\t\thighlightData,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Safely execute a function with error handling\n\t * @param {Function} fn - Function to execute\n\t * @param {string} operation - Operation name for error context\n\t * @param {Object} context - Additional context\n\t * @returns {*} - Function result or null if error\n\t */\n\tsafeExecute( fn, operation, context = {} ) {\n\t\ttry {\n\t\t\treturn fn();\n\t\t} catch ( error ) {\n\t\t\tconst errorContext = {\n\t\t\t\toperation,\n\t\t\t\t...context,\n\t\t\t\toriginalError: error?.message,\n\t\t\t};\n\t\t\tthis.handleDOMError( `Error during ${operation}`, errorContext, error );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get error statistics\n\t * @returns {Object} - Error statistics\n\t */\n\tgetErrorStats() {\n\t\tconst stats = {\n\t\t\ttotal: this.errorLog.length,\n\t\t\tbyType: {},\n\t\t\tbySeverity: {},\n\t\t};\n\n\t\tthis.errorLog.forEach( ( error ) => {\n\t\t\tstats.byType[ error.type ] = ( stats.byType[ error.type ] || 0 ) + 1;\n\t\t\tstats.bySeverity[ error.severity ] =\n\t\t\t\t( stats.bySeverity[ error.severity ] || 0 ) + 1;\n\t\t} );\n\n\t\treturn stats;\n\t}\n\n\t/**\n\t * Clear the error log\n\t */\n\tclearErrorLog() {\n\t\tthis.errorLog = [];\n\t}\n\n\t/**\n\t * Log an error to the internal log\n\t * @param {HighlightError} error - Error to log\n\t * @private\n\t */\n\t_logError( error ) {\n\t\tthis.errorLog.push( error );\n\t\tif ( this.errorLog.length > this.maxLogSize ) {\n\t\t\tthis.errorLog.shift(); // Remove oldest error\n\t\t}\n\t}\n}\n\n// Create and export a singleton instance\nexport const errorHandler = new HighlightErrorHandler();\n\nexport default {\n\tERROR_TYPES,\n\tSEVERITY_LEVELS,\n\tHighlightError,\n\tHighlightErrorHandler,\n\terrorHandler,\n};\n","/**\n * Shared utilities for highlight operations\n * Consolidates common DOM operations and reduces code duplication\n */\n\n/**\n * Constants for highlight operations\n */\nexport const HIGHLIGHT_CLASS_PREFIX = \"smartcomment-hl-\";\nexport const DATA_COMMENT_ID_ATTR = \"data-comment-id\";\nexport const DATA_SVG_ID_ATTR = \"data-svg-id\";\n\n/**\n * Sanitize and validate comment ID\n * @param {string|number} commentId - The comment ID to sanitize\n * @returns {string} - Sanitized comment ID\n * @throws {Error} - If comment ID is invalid\n */\nexport function sanitizeCommentId( commentId ) {\n\tif ( commentId === null || commentId === undefined ) {\n\t\tthrow new Error( \"Comment ID cannot be null or undefined\" );\n\t}\n\n\tconst sanitized = String( commentId ).replace( /[^a-zA-Z0-9-_]/g, \"\" );\n\tif ( !sanitized ) {\n\t\tthrow new Error( \"Comment ID must contain valid characters\" );\n\t}\n\n\treturn sanitized;\n}\n\n/**\n * Generate unique highlight class name\n * @param {string|number} commentId - The comment ID\n * @returns {string} - Unique highlight class name\n */\nexport function generateHighlightClass( commentId ) {\n\treturn `${HIGHLIGHT_CLASS_PREFIX}${sanitizeCommentId( commentId )}`.trim();\n}\n\n/**\n * Validate CSS selector for security\n * @param {string} selector - CSS selector to validate\n * @returns {boolean} - True if selector is safe\n */\nexport function isValidSelector( selector ) {\n\ttry {\n\t\t// Test if it's a valid CSS selector by attempting to use it\n\t\tdocument.querySelector( selector );\n\n\t\t// Additional security checks\n\t\tconst dangerous = [\"javascript:\", \"expression(\", \"url(\", \"@import\"];\n\t\tconst lowerSelector = selector.toLowerCase();\n\n\t\treturn !dangerous.some( ( danger ) => lowerSelector.includes( danger ) );\n\t} catch ( e ) {\n\t\treturn false;\n\t}\n}\n\n/**\n * Check if element has other SmartComment highlight classes\n * @param {Element} element - The element to check\n * @param {string} excludeClass - Class to exclude from check\n * @returns {boolean} - True if element has other SmartComment classes\n */\nexport function hasOtherSmartCommentClasses( element, excludeClass ) {\n\treturn Array.from( element.classList ).some(\n\t\t( cls ) => cls.startsWith( HIGHLIGHT_CLASS_PREFIX ) && cls !== excludeClass,\n\t);\n}\n\n/**\n * Remove highlight class and cleanup attributes\n * @param {Element} element - The element to clean up\n * @param {string} highlightClass - The highlight class to remove\n */\nexport function cleanupHighlightElement( element, highlightClass ) {\n\telement.classList.remove( highlightClass );\n\n\tif ( !hasOtherSmartCommentClasses( element, highlightClass ) ) {\n\t\telement.removeAttribute( DATA_COMMENT_ID_ATTR );\n\n\t\t// Remove data-svg-id only if specified\n\t\tif ( element.hasAttribute( DATA_SVG_ID_ATTR ) ) {\n\t\t\telement.removeAttribute( DATA_SVG_ID_ATTR );\n\t\t}\n\t}\n}\n\n/**\n * Find all highlighted elements for a comment\n * @param {Element} scopeElement - The scope to search within\n * @param {string|number} commentId - The comment ID\n * @returns {NodeList} - Found highlighted elements\n */\nexport function findHighlightedElements( scopeElement, commentId ) {\n\tconst highlightClass = generateHighlightClass( commentId );\n\treturn scopeElement.querySelectorAll( `.${highlightClass}` );\n}\n\n/**\n * Unwrap empty SPAN elements safely\n * @param {Element} spanElement - The SPAN element to potentially unwrap\n */\nexport function unwrapEmptySpan( spanElement ) {\n\tif ( spanElement.tagName !== \"SPAN\" ) return;\n\n\tconst shouldUnwrap =\n\t\tspanElement.classList.length === 0 &&\n\t\t!spanElement.hasAttributes() &&\n\t\tspanElement.innerHTML === spanElement.textContent;\n\n\tif ( shouldUnwrap ) {\n\t\tconst parent = spanElement.parentNode;\n\t\tif ( parent ) {\n\t\t\twhile ( spanElement.firstChild ) {\n\t\t\t\tparent.insertBefore( spanElement.firstChild, spanElement );\n\t\t\t}\n\t\t\tparent.removeChild( spanElement );\n\t\t\ttry {\n\t\t\t\tparent.normalize();\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.warn( \"Error normalizing parent after span unwrap:\", e );\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Set element attributes safely with validation\n * @param {Element} element - The element to modify\n * @param {string|number} commentId - The comment ID\n * @param {string} [svgId] - Optional SVG ID\n */\nexport function setElementAttributes( element, commentId, svgId = null ) {\n\tconst sanitizedId = sanitizeCommentId( commentId );\n\telement.setAttribute( DATA_COMMENT_ID_ATTR, sanitizedId );\n\n\tif ( svgId ) {\n\t\telement.setAttribute( DATA_SVG_ID_ATTR, svgId );\n\t}\n}\n\n/**\n * Batch remove elements with specific highlight class\n * @param {Element} scopeElement - The scope to search within\n * @param {string} highlightClass - The highlight class to remove\n * @param {Function} [customCleanup] - Optional custom cleanup function\n */\nexport function batchRemoveHighlights(\n\tscopeElement,\n\thighlightClass,\n\tcustomCleanup = null,\n) {\n\tconst elements = scopeElement.querySelectorAll( `.${highlightClass}` );\n\n\telements.forEach( ( element ) => {\n\t\tif ( customCleanup && typeof customCleanup === \"function\" ) {\n\t\t\tcustomCleanup( element, highlightClass );\n\t\t} else {\n\t\t\tcleanupHighlightElement( element, highlightClass );\n\t\t}\n\t} );\n}\n\nexport default {\n\t// Constants\n\tHIGHLIGHT_CLASS_PREFIX,\n\tDATA_COMMENT_ID_ATTR,\n\tDATA_SVG_ID_ATTR,\n\n\t// Validation functions\n\tsanitizeCommentId,\n\tisValidSelector,\n\n\t// Class and attribute management\n\tgenerateHighlightClass,\n\thasOtherSmartCommentClasses,\n\tcleanupHighlightElement,\n\tsetElementAttributes,\n\n\t// Element queries and cleanup\n\tfindHighlightedElements,\n\tunwrapEmptySpan,\n\tbatchRemoveHighlights,\n};\n","import {ref} from \"vue\";\nimport {errorHandler} from \"./shared/HighlightErrorHandler.js\";\nimport {sanitizeCommentId} from \"./shared/HighlightUtils.js\";\n\n/**\n * Composable for managing highlight data structures and CRUD operations\n * This handles the reactive highlight data array and provides validation\n */\nexport function useHighlightData() {\n\tconst highlightedAnchors = ref( [] );\n\n\t// Function to add a new highlight instruction\n\tconst addHighlight = ( type, commentData ) => {\n\t\ttry {\n\t\t\t// Basic validation for type\n\t\t\tif ( !type || typeof type !== \"string\" ) {\n\t\t\t\terrorHandler.handleValidationError(\n\t\t\t\t\t\"Highlight type must be a valid string\",\n\t\t\t\t\t{type, commentData},\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Basic validation for commentData\n\t\t\tif ( !commentData || typeof commentData !== \"object\" ) {\n\t\t\t\terrorHandler.handleValidationError(\n\t\t\t\t\t\"Comment data must be a valid object\",\n\t\t\t\t\t{type, commentData},\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For temporary highlights during selection, we don't need full validation\n\t\t\t// Only validate data_id if it exists (for saved highlights)\n\t\t\tif ( commentData.data_id !== undefined && commentData.data_id !== null ) {\n\t\t\t\ttry {\n\t\t\t\t\tsanitizeCommentId( commentData.data_id );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\terrorHandler.handleValidationError(\n\t\t\t\t\t\t\"Invalid comment ID\",\n\t\t\t\t\t\t{type, commentData},\n\t\t\t\t\t\terror,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add the highlight to the array\n\t\t\thighlightedAnchors.value.push( {\n\t\t\t\ttype: type,\n\t\t\t\tcomment: commentData,\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\t// Log error but don't throw - this allows the selection process to continue\n\t\t\terrorHandler.handleDOMError(\n\t\t\t\t\"Failed to add highlight\",\n\t\t\t\t{type, commentData},\n\t\t\t\terror,\n\t\t\t);\n\t\t}\n\t};\n\n\t// Function to clear a specific highlight (by comment data_id)\n\tconst removeHighlight = ( commentId ) => {\n\t\ttry {\n\t\t\tconst sanitizedId = sanitizeCommentId( commentId );\n\t\t\thighlightedAnchors.value = highlightedAnchors.value.filter(\n\t\t\t\t( h ) => h.comment.data_id !== sanitizedId,\n\t\t\t);\n\t\t} catch ( error ) {\n\t\t\terrorHandler.handleDOMError(\n\t\t\t\t\"Failed to remove highlight\",\n\t\t\t\t{commentId},\n\t\t\t\terror,\n\t\t\t);\n\t\t}\n\t};\n\n\t// Function to clear all highlights\n\tconst clearAllHighlights = () => {\n\t\thighlightedAnchors.value = [];\n\t};\n\n\t// Function to set all highlights at once (for loaded highlights)\n\tconst setHighlights = ( highlights ) => {\n\t\tif ( !Array.isArray( highlights ) ) {\n\t\t\terrorHandler.handleValidationError( \"Highlights must be an array\", {\n\t\t\t\thighlights,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// Only validate existing highlights that should have complete data\n\t\t\tconst validatedHighlights = highlights.filter( ( highlight ) => {\n\t\t\t\ttry {\n\t\t\t\t\t// Only do full validation for highlights that appear to be complete\n\t\t\t\t\tif ( highlight.comment && highlight.comment.data_id ) {\n\t\t\t\t\t\terrorHandler.validateHighlightData( highlight );\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\terrorHandler.handleDOMError(\n\t\t\t\t\t\t\"Skipping invalid highlight during setHighlights\",\n\t\t\t\t\t\t{highlight},\n\t\t\t\t\t\terror,\n\t\t\t\t\t);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\thighlightedAnchors.value = validatedHighlights;\n\t\t} catch ( error ) {\n\t\t\terrorHandler.handleDOMError(\n\t\t\t\t\"Failed to set highlights\",\n\t\t\t\t{highlights},\n\t\t\t\terror,\n\t\t\t);\n\t\t}\n\t};\n\n\treturn {\n\t\thighlightedAnchors,\n\t\taddHighlight,\n\t\tremoveHighlight,\n\t\tclearAllHighlights,\n\t\tsetHighlights,\n\t};\n}\n","import {ref} from \"vue\";\nimport useComments from \"../features/useComments.js\";\nimport {useHighlightData} from \"../highlights/useHighlightData.js\";\n\n/**\n * @typedef {import('../features/useComments.js').Comment} Comment\n */\n\n/**\n * Formats comments for the highlighting directive/component.\n * @param {Array<Comment>} commentsArray - Array of comments from useComments.\n * @returns {Array<Object|null>} Array of formatted highlight objects.\n */\nfunction formatCommentsForHighlighting( commentsArray ) {\n\tif ( !Array.isArray( commentsArray ) ) {\n\t\tconsole.error(\n\t\t\t\"formatCommentsForHighlighting: input is not an array\",\n\t\t\tcommentsArray,\n\t\t);\n\t\treturn [];\n\t}\n\n\treturn commentsArray\n\t\t.map( ( comment ) => {\n\t\t\tlet highlightPos;\n\n\t\t\t// comment object structure from useComments.fetchComments now includes:\n\t\t\t// - highlight_type: 'wordIndex', 'selector', or 'unknown' (filtered out by useComments)\n\t\t\t// - parsedSelection: { text, index, type, position (original pos string) }\n\t\t\t// - data_id: the comment ID\n\t\t\t// - pos: the original position string from backend\n\n\t\t\tif (\n\t\t\t\t!comment ||\n\t\t\t\t!comment.data_id ||\n\t\t\t\t!comment.highlight_type ||\n\t\t\t\t!comment.parsedSelection\n\t\t\t) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"Filtering out comment due to missing essential fields:\",\n\t\t\t\t\tcomment,\n\t\t\t\t);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( comment.highlight_type === \"wordIndex\" ) {\n\t\t\t\t// For wordIndex, the highlight directive expects the original \"text|index\" string.\n\t\t\t\t// This is available in comment.pos or comment.parsedSelection.position.\n\t\t\t\thighlightPos = comment.pos;\n\t\t\t} else if ( comment.highlight_type === \"selector\" ) {\n\t\t\t\t// For selector type (images, dynamic blocks), the 'text' field of parsedSelection is the selector string.\n\t\t\t\thighlightPos = comment.parsedSelection.text;\n\t\t\t} else if ( comment.highlight_type === \"svg\" ) {\n\t\t\t\t// For SVG type, the 'text' field of parsedSelection is the svg[id] selector string.\n\t\t\t\thighlightPos = comment.parsedSelection.text;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`Unknown highlight_type '${comment.highlight_type}' for comment:`,\n\t\t\t\t\tcomment,\n\t\t\t\t);\n\t\t\t\treturn null; // Filter out if type is not recognized for highlighting\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof highlightPos === \"undefined\" ||\n\t\t\t\thighlightPos === null ||\n\t\t\t\thighlightPos === \"\"\n\t\t\t) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"Filtering out comment due to undefined or empty highlight position string:\",\n\t\t\t\t\tcomment,\n\t\t\t\t);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttype: comment.highlight_type, // 'wordIndex' or 'selector'\n\t\t\t\tcomment: {\n\t\t\t\t\tpos: highlightPos, // The string the highlighter will use\n\t\t\t\t\tdata_id: comment.data_id,\n\t\t\t\t\trawComment: comment, // Keep the full comment object for context if needed by the click handler\n\t\t\t\t},\n\t\t\t};\n\t\t} )\n\t\t.filter( ( highlight ) => highlight !== null ); // Filter out any null values from mapping\n}\n\n/**\n * Composable for setting up smart comments functionality.\n * Orchestrates fetching comments and preparing them for highlighting.\n * @returns {Object} State and functions for smart comments.\n */\nexport default function useSmartCommentsSetup() {\n\tconst commentsComposable = useComments();\n\tconst highlightComposable = useHighlightData();\n\n\t// Destructure with fallbacks\n\tconst {\n\t\tcomments = ref( [] ),\n\t\tfetchComments = () => {\n\t\t},\n\t\tisLoading = ref( false ),\n\t\terror = ref( null ),\n\t} = commentsComposable || {};\n\n\tconst {\n\t\thighlightedAnchors = ref( [] ), setHighlights = () => {\n\t\t}\n\t} =\n\thighlightComposable || {};\n\n\tconst loadAndSetHighlights = async () => {\n\t\ttry {\n\t\t\tawait fetchComments(); // Fetch comments using useComments\n\n\t\t\tconst formattedHighlights = formatCommentsForHighlighting( comments.value );\n\n\t\t\tsetHighlights( formattedHighlights );\n\t\t} catch ( err ) {\n\t\t\tconsole.error( \"Error in loadAndSetHighlights:\", err );\n\t\t}\n\t};\n\n\treturn {\n\t\thighlightedAnchors,\n\t\tisLoading,\n\t\terror,\n\t\tcomments,\n\t\tloadAndSetHighlights,\n\t};\n}\n","/**\n * Centralized error handling for selection operations\n * Provides consistent error reporting and user feedback\n */\nimport {SELECTION_ENUMS} from \"../../../utils/constants.js\";\n\nexport class SelectionErrorHandler {\n\tconstructor() {\n\t\tthis.errorCounts = new Map();\n\t\tthis.lastErrors = new Map();\n\t}\n\n\t/**\n\t * Handle selection processing errors with appropriate user feedback\n\t * @param {string} selectionType - Type of selection that failed\n\t * @param {Error} error - The error that occurred\n\t * @param {Object} context - Additional context for debugging\n\t */\n\thandleSelectionError( selectionType, error, context = {} ) {\n\t\tconst errorKey = `${selectionType}_${error.message}`;\n\n\t\t// Track error frequency\n\t\tthis.errorCounts.set( errorKey, ( this.errorCounts.get( errorKey ) || 0 ) + 1 );\n\t\tthis.lastErrors.set( selectionType, {\n\t\t\terror,\n\t\t\ttimestamp: Date.now(),\n\t\t\tcontext,\n\t\t} );\n\n\t\t// Log structured error information\n\t\tconsole.error( \"Selection Error Details:\", {\n\t\t\ttype: selectionType,\n\t\t\tmessage: error.message,\n\t\t\tstack: error.stack,\n\t\t\tcontext,\n\t\t\tcount: this.errorCounts.get( errorKey ),\n\t\t\ttimestamp: new Date().toISOString(),\n\t\t} );\n\n\t\t// Show appropriate user message\n\t\tthis.showUserErrorMessage( selectionType, error );\n\t}\n\n\t/**\n\t * Handle validation errors with specific messaging\n\t * @param {number} validationResult - Validation result code\n\t * @param {string} selectionType - Type of selection\n\t * @returns {boolean} - Whether to continue processing\n\t */\n\thandleValidationError( validationResult, selectionType = \"unknown\" ) {\n\t\tif ( validationResult === SELECTION_ENUMS.SELECTION_VALID ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet errorMessage = \"Invalid selection\";\n\t\tlet messageKey = null;\n\n\t\tswitch ( validationResult ) {\n\t\t\tcase SELECTION_ENUMS.INVALID_SELECTION_ALREADY_COMMENTED:\n\t\t\t\tmessageKey = \"sic-selection-error-1\";\n\t\t\t\terrorMessage = \"Selection contains already commented block\";\n\t\t\t\tbreak;\n\t\t\tcase SELECTION_ENUMS.INVALID_SELECTION_INCLUDES_DYNAMIC_CONTENT:\n\t\t\t\tmessageKey = \"sic-selection-error-2\";\n\t\t\t\terrorMessage = \"Selection contains dynamic content\";\n\t\t\t\tbreak;\n\t\t\tcase SELECTION_ENUMS.INVALID_SELECTION_CONTAINS_LINEBREAKS:\n\t\t\t\tmessageKey = \"sic-selection-error-3\";\n\t\t\t\terrorMessage = \"Selection contains line breaks\";\n\t\t\t\tbreak;\n\t\t\tcase SELECTION_ENUMS.INVALID_SELECTION_CONTAINS_HTML:\n\t\t\t\tmessageKey = \"sic-selection-error-4\";\n\t\t\t\terrorMessage = \"Selection contains HTML code\";\n\t\t\t\tbreak;\n\t\t\tcase SELECTION_ENUMS.INVALID_SELECTION_IS_EMPTY:\n\t\t\t\tmessageKey = \"sic-selection-error-5\";\n\t\t\t\terrorMessage = \"Selection is empty\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmessageKey = \"sic-selection-generic-error\";\n\t\t\t\terrorMessage = \"An error occurred during selection\";\n\t\t}\n\n\t\t// Log validation error\n\t\tconsole.warn( \"Selection Validation Failed:\", {\n\t\t\ttype: selectionType,\n\t\t\tvalidationResult,\n\t\t\terrorMessage,\n\t\t\ttimestamp: new Date().toISOString(),\n\t\t} );\n\n\t\t// Show localized message if available\n\t\tif ( messageKey && typeof mw !== \"undefined\" && mw.msg ) {\n\t\t\tmw.notify( mw.msg( messageKey ), {type: \"error\"} );\n\t\t} else {\n\t\t\tconsole.error( errorMessage );\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Show user-friendly error message based on error type\n\t * @param {string} selectionType - Type of selection\n\t * @param {Error} error - The error object\n\t */\n\tshowUserErrorMessage( selectionType, error ) {\n\t\tlet userMessage = \"\";\n\t\tlet notificationType = \"error\";\n\n\t\t// Categorize errors by type and message\n\t\tif ( error.message.includes( \"Screenshot\" ) ) {\n\t\t\tuserMessage = \"Screenshot capture failed. Selection saved without image.\";\n\t\t\tnotificationType = \"warn\";\n\t\t} else if ( error.message.includes( \"Rangy\" ) ) {\n\t\t\tuserMessage =\n\t\t\t\t\"Text selection library not available. Please refresh the page.\";\n\t\t} else if ( error.message.includes( \"content root\" ) ) {\n\t\t\tuserMessage = \"Page content not found. Please refresh the page.\";\n\t\t} else if ( error.message.includes( \"timeout\" ) ) {\n\t\t\tuserMessage = \"Selection operation timed out. Please try again.\";\n\t\t} else {\n\t\t\t// Generic error based on selection type\n\t\t\tswitch ( selectionType ) {\n\t\t\t\tcase \"text\":\n\t\t\t\t\tuserMessage =\n\t\t\t\t\t\t\"Failed to process text selection. Please try selecting different text.\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"image\":\n\t\t\t\t\tuserMessage =\n\t\t\t\t\t\t\"Failed to process image selection. Please try clicking the image again.\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"svg\":\n\t\t\t\t\tuserMessage =\n\t\t\t\t\t\t\"Failed to process SVG selection. Please try clicking the element again.\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dynamic-block\":\n\t\t\t\t\tuserMessage =\n\t\t\t\t\t\t\"Failed to process block selection. Please try clicking the block again.\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tuserMessage = \"Selection processing failed. Please try again.\";\n\t\t\t}\n\t\t}\n\n\t\t// Show notification if MediaWiki is available\n\t\tif ( typeof mw !== \"undefined\" && mw.notify ) {\n\t\t\tmw.notify( userMessage, {type: notificationType} );\n\t\t} else {\n\t\t\tconsole.error( userMessage );\n\t\t}\n\t}\n\n\t/**\n\t * Handle screenshot-specific errors\n\t * @param {string} selectionType - Type of selection\n\t * @param {Error} error - Screenshot error\n\t * @param {Object} selectionData - Selection data to update\n\t */\n\thandleScreenshotError( selectionType, error, selectionData ) {\n\t\tconsole.error( `Screenshot error for ${selectionType}:`, error );\n\n\t\t// Ensure image is null if screenshot fails\n\t\tif ( selectionData ) {\n\t\t\tselectionData.image = null;\n\t\t}\n\n\t\t// Show non-blocking warning to user\n\t\tif ( typeof mw !== \"undefined\" && mw.notify ) {\n\t\t\tmw.notify(\n\t\t\t\t\"Screenshot capture failed. Comment will be saved without image.\",\n\t\t\t\t{\n\t\t\t\t\ttype: \"warn\",\n\t\t\t\t\tautoHide: true,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Create error with context for better debugging\n\t * @param {string} message - Error message\n\t * @param {string} selectionType - Type of selection\n\t * @param {Object} context - Additional context\n\t * @returns {Error} - Enhanced error object\n\t */\n\tcreateContextualError( message, selectionType, context = {} ) {\n\t\tconst error = new Error( message );\n\t\terror.selectionType = selectionType;\n\t\terror.context = context;\n\t\terror.timestamp = Date.now();\n\t\treturn error;\n\t}\n\n\t/**\n\t * Get error statistics for debugging\n\t * @returns {Object} - Error statistics\n\t */\n\tgetErrorStats() {\n\t\treturn {\n\t\t\terrorCounts: Object.fromEntries( this.errorCounts ),\n\t\t\tlastErrors: Object.fromEntries( this.lastErrors ),\n\t\t\ttotalErrors: Array.from( this.errorCounts.values() ).reduce(\n\t\t\t\t( sum, count ) => sum + count,\n\t\t\t\t0,\n\t\t\t),\n\t\t};\n\t}\n\n\t/**\n\t * Clear error tracking data\n\t */\n\tclearErrorStats() {\n\t\tthis.errorCounts.clear();\n\t\tthis.lastErrors.clear();\n\t}\n}\n\n// Create and export a singleton instance\nexport const selectionErrorHandler = new SelectionErrorHandler();\n\nexport default {\n\tSelectionErrorHandler,\n\tselectionErrorHandler,\n};\n","/**\n * Screenshot Target Manager\n * Manages automatic parent class addition/removal for screenshot targeting\n */\nimport { SMARTCOMMENTS_CLASSES, SCREENSHOT_TARGETING } from \"./constants.js\";\n\n// WeakMap to track parent elements that we've modified\nconst managedParents = new WeakMap();\n\n/**\n * Check if an element should be skipped for parent targeting\n * @param {Element} element - Element to check\n * @returns {boolean} - Whether to skip this element\n */\nfunction shouldSkipElement(element) {\n\tif (!element || element.nodeType !== Node.ELEMENT_NODE) {\n\t\treturn true;\n\t}\n\n\tconst tagName = element.tagName.toLowerCase();\n\n\treturn (\n\t\tSCREENSHOT_TARGETING.SKIP_ELEMENTS.includes(tagName) ||\n\t\telement.closest(\"svg\") !== null ||\n\t\telement.closest(\"img\") !== null\n\t);\n}\n\n/**\n * Store original state of parent element\n * @param {Element} parent - Parent element\n */\nfunction storeOriginalState(parent) {\n\tif (!managedParents.has(parent)) {\n\t\tmanagedParents.set(parent, {\n\t\t\toriginalClasses: parent.className,\n\t\t\thasScreenshotTarget: parent.classList.contains(\n\t\t\t\tSMARTCOMMENTS_CLASSES.SCREENSHOT_TARGET,\n\t\t\t),\n\t\t\tcount: 0,\n\t\t});\n\t}\n}\n\n/**\n * Find the appropriate parent element for screenshot targeting\n * @param {Element} element - Element with temp highlight class\n * @returns {Element|null} - Best parent element for screenshot targeting\n */\nfunction findScreenshotParent(element) {\n\tif (!element || shouldSkipElement(element)) {\n\t\treturn null;\n\t}\n\n\tlet current = element.parentElement;\n\n\t// Walk up the DOM tree to find a good parent\n\twhile (\n\t\tcurrent &&\n\t\tcurrent !== document.body &&\n\t\tcurrent !== document.documentElement\n\t) {\n\t\tconst tagName = current.tagName.toLowerCase();\n\n\t\t// If we find a semantic parent, use it\n\t\tif (SCREENSHOT_TARGETING.SEMANTIC_PARENTS.includes(tagName)) {\n\t\t\treturn current;\n\t\t}\n\n\t\t// If we find an element with substantial content (not just a wrapper), use it\n\t\tif (\n\t\t\tcurrent.children.length > 1 ||\n\t\t\t(current.textContent &&\n\t\t\t\tcurrent.textContent.trim().length >\n\t\t\t\tSCREENSHOT_TARGETING.MIN_CONTENT_LENGTH)\n\t\t) {\n\t\t\treturn current;\n\t\t}\n\n\t\tcurrent = current.parentElement;\n\t}\n\n\t// Fallback to immediate parent if no semantic parent found\n\treturn element.parentElement;\n}\n\n/**\n * Add screenshot target class to parent element\n * @param {Element} element - Element with temp highlight class\n */\nfunction addParentScreenshotTarget(element) {\n\tif (shouldSkipElement(element)) {\n\t\treturn;\n\t}\n\n\tconst parent = findScreenshotParent(element);\n\tif (\n\t\t!parent ||\n\t\tparent === document.body ||\n\t\tparent === document.documentElement\n\t) {\n\t\treturn;\n\t}\n\n\t// Store original state\n\tstoreOriginalState(parent);\n\n\t// Increment count of temp highlights in this parent\n\tconst state = managedParents.get(parent);\n\tstate.count++;\n\n\t// Add screenshot target class if not already present\n\tif (!state.hasScreenshotTarget) {\n\t\tparent.classList.add(SMARTCOMMENTS_CLASSES.SCREENSHOT_TARGET);\n\t}\n}\n\n/**\n * Remove screenshot target class from parent element if appropriate\n * @param {Element} element - Element that had temp highlight class\n */\nfunction removeParentScreenshotTarget(element) {\n\tif (shouldSkipElement(element)) {\n\t\treturn;\n\t}\n\n\tconst parent = findScreenshotParent(element);\n\tif (!parent || !managedParents.has(parent)) {\n\t\treturn;\n\t}\n\n\tconst state = managedParents.get(parent);\n\tstate.count = Math.max(0, state.count - 1);\n\n\t// Only remove if count reaches 0 and we added it originally\n\tif (state.count === 0 && !state.hasScreenshotTarget) {\n\t\tparent.classList.remove(SMARTCOMMENTS_CLASSES.SCREENSHOT_TARGET);\n\t\tmanagedParents.delete(parent);\n\t}\n}\n\n/**\n * Add screenshot target class to SVG element directly\n * @param {Element} svgElement - SVG element with hover class\n */\nfunction addSVGScreenshotTarget(svgElement) {\n\tif (!svgElement || shouldSkipElement(svgElement)) {\n\t\treturn;\n\t}\n\n\t// For SVG elements, we want to target the SVG element itself, not its parent\n\tconst svgRoot = svgElement.closest(\"svg\") || svgElement;\n\n\tif (\n\t\t!svgRoot ||\n\t\tsvgRoot === document.body ||\n\t\tsvgRoot === document.documentElement\n\t) {\n\t\treturn;\n\t}\n\n\t// Store original state\n\tstoreOriginalState(svgRoot);\n\n\t// Increment count of temp highlights in this SVG\n\tconst state = managedParents.get(svgRoot);\n\tstate.count++;\n\n\t// Add screenshot target class if not already present\n\tif (!state.hasScreenshotTarget) {\n\t\tsvgRoot.classList.add(SMARTCOMMENTS_CLASSES.SCREENSHOT_TARGET);\n\t}\n}\n\n/**\n * Remove screenshot target class from SVG element\n * @param {Element} svgElement - SVG element that had hover class\n */\nfunction removeSVGScreenshotTarget(svgElement) {\n\tif (!svgElement || shouldSkipElement(svgElement)) {\n\t\treturn;\n\t}\n\n\tconst svgRoot = svgElement.closest(\"svg\") || svgElement;\n\tif (!svgRoot || !managedParents.has(svgRoot)) {\n\t\treturn;\n\t}\n\n\tconst state = managedParents.get(svgRoot);\n\tstate.count = Math.max(0, state.count - 1);\n\n\t// Only remove if count reaches 0 and we added it originally\n\tif (state.count === 0 && !state.hasScreenshotTarget) {\n\t\tsvgRoot.classList.remove(SMARTCOMMENTS_CLASSES.SCREENSHOT_TARGET);\n\t\tmanagedParents.delete(svgRoot);\n\t}\n}\n\n/**\n * Handle element mutation (addition or removal of temp highlight class)\n * @param {Element} element - The element being mutated\n * @param {string} className - The class being added/removed\n * @param {boolean} isAdding - Whether the class is being added (true) or removed (false)\n */\nfunction handleTempHighlightChange(element, className, isAdding) {\n\tif (SCREENSHOT_TARGETING.TEMP_HIGHLIGHT_CLASSES.includes(className)) {\n\t\tif (isAdding) {\n\t\t\taddParentScreenshotTarget(element);\n\t\t} else {\n\t\t\tremoveParentScreenshotTarget(element);\n\t\t}\n\t} else if (className === SMARTCOMMENTS_CLASSES.SVG_HOVER) {\n\t\tif (isAdding) {\n\t\t\taddSVGScreenshotTarget(element);\n\t\t} else {\n\t\t\tremoveSVGScreenshotTarget(element);\n\t\t}\n\t}\n}\n\n/**\n * Get element class names as an array, handling SVG elements properly\n * @param {Element} element - Element to get classes from\n * @returns {string[]} - Array of class names\n */\nfunction getElementClasses(element) {\n\tif (!element) return [];\n\n\t// Handle SVG elements where className is an SVGAnimatedString\n\tif (\n\t\telement.className &&\n\t\ttypeof element.className === \"object\" &&\n\t\telement.className.baseVal\n\t) {\n\t\treturn element.className.baseVal.split(\" \").filter((cls) => cls.length > 0);\n\t}\n\n\t// Handle regular DOM elements\n\tif (typeof element.className === \"string\") {\n\t\treturn element.className.split(\" \").filter((cls) => cls.length > 0);\n\t}\n\n\t// Fallback using classList\n\treturn Array.from(element.classList || []);\n}\n\n/**\n * Create a MutationObserver to watch for temp highlight class changes\n * @returns {MutationObserver} - Configured observer\n */\nfunction createScreenshotTargetObserver() {\n\treturn new MutationObserver((mutations) => {\n\t\tmutations.forEach((mutation) => {\n\t\t\tif (\n\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t) {\n\t\t\t\tconst element = mutation.target;\n\t\t\t\tconst oldClasses = mutation.oldValue\n\t\t\t\t\t? mutation.oldValue.split(\" \").filter((cls) => cls.length > 0)\n\t\t\t\t\t: [];\n\t\t\t\tconst newClasses = getElementClasses(element);\n\n\t\t\t\t// Check temp highlight classes\n\t\t\t\tSCREENSHOT_TARGETING.TEMP_HIGHLIGHT_CLASSES.forEach((tempClass) => {\n\t\t\t\t\tconst hadClass = oldClasses.includes(tempClass);\n\t\t\t\t\tconst hasClass = newClasses.includes(tempClass);\n\n\t\t\t\t\tif (!hadClass && hasClass) {\n\t\t\t\t\t\t// Class was added\n\t\t\t\t\t\thandleTempHighlightChange(element, tempClass, true);\n\t\t\t\t\t} else if (hadClass && !hasClass) {\n\t\t\t\t\t\t// Class was removed\n\t\t\t\t\t\thandleTempHighlightChange(element, tempClass, false);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Check SVG hover class\n\t\t\t\tconst hadSVGHover = oldClasses.includes(\n\t\t\t\t\tSMARTCOMMENTS_CLASSES.SVG_HOVER,\n\t\t\t\t);\n\t\t\t\tconst hasSVGHover = newClasses.includes(\n\t\t\t\t\tSMARTCOMMENTS_CLASSES.SVG_HOVER,\n\t\t\t\t);\n\n\t\t\t\tif (!hadSVGHover && hasSVGHover) {\n\t\t\t\t\t// SVG hover class was added\n\t\t\t\t\thandleTempHighlightChange(\n\t\t\t\t\t\telement,\n\t\t\t\t\t\tSMARTCOMMENTS_CLASSES.SVG_HOVER,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\t} else if (hadSVGHover && !hasSVGHover) {\n\t\t\t\t\t// SVG hover class was removed\n\t\t\t\t\thandleTempHighlightChange(\n\t\t\t\t\t\telement,\n\t\t\t\t\t\tSMARTCOMMENTS_CLASSES.SVG_HOVER,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Initialize the screenshot target management system\n * @param {Element} rootElement - Root element to observe (defaults to document body)\n */\nfunction initializeScreenshotTargetManager(rootElement = document.body) {\n\tconst observer = createScreenshotTargetObserver();\n\n\tobserver.observe(rootElement, {\n\t\tattributes: true,\n\t\tattributeOldValue: true,\n\t\tattributeFilter: [\"class\"],\n\t\tsubtree: true,\n\t});\n\n\treturn observer;\n}\n\n/**\n * Manually add screenshot target to parent (for direct DOM manipulation)\n * @param {Element} element - Element with temp highlight\n */\nfunction manuallyAddParentTarget(element) {\n\thandleTempHighlightChange(\n\t\telement,\n\t\tSCREENSHOT_TARGETING.TEMP_HIGHLIGHT_CLASSES[1],\n\t\ttrue,\n\t);\n}\n\n/**\n * Manually remove screenshot target from parent (for direct DOM manipulation)\n * @param {Element} element - Element that had temp highlight\n */\nfunction manuallyRemoveParentTarget(element) {\n\thandleTempHighlightChange(\n\t\telement,\n\t\tSCREENSHOT_TARGETING.TEMP_HIGHLIGHT_CLASSES[1],\n\t\tfalse,\n\t);\n}\n\n/**\n * Manually add screenshot target to SVG element (for direct DOM manipulation)\n * @param {Element} svgElement - SVG element with hover\n */\nfunction manuallySVGAddTarget(svgElement) {\n\thandleTempHighlightChange(svgElement, SMARTCOMMENTS_CLASSES.SVG_HOVER, true);\n}\n\n/**\n * Manually remove screenshot target from SVG element (for direct DOM manipulation)\n * @param {Element} svgElement - SVG element that had hover\n */\nfunction manuallySVGRemoveTarget(svgElement) {\n\thandleTempHighlightChange(svgElement, SMARTCOMMENTS_CLASSES.SVG_HOVER, false);\n}\n\n/**\n * Cleanup all managed parents (useful for reset)\n */\nfunction cleanupAllManagedParents() {\n\t// Get all parents from WeakMap by iterating through elements with temp highlight classes\n\tSCREENSHOT_TARGETING.TEMP_HIGHLIGHT_CLASSES.forEach((className) => {\n\t\tconst elements = document.querySelectorAll(`.${className}`);\n\t\telements.forEach((element) => {\n\t\t\tremoveParentScreenshotTarget(element);\n\t\t});\n\t});\n}\n\n/**\n * Find the current screenshot target element\n * @returns {Element|null} - The current screenshot target element or null\n */\nfunction findCurrentScreenshotTarget() {\n\treturn document.querySelector(`.${SMARTCOMMENTS_CLASSES.SCREENSHOT_TARGET}`);\n}\n\n/**\n * Get all current screenshot target elements\n * @returns {NodeList} - All elements with screenshot target class\n */\nfunction findAllScreenshotTargets() {\n\treturn document.querySelectorAll(\n\t\t`.${SMARTCOMMENTS_CLASSES.SCREENSHOT_TARGET}`,\n\t);\n}\n\nexport {\n\tinitializeScreenshotTargetManager,\n\tmanuallyAddParentTarget,\n\tmanuallyRemoveParentTarget,\n\tmanuallySVGAddTarget,\n\tmanuallySVGRemoveTarget,\n\taddSVGScreenshotTarget,\n\tremoveSVGScreenshotTarget,\n\tcleanupAllManagedParents,\n\tfindCurrentScreenshotTarget,\n\tfindAllScreenshotTargets,\n};\n","/*!\n * html2canvas 1.4.1 <https://html2canvas.hertzen.com>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\n\nvar Bounds = /** @class */ (function () {\n    function Bounds(left, top, width, height) {\n        this.left = left;\n        this.top = top;\n        this.width = width;\n        this.height = height;\n    }\n    Bounds.prototype.add = function (x, y, w, h) {\n        return new Bounds(this.left + x, this.top + y, this.width + w, this.height + h);\n    };\n    Bounds.fromClientRect = function (context, clientRect) {\n        return new Bounds(clientRect.left + context.windowBounds.left, clientRect.top + context.windowBounds.top, clientRect.width, clientRect.height);\n    };\n    Bounds.fromDOMRectList = function (context, domRectList) {\n        var domRect = Array.from(domRectList).find(function (rect) { return rect.width !== 0; });\n        return domRect\n            ? new Bounds(domRect.left + context.windowBounds.left, domRect.top + context.windowBounds.top, domRect.width, domRect.height)\n            : Bounds.EMPTY;\n    };\n    Bounds.EMPTY = new Bounds(0, 0, 0, 0);\n    return Bounds;\n}());\nvar parseBounds = function (context, node) {\n    return Bounds.fromClientRect(context, node.getBoundingClientRect());\n};\nvar parseDocumentSize = function (document) {\n    var body = document.body;\n    var documentElement = document.documentElement;\n    if (!body || !documentElement) {\n        throw new Error(\"Unable to get document size\");\n    }\n    var width = Math.max(Math.max(body.scrollWidth, documentElement.scrollWidth), Math.max(body.offsetWidth, documentElement.offsetWidth), Math.max(body.clientWidth, documentElement.clientWidth));\n    var height = Math.max(Math.max(body.scrollHeight, documentElement.scrollHeight), Math.max(body.offsetHeight, documentElement.offsetHeight), Math.max(body.clientHeight, documentElement.clientHeight));\n    return new Bounds(0, 0, width, height);\n};\n\n/*\n * css-line-break 2.1.0 <https://github.com/niklasvh/css-line-break#readme>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar toCodePoints$1 = function (str) {\n    var codePoints = [];\n    var i = 0;\n    var length = str.length;\n    while (i < length) {\n        var value = str.charCodeAt(i++);\n        if (value >= 0xd800 && value <= 0xdbff && i < length) {\n            var extra = str.charCodeAt(i++);\n            if ((extra & 0xfc00) === 0xdc00) {\n                codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n            }\n            else {\n                codePoints.push(value);\n                i--;\n            }\n        }\n        else {\n            codePoints.push(value);\n        }\n    }\n    return codePoints;\n};\nvar fromCodePoint$1 = function () {\n    var codePoints = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        codePoints[_i] = arguments[_i];\n    }\n    if (String.fromCodePoint) {\n        return String.fromCodePoint.apply(String, codePoints);\n    }\n    var length = codePoints.length;\n    if (!length) {\n        return '';\n    }\n    var codeUnits = [];\n    var index = -1;\n    var result = '';\n    while (++index < length) {\n        var codePoint = codePoints[index];\n        if (codePoint <= 0xffff) {\n            codeUnits.push(codePoint);\n        }\n        else {\n            codePoint -= 0x10000;\n            codeUnits.push((codePoint >> 10) + 0xd800, (codePoint % 0x400) + 0xdc00);\n        }\n        if (index + 1 === length || codeUnits.length > 0x4000) {\n            result += String.fromCharCode.apply(String, codeUnits);\n            codeUnits.length = 0;\n        }\n    }\n    return result;\n};\nvar chars$2 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup$2 = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i$2 = 0; i$2 < chars$2.length; i$2++) {\n    lookup$2[chars$2.charCodeAt(i$2)] = i$2;\n}\n\n/*\n * utrie 1.0.2 <https://github.com/niklasvh/utrie>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars$1$1 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup$1$1 = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i$1$1 = 0; i$1$1 < chars$1$1.length; i$1$1++) {\n    lookup$1$1[chars$1$1.charCodeAt(i$1$1)] = i$1$1;\n}\nvar decode$1 = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var buffer = typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n        ? new ArrayBuffer(bufferLength)\n        : new Array(bufferLength);\n    var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup$1$1[base64.charCodeAt(i)];\n        encoded2 = lookup$1$1[base64.charCodeAt(i + 1)];\n        encoded3 = lookup$1$1[base64.charCodeAt(i + 2)];\n        encoded4 = lookup$1$1[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return buffer;\n};\nvar polyUint16Array$1 = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\nvar polyUint32Array$1 = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\n/** Shift size for getting the index-2 table offset. */\nvar UTRIE2_SHIFT_2$1 = 5;\n/** Shift size for getting the index-1 table offset. */\nvar UTRIE2_SHIFT_1$1 = 6 + 5;\n/**\n * Shift size for shifting left the index array values.\n * Increases possible data size with 16-bit index values at the cost\n * of compactability.\n * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n */\nvar UTRIE2_INDEX_SHIFT$1 = 2;\n/**\n * Difference between the two shift sizes,\n * for getting an index-1 offset from an index-2 offset. 6=11-5\n */\nvar UTRIE2_SHIFT_1_2$1 = UTRIE2_SHIFT_1$1 - UTRIE2_SHIFT_2$1;\n/**\n * The part of the index-2 table for U+D800..U+DBFF stores values for\n * lead surrogate code _units_ not code _points_.\n * Values for lead surrogate code _points_ are indexed with this portion of the table.\n * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n */\nvar UTRIE2_LSCP_INDEX_2_OFFSET$1 = 0x10000 >> UTRIE2_SHIFT_2$1;\n/** Number of entries in a data block. 32=0x20 */\nvar UTRIE2_DATA_BLOCK_LENGTH$1 = 1 << UTRIE2_SHIFT_2$1;\n/** Mask for getting the lower bits for the in-data-block offset. */\nvar UTRIE2_DATA_MASK$1 = UTRIE2_DATA_BLOCK_LENGTH$1 - 1;\nvar UTRIE2_LSCP_INDEX_2_LENGTH$1 = 0x400 >> UTRIE2_SHIFT_2$1;\n/** Count the lengths of both BMP pieces. 2080=0x820 */\nvar UTRIE2_INDEX_2_BMP_LENGTH$1 = UTRIE2_LSCP_INDEX_2_OFFSET$1 + UTRIE2_LSCP_INDEX_2_LENGTH$1;\n/**\n * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n */\nvar UTRIE2_UTF8_2B_INDEX_2_OFFSET$1 = UTRIE2_INDEX_2_BMP_LENGTH$1;\nvar UTRIE2_UTF8_2B_INDEX_2_LENGTH$1 = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n/**\n * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n * Variable length, for code points up to highStart, where the last single-value range starts.\n * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n *\n * The part of the index-2 table for supplementary code points starts\n * after this index-1 table.\n *\n * Both the index-1 table and the following part of the index-2 table\n * are omitted completely if there is only BMP data.\n */\nvar UTRIE2_INDEX_1_OFFSET$1 = UTRIE2_UTF8_2B_INDEX_2_OFFSET$1 + UTRIE2_UTF8_2B_INDEX_2_LENGTH$1;\n/**\n * Number of index-1 entries for the BMP. 32=0x20\n * This part of the index-1 table is omitted from the serialized form.\n */\nvar UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1 = 0x10000 >> UTRIE2_SHIFT_1$1;\n/** Number of entries in an index-2 block. 64=0x40 */\nvar UTRIE2_INDEX_2_BLOCK_LENGTH$1 = 1 << UTRIE2_SHIFT_1_2$1;\n/** Mask for getting the lower bits for the in-index-2-block offset. */\nvar UTRIE2_INDEX_2_MASK$1 = UTRIE2_INDEX_2_BLOCK_LENGTH$1 - 1;\nvar slice16$1 = function (view, start, end) {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n};\nvar slice32$1 = function (view, start, end) {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n};\nvar createTrieFromBase64$1 = function (base64, _byteLength) {\n    var buffer = decode$1(base64);\n    var view32 = Array.isArray(buffer) ? polyUint32Array$1(buffer) : new Uint32Array(buffer);\n    var view16 = Array.isArray(buffer) ? polyUint16Array$1(buffer) : new Uint16Array(buffer);\n    var headerLength = 24;\n    var index = slice16$1(view16, headerLength / 2, view32[4] / 2);\n    var data = view32[5] === 2\n        ? slice16$1(view16, (headerLength + view32[4]) / 2)\n        : slice32$1(view32, Math.ceil((headerLength + view32[4]) / 4));\n    return new Trie$1(view32[0], view32[1], view32[2], view32[3], index, data);\n};\nvar Trie$1 = /** @class */ (function () {\n    function Trie(initialValue, errorValue, highStart, highValueIndex, index, data) {\n        this.initialValue = initialValue;\n        this.errorValue = errorValue;\n        this.highStart = highStart;\n        this.highValueIndex = highValueIndex;\n        this.index = index;\n        this.data = data;\n    }\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    Trie.prototype.get = function (codePoint) {\n        var ix;\n        if (codePoint >= 0) {\n            if (codePoint < 0x0d800 || (codePoint > 0x0dbff && codePoint <= 0x0ffff)) {\n                // Ordinary BMP code point, excluding leading surrogates.\n                // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n                // 16 bit data is stored in the index array itself.\n                ix = this.index[codePoint >> UTRIE2_SHIFT_2$1];\n                ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);\n                return this.data[ix];\n            }\n            if (codePoint <= 0xffff) {\n                // Lead Surrogate Code Point.  A Separate index section is stored for\n                // lead surrogate code units and code points.\n                //   The main index has the code unit data.\n                //   For this function, we need the code point data.\n                // Note: this expression could be refactored for slightly improved efficiency, but\n                //       surrogate code points will be so rare in practice that it's not worth it.\n                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1 + ((codePoint - 0xd800) >> UTRIE2_SHIFT_2$1)];\n                ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);\n                return this.data[ix];\n            }\n            if (codePoint < this.highStart) {\n                // Supplemental code point, use two-level lookup.\n                ix = UTRIE2_INDEX_1_OFFSET$1 - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1 + (codePoint >> UTRIE2_SHIFT_1$1);\n                ix = this.index[ix];\n                ix += (codePoint >> UTRIE2_SHIFT_2$1) & UTRIE2_INDEX_2_MASK$1;\n                ix = this.index[ix];\n                ix = (ix << UTRIE2_INDEX_SHIFT$1) + (codePoint & UTRIE2_DATA_MASK$1);\n                return this.data[ix];\n            }\n            if (codePoint <= 0x10ffff) {\n                return this.data[this.highValueIndex];\n            }\n        }\n        // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n        return this.errorValue;\n    };\n    return Trie;\n}());\n\n/*\n * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars$3 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup$3 = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i$3 = 0; i$3 < chars$3.length; i$3++) {\n    lookup$3[chars$3.charCodeAt(i$3)] = i$3;\n}\n\nvar base64$1 = 'KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==';\n\nvar LETTER_NUMBER_MODIFIER = 50;\n// Non-tailorable Line Breaking Classes\nvar BK = 1; //  Cause a line break (after)\nvar CR$1 = 2; //  Cause a line break (after), except between CR and LF\nvar LF$1 = 3; //  Cause a line break (after)\nvar CM = 4; //  Prohibit a line break between the character and the preceding character\nvar NL = 5; //  Cause a line break (after)\nvar WJ = 7; //  Prohibit line breaks before and after\nvar ZW = 8; //  Provide a break opportunity\nvar GL = 9; //  Prohibit line breaks before and after\nvar SP = 10; // Enable indirect line breaks\nvar ZWJ$1 = 11; // Prohibit line breaks within joiner sequences\n// Break Opportunities\nvar B2 = 12; //  Provide a line break opportunity before and after the character\nvar BA = 13; //  Generally provide a line break opportunity after the character\nvar BB = 14; //  Generally provide a line break opportunity before the character\nvar HY = 15; //  Provide a line break opportunity after the character, except in numeric context\nvar CB = 16; //   Provide a line break opportunity contingent on additional information\n// Characters Prohibiting Certain Breaks\nvar CL = 17; //  Prohibit line breaks before\nvar CP = 18; //  Prohibit line breaks before\nvar EX = 19; //  Prohibit line breaks before\nvar IN = 20; //  Allow only indirect line breaks between pairs\nvar NS = 21; //  Allow only indirect line breaks before\nvar OP = 22; //  Prohibit line breaks after\nvar QU = 23; //  Act like they are both opening and closing\n// Numeric Context\nvar IS = 24; //  Prevent breaks after any and before numeric\nvar NU = 25; //  Form numeric expressions for line breaking purposes\nvar PO = 26; //  Do not break following a numeric expression\nvar PR = 27; //  Do not break in front of a numeric expression\nvar SY = 28; //  Prevent a break before; and allow a break after\n// Other Characters\nvar AI = 29; //  Act like AL when the resolvedEAW is N; otherwise; act as ID\nvar AL = 30; //  Are alphabetic characters or symbols that are used with alphabetic characters\nvar CJ = 31; //  Treat as NS or ID for strict or normal breaking.\nvar EB = 32; //  Do not break from following Emoji Modifier\nvar EM = 33; //  Do not break from preceding Emoji Base\nvar H2 = 34; //  Form Korean syllable blocks\nvar H3 = 35; //  Form Korean syllable blocks\nvar HL = 36; //  Do not break around a following hyphen; otherwise act as Alphabetic\nvar ID = 37; //  Break before or after; except in some numeric context\nvar JL = 38; //  Form Korean syllable blocks\nvar JV = 39; //  Form Korean syllable blocks\nvar JT = 40; //  Form Korean syllable blocks\nvar RI$1 = 41; //  Keep pairs together. For pairs; break before and after other classes\nvar SA = 42; //  Provide a line break opportunity contingent on additional, language-specific context analysis\nvar XX = 43; //  Have as yet unknown line breaking behavior or unassigned code positions\nvar ea_OP = [0x2329, 0xff08];\nvar BREAK_MANDATORY = '!';\nvar BREAK_NOT_ALLOWED$1 = '';\nvar BREAK_ALLOWED$1 = '';\nvar UnicodeTrie$1 = createTrieFromBase64$1(base64$1);\nvar ALPHABETICS = [AL, HL];\nvar HARD_LINE_BREAKS = [BK, CR$1, LF$1, NL];\nvar SPACE$1 = [SP, ZW];\nvar PREFIX_POSTFIX = [PR, PO];\nvar LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE$1);\nvar KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];\nvar HYPHEN = [HY, BA];\nvar codePointsToCharacterClasses = function (codePoints, lineBreak) {\n    if (lineBreak === void 0) { lineBreak = 'strict'; }\n    var types = [];\n    var indices = [];\n    var categories = [];\n    codePoints.forEach(function (codePoint, index) {\n        var classType = UnicodeTrie$1.get(codePoint);\n        if (classType > LETTER_NUMBER_MODIFIER) {\n            categories.push(true);\n            classType -= LETTER_NUMBER_MODIFIER;\n        }\n        else {\n            categories.push(false);\n        }\n        if (['normal', 'auto', 'loose'].indexOf(lineBreak) !== -1) {\n            // U+2010,  U+2013,  U+301C,  U+30A0\n            if ([0x2010, 0x2013, 0x301c, 0x30a0].indexOf(codePoint) !== -1) {\n                indices.push(index);\n                return types.push(CB);\n            }\n        }\n        if (classType === CM || classType === ZWJ$1) {\n            // LB10 Treat any remaining combining mark or ZWJ as AL.\n            if (index === 0) {\n                indices.push(index);\n                return types.push(AL);\n            }\n            // LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of\n            // the base character in all of the following rules. Treat ZWJ as if it were CM.\n            var prev = types[index - 1];\n            if (LINE_BREAKS.indexOf(prev) === -1) {\n                indices.push(indices[index - 1]);\n                return types.push(prev);\n            }\n            indices.push(index);\n            return types.push(AL);\n        }\n        indices.push(index);\n        if (classType === CJ) {\n            return types.push(lineBreak === 'strict' ? NS : ID);\n        }\n        if (classType === SA) {\n            return types.push(AL);\n        }\n        if (classType === AI) {\n            return types.push(AL);\n        }\n        // For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL\n        // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised\n        // to take into account the actual line breaking properties for these characters.\n        if (classType === XX) {\n            if ((codePoint >= 0x20000 && codePoint <= 0x2fffd) || (codePoint >= 0x30000 && codePoint <= 0x3fffd)) {\n                return types.push(ID);\n            }\n            else {\n                return types.push(AL);\n            }\n        }\n        types.push(classType);\n    });\n    return [indices, types, categories];\n};\nvar isAdjacentWithSpaceIgnored = function (a, b, currentIndex, classTypes) {\n    var current = classTypes[currentIndex];\n    if (Array.isArray(a) ? a.indexOf(current) !== -1 : a === current) {\n        var i = currentIndex;\n        while (i <= classTypes.length) {\n            i++;\n            var next = classTypes[i];\n            if (next === b) {\n                return true;\n            }\n            if (next !== SP) {\n                break;\n            }\n        }\n    }\n    if (current === SP) {\n        var i = currentIndex;\n        while (i > 0) {\n            i--;\n            var prev = classTypes[i];\n            if (Array.isArray(a) ? a.indexOf(prev) !== -1 : a === prev) {\n                var n = currentIndex;\n                while (n <= classTypes.length) {\n                    n++;\n                    var next = classTypes[n];\n                    if (next === b) {\n                        return true;\n                    }\n                    if (next !== SP) {\n                        break;\n                    }\n                }\n            }\n            if (prev !== SP) {\n                break;\n            }\n        }\n    }\n    return false;\n};\nvar previousNonSpaceClassType = function (currentIndex, classTypes) {\n    var i = currentIndex;\n    while (i >= 0) {\n        var type = classTypes[i];\n        if (type === SP) {\n            i--;\n        }\n        else {\n            return type;\n        }\n    }\n    return 0;\n};\nvar _lineBreakAtIndex = function (codePoints, classTypes, indicies, index, forbiddenBreaks) {\n    if (indicies[index] === 0) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    var currentIndex = index - 1;\n    if (Array.isArray(forbiddenBreaks) && forbiddenBreaks[currentIndex] === true) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    var beforeIndex = currentIndex - 1;\n    var afterIndex = currentIndex + 1;\n    var current = classTypes[currentIndex];\n    // LB4 Always break after hard line breaks.\n    // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.\n    var before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;\n    var next = classTypes[afterIndex];\n    if (current === CR$1 && next === LF$1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    if (HARD_LINE_BREAKS.indexOf(current) !== -1) {\n        return BREAK_MANDATORY;\n    }\n    // LB6 Do not break before hard line breaks.\n    if (HARD_LINE_BREAKS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB7 Do not break before spaces or zero width space.\n    if (SPACE$1.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB8 Break before any character following a zero-width space, even if one or more spaces intervene.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {\n        return BREAK_ALLOWED$1;\n    }\n    // LB8a Do not break after a zero width joiner.\n    if (UnicodeTrie$1.get(codePoints[currentIndex]) === ZWJ$1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // zwj emojis\n    if ((current === EB || current === EM) && UnicodeTrie$1.get(codePoints[afterIndex]) === ZWJ$1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB11 Do not break before or after Word joiner and related characters.\n    if (current === WJ || next === WJ) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB12 Do not break after NBSP and related characters.\n    if (current === GL) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB12a Do not break before NBSP and related characters, except after spaces and hyphens.\n    if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB13 Do not break before ] or ! or ; or /, even after spaces.\n    if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB14 Do not break after [, even after spaces.\n    if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB15 Do not break within [, even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB17 Do not break within , even with intervening spaces.\n    if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB18 Break after spaces.\n    if (current === SP) {\n        return BREAK_ALLOWED$1;\n    }\n    // LB19 Do not break before or after quotation marks, such as   .\n    if (current === QU || next === QU) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB20 Break before and after unresolved CB.\n    if (next === CB || current === CB) {\n        return BREAK_ALLOWED$1;\n    }\n    // LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.\n    if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB21a Don't break after Hebrew + Hyphen.\n    if (before === HL && HYPHEN.indexOf(current) !== -1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB21b Dont break between Solidus and Hebrew letters.\n    if (current === SY && next === HL) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB22 Do not break before ellipsis.\n    if (next === IN) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB23 Do not break between digits and letters.\n    if ((ALPHABETICS.indexOf(next) !== -1 && current === NU) || (ALPHABETICS.indexOf(current) !== -1 && next === NU)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.\n    if ((current === PR && [ID, EB, EM].indexOf(next) !== -1) ||\n        ([ID, EB, EM].indexOf(current) !== -1 && next === PO)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.\n    if ((ALPHABETICS.indexOf(current) !== -1 && PREFIX_POSTFIX.indexOf(next) !== -1) ||\n        (PREFIX_POSTFIX.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB25 Do not break between the following pairs of classes relevant to numbers:\n    if (\n    // (PR | PO)  ( OP | HY )? NU\n    ([PR, PO].indexOf(current) !== -1 &&\n        (next === NU || ([OP, HY].indexOf(next) !== -1 && classTypes[afterIndex + 1] === NU))) ||\n        // ( OP | HY )  NU\n        ([OP, HY].indexOf(current) !== -1 && next === NU) ||\n        // NU \t(NU | SY | IS)\n        (current === NU && [NU, SY, IS].indexOf(next) !== -1)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // NU (NU | SY | IS)*  (NU | SY | IS | CL | CP)\n    if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {\n        var prevIndex = currentIndex;\n        while (prevIndex >= 0) {\n            var type = classTypes[prevIndex];\n            if (type === NU) {\n                return BREAK_NOT_ALLOWED$1;\n            }\n            else if ([SY, IS].indexOf(type) !== -1) {\n                prevIndex--;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    // NU (NU | SY | IS)* (CL | CP)?  (PO | PR))\n    if ([PR, PO].indexOf(next) !== -1) {\n        var prevIndex = [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;\n        while (prevIndex >= 0) {\n            var type = classTypes[prevIndex];\n            if (type === NU) {\n                return BREAK_NOT_ALLOWED$1;\n            }\n            else if ([SY, IS].indexOf(type) !== -1) {\n                prevIndex--;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    // LB26 Do not break a Korean syllable.\n    if ((JL === current && [JL, JV, H2, H3].indexOf(next) !== -1) ||\n        ([JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1) ||\n        ([JT, H3].indexOf(current) !== -1 && next === JT)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB27 Treat a Korean Syllable Block the same as ID.\n    if ((KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 && [IN, PO].indexOf(next) !== -1) ||\n        (KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB28 Do not break between alphabetics (at).\n    if (ALPHABETICS.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB29 Do not break between numeric punctuation and alphabetics (e.g.).\n    if (current === IS && ALPHABETICS.indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.\n    if ((ALPHABETICS.concat(NU).indexOf(current) !== -1 &&\n        next === OP &&\n        ea_OP.indexOf(codePoints[afterIndex]) === -1) ||\n        (ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP)) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    // LB30a Break between two regional indicator symbols if and only if there are an even number of regional\n    // indicators preceding the position of the break.\n    if (current === RI$1 && next === RI$1) {\n        var i = indicies[currentIndex];\n        var count = 1;\n        while (i > 0) {\n            i--;\n            if (classTypes[i] === RI$1) {\n                count++;\n            }\n            else {\n                break;\n            }\n        }\n        if (count % 2 !== 0) {\n            return BREAK_NOT_ALLOWED$1;\n        }\n    }\n    // LB30b Do not break between an emoji base and an emoji modifier.\n    if (current === EB && next === EM) {\n        return BREAK_NOT_ALLOWED$1;\n    }\n    return BREAK_ALLOWED$1;\n};\nvar cssFormattedClasses = function (codePoints, options) {\n    if (!options) {\n        options = { lineBreak: 'normal', wordBreak: 'normal' };\n    }\n    var _a = codePointsToCharacterClasses(codePoints, options.lineBreak), indicies = _a[0], classTypes = _a[1], isLetterNumber = _a[2];\n    if (options.wordBreak === 'break-all' || options.wordBreak === 'break-word') {\n        classTypes = classTypes.map(function (type) { return ([NU, AL, SA].indexOf(type) !== -1 ? ID : type); });\n    }\n    var forbiddenBreakpoints = options.wordBreak === 'keep-all'\n        ? isLetterNumber.map(function (letterNumber, i) {\n            return letterNumber && codePoints[i] >= 0x4e00 && codePoints[i] <= 0x9fff;\n        })\n        : undefined;\n    return [indicies, classTypes, forbiddenBreakpoints];\n};\nvar Break = /** @class */ (function () {\n    function Break(codePoints, lineBreak, start, end) {\n        this.codePoints = codePoints;\n        this.required = lineBreak === BREAK_MANDATORY;\n        this.start = start;\n        this.end = end;\n    }\n    Break.prototype.slice = function () {\n        return fromCodePoint$1.apply(void 0, this.codePoints.slice(this.start, this.end));\n    };\n    return Break;\n}());\nvar LineBreaker = function (str, options) {\n    var codePoints = toCodePoints$1(str);\n    var _a = cssFormattedClasses(codePoints, options), indicies = _a[0], classTypes = _a[1], forbiddenBreakpoints = _a[2];\n    var length = codePoints.length;\n    var lastEnd = 0;\n    var nextIndex = 0;\n    return {\n        next: function () {\n            if (nextIndex >= length) {\n                return { done: true, value: null };\n            }\n            var lineBreak = BREAK_NOT_ALLOWED$1;\n            while (nextIndex < length &&\n                (lineBreak = _lineBreakAtIndex(codePoints, classTypes, indicies, ++nextIndex, forbiddenBreakpoints)) ===\n                    BREAK_NOT_ALLOWED$1) { }\n            if (lineBreak !== BREAK_NOT_ALLOWED$1 || nextIndex === length) {\n                var value = new Break(codePoints, lineBreak, lastEnd, nextIndex);\n                lastEnd = nextIndex;\n                return { value: value, done: false };\n            }\n            return { done: true, value: null };\n        },\n    };\n};\n\n// https://www.w3.org/TR/css-syntax-3\nvar FLAG_UNRESTRICTED = 1 << 0;\nvar FLAG_ID = 1 << 1;\nvar FLAG_INTEGER = 1 << 2;\nvar FLAG_NUMBER = 1 << 3;\nvar LINE_FEED = 0x000a;\nvar SOLIDUS = 0x002f;\nvar REVERSE_SOLIDUS = 0x005c;\nvar CHARACTER_TABULATION = 0x0009;\nvar SPACE = 0x0020;\nvar QUOTATION_MARK = 0x0022;\nvar EQUALS_SIGN = 0x003d;\nvar NUMBER_SIGN = 0x0023;\nvar DOLLAR_SIGN = 0x0024;\nvar PERCENTAGE_SIGN = 0x0025;\nvar APOSTROPHE = 0x0027;\nvar LEFT_PARENTHESIS = 0x0028;\nvar RIGHT_PARENTHESIS = 0x0029;\nvar LOW_LINE = 0x005f;\nvar HYPHEN_MINUS = 0x002d;\nvar EXCLAMATION_MARK = 0x0021;\nvar LESS_THAN_SIGN = 0x003c;\nvar GREATER_THAN_SIGN = 0x003e;\nvar COMMERCIAL_AT = 0x0040;\nvar LEFT_SQUARE_BRACKET = 0x005b;\nvar RIGHT_SQUARE_BRACKET = 0x005d;\nvar CIRCUMFLEX_ACCENT = 0x003d;\nvar LEFT_CURLY_BRACKET = 0x007b;\nvar QUESTION_MARK = 0x003f;\nvar RIGHT_CURLY_BRACKET = 0x007d;\nvar VERTICAL_LINE = 0x007c;\nvar TILDE = 0x007e;\nvar CONTROL = 0x0080;\nvar REPLACEMENT_CHARACTER = 0xfffd;\nvar ASTERISK = 0x002a;\nvar PLUS_SIGN = 0x002b;\nvar COMMA = 0x002c;\nvar COLON = 0x003a;\nvar SEMICOLON = 0x003b;\nvar FULL_STOP = 0x002e;\nvar NULL = 0x0000;\nvar BACKSPACE = 0x0008;\nvar LINE_TABULATION = 0x000b;\nvar SHIFT_OUT = 0x000e;\nvar INFORMATION_SEPARATOR_ONE = 0x001f;\nvar DELETE = 0x007f;\nvar EOF = -1;\nvar ZERO = 0x0030;\nvar a = 0x0061;\nvar e = 0x0065;\nvar f = 0x0066;\nvar u = 0x0075;\nvar z = 0x007a;\nvar A = 0x0041;\nvar E = 0x0045;\nvar F = 0x0046;\nvar U = 0x0055;\nvar Z = 0x005a;\nvar isDigit = function (codePoint) { return codePoint >= ZERO && codePoint <= 0x0039; };\nvar isSurrogateCodePoint = function (codePoint) { return codePoint >= 0xd800 && codePoint <= 0xdfff; };\nvar isHex = function (codePoint) {\n    return isDigit(codePoint) || (codePoint >= A && codePoint <= F) || (codePoint >= a && codePoint <= f);\n};\nvar isLowerCaseLetter = function (codePoint) { return codePoint >= a && codePoint <= z; };\nvar isUpperCaseLetter = function (codePoint) { return codePoint >= A && codePoint <= Z; };\nvar isLetter = function (codePoint) { return isLowerCaseLetter(codePoint) || isUpperCaseLetter(codePoint); };\nvar isNonASCIICodePoint = function (codePoint) { return codePoint >= CONTROL; };\nvar isWhiteSpace = function (codePoint) {\n    return codePoint === LINE_FEED || codePoint === CHARACTER_TABULATION || codePoint === SPACE;\n};\nvar isNameStartCodePoint = function (codePoint) {\n    return isLetter(codePoint) || isNonASCIICodePoint(codePoint) || codePoint === LOW_LINE;\n};\nvar isNameCodePoint = function (codePoint) {\n    return isNameStartCodePoint(codePoint) || isDigit(codePoint) || codePoint === HYPHEN_MINUS;\n};\nvar isNonPrintableCodePoint = function (codePoint) {\n    return ((codePoint >= NULL && codePoint <= BACKSPACE) ||\n        codePoint === LINE_TABULATION ||\n        (codePoint >= SHIFT_OUT && codePoint <= INFORMATION_SEPARATOR_ONE) ||\n        codePoint === DELETE);\n};\nvar isValidEscape = function (c1, c2) {\n    if (c1 !== REVERSE_SOLIDUS) {\n        return false;\n    }\n    return c2 !== LINE_FEED;\n};\nvar isIdentifierStart = function (c1, c2, c3) {\n    if (c1 === HYPHEN_MINUS) {\n        return isNameStartCodePoint(c2) || isValidEscape(c2, c3);\n    }\n    else if (isNameStartCodePoint(c1)) {\n        return true;\n    }\n    else if (c1 === REVERSE_SOLIDUS && isValidEscape(c1, c2)) {\n        return true;\n    }\n    return false;\n};\nvar isNumberStart = function (c1, c2, c3) {\n    if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n        if (isDigit(c2)) {\n            return true;\n        }\n        return c2 === FULL_STOP && isDigit(c3);\n    }\n    if (c1 === FULL_STOP) {\n        return isDigit(c2);\n    }\n    return isDigit(c1);\n};\nvar stringToNumber = function (codePoints) {\n    var c = 0;\n    var sign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            sign = -1;\n        }\n        c++;\n    }\n    var integers = [];\n    while (isDigit(codePoints[c])) {\n        integers.push(codePoints[c++]);\n    }\n    var int = integers.length ? parseInt(fromCodePoint$1.apply(void 0, integers), 10) : 0;\n    if (codePoints[c] === FULL_STOP) {\n        c++;\n    }\n    var fraction = [];\n    while (isDigit(codePoints[c])) {\n        fraction.push(codePoints[c++]);\n    }\n    var fracd = fraction.length;\n    var frac = fracd ? parseInt(fromCodePoint$1.apply(void 0, fraction), 10) : 0;\n    if (codePoints[c] === E || codePoints[c] === e) {\n        c++;\n    }\n    var expsign = 1;\n    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {\n        if (codePoints[c] === HYPHEN_MINUS) {\n            expsign = -1;\n        }\n        c++;\n    }\n    var exponent = [];\n    while (isDigit(codePoints[c])) {\n        exponent.push(codePoints[c++]);\n    }\n    var exp = exponent.length ? parseInt(fromCodePoint$1.apply(void 0, exponent), 10) : 0;\n    return sign * (int + frac * Math.pow(10, -fracd)) * Math.pow(10, expsign * exp);\n};\nvar LEFT_PARENTHESIS_TOKEN = {\n    type: 2 /* LEFT_PARENTHESIS_TOKEN */\n};\nvar RIGHT_PARENTHESIS_TOKEN = {\n    type: 3 /* RIGHT_PARENTHESIS_TOKEN */\n};\nvar COMMA_TOKEN = { type: 4 /* COMMA_TOKEN */ };\nvar SUFFIX_MATCH_TOKEN = { type: 13 /* SUFFIX_MATCH_TOKEN */ };\nvar PREFIX_MATCH_TOKEN = { type: 8 /* PREFIX_MATCH_TOKEN */ };\nvar COLUMN_TOKEN = { type: 21 /* COLUMN_TOKEN */ };\nvar DASH_MATCH_TOKEN = { type: 9 /* DASH_MATCH_TOKEN */ };\nvar INCLUDE_MATCH_TOKEN = { type: 10 /* INCLUDE_MATCH_TOKEN */ };\nvar LEFT_CURLY_BRACKET_TOKEN = {\n    type: 11 /* LEFT_CURLY_BRACKET_TOKEN */\n};\nvar RIGHT_CURLY_BRACKET_TOKEN = {\n    type: 12 /* RIGHT_CURLY_BRACKET_TOKEN */\n};\nvar SUBSTRING_MATCH_TOKEN = { type: 14 /* SUBSTRING_MATCH_TOKEN */ };\nvar BAD_URL_TOKEN = { type: 23 /* BAD_URL_TOKEN */ };\nvar BAD_STRING_TOKEN = { type: 1 /* BAD_STRING_TOKEN */ };\nvar CDO_TOKEN = { type: 25 /* CDO_TOKEN */ };\nvar CDC_TOKEN = { type: 24 /* CDC_TOKEN */ };\nvar COLON_TOKEN = { type: 26 /* COLON_TOKEN */ };\nvar SEMICOLON_TOKEN = { type: 27 /* SEMICOLON_TOKEN */ };\nvar LEFT_SQUARE_BRACKET_TOKEN = {\n    type: 28 /* LEFT_SQUARE_BRACKET_TOKEN */\n};\nvar RIGHT_SQUARE_BRACKET_TOKEN = {\n    type: 29 /* RIGHT_SQUARE_BRACKET_TOKEN */\n};\nvar WHITESPACE_TOKEN = { type: 31 /* WHITESPACE_TOKEN */ };\nvar EOF_TOKEN = { type: 32 /* EOF_TOKEN */ };\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer() {\n        this._value = [];\n    }\n    Tokenizer.prototype.write = function (chunk) {\n        this._value = this._value.concat(toCodePoints$1(chunk));\n    };\n    Tokenizer.prototype.read = function () {\n        var tokens = [];\n        var token = this.consumeToken();\n        while (token !== EOF_TOKEN) {\n            tokens.push(token);\n            token = this.consumeToken();\n        }\n        return tokens;\n    };\n    Tokenizer.prototype.consumeToken = function () {\n        var codePoint = this.consumeCodePoint();\n        switch (codePoint) {\n            case QUOTATION_MARK:\n                return this.consumeStringToken(QUOTATION_MARK);\n            case NUMBER_SIGN:\n                var c1 = this.peekCodePoint(0);\n                var c2 = this.peekCodePoint(1);\n                var c3 = this.peekCodePoint(2);\n                if (isNameCodePoint(c1) || isValidEscape(c2, c3)) {\n                    var flags = isIdentifierStart(c1, c2, c3) ? FLAG_ID : FLAG_UNRESTRICTED;\n                    var value = this.consumeName();\n                    return { type: 5 /* HASH_TOKEN */, value: value, flags: flags };\n                }\n                break;\n            case DOLLAR_SIGN:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUFFIX_MATCH_TOKEN;\n                }\n                break;\n            case APOSTROPHE:\n                return this.consumeStringToken(APOSTROPHE);\n            case LEFT_PARENTHESIS:\n                return LEFT_PARENTHESIS_TOKEN;\n            case RIGHT_PARENTHESIS:\n                return RIGHT_PARENTHESIS_TOKEN;\n            case ASTERISK:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return SUBSTRING_MATCH_TOKEN;\n                }\n                break;\n            case PLUS_SIGN:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case COMMA:\n                return COMMA_TOKEN;\n            case HYPHEN_MINUS:\n                var e1 = codePoint;\n                var e2 = this.peekCodePoint(0);\n                var e3 = this.peekCodePoint(1);\n                if (isNumberStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                if (isIdentifierStart(e1, e2, e3)) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n                if (e2 === HYPHEN_MINUS && e3 === GREATER_THAN_SIGN) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDC_TOKEN;\n                }\n                break;\n            case FULL_STOP:\n                if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeNumericToken();\n                }\n                break;\n            case SOLIDUS:\n                if (this.peekCodePoint(0) === ASTERISK) {\n                    this.consumeCodePoint();\n                    while (true) {\n                        var c = this.consumeCodePoint();\n                        if (c === ASTERISK) {\n                            c = this.consumeCodePoint();\n                            if (c === SOLIDUS) {\n                                return this.consumeToken();\n                            }\n                        }\n                        if (c === EOF) {\n                            return this.consumeToken();\n                        }\n                    }\n                }\n                break;\n            case COLON:\n                return COLON_TOKEN;\n            case SEMICOLON:\n                return SEMICOLON_TOKEN;\n            case LESS_THAN_SIGN:\n                if (this.peekCodePoint(0) === EXCLAMATION_MARK &&\n                    this.peekCodePoint(1) === HYPHEN_MINUS &&\n                    this.peekCodePoint(2) === HYPHEN_MINUS) {\n                    this.consumeCodePoint();\n                    this.consumeCodePoint();\n                    return CDO_TOKEN;\n                }\n                break;\n            case COMMERCIAL_AT:\n                var a1 = this.peekCodePoint(0);\n                var a2 = this.peekCodePoint(1);\n                var a3 = this.peekCodePoint(2);\n                if (isIdentifierStart(a1, a2, a3)) {\n                    var value = this.consumeName();\n                    return { type: 7 /* AT_KEYWORD_TOKEN */, value: value };\n                }\n                break;\n            case LEFT_SQUARE_BRACKET:\n                return LEFT_SQUARE_BRACKET_TOKEN;\n            case REVERSE_SOLIDUS:\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    this.reconsumeCodePoint(codePoint);\n                    return this.consumeIdentLikeToken();\n                }\n                break;\n            case RIGHT_SQUARE_BRACKET:\n                return RIGHT_SQUARE_BRACKET_TOKEN;\n            case CIRCUMFLEX_ACCENT:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return PREFIX_MATCH_TOKEN;\n                }\n                break;\n            case LEFT_CURLY_BRACKET:\n                return LEFT_CURLY_BRACKET_TOKEN;\n            case RIGHT_CURLY_BRACKET:\n                return RIGHT_CURLY_BRACKET_TOKEN;\n            case u:\n            case U:\n                var u1 = this.peekCodePoint(0);\n                var u2 = this.peekCodePoint(1);\n                if (u1 === PLUS_SIGN && (isHex(u2) || u2 === QUESTION_MARK)) {\n                    this.consumeCodePoint();\n                    this.consumeUnicodeRangeToken();\n                }\n                this.reconsumeCodePoint(codePoint);\n                return this.consumeIdentLikeToken();\n            case VERTICAL_LINE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return DASH_MATCH_TOKEN;\n                }\n                if (this.peekCodePoint(0) === VERTICAL_LINE) {\n                    this.consumeCodePoint();\n                    return COLUMN_TOKEN;\n                }\n                break;\n            case TILDE:\n                if (this.peekCodePoint(0) === EQUALS_SIGN) {\n                    this.consumeCodePoint();\n                    return INCLUDE_MATCH_TOKEN;\n                }\n                break;\n            case EOF:\n                return EOF_TOKEN;\n        }\n        if (isWhiteSpace(codePoint)) {\n            this.consumeWhiteSpace();\n            return WHITESPACE_TOKEN;\n        }\n        if (isDigit(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeNumericToken();\n        }\n        if (isNameStartCodePoint(codePoint)) {\n            this.reconsumeCodePoint(codePoint);\n            return this.consumeIdentLikeToken();\n        }\n        return { type: 6 /* DELIM_TOKEN */, value: fromCodePoint$1(codePoint) };\n    };\n    Tokenizer.prototype.consumeCodePoint = function () {\n        var value = this._value.shift();\n        return typeof value === 'undefined' ? -1 : value;\n    };\n    Tokenizer.prototype.reconsumeCodePoint = function (codePoint) {\n        this._value.unshift(codePoint);\n    };\n    Tokenizer.prototype.peekCodePoint = function (delta) {\n        if (delta >= this._value.length) {\n            return -1;\n        }\n        return this._value[delta];\n    };\n    Tokenizer.prototype.consumeUnicodeRangeToken = function () {\n        var digits = [];\n        var codePoint = this.consumeCodePoint();\n        while (isHex(codePoint) && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n        }\n        var questionMarks = false;\n        while (codePoint === QUESTION_MARK && digits.length < 6) {\n            digits.push(codePoint);\n            codePoint = this.consumeCodePoint();\n            questionMarks = true;\n        }\n        if (questionMarks) {\n            var start_1 = parseInt(fromCodePoint$1.apply(void 0, digits.map(function (digit) { return (digit === QUESTION_MARK ? ZERO : digit); })), 16);\n            var end = parseInt(fromCodePoint$1.apply(void 0, digits.map(function (digit) { return (digit === QUESTION_MARK ? F : digit); })), 16);\n            return { type: 30 /* UNICODE_RANGE_TOKEN */, start: start_1, end: end };\n        }\n        var start = parseInt(fromCodePoint$1.apply(void 0, digits), 16);\n        if (this.peekCodePoint(0) === HYPHEN_MINUS && isHex(this.peekCodePoint(1))) {\n            this.consumeCodePoint();\n            codePoint = this.consumeCodePoint();\n            var endDigits = [];\n            while (isHex(codePoint) && endDigits.length < 6) {\n                endDigits.push(codePoint);\n                codePoint = this.consumeCodePoint();\n            }\n            var end = parseInt(fromCodePoint$1.apply(void 0, endDigits), 16);\n            return { type: 30 /* UNICODE_RANGE_TOKEN */, start: start, end: end };\n        }\n        else {\n            return { type: 30 /* UNICODE_RANGE_TOKEN */, start: start, end: start };\n        }\n    };\n    Tokenizer.prototype.consumeIdentLikeToken = function () {\n        var value = this.consumeName();\n        if (value.toLowerCase() === 'url' && this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return this.consumeUrlToken();\n        }\n        else if (this.peekCodePoint(0) === LEFT_PARENTHESIS) {\n            this.consumeCodePoint();\n            return { type: 19 /* FUNCTION_TOKEN */, value: value };\n        }\n        return { type: 20 /* IDENT_TOKEN */, value: value };\n    };\n    Tokenizer.prototype.consumeUrlToken = function () {\n        var value = [];\n        this.consumeWhiteSpace();\n        if (this.peekCodePoint(0) === EOF) {\n            return { type: 22 /* URL_TOKEN */, value: '' };\n        }\n        var next = this.peekCodePoint(0);\n        if (next === APOSTROPHE || next === QUOTATION_MARK) {\n            var stringToken = this.consumeStringToken(this.consumeCodePoint());\n            if (stringToken.type === 0 /* STRING_TOKEN */) {\n                this.consumeWhiteSpace();\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return { type: 22 /* URL_TOKEN */, value: stringToken.value };\n                }\n            }\n            this.consumeBadUrlRemnants();\n            return BAD_URL_TOKEN;\n        }\n        while (true) {\n            var codePoint = this.consumeCodePoint();\n            if (codePoint === EOF || codePoint === RIGHT_PARENTHESIS) {\n                return { type: 22 /* URL_TOKEN */, value: fromCodePoint$1.apply(void 0, value) };\n            }\n            else if (isWhiteSpace(codePoint)) {\n                this.consumeWhiteSpace();\n                if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {\n                    this.consumeCodePoint();\n                    return { type: 22 /* URL_TOKEN */, value: fromCodePoint$1.apply(void 0, value) };\n                }\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            }\n            else if (codePoint === QUOTATION_MARK ||\n                codePoint === APOSTROPHE ||\n                codePoint === LEFT_PARENTHESIS ||\n                isNonPrintableCodePoint(codePoint)) {\n                this.consumeBadUrlRemnants();\n                return BAD_URL_TOKEN;\n            }\n            else if (codePoint === REVERSE_SOLIDUS) {\n                if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                    value.push(this.consumeEscapedCodePoint());\n                }\n                else {\n                    this.consumeBadUrlRemnants();\n                    return BAD_URL_TOKEN;\n                }\n            }\n            else {\n                value.push(codePoint);\n            }\n        }\n    };\n    Tokenizer.prototype.consumeWhiteSpace = function () {\n        while (isWhiteSpace(this.peekCodePoint(0))) {\n            this.consumeCodePoint();\n        }\n    };\n    Tokenizer.prototype.consumeBadUrlRemnants = function () {\n        while (true) {\n            var codePoint = this.consumeCodePoint();\n            if (codePoint === RIGHT_PARENTHESIS || codePoint === EOF) {\n                return;\n            }\n            if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                this.consumeEscapedCodePoint();\n            }\n        }\n    };\n    Tokenizer.prototype.consumeStringSlice = function (count) {\n        var SLICE_STACK_SIZE = 50000;\n        var value = '';\n        while (count > 0) {\n            var amount = Math.min(SLICE_STACK_SIZE, count);\n            value += fromCodePoint$1.apply(void 0, this._value.splice(0, amount));\n            count -= amount;\n        }\n        this._value.shift();\n        return value;\n    };\n    Tokenizer.prototype.consumeStringToken = function (endingCodePoint) {\n        var value = '';\n        var i = 0;\n        do {\n            var codePoint = this._value[i];\n            if (codePoint === EOF || codePoint === undefined || codePoint === endingCodePoint) {\n                value += this.consumeStringSlice(i);\n                return { type: 0 /* STRING_TOKEN */, value: value };\n            }\n            if (codePoint === LINE_FEED) {\n                this._value.splice(0, i);\n                return BAD_STRING_TOKEN;\n            }\n            if (codePoint === REVERSE_SOLIDUS) {\n                var next = this._value[i + 1];\n                if (next !== EOF && next !== undefined) {\n                    if (next === LINE_FEED) {\n                        value += this.consumeStringSlice(i);\n                        i = -1;\n                        this._value.shift();\n                    }\n                    else if (isValidEscape(codePoint, next)) {\n                        value += this.consumeStringSlice(i);\n                        value += fromCodePoint$1(this.consumeEscapedCodePoint());\n                        i = -1;\n                    }\n                }\n            }\n            i++;\n        } while (true);\n    };\n    Tokenizer.prototype.consumeNumber = function () {\n        var repr = [];\n        var type = FLAG_INTEGER;\n        var c1 = this.peekCodePoint(0);\n        if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {\n            repr.push(this.consumeCodePoint());\n        }\n        while (isDigit(this.peekCodePoint(0))) {\n            repr.push(this.consumeCodePoint());\n        }\n        c1 = this.peekCodePoint(0);\n        var c2 = this.peekCodePoint(1);\n        if (c1 === FULL_STOP && isDigit(c2)) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n        c1 = this.peekCodePoint(0);\n        c2 = this.peekCodePoint(1);\n        var c3 = this.peekCodePoint(2);\n        if ((c1 === E || c1 === e) && (((c2 === PLUS_SIGN || c2 === HYPHEN_MINUS) && isDigit(c3)) || isDigit(c2))) {\n            repr.push(this.consumeCodePoint(), this.consumeCodePoint());\n            type = FLAG_NUMBER;\n            while (isDigit(this.peekCodePoint(0))) {\n                repr.push(this.consumeCodePoint());\n            }\n        }\n        return [stringToNumber(repr), type];\n    };\n    Tokenizer.prototype.consumeNumericToken = function () {\n        var _a = this.consumeNumber(), number = _a[0], flags = _a[1];\n        var c1 = this.peekCodePoint(0);\n        var c2 = this.peekCodePoint(1);\n        var c3 = this.peekCodePoint(2);\n        if (isIdentifierStart(c1, c2, c3)) {\n            var unit = this.consumeName();\n            return { type: 15 /* DIMENSION_TOKEN */, number: number, flags: flags, unit: unit };\n        }\n        if (c1 === PERCENTAGE_SIGN) {\n            this.consumeCodePoint();\n            return { type: 16 /* PERCENTAGE_TOKEN */, number: number, flags: flags };\n        }\n        return { type: 17 /* NUMBER_TOKEN */, number: number, flags: flags };\n    };\n    Tokenizer.prototype.consumeEscapedCodePoint = function () {\n        var codePoint = this.consumeCodePoint();\n        if (isHex(codePoint)) {\n            var hex = fromCodePoint$1(codePoint);\n            while (isHex(this.peekCodePoint(0)) && hex.length < 6) {\n                hex += fromCodePoint$1(this.consumeCodePoint());\n            }\n            if (isWhiteSpace(this.peekCodePoint(0))) {\n                this.consumeCodePoint();\n            }\n            var hexCodePoint = parseInt(hex, 16);\n            if (hexCodePoint === 0 || isSurrogateCodePoint(hexCodePoint) || hexCodePoint > 0x10ffff) {\n                return REPLACEMENT_CHARACTER;\n            }\n            return hexCodePoint;\n        }\n        if (codePoint === EOF) {\n            return REPLACEMENT_CHARACTER;\n        }\n        return codePoint;\n    };\n    Tokenizer.prototype.consumeName = function () {\n        var result = '';\n        while (true) {\n            var codePoint = this.consumeCodePoint();\n            if (isNameCodePoint(codePoint)) {\n                result += fromCodePoint$1(codePoint);\n            }\n            else if (isValidEscape(codePoint, this.peekCodePoint(0))) {\n                result += fromCodePoint$1(this.consumeEscapedCodePoint());\n            }\n            else {\n                this.reconsumeCodePoint(codePoint);\n                return result;\n            }\n        }\n    };\n    return Tokenizer;\n}());\n\nvar Parser = /** @class */ (function () {\n    function Parser(tokens) {\n        this._tokens = tokens;\n    }\n    Parser.create = function (value) {\n        var tokenizer = new Tokenizer();\n        tokenizer.write(value);\n        return new Parser(tokenizer.read());\n    };\n    Parser.parseValue = function (value) {\n        return Parser.create(value).parseComponentValue();\n    };\n    Parser.parseValues = function (value) {\n        return Parser.create(value).parseComponentValues();\n    };\n    Parser.prototype.parseComponentValue = function () {\n        var token = this.consumeToken();\n        while (token.type === 31 /* WHITESPACE_TOKEN */) {\n            token = this.consumeToken();\n        }\n        if (token.type === 32 /* EOF_TOKEN */) {\n            throw new SyntaxError(\"Error parsing CSS component value, unexpected EOF\");\n        }\n        this.reconsumeToken(token);\n        var value = this.consumeComponentValue();\n        do {\n            token = this.consumeToken();\n        } while (token.type === 31 /* WHITESPACE_TOKEN */);\n        if (token.type === 32 /* EOF_TOKEN */) {\n            return value;\n        }\n        throw new SyntaxError(\"Error parsing CSS component value, multiple values found when expecting only one\");\n    };\n    Parser.prototype.parseComponentValues = function () {\n        var values = [];\n        while (true) {\n            var value = this.consumeComponentValue();\n            if (value.type === 32 /* EOF_TOKEN */) {\n                return values;\n            }\n            values.push(value);\n            values.push();\n        }\n    };\n    Parser.prototype.consumeComponentValue = function () {\n        var token = this.consumeToken();\n        switch (token.type) {\n            case 11 /* LEFT_CURLY_BRACKET_TOKEN */:\n            case 28 /* LEFT_SQUARE_BRACKET_TOKEN */:\n            case 2 /* LEFT_PARENTHESIS_TOKEN */:\n                return this.consumeSimpleBlock(token.type);\n            case 19 /* FUNCTION_TOKEN */:\n                return this.consumeFunction(token);\n        }\n        return token;\n    };\n    Parser.prototype.consumeSimpleBlock = function (type) {\n        var block = { type: type, values: [] };\n        var token = this.consumeToken();\n        while (true) {\n            if (token.type === 32 /* EOF_TOKEN */ || isEndingTokenFor(token, type)) {\n                return block;\n            }\n            this.reconsumeToken(token);\n            block.values.push(this.consumeComponentValue());\n            token = this.consumeToken();\n        }\n    };\n    Parser.prototype.consumeFunction = function (functionToken) {\n        var cssFunction = {\n            name: functionToken.value,\n            values: [],\n            type: 18 /* FUNCTION */\n        };\n        while (true) {\n            var token = this.consumeToken();\n            if (token.type === 32 /* EOF_TOKEN */ || token.type === 3 /* RIGHT_PARENTHESIS_TOKEN */) {\n                return cssFunction;\n            }\n            this.reconsumeToken(token);\n            cssFunction.values.push(this.consumeComponentValue());\n        }\n    };\n    Parser.prototype.consumeToken = function () {\n        var token = this._tokens.shift();\n        return typeof token === 'undefined' ? EOF_TOKEN : token;\n    };\n    Parser.prototype.reconsumeToken = function (token) {\n        this._tokens.unshift(token);\n    };\n    return Parser;\n}());\nvar isDimensionToken = function (token) { return token.type === 15 /* DIMENSION_TOKEN */; };\nvar isNumberToken = function (token) { return token.type === 17 /* NUMBER_TOKEN */; };\nvar isIdentToken = function (token) { return token.type === 20 /* IDENT_TOKEN */; };\nvar isStringToken = function (token) { return token.type === 0 /* STRING_TOKEN */; };\nvar isIdentWithValue = function (token, value) {\n    return isIdentToken(token) && token.value === value;\n};\nvar nonWhiteSpace = function (token) { return token.type !== 31 /* WHITESPACE_TOKEN */; };\nvar nonFunctionArgSeparator = function (token) {\n    return token.type !== 31 /* WHITESPACE_TOKEN */ && token.type !== 4 /* COMMA_TOKEN */;\n};\nvar parseFunctionArgs = function (tokens) {\n    var args = [];\n    var arg = [];\n    tokens.forEach(function (token) {\n        if (token.type === 4 /* COMMA_TOKEN */) {\n            if (arg.length === 0) {\n                throw new Error(\"Error parsing function args, zero tokens for arg\");\n            }\n            args.push(arg);\n            arg = [];\n            return;\n        }\n        if (token.type !== 31 /* WHITESPACE_TOKEN */) {\n            arg.push(token);\n        }\n    });\n    if (arg.length) {\n        args.push(arg);\n    }\n    return args;\n};\nvar isEndingTokenFor = function (token, type) {\n    if (type === 11 /* LEFT_CURLY_BRACKET_TOKEN */ && token.type === 12 /* RIGHT_CURLY_BRACKET_TOKEN */) {\n        return true;\n    }\n    if (type === 28 /* LEFT_SQUARE_BRACKET_TOKEN */ && token.type === 29 /* RIGHT_SQUARE_BRACKET_TOKEN */) {\n        return true;\n    }\n    return type === 2 /* LEFT_PARENTHESIS_TOKEN */ && token.type === 3 /* RIGHT_PARENTHESIS_TOKEN */;\n};\n\nvar isLength = function (token) {\n    return token.type === 17 /* NUMBER_TOKEN */ || token.type === 15 /* DIMENSION_TOKEN */;\n};\n\nvar isLengthPercentage = function (token) {\n    return token.type === 16 /* PERCENTAGE_TOKEN */ || isLength(token);\n};\nvar parseLengthPercentageTuple = function (tokens) {\n    return tokens.length > 1 ? [tokens[0], tokens[1]] : [tokens[0]];\n};\nvar ZERO_LENGTH = {\n    type: 17 /* NUMBER_TOKEN */,\n    number: 0,\n    flags: FLAG_INTEGER\n};\nvar FIFTY_PERCENT = {\n    type: 16 /* PERCENTAGE_TOKEN */,\n    number: 50,\n    flags: FLAG_INTEGER\n};\nvar HUNDRED_PERCENT = {\n    type: 16 /* PERCENTAGE_TOKEN */,\n    number: 100,\n    flags: FLAG_INTEGER\n};\nvar getAbsoluteValueForTuple = function (tuple, width, height) {\n    var x = tuple[0], y = tuple[1];\n    return [getAbsoluteValue(x, width), getAbsoluteValue(typeof y !== 'undefined' ? y : x, height)];\n};\nvar getAbsoluteValue = function (token, parent) {\n    if (token.type === 16 /* PERCENTAGE_TOKEN */) {\n        return (token.number / 100) * parent;\n    }\n    if (isDimensionToken(token)) {\n        switch (token.unit) {\n            case 'rem':\n            case 'em':\n                return 16 * token.number; // TODO use correct font-size\n            case 'px':\n            default:\n                return token.number;\n        }\n    }\n    return token.number;\n};\n\nvar DEG = 'deg';\nvar GRAD = 'grad';\nvar RAD = 'rad';\nvar TURN = 'turn';\nvar angle = {\n    name: 'angle',\n    parse: function (_context, value) {\n        if (value.type === 15 /* DIMENSION_TOKEN */) {\n            switch (value.unit) {\n                case DEG:\n                    return (Math.PI * value.number) / 180;\n                case GRAD:\n                    return (Math.PI / 200) * value.number;\n                case RAD:\n                    return value.number;\n                case TURN:\n                    return Math.PI * 2 * value.number;\n            }\n        }\n        throw new Error(\"Unsupported angle type\");\n    }\n};\nvar isAngle = function (value) {\n    if (value.type === 15 /* DIMENSION_TOKEN */) {\n        if (value.unit === DEG || value.unit === GRAD || value.unit === RAD || value.unit === TURN) {\n            return true;\n        }\n    }\n    return false;\n};\nvar parseNamedSide = function (tokens) {\n    var sideOrCorner = tokens\n        .filter(isIdentToken)\n        .map(function (ident) { return ident.value; })\n        .join(' ');\n    switch (sideOrCorner) {\n        case 'to bottom right':\n        case 'to right bottom':\n        case 'left top':\n        case 'top left':\n            return [ZERO_LENGTH, ZERO_LENGTH];\n        case 'to top':\n        case 'bottom':\n            return deg(0);\n        case 'to bottom left':\n        case 'to left bottom':\n        case 'right top':\n        case 'top right':\n            return [ZERO_LENGTH, HUNDRED_PERCENT];\n        case 'to right':\n        case 'left':\n            return deg(90);\n        case 'to top left':\n        case 'to left top':\n        case 'right bottom':\n        case 'bottom right':\n            return [HUNDRED_PERCENT, HUNDRED_PERCENT];\n        case 'to bottom':\n        case 'top':\n            return deg(180);\n        case 'to top right':\n        case 'to right top':\n        case 'left bottom':\n        case 'bottom left':\n            return [HUNDRED_PERCENT, ZERO_LENGTH];\n        case 'to left':\n        case 'right':\n            return deg(270);\n    }\n    return 0;\n};\nvar deg = function (deg) { return (Math.PI * deg) / 180; };\n\nvar color$1 = {\n    name: 'color',\n    parse: function (context, value) {\n        if (value.type === 18 /* FUNCTION */) {\n            var colorFunction = SUPPORTED_COLOR_FUNCTIONS[value.name];\n            if (typeof colorFunction === 'undefined') {\n                throw new Error(\"Attempting to parse an unsupported color function \\\"\" + value.name + \"\\\"\");\n            }\n            return colorFunction(context, value.values);\n        }\n        if (value.type === 5 /* HASH_TOKEN */) {\n            if (value.value.length === 3) {\n                var r = value.value.substring(0, 1);\n                var g = value.value.substring(1, 2);\n                var b = value.value.substring(2, 3);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), 1);\n            }\n            if (value.value.length === 4) {\n                var r = value.value.substring(0, 1);\n                var g = value.value.substring(1, 2);\n                var b = value.value.substring(2, 3);\n                var a = value.value.substring(3, 4);\n                return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), parseInt(a + a, 16) / 255);\n            }\n            if (value.value.length === 6) {\n                var r = value.value.substring(0, 2);\n                var g = value.value.substring(2, 4);\n                var b = value.value.substring(4, 6);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), 1);\n            }\n            if (value.value.length === 8) {\n                var r = value.value.substring(0, 2);\n                var g = value.value.substring(2, 4);\n                var b = value.value.substring(4, 6);\n                var a = value.value.substring(6, 8);\n                return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), parseInt(a, 16) / 255);\n            }\n        }\n        if (value.type === 20 /* IDENT_TOKEN */) {\n            var namedColor = COLORS[value.value.toUpperCase()];\n            if (typeof namedColor !== 'undefined') {\n                return namedColor;\n            }\n        }\n        return COLORS.TRANSPARENT;\n    }\n};\nvar isTransparent = function (color) { return (0xff & color) === 0; };\nvar asString = function (color) {\n    var alpha = 0xff & color;\n    var blue = 0xff & (color >> 8);\n    var green = 0xff & (color >> 16);\n    var red = 0xff & (color >> 24);\n    return alpha < 255 ? \"rgba(\" + red + \",\" + green + \",\" + blue + \",\" + alpha / 255 + \")\" : \"rgb(\" + red + \",\" + green + \",\" + blue + \")\";\n};\nvar pack = function (r, g, b, a) {\n    return ((r << 24) | (g << 16) | (b << 8) | (Math.round(a * 255) << 0)) >>> 0;\n};\nvar getTokenColorValue = function (token, i) {\n    if (token.type === 17 /* NUMBER_TOKEN */) {\n        return token.number;\n    }\n    if (token.type === 16 /* PERCENTAGE_TOKEN */) {\n        var max = i === 3 ? 1 : 255;\n        return i === 3 ? (token.number / 100) * max : Math.round((token.number / 100) * max);\n    }\n    return 0;\n};\nvar rgb = function (_context, args) {\n    var tokens = args.filter(nonFunctionArgSeparator);\n    if (tokens.length === 3) {\n        var _a = tokens.map(getTokenColorValue), r = _a[0], g = _a[1], b = _a[2];\n        return pack(r, g, b, 1);\n    }\n    if (tokens.length === 4) {\n        var _b = tokens.map(getTokenColorValue), r = _b[0], g = _b[1], b = _b[2], a = _b[3];\n        return pack(r, g, b, a);\n    }\n    return 0;\n};\nfunction hue2rgb(t1, t2, hue) {\n    if (hue < 0) {\n        hue += 1;\n    }\n    if (hue >= 1) {\n        hue -= 1;\n    }\n    if (hue < 1 / 6) {\n        return (t2 - t1) * hue * 6 + t1;\n    }\n    else if (hue < 1 / 2) {\n        return t2;\n    }\n    else if (hue < 2 / 3) {\n        return (t2 - t1) * 6 * (2 / 3 - hue) + t1;\n    }\n    else {\n        return t1;\n    }\n}\nvar hsl = function (context, args) {\n    var tokens = args.filter(nonFunctionArgSeparator);\n    var hue = tokens[0], saturation = tokens[1], lightness = tokens[2], alpha = tokens[3];\n    var h = (hue.type === 17 /* NUMBER_TOKEN */ ? deg(hue.number) : angle.parse(context, hue)) / (Math.PI * 2);\n    var s = isLengthPercentage(saturation) ? saturation.number / 100 : 0;\n    var l = isLengthPercentage(lightness) ? lightness.number / 100 : 0;\n    var a = typeof alpha !== 'undefined' && isLengthPercentage(alpha) ? getAbsoluteValue(alpha, 1) : 1;\n    if (s === 0) {\n        return pack(l * 255, l * 255, l * 255, 1);\n    }\n    var t2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var t1 = l * 2 - t2;\n    var r = hue2rgb(t1, t2, h + 1 / 3);\n    var g = hue2rgb(t1, t2, h);\n    var b = hue2rgb(t1, t2, h - 1 / 3);\n    return pack(r * 255, g * 255, b * 255, a);\n};\nvar SUPPORTED_COLOR_FUNCTIONS = {\n    hsl: hsl,\n    hsla: hsl,\n    rgb: rgb,\n    rgba: rgb\n};\nvar parseColor = function (context, value) {\n    return color$1.parse(context, Parser.create(value).parseComponentValue());\n};\nvar COLORS = {\n    ALICEBLUE: 0xf0f8ffff,\n    ANTIQUEWHITE: 0xfaebd7ff,\n    AQUA: 0x00ffffff,\n    AQUAMARINE: 0x7fffd4ff,\n    AZURE: 0xf0ffffff,\n    BEIGE: 0xf5f5dcff,\n    BISQUE: 0xffe4c4ff,\n    BLACK: 0x000000ff,\n    BLANCHEDALMOND: 0xffebcdff,\n    BLUE: 0x0000ffff,\n    BLUEVIOLET: 0x8a2be2ff,\n    BROWN: 0xa52a2aff,\n    BURLYWOOD: 0xdeb887ff,\n    CADETBLUE: 0x5f9ea0ff,\n    CHARTREUSE: 0x7fff00ff,\n    CHOCOLATE: 0xd2691eff,\n    CORAL: 0xff7f50ff,\n    CORNFLOWERBLUE: 0x6495edff,\n    CORNSILK: 0xfff8dcff,\n    CRIMSON: 0xdc143cff,\n    CYAN: 0x00ffffff,\n    DARKBLUE: 0x00008bff,\n    DARKCYAN: 0x008b8bff,\n    DARKGOLDENROD: 0xb886bbff,\n    DARKGRAY: 0xa9a9a9ff,\n    DARKGREEN: 0x006400ff,\n    DARKGREY: 0xa9a9a9ff,\n    DARKKHAKI: 0xbdb76bff,\n    DARKMAGENTA: 0x8b008bff,\n    DARKOLIVEGREEN: 0x556b2fff,\n    DARKORANGE: 0xff8c00ff,\n    DARKORCHID: 0x9932ccff,\n    DARKRED: 0x8b0000ff,\n    DARKSALMON: 0xe9967aff,\n    DARKSEAGREEN: 0x8fbc8fff,\n    DARKSLATEBLUE: 0x483d8bff,\n    DARKSLATEGRAY: 0x2f4f4fff,\n    DARKSLATEGREY: 0x2f4f4fff,\n    DARKTURQUOISE: 0x00ced1ff,\n    DARKVIOLET: 0x9400d3ff,\n    DEEPPINK: 0xff1493ff,\n    DEEPSKYBLUE: 0x00bfffff,\n    DIMGRAY: 0x696969ff,\n    DIMGREY: 0x696969ff,\n    DODGERBLUE: 0x1e90ffff,\n    FIREBRICK: 0xb22222ff,\n    FLORALWHITE: 0xfffaf0ff,\n    FORESTGREEN: 0x228b22ff,\n    FUCHSIA: 0xff00ffff,\n    GAINSBORO: 0xdcdcdcff,\n    GHOSTWHITE: 0xf8f8ffff,\n    GOLD: 0xffd700ff,\n    GOLDENROD: 0xdaa520ff,\n    GRAY: 0x808080ff,\n    GREEN: 0x008000ff,\n    GREENYELLOW: 0xadff2fff,\n    GREY: 0x808080ff,\n    HONEYDEW: 0xf0fff0ff,\n    HOTPINK: 0xff69b4ff,\n    INDIANRED: 0xcd5c5cff,\n    INDIGO: 0x4b0082ff,\n    IVORY: 0xfffff0ff,\n    KHAKI: 0xf0e68cff,\n    LAVENDER: 0xe6e6faff,\n    LAVENDERBLUSH: 0xfff0f5ff,\n    LAWNGREEN: 0x7cfc00ff,\n    LEMONCHIFFON: 0xfffacdff,\n    LIGHTBLUE: 0xadd8e6ff,\n    LIGHTCORAL: 0xf08080ff,\n    LIGHTCYAN: 0xe0ffffff,\n    LIGHTGOLDENRODYELLOW: 0xfafad2ff,\n    LIGHTGRAY: 0xd3d3d3ff,\n    LIGHTGREEN: 0x90ee90ff,\n    LIGHTGREY: 0xd3d3d3ff,\n    LIGHTPINK: 0xffb6c1ff,\n    LIGHTSALMON: 0xffa07aff,\n    LIGHTSEAGREEN: 0x20b2aaff,\n    LIGHTSKYBLUE: 0x87cefaff,\n    LIGHTSLATEGRAY: 0x778899ff,\n    LIGHTSLATEGREY: 0x778899ff,\n    LIGHTSTEELBLUE: 0xb0c4deff,\n    LIGHTYELLOW: 0xffffe0ff,\n    LIME: 0x00ff00ff,\n    LIMEGREEN: 0x32cd32ff,\n    LINEN: 0xfaf0e6ff,\n    MAGENTA: 0xff00ffff,\n    MAROON: 0x800000ff,\n    MEDIUMAQUAMARINE: 0x66cdaaff,\n    MEDIUMBLUE: 0x0000cdff,\n    MEDIUMORCHID: 0xba55d3ff,\n    MEDIUMPURPLE: 0x9370dbff,\n    MEDIUMSEAGREEN: 0x3cb371ff,\n    MEDIUMSLATEBLUE: 0x7b68eeff,\n    MEDIUMSPRINGGREEN: 0x00fa9aff,\n    MEDIUMTURQUOISE: 0x48d1ccff,\n    MEDIUMVIOLETRED: 0xc71585ff,\n    MIDNIGHTBLUE: 0x191970ff,\n    MINTCREAM: 0xf5fffaff,\n    MISTYROSE: 0xffe4e1ff,\n    MOCCASIN: 0xffe4b5ff,\n    NAVAJOWHITE: 0xffdeadff,\n    NAVY: 0x000080ff,\n    OLDLACE: 0xfdf5e6ff,\n    OLIVE: 0x808000ff,\n    OLIVEDRAB: 0x6b8e23ff,\n    ORANGE: 0xffa500ff,\n    ORANGERED: 0xff4500ff,\n    ORCHID: 0xda70d6ff,\n    PALEGOLDENROD: 0xeee8aaff,\n    PALEGREEN: 0x98fb98ff,\n    PALETURQUOISE: 0xafeeeeff,\n    PALEVIOLETRED: 0xdb7093ff,\n    PAPAYAWHIP: 0xffefd5ff,\n    PEACHPUFF: 0xffdab9ff,\n    PERU: 0xcd853fff,\n    PINK: 0xffc0cbff,\n    PLUM: 0xdda0ddff,\n    POWDERBLUE: 0xb0e0e6ff,\n    PURPLE: 0x800080ff,\n    REBECCAPURPLE: 0x663399ff,\n    RED: 0xff0000ff,\n    ROSYBROWN: 0xbc8f8fff,\n    ROYALBLUE: 0x4169e1ff,\n    SADDLEBROWN: 0x8b4513ff,\n    SALMON: 0xfa8072ff,\n    SANDYBROWN: 0xf4a460ff,\n    SEAGREEN: 0x2e8b57ff,\n    SEASHELL: 0xfff5eeff,\n    SIENNA: 0xa0522dff,\n    SILVER: 0xc0c0c0ff,\n    SKYBLUE: 0x87ceebff,\n    SLATEBLUE: 0x6a5acdff,\n    SLATEGRAY: 0x708090ff,\n    SLATEGREY: 0x708090ff,\n    SNOW: 0xfffafaff,\n    SPRINGGREEN: 0x00ff7fff,\n    STEELBLUE: 0x4682b4ff,\n    TAN: 0xd2b48cff,\n    TEAL: 0x008080ff,\n    THISTLE: 0xd8bfd8ff,\n    TOMATO: 0xff6347ff,\n    TRANSPARENT: 0x00000000,\n    TURQUOISE: 0x40e0d0ff,\n    VIOLET: 0xee82eeff,\n    WHEAT: 0xf5deb3ff,\n    WHITE: 0xffffffff,\n    WHITESMOKE: 0xf5f5f5ff,\n    YELLOW: 0xffff00ff,\n    YELLOWGREEN: 0x9acd32ff\n};\n\nvar backgroundClip = {\n    name: 'background-clip',\n    initialValue: 'border-box',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return tokens.map(function (token) {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return 1 /* PADDING_BOX */;\n                    case 'content-box':\n                        return 2 /* CONTENT_BOX */;\n                }\n            }\n            return 0 /* BORDER_BOX */;\n        });\n    }\n};\n\nvar backgroundColor = {\n    name: \"background-color\",\n    initialValue: 'transparent',\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: 'color'\n};\n\nvar parseColorStop = function (context, args) {\n    var color = color$1.parse(context, args[0]);\n    var stop = args[1];\n    return stop && isLengthPercentage(stop) ? { color: color, stop: stop } : { color: color, stop: null };\n};\nvar processColorStops = function (stops, lineLength) {\n    var first = stops[0];\n    var last = stops[stops.length - 1];\n    if (first.stop === null) {\n        first.stop = ZERO_LENGTH;\n    }\n    if (last.stop === null) {\n        last.stop = HUNDRED_PERCENT;\n    }\n    var processStops = [];\n    var previous = 0;\n    for (var i = 0; i < stops.length; i++) {\n        var stop_1 = stops[i].stop;\n        if (stop_1 !== null) {\n            var absoluteValue = getAbsoluteValue(stop_1, lineLength);\n            if (absoluteValue > previous) {\n                processStops.push(absoluteValue);\n            }\n            else {\n                processStops.push(previous);\n            }\n            previous = absoluteValue;\n        }\n        else {\n            processStops.push(null);\n        }\n    }\n    var gapBegin = null;\n    for (var i = 0; i < processStops.length; i++) {\n        var stop_2 = processStops[i];\n        if (stop_2 === null) {\n            if (gapBegin === null) {\n                gapBegin = i;\n            }\n        }\n        else if (gapBegin !== null) {\n            var gapLength = i - gapBegin;\n            var beforeGap = processStops[gapBegin - 1];\n            var gapValue = (stop_2 - beforeGap) / (gapLength + 1);\n            for (var g = 1; g <= gapLength; g++) {\n                processStops[gapBegin + g - 1] = gapValue * g;\n            }\n            gapBegin = null;\n        }\n    }\n    return stops.map(function (_a, i) {\n        var color = _a.color;\n        return { color: color, stop: Math.max(Math.min(1, processStops[i] / lineLength), 0) };\n    });\n};\nvar getAngleFromCorner = function (corner, width, height) {\n    var centerX = width / 2;\n    var centerY = height / 2;\n    var x = getAbsoluteValue(corner[0], width) - centerX;\n    var y = centerY - getAbsoluteValue(corner[1], height);\n    return (Math.atan2(y, x) + Math.PI * 2) % (Math.PI * 2);\n};\nvar calculateGradientDirection = function (angle, width, height) {\n    var radian = typeof angle === 'number' ? angle : getAngleFromCorner(angle, width, height);\n    var lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));\n    var halfWidth = width / 2;\n    var halfHeight = height / 2;\n    var halfLineLength = lineLength / 2;\n    var yDiff = Math.sin(radian - Math.PI / 2) * halfLineLength;\n    var xDiff = Math.cos(radian - Math.PI / 2) * halfLineLength;\n    return [lineLength, halfWidth - xDiff, halfWidth + xDiff, halfHeight - yDiff, halfHeight + yDiff];\n};\nvar distance = function (a, b) { return Math.sqrt(a * a + b * b); };\nvar findCorner = function (width, height, x, y, closest) {\n    var corners = [\n        [0, 0],\n        [0, height],\n        [width, 0],\n        [width, height]\n    ];\n    return corners.reduce(function (stat, corner) {\n        var cx = corner[0], cy = corner[1];\n        var d = distance(x - cx, y - cy);\n        if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {\n            return {\n                optimumCorner: corner,\n                optimumDistance: d\n            };\n        }\n        return stat;\n    }, {\n        optimumDistance: closest ? Infinity : -Infinity,\n        optimumCorner: null\n    }).optimumCorner;\n};\nvar calculateRadius = function (gradient, x, y, width, height) {\n    var rx = 0;\n    var ry = 0;\n    switch (gradient.size) {\n        case 0 /* CLOSEST_SIDE */:\n            // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradients center.\n            // If the shape is an ellipse, it exactly meets the closest side in each dimension.\n            if (gradient.shape === 0 /* CIRCLE */) {\n                rx = ry = Math.min(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            }\n            else if (gradient.shape === 1 /* ELLIPSE */) {\n                rx = Math.min(Math.abs(x), Math.abs(x - width));\n                ry = Math.min(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n        case 2 /* CLOSEST_CORNER */:\n            // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradients center.\n            // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.\n            if (gradient.shape === 0 /* CIRCLE */) {\n                rx = ry = Math.min(distance(x, y), distance(x, y - height), distance(x - width, y), distance(x - width, y - height));\n            }\n            else if (gradient.shape === 1 /* ELLIPSE */) {\n                // Compute the ratio ry/rx (which is to be the same as for \"closest-side\")\n                var c = Math.min(Math.abs(y), Math.abs(y - height)) / Math.min(Math.abs(x), Math.abs(x - width));\n                var _a = findCorner(width, height, x, y, true), cx = _a[0], cy = _a[1];\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n        case 1 /* FARTHEST_SIDE */:\n            // Same as closest-side, except the ending shape is sized based on the farthest side(s)\n            if (gradient.shape === 0 /* CIRCLE */) {\n                rx = ry = Math.max(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));\n            }\n            else if (gradient.shape === 1 /* ELLIPSE */) {\n                rx = Math.max(Math.abs(x), Math.abs(x - width));\n                ry = Math.max(Math.abs(y), Math.abs(y - height));\n            }\n            break;\n        case 3 /* FARTHEST_CORNER */:\n            // Same as closest-corner, except the ending shape is sized based on the farthest corner.\n            // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.\n            if (gradient.shape === 0 /* CIRCLE */) {\n                rx = ry = Math.max(distance(x, y), distance(x, y - height), distance(x - width, y), distance(x - width, y - height));\n            }\n            else if (gradient.shape === 1 /* ELLIPSE */) {\n                // Compute the ratio ry/rx (which is to be the same as for \"farthest-side\")\n                var c = Math.max(Math.abs(y), Math.abs(y - height)) / Math.max(Math.abs(x), Math.abs(x - width));\n                var _b = findCorner(width, height, x, y, false), cx = _b[0], cy = _b[1];\n                rx = distance(cx - x, (cy - y) / c);\n                ry = c * rx;\n            }\n            break;\n    }\n    if (Array.isArray(gradient.size)) {\n        rx = getAbsoluteValue(gradient.size[0], width);\n        ry = gradient.size.length === 2 ? getAbsoluteValue(gradient.size[1], height) : rx;\n    }\n    return [rx, ry];\n};\n\nvar linearGradient = function (context, tokens) {\n    var angle$1 = deg(180);\n    var stops = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n        if (i === 0) {\n            var firstToken = arg[0];\n            if (firstToken.type === 20 /* IDENT_TOKEN */ && firstToken.value === 'to') {\n                angle$1 = parseNamedSide(arg);\n                return;\n            }\n            else if (isAngle(firstToken)) {\n                angle$1 = angle.parse(context, firstToken);\n                return;\n            }\n        }\n        var colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n    });\n    return { angle: angle$1, stops: stops, type: 1 /* LINEAR_GRADIENT */ };\n};\n\nvar prefixLinearGradient = function (context, tokens) {\n    var angle$1 = deg(180);\n    var stops = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n        if (i === 0) {\n            var firstToken = arg[0];\n            if (firstToken.type === 20 /* IDENT_TOKEN */ &&\n                ['top', 'left', 'right', 'bottom'].indexOf(firstToken.value) !== -1) {\n                angle$1 = parseNamedSide(arg);\n                return;\n            }\n            else if (isAngle(firstToken)) {\n                angle$1 = (angle.parse(context, firstToken) + deg(270)) % deg(360);\n                return;\n            }\n        }\n        var colorStop = parseColorStop(context, arg);\n        stops.push(colorStop);\n    });\n    return {\n        angle: angle$1,\n        stops: stops,\n        type: 1 /* LINEAR_GRADIENT */\n    };\n};\n\nvar webkitGradient = function (context, tokens) {\n    var angle = deg(180);\n    var stops = [];\n    var type = 1 /* LINEAR_GRADIENT */;\n    var shape = 0 /* CIRCLE */;\n    var size = 3 /* FARTHEST_CORNER */;\n    var position = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n        var firstToken = arg[0];\n        if (i === 0) {\n            if (isIdentToken(firstToken) && firstToken.value === 'linear') {\n                type = 1 /* LINEAR_GRADIENT */;\n                return;\n            }\n            else if (isIdentToken(firstToken) && firstToken.value === 'radial') {\n                type = 2 /* RADIAL_GRADIENT */;\n                return;\n            }\n        }\n        if (firstToken.type === 18 /* FUNCTION */) {\n            if (firstToken.name === 'from') {\n                var color = color$1.parse(context, firstToken.values[0]);\n                stops.push({ stop: ZERO_LENGTH, color: color });\n            }\n            else if (firstToken.name === 'to') {\n                var color = color$1.parse(context, firstToken.values[0]);\n                stops.push({ stop: HUNDRED_PERCENT, color: color });\n            }\n            else if (firstToken.name === 'color-stop') {\n                var values = firstToken.values.filter(nonFunctionArgSeparator);\n                if (values.length === 2) {\n                    var color = color$1.parse(context, values[1]);\n                    var stop_1 = values[0];\n                    if (isNumberToken(stop_1)) {\n                        stops.push({\n                            stop: { type: 16 /* PERCENTAGE_TOKEN */, number: stop_1.number * 100, flags: stop_1.flags },\n                            color: color\n                        });\n                    }\n                }\n            }\n        }\n    });\n    return type === 1 /* LINEAR_GRADIENT */\n        ? {\n            angle: (angle + deg(180)) % deg(360),\n            stops: stops,\n            type: type\n        }\n        : { size: size, shape: shape, stops: stops, position: position, type: type };\n};\n\nvar CLOSEST_SIDE = 'closest-side';\nvar FARTHEST_SIDE = 'farthest-side';\nvar CLOSEST_CORNER = 'closest-corner';\nvar FARTHEST_CORNER = 'farthest-corner';\nvar CIRCLE = 'circle';\nvar ELLIPSE = 'ellipse';\nvar COVER = 'cover';\nvar CONTAIN = 'contain';\nvar radialGradient = function (context, tokens) {\n    var shape = 0 /* CIRCLE */;\n    var size = 3 /* FARTHEST_CORNER */;\n    var stops = [];\n    var position = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n        var isColorStop = true;\n        if (i === 0) {\n            var isAtPosition_1 = false;\n            isColorStop = arg.reduce(function (acc, token) {\n                if (isAtPosition_1) {\n                    if (isIdentToken(token)) {\n                        switch (token.value) {\n                            case 'center':\n                                position.push(FIFTY_PERCENT);\n                                return acc;\n                            case 'top':\n                            case 'left':\n                                position.push(ZERO_LENGTH);\n                                return acc;\n                            case 'right':\n                            case 'bottom':\n                                position.push(HUNDRED_PERCENT);\n                                return acc;\n                        }\n                    }\n                    else if (isLengthPercentage(token) || isLength(token)) {\n                        position.push(token);\n                    }\n                }\n                else if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = 0 /* CIRCLE */;\n                            return false;\n                        case ELLIPSE:\n                            shape = 1 /* ELLIPSE */;\n                            return false;\n                        case 'at':\n                            isAtPosition_1 = true;\n                            return false;\n                        case CLOSEST_SIDE:\n                            size = 0 /* CLOSEST_SIDE */;\n                            return false;\n                        case COVER:\n                        case FARTHEST_SIDE:\n                            size = 1 /* FARTHEST_SIDE */;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_CORNER:\n                            size = 2 /* CLOSEST_CORNER */;\n                            return false;\n                        case FARTHEST_CORNER:\n                            size = 3 /* FARTHEST_CORNER */;\n                            return false;\n                    }\n                }\n                else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n        if (isColorStop) {\n            var colorStop = parseColorStop(context, arg);\n            stops.push(colorStop);\n        }\n    });\n    return { size: size, shape: shape, stops: stops, position: position, type: 2 /* RADIAL_GRADIENT */ };\n};\n\nvar prefixRadialGradient = function (context, tokens) {\n    var shape = 0 /* CIRCLE */;\n    var size = 3 /* FARTHEST_CORNER */;\n    var stops = [];\n    var position = [];\n    parseFunctionArgs(tokens).forEach(function (arg, i) {\n        var isColorStop = true;\n        if (i === 0) {\n            isColorStop = arg.reduce(function (acc, token) {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case 'center':\n                            position.push(FIFTY_PERCENT);\n                            return false;\n                        case 'top':\n                        case 'left':\n                            position.push(ZERO_LENGTH);\n                            return false;\n                        case 'right':\n                        case 'bottom':\n                            position.push(HUNDRED_PERCENT);\n                            return false;\n                    }\n                }\n                else if (isLengthPercentage(token) || isLength(token)) {\n                    position.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n        else if (i === 1) {\n            isColorStop = arg.reduce(function (acc, token) {\n                if (isIdentToken(token)) {\n                    switch (token.value) {\n                        case CIRCLE:\n                            shape = 0 /* CIRCLE */;\n                            return false;\n                        case ELLIPSE:\n                            shape = 1 /* ELLIPSE */;\n                            return false;\n                        case CONTAIN:\n                        case CLOSEST_SIDE:\n                            size = 0 /* CLOSEST_SIDE */;\n                            return false;\n                        case FARTHEST_SIDE:\n                            size = 1 /* FARTHEST_SIDE */;\n                            return false;\n                        case CLOSEST_CORNER:\n                            size = 2 /* CLOSEST_CORNER */;\n                            return false;\n                        case COVER:\n                        case FARTHEST_CORNER:\n                            size = 3 /* FARTHEST_CORNER */;\n                            return false;\n                    }\n                }\n                else if (isLength(token) || isLengthPercentage(token)) {\n                    if (!Array.isArray(size)) {\n                        size = [];\n                    }\n                    size.push(token);\n                    return false;\n                }\n                return acc;\n            }, isColorStop);\n        }\n        if (isColorStop) {\n            var colorStop = parseColorStop(context, arg);\n            stops.push(colorStop);\n        }\n    });\n    return { size: size, shape: shape, stops: stops, position: position, type: 2 /* RADIAL_GRADIENT */ };\n};\n\nvar isLinearGradient = function (background) {\n    return background.type === 1 /* LINEAR_GRADIENT */;\n};\nvar isRadialGradient = function (background) {\n    return background.type === 2 /* RADIAL_GRADIENT */;\n};\nvar image = {\n    name: 'image',\n    parse: function (context, value) {\n        if (value.type === 22 /* URL_TOKEN */) {\n            var image_1 = { url: value.value, type: 0 /* URL */ };\n            context.cache.addImage(value.value);\n            return image_1;\n        }\n        if (value.type === 18 /* FUNCTION */) {\n            var imageFunction = SUPPORTED_IMAGE_FUNCTIONS[value.name];\n            if (typeof imageFunction === 'undefined') {\n                throw new Error(\"Attempting to parse an unsupported image function \\\"\" + value.name + \"\\\"\");\n            }\n            return imageFunction(context, value.values);\n        }\n        throw new Error(\"Unsupported image type \" + value.type);\n    }\n};\nfunction isSupportedImage(value) {\n    return (!(value.type === 20 /* IDENT_TOKEN */ && value.value === 'none') &&\n        (value.type !== 18 /* FUNCTION */ || !!SUPPORTED_IMAGE_FUNCTIONS[value.name]));\n}\nvar SUPPORTED_IMAGE_FUNCTIONS = {\n    'linear-gradient': linearGradient,\n    '-moz-linear-gradient': prefixLinearGradient,\n    '-ms-linear-gradient': prefixLinearGradient,\n    '-o-linear-gradient': prefixLinearGradient,\n    '-webkit-linear-gradient': prefixLinearGradient,\n    'radial-gradient': radialGradient,\n    '-moz-radial-gradient': prefixRadialGradient,\n    '-ms-radial-gradient': prefixRadialGradient,\n    '-o-radial-gradient': prefixRadialGradient,\n    '-webkit-radial-gradient': prefixRadialGradient,\n    '-webkit-gradient': webkitGradient\n};\n\nvar backgroundImage = {\n    name: 'background-image',\n    initialValue: 'none',\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (context, tokens) {\n        if (tokens.length === 0) {\n            return [];\n        }\n        var first = tokens[0];\n        if (first.type === 20 /* IDENT_TOKEN */ && first.value === 'none') {\n            return [];\n        }\n        return tokens\n            .filter(function (value) { return nonFunctionArgSeparator(value) && isSupportedImage(value); })\n            .map(function (value) { return image.parse(context, value); });\n    }\n};\n\nvar backgroundOrigin = {\n    name: 'background-origin',\n    initialValue: 'border-box',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return tokens.map(function (token) {\n            if (isIdentToken(token)) {\n                switch (token.value) {\n                    case 'padding-box':\n                        return 1 /* PADDING_BOX */;\n                    case 'content-box':\n                        return 2 /* CONTENT_BOX */;\n                }\n            }\n            return 0 /* BORDER_BOX */;\n        });\n    }\n};\n\nvar backgroundPosition = {\n    name: 'background-position',\n    initialValue: '0% 0%',\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (_context, tokens) {\n        return parseFunctionArgs(tokens)\n            .map(function (values) { return values.filter(isLengthPercentage); })\n            .map(parseLengthPercentageTuple);\n    }\n};\n\nvar backgroundRepeat = {\n    name: 'background-repeat',\n    initialValue: 'repeat',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return parseFunctionArgs(tokens)\n            .map(function (values) {\n            return values\n                .filter(isIdentToken)\n                .map(function (token) { return token.value; })\n                .join(' ');\n        })\n            .map(parseBackgroundRepeat);\n    }\n};\nvar parseBackgroundRepeat = function (value) {\n    switch (value) {\n        case 'no-repeat':\n            return 1 /* NO_REPEAT */;\n        case 'repeat-x':\n        case 'repeat no-repeat':\n            return 2 /* REPEAT_X */;\n        case 'repeat-y':\n        case 'no-repeat repeat':\n            return 3 /* REPEAT_Y */;\n        case 'repeat':\n        default:\n            return 0 /* REPEAT */;\n    }\n};\n\nvar BACKGROUND_SIZE;\n(function (BACKGROUND_SIZE) {\n    BACKGROUND_SIZE[\"AUTO\"] = \"auto\";\n    BACKGROUND_SIZE[\"CONTAIN\"] = \"contain\";\n    BACKGROUND_SIZE[\"COVER\"] = \"cover\";\n})(BACKGROUND_SIZE || (BACKGROUND_SIZE = {}));\nvar backgroundSize = {\n    name: 'background-size',\n    initialValue: '0',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return parseFunctionArgs(tokens).map(function (values) { return values.filter(isBackgroundSizeInfoToken); });\n    }\n};\nvar isBackgroundSizeInfoToken = function (value) {\n    return isIdentToken(value) || isLengthPercentage(value);\n};\n\nvar borderColorForSide = function (side) { return ({\n    name: \"border-\" + side + \"-color\",\n    initialValue: 'transparent',\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: 'color'\n}); };\nvar borderTopColor = borderColorForSide('top');\nvar borderRightColor = borderColorForSide('right');\nvar borderBottomColor = borderColorForSide('bottom');\nvar borderLeftColor = borderColorForSide('left');\n\nvar borderRadiusForSide = function (side) { return ({\n    name: \"border-radius-\" + side,\n    initialValue: '0 0',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return parseLengthPercentageTuple(tokens.filter(isLengthPercentage));\n    }\n}); };\nvar borderTopLeftRadius = borderRadiusForSide('top-left');\nvar borderTopRightRadius = borderRadiusForSide('top-right');\nvar borderBottomRightRadius = borderRadiusForSide('bottom-right');\nvar borderBottomLeftRadius = borderRadiusForSide('bottom-left');\n\nvar borderStyleForSide = function (side) { return ({\n    name: \"border-\" + side + \"-style\",\n    initialValue: 'solid',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, style) {\n        switch (style) {\n            case 'none':\n                return 0 /* NONE */;\n            case 'dashed':\n                return 2 /* DASHED */;\n            case 'dotted':\n                return 3 /* DOTTED */;\n            case 'double':\n                return 4 /* DOUBLE */;\n        }\n        return 1 /* SOLID */;\n    }\n}); };\nvar borderTopStyle = borderStyleForSide('top');\nvar borderRightStyle = borderStyleForSide('right');\nvar borderBottomStyle = borderStyleForSide('bottom');\nvar borderLeftStyle = borderStyleForSide('left');\n\nvar borderWidthForSide = function (side) { return ({\n    name: \"border-\" + side + \"-width\",\n    initialValue: '0',\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (_context, token) {\n        if (isDimensionToken(token)) {\n            return token.number;\n        }\n        return 0;\n    }\n}); };\nvar borderTopWidth = borderWidthForSide('top');\nvar borderRightWidth = borderWidthForSide('right');\nvar borderBottomWidth = borderWidthForSide('bottom');\nvar borderLeftWidth = borderWidthForSide('left');\n\nvar color = {\n    name: \"color\",\n    initialValue: 'transparent',\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: 'color'\n};\n\nvar direction = {\n    name: 'direction',\n    initialValue: 'ltr',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, direction) {\n        switch (direction) {\n            case 'rtl':\n                return 1 /* RTL */;\n            case 'ltr':\n            default:\n                return 0 /* LTR */;\n        }\n    }\n};\n\nvar display = {\n    name: 'display',\n    initialValue: 'inline-block',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return tokens.filter(isIdentToken).reduce(function (bit, token) {\n            return bit | parseDisplayValue(token.value);\n        }, 0 /* NONE */);\n    }\n};\nvar parseDisplayValue = function (display) {\n    switch (display) {\n        case 'block':\n        case '-webkit-box':\n            return 2 /* BLOCK */;\n        case 'inline':\n            return 4 /* INLINE */;\n        case 'run-in':\n            return 8 /* RUN_IN */;\n        case 'flow':\n            return 16 /* FLOW */;\n        case 'flow-root':\n            return 32 /* FLOW_ROOT */;\n        case 'table':\n            return 64 /* TABLE */;\n        case 'flex':\n        case '-webkit-flex':\n            return 128 /* FLEX */;\n        case 'grid':\n        case '-ms-grid':\n            return 256 /* GRID */;\n        case 'ruby':\n            return 512 /* RUBY */;\n        case 'subgrid':\n            return 1024 /* SUBGRID */;\n        case 'list-item':\n            return 2048 /* LIST_ITEM */;\n        case 'table-row-group':\n            return 4096 /* TABLE_ROW_GROUP */;\n        case 'table-header-group':\n            return 8192 /* TABLE_HEADER_GROUP */;\n        case 'table-footer-group':\n            return 16384 /* TABLE_FOOTER_GROUP */;\n        case 'table-row':\n            return 32768 /* TABLE_ROW */;\n        case 'table-cell':\n            return 65536 /* TABLE_CELL */;\n        case 'table-column-group':\n            return 131072 /* TABLE_COLUMN_GROUP */;\n        case 'table-column':\n            return 262144 /* TABLE_COLUMN */;\n        case 'table-caption':\n            return 524288 /* TABLE_CAPTION */;\n        case 'ruby-base':\n            return 1048576 /* RUBY_BASE */;\n        case 'ruby-text':\n            return 2097152 /* RUBY_TEXT */;\n        case 'ruby-base-container':\n            return 4194304 /* RUBY_BASE_CONTAINER */;\n        case 'ruby-text-container':\n            return 8388608 /* RUBY_TEXT_CONTAINER */;\n        case 'contents':\n            return 16777216 /* CONTENTS */;\n        case 'inline-block':\n            return 33554432 /* INLINE_BLOCK */;\n        case 'inline-list-item':\n            return 67108864 /* INLINE_LIST_ITEM */;\n        case 'inline-table':\n            return 134217728 /* INLINE_TABLE */;\n        case 'inline-flex':\n            return 268435456 /* INLINE_FLEX */;\n        case 'inline-grid':\n            return 536870912 /* INLINE_GRID */;\n    }\n    return 0 /* NONE */;\n};\n\nvar float = {\n    name: 'float',\n    initialValue: 'none',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, float) {\n        switch (float) {\n            case 'left':\n                return 1 /* LEFT */;\n            case 'right':\n                return 2 /* RIGHT */;\n            case 'inline-start':\n                return 3 /* INLINE_START */;\n            case 'inline-end':\n                return 4 /* INLINE_END */;\n        }\n        return 0 /* NONE */;\n    }\n};\n\nvar letterSpacing = {\n    name: 'letter-spacing',\n    initialValue: '0',\n    prefix: false,\n    type: 0 /* VALUE */,\n    parse: function (_context, token) {\n        if (token.type === 20 /* IDENT_TOKEN */ && token.value === 'normal') {\n            return 0;\n        }\n        if (token.type === 17 /* NUMBER_TOKEN */) {\n            return token.number;\n        }\n        if (token.type === 15 /* DIMENSION_TOKEN */) {\n            return token.number;\n        }\n        return 0;\n    }\n};\n\nvar LINE_BREAK;\n(function (LINE_BREAK) {\n    LINE_BREAK[\"NORMAL\"] = \"normal\";\n    LINE_BREAK[\"STRICT\"] = \"strict\";\n})(LINE_BREAK || (LINE_BREAK = {}));\nvar lineBreak = {\n    name: 'line-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, lineBreak) {\n        switch (lineBreak) {\n            case 'strict':\n                return LINE_BREAK.STRICT;\n            case 'normal':\n            default:\n                return LINE_BREAK.NORMAL;\n        }\n    }\n};\n\nvar lineHeight = {\n    name: 'line-height',\n    initialValue: 'normal',\n    prefix: false,\n    type: 4 /* TOKEN_VALUE */\n};\nvar computeLineHeight = function (token, fontSize) {\n    if (isIdentToken(token) && token.value === 'normal') {\n        return 1.2 * fontSize;\n    }\n    else if (token.type === 17 /* NUMBER_TOKEN */) {\n        return fontSize * token.number;\n    }\n    else if (isLengthPercentage(token)) {\n        return getAbsoluteValue(token, fontSize);\n    }\n    return fontSize;\n};\n\nvar listStyleImage = {\n    name: 'list-style-image',\n    initialValue: 'none',\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (context, token) {\n        if (token.type === 20 /* IDENT_TOKEN */ && token.value === 'none') {\n            return null;\n        }\n        return image.parse(context, token);\n    }\n};\n\nvar listStylePosition = {\n    name: 'list-style-position',\n    initialValue: 'outside',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, position) {\n        switch (position) {\n            case 'inside':\n                return 0 /* INSIDE */;\n            case 'outside':\n            default:\n                return 1 /* OUTSIDE */;\n        }\n    }\n};\n\nvar listStyleType = {\n    name: 'list-style-type',\n    initialValue: 'none',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, type) {\n        switch (type) {\n            case 'disc':\n                return 0 /* DISC */;\n            case 'circle':\n                return 1 /* CIRCLE */;\n            case 'square':\n                return 2 /* SQUARE */;\n            case 'decimal':\n                return 3 /* DECIMAL */;\n            case 'cjk-decimal':\n                return 4 /* CJK_DECIMAL */;\n            case 'decimal-leading-zero':\n                return 5 /* DECIMAL_LEADING_ZERO */;\n            case 'lower-roman':\n                return 6 /* LOWER_ROMAN */;\n            case 'upper-roman':\n                return 7 /* UPPER_ROMAN */;\n            case 'lower-greek':\n                return 8 /* LOWER_GREEK */;\n            case 'lower-alpha':\n                return 9 /* LOWER_ALPHA */;\n            case 'upper-alpha':\n                return 10 /* UPPER_ALPHA */;\n            case 'arabic-indic':\n                return 11 /* ARABIC_INDIC */;\n            case 'armenian':\n                return 12 /* ARMENIAN */;\n            case 'bengali':\n                return 13 /* BENGALI */;\n            case 'cambodian':\n                return 14 /* CAMBODIAN */;\n            case 'cjk-earthly-branch':\n                return 15 /* CJK_EARTHLY_BRANCH */;\n            case 'cjk-heavenly-stem':\n                return 16 /* CJK_HEAVENLY_STEM */;\n            case 'cjk-ideographic':\n                return 17 /* CJK_IDEOGRAPHIC */;\n            case 'devanagari':\n                return 18 /* DEVANAGARI */;\n            case 'ethiopic-numeric':\n                return 19 /* ETHIOPIC_NUMERIC */;\n            case 'georgian':\n                return 20 /* GEORGIAN */;\n            case 'gujarati':\n                return 21 /* GUJARATI */;\n            case 'gurmukhi':\n                return 22 /* GURMUKHI */;\n            case 'hebrew':\n                return 22 /* HEBREW */;\n            case 'hiragana':\n                return 23 /* HIRAGANA */;\n            case 'hiragana-iroha':\n                return 24 /* HIRAGANA_IROHA */;\n            case 'japanese-formal':\n                return 25 /* JAPANESE_FORMAL */;\n            case 'japanese-informal':\n                return 26 /* JAPANESE_INFORMAL */;\n            case 'kannada':\n                return 27 /* KANNADA */;\n            case 'katakana':\n                return 28 /* KATAKANA */;\n            case 'katakana-iroha':\n                return 29 /* KATAKANA_IROHA */;\n            case 'khmer':\n                return 30 /* KHMER */;\n            case 'korean-hangul-formal':\n                return 31 /* KOREAN_HANGUL_FORMAL */;\n            case 'korean-hanja-formal':\n                return 32 /* KOREAN_HANJA_FORMAL */;\n            case 'korean-hanja-informal':\n                return 33 /* KOREAN_HANJA_INFORMAL */;\n            case 'lao':\n                return 34 /* LAO */;\n            case 'lower-armenian':\n                return 35 /* LOWER_ARMENIAN */;\n            case 'malayalam':\n                return 36 /* MALAYALAM */;\n            case 'mongolian':\n                return 37 /* MONGOLIAN */;\n            case 'myanmar':\n                return 38 /* MYANMAR */;\n            case 'oriya':\n                return 39 /* ORIYA */;\n            case 'persian':\n                return 40 /* PERSIAN */;\n            case 'simp-chinese-formal':\n                return 41 /* SIMP_CHINESE_FORMAL */;\n            case 'simp-chinese-informal':\n                return 42 /* SIMP_CHINESE_INFORMAL */;\n            case 'tamil':\n                return 43 /* TAMIL */;\n            case 'telugu':\n                return 44 /* TELUGU */;\n            case 'thai':\n                return 45 /* THAI */;\n            case 'tibetan':\n                return 46 /* TIBETAN */;\n            case 'trad-chinese-formal':\n                return 47 /* TRAD_CHINESE_FORMAL */;\n            case 'trad-chinese-informal':\n                return 48 /* TRAD_CHINESE_INFORMAL */;\n            case 'upper-armenian':\n                return 49 /* UPPER_ARMENIAN */;\n            case 'disclosure-open':\n                return 50 /* DISCLOSURE_OPEN */;\n            case 'disclosure-closed':\n                return 51 /* DISCLOSURE_CLOSED */;\n            case 'none':\n            default:\n                return -1 /* NONE */;\n        }\n    }\n};\n\nvar marginForSide = function (side) { return ({\n    name: \"margin-\" + side,\n    initialValue: '0',\n    prefix: false,\n    type: 4 /* TOKEN_VALUE */\n}); };\nvar marginTop = marginForSide('top');\nvar marginRight = marginForSide('right');\nvar marginBottom = marginForSide('bottom');\nvar marginLeft = marginForSide('left');\n\nvar overflow = {\n    name: 'overflow',\n    initialValue: 'visible',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return tokens.filter(isIdentToken).map(function (overflow) {\n            switch (overflow.value) {\n                case 'hidden':\n                    return 1 /* HIDDEN */;\n                case 'scroll':\n                    return 2 /* SCROLL */;\n                case 'clip':\n                    return 3 /* CLIP */;\n                case 'auto':\n                    return 4 /* AUTO */;\n                case 'visible':\n                default:\n                    return 0 /* VISIBLE */;\n            }\n        });\n    }\n};\n\nvar overflowWrap = {\n    name: 'overflow-wrap',\n    initialValue: 'normal',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, overflow) {\n        switch (overflow) {\n            case 'break-word':\n                return \"break-word\" /* BREAK_WORD */;\n            case 'normal':\n            default:\n                return \"normal\" /* NORMAL */;\n        }\n    }\n};\n\nvar paddingForSide = function (side) { return ({\n    name: \"padding-\" + side,\n    initialValue: '0',\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: 'length-percentage'\n}); };\nvar paddingTop = paddingForSide('top');\nvar paddingRight = paddingForSide('right');\nvar paddingBottom = paddingForSide('bottom');\nvar paddingLeft = paddingForSide('left');\n\nvar textAlign = {\n    name: 'text-align',\n    initialValue: 'left',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, textAlign) {\n        switch (textAlign) {\n            case 'right':\n                return 2 /* RIGHT */;\n            case 'center':\n            case 'justify':\n                return 1 /* CENTER */;\n            case 'left':\n            default:\n                return 0 /* LEFT */;\n        }\n    }\n};\n\nvar position = {\n    name: 'position',\n    initialValue: 'static',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, position) {\n        switch (position) {\n            case 'relative':\n                return 1 /* RELATIVE */;\n            case 'absolute':\n                return 2 /* ABSOLUTE */;\n            case 'fixed':\n                return 3 /* FIXED */;\n            case 'sticky':\n                return 4 /* STICKY */;\n        }\n        return 0 /* STATIC */;\n    }\n};\n\nvar textShadow = {\n    name: 'text-shadow',\n    initialValue: 'none',\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (context, tokens) {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n        return parseFunctionArgs(tokens).map(function (values) {\n            var shadow = {\n                color: COLORS.TRANSPARENT,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH\n            };\n            var c = 0;\n            for (var i = 0; i < values.length; i++) {\n                var token = values[i];\n                if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    }\n                    else if (c === 1) {\n                        shadow.offsetY = token;\n                    }\n                    else {\n                        shadow.blur = token;\n                    }\n                    c++;\n                }\n                else {\n                    shadow.color = color$1.parse(context, token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n\nvar textTransform = {\n    name: 'text-transform',\n    initialValue: 'none',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, textTransform) {\n        switch (textTransform) {\n            case 'uppercase':\n                return 2 /* UPPERCASE */;\n            case 'lowercase':\n                return 1 /* LOWERCASE */;\n            case 'capitalize':\n                return 3 /* CAPITALIZE */;\n        }\n        return 0 /* NONE */;\n    }\n};\n\nvar transform$1 = {\n    name: 'transform',\n    initialValue: 'none',\n    prefix: true,\n    type: 0 /* VALUE */,\n    parse: function (_context, token) {\n        if (token.type === 20 /* IDENT_TOKEN */ && token.value === 'none') {\n            return null;\n        }\n        if (token.type === 18 /* FUNCTION */) {\n            var transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name];\n            if (typeof transformFunction === 'undefined') {\n                throw new Error(\"Attempting to parse an unsupported transform function \\\"\" + token.name + \"\\\"\");\n            }\n            return transformFunction(token.values);\n        }\n        return null;\n    }\n};\nvar matrix = function (args) {\n    var values = args.filter(function (arg) { return arg.type === 17 /* NUMBER_TOKEN */; }).map(function (arg) { return arg.number; });\n    return values.length === 6 ? values : null;\n};\n// doesn't support 3D transforms at the moment\nvar matrix3d = function (args) {\n    var values = args.filter(function (arg) { return arg.type === 17 /* NUMBER_TOKEN */; }).map(function (arg) { return arg.number; });\n    var a1 = values[0], b1 = values[1]; values[2]; values[3]; var a2 = values[4], b2 = values[5]; values[6]; values[7]; values[8]; values[9]; values[10]; values[11]; var a4 = values[12], b4 = values[13]; values[14]; values[15];\n    return values.length === 16 ? [a1, b1, a2, b2, a4, b4] : null;\n};\nvar SUPPORTED_TRANSFORM_FUNCTIONS = {\n    matrix: matrix,\n    matrix3d: matrix3d\n};\n\nvar DEFAULT_VALUE = {\n    type: 16 /* PERCENTAGE_TOKEN */,\n    number: 50,\n    flags: FLAG_INTEGER\n};\nvar DEFAULT = [DEFAULT_VALUE, DEFAULT_VALUE];\nvar transformOrigin = {\n    name: 'transform-origin',\n    initialValue: '50% 50%',\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        var origins = tokens.filter(isLengthPercentage);\n        if (origins.length !== 2) {\n            return DEFAULT;\n        }\n        return [origins[0], origins[1]];\n    }\n};\n\nvar visibility = {\n    name: 'visible',\n    initialValue: 'none',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, visibility) {\n        switch (visibility) {\n            case 'hidden':\n                return 1 /* HIDDEN */;\n            case 'collapse':\n                return 2 /* COLLAPSE */;\n            case 'visible':\n            default:\n                return 0 /* VISIBLE */;\n        }\n    }\n};\n\nvar WORD_BREAK;\n(function (WORD_BREAK) {\n    WORD_BREAK[\"NORMAL\"] = \"normal\";\n    WORD_BREAK[\"BREAK_ALL\"] = \"break-all\";\n    WORD_BREAK[\"KEEP_ALL\"] = \"keep-all\";\n})(WORD_BREAK || (WORD_BREAK = {}));\nvar wordBreak = {\n    name: 'word-break',\n    initialValue: 'normal',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, wordBreak) {\n        switch (wordBreak) {\n            case 'break-all':\n                return WORD_BREAK.BREAK_ALL;\n            case 'keep-all':\n                return WORD_BREAK.KEEP_ALL;\n            case 'normal':\n            default:\n                return WORD_BREAK.NORMAL;\n        }\n    }\n};\n\nvar zIndex = {\n    name: 'z-index',\n    initialValue: 'auto',\n    prefix: false,\n    type: 0 /* VALUE */,\n    parse: function (_context, token) {\n        if (token.type === 20 /* IDENT_TOKEN */) {\n            return { auto: true, order: 0 };\n        }\n        if (isNumberToken(token)) {\n            return { auto: false, order: token.number };\n        }\n        throw new Error(\"Invalid z-index number parsed\");\n    }\n};\n\nvar time = {\n    name: 'time',\n    parse: function (_context, value) {\n        if (value.type === 15 /* DIMENSION_TOKEN */) {\n            switch (value.unit.toLowerCase()) {\n                case 's':\n                    return 1000 * value.number;\n                case 'ms':\n                    return value.number;\n            }\n        }\n        throw new Error(\"Unsupported time type\");\n    }\n};\n\nvar opacity = {\n    name: 'opacity',\n    initialValue: '1',\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (_context, token) {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n        return 1;\n    }\n};\n\nvar textDecorationColor = {\n    name: \"text-decoration-color\",\n    initialValue: 'transparent',\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: 'color'\n};\n\nvar textDecorationLine = {\n    name: 'text-decoration-line',\n    initialValue: 'none',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        return tokens\n            .filter(isIdentToken)\n            .map(function (token) {\n            switch (token.value) {\n                case 'underline':\n                    return 1 /* UNDERLINE */;\n                case 'overline':\n                    return 2 /* OVERLINE */;\n                case 'line-through':\n                    return 3 /* LINE_THROUGH */;\n                case 'none':\n                    return 4 /* BLINK */;\n            }\n            return 0 /* NONE */;\n        })\n            .filter(function (line) { return line !== 0 /* NONE */; });\n    }\n};\n\nvar fontFamily = {\n    name: \"font-family\",\n    initialValue: '',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        var accumulator = [];\n        var results = [];\n        tokens.forEach(function (token) {\n            switch (token.type) {\n                case 20 /* IDENT_TOKEN */:\n                case 0 /* STRING_TOKEN */:\n                    accumulator.push(token.value);\n                    break;\n                case 17 /* NUMBER_TOKEN */:\n                    accumulator.push(token.number.toString());\n                    break;\n                case 4 /* COMMA_TOKEN */:\n                    results.push(accumulator.join(' '));\n                    accumulator.length = 0;\n                    break;\n            }\n        });\n        if (accumulator.length) {\n            results.push(accumulator.join(' '));\n        }\n        return results.map(function (result) { return (result.indexOf(' ') === -1 ? result : \"'\" + result + \"'\"); });\n    }\n};\n\nvar fontSize = {\n    name: \"font-size\",\n    initialValue: '0',\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: 'length'\n};\n\nvar fontWeight = {\n    name: 'font-weight',\n    initialValue: 'normal',\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (_context, token) {\n        if (isNumberToken(token)) {\n            return token.number;\n        }\n        if (isIdentToken(token)) {\n            switch (token.value) {\n                case 'bold':\n                    return 700;\n                case 'normal':\n                default:\n                    return 400;\n            }\n        }\n        return 400;\n    }\n};\n\nvar fontVariant = {\n    name: 'font-variant',\n    initialValue: 'none',\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (_context, tokens) {\n        return tokens.filter(isIdentToken).map(function (token) { return token.value; });\n    }\n};\n\nvar fontStyle = {\n    name: 'font-style',\n    initialValue: 'normal',\n    prefix: false,\n    type: 2 /* IDENT_VALUE */,\n    parse: function (_context, overflow) {\n        switch (overflow) {\n            case 'oblique':\n                return \"oblique\" /* OBLIQUE */;\n            case 'italic':\n                return \"italic\" /* ITALIC */;\n            case 'normal':\n            default:\n                return \"normal\" /* NORMAL */;\n        }\n    }\n};\n\nvar contains = function (bit, value) { return (bit & value) !== 0; };\n\nvar content = {\n    name: 'content',\n    initialValue: 'none',\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (_context, tokens) {\n        if (tokens.length === 0) {\n            return [];\n        }\n        var first = tokens[0];\n        if (first.type === 20 /* IDENT_TOKEN */ && first.value === 'none') {\n            return [];\n        }\n        return tokens;\n    }\n};\n\nvar counterIncrement = {\n    name: 'counter-increment',\n    initialValue: 'none',\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        if (tokens.length === 0) {\n            return null;\n        }\n        var first = tokens[0];\n        if (first.type === 20 /* IDENT_TOKEN */ && first.value === 'none') {\n            return null;\n        }\n        var increments = [];\n        var filtered = tokens.filter(nonWhiteSpace);\n        for (var i = 0; i < filtered.length; i++) {\n            var counter = filtered[i];\n            var next = filtered[i + 1];\n            if (counter.type === 20 /* IDENT_TOKEN */) {\n                var increment = next && isNumberToken(next) ? next.number : 1;\n                increments.push({ counter: counter.value, increment: increment });\n            }\n        }\n        return increments;\n    }\n};\n\nvar counterReset = {\n    name: 'counter-reset',\n    initialValue: 'none',\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        if (tokens.length === 0) {\n            return [];\n        }\n        var resets = [];\n        var filtered = tokens.filter(nonWhiteSpace);\n        for (var i = 0; i < filtered.length; i++) {\n            var counter = filtered[i];\n            var next = filtered[i + 1];\n            if (isIdentToken(counter) && counter.value !== 'none') {\n                var reset = next && isNumberToken(next) ? next.number : 0;\n                resets.push({ counter: counter.value, reset: reset });\n            }\n        }\n        return resets;\n    }\n};\n\nvar duration = {\n    name: 'duration',\n    initialValue: '0s',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (context, tokens) {\n        return tokens.filter(isDimensionToken).map(function (token) { return time.parse(context, token); });\n    }\n};\n\nvar quotes = {\n    name: 'quotes',\n    initialValue: 'none',\n    prefix: true,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        if (tokens.length === 0) {\n            return null;\n        }\n        var first = tokens[0];\n        if (first.type === 20 /* IDENT_TOKEN */ && first.value === 'none') {\n            return null;\n        }\n        var quotes = [];\n        var filtered = tokens.filter(isStringToken);\n        if (filtered.length % 2 !== 0) {\n            return null;\n        }\n        for (var i = 0; i < filtered.length; i += 2) {\n            var open_1 = filtered[i].value;\n            var close_1 = filtered[i + 1].value;\n            quotes.push({ open: open_1, close: close_1 });\n        }\n        return quotes;\n    }\n};\nvar getQuote = function (quotes, depth, open) {\n    if (!quotes) {\n        return '';\n    }\n    var quote = quotes[Math.min(depth, quotes.length - 1)];\n    if (!quote) {\n        return '';\n    }\n    return open ? quote.open : quote.close;\n};\n\nvar boxShadow = {\n    name: 'box-shadow',\n    initialValue: 'none',\n    type: 1 /* LIST */,\n    prefix: false,\n    parse: function (context, tokens) {\n        if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {\n            return [];\n        }\n        return parseFunctionArgs(tokens).map(function (values) {\n            var shadow = {\n                color: 0x000000ff,\n                offsetX: ZERO_LENGTH,\n                offsetY: ZERO_LENGTH,\n                blur: ZERO_LENGTH,\n                spread: ZERO_LENGTH,\n                inset: false\n            };\n            var c = 0;\n            for (var i = 0; i < values.length; i++) {\n                var token = values[i];\n                if (isIdentWithValue(token, 'inset')) {\n                    shadow.inset = true;\n                }\n                else if (isLength(token)) {\n                    if (c === 0) {\n                        shadow.offsetX = token;\n                    }\n                    else if (c === 1) {\n                        shadow.offsetY = token;\n                    }\n                    else if (c === 2) {\n                        shadow.blur = token;\n                    }\n                    else {\n                        shadow.spread = token;\n                    }\n                    c++;\n                }\n                else {\n                    shadow.color = color$1.parse(context, token);\n                }\n            }\n            return shadow;\n        });\n    }\n};\n\nvar paintOrder = {\n    name: 'paint-order',\n    initialValue: 'normal',\n    prefix: false,\n    type: 1 /* LIST */,\n    parse: function (_context, tokens) {\n        var DEFAULT_VALUE = [0 /* FILL */, 1 /* STROKE */, 2 /* MARKERS */];\n        var layers = [];\n        tokens.filter(isIdentToken).forEach(function (token) {\n            switch (token.value) {\n                case 'stroke':\n                    layers.push(1 /* STROKE */);\n                    break;\n                case 'fill':\n                    layers.push(0 /* FILL */);\n                    break;\n                case 'markers':\n                    layers.push(2 /* MARKERS */);\n                    break;\n            }\n        });\n        DEFAULT_VALUE.forEach(function (value) {\n            if (layers.indexOf(value) === -1) {\n                layers.push(value);\n            }\n        });\n        return layers;\n    }\n};\n\nvar webkitTextStrokeColor = {\n    name: \"-webkit-text-stroke-color\",\n    initialValue: 'currentcolor',\n    prefix: false,\n    type: 3 /* TYPE_VALUE */,\n    format: 'color'\n};\n\nvar webkitTextStrokeWidth = {\n    name: \"-webkit-text-stroke-width\",\n    initialValue: '0',\n    type: 0 /* VALUE */,\n    prefix: false,\n    parse: function (_context, token) {\n        if (isDimensionToken(token)) {\n            return token.number;\n        }\n        return 0;\n    }\n};\n\nvar CSSParsedDeclaration = /** @class */ (function () {\n    function CSSParsedDeclaration(context, declaration) {\n        var _a, _b;\n        this.animationDuration = parse(context, duration, declaration.animationDuration);\n        this.backgroundClip = parse(context, backgroundClip, declaration.backgroundClip);\n        this.backgroundColor = parse(context, backgroundColor, declaration.backgroundColor);\n        this.backgroundImage = parse(context, backgroundImage, declaration.backgroundImage);\n        this.backgroundOrigin = parse(context, backgroundOrigin, declaration.backgroundOrigin);\n        this.backgroundPosition = parse(context, backgroundPosition, declaration.backgroundPosition);\n        this.backgroundRepeat = parse(context, backgroundRepeat, declaration.backgroundRepeat);\n        this.backgroundSize = parse(context, backgroundSize, declaration.backgroundSize);\n        this.borderTopColor = parse(context, borderTopColor, declaration.borderTopColor);\n        this.borderRightColor = parse(context, borderRightColor, declaration.borderRightColor);\n        this.borderBottomColor = parse(context, borderBottomColor, declaration.borderBottomColor);\n        this.borderLeftColor = parse(context, borderLeftColor, declaration.borderLeftColor);\n        this.borderTopLeftRadius = parse(context, borderTopLeftRadius, declaration.borderTopLeftRadius);\n        this.borderTopRightRadius = parse(context, borderTopRightRadius, declaration.borderTopRightRadius);\n        this.borderBottomRightRadius = parse(context, borderBottomRightRadius, declaration.borderBottomRightRadius);\n        this.borderBottomLeftRadius = parse(context, borderBottomLeftRadius, declaration.borderBottomLeftRadius);\n        this.borderTopStyle = parse(context, borderTopStyle, declaration.borderTopStyle);\n        this.borderRightStyle = parse(context, borderRightStyle, declaration.borderRightStyle);\n        this.borderBottomStyle = parse(context, borderBottomStyle, declaration.borderBottomStyle);\n        this.borderLeftStyle = parse(context, borderLeftStyle, declaration.borderLeftStyle);\n        this.borderTopWidth = parse(context, borderTopWidth, declaration.borderTopWidth);\n        this.borderRightWidth = parse(context, borderRightWidth, declaration.borderRightWidth);\n        this.borderBottomWidth = parse(context, borderBottomWidth, declaration.borderBottomWidth);\n        this.borderLeftWidth = parse(context, borderLeftWidth, declaration.borderLeftWidth);\n        this.boxShadow = parse(context, boxShadow, declaration.boxShadow);\n        this.color = parse(context, color, declaration.color);\n        this.direction = parse(context, direction, declaration.direction);\n        this.display = parse(context, display, declaration.display);\n        this.float = parse(context, float, declaration.cssFloat);\n        this.fontFamily = parse(context, fontFamily, declaration.fontFamily);\n        this.fontSize = parse(context, fontSize, declaration.fontSize);\n        this.fontStyle = parse(context, fontStyle, declaration.fontStyle);\n        this.fontVariant = parse(context, fontVariant, declaration.fontVariant);\n        this.fontWeight = parse(context, fontWeight, declaration.fontWeight);\n        this.letterSpacing = parse(context, letterSpacing, declaration.letterSpacing);\n        this.lineBreak = parse(context, lineBreak, declaration.lineBreak);\n        this.lineHeight = parse(context, lineHeight, declaration.lineHeight);\n        this.listStyleImage = parse(context, listStyleImage, declaration.listStyleImage);\n        this.listStylePosition = parse(context, listStylePosition, declaration.listStylePosition);\n        this.listStyleType = parse(context, listStyleType, declaration.listStyleType);\n        this.marginTop = parse(context, marginTop, declaration.marginTop);\n        this.marginRight = parse(context, marginRight, declaration.marginRight);\n        this.marginBottom = parse(context, marginBottom, declaration.marginBottom);\n        this.marginLeft = parse(context, marginLeft, declaration.marginLeft);\n        this.opacity = parse(context, opacity, declaration.opacity);\n        var overflowTuple = parse(context, overflow, declaration.overflow);\n        this.overflowX = overflowTuple[0];\n        this.overflowY = overflowTuple[overflowTuple.length > 1 ? 1 : 0];\n        this.overflowWrap = parse(context, overflowWrap, declaration.overflowWrap);\n        this.paddingTop = parse(context, paddingTop, declaration.paddingTop);\n        this.paddingRight = parse(context, paddingRight, declaration.paddingRight);\n        this.paddingBottom = parse(context, paddingBottom, declaration.paddingBottom);\n        this.paddingLeft = parse(context, paddingLeft, declaration.paddingLeft);\n        this.paintOrder = parse(context, paintOrder, declaration.paintOrder);\n        this.position = parse(context, position, declaration.position);\n        this.textAlign = parse(context, textAlign, declaration.textAlign);\n        this.textDecorationColor = parse(context, textDecorationColor, (_a = declaration.textDecorationColor) !== null && _a !== void 0 ? _a : declaration.color);\n        this.textDecorationLine = parse(context, textDecorationLine, (_b = declaration.textDecorationLine) !== null && _b !== void 0 ? _b : declaration.textDecoration);\n        this.textShadow = parse(context, textShadow, declaration.textShadow);\n        this.textTransform = parse(context, textTransform, declaration.textTransform);\n        this.transform = parse(context, transform$1, declaration.transform);\n        this.transformOrigin = parse(context, transformOrigin, declaration.transformOrigin);\n        this.visibility = parse(context, visibility, declaration.visibility);\n        this.webkitTextStrokeColor = parse(context, webkitTextStrokeColor, declaration.webkitTextStrokeColor);\n        this.webkitTextStrokeWidth = parse(context, webkitTextStrokeWidth, declaration.webkitTextStrokeWidth);\n        this.wordBreak = parse(context, wordBreak, declaration.wordBreak);\n        this.zIndex = parse(context, zIndex, declaration.zIndex);\n    }\n    CSSParsedDeclaration.prototype.isVisible = function () {\n        return this.display > 0 && this.opacity > 0 && this.visibility === 0 /* VISIBLE */;\n    };\n    CSSParsedDeclaration.prototype.isTransparent = function () {\n        return isTransparent(this.backgroundColor);\n    };\n    CSSParsedDeclaration.prototype.isTransformed = function () {\n        return this.transform !== null;\n    };\n    CSSParsedDeclaration.prototype.isPositioned = function () {\n        return this.position !== 0 /* STATIC */;\n    };\n    CSSParsedDeclaration.prototype.isPositionedWithZIndex = function () {\n        return this.isPositioned() && !this.zIndex.auto;\n    };\n    CSSParsedDeclaration.prototype.isFloating = function () {\n        return this.float !== 0 /* NONE */;\n    };\n    CSSParsedDeclaration.prototype.isInlineLevel = function () {\n        return (contains(this.display, 4 /* INLINE */) ||\n            contains(this.display, 33554432 /* INLINE_BLOCK */) ||\n            contains(this.display, 268435456 /* INLINE_FLEX */) ||\n            contains(this.display, 536870912 /* INLINE_GRID */) ||\n            contains(this.display, 67108864 /* INLINE_LIST_ITEM */) ||\n            contains(this.display, 134217728 /* INLINE_TABLE */));\n    };\n    return CSSParsedDeclaration;\n}());\nvar CSSParsedPseudoDeclaration = /** @class */ (function () {\n    function CSSParsedPseudoDeclaration(context, declaration) {\n        this.content = parse(context, content, declaration.content);\n        this.quotes = parse(context, quotes, declaration.quotes);\n    }\n    return CSSParsedPseudoDeclaration;\n}());\nvar CSSParsedCounterDeclaration = /** @class */ (function () {\n    function CSSParsedCounterDeclaration(context, declaration) {\n        this.counterIncrement = parse(context, counterIncrement, declaration.counterIncrement);\n        this.counterReset = parse(context, counterReset, declaration.counterReset);\n    }\n    return CSSParsedCounterDeclaration;\n}());\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar parse = function (context, descriptor, style) {\n    var tokenizer = new Tokenizer();\n    var value = style !== null && typeof style !== 'undefined' ? style.toString() : descriptor.initialValue;\n    tokenizer.write(value);\n    var parser = new Parser(tokenizer.read());\n    switch (descriptor.type) {\n        case 2 /* IDENT_VALUE */:\n            var token = parser.parseComponentValue();\n            return descriptor.parse(context, isIdentToken(token) ? token.value : descriptor.initialValue);\n        case 0 /* VALUE */:\n            return descriptor.parse(context, parser.parseComponentValue());\n        case 1 /* LIST */:\n            return descriptor.parse(context, parser.parseComponentValues());\n        case 4 /* TOKEN_VALUE */:\n            return parser.parseComponentValue();\n        case 3 /* TYPE_VALUE */:\n            switch (descriptor.format) {\n                case 'angle':\n                    return angle.parse(context, parser.parseComponentValue());\n                case 'color':\n                    return color$1.parse(context, parser.parseComponentValue());\n                case 'image':\n                    return image.parse(context, parser.parseComponentValue());\n                case 'length':\n                    var length_1 = parser.parseComponentValue();\n                    return isLength(length_1) ? length_1 : ZERO_LENGTH;\n                case 'length-percentage':\n                    var value_1 = parser.parseComponentValue();\n                    return isLengthPercentage(value_1) ? value_1 : ZERO_LENGTH;\n                case 'time':\n                    return time.parse(context, parser.parseComponentValue());\n            }\n            break;\n    }\n};\n\nvar elementDebuggerAttribute = 'data-html2canvas-debug';\nvar getElementDebugType = function (element) {\n    var attribute = element.getAttribute(elementDebuggerAttribute);\n    switch (attribute) {\n        case 'all':\n            return 1 /* ALL */;\n        case 'clone':\n            return 2 /* CLONE */;\n        case 'parse':\n            return 3 /* PARSE */;\n        case 'render':\n            return 4 /* RENDER */;\n        default:\n            return 0 /* NONE */;\n    }\n};\nvar isDebugging = function (element, type) {\n    var elementType = getElementDebugType(element);\n    return elementType === 1 /* ALL */ || type === elementType;\n};\n\nvar ElementContainer = /** @class */ (function () {\n    function ElementContainer(context, element) {\n        this.context = context;\n        this.textNodes = [];\n        this.elements = [];\n        this.flags = 0;\n        if (isDebugging(element, 3 /* PARSE */)) {\n            debugger;\n        }\n        this.styles = new CSSParsedDeclaration(context, window.getComputedStyle(element, null));\n        if (isHTMLElementNode(element)) {\n            if (this.styles.animationDuration.some(function (duration) { return duration > 0; })) {\n                element.style.animationDuration = '0s';\n            }\n            if (this.styles.transform !== null) {\n                // getBoundingClientRect takes transforms into account\n                element.style.transform = 'none';\n            }\n        }\n        this.bounds = parseBounds(this.context, element);\n        if (isDebugging(element, 4 /* RENDER */)) {\n            this.flags |= 16 /* DEBUG_RENDER */;\n        }\n    }\n    return ElementContainer;\n}());\n\n/*\n * text-segmentation 1.0.3 <https://github.com/niklasvh/text-segmentation>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar base64 = 'AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=';\n\n/*\n * utrie 1.0.2 <https://github.com/niklasvh/utrie>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars$1 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup$1 = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i$1 = 0; i$1 < chars$1.length; i$1++) {\n    lookup$1[chars$1.charCodeAt(i$1)] = i$1;\n}\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var buffer = typeof ArrayBuffer !== 'undefined' &&\n        typeof Uint8Array !== 'undefined' &&\n        typeof Uint8Array.prototype.slice !== 'undefined'\n        ? new ArrayBuffer(bufferLength)\n        : new Array(bufferLength);\n    var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup$1[base64.charCodeAt(i)];\n        encoded2 = lookup$1[base64.charCodeAt(i + 1)];\n        encoded3 = lookup$1[base64.charCodeAt(i + 2)];\n        encoded4 = lookup$1[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return buffer;\n};\nvar polyUint16Array = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 2) {\n        bytes.push((buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\nvar polyUint32Array = function (buffer) {\n    var length = buffer.length;\n    var bytes = [];\n    for (var i = 0; i < length; i += 4) {\n        bytes.push((buffer[i + 3] << 24) | (buffer[i + 2] << 16) | (buffer[i + 1] << 8) | buffer[i]);\n    }\n    return bytes;\n};\n\n/** Shift size for getting the index-2 table offset. */\nvar UTRIE2_SHIFT_2 = 5;\n/** Shift size for getting the index-1 table offset. */\nvar UTRIE2_SHIFT_1 = 6 + 5;\n/**\n * Shift size for shifting left the index array values.\n * Increases possible data size with 16-bit index values at the cost\n * of compactability.\n * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.\n */\nvar UTRIE2_INDEX_SHIFT = 2;\n/**\n * Difference between the two shift sizes,\n * for getting an index-1 offset from an index-2 offset. 6=11-5\n */\nvar UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;\n/**\n * The part of the index-2 table for U+D800..U+DBFF stores values for\n * lead surrogate code _units_ not code _points_.\n * Values for lead surrogate code _points_ are indexed with this portion of the table.\n * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)\n */\nvar UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;\n/** Number of entries in a data block. 32=0x20 */\nvar UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;\n/** Mask for getting the lower bits for the in-data-block offset. */\nvar UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;\nvar UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;\n/** Count the lengths of both BMP pieces. 2080=0x820 */\nvar UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;\n/**\n * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.\n * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.\n */\nvar UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;\nvar UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */\n/**\n * The index-1 table, only used for supplementary code points, at offset 2112=0x840.\n * Variable length, for code points up to highStart, where the last single-value range starts.\n * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.\n * (For 0x100000 supplementary code points U+10000..U+10ffff.)\n *\n * The part of the index-2 table for supplementary code points starts\n * after this index-1 table.\n *\n * Both the index-1 table and the following part of the index-2 table\n * are omitted completely if there is only BMP data.\n */\nvar UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;\n/**\n * Number of index-1 entries for the BMP. 32=0x20\n * This part of the index-1 table is omitted from the serialized form.\n */\nvar UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;\n/** Number of entries in an index-2 block. 64=0x40 */\nvar UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;\n/** Mask for getting the lower bits for the in-index-2-block offset. */\nvar UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;\nvar slice16 = function (view, start, end) {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n    return new Uint16Array(Array.prototype.slice.call(view, start, end));\n};\nvar slice32 = function (view, start, end) {\n    if (view.slice) {\n        return view.slice(start, end);\n    }\n    return new Uint32Array(Array.prototype.slice.call(view, start, end));\n};\nvar createTrieFromBase64 = function (base64, _byteLength) {\n    var buffer = decode(base64);\n    var view32 = Array.isArray(buffer) ? polyUint32Array(buffer) : new Uint32Array(buffer);\n    var view16 = Array.isArray(buffer) ? polyUint16Array(buffer) : new Uint16Array(buffer);\n    var headerLength = 24;\n    var index = slice16(view16, headerLength / 2, view32[4] / 2);\n    var data = view32[5] === 2\n        ? slice16(view16, (headerLength + view32[4]) / 2)\n        : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));\n    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);\n};\nvar Trie = /** @class */ (function () {\n    function Trie(initialValue, errorValue, highStart, highValueIndex, index, data) {\n        this.initialValue = initialValue;\n        this.errorValue = errorValue;\n        this.highStart = highStart;\n        this.highValueIndex = highValueIndex;\n        this.index = index;\n        this.data = data;\n    }\n    /**\n     * Get the value for a code point as stored in the Trie.\n     *\n     * @param codePoint the code point\n     * @return the value\n     */\n    Trie.prototype.get = function (codePoint) {\n        var ix;\n        if (codePoint >= 0) {\n            if (codePoint < 0x0d800 || (codePoint > 0x0dbff && codePoint <= 0x0ffff)) {\n                // Ordinary BMP code point, excluding leading surrogates.\n                // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.\n                // 16 bit data is stored in the index array itself.\n                ix = this.index[codePoint >> UTRIE2_SHIFT_2];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n            if (codePoint <= 0xffff) {\n                // Lead Surrogate Code Point.  A Separate index section is stored for\n                // lead surrogate code units and code points.\n                //   The main index has the code unit data.\n                //   For this function, we need the code point data.\n                // Note: this expression could be refactored for slightly improved efficiency, but\n                //       surrogate code points will be so rare in practice that it's not worth it.\n                ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + ((codePoint - 0xd800) >> UTRIE2_SHIFT_2)];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n            if (codePoint < this.highStart) {\n                // Supplemental code point, use two-level lookup.\n                ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);\n                ix = this.index[ix];\n                ix += (codePoint >> UTRIE2_SHIFT_2) & UTRIE2_INDEX_2_MASK;\n                ix = this.index[ix];\n                ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);\n                return this.data[ix];\n            }\n            if (codePoint <= 0x10ffff) {\n                return this.data[this.highValueIndex];\n            }\n        }\n        // Fall through.  The code point is outside of the legal range of 0..0x10ffff.\n        return this.errorValue;\n    };\n    return Trie;\n}());\n\n/*\n * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\n\nvar Prepend = 1;\nvar CR = 2;\nvar LF = 3;\nvar Control = 4;\nvar Extend = 5;\nvar SpacingMark = 7;\nvar L = 8;\nvar V = 9;\nvar T = 10;\nvar LV = 11;\nvar LVT = 12;\nvar ZWJ = 13;\nvar Extended_Pictographic = 14;\nvar RI = 15;\nvar toCodePoints = function (str) {\n    var codePoints = [];\n    var i = 0;\n    var length = str.length;\n    while (i < length) {\n        var value = str.charCodeAt(i++);\n        if (value >= 0xd800 && value <= 0xdbff && i < length) {\n            var extra = str.charCodeAt(i++);\n            if ((extra & 0xfc00) === 0xdc00) {\n                codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n            }\n            else {\n                codePoints.push(value);\n                i--;\n            }\n        }\n        else {\n            codePoints.push(value);\n        }\n    }\n    return codePoints;\n};\nvar fromCodePoint = function () {\n    var codePoints = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        codePoints[_i] = arguments[_i];\n    }\n    if (String.fromCodePoint) {\n        return String.fromCodePoint.apply(String, codePoints);\n    }\n    var length = codePoints.length;\n    if (!length) {\n        return '';\n    }\n    var codeUnits = [];\n    var index = -1;\n    var result = '';\n    while (++index < length) {\n        var codePoint = codePoints[index];\n        if (codePoint <= 0xffff) {\n            codeUnits.push(codePoint);\n        }\n        else {\n            codePoint -= 0x10000;\n            codeUnits.push((codePoint >> 10) + 0xd800, (codePoint % 0x400) + 0xdc00);\n        }\n        if (index + 1 === length || codeUnits.length > 0x4000) {\n            result += String.fromCharCode.apply(String, codeUnits);\n            codeUnits.length = 0;\n        }\n    }\n    return result;\n};\nvar UnicodeTrie = createTrieFromBase64(base64);\nvar BREAK_NOT_ALLOWED = '';\nvar BREAK_ALLOWED = '';\nvar codePointToClass = function (codePoint) { return UnicodeTrie.get(codePoint); };\nvar _graphemeBreakAtIndex = function (_codePoints, classTypes, index) {\n    var prevIndex = index - 2;\n    var prev = classTypes[prevIndex];\n    var current = classTypes[index - 1];\n    var next = classTypes[index];\n    // GB3 Do not break between a CR and LF\n    if (current === CR && next === LF) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // GB4 Otherwise, break before and after controls.\n    if (current === CR || current === LF || current === Control) {\n        return BREAK_ALLOWED;\n    }\n    // GB5\n    if (next === CR || next === LF || next === Control) {\n        return BREAK_ALLOWED;\n    }\n    // Do not break Hangul syllable sequences.\n    // GB6\n    if (current === L && [L, V, LV, LVT].indexOf(next) !== -1) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // GB7\n    if ((current === LV || current === V) && (next === V || next === T)) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // GB8\n    if ((current === LVT || current === T) && next === T) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // GB9 Do not break before extending characters or ZWJ.\n    if (next === ZWJ || next === Extend) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // Do not break before SpacingMarks, or after Prepend characters.\n    // GB9a\n    if (next === SpacingMark) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // GB9a\n    if (current === Prepend) {\n        return BREAK_NOT_ALLOWED;\n    }\n    // GB11 Do not break within emoji modifier sequences or emoji zwj sequences.\n    if (current === ZWJ && next === Extended_Pictographic) {\n        while (prev === Extend) {\n            prev = classTypes[--prevIndex];\n        }\n        if (prev === Extended_Pictographic) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n    // GB12 Do not break within emoji flag sequences.\n    // That is, do not break between regional indicator (RI) symbols\n    // if there is an odd number of RI characters before the break point.\n    if (current === RI && next === RI) {\n        var countRI = 0;\n        while (prev === RI) {\n            countRI++;\n            prev = classTypes[--prevIndex];\n        }\n        if (countRI % 2 === 0) {\n            return BREAK_NOT_ALLOWED;\n        }\n    }\n    return BREAK_ALLOWED;\n};\nvar GraphemeBreaker = function (str) {\n    var codePoints = toCodePoints(str);\n    var length = codePoints.length;\n    var index = 0;\n    var lastEnd = 0;\n    var classTypes = codePoints.map(codePointToClass);\n    return {\n        next: function () {\n            if (index >= length) {\n                return { done: true, value: null };\n            }\n            var graphemeBreak = BREAK_NOT_ALLOWED;\n            while (index < length &&\n                (graphemeBreak = _graphemeBreakAtIndex(codePoints, classTypes, ++index)) === BREAK_NOT_ALLOWED) { }\n            if (graphemeBreak !== BREAK_NOT_ALLOWED || index === length) {\n                var value = fromCodePoint.apply(null, codePoints.slice(lastEnd, index));\n                lastEnd = index;\n                return { value: value, done: false };\n            }\n            return { done: true, value: null };\n        },\n    };\n};\nvar splitGraphemes = function (str) {\n    var breaker = GraphemeBreaker(str);\n    var graphemes = [];\n    var bk;\n    while (!(bk = breaker.next()).done) {\n        if (bk.value) {\n            graphemes.push(bk.value.slice());\n        }\n    }\n    return graphemes;\n};\n\nvar testRangeBounds = function (document) {\n    var TEST_HEIGHT = 123;\n    if (document.createRange) {\n        var range = document.createRange();\n        if (range.getBoundingClientRect) {\n            var testElement = document.createElement('boundtest');\n            testElement.style.height = TEST_HEIGHT + \"px\";\n            testElement.style.display = 'block';\n            document.body.appendChild(testElement);\n            range.selectNode(testElement);\n            var rangeBounds = range.getBoundingClientRect();\n            var rangeHeight = Math.round(rangeBounds.height);\n            document.body.removeChild(testElement);\n            if (rangeHeight === TEST_HEIGHT) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\nvar testIOSLineBreak = function (document) {\n    var testElement = document.createElement('boundtest');\n    testElement.style.width = '50px';\n    testElement.style.display = 'block';\n    testElement.style.fontSize = '12px';\n    testElement.style.letterSpacing = '0px';\n    testElement.style.wordSpacing = '0px';\n    document.body.appendChild(testElement);\n    var range = document.createRange();\n    testElement.innerHTML = typeof ''.repeat === 'function' ? '&#128104;'.repeat(10) : '';\n    var node = testElement.firstChild;\n    var textList = toCodePoints$1(node.data).map(function (i) { return fromCodePoint$1(i); });\n    var offset = 0;\n    var prev = {};\n    // ios 13 does not handle range getBoundingClientRect line changes correctly #2177\n    var supports = textList.every(function (text, i) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + text.length);\n        var rect = range.getBoundingClientRect();\n        offset += text.length;\n        var boundAhead = rect.x > prev.x || rect.y > prev.y;\n        prev = rect;\n        if (i === 0) {\n            return true;\n        }\n        return boundAhead;\n    });\n    document.body.removeChild(testElement);\n    return supports;\n};\nvar testCORS = function () { return typeof new Image().crossOrigin !== 'undefined'; };\nvar testResponseType = function () { return typeof new XMLHttpRequest().responseType === 'string'; };\nvar testSVG = function (document) {\n    var img = new Image();\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return false;\n    }\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n};\nvar isGreenPixel = function (data) {\n    return data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;\n};\nvar testForeignObject = function (document) {\n    var canvas = document.createElement('canvas');\n    var size = 100;\n    canvas.width = size;\n    canvas.height = size;\n    var ctx = canvas.getContext('2d');\n    if (!ctx) {\n        return Promise.reject(false);\n    }\n    ctx.fillStyle = 'rgb(0, 255, 0)';\n    ctx.fillRect(0, 0, size, size);\n    var img = new Image();\n    var greenImageSrc = canvas.toDataURL();\n    img.src = greenImageSrc;\n    var svg = createForeignObjectSVG(size, size, 0, 0, img);\n    ctx.fillStyle = 'red';\n    ctx.fillRect(0, 0, size, size);\n    return loadSerializedSVG$1(svg)\n        .then(function (img) {\n        ctx.drawImage(img, 0, 0);\n        var data = ctx.getImageData(0, 0, size, size).data;\n        ctx.fillStyle = 'red';\n        ctx.fillRect(0, 0, size, size);\n        var node = document.createElement('div');\n        node.style.backgroundImage = \"url(\" + greenImageSrc + \")\";\n        node.style.height = size + \"px\";\n        // Firefox 55 does not render inline <img /> tags\n        return isGreenPixel(data)\n            ? loadSerializedSVG$1(createForeignObjectSVG(size, size, 0, 0, node))\n            : Promise.reject(false);\n    })\n        .then(function (img) {\n        ctx.drawImage(img, 0, 0);\n        // Edge does not render background-images\n        return isGreenPixel(ctx.getImageData(0, 0, size, size).data);\n    })\n        .catch(function () { return false; });\n};\nvar createForeignObjectSVG = function (width, height, x, y, node) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var svg = document.createElementNS(xmlns, 'svg');\n    var foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttributeNS(null, 'width', width.toString());\n    svg.setAttributeNS(null, 'height', height.toString());\n    foreignObject.setAttributeNS(null, 'width', '100%');\n    foreignObject.setAttributeNS(null, 'height', '100%');\n    foreignObject.setAttributeNS(null, 'x', x.toString());\n    foreignObject.setAttributeNS(null, 'y', y.toString());\n    foreignObject.setAttributeNS(null, 'externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(node);\n    return svg;\n};\nvar loadSerializedSVG$1 = function (svg) {\n    return new Promise(function (resolve, reject) {\n        var img = new Image();\n        img.onload = function () { return resolve(img); };\n        img.onerror = reject;\n        img.src = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(new XMLSerializer().serializeToString(svg));\n    });\n};\nvar FEATURES = {\n    get SUPPORT_RANGE_BOUNDS() {\n        var value = testRangeBounds(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_RANGE_BOUNDS', { value: value });\n        return value;\n    },\n    get SUPPORT_WORD_BREAKING() {\n        var value = FEATURES.SUPPORT_RANGE_BOUNDS && testIOSLineBreak(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_WORD_BREAKING', { value: value });\n        return value;\n    },\n    get SUPPORT_SVG_DRAWING() {\n        var value = testSVG(document);\n        Object.defineProperty(FEATURES, 'SUPPORT_SVG_DRAWING', { value: value });\n        return value;\n    },\n    get SUPPORT_FOREIGNOBJECT_DRAWING() {\n        var value = typeof Array.from === 'function' && typeof window.fetch === 'function'\n            ? testForeignObject(document)\n            : Promise.resolve(false);\n        Object.defineProperty(FEATURES, 'SUPPORT_FOREIGNOBJECT_DRAWING', { value: value });\n        return value;\n    },\n    get SUPPORT_CORS_IMAGES() {\n        var value = testCORS();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_IMAGES', { value: value });\n        return value;\n    },\n    get SUPPORT_RESPONSE_TYPE() {\n        var value = testResponseType();\n        Object.defineProperty(FEATURES, 'SUPPORT_RESPONSE_TYPE', { value: value });\n        return value;\n    },\n    get SUPPORT_CORS_XHR() {\n        var value = 'withCredentials' in new XMLHttpRequest();\n        Object.defineProperty(FEATURES, 'SUPPORT_CORS_XHR', { value: value });\n        return value;\n    },\n    get SUPPORT_NATIVE_TEXT_SEGMENTATION() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var value = !!(typeof Intl !== 'undefined' && Intl.Segmenter);\n        Object.defineProperty(FEATURES, 'SUPPORT_NATIVE_TEXT_SEGMENTATION', { value: value });\n        return value;\n    }\n};\n\nvar TextBounds = /** @class */ (function () {\n    function TextBounds(text, bounds) {\n        this.text = text;\n        this.bounds = bounds;\n    }\n    return TextBounds;\n}());\nvar parseTextBounds = function (context, value, styles, node) {\n    var textList = breakText(value, styles);\n    var textBounds = [];\n    var offset = 0;\n    textList.forEach(function (text) {\n        if (styles.textDecorationLine.length || text.trim().length > 0) {\n            if (FEATURES.SUPPORT_RANGE_BOUNDS) {\n                var clientRects = createRange(node, offset, text.length).getClientRects();\n                if (clientRects.length > 1) {\n                    var subSegments = segmentGraphemes(text);\n                    var subOffset_1 = 0;\n                    subSegments.forEach(function (subSegment) {\n                        textBounds.push(new TextBounds(subSegment, Bounds.fromDOMRectList(context, createRange(node, subOffset_1 + offset, subSegment.length).getClientRects())));\n                        subOffset_1 += subSegment.length;\n                    });\n                }\n                else {\n                    textBounds.push(new TextBounds(text, Bounds.fromDOMRectList(context, clientRects)));\n                }\n            }\n            else {\n                var replacementNode = node.splitText(text.length);\n                textBounds.push(new TextBounds(text, getWrapperBounds(context, node)));\n                node = replacementNode;\n            }\n        }\n        else if (!FEATURES.SUPPORT_RANGE_BOUNDS) {\n            node = node.splitText(text.length);\n        }\n        offset += text.length;\n    });\n    return textBounds;\n};\nvar getWrapperBounds = function (context, node) {\n    var ownerDocument = node.ownerDocument;\n    if (ownerDocument) {\n        var wrapper = ownerDocument.createElement('html2canvaswrapper');\n        wrapper.appendChild(node.cloneNode(true));\n        var parentNode = node.parentNode;\n        if (parentNode) {\n            parentNode.replaceChild(wrapper, node);\n            var bounds = parseBounds(context, wrapper);\n            if (wrapper.firstChild) {\n                parentNode.replaceChild(wrapper.firstChild, wrapper);\n            }\n            return bounds;\n        }\n    }\n    return Bounds.EMPTY;\n};\nvar createRange = function (node, offset, length) {\n    var ownerDocument = node.ownerDocument;\n    if (!ownerDocument) {\n        throw new Error('Node has no owner document');\n    }\n    var range = ownerDocument.createRange();\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range;\n};\nvar segmentGraphemes = function (value) {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var segmenter = new Intl.Segmenter(void 0, { granularity: 'grapheme' });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Array.from(segmenter.segment(value)).map(function (segment) { return segment.segment; });\n    }\n    return splitGraphemes(value);\n};\nvar segmentWords = function (value, styles) {\n    if (FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var segmenter = new Intl.Segmenter(void 0, {\n            granularity: 'word'\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Array.from(segmenter.segment(value)).map(function (segment) { return segment.segment; });\n    }\n    return breakWords(value, styles);\n};\nvar breakText = function (value, styles) {\n    return styles.letterSpacing !== 0 ? segmentGraphemes(value) : segmentWords(value, styles);\n};\n// https://drafts.csswg.org/css-text/#word-separator\nvar wordSeparators = [0x0020, 0x00a0, 0x1361, 0x10100, 0x10101, 0x1039, 0x1091];\nvar breakWords = function (str, styles) {\n    var breaker = LineBreaker(str, {\n        lineBreak: styles.lineBreak,\n        wordBreak: styles.overflowWrap === \"break-word\" /* BREAK_WORD */ ? 'break-word' : styles.wordBreak\n    });\n    var words = [];\n    var bk;\n    var _loop_1 = function () {\n        if (bk.value) {\n            var value = bk.value.slice();\n            var codePoints = toCodePoints$1(value);\n            var word_1 = '';\n            codePoints.forEach(function (codePoint) {\n                if (wordSeparators.indexOf(codePoint) === -1) {\n                    word_1 += fromCodePoint$1(codePoint);\n                }\n                else {\n                    if (word_1.length) {\n                        words.push(word_1);\n                    }\n                    words.push(fromCodePoint$1(codePoint));\n                    word_1 = '';\n                }\n            });\n            if (word_1.length) {\n                words.push(word_1);\n            }\n        }\n    };\n    while (!(bk = breaker.next()).done) {\n        _loop_1();\n    }\n    return words;\n};\n\nvar TextContainer = /** @class */ (function () {\n    function TextContainer(context, node, styles) {\n        this.text = transform(node.data, styles.textTransform);\n        this.textBounds = parseTextBounds(context, this.text, styles, node);\n    }\n    return TextContainer;\n}());\nvar transform = function (text, transform) {\n    switch (transform) {\n        case 1 /* LOWERCASE */:\n            return text.toLowerCase();\n        case 3 /* CAPITALIZE */:\n            return text.replace(CAPITALIZE, capitalize);\n        case 2 /* UPPERCASE */:\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\nvar CAPITALIZE = /(^|\\s|:|-|\\(|\\))([a-z])/g;\nvar capitalize = function (m, p1, p2) {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n    return m;\n};\n\nvar ImageElementContainer = /** @class */ (function (_super) {\n    __extends(ImageElementContainer, _super);\n    function ImageElementContainer(context, img) {\n        var _this = _super.call(this, context, img) || this;\n        _this.src = img.currentSrc || img.src;\n        _this.intrinsicWidth = img.naturalWidth;\n        _this.intrinsicHeight = img.naturalHeight;\n        _this.context.cache.addImage(_this.src);\n        return _this;\n    }\n    return ImageElementContainer;\n}(ElementContainer));\n\nvar CanvasElementContainer = /** @class */ (function (_super) {\n    __extends(CanvasElementContainer, _super);\n    function CanvasElementContainer(context, canvas) {\n        var _this = _super.call(this, context, canvas) || this;\n        _this.canvas = canvas;\n        _this.intrinsicWidth = canvas.width;\n        _this.intrinsicHeight = canvas.height;\n        return _this;\n    }\n    return CanvasElementContainer;\n}(ElementContainer));\n\nvar SVGElementContainer = /** @class */ (function (_super) {\n    __extends(SVGElementContainer, _super);\n    function SVGElementContainer(context, img) {\n        var _this = _super.call(this, context, img) || this;\n        var s = new XMLSerializer();\n        var bounds = parseBounds(context, img);\n        img.setAttribute('width', bounds.width + \"px\");\n        img.setAttribute('height', bounds.height + \"px\");\n        _this.svg = \"data:image/svg+xml,\" + encodeURIComponent(s.serializeToString(img));\n        _this.intrinsicWidth = img.width.baseVal.value;\n        _this.intrinsicHeight = img.height.baseVal.value;\n        _this.context.cache.addImage(_this.svg);\n        return _this;\n    }\n    return SVGElementContainer;\n}(ElementContainer));\n\nvar LIElementContainer = /** @class */ (function (_super) {\n    __extends(LIElementContainer, _super);\n    function LIElementContainer(context, element) {\n        var _this = _super.call(this, context, element) || this;\n        _this.value = element.value;\n        return _this;\n    }\n    return LIElementContainer;\n}(ElementContainer));\n\nvar OLElementContainer = /** @class */ (function (_super) {\n    __extends(OLElementContainer, _super);\n    function OLElementContainer(context, element) {\n        var _this = _super.call(this, context, element) || this;\n        _this.start = element.start;\n        _this.reversed = typeof element.reversed === 'boolean' && element.reversed === true;\n        return _this;\n    }\n    return OLElementContainer;\n}(ElementContainer));\n\nvar CHECKBOX_BORDER_RADIUS = [\n    {\n        type: 15 /* DIMENSION_TOKEN */,\n        flags: 0,\n        unit: 'px',\n        number: 3\n    }\n];\nvar RADIO_BORDER_RADIUS = [\n    {\n        type: 16 /* PERCENTAGE_TOKEN */,\n        flags: 0,\n        number: 50\n    }\n];\nvar reformatInputBounds = function (bounds) {\n    if (bounds.width > bounds.height) {\n        return new Bounds(bounds.left + (bounds.width - bounds.height) / 2, bounds.top, bounds.height, bounds.height);\n    }\n    else if (bounds.width < bounds.height) {\n        return new Bounds(bounds.left, bounds.top + (bounds.height - bounds.width) / 2, bounds.width, bounds.width);\n    }\n    return bounds;\n};\nvar getInputValue = function (node) {\n    var value = node.type === PASSWORD ? new Array(node.value.length + 1).join('\\u2022') : node.value;\n    return value.length === 0 ? node.placeholder || '' : value;\n};\nvar CHECKBOX = 'checkbox';\nvar RADIO = 'radio';\nvar PASSWORD = 'password';\nvar INPUT_COLOR = 0x2a2a2aff;\nvar InputElementContainer = /** @class */ (function (_super) {\n    __extends(InputElementContainer, _super);\n    function InputElementContainer(context, input) {\n        var _this = _super.call(this, context, input) || this;\n        _this.type = input.type.toLowerCase();\n        _this.checked = input.checked;\n        _this.value = getInputValue(input);\n        if (_this.type === CHECKBOX || _this.type === RADIO) {\n            _this.styles.backgroundColor = 0xdededeff;\n            _this.styles.borderTopColor =\n                _this.styles.borderRightColor =\n                    _this.styles.borderBottomColor =\n                        _this.styles.borderLeftColor =\n                            0xa5a5a5ff;\n            _this.styles.borderTopWidth =\n                _this.styles.borderRightWidth =\n                    _this.styles.borderBottomWidth =\n                        _this.styles.borderLeftWidth =\n                            1;\n            _this.styles.borderTopStyle =\n                _this.styles.borderRightStyle =\n                    _this.styles.borderBottomStyle =\n                        _this.styles.borderLeftStyle =\n                            1 /* SOLID */;\n            _this.styles.backgroundClip = [0 /* BORDER_BOX */];\n            _this.styles.backgroundOrigin = [0 /* BORDER_BOX */];\n            _this.bounds = reformatInputBounds(_this.bounds);\n        }\n        switch (_this.type) {\n            case CHECKBOX:\n                _this.styles.borderTopRightRadius =\n                    _this.styles.borderTopLeftRadius =\n                        _this.styles.borderBottomRightRadius =\n                            _this.styles.borderBottomLeftRadius =\n                                CHECKBOX_BORDER_RADIUS;\n                break;\n            case RADIO:\n                _this.styles.borderTopRightRadius =\n                    _this.styles.borderTopLeftRadius =\n                        _this.styles.borderBottomRightRadius =\n                            _this.styles.borderBottomLeftRadius =\n                                RADIO_BORDER_RADIUS;\n                break;\n        }\n        return _this;\n    }\n    return InputElementContainer;\n}(ElementContainer));\n\nvar SelectElementContainer = /** @class */ (function (_super) {\n    __extends(SelectElementContainer, _super);\n    function SelectElementContainer(context, element) {\n        var _this = _super.call(this, context, element) || this;\n        var option = element.options[element.selectedIndex || 0];\n        _this.value = option ? option.text || '' : '';\n        return _this;\n    }\n    return SelectElementContainer;\n}(ElementContainer));\n\nvar TextareaElementContainer = /** @class */ (function (_super) {\n    __extends(TextareaElementContainer, _super);\n    function TextareaElementContainer(context, element) {\n        var _this = _super.call(this, context, element) || this;\n        _this.value = element.value;\n        return _this;\n    }\n    return TextareaElementContainer;\n}(ElementContainer));\n\nvar IFrameElementContainer = /** @class */ (function (_super) {\n    __extends(IFrameElementContainer, _super);\n    function IFrameElementContainer(context, iframe) {\n        var _this = _super.call(this, context, iframe) || this;\n        _this.src = iframe.src;\n        _this.width = parseInt(iframe.width, 10) || 0;\n        _this.height = parseInt(iframe.height, 10) || 0;\n        _this.backgroundColor = _this.styles.backgroundColor;\n        try {\n            if (iframe.contentWindow &&\n                iframe.contentWindow.document &&\n                iframe.contentWindow.document.documentElement) {\n                _this.tree = parseTree(context, iframe.contentWindow.document.documentElement);\n                // http://www.w3.org/TR/css3-background/#special-backgrounds\n                var documentBackgroundColor = iframe.contentWindow.document.documentElement\n                    ? parseColor(context, getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor)\n                    : COLORS.TRANSPARENT;\n                var bodyBackgroundColor = iframe.contentWindow.document.body\n                    ? parseColor(context, getComputedStyle(iframe.contentWindow.document.body).backgroundColor)\n                    : COLORS.TRANSPARENT;\n                _this.backgroundColor = isTransparent(documentBackgroundColor)\n                    ? isTransparent(bodyBackgroundColor)\n                        ? _this.styles.backgroundColor\n                        : bodyBackgroundColor\n                    : documentBackgroundColor;\n            }\n        }\n        catch (e) { }\n        return _this;\n    }\n    return IFrameElementContainer;\n}(ElementContainer));\n\nvar LIST_OWNERS = ['OL', 'UL', 'MENU'];\nvar parseNodeTree = function (context, node, parent, root) {\n    for (var childNode = node.firstChild, nextNode = void 0; childNode; childNode = nextNode) {\n        nextNode = childNode.nextSibling;\n        if (isTextNode(childNode) && childNode.data.trim().length > 0) {\n            parent.textNodes.push(new TextContainer(context, childNode, parent.styles));\n        }\n        else if (isElementNode(childNode)) {\n            if (isSlotElement(childNode) && childNode.assignedNodes) {\n                childNode.assignedNodes().forEach(function (childNode) { return parseNodeTree(context, childNode, parent, root); });\n            }\n            else {\n                var container = createContainer(context, childNode);\n                if (container.styles.isVisible()) {\n                    if (createsRealStackingContext(childNode, container, root)) {\n                        container.flags |= 4 /* CREATES_REAL_STACKING_CONTEXT */;\n                    }\n                    else if (createsStackingContext(container.styles)) {\n                        container.flags |= 2 /* CREATES_STACKING_CONTEXT */;\n                    }\n                    if (LIST_OWNERS.indexOf(childNode.tagName) !== -1) {\n                        container.flags |= 8 /* IS_LIST_OWNER */;\n                    }\n                    parent.elements.push(container);\n                    childNode.slot;\n                    if (childNode.shadowRoot) {\n                        parseNodeTree(context, childNode.shadowRoot, container, root);\n                    }\n                    else if (!isTextareaElement(childNode) &&\n                        !isSVGElement(childNode) &&\n                        !isSelectElement(childNode)) {\n                        parseNodeTree(context, childNode, container, root);\n                    }\n                }\n            }\n        }\n    }\n};\nvar createContainer = function (context, element) {\n    if (isImageElement(element)) {\n        return new ImageElementContainer(context, element);\n    }\n    if (isCanvasElement(element)) {\n        return new CanvasElementContainer(context, element);\n    }\n    if (isSVGElement(element)) {\n        return new SVGElementContainer(context, element);\n    }\n    if (isLIElement(element)) {\n        return new LIElementContainer(context, element);\n    }\n    if (isOLElement(element)) {\n        return new OLElementContainer(context, element);\n    }\n    if (isInputElement(element)) {\n        return new InputElementContainer(context, element);\n    }\n    if (isSelectElement(element)) {\n        return new SelectElementContainer(context, element);\n    }\n    if (isTextareaElement(element)) {\n        return new TextareaElementContainer(context, element);\n    }\n    if (isIFrameElement(element)) {\n        return new IFrameElementContainer(context, element);\n    }\n    return new ElementContainer(context, element);\n};\nvar parseTree = function (context, element) {\n    var container = createContainer(context, element);\n    container.flags |= 4 /* CREATES_REAL_STACKING_CONTEXT */;\n    parseNodeTree(context, element, container, container);\n    return container;\n};\nvar createsRealStackingContext = function (node, container, root) {\n    return (container.styles.isPositionedWithZIndex() ||\n        container.styles.opacity < 1 ||\n        container.styles.isTransformed() ||\n        (isBodyElement(node) && root.styles.isTransparent()));\n};\nvar createsStackingContext = function (styles) { return styles.isPositioned() || styles.isFloating(); };\nvar isTextNode = function (node) { return node.nodeType === Node.TEXT_NODE; };\nvar isElementNode = function (node) { return node.nodeType === Node.ELEMENT_NODE; };\nvar isHTMLElementNode = function (node) {\n    return isElementNode(node) && typeof node.style !== 'undefined' && !isSVGElementNode(node);\n};\nvar isSVGElementNode = function (element) {\n    return typeof element.className === 'object';\n};\nvar isLIElement = function (node) { return node.tagName === 'LI'; };\nvar isOLElement = function (node) { return node.tagName === 'OL'; };\nvar isInputElement = function (node) { return node.tagName === 'INPUT'; };\nvar isHTMLElement = function (node) { return node.tagName === 'HTML'; };\nvar isSVGElement = function (node) { return node.tagName === 'svg'; };\nvar isBodyElement = function (node) { return node.tagName === 'BODY'; };\nvar isCanvasElement = function (node) { return node.tagName === 'CANVAS'; };\nvar isVideoElement = function (node) { return node.tagName === 'VIDEO'; };\nvar isImageElement = function (node) { return node.tagName === 'IMG'; };\nvar isIFrameElement = function (node) { return node.tagName === 'IFRAME'; };\nvar isStyleElement = function (node) { return node.tagName === 'STYLE'; };\nvar isScriptElement = function (node) { return node.tagName === 'SCRIPT'; };\nvar isTextareaElement = function (node) { return node.tagName === 'TEXTAREA'; };\nvar isSelectElement = function (node) { return node.tagName === 'SELECT'; };\nvar isSlotElement = function (node) { return node.tagName === 'SLOT'; };\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nvar isCustomElement = function (node) { return node.tagName.indexOf('-') > 0; };\n\nvar CounterState = /** @class */ (function () {\n    function CounterState() {\n        this.counters = {};\n    }\n    CounterState.prototype.getCounterValue = function (name) {\n        var counter = this.counters[name];\n        if (counter && counter.length) {\n            return counter[counter.length - 1];\n        }\n        return 1;\n    };\n    CounterState.prototype.getCounterValues = function (name) {\n        var counter = this.counters[name];\n        return counter ? counter : [];\n    };\n    CounterState.prototype.pop = function (counters) {\n        var _this = this;\n        counters.forEach(function (counter) { return _this.counters[counter].pop(); });\n    };\n    CounterState.prototype.parse = function (style) {\n        var _this = this;\n        var counterIncrement = style.counterIncrement;\n        var counterReset = style.counterReset;\n        var canReset = true;\n        if (counterIncrement !== null) {\n            counterIncrement.forEach(function (entry) {\n                var counter = _this.counters[entry.counter];\n                if (counter && entry.increment !== 0) {\n                    canReset = false;\n                    if (!counter.length) {\n                        counter.push(1);\n                    }\n                    counter[Math.max(0, counter.length - 1)] += entry.increment;\n                }\n            });\n        }\n        var counterNames = [];\n        if (canReset) {\n            counterReset.forEach(function (entry) {\n                var counter = _this.counters[entry.counter];\n                counterNames.push(entry.counter);\n                if (!counter) {\n                    counter = _this.counters[entry.counter] = [];\n                }\n                counter.push(entry.reset);\n            });\n        }\n        return counterNames;\n    };\n    return CounterState;\n}());\nvar ROMAN_UPPER = {\n    integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],\n    values: ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']\n};\nvar ARMENIAN = {\n    integers: [\n        9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70,\n        60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        ''\n    ]\n};\nvar HEBREW = {\n    integers: [\n        10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20,\n        19, 18, 17, 16, 15, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        ''\n    ]\n};\nvar GEORGIAN = {\n    integers: [\n        10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90,\n        80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1\n    ],\n    values: [\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        '',\n        ''\n    ]\n};\nvar createAdditiveCounter = function (value, min, max, symbols, fallback, suffix) {\n    if (value < min || value > max) {\n        return createCounterText(value, fallback, suffix.length > 0);\n    }\n    return (symbols.integers.reduce(function (string, integer, index) {\n        while (value >= integer) {\n            value -= integer;\n            string += symbols.values[index];\n        }\n        return string;\n    }, '') + suffix);\n};\nvar createCounterStyleWithSymbolResolver = function (value, codePointRangeLength, isNumeric, resolver) {\n    var string = '';\n    do {\n        if (!isNumeric) {\n            value--;\n        }\n        string = resolver(value) + string;\n        value /= codePointRangeLength;\n    } while (value * codePointRangeLength >= codePointRangeLength);\n    return string;\n};\nvar createCounterStyleFromRange = function (value, codePointRangeStart, codePointRangeEnd, isNumeric, suffix) {\n    var codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;\n    return ((value < 0 ? '-' : '') +\n        (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, function (codePoint) {\n            return fromCodePoint$1(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart);\n        }) +\n            suffix));\n};\nvar createCounterStyleFromSymbols = function (value, symbols, suffix) {\n    if (suffix === void 0) { suffix = '. '; }\n    var codePointRangeLength = symbols.length;\n    return (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, false, function (codePoint) { return symbols[Math.floor(codePoint % codePointRangeLength)]; }) + suffix);\n};\nvar CJK_ZEROS = 1 << 0;\nvar CJK_TEN_COEFFICIENTS = 1 << 1;\nvar CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;\nvar CJK_HUNDRED_COEFFICIENTS = 1 << 3;\nvar createCJKCounter = function (value, numbers, multipliers, negativeSign, suffix, flags) {\n    if (value < -9999 || value > 9999) {\n        return createCounterText(value, 4 /* CJK_DECIMAL */, suffix.length > 0);\n    }\n    var tmp = Math.abs(value);\n    var string = suffix;\n    if (tmp === 0) {\n        return numbers[0] + string;\n    }\n    for (var digit = 0; tmp > 0 && digit <= 4; digit++) {\n        var coefficient = tmp % 10;\n        if (coefficient === 0 && contains(flags, CJK_ZEROS) && string !== '') {\n            string = numbers[coefficient] + string;\n        }\n        else if (coefficient > 1 ||\n            (coefficient === 1 && digit === 0) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_COEFFICIENTS)) ||\n            (coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_HIGH_COEFFICIENTS) && value > 100) ||\n            (coefficient === 1 && digit > 1 && contains(flags, CJK_HUNDRED_COEFFICIENTS))) {\n            string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : '') + string;\n        }\n        else if (coefficient === 1 && digit > 0) {\n            string = multipliers[digit - 1] + string;\n        }\n        tmp = Math.floor(tmp / 10);\n    }\n    return (value < 0 ? negativeSign : '') + string;\n};\nvar CHINESE_INFORMAL_MULTIPLIERS = '';\nvar CHINESE_FORMAL_MULTIPLIERS = '';\nvar JAPANESE_NEGATIVE = '';\nvar KOREAN_NEGATIVE = '';\nvar createCounterText = function (value, type, appendSuffix) {\n    var defaultSuffix = appendSuffix ? '. ' : '';\n    var cjkSuffix = appendSuffix ? '' : '';\n    var koreanSuffix = appendSuffix ? ', ' : '';\n    var spaceSuffix = appendSuffix ? ' ' : '';\n    switch (type) {\n        case 0 /* DISC */:\n            return '' + spaceSuffix;\n        case 1 /* CIRCLE */:\n            return '' + spaceSuffix;\n        case 2 /* SQUARE */:\n            return '' + spaceSuffix;\n        case 5 /* DECIMAL_LEADING_ZERO */:\n            var string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n            return string.length < 4 ? \"0\" + string : string;\n        case 4 /* CJK_DECIMAL */:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case 6 /* LOWER_ROMAN */:\n            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, 3 /* DECIMAL */, defaultSuffix).toLowerCase();\n        case 7 /* UPPER_ROMAN */:\n            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, 3 /* DECIMAL */, defaultSuffix);\n        case 8 /* LOWER_GREEK */:\n            return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);\n        case 9 /* LOWER_ALPHA */:\n            return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);\n        case 10 /* UPPER_ALPHA */:\n            return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);\n        case 11 /* ARABIC_INDIC */:\n            return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);\n        case 12 /* ARMENIAN */:\n        case 49 /* UPPER_ARMENIAN */:\n            return createAdditiveCounter(value, 1, 9999, ARMENIAN, 3 /* DECIMAL */, defaultSuffix);\n        case 35 /* LOWER_ARMENIAN */:\n            return createAdditiveCounter(value, 1, 9999, ARMENIAN, 3 /* DECIMAL */, defaultSuffix).toLowerCase();\n        case 13 /* BENGALI */:\n            return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);\n        case 14 /* CAMBODIAN */:\n        case 30 /* KHMER */:\n            return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);\n        case 15 /* CJK_EARTHLY_BRANCH */:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case 16 /* CJK_HEAVENLY_STEM */:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case 17 /* CJK_IDEOGRAPHIC */:\n        case 48 /* TRAD_CHINESE_INFORMAL */:\n            return createCJKCounter(value, '', CHINESE_INFORMAL_MULTIPLIERS, '', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case 47 /* TRAD_CHINESE_FORMAL */:\n            return createCJKCounter(value, '', CHINESE_FORMAL_MULTIPLIERS, '', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case 42 /* SIMP_CHINESE_INFORMAL */:\n            return createCJKCounter(value, '', CHINESE_INFORMAL_MULTIPLIERS, '', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case 41 /* SIMP_CHINESE_FORMAL */:\n            return createCJKCounter(value, '', CHINESE_FORMAL_MULTIPLIERS, '', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);\n        case 26 /* JAPANESE_INFORMAL */:\n            return createCJKCounter(value, '', '', JAPANESE_NEGATIVE, cjkSuffix, 0);\n        case 25 /* JAPANESE_FORMAL */:\n            return createCJKCounter(value, '', '', JAPANESE_NEGATIVE, cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);\n        case 31 /* KOREAN_HANGUL_FORMAL */:\n            return createCJKCounter(value, '', '', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);\n        case 33 /* KOREAN_HANJA_INFORMAL */:\n            return createCJKCounter(value, '', '', KOREAN_NEGATIVE, koreanSuffix, 0);\n        case 32 /* KOREAN_HANJA_FORMAL */:\n            return createCJKCounter(value, '', '', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);\n        case 18 /* DEVANAGARI */:\n            return createCounterStyleFromRange(value, 0x966, 0x96f, true, defaultSuffix);\n        case 20 /* GEORGIAN */:\n            return createAdditiveCounter(value, 1, 19999, GEORGIAN, 3 /* DECIMAL */, defaultSuffix);\n        case 21 /* GUJARATI */:\n            return createCounterStyleFromRange(value, 0xae6, 0xaef, true, defaultSuffix);\n        case 22 /* GURMUKHI */:\n            return createCounterStyleFromRange(value, 0xa66, 0xa6f, true, defaultSuffix);\n        case 22 /* HEBREW */:\n            return createAdditiveCounter(value, 1, 10999, HEBREW, 3 /* DECIMAL */, defaultSuffix);\n        case 23 /* HIRAGANA */:\n            return createCounterStyleFromSymbols(value, '');\n        case 24 /* HIRAGANA_IROHA */:\n            return createCounterStyleFromSymbols(value, '');\n        case 27 /* KANNADA */:\n            return createCounterStyleFromRange(value, 0xce6, 0xcef, true, defaultSuffix);\n        case 28 /* KATAKANA */:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case 29 /* KATAKANA_IROHA */:\n            return createCounterStyleFromSymbols(value, '', cjkSuffix);\n        case 34 /* LAO */:\n            return createCounterStyleFromRange(value, 0xed0, 0xed9, true, defaultSuffix);\n        case 37 /* MONGOLIAN */:\n            return createCounterStyleFromRange(value, 0x1810, 0x1819, true, defaultSuffix);\n        case 38 /* MYANMAR */:\n            return createCounterStyleFromRange(value, 0x1040, 0x1049, true, defaultSuffix);\n        case 39 /* ORIYA */:\n            return createCounterStyleFromRange(value, 0xb66, 0xb6f, true, defaultSuffix);\n        case 40 /* PERSIAN */:\n            return createCounterStyleFromRange(value, 0x6f0, 0x6f9, true, defaultSuffix);\n        case 43 /* TAMIL */:\n            return createCounterStyleFromRange(value, 0xbe6, 0xbef, true, defaultSuffix);\n        case 44 /* TELUGU */:\n            return createCounterStyleFromRange(value, 0xc66, 0xc6f, true, defaultSuffix);\n        case 45 /* THAI */:\n            return createCounterStyleFromRange(value, 0xe50, 0xe59, true, defaultSuffix);\n        case 46 /* TIBETAN */:\n            return createCounterStyleFromRange(value, 0xf20, 0xf29, true, defaultSuffix);\n        case 3 /* DECIMAL */:\n        default:\n            return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);\n    }\n};\n\nvar IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\nvar DocumentCloner = /** @class */ (function () {\n    function DocumentCloner(context, element, options) {\n        this.context = context;\n        this.options = options;\n        this.scrolledElements = [];\n        this.referenceElement = element;\n        this.counters = new CounterState();\n        this.quoteDepth = 0;\n        if (!element.ownerDocument) {\n            throw new Error('Cloned element does not have an owner document');\n        }\n        this.documentElement = this.cloneNode(element.ownerDocument.documentElement, false);\n    }\n    DocumentCloner.prototype.toIFrame = function (ownerDocument, windowSize) {\n        var _this = this;\n        var iframe = createIFrameContainer(ownerDocument, windowSize);\n        if (!iframe.contentWindow) {\n            return Promise.reject(\"Unable to find iframe window\");\n        }\n        var scrollX = ownerDocument.defaultView.pageXOffset;\n        var scrollY = ownerDocument.defaultView.pageYOffset;\n        var cloneWindow = iframe.contentWindow;\n        var documentClone = cloneWindow.document;\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        var iframeLoad = iframeLoader(iframe).then(function () { return __awaiter(_this, void 0, void 0, function () {\n            var onclone, referenceElement;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.scrolledElements.forEach(restoreNodeScroll);\n                        if (cloneWindow) {\n                            cloneWindow.scrollTo(windowSize.left, windowSize.top);\n                            if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) &&\n                                (cloneWindow.scrollY !== windowSize.top || cloneWindow.scrollX !== windowSize.left)) {\n                                this.context.logger.warn('Unable to restore scroll position for cloned document');\n                                this.context.windowBounds = this.context.windowBounds.add(cloneWindow.scrollX - windowSize.left, cloneWindow.scrollY - windowSize.top, 0, 0);\n                            }\n                        }\n                        onclone = this.options.onclone;\n                        referenceElement = this.clonedReferenceElement;\n                        if (typeof referenceElement === 'undefined') {\n                            return [2 /*return*/, Promise.reject(\"Error finding the \" + this.referenceElement.nodeName + \" in the cloned document\")];\n                        }\n                        if (!(documentClone.fonts && documentClone.fonts.ready)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, documentClone.fonts.ready];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (!/(AppleWebKit)/g.test(navigator.userAgent)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, imagesReady(documentClone)];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        if (typeof onclone === 'function') {\n                            return [2 /*return*/, Promise.resolve()\n                                    .then(function () { return onclone(documentClone, referenceElement); })\n                                    .then(function () { return iframe; })];\n                        }\n                        return [2 /*return*/, iframe];\n                }\n            });\n        }); });\n        documentClone.open();\n        documentClone.write(serializeDoctype(document.doctype) + \"<html></html>\");\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(this.referenceElement.ownerDocument, scrollX, scrollY);\n        documentClone.replaceChild(documentClone.adoptNode(this.documentElement), documentClone.documentElement);\n        documentClone.close();\n        return iframeLoad;\n    };\n    DocumentCloner.prototype.createElementClone = function (node) {\n        if (isDebugging(node, 2 /* CLONE */)) {\n            debugger;\n        }\n        if (isCanvasElement(node)) {\n            return this.createCanvasClone(node);\n        }\n        if (isVideoElement(node)) {\n            return this.createVideoClone(node);\n        }\n        if (isStyleElement(node)) {\n            return this.createStyleClone(node);\n        }\n        var clone = node.cloneNode(false);\n        if (isImageElement(clone)) {\n            if (isImageElement(node) && node.currentSrc && node.currentSrc !== node.src) {\n                clone.src = node.currentSrc;\n                clone.srcset = '';\n            }\n            if (clone.loading === 'lazy') {\n                clone.loading = 'eager';\n            }\n        }\n        if (isCustomElement(clone)) {\n            return this.createCustomElementClone(clone);\n        }\n        return clone;\n    };\n    DocumentCloner.prototype.createCustomElementClone = function (node) {\n        var clone = document.createElement('html2canvascustomelement');\n        copyCSSStyles(node.style, clone);\n        return clone;\n    };\n    DocumentCloner.prototype.createStyleClone = function (node) {\n        try {\n            var sheet = node.sheet;\n            if (sheet && sheet.cssRules) {\n                var css = [].slice.call(sheet.cssRules, 0).reduce(function (css, rule) {\n                    if (rule && typeof rule.cssText === 'string') {\n                        return css + rule.cssText;\n                    }\n                    return css;\n                }, '');\n                var style = node.cloneNode(false);\n                style.textContent = css;\n                return style;\n            }\n        }\n        catch (e) {\n            // accessing node.sheet.cssRules throws a DOMException\n            this.context.logger.error('Unable to access cssRules property', e);\n            if (e.name !== 'SecurityError') {\n                throw e;\n            }\n        }\n        return node.cloneNode(false);\n    };\n    DocumentCloner.prototype.createCanvasClone = function (canvas) {\n        var _a;\n        if (this.options.inlineImages && canvas.ownerDocument) {\n            var img = canvas.ownerDocument.createElement('img');\n            try {\n                img.src = canvas.toDataURL();\n                return img;\n            }\n            catch (e) {\n                this.context.logger.info(\"Unable to inline canvas contents, canvas is tainted\", canvas);\n            }\n        }\n        var clonedCanvas = canvas.cloneNode(false);\n        try {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            var ctx = canvas.getContext('2d');\n            var clonedCtx = clonedCanvas.getContext('2d');\n            if (clonedCtx) {\n                if (!this.options.allowTaint && ctx) {\n                    clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n                }\n                else {\n                    var gl = (_a = canvas.getContext('webgl2')) !== null && _a !== void 0 ? _a : canvas.getContext('webgl');\n                    if (gl) {\n                        var attribs = gl.getContextAttributes();\n                        if ((attribs === null || attribs === void 0 ? void 0 : attribs.preserveDrawingBuffer) === false) {\n                            this.context.logger.warn('Unable to clone WebGL context as it has preserveDrawingBuffer=false', canvas);\n                        }\n                    }\n                    clonedCtx.drawImage(canvas, 0, 0);\n                }\n            }\n            return clonedCanvas;\n        }\n        catch (e) {\n            this.context.logger.info(\"Unable to clone canvas as it is tainted\", canvas);\n        }\n        return clonedCanvas;\n    };\n    DocumentCloner.prototype.createVideoClone = function (video) {\n        var canvas = video.ownerDocument.createElement('canvas');\n        canvas.width = video.offsetWidth;\n        canvas.height = video.offsetHeight;\n        var ctx = canvas.getContext('2d');\n        try {\n            if (ctx) {\n                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n                if (!this.options.allowTaint) {\n                    ctx.getImageData(0, 0, canvas.width, canvas.height);\n                }\n            }\n            return canvas;\n        }\n        catch (e) {\n            this.context.logger.info(\"Unable to clone video as it is tainted\", video);\n        }\n        var blankCanvas = video.ownerDocument.createElement('canvas');\n        blankCanvas.width = video.offsetWidth;\n        blankCanvas.height = video.offsetHeight;\n        return blankCanvas;\n    };\n    DocumentCloner.prototype.appendChildNode = function (clone, child, copyStyles) {\n        if (!isElementNode(child) ||\n            (!isScriptElement(child) &&\n                !child.hasAttribute(IGNORE_ATTRIBUTE) &&\n                (typeof this.options.ignoreElements !== 'function' || !this.options.ignoreElements(child)))) {\n            if (!this.options.copyStyles || !isElementNode(child) || !isStyleElement(child)) {\n                clone.appendChild(this.cloneNode(child, copyStyles));\n            }\n        }\n    };\n    DocumentCloner.prototype.cloneChildNodes = function (node, clone, copyStyles) {\n        var _this = this;\n        for (var child = node.shadowRoot ? node.shadowRoot.firstChild : node.firstChild; child; child = child.nextSibling) {\n            if (isElementNode(child) && isSlotElement(child) && typeof child.assignedNodes === 'function') {\n                var assignedNodes = child.assignedNodes();\n                if (assignedNodes.length) {\n                    assignedNodes.forEach(function (assignedNode) { return _this.appendChildNode(clone, assignedNode, copyStyles); });\n                }\n            }\n            else {\n                this.appendChildNode(clone, child, copyStyles);\n            }\n        }\n    };\n    DocumentCloner.prototype.cloneNode = function (node, copyStyles) {\n        if (isTextNode(node)) {\n            return document.createTextNode(node.data);\n        }\n        if (!node.ownerDocument) {\n            return node.cloneNode(false);\n        }\n        var window = node.ownerDocument.defaultView;\n        if (window && isElementNode(node) && (isHTMLElementNode(node) || isSVGElementNode(node))) {\n            var clone = this.createElementClone(node);\n            clone.style.transitionProperty = 'none';\n            var style = window.getComputedStyle(node);\n            var styleBefore = window.getComputedStyle(node, ':before');\n            var styleAfter = window.getComputedStyle(node, ':after');\n            if (this.referenceElement === node && isHTMLElementNode(clone)) {\n                this.clonedReferenceElement = clone;\n            }\n            if (isBodyElement(clone)) {\n                createPseudoHideStyles(clone);\n            }\n            var counters = this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));\n            var before = this.resolvePseudoContent(node, clone, styleBefore, PseudoElementType.BEFORE);\n            if (isCustomElement(node)) {\n                copyStyles = true;\n            }\n            if (!isVideoElement(node)) {\n                this.cloneChildNodes(node, clone, copyStyles);\n            }\n            if (before) {\n                clone.insertBefore(before, clone.firstChild);\n            }\n            var after = this.resolvePseudoContent(node, clone, styleAfter, PseudoElementType.AFTER);\n            if (after) {\n                clone.appendChild(after);\n            }\n            this.counters.pop(counters);\n            if ((style && (this.options.copyStyles || isSVGElementNode(node)) && !isIFrameElement(node)) ||\n                copyStyles) {\n                copyCSSStyles(style, clone);\n            }\n            if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n                this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n            }\n            if ((isTextareaElement(node) || isSelectElement(node)) &&\n                (isTextareaElement(clone) || isSelectElement(clone))) {\n                clone.value = node.value;\n            }\n            return clone;\n        }\n        return node.cloneNode(false);\n    };\n    DocumentCloner.prototype.resolvePseudoContent = function (node, clone, style, pseudoElt) {\n        var _this = this;\n        if (!style) {\n            return;\n        }\n        var value = style.content;\n        var document = clone.ownerDocument;\n        if (!document || !value || value === 'none' || value === '-moz-alt-content' || style.display === 'none') {\n            return;\n        }\n        this.counters.parse(new CSSParsedCounterDeclaration(this.context, style));\n        var declaration = new CSSParsedPseudoDeclaration(this.context, style);\n        var anonymousReplacedElement = document.createElement('html2canvaspseudoelement');\n        copyCSSStyles(style, anonymousReplacedElement);\n        declaration.content.forEach(function (token) {\n            if (token.type === 0 /* STRING_TOKEN */) {\n                anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n            }\n            else if (token.type === 22 /* URL_TOKEN */) {\n                var img = document.createElement('img');\n                img.src = token.value;\n                img.style.opacity = '1';\n                anonymousReplacedElement.appendChild(img);\n            }\n            else if (token.type === 18 /* FUNCTION */) {\n                if (token.name === 'attr') {\n                    var attr = token.values.filter(isIdentToken);\n                    if (attr.length) {\n                        anonymousReplacedElement.appendChild(document.createTextNode(node.getAttribute(attr[0].value) || ''));\n                    }\n                }\n                else if (token.name === 'counter') {\n                    var _a = token.values.filter(nonFunctionArgSeparator), counter = _a[0], counterStyle = _a[1];\n                    if (counter && isIdentToken(counter)) {\n                        var counterState = _this.counters.getCounterValue(counter.value);\n                        var counterType = counterStyle && isIdentToken(counterStyle)\n                            ? listStyleType.parse(_this.context, counterStyle.value)\n                            : 3 /* DECIMAL */;\n                        anonymousReplacedElement.appendChild(document.createTextNode(createCounterText(counterState, counterType, false)));\n                    }\n                }\n                else if (token.name === 'counters') {\n                    var _b = token.values.filter(nonFunctionArgSeparator), counter = _b[0], delim = _b[1], counterStyle = _b[2];\n                    if (counter && isIdentToken(counter)) {\n                        var counterStates = _this.counters.getCounterValues(counter.value);\n                        var counterType_1 = counterStyle && isIdentToken(counterStyle)\n                            ? listStyleType.parse(_this.context, counterStyle.value)\n                            : 3 /* DECIMAL */;\n                        var separator = delim && delim.type === 0 /* STRING_TOKEN */ ? delim.value : '';\n                        var text = counterStates\n                            .map(function (value) { return createCounterText(value, counterType_1, false); })\n                            .join(separator);\n                        anonymousReplacedElement.appendChild(document.createTextNode(text));\n                    }\n                }\n                else ;\n            }\n            else if (token.type === 20 /* IDENT_TOKEN */) {\n                switch (token.value) {\n                    case 'open-quote':\n                        anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes, _this.quoteDepth++, true)));\n                        break;\n                    case 'close-quote':\n                        anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes, --_this.quoteDepth, false)));\n                        break;\n                    default:\n                        // safari doesn't parse string tokens correctly because of lack of quotes\n                        anonymousReplacedElement.appendChild(document.createTextNode(token.value));\n                }\n            }\n        });\n        anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n        var newClassName = pseudoElt === PseudoElementType.BEFORE\n            ? \" \" + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE\n            : \" \" + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n        if (isSVGElementNode(clone)) {\n            clone.className.baseValue += newClassName;\n        }\n        else {\n            clone.className += newClassName;\n        }\n        return anonymousReplacedElement;\n    };\n    DocumentCloner.destroy = function (container) {\n        if (container.parentNode) {\n            container.parentNode.removeChild(container);\n            return true;\n        }\n        return false;\n    };\n    return DocumentCloner;\n}());\nvar PseudoElementType;\n(function (PseudoElementType) {\n    PseudoElementType[PseudoElementType[\"BEFORE\"] = 0] = \"BEFORE\";\n    PseudoElementType[PseudoElementType[\"AFTER\"] = 1] = \"AFTER\";\n})(PseudoElementType || (PseudoElementType = {}));\nvar createIFrameContainer = function (ownerDocument, bounds) {\n    var cloneIframeContainer = ownerDocument.createElement('iframe');\n    cloneIframeContainer.className = 'html2canvas-container';\n    cloneIframeContainer.style.visibility = 'hidden';\n    cloneIframeContainer.style.position = 'fixed';\n    cloneIframeContainer.style.left = '-10000px';\n    cloneIframeContainer.style.top = '0px';\n    cloneIframeContainer.style.border = '0';\n    cloneIframeContainer.width = bounds.width.toString();\n    cloneIframeContainer.height = bounds.height.toString();\n    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n    ownerDocument.body.appendChild(cloneIframeContainer);\n    return cloneIframeContainer;\n};\nvar imageReady = function (img) {\n    return new Promise(function (resolve) {\n        if (img.complete) {\n            resolve();\n            return;\n        }\n        if (!img.src) {\n            resolve();\n            return;\n        }\n        img.onload = resolve;\n        img.onerror = resolve;\n    });\n};\nvar imagesReady = function (document) {\n    return Promise.all([].slice.call(document.images, 0).map(imageReady));\n};\nvar iframeLoader = function (iframe) {\n    return new Promise(function (resolve, reject) {\n        var cloneWindow = iframe.contentWindow;\n        if (!cloneWindow) {\n            return reject(\"No window assigned for iframe\");\n        }\n        var documentClone = cloneWindow.document;\n        cloneWindow.onload = iframe.onload = function () {\n            cloneWindow.onload = iframe.onload = null;\n            var interval = setInterval(function () {\n                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n                    clearInterval(interval);\n                    resolve(iframe);\n                }\n            }, 50);\n        };\n    });\n};\nvar ignoredStyleProperties = [\n    'all',\n    'd',\n    'content' // Safari shows pseudoelements if content is set\n];\nvar copyCSSStyles = function (style, target) {\n    // Edge does not provide value for cssText\n    for (var i = style.length - 1; i >= 0; i--) {\n        var property = style.item(i);\n        if (ignoredStyleProperties.indexOf(property) === -1) {\n            target.style.setProperty(property, style.getPropertyValue(property));\n        }\n    }\n    return target;\n};\nvar serializeDoctype = function (doctype) {\n    var str = '';\n    if (doctype) {\n        str += '<!DOCTYPE ';\n        if (doctype.name) {\n            str += doctype.name;\n        }\n        if (doctype.internalSubset) {\n            str += doctype.internalSubset;\n        }\n        if (doctype.publicId) {\n            str += \"\\\"\" + doctype.publicId + \"\\\"\";\n        }\n        if (doctype.systemId) {\n            str += \"\\\"\" + doctype.systemId + \"\\\"\";\n        }\n        str += '>';\n    }\n    return str;\n};\nvar restoreOwnerScroll = function (ownerDocument, x, y) {\n    if (ownerDocument &&\n        ownerDocument.defaultView &&\n        (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n};\nvar restoreNodeScroll = function (_a) {\n    var element = _a[0], x = _a[1], y = _a[2];\n    element.scrollLeft = x;\n    element.scrollTop = y;\n};\nvar PSEUDO_BEFORE = ':before';\nvar PSEUDO_AFTER = ':after';\nvar PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nvar PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\nvar PSEUDO_HIDE_ELEMENT_STYLE = \"{\\n    content: \\\"\\\" !important;\\n    display: none !important;\\n}\";\nvar createPseudoHideStyles = function (body) {\n    createStyles(body, \".\" + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + \"\\n         .\" + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);\n};\nvar createStyles = function (body, styles) {\n    var document = body.ownerDocument;\n    if (document) {\n        var style = document.createElement('style');\n        style.textContent = styles;\n        body.appendChild(style);\n    }\n};\n\nvar CacheStorage = /** @class */ (function () {\n    function CacheStorage() {\n    }\n    CacheStorage.getOrigin = function (url) {\n        var link = CacheStorage._link;\n        if (!link) {\n            return 'about:blank';\n        }\n        link.href = url;\n        link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n        return link.protocol + link.hostname + link.port;\n    };\n    CacheStorage.isSameOrigin = function (src) {\n        return CacheStorage.getOrigin(src) === CacheStorage._origin;\n    };\n    CacheStorage.setContext = function (window) {\n        CacheStorage._link = window.document.createElement('a');\n        CacheStorage._origin = CacheStorage.getOrigin(window.location.href);\n    };\n    CacheStorage._origin = 'about:blank';\n    return CacheStorage;\n}());\nvar Cache = /** @class */ (function () {\n    function Cache(context, _options) {\n        this.context = context;\n        this._options = _options;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this._cache = {};\n    }\n    Cache.prototype.addImage = function (src) {\n        var result = Promise.resolve();\n        if (this.has(src)) {\n            return result;\n        }\n        if (isBlobImage(src) || isRenderable(src)) {\n            (this._cache[src] = this.loadImage(src)).catch(function () {\n                // prevent unhandled rejection\n            });\n            return result;\n        }\n        return result;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Cache.prototype.match = function (src) {\n        return this._cache[src];\n    };\n    Cache.prototype.loadImage = function (key) {\n        return __awaiter(this, void 0, void 0, function () {\n            var isSameOrigin, useCORS, useProxy, src;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        isSameOrigin = CacheStorage.isSameOrigin(key);\n                        useCORS = !isInlineImage(key) && this._options.useCORS === true && FEATURES.SUPPORT_CORS_IMAGES && !isSameOrigin;\n                        useProxy = !isInlineImage(key) &&\n                            !isSameOrigin &&\n                            !isBlobImage(key) &&\n                            typeof this._options.proxy === 'string' &&\n                            FEATURES.SUPPORT_CORS_XHR &&\n                            !useCORS;\n                        if (!isSameOrigin &&\n                            this._options.allowTaint === false &&\n                            !isInlineImage(key) &&\n                            !isBlobImage(key) &&\n                            !useProxy &&\n                            !useCORS) {\n                            return [2 /*return*/];\n                        }\n                        src = key;\n                        if (!useProxy) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.proxy(src)];\n                    case 1:\n                        src = _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        this.context.logger.debug(\"Added image \" + key.substring(0, 256));\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                var img = new Image();\n                                img.onload = function () { return resolve(img); };\n                                img.onerror = reject;\n                                //ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous\n                                if (isInlineBase64Image(src) || useCORS) {\n                                    img.crossOrigin = 'anonymous';\n                                }\n                                img.src = src;\n                                if (img.complete === true) {\n                                    // Inline XML images may fail to parse, throwing an Error later on\n                                    setTimeout(function () { return resolve(img); }, 500);\n                                }\n                                if (_this._options.imageTimeout > 0) {\n                                    setTimeout(function () { return reject(\"Timed out (\" + _this._options.imageTimeout + \"ms) loading image\"); }, _this._options.imageTimeout);\n                                }\n                            })];\n                    case 3: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Cache.prototype.has = function (key) {\n        return typeof this._cache[key] !== 'undefined';\n    };\n    Cache.prototype.keys = function () {\n        return Promise.resolve(Object.keys(this._cache));\n    };\n    Cache.prototype.proxy = function (src) {\n        var _this = this;\n        var proxy = this._options.proxy;\n        if (!proxy) {\n            throw new Error('No proxy defined');\n        }\n        var key = src.substring(0, 256);\n        return new Promise(function (resolve, reject) {\n            var responseType = FEATURES.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text';\n            var xhr = new XMLHttpRequest();\n            xhr.onload = function () {\n                if (xhr.status === 200) {\n                    if (responseType === 'text') {\n                        resolve(xhr.response);\n                    }\n                    else {\n                        var reader_1 = new FileReader();\n                        reader_1.addEventListener('load', function () { return resolve(reader_1.result); }, false);\n                        reader_1.addEventListener('error', function (e) { return reject(e); }, false);\n                        reader_1.readAsDataURL(xhr.response);\n                    }\n                }\n                else {\n                    reject(\"Failed to proxy resource \" + key + \" with status code \" + xhr.status);\n                }\n            };\n            xhr.onerror = reject;\n            var queryString = proxy.indexOf('?') > -1 ? '&' : '?';\n            xhr.open('GET', \"\" + proxy + queryString + \"url=\" + encodeURIComponent(src) + \"&responseType=\" + responseType);\n            if (responseType !== 'text' && xhr instanceof XMLHttpRequest) {\n                xhr.responseType = responseType;\n            }\n            if (_this._options.imageTimeout) {\n                var timeout_1 = _this._options.imageTimeout;\n                xhr.timeout = timeout_1;\n                xhr.ontimeout = function () { return reject(\"Timed out (\" + timeout_1 + \"ms) proxying \" + key); };\n            }\n            xhr.send();\n        });\n    };\n    return Cache;\n}());\nvar INLINE_SVG = /^data:image\\/svg\\+xml/i;\nvar INLINE_BASE64 = /^data:image\\/.*;base64,/i;\nvar INLINE_IMG = /^data:image\\/.*/i;\nvar isRenderable = function (src) { return FEATURES.SUPPORT_SVG_DRAWING || !isSVG(src); };\nvar isInlineImage = function (src) { return INLINE_IMG.test(src); };\nvar isInlineBase64Image = function (src) { return INLINE_BASE64.test(src); };\nvar isBlobImage = function (src) { return src.substr(0, 4) === 'blob'; };\nvar isSVG = function (src) { return src.substr(-3).toLowerCase() === 'svg' || INLINE_SVG.test(src); };\n\nvar Vector = /** @class */ (function () {\n    function Vector(x, y) {\n        this.type = 0 /* VECTOR */;\n        this.x = x;\n        this.y = y;\n    }\n    Vector.prototype.add = function (deltaX, deltaY) {\n        return new Vector(this.x + deltaX, this.y + deltaY);\n    };\n    return Vector;\n}());\n\nvar lerp = function (a, b, t) {\n    return new Vector(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);\n};\nvar BezierCurve = /** @class */ (function () {\n    function BezierCurve(start, startControl, endControl, end) {\n        this.type = 1 /* BEZIER_CURVE */;\n        this.start = start;\n        this.startControl = startControl;\n        this.endControl = endControl;\n        this.end = end;\n    }\n    BezierCurve.prototype.subdivide = function (t, firstHalf) {\n        var ab = lerp(this.start, this.startControl, t);\n        var bc = lerp(this.startControl, this.endControl, t);\n        var cd = lerp(this.endControl, this.end, t);\n        var abbc = lerp(ab, bc, t);\n        var bccd = lerp(bc, cd, t);\n        var dest = lerp(abbc, bccd, t);\n        return firstHalf ? new BezierCurve(this.start, ab, abbc, dest) : new BezierCurve(dest, bccd, cd, this.end);\n    };\n    BezierCurve.prototype.add = function (deltaX, deltaY) {\n        return new BezierCurve(this.start.add(deltaX, deltaY), this.startControl.add(deltaX, deltaY), this.endControl.add(deltaX, deltaY), this.end.add(deltaX, deltaY));\n    };\n    BezierCurve.prototype.reverse = function () {\n        return new BezierCurve(this.end, this.endControl, this.startControl, this.start);\n    };\n    return BezierCurve;\n}());\nvar isBezierCurve = function (path) { return path.type === 1 /* BEZIER_CURVE */; };\n\nvar BoundCurves = /** @class */ (function () {\n    function BoundCurves(element) {\n        var styles = element.styles;\n        var bounds = element.bounds;\n        var _a = getAbsoluteValueForTuple(styles.borderTopLeftRadius, bounds.width, bounds.height), tlh = _a[0], tlv = _a[1];\n        var _b = getAbsoluteValueForTuple(styles.borderTopRightRadius, bounds.width, bounds.height), trh = _b[0], trv = _b[1];\n        var _c = getAbsoluteValueForTuple(styles.borderBottomRightRadius, bounds.width, bounds.height), brh = _c[0], brv = _c[1];\n        var _d = getAbsoluteValueForTuple(styles.borderBottomLeftRadius, bounds.width, bounds.height), blh = _d[0], blv = _d[1];\n        var factors = [];\n        factors.push((tlh + trh) / bounds.width);\n        factors.push((blh + brh) / bounds.width);\n        factors.push((tlv + blv) / bounds.height);\n        factors.push((trv + brv) / bounds.height);\n        var maxFactor = Math.max.apply(Math, factors);\n        if (maxFactor > 1) {\n            tlh /= maxFactor;\n            tlv /= maxFactor;\n            trh /= maxFactor;\n            trv /= maxFactor;\n            brh /= maxFactor;\n            brv /= maxFactor;\n            blh /= maxFactor;\n            blv /= maxFactor;\n        }\n        var topWidth = bounds.width - trh;\n        var rightHeight = bounds.height - brv;\n        var bottomWidth = bounds.width - brh;\n        var leftHeight = bounds.height - blv;\n        var borderTopWidth = styles.borderTopWidth;\n        var borderRightWidth = styles.borderRightWidth;\n        var borderBottomWidth = styles.borderBottomWidth;\n        var borderLeftWidth = styles.borderLeftWidth;\n        var paddingTop = getAbsoluteValue(styles.paddingTop, element.bounds.width);\n        var paddingRight = getAbsoluteValue(styles.paddingRight, element.bounds.width);\n        var paddingBottom = getAbsoluteValue(styles.paddingBottom, element.bounds.width);\n        var paddingLeft = getAbsoluteValue(styles.paddingLeft, element.bounds.width);\n        this.topLeftBorderDoubleOuterBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth / 3, bounds.top + borderTopWidth / 3, tlh - borderLeftWidth / 3, tlv - borderTopWidth / 3, CORNER.TOP_LEFT)\n                : new Vector(bounds.left + borderLeftWidth / 3, bounds.top + borderTopWidth / 3);\n        this.topRightBorderDoubleOuterBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + topWidth, bounds.top + borderTopWidth / 3, trh - borderRightWidth / 3, trv - borderTopWidth / 3, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 3, bounds.top + borderTopWidth / 3);\n        this.bottomRightBorderDoubleOuterBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh - borderRightWidth / 3, brv - borderBottomWidth / 3, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 3, bounds.top + bounds.height - borderBottomWidth / 3);\n        this.bottomLeftBorderDoubleOuterBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth / 3, bounds.top + leftHeight, blh - borderLeftWidth / 3, blv - borderBottomWidth / 3, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left + borderLeftWidth / 3, bounds.top + bounds.height - borderBottomWidth / 3);\n        this.topLeftBorderDoubleInnerBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + (borderLeftWidth * 2) / 3, bounds.top + (borderTopWidth * 2) / 3, tlh - (borderLeftWidth * 2) / 3, tlv - (borderTopWidth * 2) / 3, CORNER.TOP_LEFT)\n                : new Vector(bounds.left + (borderLeftWidth * 2) / 3, bounds.top + (borderTopWidth * 2) / 3);\n        this.topRightBorderDoubleInnerBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + topWidth, bounds.top + (borderTopWidth * 2) / 3, trh - (borderRightWidth * 2) / 3, trv - (borderTopWidth * 2) / 3, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width - (borderRightWidth * 2) / 3, bounds.top + (borderTopWidth * 2) / 3);\n        this.bottomRightBorderDoubleInnerBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh - (borderRightWidth * 2) / 3, brv - (borderBottomWidth * 2) / 3, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width - (borderRightWidth * 2) / 3, bounds.top + bounds.height - (borderBottomWidth * 2) / 3);\n        this.bottomLeftBorderDoubleInnerBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left + (borderLeftWidth * 2) / 3, bounds.top + leftHeight, blh - (borderLeftWidth * 2) / 3, blv - (borderBottomWidth * 2) / 3, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left + (borderLeftWidth * 2) / 3, bounds.top + bounds.height - (borderBottomWidth * 2) / 3);\n        this.topLeftBorderStroke =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth / 2, bounds.top + borderTopWidth / 2, tlh - borderLeftWidth / 2, tlv - borderTopWidth / 2, CORNER.TOP_LEFT)\n                : new Vector(bounds.left + borderLeftWidth / 2, bounds.top + borderTopWidth / 2);\n        this.topRightBorderStroke =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + topWidth, bounds.top + borderTopWidth / 2, trh - borderRightWidth / 2, trv - borderTopWidth / 2, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 2, bounds.top + borderTopWidth / 2);\n        this.bottomRightBorderStroke =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh - borderRightWidth / 2, brv - borderBottomWidth / 2, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth / 2, bounds.top + bounds.height - borderBottomWidth / 2);\n        this.bottomLeftBorderStroke =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth / 2, bounds.top + leftHeight, blh - borderLeftWidth / 2, blv - borderBottomWidth / 2, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left + borderLeftWidth / 2, bounds.top + bounds.height - borderBottomWidth / 2);\n        this.topLeftBorderBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT)\n                : new Vector(bounds.left, bounds.top);\n        this.topRightBorderBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top);\n        this.bottomRightBorderBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width, bounds.top + bounds.height);\n        this.bottomLeftBorderBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left, bounds.top + bounds.height);\n        this.topLeftPaddingBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth, bounds.top + borderTopWidth, Math.max(0, tlh - borderLeftWidth), Math.max(0, tlv - borderTopWidth), CORNER.TOP_LEFT)\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + borderTopWidth);\n        this.topRightPaddingBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width - borderRightWidth), bounds.top + borderTopWidth, topWidth > bounds.width + borderRightWidth ? 0 : Math.max(0, trh - borderRightWidth), Math.max(0, trv - borderTopWidth), CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + borderTopWidth);\n        this.bottomRightPaddingBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - borderLeftWidth), bounds.top + Math.min(rightHeight, bounds.height - borderBottomWidth), Math.max(0, brh - borderRightWidth), Math.max(0, brv - borderBottomWidth), CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + bounds.height - borderBottomWidth);\n        this.bottomLeftPaddingBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth, bounds.top + Math.min(leftHeight, bounds.height - borderBottomWidth), Math.max(0, blh - borderLeftWidth), Math.max(0, blv - borderBottomWidth), CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left + borderLeftWidth, bounds.top + bounds.height - borderBottomWidth);\n        this.topLeftContentBox =\n            tlh > 0 || tlv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop, Math.max(0, tlh - (borderLeftWidth + paddingLeft)), Math.max(0, tlv - (borderTopWidth + paddingTop)), CORNER.TOP_LEFT)\n                : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop);\n        this.topRightContentBox =\n            trh > 0 || trv > 0\n                ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth + paddingLeft), bounds.top + borderTopWidth + paddingTop, topWidth > bounds.width + borderLeftWidth + paddingLeft ? 0 : trh - borderLeftWidth + paddingLeft, trv - (borderTopWidth + paddingTop), CORNER.TOP_RIGHT)\n                : new Vector(bounds.left + bounds.width - (borderRightWidth + paddingRight), bounds.top + borderTopWidth + paddingTop);\n        this.bottomRightContentBox =\n            brh > 0 || brv > 0\n                ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - (borderLeftWidth + paddingLeft)), bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth + paddingTop), Math.max(0, brh - (borderRightWidth + paddingRight)), brv - (borderBottomWidth + paddingBottom), CORNER.BOTTOM_RIGHT)\n                : new Vector(bounds.left + bounds.width - (borderRightWidth + paddingRight), bounds.top + bounds.height - (borderBottomWidth + paddingBottom));\n        this.bottomLeftContentBox =\n            blh > 0 || blv > 0\n                ? getCurvePoints(bounds.left + borderLeftWidth + paddingLeft, bounds.top + leftHeight, Math.max(0, blh - (borderLeftWidth + paddingLeft)), blv - (borderBottomWidth + paddingBottom), CORNER.BOTTOM_LEFT)\n                : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + bounds.height - (borderBottomWidth + paddingBottom));\n    }\n    return BoundCurves;\n}());\nvar CORNER;\n(function (CORNER) {\n    CORNER[CORNER[\"TOP_LEFT\"] = 0] = \"TOP_LEFT\";\n    CORNER[CORNER[\"TOP_RIGHT\"] = 1] = \"TOP_RIGHT\";\n    CORNER[CORNER[\"BOTTOM_RIGHT\"] = 2] = \"BOTTOM_RIGHT\";\n    CORNER[CORNER[\"BOTTOM_LEFT\"] = 3] = \"BOTTOM_LEFT\";\n})(CORNER || (CORNER = {}));\nvar getCurvePoints = function (x, y, r1, r2, position) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = r1 * kappa; // control point offset horizontal\n    var oy = r2 * kappa; // control point offset vertical\n    var xm = x + r1; // x-middle\n    var ym = y + r2; // y-middle\n    switch (position) {\n        case CORNER.TOP_LEFT:\n            return new BezierCurve(new Vector(x, ym), new Vector(x, ym - oy), new Vector(xm - ox, y), new Vector(xm, y));\n        case CORNER.TOP_RIGHT:\n            return new BezierCurve(new Vector(x, y), new Vector(x + ox, y), new Vector(xm, ym - oy), new Vector(xm, ym));\n        case CORNER.BOTTOM_RIGHT:\n            return new BezierCurve(new Vector(xm, y), new Vector(xm, y + oy), new Vector(x + ox, ym), new Vector(x, ym));\n        case CORNER.BOTTOM_LEFT:\n        default:\n            return new BezierCurve(new Vector(xm, ym), new Vector(xm - ox, ym), new Vector(x, y + oy), new Vector(x, y));\n    }\n};\nvar calculateBorderBoxPath = function (curves) {\n    return [curves.topLeftBorderBox, curves.topRightBorderBox, curves.bottomRightBorderBox, curves.bottomLeftBorderBox];\n};\nvar calculateContentBoxPath = function (curves) {\n    return [\n        curves.topLeftContentBox,\n        curves.topRightContentBox,\n        curves.bottomRightContentBox,\n        curves.bottomLeftContentBox\n    ];\n};\nvar calculatePaddingBoxPath = function (curves) {\n    return [\n        curves.topLeftPaddingBox,\n        curves.topRightPaddingBox,\n        curves.bottomRightPaddingBox,\n        curves.bottomLeftPaddingBox\n    ];\n};\n\nvar TransformEffect = /** @class */ (function () {\n    function TransformEffect(offsetX, offsetY, matrix) {\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        this.matrix = matrix;\n        this.type = 0 /* TRANSFORM */;\n        this.target = 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */;\n    }\n    return TransformEffect;\n}());\nvar ClipEffect = /** @class */ (function () {\n    function ClipEffect(path, target) {\n        this.path = path;\n        this.target = target;\n        this.type = 1 /* CLIP */;\n    }\n    return ClipEffect;\n}());\nvar OpacityEffect = /** @class */ (function () {\n    function OpacityEffect(opacity) {\n        this.opacity = opacity;\n        this.type = 2 /* OPACITY */;\n        this.target = 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */;\n    }\n    return OpacityEffect;\n}());\nvar isTransformEffect = function (effect) {\n    return effect.type === 0 /* TRANSFORM */;\n};\nvar isClipEffect = function (effect) { return effect.type === 1 /* CLIP */; };\nvar isOpacityEffect = function (effect) { return effect.type === 2 /* OPACITY */; };\n\nvar equalPath = function (a, b) {\n    if (a.length === b.length) {\n        return a.some(function (v, i) { return v === b[i]; });\n    }\n    return false;\n};\nvar transformPath = function (path, deltaX, deltaY, deltaW, deltaH) {\n    return path.map(function (point, index) {\n        switch (index) {\n            case 0:\n                return point.add(deltaX, deltaY);\n            case 1:\n                return point.add(deltaX + deltaW, deltaY);\n            case 2:\n                return point.add(deltaX + deltaW, deltaY + deltaH);\n            case 3:\n                return point.add(deltaX, deltaY + deltaH);\n        }\n        return point;\n    });\n};\n\nvar StackingContext = /** @class */ (function () {\n    function StackingContext(container) {\n        this.element = container;\n        this.inlineLevel = [];\n        this.nonInlineLevel = [];\n        this.negativeZIndex = [];\n        this.zeroOrAutoZIndexOrTransformedOrOpacity = [];\n        this.positiveZIndex = [];\n        this.nonPositionedFloats = [];\n        this.nonPositionedInlineLevel = [];\n    }\n    return StackingContext;\n}());\nvar ElementPaint = /** @class */ (function () {\n    function ElementPaint(container, parent) {\n        this.container = container;\n        this.parent = parent;\n        this.effects = [];\n        this.curves = new BoundCurves(this.container);\n        if (this.container.styles.opacity < 1) {\n            this.effects.push(new OpacityEffect(this.container.styles.opacity));\n        }\n        if (this.container.styles.transform !== null) {\n            var offsetX = this.container.bounds.left + this.container.styles.transformOrigin[0].number;\n            var offsetY = this.container.bounds.top + this.container.styles.transformOrigin[1].number;\n            var matrix = this.container.styles.transform;\n            this.effects.push(new TransformEffect(offsetX, offsetY, matrix));\n        }\n        if (this.container.styles.overflowX !== 0 /* VISIBLE */) {\n            var borderBox = calculateBorderBoxPath(this.curves);\n            var paddingBox = calculatePaddingBoxPath(this.curves);\n            if (equalPath(borderBox, paddingBox)) {\n                this.effects.push(new ClipEffect(borderBox, 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */));\n            }\n            else {\n                this.effects.push(new ClipEffect(borderBox, 2 /* BACKGROUND_BORDERS */));\n                this.effects.push(new ClipEffect(paddingBox, 4 /* CONTENT */));\n            }\n        }\n    }\n    ElementPaint.prototype.getEffects = function (target) {\n        var inFlow = [2 /* ABSOLUTE */, 3 /* FIXED */].indexOf(this.container.styles.position) === -1;\n        var parent = this.parent;\n        var effects = this.effects.slice(0);\n        while (parent) {\n            var croplessEffects = parent.effects.filter(function (effect) { return !isClipEffect(effect); });\n            if (inFlow || parent.container.styles.position !== 0 /* STATIC */ || !parent.parent) {\n                effects.unshift.apply(effects, croplessEffects);\n                inFlow = [2 /* ABSOLUTE */, 3 /* FIXED */].indexOf(parent.container.styles.position) === -1;\n                if (parent.container.styles.overflowX !== 0 /* VISIBLE */) {\n                    var borderBox = calculateBorderBoxPath(parent.curves);\n                    var paddingBox = calculatePaddingBoxPath(parent.curves);\n                    if (!equalPath(borderBox, paddingBox)) {\n                        effects.unshift(new ClipEffect(paddingBox, 2 /* BACKGROUND_BORDERS */ | 4 /* CONTENT */));\n                    }\n                }\n            }\n            else {\n                effects.unshift.apply(effects, croplessEffects);\n            }\n            parent = parent.parent;\n        }\n        return effects.filter(function (effect) { return contains(effect.target, target); });\n    };\n    return ElementPaint;\n}());\nvar parseStackTree = function (parent, stackingContext, realStackingContext, listItems) {\n    parent.container.elements.forEach(function (child) {\n        var treatAsRealStackingContext = contains(child.flags, 4 /* CREATES_REAL_STACKING_CONTEXT */);\n        var createsStackingContext = contains(child.flags, 2 /* CREATES_STACKING_CONTEXT */);\n        var paintContainer = new ElementPaint(child, parent);\n        if (contains(child.styles.display, 2048 /* LIST_ITEM */)) {\n            listItems.push(paintContainer);\n        }\n        var listOwnerItems = contains(child.flags, 8 /* IS_LIST_OWNER */) ? [] : listItems;\n        if (treatAsRealStackingContext || createsStackingContext) {\n            var parentStack = treatAsRealStackingContext || child.styles.isPositioned() ? realStackingContext : stackingContext;\n            var stack = new StackingContext(paintContainer);\n            if (child.styles.isPositioned() || child.styles.opacity < 1 || child.styles.isTransformed()) {\n                var order_1 = child.styles.zIndex.order;\n                if (order_1 < 0) {\n                    var index_1 = 0;\n                    parentStack.negativeZIndex.some(function (current, i) {\n                        if (order_1 > current.element.container.styles.zIndex.order) {\n                            index_1 = i;\n                            return false;\n                        }\n                        else if (index_1 > 0) {\n                            return true;\n                        }\n                        return false;\n                    });\n                    parentStack.negativeZIndex.splice(index_1, 0, stack);\n                }\n                else if (order_1 > 0) {\n                    var index_2 = 0;\n                    parentStack.positiveZIndex.some(function (current, i) {\n                        if (order_1 >= current.element.container.styles.zIndex.order) {\n                            index_2 = i + 1;\n                            return false;\n                        }\n                        else if (index_2 > 0) {\n                            return true;\n                        }\n                        return false;\n                    });\n                    parentStack.positiveZIndex.splice(index_2, 0, stack);\n                }\n                else {\n                    parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);\n                }\n            }\n            else {\n                if (child.styles.isFloating()) {\n                    parentStack.nonPositionedFloats.push(stack);\n                }\n                else {\n                    parentStack.nonPositionedInlineLevel.push(stack);\n                }\n            }\n            parseStackTree(paintContainer, stack, treatAsRealStackingContext ? stack : realStackingContext, listOwnerItems);\n        }\n        else {\n            if (child.styles.isInlineLevel()) {\n                stackingContext.inlineLevel.push(paintContainer);\n            }\n            else {\n                stackingContext.nonInlineLevel.push(paintContainer);\n            }\n            parseStackTree(paintContainer, stackingContext, realStackingContext, listOwnerItems);\n        }\n        if (contains(child.flags, 8 /* IS_LIST_OWNER */)) {\n            processListItems(child, listOwnerItems);\n        }\n    });\n};\nvar processListItems = function (owner, elements) {\n    var numbering = owner instanceof OLElementContainer ? owner.start : 1;\n    var reversed = owner instanceof OLElementContainer ? owner.reversed : false;\n    for (var i = 0; i < elements.length; i++) {\n        var item = elements[i];\n        if (item.container instanceof LIElementContainer &&\n            typeof item.container.value === 'number' &&\n            item.container.value !== 0) {\n            numbering = item.container.value;\n        }\n        item.listValue = createCounterText(numbering, item.container.styles.listStyleType, true);\n        numbering += reversed ? -1 : 1;\n    }\n};\nvar parseStackingContexts = function (container) {\n    var paintContainer = new ElementPaint(container, null);\n    var root = new StackingContext(paintContainer);\n    var listItems = [];\n    parseStackTree(paintContainer, root, root, listItems);\n    processListItems(paintContainer.container, listItems);\n    return root;\n};\n\nvar parsePathForBorder = function (curves, borderSide) {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(curves.topLeftBorderBox, curves.topLeftPaddingBox, curves.topRightBorderBox, curves.topRightPaddingBox);\n        case 1:\n            return createPathFromCurves(curves.topRightBorderBox, curves.topRightPaddingBox, curves.bottomRightBorderBox, curves.bottomRightPaddingBox);\n        case 2:\n            return createPathFromCurves(curves.bottomRightBorderBox, curves.bottomRightPaddingBox, curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox);\n        case 3:\n        default:\n            return createPathFromCurves(curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox, curves.topLeftBorderBox, curves.topLeftPaddingBox);\n    }\n};\nvar parsePathForBorderDoubleOuter = function (curves, borderSide) {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(curves.topLeftBorderBox, curves.topLeftBorderDoubleOuterBox, curves.topRightBorderBox, curves.topRightBorderDoubleOuterBox);\n        case 1:\n            return createPathFromCurves(curves.topRightBorderBox, curves.topRightBorderDoubleOuterBox, curves.bottomRightBorderBox, curves.bottomRightBorderDoubleOuterBox);\n        case 2:\n            return createPathFromCurves(curves.bottomRightBorderBox, curves.bottomRightBorderDoubleOuterBox, curves.bottomLeftBorderBox, curves.bottomLeftBorderDoubleOuterBox);\n        case 3:\n        default:\n            return createPathFromCurves(curves.bottomLeftBorderBox, curves.bottomLeftBorderDoubleOuterBox, curves.topLeftBorderBox, curves.topLeftBorderDoubleOuterBox);\n    }\n};\nvar parsePathForBorderDoubleInner = function (curves, borderSide) {\n    switch (borderSide) {\n        case 0:\n            return createPathFromCurves(curves.topLeftBorderDoubleInnerBox, curves.topLeftPaddingBox, curves.topRightBorderDoubleInnerBox, curves.topRightPaddingBox);\n        case 1:\n            return createPathFromCurves(curves.topRightBorderDoubleInnerBox, curves.topRightPaddingBox, curves.bottomRightBorderDoubleInnerBox, curves.bottomRightPaddingBox);\n        case 2:\n            return createPathFromCurves(curves.bottomRightBorderDoubleInnerBox, curves.bottomRightPaddingBox, curves.bottomLeftBorderDoubleInnerBox, curves.bottomLeftPaddingBox);\n        case 3:\n        default:\n            return createPathFromCurves(curves.bottomLeftBorderDoubleInnerBox, curves.bottomLeftPaddingBox, curves.topLeftBorderDoubleInnerBox, curves.topLeftPaddingBox);\n    }\n};\nvar parsePathForBorderStroke = function (curves, borderSide) {\n    switch (borderSide) {\n        case 0:\n            return createStrokePathFromCurves(curves.topLeftBorderStroke, curves.topRightBorderStroke);\n        case 1:\n            return createStrokePathFromCurves(curves.topRightBorderStroke, curves.bottomRightBorderStroke);\n        case 2:\n            return createStrokePathFromCurves(curves.bottomRightBorderStroke, curves.bottomLeftBorderStroke);\n        case 3:\n        default:\n            return createStrokePathFromCurves(curves.bottomLeftBorderStroke, curves.topLeftBorderStroke);\n    }\n};\nvar createStrokePathFromCurves = function (outer1, outer2) {\n    var path = [];\n    if (isBezierCurve(outer1)) {\n        path.push(outer1.subdivide(0.5, false));\n    }\n    else {\n        path.push(outer1);\n    }\n    if (isBezierCurve(outer2)) {\n        path.push(outer2.subdivide(0.5, true));\n    }\n    else {\n        path.push(outer2);\n    }\n    return path;\n};\nvar createPathFromCurves = function (outer1, inner1, outer2, inner2) {\n    var path = [];\n    if (isBezierCurve(outer1)) {\n        path.push(outer1.subdivide(0.5, false));\n    }\n    else {\n        path.push(outer1);\n    }\n    if (isBezierCurve(outer2)) {\n        path.push(outer2.subdivide(0.5, true));\n    }\n    else {\n        path.push(outer2);\n    }\n    if (isBezierCurve(inner2)) {\n        path.push(inner2.subdivide(0.5, true).reverse());\n    }\n    else {\n        path.push(inner2);\n    }\n    if (isBezierCurve(inner1)) {\n        path.push(inner1.subdivide(0.5, false).reverse());\n    }\n    else {\n        path.push(inner1);\n    }\n    return path;\n};\n\nvar paddingBox = function (element) {\n    var bounds = element.bounds;\n    var styles = element.styles;\n    return bounds.add(styles.borderLeftWidth, styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth), -(styles.borderTopWidth + styles.borderBottomWidth));\n};\nvar contentBox = function (element) {\n    var styles = element.styles;\n    var bounds = element.bounds;\n    var paddingLeft = getAbsoluteValue(styles.paddingLeft, bounds.width);\n    var paddingRight = getAbsoluteValue(styles.paddingRight, bounds.width);\n    var paddingTop = getAbsoluteValue(styles.paddingTop, bounds.width);\n    var paddingBottom = getAbsoluteValue(styles.paddingBottom, bounds.width);\n    return bounds.add(paddingLeft + styles.borderLeftWidth, paddingTop + styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth + paddingLeft + paddingRight), -(styles.borderTopWidth + styles.borderBottomWidth + paddingTop + paddingBottom));\n};\n\nvar calculateBackgroundPositioningArea = function (backgroundOrigin, element) {\n    if (backgroundOrigin === 0 /* BORDER_BOX */) {\n        return element.bounds;\n    }\n    if (backgroundOrigin === 2 /* CONTENT_BOX */) {\n        return contentBox(element);\n    }\n    return paddingBox(element);\n};\nvar calculateBackgroundPaintingArea = function (backgroundClip, element) {\n    if (backgroundClip === 0 /* BORDER_BOX */) {\n        return element.bounds;\n    }\n    if (backgroundClip === 2 /* CONTENT_BOX */) {\n        return contentBox(element);\n    }\n    return paddingBox(element);\n};\nvar calculateBackgroundRendering = function (container, index, intrinsicSize) {\n    var backgroundPositioningArea = calculateBackgroundPositioningArea(getBackgroundValueForIndex(container.styles.backgroundOrigin, index), container);\n    var backgroundPaintingArea = calculateBackgroundPaintingArea(getBackgroundValueForIndex(container.styles.backgroundClip, index), container);\n    var backgroundImageSize = calculateBackgroundSize(getBackgroundValueForIndex(container.styles.backgroundSize, index), intrinsicSize, backgroundPositioningArea);\n    var sizeWidth = backgroundImageSize[0], sizeHeight = backgroundImageSize[1];\n    var position = getAbsoluteValueForTuple(getBackgroundValueForIndex(container.styles.backgroundPosition, index), backgroundPositioningArea.width - sizeWidth, backgroundPositioningArea.height - sizeHeight);\n    var path = calculateBackgroundRepeatPath(getBackgroundValueForIndex(container.styles.backgroundRepeat, index), position, backgroundImageSize, backgroundPositioningArea, backgroundPaintingArea);\n    var offsetX = Math.round(backgroundPositioningArea.left + position[0]);\n    var offsetY = Math.round(backgroundPositioningArea.top + position[1]);\n    return [path, offsetX, offsetY, sizeWidth, sizeHeight];\n};\nvar isAuto = function (token) { return isIdentToken(token) && token.value === BACKGROUND_SIZE.AUTO; };\nvar hasIntrinsicValue = function (value) { return typeof value === 'number'; };\nvar calculateBackgroundSize = function (size, _a, bounds) {\n    var intrinsicWidth = _a[0], intrinsicHeight = _a[1], intrinsicProportion = _a[2];\n    var first = size[0], second = size[1];\n    if (!first) {\n        return [0, 0];\n    }\n    if (isLengthPercentage(first) && second && isLengthPercentage(second)) {\n        return [getAbsoluteValue(first, bounds.width), getAbsoluteValue(second, bounds.height)];\n    }\n    var hasIntrinsicProportion = hasIntrinsicValue(intrinsicProportion);\n    if (isIdentToken(first) && (first.value === BACKGROUND_SIZE.CONTAIN || first.value === BACKGROUND_SIZE.COVER)) {\n        if (hasIntrinsicValue(intrinsicProportion)) {\n            var targetRatio = bounds.width / bounds.height;\n            return targetRatio < intrinsicProportion !== (first.value === BACKGROUND_SIZE.COVER)\n                ? [bounds.width, bounds.width / intrinsicProportion]\n                : [bounds.height * intrinsicProportion, bounds.height];\n        }\n        return [bounds.width, bounds.height];\n    }\n    var hasIntrinsicWidth = hasIntrinsicValue(intrinsicWidth);\n    var hasIntrinsicHeight = hasIntrinsicValue(intrinsicHeight);\n    var hasIntrinsicDimensions = hasIntrinsicWidth || hasIntrinsicHeight;\n    // If the background-size is auto or auto auto:\n    if (isAuto(first) && (!second || isAuto(second))) {\n        // If the image has both horizontal and vertical intrinsic dimensions, it's rendered at that size.\n        if (hasIntrinsicWidth && hasIntrinsicHeight) {\n            return [intrinsicWidth, intrinsicHeight];\n        }\n        // If the image has no intrinsic dimensions and has no intrinsic proportions,\n        // it's rendered at the size of the background positioning area.\n        if (!hasIntrinsicProportion && !hasIntrinsicDimensions) {\n            return [bounds.width, bounds.height];\n        }\n        // TODO If the image has no intrinsic dimensions but has intrinsic proportions, it's rendered as if contain had been specified instead.\n        // If the image has only one intrinsic dimension and has intrinsic proportions, it's rendered at the size corresponding to that one dimension.\n        // The other dimension is computed using the specified dimension and the intrinsic proportions.\n        if (hasIntrinsicDimensions && hasIntrinsicProportion) {\n            var width_1 = hasIntrinsicWidth\n                ? intrinsicWidth\n                : intrinsicHeight * intrinsicProportion;\n            var height_1 = hasIntrinsicHeight\n                ? intrinsicHeight\n                : intrinsicWidth / intrinsicProportion;\n            return [width_1, height_1];\n        }\n        // If the image has only one intrinsic dimension but has no intrinsic proportions,\n        // it's rendered using the specified dimension and the other dimension of the background positioning area.\n        var width_2 = hasIntrinsicWidth ? intrinsicWidth : bounds.width;\n        var height_2 = hasIntrinsicHeight ? intrinsicHeight : bounds.height;\n        return [width_2, height_2];\n    }\n    // If the image has intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the specified dimension and the intrinsic proportions.\n    if (hasIntrinsicProportion) {\n        var width_3 = 0;\n        var height_3 = 0;\n        if (isLengthPercentage(first)) {\n            width_3 = getAbsoluteValue(first, bounds.width);\n        }\n        else if (isLengthPercentage(second)) {\n            height_3 = getAbsoluteValue(second, bounds.height);\n        }\n        if (isAuto(first)) {\n            width_3 = height_3 * intrinsicProportion;\n        }\n        else if (!second || isAuto(second)) {\n            height_3 = width_3 / intrinsicProportion;\n        }\n        return [width_3, height_3];\n    }\n    // If the image has no intrinsic proportions, it's stretched to the specified dimension.\n    // The unspecified dimension is computed using the image's corresponding intrinsic dimension,\n    // if there is one. If there is no such intrinsic dimension,\n    // it becomes the corresponding dimension of the background positioning area.\n    var width = null;\n    var height = null;\n    if (isLengthPercentage(first)) {\n        width = getAbsoluteValue(first, bounds.width);\n    }\n    else if (second && isLengthPercentage(second)) {\n        height = getAbsoluteValue(second, bounds.height);\n    }\n    if (width !== null && (!second || isAuto(second))) {\n        height =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (width / intrinsicWidth) * intrinsicHeight\n                : bounds.height;\n    }\n    if (height !== null && isAuto(first)) {\n        width =\n            hasIntrinsicWidth && hasIntrinsicHeight\n                ? (height / intrinsicHeight) * intrinsicWidth\n                : bounds.width;\n    }\n    if (width !== null && height !== null) {\n        return [width, height];\n    }\n    throw new Error(\"Unable to calculate background-size for element\");\n};\nvar getBackgroundValueForIndex = function (values, index) {\n    var value = values[index];\n    if (typeof value === 'undefined') {\n        return values[0];\n    }\n    return value;\n};\nvar calculateBackgroundRepeatPath = function (repeat, _a, _b, backgroundPositioningArea, backgroundPaintingArea) {\n    var x = _a[0], y = _a[1];\n    var width = _b[0], height = _b[1];\n    switch (repeat) {\n        case 2 /* REPEAT_X */:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(height + backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left), Math.round(height + backgroundPositioningArea.top + y))\n            ];\n        case 3 /* REPEAT_Y */:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)),\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top))\n            ];\n        case 1 /* NO_REPEAT */:\n            return [\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top + y)),\n                new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top + y + height)),\n                new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top + y + height))\n            ];\n        default:\n            return [\n                new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.top)),\n                new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.top)),\n                new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)),\n                new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top))\n            ];\n    }\n};\n\nvar SMALL_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\nvar SAMPLE_TEXT = 'Hidden Text';\nvar FontMetrics = /** @class */ (function () {\n    function FontMetrics(document) {\n        this._data = {};\n        this._document = document;\n    }\n    FontMetrics.prototype.parseMetrics = function (fontFamily, fontSize) {\n        var container = this._document.createElement('div');\n        var img = this._document.createElement('img');\n        var span = this._document.createElement('span');\n        var body = this._document.body;\n        container.style.visibility = 'hidden';\n        container.style.fontFamily = fontFamily;\n        container.style.fontSize = fontSize;\n        container.style.margin = '0';\n        container.style.padding = '0';\n        container.style.whiteSpace = 'nowrap';\n        body.appendChild(container);\n        img.src = SMALL_IMAGE;\n        img.width = 1;\n        img.height = 1;\n        img.style.margin = '0';\n        img.style.padding = '0';\n        img.style.verticalAlign = 'baseline';\n        span.style.fontFamily = fontFamily;\n        span.style.fontSize = fontSize;\n        span.style.margin = '0';\n        span.style.padding = '0';\n        span.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n        container.appendChild(span);\n        container.appendChild(img);\n        var baseline = img.offsetTop - span.offsetTop + 2;\n        container.removeChild(span);\n        container.appendChild(this._document.createTextNode(SAMPLE_TEXT));\n        container.style.lineHeight = 'normal';\n        img.style.verticalAlign = 'super';\n        var middle = img.offsetTop - container.offsetTop + 2;\n        body.removeChild(container);\n        return { baseline: baseline, middle: middle };\n    };\n    FontMetrics.prototype.getMetrics = function (fontFamily, fontSize) {\n        var key = fontFamily + \" \" + fontSize;\n        if (typeof this._data[key] === 'undefined') {\n            this._data[key] = this.parseMetrics(fontFamily, fontSize);\n        }\n        return this._data[key];\n    };\n    return FontMetrics;\n}());\n\nvar Renderer = /** @class */ (function () {\n    function Renderer(context, options) {\n        this.context = context;\n        this.options = options;\n    }\n    return Renderer;\n}());\n\nvar MASK_OFFSET = 10000;\nvar CanvasRenderer = /** @class */ (function (_super) {\n    __extends(CanvasRenderer, _super);\n    function CanvasRenderer(context, options) {\n        var _this = _super.call(this, context, options) || this;\n        _this._activeEffects = [];\n        _this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        _this.ctx = _this.canvas.getContext('2d');\n        if (!options.canvas) {\n            _this.canvas.width = Math.floor(options.width * options.scale);\n            _this.canvas.height = Math.floor(options.height * options.scale);\n            _this.canvas.style.width = options.width + \"px\";\n            _this.canvas.style.height = options.height + \"px\";\n        }\n        _this.fontMetrics = new FontMetrics(document);\n        _this.ctx.scale(_this.options.scale, _this.options.scale);\n        _this.ctx.translate(-options.x, -options.y);\n        _this.ctx.textBaseline = 'bottom';\n        _this._activeEffects = [];\n        _this.context.logger.debug(\"Canvas renderer initialized (\" + options.width + \"x\" + options.height + \") with scale \" + options.scale);\n        return _this;\n    }\n    CanvasRenderer.prototype.applyEffects = function (effects) {\n        var _this = this;\n        while (this._activeEffects.length) {\n            this.popEffect();\n        }\n        effects.forEach(function (effect) { return _this.applyEffect(effect); });\n    };\n    CanvasRenderer.prototype.applyEffect = function (effect) {\n        this.ctx.save();\n        if (isOpacityEffect(effect)) {\n            this.ctx.globalAlpha = effect.opacity;\n        }\n        if (isTransformEffect(effect)) {\n            this.ctx.translate(effect.offsetX, effect.offsetY);\n            this.ctx.transform(effect.matrix[0], effect.matrix[1], effect.matrix[2], effect.matrix[3], effect.matrix[4], effect.matrix[5]);\n            this.ctx.translate(-effect.offsetX, -effect.offsetY);\n        }\n        if (isClipEffect(effect)) {\n            this.path(effect.path);\n            this.ctx.clip();\n        }\n        this._activeEffects.push(effect);\n    };\n    CanvasRenderer.prototype.popEffect = function () {\n        this._activeEffects.pop();\n        this.ctx.restore();\n    };\n    CanvasRenderer.prototype.renderStack = function (stack) {\n        return __awaiter(this, void 0, void 0, function () {\n            var styles;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        styles = stack.element.container.styles;\n                        if (!styles.isVisible()) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.renderStackContent(stack)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderNode = function (paint) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (contains(paint.container.flags, 16 /* DEBUG_RENDER */)) {\n                            debugger;\n                        }\n                        if (!paint.container.styles.isVisible()) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.renderNodeBackgroundAndBorders(paint)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.renderNodeContent(paint)];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderTextWithLetterSpacing = function (text, letterSpacing, baseline) {\n        var _this = this;\n        if (letterSpacing === 0) {\n            this.ctx.fillText(text.text, text.bounds.left, text.bounds.top + baseline);\n        }\n        else {\n            var letters = segmentGraphemes(text.text);\n            letters.reduce(function (left, letter) {\n                _this.ctx.fillText(letter, left, text.bounds.top + baseline);\n                return left + _this.ctx.measureText(letter).width;\n            }, text.bounds.left);\n        }\n    };\n    CanvasRenderer.prototype.createFontStyle = function (styles) {\n        var fontVariant = styles.fontVariant\n            .filter(function (variant) { return variant === 'normal' || variant === 'small-caps'; })\n            .join('');\n        var fontFamily = fixIOSSystemFonts(styles.fontFamily).join(', ');\n        var fontSize = isDimensionToken(styles.fontSize)\n            ? \"\" + styles.fontSize.number + styles.fontSize.unit\n            : styles.fontSize.number + \"px\";\n        return [\n            [styles.fontStyle, fontVariant, styles.fontWeight, fontSize, fontFamily].join(' '),\n            fontFamily,\n            fontSize\n        ];\n    };\n    CanvasRenderer.prototype.renderTextNode = function (text, styles) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, font, fontFamily, fontSize, _b, baseline, middle, paintOrder;\n            var _this = this;\n            return __generator(this, function (_c) {\n                _a = this.createFontStyle(styles), font = _a[0], fontFamily = _a[1], fontSize = _a[2];\n                this.ctx.font = font;\n                this.ctx.direction = styles.direction === 1 /* RTL */ ? 'rtl' : 'ltr';\n                this.ctx.textAlign = 'left';\n                this.ctx.textBaseline = 'alphabetic';\n                _b = this.fontMetrics.getMetrics(fontFamily, fontSize), baseline = _b.baseline, middle = _b.middle;\n                paintOrder = styles.paintOrder;\n                text.textBounds.forEach(function (text) {\n                    paintOrder.forEach(function (paintOrderLayer) {\n                        switch (paintOrderLayer) {\n                            case 0 /* FILL */:\n                                _this.ctx.fillStyle = asString(styles.color);\n                                _this.renderTextWithLetterSpacing(text, styles.letterSpacing, baseline);\n                                var textShadows = styles.textShadow;\n                                if (textShadows.length && text.text.trim().length) {\n                                    textShadows\n                                        .slice(0)\n                                        .reverse()\n                                        .forEach(function (textShadow) {\n                                        _this.ctx.shadowColor = asString(textShadow.color);\n                                        _this.ctx.shadowOffsetX = textShadow.offsetX.number * _this.options.scale;\n                                        _this.ctx.shadowOffsetY = textShadow.offsetY.number * _this.options.scale;\n                                        _this.ctx.shadowBlur = textShadow.blur.number;\n                                        _this.renderTextWithLetterSpacing(text, styles.letterSpacing, baseline);\n                                    });\n                                    _this.ctx.shadowColor = '';\n                                    _this.ctx.shadowOffsetX = 0;\n                                    _this.ctx.shadowOffsetY = 0;\n                                    _this.ctx.shadowBlur = 0;\n                                }\n                                if (styles.textDecorationLine.length) {\n                                    _this.ctx.fillStyle = asString(styles.textDecorationColor || styles.color);\n                                    styles.textDecorationLine.forEach(function (textDecorationLine) {\n                                        switch (textDecorationLine) {\n                                            case 1 /* UNDERLINE */:\n                                                // Draws a line at the baseline of the font\n                                                // TODO As some browsers display the line as more than 1px if the font-size is big,\n                                                // need to take that into account both in position and size\n                                                _this.ctx.fillRect(text.bounds.left, Math.round(text.bounds.top + baseline), text.bounds.width, 1);\n                                                break;\n                                            case 2 /* OVERLINE */:\n                                                _this.ctx.fillRect(text.bounds.left, Math.round(text.bounds.top), text.bounds.width, 1);\n                                                break;\n                                            case 3 /* LINE_THROUGH */:\n                                                // TODO try and find exact position for line-through\n                                                _this.ctx.fillRect(text.bounds.left, Math.ceil(text.bounds.top + middle), text.bounds.width, 1);\n                                                break;\n                                        }\n                                    });\n                                }\n                                break;\n                            case 1 /* STROKE */:\n                                if (styles.webkitTextStrokeWidth && text.text.trim().length) {\n                                    _this.ctx.strokeStyle = asString(styles.webkitTextStrokeColor);\n                                    _this.ctx.lineWidth = styles.webkitTextStrokeWidth;\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    _this.ctx.lineJoin = !!window.chrome ? 'miter' : 'round';\n                                    _this.ctx.strokeText(text.text, text.bounds.left, text.bounds.top + baseline);\n                                }\n                                _this.ctx.strokeStyle = '';\n                                _this.ctx.lineWidth = 0;\n                                _this.ctx.lineJoin = 'miter';\n                                break;\n                        }\n                    });\n                });\n                return [2 /*return*/];\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderReplacedElement = function (container, curves, image) {\n        if (image && container.intrinsicWidth > 0 && container.intrinsicHeight > 0) {\n            var box = contentBox(container);\n            var path = calculatePaddingBoxPath(curves);\n            this.path(path);\n            this.ctx.save();\n            this.ctx.clip();\n            this.ctx.drawImage(image, 0, 0, container.intrinsicWidth, container.intrinsicHeight, box.left, box.top, box.width, box.height);\n            this.ctx.restore();\n        }\n    };\n    CanvasRenderer.prototype.renderNodeContent = function (paint) {\n        return __awaiter(this, void 0, void 0, function () {\n            var container, curves, styles, _i, _a, child, image, image, iframeRenderer, canvas, size, _b, fontFamily, fontSize, baseline, bounds, x, textBounds, img, image, url, fontFamily, bounds;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        this.applyEffects(paint.getEffects(4 /* CONTENT */));\n                        container = paint.container;\n                        curves = paint.curves;\n                        styles = container.styles;\n                        _i = 0, _a = container.textNodes;\n                        _c.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\n                        child = _a[_i];\n                        return [4 /*yield*/, this.renderTextNode(child, styles)];\n                    case 2:\n                        _c.sent();\n                        _c.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        if (!(container instanceof ImageElementContainer)) return [3 /*break*/, 8];\n                        _c.label = 5;\n                    case 5:\n                        _c.trys.push([5, 7, , 8]);\n                        return [4 /*yield*/, this.context.cache.match(container.src)];\n                    case 6:\n                        image = _c.sent();\n                        this.renderReplacedElement(container, curves, image);\n                        return [3 /*break*/, 8];\n                    case 7:\n                        _c.sent();\n                        this.context.logger.error(\"Error loading image \" + container.src);\n                        return [3 /*break*/, 8];\n                    case 8:\n                        if (container instanceof CanvasElementContainer) {\n                            this.renderReplacedElement(container, curves, container.canvas);\n                        }\n                        if (!(container instanceof SVGElementContainer)) return [3 /*break*/, 12];\n                        _c.label = 9;\n                    case 9:\n                        _c.trys.push([9, 11, , 12]);\n                        return [4 /*yield*/, this.context.cache.match(container.svg)];\n                    case 10:\n                        image = _c.sent();\n                        this.renderReplacedElement(container, curves, image);\n                        return [3 /*break*/, 12];\n                    case 11:\n                        _c.sent();\n                        this.context.logger.error(\"Error loading svg \" + container.svg.substring(0, 255));\n                        return [3 /*break*/, 12];\n                    case 12:\n                        if (!(container instanceof IFrameElementContainer && container.tree)) return [3 /*break*/, 14];\n                        iframeRenderer = new CanvasRenderer(this.context, {\n                            scale: this.options.scale,\n                            backgroundColor: container.backgroundColor,\n                            x: 0,\n                            y: 0,\n                            width: container.width,\n                            height: container.height\n                        });\n                        return [4 /*yield*/, iframeRenderer.render(container.tree)];\n                    case 13:\n                        canvas = _c.sent();\n                        if (container.width && container.height) {\n                            this.ctx.drawImage(canvas, 0, 0, container.width, container.height, container.bounds.left, container.bounds.top, container.bounds.width, container.bounds.height);\n                        }\n                        _c.label = 14;\n                    case 14:\n                        if (container instanceof InputElementContainer) {\n                            size = Math.min(container.bounds.width, container.bounds.height);\n                            if (container.type === CHECKBOX) {\n                                if (container.checked) {\n                                    this.ctx.save();\n                                    this.path([\n                                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79),\n                                        new Vector(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549),\n                                        new Vector(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071),\n                                        new Vector(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649),\n                                        new Vector(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23),\n                                        new Vector(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085),\n                                        new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)\n                                    ]);\n                                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                                    this.ctx.fill();\n                                    this.ctx.restore();\n                                }\n                            }\n                            else if (container.type === RADIO) {\n                                if (container.checked) {\n                                    this.ctx.save();\n                                    this.ctx.beginPath();\n                                    this.ctx.arc(container.bounds.left + size / 2, container.bounds.top + size / 2, size / 4, 0, Math.PI * 2, true);\n                                    this.ctx.fillStyle = asString(INPUT_COLOR);\n                                    this.ctx.fill();\n                                    this.ctx.restore();\n                                }\n                            }\n                        }\n                        if (isTextInputElement(container) && container.value.length) {\n                            _b = this.createFontStyle(styles), fontFamily = _b[0], fontSize = _b[1];\n                            baseline = this.fontMetrics.getMetrics(fontFamily, fontSize).baseline;\n                            this.ctx.font = fontFamily;\n                            this.ctx.fillStyle = asString(styles.color);\n                            this.ctx.textBaseline = 'alphabetic';\n                            this.ctx.textAlign = canvasTextAlign(container.styles.textAlign);\n                            bounds = contentBox(container);\n                            x = 0;\n                            switch (container.styles.textAlign) {\n                                case 1 /* CENTER */:\n                                    x += bounds.width / 2;\n                                    break;\n                                case 2 /* RIGHT */:\n                                    x += bounds.width;\n                                    break;\n                            }\n                            textBounds = bounds.add(x, 0, 0, -bounds.height / 2 + 1);\n                            this.ctx.save();\n                            this.path([\n                                new Vector(bounds.left, bounds.top),\n                                new Vector(bounds.left + bounds.width, bounds.top),\n                                new Vector(bounds.left + bounds.width, bounds.top + bounds.height),\n                                new Vector(bounds.left, bounds.top + bounds.height)\n                            ]);\n                            this.ctx.clip();\n                            this.renderTextWithLetterSpacing(new TextBounds(container.value, textBounds), styles.letterSpacing, baseline);\n                            this.ctx.restore();\n                            this.ctx.textBaseline = 'alphabetic';\n                            this.ctx.textAlign = 'left';\n                        }\n                        if (!contains(container.styles.display, 2048 /* LIST_ITEM */)) return [3 /*break*/, 20];\n                        if (!(container.styles.listStyleImage !== null)) return [3 /*break*/, 19];\n                        img = container.styles.listStyleImage;\n                        if (!(img.type === 0 /* URL */)) return [3 /*break*/, 18];\n                        image = void 0;\n                        url = img.url;\n                        _c.label = 15;\n                    case 15:\n                        _c.trys.push([15, 17, , 18]);\n                        return [4 /*yield*/, this.context.cache.match(url)];\n                    case 16:\n                        image = _c.sent();\n                        this.ctx.drawImage(image, container.bounds.left - (image.width + 10), container.bounds.top);\n                        return [3 /*break*/, 18];\n                    case 17:\n                        _c.sent();\n                        this.context.logger.error(\"Error loading list-style-image \" + url);\n                        return [3 /*break*/, 18];\n                    case 18: return [3 /*break*/, 20];\n                    case 19:\n                        if (paint.listValue && container.styles.listStyleType !== -1 /* NONE */) {\n                            fontFamily = this.createFontStyle(styles)[0];\n                            this.ctx.font = fontFamily;\n                            this.ctx.fillStyle = asString(styles.color);\n                            this.ctx.textBaseline = 'middle';\n                            this.ctx.textAlign = 'right';\n                            bounds = new Bounds(container.bounds.left, container.bounds.top + getAbsoluteValue(container.styles.paddingTop, container.bounds.width), container.bounds.width, computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 1);\n                            this.renderTextWithLetterSpacing(new TextBounds(paint.listValue, bounds), styles.letterSpacing, computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 2);\n                            this.ctx.textBaseline = 'bottom';\n                            this.ctx.textAlign = 'left';\n                        }\n                        _c.label = 20;\n                    case 20: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderStackContent = function (stack) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _i, _a, child, _b, _c, child, _d, _e, child, _f, _g, child, _h, _j, child, _k, _l, child, _m, _o, child;\n            return __generator(this, function (_p) {\n                switch (_p.label) {\n                    case 0:\n                        if (contains(stack.element.container.flags, 16 /* DEBUG_RENDER */)) {\n                            debugger;\n                        }\n                        // https://www.w3.org/TR/css-position-3/#painting-order\n                        // 1. the background and borders of the element forming the stacking context.\n                        return [4 /*yield*/, this.renderNodeBackgroundAndBorders(stack.element)];\n                    case 1:\n                        // https://www.w3.org/TR/css-position-3/#painting-order\n                        // 1. the background and borders of the element forming the stacking context.\n                        _p.sent();\n                        _i = 0, _a = stack.negativeZIndex;\n                        _p.label = 2;\n                    case 2:\n                        if (!(_i < _a.length)) return [3 /*break*/, 5];\n                        child = _a[_i];\n                        return [4 /*yield*/, this.renderStack(child)];\n                    case 3:\n                        _p.sent();\n                        _p.label = 4;\n                    case 4:\n                        _i++;\n                        return [3 /*break*/, 2];\n                    case 5: \n                    // 3. For all its in-flow, non-positioned, block-level descendants in tree order:\n                    return [4 /*yield*/, this.renderNodeContent(stack.element)];\n                    case 6:\n                        // 3. For all its in-flow, non-positioned, block-level descendants in tree order:\n                        _p.sent();\n                        _b = 0, _c = stack.nonInlineLevel;\n                        _p.label = 7;\n                    case 7:\n                        if (!(_b < _c.length)) return [3 /*break*/, 10];\n                        child = _c[_b];\n                        return [4 /*yield*/, this.renderNode(child)];\n                    case 8:\n                        _p.sent();\n                        _p.label = 9;\n                    case 9:\n                        _b++;\n                        return [3 /*break*/, 7];\n                    case 10:\n                        _d = 0, _e = stack.nonPositionedFloats;\n                        _p.label = 11;\n                    case 11:\n                        if (!(_d < _e.length)) return [3 /*break*/, 14];\n                        child = _e[_d];\n                        return [4 /*yield*/, this.renderStack(child)];\n                    case 12:\n                        _p.sent();\n                        _p.label = 13;\n                    case 13:\n                        _d++;\n                        return [3 /*break*/, 11];\n                    case 14:\n                        _f = 0, _g = stack.nonPositionedInlineLevel;\n                        _p.label = 15;\n                    case 15:\n                        if (!(_f < _g.length)) return [3 /*break*/, 18];\n                        child = _g[_f];\n                        return [4 /*yield*/, this.renderStack(child)];\n                    case 16:\n                        _p.sent();\n                        _p.label = 17;\n                    case 17:\n                        _f++;\n                        return [3 /*break*/, 15];\n                    case 18:\n                        _h = 0, _j = stack.inlineLevel;\n                        _p.label = 19;\n                    case 19:\n                        if (!(_h < _j.length)) return [3 /*break*/, 22];\n                        child = _j[_h];\n                        return [4 /*yield*/, this.renderNode(child)];\n                    case 20:\n                        _p.sent();\n                        _p.label = 21;\n                    case 21:\n                        _h++;\n                        return [3 /*break*/, 19];\n                    case 22:\n                        _k = 0, _l = stack.zeroOrAutoZIndexOrTransformedOrOpacity;\n                        _p.label = 23;\n                    case 23:\n                        if (!(_k < _l.length)) return [3 /*break*/, 26];\n                        child = _l[_k];\n                        return [4 /*yield*/, this.renderStack(child)];\n                    case 24:\n                        _p.sent();\n                        _p.label = 25;\n                    case 25:\n                        _k++;\n                        return [3 /*break*/, 23];\n                    case 26:\n                        _m = 0, _o = stack.positiveZIndex;\n                        _p.label = 27;\n                    case 27:\n                        if (!(_m < _o.length)) return [3 /*break*/, 30];\n                        child = _o[_m];\n                        return [4 /*yield*/, this.renderStack(child)];\n                    case 28:\n                        _p.sent();\n                        _p.label = 29;\n                    case 29:\n                        _m++;\n                        return [3 /*break*/, 27];\n                    case 30: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CanvasRenderer.prototype.mask = function (paths) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(0, 0);\n        this.ctx.lineTo(this.canvas.width, 0);\n        this.ctx.lineTo(this.canvas.width, this.canvas.height);\n        this.ctx.lineTo(0, this.canvas.height);\n        this.ctx.lineTo(0, 0);\n        this.formatPath(paths.slice(0).reverse());\n        this.ctx.closePath();\n    };\n    CanvasRenderer.prototype.path = function (paths) {\n        this.ctx.beginPath();\n        this.formatPath(paths);\n        this.ctx.closePath();\n    };\n    CanvasRenderer.prototype.formatPath = function (paths) {\n        var _this = this;\n        paths.forEach(function (point, index) {\n            var start = isBezierCurve(point) ? point.start : point;\n            if (index === 0) {\n                _this.ctx.moveTo(start.x, start.y);\n            }\n            else {\n                _this.ctx.lineTo(start.x, start.y);\n            }\n            if (isBezierCurve(point)) {\n                _this.ctx.bezierCurveTo(point.startControl.x, point.startControl.y, point.endControl.x, point.endControl.y, point.end.x, point.end.y);\n            }\n        });\n    };\n    CanvasRenderer.prototype.renderRepeat = function (path, pattern, offsetX, offsetY) {\n        this.path(path);\n        this.ctx.fillStyle = pattern;\n        this.ctx.translate(offsetX, offsetY);\n        this.ctx.fill();\n        this.ctx.translate(-offsetX, -offsetY);\n    };\n    CanvasRenderer.prototype.resizeImage = function (image, width, height) {\n        var _a;\n        if (image.width === width && image.height === height) {\n            return image;\n        }\n        var ownerDocument = (_a = this.canvas.ownerDocument) !== null && _a !== void 0 ? _a : document;\n        var canvas = ownerDocument.createElement('canvas');\n        canvas.width = Math.max(1, width);\n        canvas.height = Math.max(1, height);\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height);\n        return canvas;\n    };\n    CanvasRenderer.prototype.renderBackgroundImage = function (container) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index, _loop_1, this_1, _i, _a, backgroundImage;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        index = container.styles.backgroundImage.length - 1;\n                        _loop_1 = function (backgroundImage) {\n                            var image, url, _c, path, x, y, width, height, pattern, _d, path, x, y, width, height, _e, lineLength, x0, x1, y0, y1, canvas, ctx, gradient_1, pattern, _f, path, left, top_1, width, height, position, x, y, _g, rx, ry, radialGradient_1, midX, midY, f, invF;\n                            return __generator(this, function (_h) {\n                                switch (_h.label) {\n                                    case 0:\n                                        if (!(backgroundImage.type === 0 /* URL */)) return [3 /*break*/, 5];\n                                        image = void 0;\n                                        url = backgroundImage.url;\n                                        _h.label = 1;\n                                    case 1:\n                                        _h.trys.push([1, 3, , 4]);\n                                        return [4 /*yield*/, this_1.context.cache.match(url)];\n                                    case 2:\n                                        image = _h.sent();\n                                        return [3 /*break*/, 4];\n                                    case 3:\n                                        _h.sent();\n                                        this_1.context.logger.error(\"Error loading background-image \" + url);\n                                        return [3 /*break*/, 4];\n                                    case 4:\n                                        if (image) {\n                                            _c = calculateBackgroundRendering(container, index, [\n                                                image.width,\n                                                image.height,\n                                                image.width / image.height\n                                            ]), path = _c[0], x = _c[1], y = _c[2], width = _c[3], height = _c[4];\n                                            pattern = this_1.ctx.createPattern(this_1.resizeImage(image, width, height), 'repeat');\n                                            this_1.renderRepeat(path, pattern, x, y);\n                                        }\n                                        return [3 /*break*/, 6];\n                                    case 5:\n                                        if (isLinearGradient(backgroundImage)) {\n                                            _d = calculateBackgroundRendering(container, index, [null, null, null]), path = _d[0], x = _d[1], y = _d[2], width = _d[3], height = _d[4];\n                                            _e = calculateGradientDirection(backgroundImage.angle, width, height), lineLength = _e[0], x0 = _e[1], x1 = _e[2], y0 = _e[3], y1 = _e[4];\n                                            canvas = document.createElement('canvas');\n                                            canvas.width = width;\n                                            canvas.height = height;\n                                            ctx = canvas.getContext('2d');\n                                            gradient_1 = ctx.createLinearGradient(x0, y0, x1, y1);\n                                            processColorStops(backgroundImage.stops, lineLength).forEach(function (colorStop) {\n                                                return gradient_1.addColorStop(colorStop.stop, asString(colorStop.color));\n                                            });\n                                            ctx.fillStyle = gradient_1;\n                                            ctx.fillRect(0, 0, width, height);\n                                            if (width > 0 && height > 0) {\n                                                pattern = this_1.ctx.createPattern(canvas, 'repeat');\n                                                this_1.renderRepeat(path, pattern, x, y);\n                                            }\n                                        }\n                                        else if (isRadialGradient(backgroundImage)) {\n                                            _f = calculateBackgroundRendering(container, index, [\n                                                null,\n                                                null,\n                                                null\n                                            ]), path = _f[0], left = _f[1], top_1 = _f[2], width = _f[3], height = _f[4];\n                                            position = backgroundImage.position.length === 0 ? [FIFTY_PERCENT] : backgroundImage.position;\n                                            x = getAbsoluteValue(position[0], width);\n                                            y = getAbsoluteValue(position[position.length - 1], height);\n                                            _g = calculateRadius(backgroundImage, x, y, width, height), rx = _g[0], ry = _g[1];\n                                            if (rx > 0 && ry > 0) {\n                                                radialGradient_1 = this_1.ctx.createRadialGradient(left + x, top_1 + y, 0, left + x, top_1 + y, rx);\n                                                processColorStops(backgroundImage.stops, rx * 2).forEach(function (colorStop) {\n                                                    return radialGradient_1.addColorStop(colorStop.stop, asString(colorStop.color));\n                                                });\n                                                this_1.path(path);\n                                                this_1.ctx.fillStyle = radialGradient_1;\n                                                if (rx !== ry) {\n                                                    midX = container.bounds.left + 0.5 * container.bounds.width;\n                                                    midY = container.bounds.top + 0.5 * container.bounds.height;\n                                                    f = ry / rx;\n                                                    invF = 1 / f;\n                                                    this_1.ctx.save();\n                                                    this_1.ctx.translate(midX, midY);\n                                                    this_1.ctx.transform(1, 0, 0, f, 0, 0);\n                                                    this_1.ctx.translate(-midX, -midY);\n                                                    this_1.ctx.fillRect(left, invF * (top_1 - midY) + midY, width, height * invF);\n                                                    this_1.ctx.restore();\n                                                }\n                                                else {\n                                                    this_1.ctx.fill();\n                                                }\n                                            }\n                                        }\n                                        _h.label = 6;\n                                    case 6:\n                                        index--;\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _i = 0, _a = container.styles.backgroundImage.slice(0).reverse();\n                        _b.label = 1;\n                    case 1:\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\n                        backgroundImage = _a[_i];\n                        return [5 /*yield**/, _loop_1(backgroundImage)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderSolidBorder = function (color, side, curvePoints) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.path(parsePathForBorder(curvePoints, side));\n                this.ctx.fillStyle = asString(color);\n                this.ctx.fill();\n                return [2 /*return*/];\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderDoubleBorder = function (color, width, side, curvePoints) {\n        return __awaiter(this, void 0, void 0, function () {\n            var outerPaths, innerPaths;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(width < 3)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.renderSolidBorder(color, side, curvePoints)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                    case 2:\n                        outerPaths = parsePathForBorderDoubleOuter(curvePoints, side);\n                        this.path(outerPaths);\n                        this.ctx.fillStyle = asString(color);\n                        this.ctx.fill();\n                        innerPaths = parsePathForBorderDoubleInner(curvePoints, side);\n                        this.path(innerPaths);\n                        this.ctx.fill();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderNodeBackgroundAndBorders = function (paint) {\n        return __awaiter(this, void 0, void 0, function () {\n            var styles, hasBackground, borders, backgroundPaintingArea, side, _i, borders_1, border;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.applyEffects(paint.getEffects(2 /* BACKGROUND_BORDERS */));\n                        styles = paint.container.styles;\n                        hasBackground = !isTransparent(styles.backgroundColor) || styles.backgroundImage.length;\n                        borders = [\n                            { style: styles.borderTopStyle, color: styles.borderTopColor, width: styles.borderTopWidth },\n                            { style: styles.borderRightStyle, color: styles.borderRightColor, width: styles.borderRightWidth },\n                            { style: styles.borderBottomStyle, color: styles.borderBottomColor, width: styles.borderBottomWidth },\n                            { style: styles.borderLeftStyle, color: styles.borderLeftColor, width: styles.borderLeftWidth }\n                        ];\n                        backgroundPaintingArea = calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(styles.backgroundClip, 0), paint.curves);\n                        if (!(hasBackground || styles.boxShadow.length)) return [3 /*break*/, 2];\n                        this.ctx.save();\n                        this.path(backgroundPaintingArea);\n                        this.ctx.clip();\n                        if (!isTransparent(styles.backgroundColor)) {\n                            this.ctx.fillStyle = asString(styles.backgroundColor);\n                            this.ctx.fill();\n                        }\n                        return [4 /*yield*/, this.renderBackgroundImage(paint.container)];\n                    case 1:\n                        _a.sent();\n                        this.ctx.restore();\n                        styles.boxShadow\n                            .slice(0)\n                            .reverse()\n                            .forEach(function (shadow) {\n                            _this.ctx.save();\n                            var borderBoxArea = calculateBorderBoxPath(paint.curves);\n                            var maskOffset = shadow.inset ? 0 : MASK_OFFSET;\n                            var shadowPaintingArea = transformPath(borderBoxArea, -maskOffset + (shadow.inset ? 1 : -1) * shadow.spread.number, (shadow.inset ? 1 : -1) * shadow.spread.number, shadow.spread.number * (shadow.inset ? -2 : 2), shadow.spread.number * (shadow.inset ? -2 : 2));\n                            if (shadow.inset) {\n                                _this.path(borderBoxArea);\n                                _this.ctx.clip();\n                                _this.mask(shadowPaintingArea);\n                            }\n                            else {\n                                _this.mask(borderBoxArea);\n                                _this.ctx.clip();\n                                _this.path(shadowPaintingArea);\n                            }\n                            _this.ctx.shadowOffsetX = shadow.offsetX.number + maskOffset;\n                            _this.ctx.shadowOffsetY = shadow.offsetY.number;\n                            _this.ctx.shadowColor = asString(shadow.color);\n                            _this.ctx.shadowBlur = shadow.blur.number;\n                            _this.ctx.fillStyle = shadow.inset ? asString(shadow.color) : 'rgba(0,0,0,1)';\n                            _this.ctx.fill();\n                            _this.ctx.restore();\n                        });\n                        _a.label = 2;\n                    case 2:\n                        side = 0;\n                        _i = 0, borders_1 = borders;\n                        _a.label = 3;\n                    case 3:\n                        if (!(_i < borders_1.length)) return [3 /*break*/, 13];\n                        border = borders_1[_i];\n                        if (!(border.style !== 0 /* NONE */ && !isTransparent(border.color) && border.width > 0)) return [3 /*break*/, 11];\n                        if (!(border.style === 2 /* DASHED */)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.renderDashedDottedBorder(border.color, border.width, side, paint.curves, 2 /* DASHED */)];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 11];\n                    case 5:\n                        if (!(border.style === 3 /* DOTTED */)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, this.renderDashedDottedBorder(border.color, border.width, side, paint.curves, 3 /* DOTTED */)];\n                    case 6:\n                        _a.sent();\n                        return [3 /*break*/, 11];\n                    case 7:\n                        if (!(border.style === 4 /* DOUBLE */)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, this.renderDoubleBorder(border.color, border.width, side, paint.curves)];\n                    case 8:\n                        _a.sent();\n                        return [3 /*break*/, 11];\n                    case 9: return [4 /*yield*/, this.renderSolidBorder(border.color, side, paint.curves)];\n                    case 10:\n                        _a.sent();\n                        _a.label = 11;\n                    case 11:\n                        side++;\n                        _a.label = 12;\n                    case 12:\n                        _i++;\n                        return [3 /*break*/, 3];\n                    case 13: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CanvasRenderer.prototype.renderDashedDottedBorder = function (color, width, side, curvePoints, style) {\n        return __awaiter(this, void 0, void 0, function () {\n            var strokePaths, boxPaths, startX, startY, endX, endY, length, dashLength, spaceLength, useLineDash, multiplier, numberOfDashes, minSpace, maxSpace, path1, path2, path1, path2;\n            return __generator(this, function (_a) {\n                this.ctx.save();\n                strokePaths = parsePathForBorderStroke(curvePoints, side);\n                boxPaths = parsePathForBorder(curvePoints, side);\n                if (style === 2 /* DASHED */) {\n                    this.path(boxPaths);\n                    this.ctx.clip();\n                }\n                if (isBezierCurve(boxPaths[0])) {\n                    startX = boxPaths[0].start.x;\n                    startY = boxPaths[0].start.y;\n                }\n                else {\n                    startX = boxPaths[0].x;\n                    startY = boxPaths[0].y;\n                }\n                if (isBezierCurve(boxPaths[1])) {\n                    endX = boxPaths[1].end.x;\n                    endY = boxPaths[1].end.y;\n                }\n                else {\n                    endX = boxPaths[1].x;\n                    endY = boxPaths[1].y;\n                }\n                if (side === 0 || side === 2) {\n                    length = Math.abs(startX - endX);\n                }\n                else {\n                    length = Math.abs(startY - endY);\n                }\n                this.ctx.beginPath();\n                if (style === 3 /* DOTTED */) {\n                    this.formatPath(strokePaths);\n                }\n                else {\n                    this.formatPath(boxPaths.slice(0, 2));\n                }\n                dashLength = width < 3 ? width * 3 : width * 2;\n                spaceLength = width < 3 ? width * 2 : width;\n                if (style === 3 /* DOTTED */) {\n                    dashLength = width;\n                    spaceLength = width;\n                }\n                useLineDash = true;\n                if (length <= dashLength * 2) {\n                    useLineDash = false;\n                }\n                else if (length <= dashLength * 2 + spaceLength) {\n                    multiplier = length / (2 * dashLength + spaceLength);\n                    dashLength *= multiplier;\n                    spaceLength *= multiplier;\n                }\n                else {\n                    numberOfDashes = Math.floor((length + spaceLength) / (dashLength + spaceLength));\n                    minSpace = (length - numberOfDashes * dashLength) / (numberOfDashes - 1);\n                    maxSpace = (length - (numberOfDashes + 1) * dashLength) / numberOfDashes;\n                    spaceLength =\n                        maxSpace <= 0 || Math.abs(spaceLength - minSpace) < Math.abs(spaceLength - maxSpace)\n                            ? minSpace\n                            : maxSpace;\n                }\n                if (useLineDash) {\n                    if (style === 3 /* DOTTED */) {\n                        this.ctx.setLineDash([0, dashLength + spaceLength]);\n                    }\n                    else {\n                        this.ctx.setLineDash([dashLength, spaceLength]);\n                    }\n                }\n                if (style === 3 /* DOTTED */) {\n                    this.ctx.lineCap = 'round';\n                    this.ctx.lineWidth = width;\n                }\n                else {\n                    this.ctx.lineWidth = width * 2 + 1.1;\n                }\n                this.ctx.strokeStyle = asString(color);\n                this.ctx.stroke();\n                this.ctx.setLineDash([]);\n                // dashed round edge gap\n                if (style === 2 /* DASHED */) {\n                    if (isBezierCurve(boxPaths[0])) {\n                        path1 = boxPaths[3];\n                        path2 = boxPaths[0];\n                        this.ctx.beginPath();\n                        this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);\n                        this.ctx.stroke();\n                    }\n                    if (isBezierCurve(boxPaths[1])) {\n                        path1 = boxPaths[1];\n                        path2 = boxPaths[2];\n                        this.ctx.beginPath();\n                        this.formatPath([new Vector(path1.end.x, path1.end.y), new Vector(path2.start.x, path2.start.y)]);\n                        this.ctx.stroke();\n                    }\n                }\n                this.ctx.restore();\n                return [2 /*return*/];\n            });\n        });\n    };\n    CanvasRenderer.prototype.render = function (element) {\n        return __awaiter(this, void 0, void 0, function () {\n            var stack;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.options.backgroundColor) {\n                            this.ctx.fillStyle = asString(this.options.backgroundColor);\n                            this.ctx.fillRect(this.options.x, this.options.y, this.options.width, this.options.height);\n                        }\n                        stack = parseStackingContexts(element);\n                        return [4 /*yield*/, this.renderStack(stack)];\n                    case 1:\n                        _a.sent();\n                        this.applyEffects([]);\n                        return [2 /*return*/, this.canvas];\n                }\n            });\n        });\n    };\n    return CanvasRenderer;\n}(Renderer));\nvar isTextInputElement = function (container) {\n    if (container instanceof TextareaElementContainer) {\n        return true;\n    }\n    else if (container instanceof SelectElementContainer) {\n        return true;\n    }\n    else if (container instanceof InputElementContainer && container.type !== RADIO && container.type !== CHECKBOX) {\n        return true;\n    }\n    return false;\n};\nvar calculateBackgroundCurvedPaintingArea = function (clip, curves) {\n    switch (clip) {\n        case 0 /* BORDER_BOX */:\n            return calculateBorderBoxPath(curves);\n        case 2 /* CONTENT_BOX */:\n            return calculateContentBoxPath(curves);\n        case 1 /* PADDING_BOX */:\n        default:\n            return calculatePaddingBoxPath(curves);\n    }\n};\nvar canvasTextAlign = function (textAlign) {\n    switch (textAlign) {\n        case 1 /* CENTER */:\n            return 'center';\n        case 2 /* RIGHT */:\n            return 'right';\n        case 0 /* LEFT */:\n        default:\n            return 'left';\n    }\n};\n// see https://github.com/niklasvh/html2canvas/pull/2645\nvar iOSBrokenFonts = ['-apple-system', 'system-ui'];\nvar fixIOSSystemFonts = function (fontFamilies) {\n    return /iPhone OS 15_(0|1)/.test(window.navigator.userAgent)\n        ? fontFamilies.filter(function (fontFamily) { return iOSBrokenFonts.indexOf(fontFamily) === -1; })\n        : fontFamilies;\n};\n\nvar ForeignObjectRenderer = /** @class */ (function (_super) {\n    __extends(ForeignObjectRenderer, _super);\n    function ForeignObjectRenderer(context, options) {\n        var _this = _super.call(this, context, options) || this;\n        _this.canvas = options.canvas ? options.canvas : document.createElement('canvas');\n        _this.ctx = _this.canvas.getContext('2d');\n        _this.options = options;\n        _this.canvas.width = Math.floor(options.width * options.scale);\n        _this.canvas.height = Math.floor(options.height * options.scale);\n        _this.canvas.style.width = options.width + \"px\";\n        _this.canvas.style.height = options.height + \"px\";\n        _this.ctx.scale(_this.options.scale, _this.options.scale);\n        _this.ctx.translate(-options.x, -options.y);\n        _this.context.logger.debug(\"EXPERIMENTAL ForeignObject renderer initialized (\" + options.width + \"x\" + options.height + \" at \" + options.x + \",\" + options.y + \") with scale \" + options.scale);\n        return _this;\n    }\n    ForeignObjectRenderer.prototype.render = function (element) {\n        return __awaiter(this, void 0, void 0, function () {\n            var svg, img;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        svg = createForeignObjectSVG(this.options.width * this.options.scale, this.options.height * this.options.scale, this.options.scale, this.options.scale, element);\n                        return [4 /*yield*/, loadSerializedSVG(svg)];\n                    case 1:\n                        img = _a.sent();\n                        if (this.options.backgroundColor) {\n                            this.ctx.fillStyle = asString(this.options.backgroundColor);\n                            this.ctx.fillRect(0, 0, this.options.width * this.options.scale, this.options.height * this.options.scale);\n                        }\n                        this.ctx.drawImage(img, -this.options.x * this.options.scale, -this.options.y * this.options.scale);\n                        return [2 /*return*/, this.canvas];\n                }\n            });\n        });\n    };\n    return ForeignObjectRenderer;\n}(Renderer));\nvar loadSerializedSVG = function (svg) {\n    return new Promise(function (resolve, reject) {\n        var img = new Image();\n        img.onload = function () {\n            resolve(img);\n        };\n        img.onerror = reject;\n        img.src = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(new XMLSerializer().serializeToString(svg));\n    });\n};\n\nvar Logger = /** @class */ (function () {\n    function Logger(_a) {\n        var id = _a.id, enabled = _a.enabled;\n        this.id = id;\n        this.enabled = enabled;\n        this.start = Date.now();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.debug === 'function') {\n                // eslint-disable-next-line no-console\n                console.debug.apply(console, __spreadArray([this.id, this.getTime() + \"ms\"], args));\n            }\n            else {\n                this.info.apply(this, args);\n            }\n        }\n    };\n    Logger.prototype.getTime = function () {\n        return Date.now() - this.start;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.info === 'function') {\n                // eslint-disable-next-line no-console\n                console.info.apply(console, __spreadArray([this.id, this.getTime() + \"ms\"], args));\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.warn === 'function') {\n                // eslint-disable-next-line no-console\n                console.warn.apply(console, __spreadArray([this.id, this.getTime() + \"ms\"], args));\n            }\n            else {\n                this.info.apply(this, args);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (this.enabled) {\n            // eslint-disable-next-line no-console\n            if (typeof window !== 'undefined' && window.console && typeof console.error === 'function') {\n                // eslint-disable-next-line no-console\n                console.error.apply(console, __spreadArray([this.id, this.getTime() + \"ms\"], args));\n            }\n            else {\n                this.info.apply(this, args);\n            }\n        }\n    };\n    Logger.instances = {};\n    return Logger;\n}());\n\nvar Context = /** @class */ (function () {\n    function Context(options, windowBounds) {\n        var _a;\n        this.windowBounds = windowBounds;\n        this.instanceName = \"#\" + Context.instanceCount++;\n        this.logger = new Logger({ id: this.instanceName, enabled: options.logging });\n        this.cache = (_a = options.cache) !== null && _a !== void 0 ? _a : new Cache(this, options);\n    }\n    Context.instanceCount = 1;\n    return Context;\n}());\n\nvar html2canvas = function (element, options) {\n    if (options === void 0) { options = {}; }\n    return renderElement(element, options);\n};\nif (typeof window !== 'undefined') {\n    CacheStorage.setContext(window);\n}\nvar renderElement = function (element, opts) { return __awaiter(void 0, void 0, void 0, function () {\n    var ownerDocument, defaultView, resourceOptions, contextOptions, windowOptions, windowBounds, context, foreignObjectRendering, cloneOptions, documentCloner, clonedElement, container, _a, width, height, left, top, backgroundColor, renderOptions, canvas, renderer, root, renderer;\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;\n    return __generator(this, function (_u) {\n        switch (_u.label) {\n            case 0:\n                if (!element || typeof element !== 'object') {\n                    return [2 /*return*/, Promise.reject('Invalid element provided as first argument')];\n                }\n                ownerDocument = element.ownerDocument;\n                if (!ownerDocument) {\n                    throw new Error(\"Element is not attached to a Document\");\n                }\n                defaultView = ownerDocument.defaultView;\n                if (!defaultView) {\n                    throw new Error(\"Document is not attached to a Window\");\n                }\n                resourceOptions = {\n                    allowTaint: (_b = opts.allowTaint) !== null && _b !== void 0 ? _b : false,\n                    imageTimeout: (_c = opts.imageTimeout) !== null && _c !== void 0 ? _c : 15000,\n                    proxy: opts.proxy,\n                    useCORS: (_d = opts.useCORS) !== null && _d !== void 0 ? _d : false\n                };\n                contextOptions = __assign({ logging: (_e = opts.logging) !== null && _e !== void 0 ? _e : true, cache: opts.cache }, resourceOptions);\n                windowOptions = {\n                    windowWidth: (_f = opts.windowWidth) !== null && _f !== void 0 ? _f : defaultView.innerWidth,\n                    windowHeight: (_g = opts.windowHeight) !== null && _g !== void 0 ? _g : defaultView.innerHeight,\n                    scrollX: (_h = opts.scrollX) !== null && _h !== void 0 ? _h : defaultView.pageXOffset,\n                    scrollY: (_j = opts.scrollY) !== null && _j !== void 0 ? _j : defaultView.pageYOffset\n                };\n                windowBounds = new Bounds(windowOptions.scrollX, windowOptions.scrollY, windowOptions.windowWidth, windowOptions.windowHeight);\n                context = new Context(contextOptions, windowBounds);\n                foreignObjectRendering = (_k = opts.foreignObjectRendering) !== null && _k !== void 0 ? _k : false;\n                cloneOptions = {\n                    allowTaint: (_l = opts.allowTaint) !== null && _l !== void 0 ? _l : false,\n                    onclone: opts.onclone,\n                    ignoreElements: opts.ignoreElements,\n                    inlineImages: foreignObjectRendering,\n                    copyStyles: foreignObjectRendering\n                };\n                context.logger.debug(\"Starting document clone with size \" + windowBounds.width + \"x\" + windowBounds.height + \" scrolled to \" + -windowBounds.left + \",\" + -windowBounds.top);\n                documentCloner = new DocumentCloner(context, element, cloneOptions);\n                clonedElement = documentCloner.clonedReferenceElement;\n                if (!clonedElement) {\n                    return [2 /*return*/, Promise.reject(\"Unable to find element in cloned iframe\")];\n                }\n                return [4 /*yield*/, documentCloner.toIFrame(ownerDocument, windowBounds)];\n            case 1:\n                container = _u.sent();\n                _a = isBodyElement(clonedElement) || isHTMLElement(clonedElement)\n                    ? parseDocumentSize(clonedElement.ownerDocument)\n                    : parseBounds(context, clonedElement), width = _a.width, height = _a.height, left = _a.left, top = _a.top;\n                backgroundColor = parseBackgroundColor(context, clonedElement, opts.backgroundColor);\n                renderOptions = {\n                    canvas: opts.canvas,\n                    backgroundColor: backgroundColor,\n                    scale: (_o = (_m = opts.scale) !== null && _m !== void 0 ? _m : defaultView.devicePixelRatio) !== null && _o !== void 0 ? _o : 1,\n                    x: ((_p = opts.x) !== null && _p !== void 0 ? _p : 0) + left,\n                    y: ((_q = opts.y) !== null && _q !== void 0 ? _q : 0) + top,\n                    width: (_r = opts.width) !== null && _r !== void 0 ? _r : Math.ceil(width),\n                    height: (_s = opts.height) !== null && _s !== void 0 ? _s : Math.ceil(height)\n                };\n                if (!foreignObjectRendering) return [3 /*break*/, 3];\n                context.logger.debug(\"Document cloned, using foreign object rendering\");\n                renderer = new ForeignObjectRenderer(context, renderOptions);\n                return [4 /*yield*/, renderer.render(clonedElement)];\n            case 2:\n                canvas = _u.sent();\n                return [3 /*break*/, 5];\n            case 3:\n                context.logger.debug(\"Document cloned, element located at \" + left + \",\" + top + \" with size \" + width + \"x\" + height + \" using computed rendering\");\n                context.logger.debug(\"Starting DOM parsing\");\n                root = parseTree(context, clonedElement);\n                if (backgroundColor === root.styles.backgroundColor) {\n                    root.styles.backgroundColor = COLORS.TRANSPARENT;\n                }\n                context.logger.debug(\"Starting renderer for element at \" + renderOptions.x + \",\" + renderOptions.y + \" with size \" + renderOptions.width + \"x\" + renderOptions.height);\n                renderer = new CanvasRenderer(context, renderOptions);\n                return [4 /*yield*/, renderer.render(root)];\n            case 4:\n                canvas = _u.sent();\n                _u.label = 5;\n            case 5:\n                if ((_t = opts.removeContainer) !== null && _t !== void 0 ? _t : true) {\n                    if (!DocumentCloner.destroy(container)) {\n                        context.logger.error(\"Cannot detach cloned iframe as it is not in the DOM anymore\");\n                    }\n                }\n                context.logger.debug(\"Finished rendering\");\n                return [2 /*return*/, canvas];\n        }\n    });\n}); };\nvar parseBackgroundColor = function (context, element, backgroundColorOverride) {\n    var ownerDocument = element.ownerDocument;\n    // http://www.w3.org/TR/css3-background/#special-backgrounds\n    var documentBackgroundColor = ownerDocument.documentElement\n        ? parseColor(context, getComputedStyle(ownerDocument.documentElement).backgroundColor)\n        : COLORS.TRANSPARENT;\n    var bodyBackgroundColor = ownerDocument.body\n        ? parseColor(context, getComputedStyle(ownerDocument.body).backgroundColor)\n        : COLORS.TRANSPARENT;\n    var defaultBackgroundColor = typeof backgroundColorOverride === 'string'\n        ? parseColor(context, backgroundColorOverride)\n        : backgroundColorOverride === null\n            ? COLORS.TRANSPARENT\n            : 0xffffffff;\n    return element === ownerDocument.documentElement\n        ? isTransparent(documentBackgroundColor)\n            ? isTransparent(bodyBackgroundColor)\n                ? defaultBackgroundColor\n                : bodyBackgroundColor\n            : documentBackgroundColor\n        : defaultBackgroundColor;\n};\n\nexport default html2canvas;\n//# sourceMappingURL=html2canvas.esm.js.map\n","import { reactive, ref } from \"vue\";\nimport {\n\tSMARTCOMMENTS_CLASSES,\n\tgetMediaWikiContentRoot,\n\tSCREENSHOT_CONFIG,\n} from \"../../utils/constants.js\";\nimport { findCurrentScreenshotTarget } from \"../../utils/screenshotTargetManager.js\";\nimport html2canvas from \"html2canvas\";\n\n/**\n * Composable for handling screenshot functionality.\n */\nfunction useScreenshot() {\n\tconst selectionPosition = reactive({ x: 0, y: 0 });\n\tconst startPosition = reactive({ x: 0, y: 0 });\n\tconst currentSelectionTextLength = ref(0);\n\n\t/**\n\t * Default onclone function for screenshots that handles SmartComments styling.\n\t * @param {Document} clonedDocument - The cloned document being processed for screenshot\n\t */\n\tfunction defaultOnClone(clonedDocument) {\n\t\tconst svgs = clonedDocument.getElementsByTagName(\"svg\");\n\t\tfor (let i = 0; i < svgs.length; i++) {\n\t\t\tconst svg = svgs[i];\n\t\t\tconst image = svg.getElementsByTagName(\"image\");\n\t\t\tfor (let j = 0; j < image.length; j++) {\n\t\t\t\tconst img = image[j];\n\t\t\t\t// Check if the xlink:href or href is an URL that's\n\t\t\t\t// a different domain than the current page, to prevent\n\t\t\t\t// CORS issues.\n\t\t\t\tconst href = img.getAttribute(\"xlink:href\") || img.getAttribute(\"href\");\n\t\t\t\tif (href && !href.startsWith(window.location.origin)) {\n\t\t\t\t\timg.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create a fixed-size canvas from the original screenshot\n\t * @param {HTMLCanvasElement} originalCanvas - Original screenshot canvas\n\t * @returns {HTMLCanvasElement} - Resized canvas with fixed dimensions\n\t */\n\tfunction createFixedSizeCanvas(originalCanvas) {\n\t\tconst fixedCanvas = document.createElement(\"canvas\");\n\t\tconst ctx = fixedCanvas.getContext(\"2d\");\n\n\t\t// Set fixed dimensions\n\t\tconst targetWidth = SCREENSHOT_CONFIG.FIXED_WIDTH;\n\t\tlet targetHeight = Math.min(\n\t\t\t(originalCanvas.height * targetWidth) / originalCanvas.width,\n\t\t\tSCREENSHOT_CONFIG.MAX_HEIGHT,\n\t\t);\n\n\t\t// Ensure minimum height\n\t\ttargetHeight = Math.max(targetHeight, SCREENSHOT_CONFIG.MIN_HEIGHT);\n\n\t\tfixedCanvas.width = targetWidth;\n\t\tfixedCanvas.height = targetHeight;\n\n\t\t// Fill with white background\n\t\tctx.fillStyle = \"#ffffff\";\n\t\tctx.fillRect(0, 0, targetWidth, targetHeight);\n\n\t\t// Calculate scaling to fit image within fixed dimensions while maintaining aspect ratio\n\t\tconst scaleX = targetWidth / originalCanvas.width;\n\t\tconst scaleY = targetHeight / originalCanvas.height;\n\t\tconst scale = Math.min(scaleX, scaleY);\n\n\t\tconst scaledWidth = originalCanvas.width * scale;\n\t\tconst scaledHeight = originalCanvas.height * scale;\n\n\t\t// Center the image in the canvas\n\t\tconst x = (targetWidth - scaledWidth) / 2;\n\t\tconst y = (targetHeight - scaledHeight) / 2;\n\n\t\t// Draw the scaled image\n\t\tctx.drawImage(originalCanvas, x, y, scaledWidth, scaledHeight);\n\n\t\treturn fixedCanvas;\n\t}\n\n\t/**\n\t * Generic screenshot utility function.\n\t * @param {string|Element} element - Element to screenshot or \"default\" (for mw-content-text).\n\t * @param {Object} options - html2canvas options.\n\t * @returns {Promise<string|null>} - Promise resolving to canvas data URL or null on error.\n\t */\n\tasync function takeScreenshot(element, options = {}) {\n\t\tconst targetElement =\n\t\t\telement === \"default\"\n\t\t\t\t? getMediaWikiContentRoot()\n\t\t\t\t: typeof element === \"string\"\n\t\t\t\t\t? document.querySelector(element)\n\t\t\t\t\t: element;\n\n\t\tif (!targetElement) {\n\t\t\tconsole.error(\"Screenshot target element not found:\", element);\n\t\t\treturn null;\n\t\t}\n\n\t\tif (typeof html2canvas === \"undefined\") {\n\t\t\tconsole.error(\"html2canvas library not available\");\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\t// Use default onclone if not provided in options\n\t\t\tconst finalOptions = {\n\t\t\t\tonclone: defaultOnClone,\n\t\t\t\t...options,\n\t\t\t};\n\n\t\t\tconst originalCanvas = await html2canvas(targetElement, finalOptions);\n\n\t\t\t// Create fixed-size canvas from the original\n\t\t\tconst fixedCanvas = createFixedSizeCanvas(originalCanvas);\n\t\t\tfixedCanvas.classList.add(SMARTCOMMENTS_CLASSES.CANVAS);\n\n\t\t\t// Get data URL from fixed-size canvas\n\t\t\tconst dataURL = fixedCanvas.toDataURL(\n\t\t\t\tSCREENSHOT_CONFIG.DEFAULT_FORMAT,\n\t\t\t\tSCREENSHOT_CONFIG.DEFAULT_QUALITY,\n\t\t\t);\n\n\t\t\t// Clean up canvases\n\t\t\toriginalCanvas.remove();\n\t\t\tfixedCanvas.remove();\n\n\t\t\treturn dataURL;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Screenshot failed:\", error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Takes a screenshot of the screenshot target element.\n\t * @returns {Promise<string|null>} - Promise resolving to canvas data URL or null.\n\t */\n\tasync function screenshotTargetElement() {\n\t\t// Find the element with sc-screenshot-target class\n\t\tconst targetElement = findCurrentScreenshotTarget();\n\n\t\tif (!targetElement) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn takeScreenshot(targetElement);\n\t}\n\n\t/**\n\t * Takes a screenshot of the current selection area.\n\t * Adapts dimensions and scale based on selection.\n\t * @param {Object} currentSelPos - current selection's end position {x, y}\n\t * @param {Object} currentStartPos - current selection's start position {x, y}\n\t * @returns {Promise<string|null>} - Promise resolving to canvas data URL or null.\n\t */\n\tasync function screenshotSelectionArea(currentSelPos, currentStartPos) {\n\t\t// First try to use the screenshot target element\n\t\tconst targetScreenshot = await screenshotTargetElement();\n\t\tif (targetScreenshot) {\n\t\t\treturn targetScreenshot;\n\t\t}\n\n\t\t// Fallback to position-based screenshot if no target element found\n\t\tconst minMaxWidth = 500;\n\t\tconst minMaxHeight = 50;\n\n\t\tlet width = currentSelPos.x - currentStartPos.x;\n\t\tlet height = currentSelPos.y - currentStartPos.y;\n\n\t\t// Ensure minimum/maximum dimensions for the screenshot viewport\n\t\twidth = Math.max(minMaxWidth, Math.min(width, minMaxWidth));\n\t\theight = Math.max(minMaxHeight, Math.min(height, minMaxHeight));\n\n\t\t// Calculate center position of the selection\n\t\tconst x = currentSelPos.x - (currentSelPos.x - currentStartPos.x) / 2;\n\t\tconst y = currentSelPos.y - (currentSelPos.y - currentStartPos.y) / 2;\n\n\t\tconst screenshotOptions = {\n\t\t\tx: x - width / 2,\n\t\t\ty: y - height / 2,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tscale: 1,\n\t\t\tonclone: defaultOnClone,\n\t\t};\n\n\t\treturn takeScreenshot(document.body, screenshotOptions);\n\t}\n\n\t// Expose methods\n\treturn {\n\t\ttakeScreenshot,\n\t\tscreenshotSelectionArea,\n\t\tscreenshotTargetElement,\n\t\tselectionPosition,\n\t\tstartPosition,\n\t\tcurrentSelectionTextLength,\n\t};\n}\n\nexport default useScreenshot;\n","/**\n * Base class for selection strategies\n * Implements common functionality and defines interface for all selection types\n */\nimport {selectionErrorHandler} from \"../composables/selection/shared/SelectionErrorHandler.js\";\nimport useSelectionScreenshot from \"../composables/features/useSelectionScreenshot.js\";\nimport {isSelectionEnabled} from \"../composables/selection/shared/SelectionUtils.js\";\nimport {SELECTION_LIMITS} from \"../composables/selection/shared/SelectionConstants.js\";\n\nclass BaseSelectionStrategy {\n\tconstructor( selectionType ) {\n\t\tthis.selectionType = selectionType;\n\t\tthis.screenshot = useSelectionScreenshot();\n\t\tthis.errorHandler = selectionErrorHandler;\n\t}\n\n\t/**\n\t * Process selection - must be implemented by subclasses\n\t * @param {*} target - Selection target (element, range, etc.)\n\t * @param {Event} event - Mouse/interaction event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result or null\n\t */\n\tasync processSelection( target, event, options = {} ) {\n\t\tthrow new Error(\n\t\t\t`processSelection must be implemented by ${this.constructor.name}`,\n\t\t);\n\t}\n\n\t/**\n\t * Validate selection target - can be overridden by subclasses\n\t * @param {*} target - Selection target\n\t * @returns {boolean} - Whether target is valid\n\t */\n\tvalidateTarget( target ) {\n\t\treturn target != null;\n\t}\n\n\t/**\n\t * Pre-process checks common to all selection types\n\t * @param {*} target - Selection target\n\t * @param {Event} event - Interaction event\n\t * @param {Object} options - Processing options\n\t * @returns {boolean} - Whether to continue processing\n\t */\n\tasync preProcess( target, event, options ) {\n\t\t// Check if selection is enabled\n\t\tif ( !isSelectionEnabled() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Validate target\n\t\tif ( !this.validateTarget( target ) ) {\n\t\t\tthis.errorHandler.handleSelectionError(\n\t\t\t\tthis.selectionType,\n\t\t\t\tnew Error( \"Invalid selection target\" ),\n\t\t\t\t{target, event},\n\t\t\t);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Post-process selection data - common to all types\n\t * @param {Object} selectionData - Raw selection data\n\t * @param {*} target - Original selection target\n\t * @param {Event} event - Original event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object>} - Enhanced selection data\n\t */\n\tasync postProcess( selectionData, target, event, options ) {\n\t\tif ( !selectionData ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Add common metadata\n\t\tselectionData.type = this.selectionType;\n\t\tselectionData.timestamp = Date.now();\n\t\tselectionData.index = selectionData.index ?? -1;\n\n\t\t// Handle screenshot if requested\n\t\tif ( options.captureScreenshot && !selectionData.image ) {\n\t\t\tdocument.body.classList.add( \"smartcomments-creating-screenshot\" );\n\t\t\ttry {\n\t\t\t\tconst element = target?.getBoundingClientRect ? target : null;\n\t\t\t\tselectionData.image = await this.screenshot.captureSelectionScreenshot(\n\t\t\t\t\telement,\n\t\t\t\t\tnull,\n\t\t\t\t\tevent,\n\t\t\t\t);\n\t\t\t} catch ( error ) {\n\t\t\t\tthis.errorHandler.handleScreenshotError(\n\t\t\t\t\tthis.selectionType,\n\t\t\t\t\terror,\n\t\t\t\t\tselectionData,\n\t\t\t\t);\n\t\t\t}\n\t\t\tdocument.body.classList.remove( \"smartcomments-creating-screenshot\" );\n\t\t}\n\n\t\t// Validate final selection data\n\t\tif ( !this.validateSelectionData( selectionData ) ) {\n\t\t\tthrow this.errorHandler.createContextualError(\n\t\t\t\t\"Selection data validation failed\",\n\t\t\t\tthis.selectionType,\n\t\t\t\t{selectionData, target},\n\t\t\t);\n\t\t}\n\n\t\treturn selectionData;\n\t}\n\n\t/**\n\t * Validate final selection data\n\t * @param {Object} selectionData - Selection data to validate\n\t * @returns {boolean} - Whether data is valid\n\t */\n\tvalidateSelectionData( selectionData ) {\n\t\tif ( !selectionData || typeof selectionData !== \"object\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check required fields\n\t\tif ( !selectionData.text || selectionData.text.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check text length limits\n\t\tif ( selectionData.text.length > SELECTION_LIMITS.MAX_TEXT_LENGTH ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check type consistency\n\t\tif ( selectionData.type !== this.selectionType ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Create base selection data structure\n\t * @param {string} text - Selection text\n\t * @param {*} element - Associated element\n\t * @param {number} index - Selection index\n\t * @returns {Object} - Base selection data\n\t */\n\tcreateBaseSelectionData( text, element = null, index = -1 ) {\n\t\treturn {\n\t\t\ttext: this.sanitizeText( text ),\n\t\t\tindex,\n\t\t\ttype: this.selectionType,\n\t\t\telement,\n\t\t\ttimestamp: Date.now(),\n\t\t\timage: null,\n\t\t};\n\t}\n\n\t/**\n\t * Sanitize text content to prevent XSS\n\t * @param {string} text - Raw text\n\t * @returns {string} - Sanitized text\n\t */\n\tsanitizeText( text ) {\n\t\tif ( typeof text !== \"string\" ) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\t// Basic HTML sanitization - remove script tags and dangerous attributes\n\t\treturn text\n\t\t\t.replace( /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, \"\" )\n\t\t\t.replace( /javascript:/gi, \"\" )\n\t\t\t.replace( /on\\w+\\s*=/gi, \"\" )\n\t\t\t.trim();\n\t}\n\n\t/**\n\t * Get selection type\n\t * @returns {string} - Selection type\n\t */\n\tgetType() {\n\t\treturn this.selectionType;\n\t}\n\n\t/**\n\t * Get strategy name\n\t * @returns {string} - Strategy name\n\t */\n\tgetName() {\n\t\treturn this.constructor.name;\n\t}\n}\n\nexport default BaseSelectionStrategy;\n","/**\n * Composable for handling selection screenshots\n * Provides functionality to capture and process screenshots of selected content\n */\nimport useScreenshot from \"./useScreenshot.js\";\n\nfunction useSelectionScreenshot() {\n\tconst {screenshotSelectionArea, screenshotTargetElement} = useScreenshot();\n\n\t/**\n\t * Capture screenshot of selected content\n\t * @param {Element} element - Element to capture (unused, kept for compatibility)\n\t * @param {Object} options - Screenshot options (unused, kept for compatibility)\n\t * @param {Event} event - Mouse event (used as fallback if no target element)\n\t * @returns {Promise<string>} - Base64 encoded screenshot\n\t */\n\tconst captureSelectionScreenshot = async ( element, options = {}, event ) => {\n\t\ttry {\n\t\t\t// First try to screenshot the target element directly\n\t\t\tconst targetScreenshot = await screenshotTargetElement();\n\t\t\tif ( targetScreenshot ) {\n\t\t\t\treturn targetScreenshot;\n\t\t\t}\n\n\t\t\t// Fallback to position-based screenshot if no target element found\n\t\t\tconst pos = {\n\t\t\t\tx: event?.clientX || 0,\n\t\t\t\ty: event?.clientY || 0,\n\t\t\t};\n\t\t\treturn await screenshotSelectionArea( pos, pos );\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to capture selection screenshot:\", error );\n\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn {\n\t\tcaptureSelectionScreenshot,\n\t};\n}\n\nexport default useSelectionScreenshot;\n","/**\n * Text Selection Strategy\n * Handles text-based selections with enhanced security and performance\n */\nimport BaseSelectionStrategy from \"./BaseSelectionStrategy.js\";\nimport {\n\tinitializeRangy,\n\tvalidateSelectionContent,\n} from \"../composables/selection/shared/SelectionUtils.js\";\nimport {\n\tSELECTION_ENUMS,\n\tgetMediaWikiContentRoot,\n} from \"../utils/constants.js\";\nimport {\n\tSELECTION_TIMEOUTS,\n\tSELECTION_LIMITS,\n\tSELECTION_PATTERNS,\n\tSELECTION_CLASSES,\n} from \"../composables/selection/shared/SelectionConstants.js\";\nimport {\n\tmanuallyAddParentTarget,\n\tmanuallyRemoveParentTarget,\n} from \"../utils/screenshotTargetManager.js\";\n\nclass TextSelectionStrategy extends BaseSelectionStrategy {\n\tconstructor() {\n\t\tsuper( \"text\" );\n\t\tthis.rangyInitialized = false;\n\t\tthis.highlighter = null;\n\t}\n\n\t/**\n\t * Validate text selection target (rangy selection/range)\n\t * @param {*} target - Rangy selection or range\n\t * @returns {boolean} - Whether target is valid\n\t */\n\tvalidateTarget( target ) {\n\t\tif ( !target ) return false;\n\n\t\t// Check if target is a rangy range or selection\n\t\tif ( target.rangeCount !== undefined ) {\n\t\t\t// It's a selection object\n\t\t\treturn target.rangeCount > 0 && !target.isCollapsed;\n\t\t}\n\n\t\t// Check if target is a range object\n\t\tif ( target.toString && target.toHtml ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Process text selection\n\t * @param {Range|Selection} target - Rangy range or selection\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync processSelection( target, event, options = {} ) {\n\t\tif ( !( await this.preProcess( target, event, options ) ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\t// Ensure rangy is initialized\n\t\t\tif ( !this.ensureRangyInitialized() ) {\n\t\t\t\tthrow new Error( \"Rangy library not available\" );\n\t\t\t}\n\n\t\t\t// Get the range from selection if needed\n\t\t\tconst range =\n\t\t\t\ttarget.rangeCount !== undefined ? target.getRangeAt( 0 ) : target;\n\n\t\t\t// Validate selection content\n\t\t\tconst validationResult = validateSelectionContent( range );\n\t\t\tif (\n\t\t\t\t!this.errorHandler.handleValidationError(\n\t\t\t\t\tvalidationResult,\n\t\t\t\t\tthis.selectionType,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Extract text and index safely\n\t\t\tconst selectionData = await this.extractTextAndIndex( range );\n\n\t\t\t// Add element reference for parent comment detection\n\t\t\tselectionData.element = this.getSelectionElement( range );\n\n\t\t\treturn await this.postProcess( selectionData, range, event, options );\n\t\t} catch ( error ) {\n\t\t\tthis.errorHandler.handleSelectionError( this.selectionType, error, {\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\toptions,\n\t\t\t} );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Prepare screenshot parameters for text selections\n\t * @param {Range} target - Selection range\n\t * @param {Event} event - Mouse event\n\t * @param {Object} selectionData - Selection data\n\t * @returns {Object} - Screenshot parameters\n\t */\n\tprepareScreenshotParams( target, event, selectionData ) {\n\t\t// Apply temporary highlight for screenshot\n\t\tthis.applyTemporaryHighlight( target );\n\n\t\t// Calculate position from range\n\t\tconst rect = target.getBoundingClientRect\n\t\t\t? target.getBoundingClientRect()\n\t\t\t: this.getRangeRect( target );\n\n\t\treturn {\n\t\t\tselectionPosition: {\n\t\t\t\tx: event?.clientX || rect.right,\n\t\t\t\ty: event?.clientY || rect.bottom,\n\t\t\t},\n\t\t\tstartPosition: {\n\t\t\t\tx: rect.left,\n\t\t\t\ty: rect.top,\n\t\t\t},\n\t\t\ttext: selectionData.text,\n\t\t\tcleanupCallback: () => this.clearTemporaryHighlight(),\n\t\t};\n\t}\n\n\t/**\n\t * Enhanced post-processing for text selections\n\t * @param {Object} selectionData - Raw selection data\n\t * @param {Range} target - Original range\n\t * @param {Event} event - Original event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object>} - Enhanced selection data\n\t */\n\tasync postProcess( selectionData, target, event, options ) {\n\t\tlet highlightApplied = false;\n\t\tlet highlightElement = null;\n\n\t\ttry {\n\t\t\t// Apply temporary highlight before screenshot if needed\n\t\t\tif ( options.captureScreenshot ) {\n\t\t\t\thighlightElement = this.applyTemporaryHighlight( target );\n\t\t\t\thighlightApplied = true;\n\n\t\t\t\t// Add small delay to ensure highlighting is rendered\n\t\t\t\tawait new Promise( ( resolve ) => setTimeout( resolve, 50 ) );\n\n\t\t\t\t// Use the highlight element as the screenshot target\n\t\t\t\tif ( highlightElement ) {\n\t\t\t\t\tselectionData.element = highlightElement;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst result = await super.postProcess(\n\t\t\t\tselectionData,\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\toptions,\n\t\t\t);\n\t\t\treturn result;\n\t\t} finally {\n\t\t\t// Always clean up highlight if it was applied\n\t\t\tif ( highlightApplied ) {\n\t\t\t\t// Add small delay before cleanup to ensure screenshot is complete\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tthis.clearTemporaryHighlight();\n\t\t\t\t}, 100 );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Extract text content and find its index safely\n\t * @param {Range} range - Selection range\n\t * @returns {Promise<Object>} - Text and index data\n\t */\n\tasync extractTextAndIndex( range ) {\n\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\ttry {\n\t\t\t\tconst baseEl = getMediaWikiContentRoot();\n\t\t\t\tif ( !baseEl ) {\n\t\t\t\t\treject( new Error( \"MediaWiki content root not found\" ) );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst selectionPos = rangy.serializeRange( range );\n\t\t\t\tconst searchText = this.sanitizeText( range.toString() );\n\t\t\t\tconst searchHtml = range.toHtml();\n\n\t\t\t\t// Validate content length\n\t\t\t\tif ( searchText.length > SELECTION_LIMITS.MAX_TEXT_LENGTH ) {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error( `Selection too long: ${searchText.length} characters` ),\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( !searchText && !searchHtml ) {\n\t\t\t\t\treject( new Error( \"Selection is empty\" ) );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Choose search method based on content\n\t\t\t\tif ( SELECTION_PATTERNS.HTML_TAG_REGEX.test( searchHtml ) ) {\n\t\t\t\t\tthis.searchHTMLContent(\n\t\t\t\t\t\tbaseEl,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tsearchText,\n\t\t\t\t\t\tsearchHtml,\n\t\t\t\t\t\tresolve,\n\t\t\t\t\t\treject,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.searchPlainText(\n\t\t\t\t\t\tbaseEl,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tsearchText,\n\t\t\t\t\t\tselectionPos,\n\t\t\t\t\t\tresolve,\n\t\t\t\t\t\treject,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\treject( error );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Search for plain text content\n\t * @param {Element} baseEl - Search base element\n\t * @param {Range} range - Original range\n\t * @param {string} searchText - Text to search for\n\t * @param {string} selectionPos - Serialized range position\n\t * @param {Function} resolve - Promise resolve\n\t * @param {Function} reject - Promise reject\n\t */\n\tsearchPlainText( baseEl, range, searchText, selectionPos, resolve, reject ) {\n\t\tconst searchRange = rangy.createRange();\n\t\tsearchRange.selectNodeContents( baseEl );\n\n\t\tconst findOptions = {\n\t\t\tcaseSensitive: true,\n\t\t\twithinRange: searchRange,\n\t\t};\n\n\t\t// Check if text exists at all\n\t\tconst testRange = rangy.createRange();\n\t\ttestRange.selectNodeContents( baseEl );\n\t\tif ( !testRange.findText( searchText, findOptions ) ) {\n\t\t\treject( new Error( `Text \"${searchText}\" not found in content` ) );\n\t\t\treturn;\n\t\t}\n\n\t\t// Find the exact occurrence\n\t\tthis.findTextOccurrence(\n\t\t\tbaseEl,\n\t\t\tsearchText,\n\t\t\tselectionPos,\n\t\t\t0,\n\t\t\tresolve,\n\t\t\treject,\n\t\t);\n\t}\n\n\t/**\n\t * Search for HTML content safely\n\t * @param {Element} baseEl - Search base element\n\t * @param {Range} range - Original range\n\t * @param {string} searchText - Plain text version\n\t * @param {string} searchHtml - HTML version\n\t * @param {Function} resolve - Promise resolve\n\t * @param {Function} reject - Promise reject\n\t */\n\tsearchHTMLContent( baseEl, range, searchText, searchHtml, resolve, reject ) {\n\t\t// For HTML content, use a safer approach with DOM walker\n\t\tconst walker = document.createTreeWalker(\n\t\t\tbaseEl,\n\t\t\tNodeFilter.SHOW_TEXT,\n\t\t\tnull,\n\t\t\tfalse,\n\t\t);\n\n\t\tlet currentNode;\n\t\tlet foundOccurrences = 0;\n\t\tlet searchIndex = 0;\n\t\tconst targetText = searchText;\n\n\t\twhile ( ( currentNode = walker.nextNode() ) ) {\n\t\t\tconst nodeText = currentNode.textContent;\n\n\t\t\tfor ( let i = 0; i < nodeText.length; i++ ) {\n\t\t\t\tif ( nodeText[ i ] === targetText[ searchIndex ] ) {\n\t\t\t\t\tsearchIndex++;\n\t\t\t\t\tif ( searchIndex === targetText.length ) {\n\t\t\t\t\t\t// Found complete match, check if it's our target\n\t\t\t\t\t\tif ( this.isTargetMatch( currentNode, range ) ) {\n\t\t\t\t\t\t\tresolve( {\n\t\t\t\t\t\t\t\ttext: this.sanitizeText( searchHtml ),\n\t\t\t\t\t\t\t\tindex: foundOccurrences,\n\t\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfoundOccurrences++;\n\t\t\t\t\t\tsearchIndex = 0;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsearchIndex = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treject( new Error( \"HTML selection not found at specified position\" ) );\n\t}\n\n\t/**\n\t * Find specific text occurrence with async processing\n\t * @param {Element} baseEl - Search base\n\t * @param {string} searchText - Text to find\n\t * @param {string} targetPos - Target position\n\t * @param {number} occurrenceIndex - Current occurrence count\n\t * @param {Function} resolve - Promise resolve\n\t * @param {Function} reject - Promise reject\n\t */\n\tfindTextOccurrence(\n\t\tbaseEl,\n\t\tsearchText,\n\t\ttargetPos,\n\t\toccurrenceIndex,\n\t\tresolve,\n\t\treject,\n\t) {\n\t\tconst range = rangy.createRange();\n\t\tconst searchRange = rangy.createRange();\n\t\tsearchRange.selectNodeContents( baseEl );\n\n\t\tconst findOptions = {\n\t\t\tcaseSensitive: true,\n\t\t\twithinRange: searchRange,\n\t\t};\n\n\t\t// Use requestAnimationFrame for non-blocking search\n\t\tconst searchStep = () => {\n\t\t\tif ( occurrenceIndex > SELECTION_LIMITS.MAX_SEARCH_ITERATIONS ) {\n\t\t\t\treject( new Error( \"Search iteration limit exceeded\" ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif ( range.findText( searchText, findOptions ) ) {\n\t\t\t\t\tif ( rangy.serializeRange( range ) === targetPos ) {\n\t\t\t\t\t\tresolve( {\n\t\t\t\t\t\t\ttext: searchText,\n\t\t\t\t\t\t\tindex: occurrenceIndex,\n\t\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\t} );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Move to next occurrence\n\t\t\t\t\trange.collapse( false );\n\t\t\t\t\toccurrenceIndex++;\n\t\t\t\t\trequestAnimationFrame( searchStep );\n\t\t\t\t} else {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t`Text not found at position after ${occurrenceIndex} occurrences`,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\treject( error );\n\t\t\t}\n\t\t};\n\n\t\tsearchStep();\n\t}\n\n\t/**\n\t * Check if a text node match corresponds to our target range\n\t * @param {Node} textNode - Text node that matched\n\t * @param {Range} targetRange - Original selection range\n\t * @returns {boolean} - Whether this is the target match\n\t */\n\tisTargetMatch( textNode, targetRange ) {\n\t\treturn (\n\t\t\ttextNode.parentNode.contains( targetRange.endContainer ) &&\n\t\t\ttextNode.parentNode.contains( targetRange.startContainer )\n\t\t);\n\t}\n\n\t/**\n\t * Get element associated with selection range\n\t * @param {Range} range - Selection range\n\t * @returns {Element} - Associated element\n\t */\n\tgetSelectionElement( range ) {\n\t\tif ( range.startContainer.nodeType === Node.ELEMENT_NODE ) {\n\t\t\treturn range.startContainer;\n\t\t}\n\t\treturn (\n\t\t\trange.startContainer.parentElement || range.startContainer.parentNode\n\t\t);\n\t}\n\n\t/**\n\t * Get bounding rectangle for range\n\t * @param {Range} range - Range object\n\t * @returns {DOMRect} - Bounding rectangle\n\t */\n\tgetRangeRect( range ) {\n\t\ttry {\n\t\t\treturn range.getBoundingClientRect();\n\t\t} catch ( error ) {\n\t\t\t// Fallback for ranges without getBoundingClientRect\n\t\t\tconst element = this.getSelectionElement( range );\n\t\t\treturn element\n\t\t\t\t? element.getBoundingClientRect()\n\t\t\t\t: {left: 0, top: 0, right: 0, bottom: 0};\n\t\t}\n\t}\n\n\t/**\n\t * Apply temporary highlight for screenshot\n\t * @param {Range} range - Range to highlight\n\t */\n\tapplyTemporaryHighlight( range ) {\n\t\ttry {\n\t\t\t// Create a simple span element with highlight styling\n\t\t\tconst span = document.createElement( \"span\" );\n\t\t\tspan.className = SELECTION_CLASSES.TEMP_HIGHLIGHT;\n\t\t\tspan.style.backgroundColor = \"#ffffe0\"; // Light yellow background\n\t\t\tspan.style.borderTop = \"1px solid rgba(0,0,0,0.2)\";\n\t\t\tspan.style.borderBottom = \"1px solid rgba(0,0,0,0.2)\";\n\n\t\t\t// Surround the range contents with the highlight span\n\t\t\tif ( range.canSurroundContents() ) {\n\t\t\t\trange.surroundContents( span );\n\t\t\t\t// Add parent screenshot target class\n\t\t\t\tmanuallyAddParentTarget( span );\n\t\t\t\treturn span;\n\t\t\t} else {\n\t\t\t\t// Fallback for complex selections\n\t\t\t\tconst contents = range.extractContents();\n\t\t\t\tspan.appendChild( contents );\n\t\t\t\trange.insertNode( span );\n\t\t\t\t// Add parent screenshot target class\n\t\t\t\tmanuallyAddParentTarget( span );\n\t\t\t\treturn span;\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tconsole.warn( \"Failed to apply temporary highlight:\", error );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Clear temporary highlight\n\t */\n\tclearTemporaryHighlight() {\n\t\ttry {\n\t\t\t// Remove all temporary highlight elements\n\t\t\tconst tempHighlights = document.querySelectorAll(\n\t\t\t\t`.${SELECTION_CLASSES.TEMP_HIGHLIGHT}`,\n\t\t\t);\n\t\t\ttempHighlights.forEach( ( element ) => {\n\t\t\t\t// Remove parent screenshot target class before removing element\n\t\t\t\tmanuallyRemoveParentTarget( element );\n\n\t\t\t\t// Replace the highlighted element with its text content\n\t\t\t\tconst parent = element.parentNode;\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild(\n\t\t\t\t\t\tdocument.createTextNode( element.textContent ),\n\t\t\t\t\t\telement,\n\t\t\t\t\t);\n\t\t\t\t\tparent.normalize(); // Merge adjacent text nodes\n\t\t\t\t}\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\tconsole.warn( \"Failed to clear temporary highlight:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Ensure rangy library is initialized\n\t * @returns {boolean} - Whether rangy is available\n\t */\n\tensureRangyInitialized() {\n\t\tif ( !this.rangyInitialized ) {\n\t\t\tthis.rangyInitialized = initializeRangy();\n\t\t\t// We don't need the complex highlighter for temporary highlighting\n\t\t\t// Simple DOM manipulation will work better for screenshots\n\t\t}\n\t\treturn this.rangyInitialized;\n\t}\n}\n\nexport {TextSelectionStrategy};\n","/**\n * Image Selection Strategy\n * Handles image-based selections with enhanced validation and processing\n */\nimport BaseSelectionStrategy from \"./BaseSelectionStrategy.js\";\nimport {\n\tvalidateSelectionContent,\n\tcreateImageHash,\n} from \"../composables/selection/shared/SelectionUtils.js\";\nimport {\n\tSELECTION_ENUMS,\n\tgetMediaWikiContentRoot,\n} from \"../utils/constants.js\";\nimport {\n\tSELECTION_CLASSES,\n\tSELECTION_PATTERNS,\n} from \"../composables/selection/shared/SelectionConstants.js\";\n\nclass ImageSelectionStrategy extends BaseSelectionStrategy {\n\tconstructor() {\n\t\tsuper( \"image\" );\n\t\tthis.setupCompleted = false;\n\t}\n\n\t/**\n\t * Validate image selection target\n\t * @param {Element} target - Image element\n\t * @returns {boolean} - Whether target is valid image\n\t */\n\tvalidateTarget( target ) {\n\t\tif ( !target || target.nodeType !== Node.ELEMENT_NODE ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if it's an IMG element\n\t\tif ( target.tagName === \"IMG\" ) {\n\t\t\treturn this.isValidImageElement( target );\n\t\t}\n\n\t\t// Check if target contains an image\n\t\tconst img = target.querySelector( \"img\" );\n\t\treturn img && this.isValidImageElement( img );\n\t}\n\n\t/**\n\t * Check if image element is valid for selection\n\t * @param {Element} imgElement - Image element to validate\n\t * @returns {boolean} - Whether image is valid\n\t */\n\tisValidImageElement( imgElement ) {\n\t\t// Must have a source\n\t\tif ( !imgElement.src ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Skip images inside comment components\n\t\tif (\n\t\t\timgElement.closest( `.${SELECTION_CLASSES.COMMENT_VIEW}` ) ||\n\t\t\timgElement.closest( `.${SELECTION_CLASSES.COMMENT_COMPONENT}` )\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Skip images that are already wrapped in dynamic blocks (unless clicking the wrapper)\n\t\tconst dynamicBlockParent = imgElement.closest(\n\t\t\t`.${SELECTION_CLASSES.DYNAMIC_BLOCK}`,\n\t\t);\n\t\tif ( dynamicBlockParent && dynamicBlockParent !== imgElement.parentElement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Process image selection\n\t * @param {Element} target - Image element or container\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync processSelection( target, event, options = {} ) {\n\t\tif ( !( await this.preProcess( target, event, options ) ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\t// Get the actual image element\n\t\t\tconst imgElement =\n\t\t\t\ttarget.tagName === \"IMG\" ? target : target.querySelector( \"img\" );\n\n\t\t\tif ( !imgElement ) {\n\t\t\t\tthrow new Error( \"No image element found in target\" );\n\t\t\t}\n\n\t\t\t// Validate image element specifically\n\t\t\tif ( !this.isValidImageElement( imgElement ) ) {\n\t\t\t\tthrow new Error( \"Invalid image element for selection\" );\n\t\t\t}\n\n\t\t\t// Validate selection content (allows linebreaks for outerHTML)\n\t\t\tconst validationResult = validateSelectionContent( imgElement.outerHTML );\n\t\t\tif (\n\t\t\t\tvalidationResult !== SELECTION_ENUMS.SELECTION_VALID &&\n\t\t\t\tvalidationResult !==\n\t\t\t\tSELECTION_ENUMS.INVALID_SELECTION_CONTAINS_LINEBREAKS\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\t!this.errorHandler.handleValidationError(\n\t\t\t\t\t\tvalidationResult,\n\t\t\t\t\t\tthis.selectionType,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create selection data\n\t\t\tconst selectionData = this.createImageSelectionData( imgElement );\n\n\t\t\treturn await this.postProcess( selectionData, imgElement, event, options );\n\t\t} catch ( error ) {\n\t\t\tthis.errorHandler.handleSelectionError( this.selectionType, error, {\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\toptions,\n\t\t\t} );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Create image selection data structure\n\t * @param {Element} imgElement - Image element\n\t * @returns {Object} - Image selection data\n\t */\n\tcreateImageSelectionData( imgElement ) {\n\t\tconst imageHash = createImageHash(\n\t\t\timgElement.src,\n\t\t\timgElement.width,\n\t\t\timgElement.height,\n\t\t);\n\n\t\t// Create descriptive text for the selection\n\t\tconst altText = imgElement.alt || \"\";\n\t\tconst title = imgElement.title || \"\";\n\t\tconst filename = this.extractFilename( imgElement.src );\n\n\t\tlet selectionText = altText || title || `Image: ${filename}`;\n\t\tif ( imageHash ) {\n\t\t\tselectionText = altText || `Image: ${imageHash}`;\n\t\t}\n\n\t\treturn this.createBaseSelectionData( selectionText, imgElement, -1, {\n\t\t\timageHash,\n\t\t\tsrc: imgElement.src,\n\t\t\twidth: imgElement.width,\n\t\t\theight: imgElement.height,\n\t\t\talt: altText,\n\t\t\ttitle: title,\n\t\t\tfilename: filename,\n\t\t} );\n\t}\n\n\t/**\n\t * Create base selection data with additional image metadata\n\t * @param {string} text - Selection text\n\t * @param {Element} element - Image element\n\t * @param {number} index - Selection index\n\t * @param {Object} imageData - Additional image data\n\t * @returns {Object} - Enhanced selection data\n\t */\n\tcreateBaseSelectionData( text, element, index, imageData = {} ) {\n\t\tconst baseData = super.createBaseSelectionData( text, element, index );\n\n\t\treturn {\n\t\t\t...baseData,\n\t\t\timageHash: imageData.imageHash,\n\t\t\tsrc: imageData.src,\n\t\t\tmetadata: {\n\t\t\t\twidth: imageData.width,\n\t\t\t\theight: imageData.height,\n\t\t\t\talt: imageData.alt,\n\t\t\t\ttitle: imageData.title,\n\t\t\t\tfilename: imageData.filename,\n\t\t\t\taspectRatio:\n\t\t\t\t\timageData.width && imageData.height\n\t\t\t\t\t\t? ( imageData.width / imageData.height ).toFixed( 2 )\n\t\t\t\t\t\t: null,\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Extract filename from image source URL\n\t * @param {string} src - Image source URL\n\t * @returns {string} - Extracted filename\n\t */\n\textractFilename( src ) {\n\t\ttry {\n\t\t\tconst url = new URL( src );\n\t\t\tconst pathname = url.pathname;\n\t\t\tconst filename = pathname.split( \"/\" ).pop();\n\t\t\treturn filename || \"unknown\";\n\t\t} catch ( error ) {\n\t\t\treturn \"unknown\";\n\t\t}\n\t}\n\n\t/**\n\t * Setup image wrappers for selection (like the old ImageSelection.bindEvents)\n\t * Creates dynamic block wrappers around images for consistent handling\n\t */\n\tsetupImageSelection() {\n\t\tif ( this.setupCompleted ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst contentRoot = getMediaWikiContentRoot();\n\t\t\tif ( !contentRoot ) {\n\t\t\t\tconsole.error( \"Cannot setup image selection: content root not found.\" );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst images = contentRoot.querySelectorAll( \"img\" );\n\t\t\tlet wrappedCount = 0;\n\n\t\t\timages.forEach( ( img ) => {\n\t\t\t\tif ( this.shouldWrapImage( img ) ) {\n\t\t\t\t\tthis.wrapImageInDynamicBlock( img );\n\t\t\t\t\twrappedCount++;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.setupCompleted = true;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Error during image selection setup:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Check if image should be wrapped in dynamic block\n\t * @param {Element} img - Image element\n\t * @returns {boolean} - Whether to wrap the image\n\t */\n\tshouldWrapImage( img ) {\n\t\t// Skip if already wrapped\n\t\tif (\n\t\t\timg.parentElement &&\n\t\t\timg.parentElement.classList.contains( SELECTION_CLASSES.DYNAMIC_BLOCK )\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Skip images inside comment components\n\t\tif (\n\t\t\timg.closest( `.${SELECTION_CLASSES.COMMENT_VIEW}` ) ||\n\t\t\timg.closest( `.${SELECTION_CLASSES.COMMENT_COMPONENT}` )\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Must have a src\n\t\tif ( !img.src ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Wrap image in dynamic block wrapper\n\t * @param {Element} img - Image element to wrap\n\t */\n\twrapImageInDynamicBlock( img ) {\n\t\ttry {\n\t\t\tconst hash = createImageHash( img.src, img.width, img.height );\n\t\t\tconst wrapper = document.createElement( \"div\" );\n\n\t\t\twrapper.className =\n\t\t\t\tSELECTION_CLASSES.DYNAMIC_BLOCK + \" \" + SELECTION_CLASSES.IMAGE_BLOCK;\n\t\t\twrapper.dataset.hash = `${SELECTION_PATTERNS.IMAGE_POSITION_PREFIX}${hash}]`;\n\t\t\twrapper.dataset.type = \"image\";\n\n\t\t\t// Add accessibility attributes\n\t\t\tif ( img.alt ) {\n\t\t\t\twrapper.setAttribute( \"aria-label\", `Image: ${img.alt}` );\n\t\t\t}\n\n\t\t\tif ( img.parentNode ) {\n\t\t\t\timg.parentNode.insertBefore( wrapper, img );\n\t\t\t\twrapper.appendChild( img );\n\t\t\t} else {\n\t\t\t\tconsole.warn( \"Image has no parentNode, cannot wrap:\", img );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Error wrapping image:\", error, img );\n\t\t}\n\t}\n\n\t/**\n\t * Prepare screenshot parameters for image selections\n\t * @param {Element} target - Image element\n\t * @param {Event} event - Mouse event\n\t * @param {Object} selectionData - Selection data\n\t * @returns {Object} - Screenshot parameters\n\t */\n\tprepareScreenshotParams( target, event, selectionData ) {\n\t\treturn {\n\t\t\telement: target,\n\t\t\tselectionPosition: this.screenshot.calculatePositionData( target, event )\n\t\t\t\t.selectionPosition,\n\t\t\tstartPosition: this.screenshot.calculatePositionData( target, event )\n\t\t\t\t.startPosition,\n\t\t};\n\t}\n\n\t/**\n\t * Reset setup state (for testing or re-initialization)\n\t */\n\tresetSetup() {\n\t\tthis.setupCompleted = false;\n\t}\n\n\t/**\n\t * Get setup status\n\t * @returns {boolean} - Whether setup is completed\n\t */\n\tisSetupCompleted() {\n\t\treturn this.setupCompleted;\n\t}\n}\n\nexport {ImageSelectionStrategy};\n","/**\n * SVG Selection Strategy\n * Handles SVG-based selections with enhanced metadata extraction and validation\n */\nimport BaseSelectionStrategy from \"./BaseSelectionStrategy.js\";\nimport {\n\tvalidateSelectionContent,\n\tcreateSVGHash,\n\tsanitizeIdString,\n} from \"../composables/selection/shared/SelectionUtils.js\";\nimport {\n\tSELECTION_ENUMS,\n\tgetMediaWikiContentRoot,\n} from \"../utils/constants.js\";\nimport {SELECTION_PATTERNS} from \"../composables/selection/shared/SelectionConstants.js\";\n\nclass SVGSelectionStrategy extends BaseSelectionStrategy {\n\tconstructor() {\n\t\tsuper( \"svg\" );\n\t}\n\n\t/**\n\t * Validate SVG selection target\n\t * @param {Element} target - SVG element or child\n\t * @returns {boolean} - Whether target is valid SVG link\n\t */\n\tvalidateTarget( target ) {\n\t\tif ( !target || target.nodeType !== Node.ELEMENT_NODE ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Find the SVG link element\n\t\tconst svgLink = this.findSVGLink( target );\n\t\treturn svgLink !== null;\n\t}\n\n\t/**\n\t * Process SVG selection\n\t * @param {Element} target - SVG element or child\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync processSelection( target, event, options = {} ) {\n\t\tif ( !( await this.preProcess( target, event, options ) ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\t// Find the closest SVG link\n\t\t\tconst svgLink = this.findSVGLink( target );\n\t\t\tif ( !svgLink ) {\n\t\t\t\tthrow new Error( \"SVG element is not within a clickable link\" );\n\t\t\t}\n\n\t\t\t// Generate unique ID and extract metadata\n\t\t\tconst uniqueId = this.generateSVGUniqueId( svgLink );\n\n\t\t\tif ( !uniqueId ) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"SVGSelectionStrategy: uniqueId is undefined/null for svgLink:\",\n\t\t\t\t\tsvgLink,\n\t\t\t\t);\n\t\t\t\tconsole.warn( \"SVGSelectionStrategy: svgLink attributes:\", {\n\t\t\t\t\thref: svgLink.getAttribute( \"href\" ),\n\t\t\t\t\txlinkHref: svgLink.getAttribute( \"xlink:href\" ),\n\t\t\t\t\tinnerHTML: svgLink.innerHTML,\n\t\t\t\t\touterHTML: svgLink.outerHTML,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tconst textContent = this.extractSVGTextContent( svgLink );\n\t\t\tconst href =\n\t\t\t\tsvgLink.getAttribute( \"xlink:href\" ) || svgLink.getAttribute( \"href\" );\n\t\t\tconst metadata = this.extractSVGMetadata( svgLink );\n\n\t\t\t// Validate content (allow linebreaks for SVG content)\n\t\t\tconst validationContent = textContent || href || uniqueId;\n\t\t\tconst validationResult = validateSelectionContent( validationContent );\n\n\t\t\tif (\n\t\t\t\tvalidationResult !== SELECTION_ENUMS.SELECTION_VALID &&\n\t\t\t\tvalidationResult !==\n\t\t\t\tSELECTION_ENUMS.INVALID_SELECTION_CONTAINS_LINEBREAKS\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\t!this.errorHandler.handleValidationError(\n\t\t\t\t\t\tvalidationResult,\n\t\t\t\t\t\tthis.selectionType,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create selection data\n\t\t\tconst selectionData = this.createSVGSelectionData(\n\t\t\t\tuniqueId,\n\t\t\t\ttextContent,\n\t\t\t\thref,\n\t\t\t\tmetadata,\n\t\t\t\tsvgLink,\n\t\t\t);\n\n\t\t\treturn await this.postProcess( selectionData, svgLink, event, options );\n\t\t} catch ( error ) {\n\t\t\tthis.errorHandler.handleSelectionError( this.selectionType, error, {\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\toptions,\n\t\t\t} );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Create SVG selection data structure\n\t * @param {string} uniqueId - Unique SVG identifier\n\t * @param {string} textContent - Extracted text content\n\t * @param {string} href - Link href attribute\n\t * @param {Object} metadata - SVG metadata\n\t * @param {Element} svgLink - SVG link element\n\t * @returns {Object} - SVG selection data\n\t */\n\tcreateSVGSelectionData( uniqueId, textContent, href, metadata, svgLink ) {\n\t\tconst svgHash = createSVGHash( uniqueId, href, textContent );\n\t\tconst selectionText =\n\t\t\t`${SELECTION_PATTERNS.SVG_POSITION_PREFIX}${uniqueId}]`.trim();\n\n\t\t// Create descriptive text for display\n\t\tconst displayText =\n\t\t\ttextContent ||\n\t\t\t( href ? `SVG Link: ${this.extractPathFromHref( href )}` : uniqueId );\n\n\t\tconst baseData = this.createBaseSelectionData( selectionText, svgLink, -1 );\n\n\t\treturn {\n\t\t\t...baseData,\n\t\t\tsvgId: uniqueId,\n\t\t\tsvgHash: svgHash,\n\t\t\thref: href,\n\t\t\tposition: selectionText,\n\t\t\ttextContent: displayText,\n\t\t\tmetadata: this.enhanceMetadata( metadata, svgLink ),\n\t\t};\n\t}\n\n\t/**\n\t * Generate a unique ID for SVG selection based on available data\n\t * @param {Element} svgLink - The SVG anchor element\n\t * @returns {string} - Unique identifier\n\t */\n\tgenerateSVGUniqueId( svgLink ) {\n\t\t// Priority order for unique ID generation:\n\t\t// 1. href attribute (cleaned)\n\t\t// 2. Combination of text content and position\n\t\t// 3. Fallback hash based on element structure\n\n\t\tconst href =\n\t\t\tsvgLink.getAttribute( \"xlink:href\" ) || svgLink.getAttribute( \"href\" );\n\n\t\tif ( href ) {\n\t\t\tconst hrefId = this.generateIdFromHref( href );\n\t\t\treturn hrefId;\n\t\t}\n\n\t\tconst textContent = this.extractSVGTextContent( svgLink );\n\n\t\tif ( textContent ) {\n\t\t\tconst textId = this.generateIdFromTextAndPosition( svgLink, textContent );\n\t\t\treturn textId;\n\t\t}\n\n\t\tconst fallbackId = this.generateFallbackId( svgLink );\n\t\treturn fallbackId;\n\t}\n\n\t/**\n\t * Generate ID from href attribute\n\t * @param {string} href - Href attribute value\n\t * @returns {string} - Generated ID\n\t */\n\tgenerateIdFromHref( href ) {\n\t\ttry {\n\t\t\tconst url = new URL( href );\n\t\t\tconst pathSegments = url.pathname.split( \"/\" ).filter( Boolean );\n\t\t\tconst lastSegment = pathSegments[ pathSegments.length - 1 ];\n\n\t\t\tif ( lastSegment && lastSegment !== \"index.php\" ) {\n\t\t\t\tconst result = `svg-href-${sanitizeIdString( lastSegment )}`;\n\t\t\t\treturn result;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\t// Invalid URL, use as is but sanitized\n\t\t\tconst result = `svg-href-${sanitizeIdString( href )}`;\n\t\t\treturn result;\n\t\t}\n\n\t\tconst result = `svg-href-${sanitizeIdString( href )}`;\n\t\treturn result;\n\t}\n\n\t/**\n\t * Generate ID from text content and position\n\t * @param {Element} svgLink - SVG link element\n\t * @param {string} textContent - Text content\n\t * @returns {string} - Generated ID\n\t */\n\tgenerateIdFromTextAndPosition( svgLink, textContent ) {\n\t\tconst rect = svgLink.getBoundingClientRect();\n\t\tconst positionHash = `${Math.round( rect.left )}-${Math.round( rect.top )}`;\n\t\tconst cleanText = sanitizeIdString( textContent.toLowerCase() );\n\t\tconst result = `svg-text-${cleanText}-${positionHash}`;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Generate fallback ID based on element structure\n\t * @param {Element} svgLink - SVG link element\n\t * @returns {string} - Generated fallback ID\n\t */\n\tgenerateFallbackId( svgLink ) {\n\t\tconst elementInfo = {\n\t\t\ttagName: svgLink.tagName,\n\t\t\tposition: svgLink.getBoundingClientRect(),\n\t\t\tchildCount: svgLink.children.length,\n\t\t\ttimestamp: Date.now(),\n\t\t};\n\n\t\tconst fallbackHash = btoa( JSON.stringify( elementInfo ) )\n\t\t\t.replace( /[^a-zA-Z0-9]/g, \"\" )\n\t\t\t.substring( 0, 16 );\n\n\t\tconst result = `svg-fallback-${fallbackHash}`;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Extract path from href for display\n\t * @param {string} href - Href attribute\n\t * @returns {string} - Extracted path\n\t */\n\textractPathFromHref( href ) {\n\t\ttry {\n\t\t\tconst url = new URL( href );\n\t\t\treturn url.pathname.split( \"/\" ).pop() || href;\n\t\t} catch ( e ) {\n\t\t\treturn href;\n\t\t}\n\t}\n\n\t/**\n\t * Extract text content from SVG link\n\t * @param {Element} svgLink - The SVG anchor element\n\t * @returns {string} - Extracted text content\n\t */\n\textractSVGTextContent( svgLink ) {\n\t\tconst textParts = [];\n\n\t\t// Look for title element first (most descriptive)\n\t\tconst titleElement = svgLink.querySelector( \"title\" );\n\t\tif ( titleElement && titleElement.textContent.trim() ) {\n\t\t\ttextParts.push( titleElement.textContent.trim() );\n\t\t}\n\n\t\t// Look for text and tspan elements\n\t\tconst textElements = svgLink.querySelectorAll( \"text, tspan\" );\n\t\ttextElements.forEach( ( textElement ) => {\n\t\t\tconst text = textElement.textContent.trim();\n\t\t\tif ( text && !textParts.includes( text ) ) {\n\t\t\t\ttextParts.push( text );\n\t\t\t}\n\t\t} );\n\n\t\t// Look for desc element\n\t\tconst descElement = svgLink.querySelector( \"desc\" );\n\t\tif ( descElement && descElement.textContent.trim() ) {\n\t\t\tconst descText = descElement.textContent.trim();\n\t\t\tif ( !textParts.includes( descText ) ) {\n\t\t\t\ttextParts.push( descText );\n\t\t\t}\n\t\t}\n\n\t\treturn textParts.join( \" \" );\n\t}\n\n\t/**\n\t * Extract metadata from SVG link\n\t * @param {Element} svgLink - The SVG anchor element\n\t * @returns {Object} - Extracted metadata\n\t */\n\textractSVGMetadata( svgLink ) {\n\t\tconst metadata = {};\n\n\t\t// Extract href information\n\t\tconst href =\n\t\t\tsvgLink.getAttribute( \"xlink:href\" ) || svgLink.getAttribute( \"href\" );\n\t\tif ( href ) {\n\t\t\tmetadata.href = href;\n\t\t}\n\n\t\t// Extract RDF metadata if available\n\t\tconst metadataElement = svgLink.querySelector(\n\t\t\t\"metadata rdf\\\\:description, metadata description\",\n\t\t);\n\t\tif ( metadataElement ) {\n\t\t\tconst about =\n\t\t\t\tmetadataElement.getAttribute( \"rdf:about\" ) ||\n\t\t\t\tmetadataElement.getAttribute( \"about\" );\n\t\t\tif ( about ) metadata.rdfAbout = about;\n\t\t}\n\n\t\t// Extract visual properties from first rect/shape\n\t\tconst shape = svgLink.querySelector( \"rect, circle, ellipse, polygon, path\" );\n\t\tif ( shape ) {\n\t\t\tmetadata.visual = this.extractVisualProperties( shape );\n\t\t}\n\n\t\t// Extract CSS classes\n\t\tconst classes = svgLink.getAttribute( \"class\" );\n\t\tif ( classes ) {\n\t\t\tmetadata.classes = classes.split( \" \" ).filter( Boolean );\n\t\t}\n\n\t\t// Extract SVG-specific attributes\n\t\tconst svgElement = svgLink.closest( \"svg\" );\n\t\tif ( svgElement ) {\n\t\t\tmetadata.svg = {\n\t\t\t\tviewBox: svgElement.getAttribute( \"viewBox\" ),\n\t\t\t\twidth: svgElement.getAttribute( \"width\" ),\n\t\t\t\theight: svgElement.getAttribute( \"height\" ),\n\t\t\t};\n\t\t}\n\n\t\treturn metadata;\n\t}\n\n\t/**\n\t * Extract visual properties from SVG shape\n\t * @param {Element} shape - SVG shape element\n\t * @returns {Object} - Visual properties\n\t */\n\textractVisualProperties( shape ) {\n\t\tconst visual = {};\n\n\t\t// Common attributes\n\t\t[\n\t\t\t\"x\",\n\t\t\t\"y\",\n\t\t\t\"width\",\n\t\t\t\"height\",\n\t\t\t\"r\",\n\t\t\t\"cx\",\n\t\t\t\"cy\",\n\t\t\t\"fill\",\n\t\t\t\"stroke\",\n\t\t\t\"stroke-width\",\n\t\t].forEach( ( attr ) => {\n\t\t\tconst value = shape.getAttribute( attr ) || shape.style[ attr ];\n\t\t\tif ( value ) {\n\t\t\t\tvisual[ attr ] = value;\n\t\t\t}\n\t\t} );\n\n\t\treturn visual;\n\t}\n\n\t/**\n\t * Enhance metadata with additional computed information\n\t * @param {Object} metadata - Base metadata\n\t * @param {Element} svgLink - SVG link element\n\t * @returns {Object} - Enhanced metadata\n\t */\n\tenhanceMetadata( metadata, svgLink ) {\n\t\tconst enhanced = {...metadata};\n\n\t\t// Add computed properties\n\t\tenhanced.computed = {\n\t\t\tboundingBox: svgLink.getBoundingClientRect(),\n\t\t\tchildElementCount: svgLink.children.length,\n\t\t\thasText: this.extractSVGTextContent( svgLink ).length > 0,\n\t\t\thasVisualElements:\n\t\t\t\tsvgLink.querySelector( \"rect, circle, ellipse, polygon, path\" ) !== null,\n\t\t};\n\n\t\t// Add accessibility information\n\t\tenhanced.accessibility = {\n\t\t\thasTitle: svgLink.querySelector( \"title\" ) !== null,\n\t\t\thasDesc: svgLink.querySelector( \"desc\" ) !== null,\n\t\t\tariaLabel: svgLink.getAttribute( \"aria-label\" ),\n\t\t\trole: svgLink.getAttribute( \"role\" ),\n\t\t};\n\n\t\treturn enhanced;\n\t}\n\n\t/**\n\t * Check if an element is within an SVG link\n\t * @param {Element} element - Element to check\n\t * @returns {Element|null} - The SVG link element if found, null otherwise\n\t */\n\tfindSVGLink( element ) {\n\t\t// Check if the element itself is an SVG link\n\t\tif ( element.tagName === \"a\" && element.closest( \"svg\" ) ) {\n\t\t\treturn element;\n\t\t}\n\n\t\t// Check if the element is within an SVG link\n\t\tconst svgLink = element.closest( \"svg a\" );\n\t\treturn svgLink;\n\t}\n}\n\nexport {SVGSelectionStrategy};\n","/**\n * Dynamic Block Selection Strategy\n * Handles dynamic block selections with enhanced validation and processing\n */\nimport BaseSelectionStrategy from \"./BaseSelectionStrategy.js\";\nimport {\n\tSELECTION_CLASSES,\n\tSELECTION_PATTERNS,\n} from \"../composables/selection/shared/SelectionConstants.js\";\n\nclass DynamicBlockSelectionStrategy extends BaseSelectionStrategy {\n\tconstructor() {\n\t\tsuper( \"dynamic-block\" );\n\t}\n\n\t/**\n\t * Validate dynamic block selection target\n\t * @param {Element} target - Dynamic block element\n\t * @returns {boolean} - Whether target is valid dynamic block\n\t */\n\tvalidateTarget( target ) {\n\t\tif ( !target || target.nodeType !== Node.ELEMENT_NODE ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if element has dynamic block class or is within one\n\t\treturn (\n\t\t\ttarget.classList.contains( SELECTION_CLASSES.DYNAMIC_BLOCK ) ||\n\t\t\ttarget.closest( `.${SELECTION_CLASSES.DYNAMIC_BLOCK}` ) !== null\n\t\t);\n\t}\n\n\t/**\n\t * Process dynamic block selection\n\t * @param {Element} target - Dynamic block element\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync processSelection( target, event, options = {} ) {\n\t\tif ( !( await this.preProcess( target, event, options ) ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\t// Get the dynamic block element\n\t\t\tconst dynamicBlock = this.getDynamicBlockElement( target );\n\t\t\tif ( !dynamicBlock ) {\n\t\t\t\tthrow new Error( \"No dynamic block element found\" );\n\t\t\t}\n\n\t\t\t// Validate that block is not already commented\n\t\t\tif ( this.isAlreadyCommented( dynamicBlock ) ) {\n\t\t\t\tthrow new Error( \"Dynamic block already has comments\" );\n\t\t\t}\n\n\t\t\t// Create selection data\n\t\t\tconst selectionData = this.createDynamicBlockSelectionData( dynamicBlock );\n\n\t\t\treturn await this.postProcess(\n\t\t\t\tselectionData,\n\t\t\t\tdynamicBlock,\n\t\t\t\tevent,\n\t\t\t\toptions,\n\t\t\t);\n\t\t} catch ( error ) {\n\t\t\tthis.errorHandler.handleSelectionError( this.selectionType, error, {\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\toptions,\n\t\t\t} );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get the dynamic block element from target\n\t * @param {Element} target - Target element\n\t * @returns {Element|null} - Dynamic block element\n\t */\n\tgetDynamicBlockElement( target ) {\n\t\t// Check if target itself is a dynamic block\n\t\tif ( target.classList.contains( SELECTION_CLASSES.DYNAMIC_BLOCK ) ) {\n\t\t\treturn target;\n\t\t}\n\n\t\t// Find closest dynamic block\n\t\treturn target.closest( `.${SELECTION_CLASSES.DYNAMIC_BLOCK}` );\n\t}\n\n\t/**\n\t * Check if dynamic block already has comments\n\t * @param {Element} dynamicBlock - Dynamic block element\n\t * @returns {boolean} - Whether block is already commented\n\t */\n\tisAlreadyCommented( dynamicBlock ) {\n\t\t// Check for highlight classes in the block's HTML\n\t\treturn dynamicBlock.outerHTML.includes(\n\t\t\tSELECTION_CLASSES.PERMANENT_HIGHLIGHT,\n\t\t);\n\t}\n\n\t/**\n\t * Create dynamic block selection data structure\n\t * @param {Element} dynamicBlock - Dynamic block element\n\t * @returns {Object} - Dynamic block selection data\n\t */\n\tcreateDynamicBlockSelectionData( dynamicBlock ) {\n\t\t// Determine selection text based on block type\n\t\tlet selectionText = this.determineSelectionText( dynamicBlock );\n\n\t\t// Get block metadata\n\t\tconst metadata = this.extractBlockMetadata( dynamicBlock );\n\n\t\treturn {\n\t\t\t...this.createBaseSelectionData( selectionText, dynamicBlock, -1 ),\n\t\t\tblockType: this.getBlockType( dynamicBlock ),\n\t\t\tblockHash: dynamicBlock.dataset.hash || null,\n\t\t\tmetadata: metadata,\n\t\t};\n\t}\n\n\t/**\n\t * Determine appropriate selection text for the block\n\t * @param {Element} dynamicBlock - Dynamic block element\n\t * @returns {string} - Selection text\n\t */\n\tdetermineSelectionText( dynamicBlock ) {\n\t\t// For image blocks, use the data-hash if available\n\t\tif (\n\t\t\tdynamicBlock.classList.contains( SELECTION_CLASSES.IMAGE_BLOCK ) &&\n\t\t\tdynamicBlock.dataset.hash\n\t\t) {\n\t\t\treturn dynamicBlock.dataset.hash;\n\t\t}\n\n\t\t// For other blocks, use a truncated version of outerHTML\n\t\tconst outerHTML = dynamicBlock.outerHTML;\n\n\t\t// Truncate if too long to prevent unwieldy selection text\n\t\tif ( outerHTML.length > 500 ) {\n\t\t\tconst truncated = outerHTML.substring( 0, 500 ) + \"...\";\n\t\t\treturn this.sanitizeHTML( truncated );\n\t\t}\n\n\t\treturn this.sanitizeHTML( outerHTML );\n\t}\n\n\t/**\n\t * Sanitize HTML content for safe display\n\t * @param {string} html - HTML content\n\t * @returns {string} - Sanitized HTML\n\t */\n\tsanitizeHTML( html ) {\n\t\t// Basic sanitization - remove script tags and dangerous attributes\n\t\treturn html\n\t\t\t.replace( /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, \"\" )\n\t\t\t.replace( /javascript:/gi, \"\" )\n\t\t\t.replace( /on\\w+\\s*=/gi, \"\" )\n\t\t\t.trim();\n\t}\n\n\t/**\n\t * Get block type from element\n\t * @param {Element} dynamicBlock - Dynamic block element\n\t * @returns {string} - Block type\n\t */\n\tgetBlockType( dynamicBlock ) {\n\t\tif ( dynamicBlock.classList.contains( SELECTION_CLASSES.IMAGE_BLOCK ) ) {\n\t\t\treturn \"image\";\n\t\t}\n\n\t\tif ( dynamicBlock.dataset.type ) {\n\t\t\treturn dynamicBlock.dataset.type;\n\t\t}\n\n\t\t// Infer type from content\n\t\tif ( dynamicBlock.querySelector( \"img\" ) ) {\n\t\t\treturn \"image\";\n\t\t}\n\n\t\tif ( dynamicBlock.querySelector( \"table\" ) ) {\n\t\t\treturn \"table\";\n\t\t}\n\n\t\tif ( dynamicBlock.querySelector( \"video\" ) ) {\n\t\t\treturn \"video\";\n\t\t}\n\n\t\tif ( dynamicBlock.querySelector( \"iframe\" ) ) {\n\t\t\treturn \"iframe\";\n\t\t}\n\n\t\treturn \"generic\";\n\t}\n\n\t/**\n\t * Extract metadata from dynamic block\n\t * @param {Element} dynamicBlock - Dynamic block element\n\t * @returns {Object} - Block metadata\n\t */\n\textractBlockMetadata( dynamicBlock ) {\n\t\tconst metadata = {\n\t\t\tclasses: Array.from( dynamicBlock.classList ),\n\t\t\tdatasets: {...dynamicBlock.dataset},\n\t\t\tdimensions: {\n\t\t\t\twidth: dynamicBlock.offsetWidth,\n\t\t\t\theight: dynamicBlock.offsetHeight,\n\t\t\t},\n\t\t\tposition: dynamicBlock.getBoundingClientRect(),\n\t\t\tchildCount: dynamicBlock.children.length,\n\t\t};\n\n\t\t// Add type-specific metadata\n\t\tconst blockType = this.getBlockType( dynamicBlock );\n\t\tswitch ( blockType ) {\n\t\t\tcase \"image\":\n\t\t\t\tmetadata.image = this.extractImageMetadata( dynamicBlock );\n\t\t\t\tbreak;\n\t\t\tcase \"table\":\n\t\t\t\tmetadata.table = this.extractTableMetadata( dynamicBlock );\n\t\t\t\tbreak;\n\t\t\tcase \"video\":\n\t\t\t\tmetadata.video = this.extractVideoMetadata( dynamicBlock );\n\t\t\t\tbreak;\n\t\t\tcase \"iframe\":\n\t\t\t\tmetadata.iframe = this.extractIframeMetadata( dynamicBlock );\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn metadata;\n\t}\n\n\t/**\n\t * Extract image-specific metadata\n\t * @param {Element} dynamicBlock - Dynamic block containing image\n\t * @returns {Object} - Image metadata\n\t */\n\textractImageMetadata( dynamicBlock ) {\n\t\tconst img = dynamicBlock.querySelector( \"img\" );\n\t\tif ( !img ) return {};\n\n\t\treturn {\n\t\t\tsrc: img.src,\n\t\t\talt: img.alt,\n\t\t\ttitle: img.title,\n\t\t\twidth: img.width || img.naturalWidth,\n\t\t\theight: img.height || img.naturalHeight,\n\t\t\taspectRatio:\n\t\t\t\timg.naturalWidth && img.naturalHeight\n\t\t\t\t\t? ( img.naturalWidth / img.naturalHeight ).toFixed( 2 )\n\t\t\t\t\t: null,\n\t\t};\n\t}\n\n\t/**\n\t * Extract table-specific metadata\n\t * @param {Element} dynamicBlock - Dynamic block containing table\n\t * @returns {Object} - Table metadata\n\t */\n\textractTableMetadata( dynamicBlock ) {\n\t\tconst table = dynamicBlock.querySelector( \"table\" );\n\t\tif ( !table ) return {};\n\n\t\treturn {\n\t\t\trows: table.rows.length,\n\t\t\tcolumns: table.rows[ 0 ] ? table.rows[ 0 ].cells.length : 0,\n\t\t\thasHeader: table.querySelector( \"thead, th\" ) !== null,\n\t\t\thasCaption: table.querySelector( \"caption\" ) !== null,\n\t\t};\n\t}\n\n\t/**\n\t * Extract video-specific metadata\n\t * @param {Element} dynamicBlock - Dynamic block containing video\n\t * @returns {Object} - Video metadata\n\t */\n\textractVideoMetadata( dynamicBlock ) {\n\t\tconst video = dynamicBlock.querySelector( \"video\" );\n\t\tif ( !video ) return {};\n\n\t\treturn {\n\t\t\tsrc:\n\t\t\t\tvideo.src ||\n\t\t\t\t( video.querySelector( \"source\" )\n\t\t\t\t\t? video.querySelector( \"source\" ).src\n\t\t\t\t\t: \"\" ),\n\t\t\tduration: video.duration,\n\t\t\twidth: video.videoWidth || video.width,\n\t\t\theight: video.videoHeight || video.height,\n\t\t\tcontrols: video.controls,\n\t\t\tautoplay: video.autoplay,\n\t\t\tloop: video.loop,\n\t\t\tmuted: video.muted,\n\t\t};\n\t}\n\n\t/**\n\t * Extract iframe-specific metadata\n\t * @param {Element} dynamicBlock - Dynamic block containing iframe\n\t * @returns {Object} - Iframe metadata\n\t */\n\textractIframeMetadata( dynamicBlock ) {\n\t\tconst iframe = dynamicBlock.querySelector( \"iframe\" );\n\t\tif ( !iframe ) return {};\n\n\t\treturn {\n\t\t\tsrc: iframe.src,\n\t\t\twidth: iframe.width || iframe.offsetWidth,\n\t\t\theight: iframe.height || iframe.offsetHeight,\n\t\t\ttitle: iframe.title,\n\t\t\tsandbox: iframe.sandbox.toString(),\n\t\t\tloading: iframe.loading,\n\t\t};\n\t}\n\n\t/**\n\t * Prepare screenshot parameters for dynamic blocks\n\t * @param {Element} target - Dynamic block element\n\t * @param {Event} event - Mouse event\n\t * @param {Object} selectionData - Selection data\n\t * @returns {Object} - Screenshot parameters\n\t */\n\tprepareScreenshotParams( target, event, selectionData ) {\n\t\tconst positionData = this.screenshot.calculatePositionData( target, event );\n\n\t\treturn {\n\t\t\t...positionData,\n\t\t\ttext: selectionData.text,\n\t\t\telement: target,\n\t\t};\n\t}\n\n\t/**\n\t * Get all dynamic blocks in content\n\t * @returns {NodeList} - All dynamic block elements\n\t */\n\tgetAllDynamicBlocks() {\n\t\treturn document.querySelectorAll( `.${SELECTION_CLASSES.DYNAMIC_BLOCK}` );\n\t}\n\n\t/**\n\t * Get statistics about dynamic blocks\n\t * @returns {Object} - Dynamic block statistics\n\t */\n\tgetBlockStatistics() {\n\t\tconst blocks = this.getAllDynamicBlocks();\n\t\tconst stats = {\n\t\t\ttotal: blocks.length,\n\t\t\tbyType: {},\n\t\t\tcommented: 0,\n\t\t\tuncommented: 0,\n\t\t};\n\n\t\tblocks.forEach( ( block ) => {\n\t\t\tconst blockType = this.getBlockType( block );\n\t\t\tstats.byType[ blockType ] = ( stats.byType[ blockType ] || 0 ) + 1;\n\n\t\t\tif ( this.isAlreadyCommented( block ) ) {\n\t\t\t\tstats.commented++;\n\t\t\t} else {\n\t\t\t\tstats.uncommented++;\n\t\t\t}\n\t\t} );\n\n\t\treturn stats;\n\t}\n}\n\nexport {DynamicBlockSelectionStrategy};\n","/**\n * Selection Strategy Factory\n * Implements Factory pattern for creating appropriate selection strategies\n * Manages strategy instances and provides unified interface\n */\nimport {TextSelectionStrategy} from \"../strategies/TextSelectionStrategy.js\";\nimport {ImageSelectionStrategy} from \"../strategies/ImageSelectionStrategy.js\";\nimport {SVGSelectionStrategy} from \"../strategies/SVGSelectionStrategy.js\";\nimport {DynamicBlockSelectionStrategy} from \"../strategies/DynamicBlockSelectionStrategy.js\";\nimport {SMARTCOMMENTS_CLASSES} from \"../utils/constants.js\";\n\nclass SelectionStrategyFactory {\n\tconstructor() {\n\t\tthis.strategies = new Map();\n\t\tthis.defaultStrategy = null;\n\t\tthis.initialized = false;\n\t}\n\n\t/**\n\t * Initialize the factory with all available strategies\n\t */\n\tinitialize() {\n\t\tif ( this.initialized ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// Register all strategy types\n\t\t\tthis.registerStrategy( \"text\", new TextSelectionStrategy() );\n\t\t\tthis.registerStrategy( \"image\", new ImageSelectionStrategy() );\n\t\t\tthis.registerStrategy( \"svg\", new SVGSelectionStrategy() );\n\t\t\tthis.registerStrategy(\n\t\t\t\t\"dynamic-block\",\n\t\t\t\tnew DynamicBlockSelectionStrategy(),\n\t\t\t);\n\n\t\t\t// Set default strategy\n\t\t\tthis.defaultStrategy = this.strategies.get( \"text\" );\n\t\t\tthis.initialized = true;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to initialize Selection Strategy Factory:\", error );\n\t\t\tthis.initialized = false;\n\t\t}\n\t}\n\n\t/**\n\t * Register a new strategy\n\t * @param {string} type - Strategy type identifier\n\t * @param {BaseSelectionStrategy} strategy - Strategy instance\n\t */\n\tregisterStrategy( type, strategy ) {\n\t\tif ( !type || !strategy ) {\n\t\t\tthrow new Error( \"Both type and strategy are required for registration\" );\n\t\t}\n\n\t\tif ( this.strategies.has( type ) ) {\n\t\t\tconsole.warn( `Strategy type '${type}' already registered, overwriting` );\n\t\t}\n\n\t\tthis.strategies.set( type, strategy );\n\t}\n\n\t/**\n\t * Get strategy by type\n\t * @param {string} type - Strategy type\n\t * @returns {BaseSelectionStrategy|null} - Strategy instance or null\n\t */\n\tgetStrategy( type ) {\n\t\tthis.ensureInitialized();\n\t\treturn this.strategies.get( type ) || null;\n\t}\n\n\t/**\n\t * Determine appropriate strategy for a given target\n\t * @param {*} target - Selection target (element, range, etc.)\n\t * @param {Event} event - Interaction event\n\t * @returns {BaseSelectionStrategy|null} - Best matching strategy\n\t */\n\tdetermineStrategy( target, event ) {\n\t\tthis.ensureInitialized();\n\n\t\t// If target is a rangy selection or range, use text strategy\n\t\tif ( this.isTextSelection( target ) ) {\n\t\t\treturn this.getStrategy( \"text\" );\n\t\t}\n\n\t\t// If target is an element, determine based on element type\n\t\tif ( target && target.nodeType === Node.ELEMENT_NODE ) {\n\t\t\treturn this.determineElementStrategy( target );\n\t\t}\n\n\t\t// Fallback to default strategy\n\t\tconsole.warn(\n\t\t\t\"Could not determine appropriate strategy for target:\",\n\t\t\ttarget,\n\t\t);\n\t\treturn this.defaultStrategy;\n\t}\n\n\t/**\n\t * Determine strategy for element-based targets\n\t * @param {Element} element - Target element\n\t * @returns {BaseSelectionStrategy} - Appropriate strategy\n\t */\n\tdetermineElementStrategy( element ) {\n\t\t// Check for SVG links first (most specific)\n\t\tconst svgStrategy = this.getStrategy( \"svg\" );\n\t\tif ( svgStrategy && svgStrategy.validateTarget( element ) ) {\n\t\t\treturn svgStrategy;\n\t\t}\n\n\t\t// Check for dynamic blocks\n\t\tconst dynamicBlockStrategy = this.getStrategy( \"dynamic-block\" );\n\t\tif ( dynamicBlockStrategy && dynamicBlockStrategy.validateTarget( element ) ) {\n\t\t\treturn dynamicBlockStrategy;\n\t\t}\n\n\t\t// Check for images\n\t\tconst imageStrategy = this.getStrategy( \"image\" );\n\t\tif ( imageStrategy && imageStrategy.validateTarget( element ) ) {\n\t\t\treturn imageStrategy;\n\t\t}\n\n\t\t// Default to text strategy for other elements\n\t\treturn this.getStrategy( \"text\" );\n\t}\n\n\t/**\n\t * Check if target represents a text selection\n\t * @param {*} target - Target to check\n\t * @returns {boolean} - Whether target is text selection\n\t */\n\tisTextSelection( target ) {\n\t\t// Check for rangy selection object\n\t\tif (\n\t\t\ttarget &&\n\t\t\ttypeof target === \"object\" &&\n\t\t\ttarget.rangeCount !== undefined\n\t\t) {\n\t\t\treturn target.rangeCount > 0 && !target.isCollapsed;\n\t\t}\n\n\t\t// Check for rangy range object\n\t\tif (\n\t\t\ttarget &&\n\t\t\ttypeof target === \"object\" &&\n\t\t\ttypeof target.toString === \"function\" &&\n\t\t\ttypeof target.toHtml === \"function\"\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Process selection using the appropriate strategy\n\t * @param {*} target - Selection target\n\t * @param {Event} event - Interaction event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync processSelection( target, event, options = {} ) {\n\t\tthis.ensureInitialized();\n\n\t\t// check if the target has a comment already, if so, return null\n\t\t// to prevent multiple comments from being created\n\t\tif (\n\t\t\tevent?.target?.closest( `[class*=\"${SMARTCOMMENTS_CLASSES.HIGHLIGHT}\"]` )\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst strategy = this.determineStrategy( target, event );\n\t\tif ( !strategy ) {\n\t\t\tconsole.error( \"No strategy available for target:\", target );\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\tconst result = await strategy.processSelection( target, event, options );\n\n\t\t\t// Add strategy information to result for debugging\n\t\t\tif ( result ) {\n\t\t\t\tresult._strategy = {\n\t\t\t\t\ttype: strategy.getType(),\n\t\t\t\t\tname: strategy.getName(),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn result;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( `Strategy ${strategy.getName()} failed:`, error );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Get all registered strategy types\n\t * @returns {string[]} - Array of strategy type names\n\t */\n\tgetRegisteredTypes() {\n\t\tthis.ensureInitialized();\n\t\treturn Array.from( this.strategies.keys() );\n\t}\n\n\t/**\n\t * Get factory statistics\n\t * @returns {Object} - Factory statistics\n\t */\n\tgetStatistics() {\n\t\treturn {\n\t\t\tinitialized: this.initialized,\n\t\t\tstrategyCount: this.strategies.size,\n\t\t\tregisteredTypes: this.getRegisteredTypes(),\n\t\t\tdefaultStrategy: this.defaultStrategy\n\t\t\t\t? this.defaultStrategy.getName()\n\t\t\t\t: null,\n\t\t};\n\t}\n\n\t/**\n\t * Reset factory (for testing)\n\t */\n\treset() {\n\t\tthis.strategies.clear();\n\t\tthis.defaultStrategy = null;\n\t\tthis.initialized = false;\n\t}\n\n\t/**\n\t * Ensure factory is initialized\n\t */\n\tensureInitialized() {\n\t\tif ( !this.initialized ) {\n\t\t\tthis.initialize();\n\t\t}\n\t}\n\n\t/**\n\t * Setup all strategies (delegate to individual strategy setup methods)\n\t */\n\tsetupStrategies() {\n\t\tthis.ensureInitialized();\n\n\t\t// Setup image strategy (wraps images in dynamic blocks)\n\t\tconst imageStrategy = this.getStrategy( \"image\" );\n\t\tif (\n\t\t\timageStrategy &&\n\t\t\ttypeof imageStrategy.setupImageSelection === \"function\"\n\t\t) {\n\t\t\timageStrategy.setupImageSelection();\n\t\t}\n\t}\n\n\t/**\n\t * Validate that a strategy implements required interface\n\t * @param {*} strategy - Strategy to validate\n\t * @returns {boolean} - Whether strategy is valid\n\t */\n\tvalidateStrategy( strategy ) {\n\t\tif ( !strategy || typeof strategy !== \"object\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check required methods\n\t\tconst requiredMethods = [\n\t\t\t\"processSelection\",\n\t\t\t\"validateTarget\",\n\t\t\t\"getType\",\n\t\t\t\"getName\",\n\t\t];\n\t\treturn requiredMethods.every(\n\t\t\t( method ) => typeof strategy[ method ] === \"function\",\n\t\t);\n\t}\n\n\t/**\n\t * Get strategy by element inspection\n\t * @param {Element} element - Element to inspect\n\t * @returns {BaseSelectionStrategy|null} - Matching strategy\n\t */\n\tgetStrategyByElement( element ) {\n\t\tthis.ensureInitialized();\n\n\t\tfor ( const [type, strategy] of this.strategies ) {\n\t\t\tif ( strategy.validateTarget( element ) ) {\n\t\t\t\treturn strategy;\n\t\t\t}\n\t\t}\n\n\t\treturn this.defaultStrategy;\n\t}\n}\n\n// Create and export singleton instance\nexport const selectionStrategyFactory = new SelectionStrategyFactory();\n","/**\n * Main Selection Composable - Refactored\n * Uses Strategy pattern for different selection types\n * Eliminates duplication and provides unified interface\n */\nimport {ref, reactive} from \"vue\";\nimport {selectionStrategyFactory} from \"../../factories/SelectionStrategyFactory.js\";\nimport {getMediaWikiContentRoot} from \"../../utils/constants.js\";\nimport {SELECTION_TIMEOUTS} from \"../../utils/constants.js\";\n\nexport function useSelection() {\n\t// State management\n\tconst isSelectionActive = ref( false );\n\tconst currentSelection = ref( null );\n\tconst lastRange = ref( null );\n\tconst selectionPosition = reactive( {x: 0, y: 0} );\n\tconst startPosition = reactive( {x: 0, y: 0} );\n\tconst isCapturing = ref( false );\n\n\t// Initialize factory\n\tselectionStrategyFactory.initialize();\n\n\t/**\n\t * Process any selection type using the appropriate strategy\n\t * @param {*} target - Selection target (range, element, etc.)\n\t * @param {Event} event - Interaction event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync function processSelection( target, event, options = {} ) {\n\t\tif ( isCapturing.value ) {\n\t\t\tconsole.warn( \"Selection processing already in progress\" );\n\t\t\treturn null;\n\t\t}\n\n\t\tisCapturing.value = true;\n\n\t\ttry {\n\t\t\t// Use factory to process selection with appropriate strategy\n\t\t\tconst selectionData = await selectionStrategyFactory.processSelection(\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\toptions,\n\t\t\t);\n\t\t\tif ( selectionData ) {\n\t\t\t\t// Update state\n\t\t\t\tcurrentSelection.value = selectionData;\n\t\t\t\tupdateSelectionState( selectionData, event );\n\t\t\t\tisSelectionActive.value = true;\n\t\t\t\treturn selectionData;\n\t\t\t}\n\n\t\t\t// Clear selection if processing failed\n\t\t\tclearSelection();\n\t\t\treturn null;\n\t\t} finally {\n\t\t\tisCapturing.value = false;\n\t\t}\n\t}\n\n\t/**\n\t * Process text selection specifically\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync function processTextSelection( event, options = {} ) {\n\t\t// Add delay for text selection as per original behavior\n\t\tawait new Promise( ( resolve ) =>\n\t\t\tsetTimeout( resolve, SELECTION_TIMEOUTS.TEXT_SELECTION_DELAY ),\n\t\t);\n\n\t\tif ( !window.rangy || !rangy.getSelection ) {\n\t\t\tconsole.error( \"Rangy library not available for text selection\" );\n\t\t\treturn null;\n\t\t}\n\n\t\tconst selection = rangy.getSelection();\n\t\tif ( !selection.rangeCount || selection.isCollapsed ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst range = selection.getRangeAt( 0 );\n\t\treturn await processSelection( range, event, options );\n\t}\n\n\t/**\n\t * Process dynamic block selection\n\t * @param {Element} element - Dynamic block element\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync function processDynamicBlockSelection( element, event, options = {} ) {\n\t\treturn await processSelection( element, event, options );\n\t}\n\n\t/**\n\t * Process image selection\n\t * @param {Element} imgElement - Image element\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync function processImageSelection( imgElement, event, options = {} ) {\n\t\treturn await processSelection( imgElement, event, options );\n\t}\n\n\t/**\n\t * Process SVG selection\n\t * @param {Element} svgElement - SVG element or child\n\t * @param {Event} event - Mouse event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync function processSVGSelection( svgElement, event, options = {} ) {\n\t\treturn await processSelection( svgElement, event, options );\n\t}\n\n\t/**\n\t * Update selection state based on selection data and event\n\t * @param {Object} selectionData - Selection data\n\t * @param {Event} event - Interaction event\n\t */\n\tfunction updateSelectionState( selectionData, event ) {\n\t\t// Store range for text selections\n\t\tif ( selectionData.type === \"text\" && window.rangy && rangy.getSelection ) {\n\t\t\tconst selection = rangy.getSelection();\n\t\t\tif ( selection.rangeCount ) {\n\t\t\t\tlastRange.value = selection.getRangeAt( 0 ).cloneRange();\n\t\t\t}\n\t\t} else {\n\t\t\tlastRange.value = null;\n\t\t}\n\n\t\t// Update position from event or element\n\t\tif ( event ) {\n\t\t\tselectionPosition.x = event.clientX || event.pageX || 0;\n\t\t\tselectionPosition.y = event.clientY || event.pageY || 0;\n\t\t} else if ( selectionData.element ) {\n\t\t\t// Calculate position from element if no event\n\t\t\tconst rect = selectionData.element.getBoundingClientRect();\n\t\t\tselectionPosition.x = rect.left + rect.width / 2;\n\t\t\tselectionPosition.y = rect.top + rect.height / 2;\n\t\t}\n\t}\n\n\t/**\n\t * Clear current selection and reset state\n\t */\n\tfunction clearSelection() {\n\t\tcurrentSelection.value = null;\n\t\tlastRange.value = null;\n\t\tisSelectionActive.value = false;\n\t\tisCapturing.value = false;\n\n\t\t// Clear browser selection\n\t\tif ( window.getSelection ) {\n\t\t\ttry {\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.warn( \"Failed to clear browser selection:\", error );\n\t\t\t}\n\t\t}\n\n\t\t// Clear rangy selection\n\t\tif ( window.rangy && rangy.getSelection ) {\n\t\t\ttry {\n\t\t\t\trangy.getSelection().removeAllRanges();\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.warn( \"Failed to clear rangy selection:\", error );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Format selection data for API request\n\t * @param {Object} selectionData - Selection data\n\t * @returns {Object|null} - Formatted data for API\n\t */\n\tfunction formatSelectionForAPI( selectionData ) {\n\t\tif ( !selectionData ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst root = getMediaWikiContentRoot();\n\t\tlet parentId = null;\n\n\t\t// Find parent comment if selection is within one\n\t\tif ( selectionData.element ) {\n\t\t\tconst parentCommentElement =\n\t\t\t\tselectionData.element.closest( \"[data-comment-id]\" );\n\t\t\tif ( parentCommentElement ) {\n\t\t\t\tparentId = parentCommentElement.dataset.commentId;\n\t\t\t}\n\t\t}\n\n\t\tconst formattedData = {\n\t\t\ttext: selectionData.text || \"\",\n\t\t\tindex: selectionData.index ?? -1,\n\t\t\ttype: selectionData.type || \"text\",\n\t\t\timage: selectionData.image || null,\n\t\t\tparentId: parentId,\n\t\t\tsrc: selectionData.src || null,\n\t\t\timageHash: selectionData.imageHash || null,\n\t\t\tsvgId: selectionData.svgId || null,\n\t\t\tsvgHash: selectionData.svgHash || null,\n\t\t\thref: selectionData.href || null,\n\t\t};\n\n\t\t// Add type-specific data\n\t\tswitch ( selectionData.type ) {\n\t\t\tcase \"dynamic-block\":\n\t\t\t\tif ( selectionData.element ) {\n\t\t\t\t\tformattedData.elementData = {\n\t\t\t\t\t\thash: selectionData.element.dataset.hash,\n\t\t\t\t\t\ttype: selectionData.element.dataset.type,\n\t\t\t\t\t\tblockType: selectionData.blockType,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"image\":\n\t\t\t\tif ( selectionData.metadata ) {\n\t\t\t\t\tformattedData.elementData = {\n\t\t\t\t\t\tsrc: selectionData.src,\n\t\t\t\t\t\twidth: selectionData.metadata.width,\n\t\t\t\t\t\theight: selectionData.metadata.height,\n\t\t\t\t\t\talt: selectionData.metadata.alt,\n\t\t\t\t\t\taspectRatio: selectionData.metadata.aspectRatio,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"svg\":\n\t\t\t\tformattedData.elementData = {\n\t\t\t\t\tsvgId: selectionData.svgId,\n\t\t\t\t\thref: selectionData.href,\n\t\t\t\t\ttextContent: selectionData.textContent,\n\t\t\t\t\tmetadata: selectionData.metadata,\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"text\":\n\t\t\t\t// Text selections may have additional range information\n\t\t\t\tif ( lastRange.value ) {\n\t\t\t\t\tformattedData.elementData = {\n\t\t\t\t\t\thasRange: true,\n\t\t\t\t\t\trangeInfo: \"Available\",\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn formattedData;\n\t}\n\n\t/**\n\t * Setup selection system (initialize strategies)\n\t */\n\tfunction setupSelection() {\n\t\ttry {\n\t\t\tselectionStrategyFactory.setupStrategies();\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to setup selection system:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Find SVG link element (delegated to SVG strategy)\n\t * @param {Element} element - Element to check\n\t * @returns {Element|null} - SVG link or null\n\t */\n\tfunction findSVGLink( element ) {\n\t\tconst svgStrategy = selectionStrategyFactory.getStrategy( \"svg\" );\n\t\tif ( svgStrategy && typeof svgStrategy.findSVGLink === \"function\" ) {\n\t\t\treturn svgStrategy.findSVGLink( element );\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Setup image selection (delegated to image strategy)\n\t */\n\tfunction setupImageSelection() {\n\t\tconst imageStrategy = selectionStrategyFactory.getStrategy( \"image\" );\n\t\tif (\n\t\t\timageStrategy &&\n\t\t\ttypeof imageStrategy.setupImageSelection === \"function\"\n\t\t) {\n\t\t\treturn imageStrategy.setupImageSelection();\n\t\t}\n\t\tconsole.warn( \"Image strategy not available for setup\" );\n\t}\n\n\t/**\n\t * Get selection statistics and performance info\n\t * @returns {Object} - Selection system statistics\n\t */\n\tfunction getSelectionStats() {\n\t\treturn {\n\t\t\tfactory: selectionStrategyFactory.getStatistics(),\n\t\t\tcurrentState: {\n\t\t\t\tisActive: isSelectionActive.value,\n\t\t\t\tisCapturing: isCapturing.value,\n\t\t\t\thasSelection: currentSelection.value !== null,\n\t\t\t\tselectionType: currentSelection.value?.type || null,\n\t\t\t},\n\t\t\tposition: {\n\t\t\t\tselection: {...selectionPosition},\n\t\t\t\tstart: {...startPosition},\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Validate if element can be selected\n\t * @param {Element} element - Element to validate\n\t * @returns {boolean} - Whether element can be selected\n\t */\n\tfunction canSelectElement( element ) {\n\t\tconst strategy = selectionStrategyFactory.getStrategyByElement( element );\n\t\treturn strategy ? strategy.validateTarget( element ) : false;\n\t}\n\n\t/**\n\t * Get appropriate strategy for element\n\t * @param {Element} element - Element to check\n\t * @returns {string|null} - Strategy type or null\n\t */\n\tfunction getElementSelectionType( element ) {\n\t\tconst strategy = selectionStrategyFactory.getStrategyByElement( element );\n\t\treturn strategy ? strategy.getType() : null;\n\t}\n\n\treturn {\n\t\t// State\n\t\tisSelectionActive,\n\t\tcurrentSelection,\n\t\tlastRange,\n\t\tselectionPosition,\n\t\tstartPosition,\n\t\tisCapturing,\n\n\t\t// Core processing methods\n\t\tprocessSelection,\n\t\tprocessTextSelection,\n\t\tprocessDynamicBlockSelection,\n\t\tprocessImageSelection,\n\t\tprocessSVGSelection,\n\n\t\t// Utility methods\n\t\tclearSelection,\n\t\tformatSelectionForAPI,\n\t\tsetupSelection,\n\t\tsetupImageSelection,\n\t\tfindSVGLink,\n\n\t\t// Information and validation\n\t\tgetSelectionStats,\n\t\tcanSelectElement,\n\t\tgetElementSelectionType,\n\n\t\t// Legacy compatibility\n\t\tgetMediaWikiContentRoot,\n\t};\n}\n","/**\n * Hover Effects Composable\n * Manages hover visual effects for selection targets\n * Restores missing hover functionality after refactoring\n */\nimport {SELECTION_CLASSES} from \"../../utils/constants.js\";\nimport {isSelectionEnabled} from \"../selection/shared/SelectionUtils.js\";\n\nexport function useHoverEffects() {\n\tlet isInitialized = false;\n\tconst hoveredElements = new Set();\n\n\t/**\n\t * Initialize hover effects by binding event listeners\n\t */\n\tfunction initializeHoverEffects() {\n\t\tif ( isInitialized ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// Bind dynamic block hover effects\n\t\t\tbindDynamicBlockHoverEffects();\n\n\t\t\t// Bind SVG hover effects\n\t\t\tbindSVGHoverEffects();\n\n\t\t\tisInitialized = true;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to initialize hover effects:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Bind hover effects for dynamic blocks\n\t */\n\tfunction bindDynamicBlockHoverEffects() {\n\t\t// Use event delegation for dynamic content\n\t\tdocument.addEventListener( \"mouseover\", handleDynamicBlockMouseOver, true );\n\t\tdocument.addEventListener( \"mouseout\", handleDynamicBlockMouseOut, true );\n\t}\n\n\t/**\n\t * Bind hover effects for SVG elements\n\t */\n\tfunction bindSVGHoverEffects() {\n\t\t// Use event delegation for dynamic content\n\t\tdocument.addEventListener( \"mouseover\", handleSVGMouseOver, true );\n\t\tdocument.addEventListener( \"mouseout\", handleSVGMouseOut, true );\n\t}\n\n\t/**\n\t * Handle dynamic block mouse over\n\t * @param {Event} event - Mouse over event\n\t */\n\tfunction handleDynamicBlockMouseOver( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\tconst target = event.target;\n\t\tconst dynamicBlock = target.closest( `.${SELECTION_CLASSES.DYNAMIC_BLOCK}` );\n\n\t\tif ( !dynamicBlock ) return;\n\n\t\t// Skip if already has a comment highlight\n\t\tif (\n\t\t\tdynamicBlock.parentElement &&\n\t\t\tArray.from( dynamicBlock.parentElement.classList ).some( ( cls ) =>\n\t\t\t\tcls.startsWith( \"smartcomment-hl-\" ),\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Add hover class\n\t\tdynamicBlock.classList.add( \"hover\" );\n\t\thoveredElements.add( dynamicBlock );\n\t}\n\n\t/**\n\t * Handle dynamic block mouse out\n\t * @param {Event} event - Mouse out event\n\t */\n\tfunction handleDynamicBlockMouseOut( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\tconst target = event.target;\n\t\tconst dynamicBlock = target.closest( `.${SELECTION_CLASSES.DYNAMIC_BLOCK}` );\n\n\t\tif ( !dynamicBlock ) return;\n\n\t\t// Remove hover class\n\t\tdynamicBlock.classList.remove( \"hover\" );\n\t\thoveredElements.delete( dynamicBlock );\n\t}\n\n\t/**\n\t * Handle SVG element mouse over\n\t * @param {Event} event - Mouse over event\n\t */\n\tfunction handleSVGMouseOver( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\tconst target = event.target;\n\n\t\t// Check if this is an SVG link\n\t\tlet svgLink = null;\n\t\tif ( target.tagName === \"a\" && target.closest( \"svg\" ) ) {\n\t\t\tsvgLink = target;\n\t\t} else {\n\t\t\tsvgLink = target.closest( \"svg a\" );\n\t\t}\n\n\t\tif ( !svgLink ) return;\n\n\t\t// Skip if already has a comment highlight - fix: use classList.contains()\n\t\tif (\n\t\t\tsvgLink.classList.contains( \"smartcomment-hl-\" ) ||\n\t\t\tArray.from( svgLink.classList ).some( ( cls ) =>\n\t\t\t\tcls.startsWith( \"smartcomment-hl-\" ),\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Add hover class for SVG styling\n\t\tsvgLink.classList.add( \"sc-svg-hover\" );\n\t\thoveredElements.add( svgLink );\n\n\t\t// Apply visual hover effects\n\t\tapplySVGHoverEffects( svgLink );\n\t}\n\n\t/**\n\t * Handle SVG element mouse out\n\t * @param {Event} event - Mouse out event\n\t */\n\tfunction handleSVGMouseOut( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\tconst target = event.target;\n\n\t\t// Check if this is an SVG link\n\t\tlet svgLink = null;\n\t\tif ( target.tagName === \"a\" && target.closest( \"svg\" ) ) {\n\t\t\tsvgLink = target;\n\t\t} else {\n\t\t\tsvgLink = target.closest( \"svg a\" );\n\t\t}\n\n\t\tif ( !svgLink ) return;\n\n\t\t// Remove hover class\n\t\tsvgLink.classList.remove( \"sc-svg-hover\" );\n\t\thoveredElements.delete( svgLink );\n\n\t\t// Remove visual hover effects\n\t\tremoveSVGHoverEffects( svgLink );\n\t}\n\n\t/**\n\t * Apply visual hover effects to SVG elements\n\t * @param {Element} svgLink - SVG link element\n\t */\n\tfunction applySVGHoverEffects( svgLink ) {\n\t\ttry {\n\t\t\t// Store original styles for restoration\n\t\t\tif ( !svgLink.dataset.originalStyles ) {\n\t\t\t\tconst originalStyles = {};\n\n\t\t\t\t// Store styles for shapes\n\t\t\t\tconst shapes = svgLink.querySelectorAll(\n\t\t\t\t\t\"rect, path, circle, polygon, ellipse\",\n\t\t\t\t);\n\t\t\t\tshapes.forEach( ( shape, index ) => {\n\t\t\t\t\toriginalStyles[ `shape_${index}` ] = {\n\t\t\t\t\t\tfill: shape.style.fill || shape.getAttribute( \"fill\" ),\n\t\t\t\t\t\tstroke: shape.style.stroke || shape.getAttribute( \"stroke\" ),\n\t\t\t\t\t\tstrokeWidth:\n\t\t\t\t\t\t\tshape.style.strokeWidth || shape.getAttribute( \"stroke-width\" ),\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\tsvgLink.dataset.originalStyles = JSON.stringify( originalStyles );\n\t\t\t}\n\n\t\t\t// Apply hover styles via CSS classes (defined in SmartComments.vue)\n\t\t\t// The CSS will handle the visual changes\n\t\t} catch ( error ) {\n\t\t\tconsole.warn( \"Failed to apply SVG hover effects:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Remove visual hover effects from SVG elements\n\t * @param {Element} svgLink - SVG link element\n\t */\n\tfunction removeSVGHoverEffects( svgLink ) {\n\t\ttry {\n\t\t\t// CSS classes handle the restoration automatically\n\t\t\t// Just clean up the stored data\n\t\t\tif ( svgLink.dataset.originalStyles ) {\n\t\t\t\tdelete svgLink.dataset.originalStyles;\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tconsole.warn( \"Failed to remove SVG hover effects:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Clear all hover effects\n\t */\n\tfunction clearAllHoverEffects() {\n\t\thoveredElements.forEach( ( element ) => {\n\t\t\tif ( element.classList.contains( SELECTION_CLASSES.DYNAMIC_BLOCK ) ) {\n\t\t\t\telement.classList.remove( \"hover\" );\n\t\t\t} else if ( element.closest( \"svg\" ) ) {\n\t\t\t\telement.classList.remove( \"sc-svg-hover\" );\n\t\t\t\tremoveSVGHoverEffects( element );\n\t\t\t}\n\t\t} );\n\t\thoveredElements.clear();\n\t}\n\n\t/**\n\t * Destroy hover effects by removing event listeners\n\t */\n\tfunction destroyHoverEffects() {\n\t\tif ( !isInitialized ) return;\n\n\t\ttry {\n\t\t\t// Remove event listeners\n\t\t\tdocument.removeEventListener(\n\t\t\t\t\"mouseover\",\n\t\t\t\thandleDynamicBlockMouseOver,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tdocument.removeEventListener(\n\t\t\t\t\"mouseout\",\n\t\t\t\thandleDynamicBlockMouseOut,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tdocument.removeEventListener( \"mouseover\", handleSVGMouseOver, true );\n\t\t\tdocument.removeEventListener( \"mouseout\", handleSVGMouseOut, true );\n\n\t\t\t// Clear any active hover effects\n\t\t\tclearAllHoverEffects();\n\n\t\t\tisInitialized = false;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to destroy hover effects:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Get hover statistics\n\t * @returns {Object} - Hover statistics\n\t */\n\tfunction getHoverStats() {\n\t\treturn {\n\t\t\tisInitialized,\n\t\t\tactiveHovers: hoveredElements.size,\n\t\t\thoveredElements: Array.from( hoveredElements ).map( ( el ) => ( {\n\t\t\t\ttagName: el.tagName,\n\t\t\t\tclasses: Array.from( el.classList ),\n\t\t\t\ttype: el.closest( \"svg\" ) ? \"svg\" : \"dynamic-block\",\n\t\t\t} ) ),\n\t\t};\n\t}\n\n\treturn {\n\t\tinitializeHoverEffects,\n\t\tdestroyHoverEffects,\n\t\tclearAllHoverEffects,\n\t\tgetHoverStats,\n\n\t\t// State getters\n\t\tget isInitialized() {\n\t\t\treturn isInitialized;\n\t\t},\n\t\tget hoveredElementsCount() {\n\t\t\treturn hoveredElements.size;\n\t\t},\n\t};\n}\n","/**\n * SmartComments Events System\n *\n * Provides a centralized event system for SmartComments components.\n * This includes events from the previous frontend codebase like sc-debug-mode, sc-comment-group-open.\n */\nexport const EVENTS = {\n\t// Core events from previous codebase\n\tSELECTION_ACTIVE: \"sc-selection-active\",\n\tCOMMENT_GROUP_OPEN: \"sc-comment-group-open\",\n\tCOMMENT_GROUP_CLOSE: \"sc-comment-group-close\",\n\tDEBUG_MODE: \"sc-debug-mode\",\n\tOPEN_COMMENT_ID: \"sc-open-comment\",\n\n\t// New Vue frontend events\n\tCOMMENT_CREATED: \"sc-comment-created\",\n\tCOMMENT_UPDATED: \"sc-comment-updated\",\n\tCOMMENT_DELETED: \"sc-comment-deleted\",\n\tCOMMENT_COMPLETED: \"sc-comment-completed\",\n\tHIGHLIGHT_CLICKED: \"sc-highlight-clicked\",\n\tSELECTION_CHANGED: \"sc-selection-changed\",\n\tCOMMENTS_ENABLED: \"sc-comments-enabled\",\n\tCOMMENTS_DISABLED: \"sc-comments-disabled\",\n\n\t// System events\n\tREFRESH_HIGHLIGHTS: \"smartcomments:refresh-highlights\",\n\tREFRESH_TIMELINE: \"smartcomments:refresh-timeline\",\n};\n\n/**\n * SmartComments Events class\n */\nclass SmartCommentsEvents {\n\tconstructor() {\n\t\tthis.listeners = new Map();\n\t\tthis.debugMode = false;\n\n\t\t// Initialize debug mode from URL parameters\n\t\tthis.checkDebugMode();\n\n\t\t// Setup legacy compatibility\n\t\tthis.setupLegacyCompatibility();\n\t}\n\n\t/**\n\t * Check for debug mode in URL parameters\n\t */\n\tcheckDebugMode() {\n\t\tconst urlParams = new URLSearchParams( window.location.search );\n\t\tif (\n\t\t\turlParams.get( \"scenabled\" ) === \"1\" ||\n\t\t\twindow.location.href.indexOf( \"scenabled=1\" ) !== -1\n\t\t) {\n\t\t\tthis.enableDebugMode();\n\t\t}\n\t}\n\n\t/**\n\t * Enable debug mode\n\t */\n\tenableDebugMode() {\n\t\tthis.debugMode = true;\n\t\tthis.trigger( EVENTS.DEBUG_MODE, {enabled: true} );\n\t}\n\n\t/**\n\t * Disable debug mode\n\t */\n\tdisableDebugMode() {\n\t\tthis.debugMode = false;\n\t\tthis.trigger( EVENTS.DEBUG_MODE, {enabled: false} );\n\t}\n\n\t/**\n\t * Trigger an event\n\t * @param {string} eventName - The event name\n\t * @param {*} data - Event data\n\t * @param {HTMLElement} target - Target element (defaults to window)\n\t */\n\ttrigger( eventName, data = {}, target = window ) {\n\t\tconst event = new CustomEvent( eventName, {\n\t\t\tdetail: data,\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t} );\n\n\t\ttarget.dispatchEvent( event );\n\n\t\tif ( target !== window ) {\n\t\t\twindow.dispatchEvent( event );\n\t\t}\n\n\t\treturn event;\n\t}\n\n\t/**\n\t * Listen to an event\n\t * @param {string} eventName - The event name\n\t * @param {Function} callback - Event callback\n\t * @param {HTMLElement} target - Target element (defaults to window)\n\t * @returns {Function} Cleanup function\n\t */\n\ton( eventName, callback, target = window ) {\n\t\tconst wrappedCallback = ( event ) => {\n\t\t\tcallback( event );\n\t\t};\n\n\t\ttarget.addEventListener( eventName, wrappedCallback );\n\n\t\t// Store for cleanup\n\t\tconst listenerKey = `${eventName}_${Date.now()}_${Math.random()}`;\n\t\tthis.listeners.set( listenerKey, {\n\t\t\ttarget,\n\t\t\teventName,\n\t\t\tcallback: wrappedCallback,\n\t\t} );\n\n\t\t// Return cleanup function\n\t\treturn () => {\n\t\t\ttarget.removeEventListener( eventName, wrappedCallback );\n\t\t\tthis.listeners.delete( listenerKey );\n\t\t};\n\t}\n\n\t/**\n\t * Listen to an event once\n\t * @param {string} eventName - The event name\n\t * @param {Function} callback - Event callback\n\t * @param {HTMLElement} target - Target element (defaults to window)\n\t * @returns {Function} Cleanup function\n\t */\n\tonce( eventName, callback, target = window ) {\n\t\tconst cleanup = this.on(\n\t\t\teventName,\n\t\t\t( event ) => {\n\t\t\t\tcleanup();\n\t\t\t\tcallback( event );\n\t\t\t},\n\t\t\ttarget,\n\t\t);\n\n\t\treturn cleanup;\n\t}\n\n\t/**\n\t * Remove all listeners\n\t */\n\tremoveAllListeners() {\n\t\tfor ( const [key, listener] of this.listeners ) {\n\t\t\tlistener.target.removeEventListener(\n\t\t\t\tlistener.eventName,\n\t\t\t\tlistener.callback,\n\t\t\t);\n\t\t}\n\t\tthis.listeners.clear();\n\t}\n\n\t/**\n\t * Setup legacy compatibility with jQuery events\n\t */\n\tsetupLegacyCompatibility() {\n\t\t// Check if jQuery is available\n\t\tif ( typeof $ !== \"undefined\" && $.fn ) {\n\t\t\t// Mirror events to jQuery for legacy compatibility\n\t\t\tObject.values( EVENTS ).forEach( ( eventName ) => {\n\t\t\t\tthis.on( eventName, ( event ) => {\n\t\t\t\t\t$( window ).trigger( eventName, event.detail );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Specific event triggers for common actions\n\t */\n\n\t/**\n\t * Trigger comment group open event\n\t * @param {Object} commentData - Comment data\n\t * @param {Object} position - Position data\n\t */\n\ttriggerCommentGroupOpen( commentData, position = {} ) {\n\t\treturn this.trigger( EVENTS.COMMENT_GROUP_OPEN, {\n\t\t\tcomment: commentData,\n\t\t\tposition,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger comment group close event\n\t */\n\ttriggerCommentGroupClose() {\n\t\treturn this.trigger( EVENTS.COMMENT_GROUP_CLOSE, {\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger selection active event\n\t * @param {Object} selectionData - Selection data\n\t */\n\ttriggerSelectionActive( selectionData ) {\n\t\treturn this.trigger( EVENTS.SELECTION_ACTIVE, {\n\t\t\tselection: selectionData,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger open comment event\n\t * @param {string|number} commentId - Comment ID\n\t */\n\ttriggerOpenComment( commentId ) {\n\t\treturn this.trigger( EVENTS.OPEN_COMMENT_ID, {\n\t\t\tcommentId,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger highlight clicked event\n\t * @param {Object} commentData - Comment data\n\t * @param {Object} position - Click position\n\t */\n\ttriggerHighlightClicked( commentData, position ) {\n\t\treturn this.trigger( EVENTS.HIGHLIGHT_CLICKED, {\n\t\t\tcomment: commentData,\n\t\t\tposition,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger comment created event\n\t * @param {Object} commentData - New comment data\n\t */\n\ttriggerCommentCreated( commentData ) {\n\t\treturn this.trigger( EVENTS.COMMENT_CREATED, {\n\t\t\tcomment: commentData,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger comment updated event\n\t * @param {Object} commentData - Updated comment data\n\t */\n\ttriggerCommentUpdated( commentData ) {\n\t\treturn this.trigger( EVENTS.COMMENT_UPDATED, {\n\t\t\tcomment: commentData,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger comment deleted event\n\t * @param {Object} commentData - Deleted comment data\n\t */\n\ttriggerCommentDeleted( commentData ) {\n\t\treturn this.trigger( EVENTS.COMMENT_DELETED, {\n\t\t\tcomment: commentData,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger comment completed event\n\t * @param {Object} commentData - Completed comment data\n\t */\n\ttriggerCommentCompleted( commentData ) {\n\t\treturn this.trigger( EVENTS.COMMENT_COMPLETED, {\n\t\t\tcomment: commentData,\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger comments enabled event\n\t */\n\ttriggerCommentsEnabled() {\n\t\treturn this.trigger( EVENTS.COMMENTS_ENABLED, {\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger comments disabled event\n\t */\n\ttriggerCommentsDisabled() {\n\t\treturn this.trigger( EVENTS.COMMENTS_DISABLED, {\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger refresh highlights event\n\t */\n\ttriggerRefreshHighlights() {\n\t\treturn this.trigger( EVENTS.REFRESH_HIGHLIGHTS, {\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n\n\t/**\n\t * Trigger refresh timeline event\n\t */\n\ttriggerRefreshTimeline() {\n\t\treturn this.trigger( EVENTS.REFRESH_TIMELINE, {\n\t\t\ttimestamp: Date.now(),\n\t\t} );\n\t}\n}\n\n// Create and export singleton instance\nexport const smartCommentsEvents = new SmartCommentsEvents();\n","/**\n * Selection Events Composable - Refactored\n * Uses new Strategy pattern for consistent selection handling\n * Eliminates duplication and provides centralized event management\n */\nimport {useSelection} from \"./useSelection.js\";\nimport {useHighlightData} from \"../highlights/useHighlightData.js\";\nimport {useHoverEffects} from \"../ui/useHoverEffects.js\";\nimport {useAppStateStore} from \"../../store/appStateStore.js\";\nimport {smartCommentsEvents} from \"../../utils/smartCommentsEvents.js\";\nimport {selectionErrorHandler} from \"../selection/shared/SelectionErrorHandler.js\";\nimport {SELECTION_TIMEOUTS} from \"../../utils/constants.js\";\n\nexport function useSelectionEvents() {\n\tconst selection = useSelection();\n\tconst highlight = useHighlightData();\n\tconst hoverEffects = useHoverEffects();\n\n\t// Event handlers\n\tlet mouseDownHandler, mouseUpHandler, mouseMoveHandler, clickHandler;\n\tlet isEventsBound = false;\n\n\t/**\n\t * Check if selection is currently enabled\n\t * @returns {boolean} - Whether selection is enabled\n\t */\n\tfunction isSelectionEnabled() {\n\t\ttry {\n\t\t\tconst store = useAppStateStore();\n\t\t\treturn store.isEnabled;\n\t\t} catch ( error ) {\n\t\t\tconsole.warn( \"Could not check selection enabled state:\", error );\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Universal selection processor - handles any selection type\n\t * @param {*} target - Selection target (element, range, etc.)\n\t * @param {Event} event - Interaction event\n\t * @param {Object} options - Processing options\n\t * @returns {Promise<Object|null>} - Selection result\n\t */\n\tasync function processUniversalSelection( target, event, options = {} ) {\n\t\tif ( !isSelectionEnabled() ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Default to capturing screenshots\n\t\tconst processingOptions = {\n\t\t\tcaptureScreenshot: true,\n\t\t\t...options,\n\t\t};\n\n\t\ttry {\n\t\t\tconst selectionResult = await selection.processSelection(\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\tprocessingOptions,\n\t\t\t);\n\n\t\t\tif ( selectionResult ) {\n\t\t\t\tawait handleSuccessfulSelection( selectionResult, event );\n\t\t\t\treturn selectionResult;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t} catch ( error ) {\n\t\t\tselectionErrorHandler.handleSelectionError( \"universal\", error, {\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t\toptions: processingOptions,\n\t\t\t} );\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Create a selection from an element and trigger a selection active event\n\t * @param {Event} event - Click/interaction event\n\t */\n\tfunction createSelectionFromElement( event ) {\n\t\tconst element = event.target;\n\n\t\t// Check if this is an SVG link click\n\t\tconst svgLink = selection.findSVGLink( element );\n\t\tif ( svgLink ) {\n\t\t\tevent.preventDefault();\n\t\t\thandleSVGSelection( svgLink, event );\n\t\t\treturn;\n\t\t}\n\n\t\t// For other elements, try to create a text selection\n\t\tif ( !window.rangy || !rangy.getSelection ) {\n\t\t\tconsole.warn( \"Rangy not available for text selection creation\" );\n\t\t\treturn;\n\t\t}\n\n\t\tconst rangySelection = rangy.getSelection();\n\t\tconst textContent = element.textContent || element.innerText || \"\";\n\n\t\tif ( textContent.trim() ) {\n\t\t\ttry {\n\t\t\t\tconst range = rangy.createRange();\n\t\t\t\trange.selectNodeContents( element );\n\n\t\t\t\t// Try to find and select the text content\n\t\t\t\tif ( range.findText && range.findText( textContent.trim() ) ) {\n\t\t\t\t\trangySelection.setSingleRange( range );\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback: select node contents\n\t\t\t\t\trange.selectNodeContents( element );\n\t\t\t\t\trangySelection.setSingleRange( range );\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.warn( \"Failed to create selection from element:\", error );\n\t\t\t\t// Final fallback\n\t\t\t\tconst range = rangy.createRange();\n\t\t\t\trange.selectNodeContents( element );\n\t\t\t\trangySelection.setSingleRange( range );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handle SVG selection asynchronously\n\t * @param {Element} svgLink - SVG link element\n\t * @param {Event} event - Original click event\n\t */\n\tasync function handleSVGSelection( svgLink, event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\ttry {\n\t\t\tconst result = await processUniversalSelection( svgLink, event );\n\t\t\t// Success handling is done in processUniversalSelection\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"SVG selection failed:\", error );\n\t\t\tselectionErrorHandler.handleSelectionError( \"svg\", error, {\n\t\t\t\tsvgLink,\n\t\t\t\tevent,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Handle mouse down events to track start position\n\t * @param {Event} event - Mouse down event\n\t */\n\tfunction handleMouseDown( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\tselection.startPosition.x = event.pageX;\n\t\tselection.startPosition.y = event.pageY;\n\t}\n\n\t/**\n\t * Handle mouse move events to track current position\n\t * @param {Event} event - Mouse move event\n\t */\n\tfunction handleMouseMove( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\t\tif ( selection.isCapturing.value ) return;\n\n\t\tselection.selectionPosition.x = event.pageX;\n\t\tselection.selectionPosition.y = event.pageY;\n\t}\n\n\t/**\n\t * Handle mouse up events for text selection\n\t * @param {Event} event - Mouse up event\n\t */\n\tfunction handleMouseUp( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\t// Add small delay to ensure selection is complete\n\t\tsetTimeout( async () => {\n\t\t\tif ( !window.rangy || !rangy.getSelection ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rangySelection = rangy.getSelection();\n\t\t\tif ( !rangySelection.isCollapsed && rangySelection.rangeCount > 0 ) {\n\t\t\t\ttry {\n\t\t\t\t\tconst range = rangySelection.getRangeAt( 0 );\n\t\t\t\t\tawait processUniversalSelection( range, event );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.error( \"Text selection processing failed:\", error );\n\t\t\t\t\tselectionErrorHandler.handleSelectionError( \"text\", error, {event} );\n\t\t\t\t}\n\t\t\t}\n\t\t}, SELECTION_TIMEOUTS.TEXT_SELECTION_DELAY );\n\t}\n\n\t/**\n\t * Handle click events for dynamic blocks, images, and SVG elements\n\t * @param {Event} event - Click event\n\t */\n\tasync function handleClick( event ) {\n\t\tif ( !isSelectionEnabled() ) return;\n\n\t\tconst target = event.target;\n\n\t\t// Determine what type of element was clicked and process accordingly\n\t\ttry {\n\t\t\t// Check if we can select this element\n\t\t\tif ( selection.canSelectElement( target ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tawait processUniversalSelection( target, event );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Click selection processing failed:\", error );\n\t\t\tselectionErrorHandler.handleSelectionError( \"click\", error, {\n\t\t\t\ttarget,\n\t\t\t\tevent,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Handle successful selection by creating highlight and triggering events\n\t * @param {Object} selectionResult - Selection result data\n\t * @param {Event} event - Original interaction event\n\t */\n\tasync function handleSuccessfulSelection( selectionResult, event ) {\n\t\ttry {\n\t\t\t// Create highlight data\n\t\t\tconst highlightData = createHighlightData( selectionResult );\n\n\t\t\t// Add to highlights\n\t\t\thighlight.addHighlight( selectionResult.type, highlightData );\n\n\t\t\t// Format data for API usage\n\t\t\tconst apiData = selection.formatSelectionForAPI( selectionResult );\n\n\t\t\t// Create event data\n\t\t\tconst eventData = {\n\t\t\t\tselection: selectionResult,\n\t\t\t\tscreenshot: selectionResult.image || null,\n\t\t\t\tapiData: apiData,\n\t\t\t\tposition: {\n\t\t\t\t\tx: event?.pageX || 0,\n\t\t\t\t\ty: event?.pageY || 0,\n\t\t\t\t},\n\t\t\t\thighlight: highlightData,\n\t\t\t\ttimestamp: Date.now(),\n\t\t\t};\n\n\t\t\t// Trigger centralized selection active event\n\t\t\tsmartCommentsEvents.triggerSelectionActive( eventData );\n\n\t\t\t// Emit custom event for legacy compatibility\n\t\t\tconst selectionEvent = new CustomEvent( \"smartcomments:selection\", {\n\t\t\t\tdetail: eventData,\n\t\t\t} );\n\t\t\tdocument.dispatchEvent( selectionEvent );\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to handle successful selection:\", error );\n\t\t\tselectionErrorHandler.handleSelectionError( \"event-handling\", error, {\n\t\t\t\tselectionResult,\n\t\t\t\tevent,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Create highlight data from selection result\n\t * @param {Object} selectionResult - Selection result\n\t * @returns {Object} - Highlight data\n\t */\n\tfunction createHighlightData( selectionResult ) {\n\t\treturn {\n\t\t\tdata_id: generateTempId(),\n\t\t\ttext: selectionResult.text,\n\t\t\tindex: selectionResult.index,\n\t\t\ttype: selectionResult.type,\n\t\t\telement: selectionResult.element || null,\n\t\t\tscreenshot: selectionResult.image || null,\n\t\t\ttimestamp: Date.now(),\n\t\t\tmetadata: selectionResult.metadata || null,\n\t\t\tpos: selectionResult.pos || selectionResult.selector || null,\n\t\t};\n\t}\n\n\t/**\n\t * Generate temporary ID for new selections\n\t * @returns {string} - Temporary ID\n\t */\n\tfunction generateTempId() {\n\t\treturn `temp_${Date.now()}_${Math.random().toString( 36 ).substr( 2, 9 )}`;\n\t}\n\n\t/**\n\t * Show selection error to user (delegated to error handler)\n\t * @param {Error} error - Error that occurred\n\t * @param {string} selectionType - Type of selection that failed\n\t */\n\tfunction showSelectionError( error, selectionType = \"unknown\" ) {\n\t\tselectionErrorHandler.handleSelectionError( selectionType, error );\n\t}\n\n\t/**\n\t * Bind all selection event handlers\n\t */\n\tfunction bindEvents() {\n\t\tif ( isEventsBound ) {\n\t\t\tconsole.warn( \"Selection events already bound\" );\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// Create bound handlers\n\t\t\tmouseDownHandler = handleMouseDown.bind( this );\n\t\t\tmouseUpHandler = handleMouseUp.bind( this );\n\t\t\tmouseMoveHandler = handleMouseMove.bind( this );\n\t\t\tclickHandler = handleClick.bind( this );\n\n\t\t\t// Bind to document\n\t\t\tdocument.addEventListener( \"mousedown\", mouseDownHandler );\n\t\t\tdocument.addEventListener( \"mouseup\", mouseUpHandler );\n\t\t\tdocument.addEventListener( \"mousemove\", mouseMoveHandler );\n\t\t\tdocument.addEventListener( \"click\", clickHandler );\n\n\t\t\t// Initialize hover effects\n\t\t\thoverEffects.initializeHoverEffects();\n\n\t\t\tisEventsBound = true;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to bind selection events:\", error );\n\t\t\tisEventsBound = false;\n\t\t}\n\t}\n\n\t/**\n\t * Unbind all selection event handlers\n\t */\n\tfunction unbindEvents() {\n\t\tif ( !isEventsBound ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// Remove event listeners\n\t\t\tif ( mouseDownHandler )\n\t\t\t\tdocument.removeEventListener( \"mousedown\", mouseDownHandler );\n\t\t\tif ( mouseUpHandler )\n\t\t\t\tdocument.removeEventListener( \"mouseup\", mouseUpHandler );\n\t\t\tif ( mouseMoveHandler )\n\t\t\t\tdocument.removeEventListener( \"mousemove\", mouseMoveHandler );\n\t\t\tif ( clickHandler ) document.removeEventListener( \"click\", clickHandler );\n\n\t\t\t// Clear handlers\n\t\t\tmouseDownHandler = null;\n\t\t\tmouseUpHandler = null;\n\t\t\tmouseMoveHandler = null;\n\t\t\tclickHandler = null;\n\n\t\t\t// Destroy hover effects\n\t\t\thoverEffects.destroyHoverEffects();\n\n\t\t\tisEventsBound = false;\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"Failed to unbind selection events:\", error );\n\t\t}\n\t}\n\n\t/**\n\t * Set up callback for selection creation events\n\t * @param {Function} callback - Callback function\n\t * @returns {Function} - Cleanup function\n\t */\n\tfunction onSelectionCreate( callback ) {\n\t\tif ( typeof callback !== \"function\" ) {\n\t\t\tthrow new Error( \"Selection create callback must be a function\" );\n\t\t}\n\n\t\t// Listen for the custom selection event\n\t\tconst eventHandler = ( event ) => {\n\t\t\tcallback( event.detail );\n\t\t};\n\n\t\tdocument.addEventListener( \"smartcomments:selection\", eventHandler );\n\n\t\t// Return cleanup function\n\t\treturn () => {\n\t\t\tdocument.removeEventListener( \"smartcomments:selection\", eventHandler );\n\t\t};\n\t}\n\n\t/**\n\t * Get event system statistics\n\t * @returns {Object} - Event system statistics\n\t */\n\tfunction getEventStats() {\n\t\treturn {\n\t\t\tisEventsBound,\n\t\t\tselectionStats: selection.getSelectionStats(),\n\t\t\terrorStats: selectionErrorHandler.getErrorStats(),\n\t\t\ttimestamp: Date.now(),\n\t\t};\n\t}\n\n\t/**\n\t * Reset event system (for testing)\n\t */\n\tfunction resetEventSystem() {\n\t\tunbindEvents();\n\t\tselection.clearSelection();\n\t\tselectionErrorHandler.clearErrorStats();\n\t}\n\n\treturn {\n\t\t// Event management\n\t\tbindEvents,\n\t\tunbindEvents,\n\t\tonSelectionCreate,\n\n\t\t// Selection processing\n\t\tprocessUniversalSelection,\n\t\tcreateSelectionFromElement,\n\t\thandleSVGSelection,\n\n\t\t// Event handlers\n\t\thandleMouseDown,\n\t\thandleMouseMove,\n\t\thandleMouseUp,\n\t\thandleClick,\n\n\t\t// Utility and information\n\t\tisSelectionEnabled,\n\t\tshowSelectionError,\n\t\tgetEventStats,\n\t\tresetEventSystem,\n\n\t\t// State access\n\t\tget isEventsBound() {\n\t\t\treturn isEventsBound;\n\t\t},\n\t};\n}\n","import {useAppStateStore} from \"../../store/appStateStore.js\";\nimport {\n\tMEDIAWIKI_SELECTORS,\n\tSMARTCOMMENTS_CLASSES,\n} from \"../../utils/constants.js\";\nimport useMessages from \"../core/useMessages.js\";\nimport {useSelectionEvents} from \"../selection/useSelectionEvents.js\";\n\n/**\n * Composable for handling link prevention when comment mode is enabled\n */\nfunction useLinkPrevention() {\n\tlet clickHandler = null;\n\tlet isEventsBound = false;\n\tconst {messages} = useMessages();\n\n\t/**\n\t * Handle clicks on links and prevent default behavior when comment mode is enabled\n\t */\n\tfunction handleLinkClick( event ) {\n\t\tconst store = useAppStateStore();\n\t\tconst selectOnClick = mw.config.get( \"wgSmartComments\" )?.selectLinksOnClick;\n\n\t\t// Only prevent links when comment mode is enabled\n\t\tif ( !store.isEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = event.target;\n\n\t\t// Function to find link element (HTML or SVG)\n\t\tfunction findLinkElement( element ) {\n\t\t\tlet current = element;\n\t\t\twhile ( current && current !== document ) {\n\t\t\t\t// Check for regular HTML link or SVG link\n\t\t\t\tif (\n\t\t\t\t\t( current.tagName === \"A\" && current.href ) ||\n\t\t\t\t\t( current.tagName === \"a\" &&\n\t\t\t\t\t\tcurrent.getAttributeNS( \"http://www.w3.org/1999/xlink\", \"href\" ) )\n\t\t\t\t) {\n\t\t\t\t\treturn current;\n\t\t\t\t}\n\t\t\t\tcurrent = current.parentElement;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\tconst link = findLinkElement( target );\n\n\t\tif ( link ) {\n\t\t\t// Get href value, handling both regular links and SVG animated strings\n\t\t\tlet hrefValue =\n\t\t\t\tlink.href ||\n\t\t\t\tlink.getAttributeNS( \"http://www.w3.org/1999/xlink\", \"href\" );\n\t\t\tif ( hrefValue?.baseVal !== undefined ) hrefValue = hrefValue.baseVal;\n\n\t\t\tif ( !hrefValue || typeof hrefValue !== \"string\" ) return;\n\n\t\t\t// Only apply link prevention within MediaWiki content area\n\t\t\tconst contentArea = document.getElementById(\n\t\t\t\tMEDIAWIKI_SELECTORS.CONTENT_TEXT,\n\t\t\t);\n\t\t\tif ( !contentArea || !contentArea.contains( link ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't prevent clicks on SmartComments UI elements\n\t\t\tif (\n\t\t\t\ttarget.closest( \".smartcomments\" ) ||\n\t\t\t\ttarget.closest( \".sic-timeline-container\" )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't prevent clicks on editsection links\n\t\t\tif ( target.closest( \".mw-editsection\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if this is a click directly on a comment highlight\n\t\t\tif (\n\t\t\t\ttarget.closest( `[class*=\"${SMARTCOMMENTS_CLASSES.HIGHLIGHT}\"]` ) ||\n\t\t\t\tlink.classList.toString().includes( SMARTCOMMENTS_CLASSES.HIGHLIGHT )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Allow clicks on sc-dynamic-block elements for annotation\n\t\t\tif ( target.closest( `.${SMARTCOMMENTS_CLASSES.DYNAMIC_BLOCK}` ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't prevent clicks on internal anchors (same page navigation)\n\t\t\tif (\n\t\t\t\threfValue.includes( \"#\" ) &&\n\t\t\t\threfValue.split( \"#\" )[ 0 ] === window.location.href.split( \"#\" )[ 0 ]\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if the link contains comment highlights but the click is not on the highlight itself\n\t\t\tconst hasCommentHighlight = link.querySelector(\n\t\t\t\t`[class*=\"${SMARTCOMMENTS_CLASSES.HIGHLIGHT}\"]`,\n\t\t\t);\n\t\t\tif ( hasCommentHighlight ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tmw.notify( messages.linkCommentHighlightWarn(), {\n\t\t\t\t\ttype: \"warn\",\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tautoHideSeconds: 4,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prevent the default link behavior for all other links\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif ( selectOnClick ) {\n\t\t\t\tconst {createSelectionFromElement} = useSelectionEvents();\n\t\t\t\tcreateSelectionFromElement( event );\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tmw.notify( messages.linkDisabledWarn(), {\n\t\t\t\t\ttype: \"warn\",\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tautoHideSeconds: 3,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Bind link prevention events\n\t */\n\tfunction bindEvents() {\n\t\tif ( isEventsBound ) return;\n\n\t\t// Create bound handler\n\t\tclickHandler = handleLinkClick.bind( null );\n\n\t\t// Bind to document to catch all link clicks\n\t\t// Use capture phase to ensure we catch the event before other handlers\n\t\tdocument.addEventListener( \"click\", clickHandler, true );\n\n\t\tisEventsBound = true;\n\t}\n\n\t/**\n\t * Unbind link prevention events\n\t */\n\tfunction unbindEvents() {\n\t\tif ( !isEventsBound || !clickHandler ) return;\n\n\t\tdocument.removeEventListener( \"click\", clickHandler, true );\n\t\tclickHandler = null;\n\t\tisEventsBound = false;\n\t}\n\n\t/**\n\t * Check if link prevention is active\n\t */\n\tfunction isLinkPreventionActive() {\n\t\tconst store = useAppStateStore();\n\t\treturn store.isEnabled;\n\t}\n\n\treturn {\n\t\tbindEvents,\n\t\tunbindEvents,\n\t\tisLinkPreventionActive,\n\t\tisEventsBound: () => isEventsBound,\n\t};\n}\n\nexport {useLinkPrevention};\n","/**\n * Text highlighting composable for wordIndex type highlights\n */\n\n/**\n * Get all text nodes in the given node.\n *\n * @param {Element} node - The node to get text nodes from.\n * @param {Array} textNodes - The array to store the text nodes.\n * @returns {Array} The array of text nodes.\n */\nfunction getTextNodesIn( node, textNodes = [] ) {\n\tif ( node.nodeType === Node.TEXT_NODE ) {\n\t\tif ( node.nodeValue.trim() !== \"\" ) {\n\t\t\ttextNodes.push( node );\n\t\t}\n\t} else {\n\t\tfor ( let i = 0, len = node.childNodes.length; i < len; ++i ) {\n\t\t\tgetTextNodesIn( node.childNodes[ i ], textNodes );\n\t\t}\n\t}\n\treturn textNodes;\n}\n\n/**\n * Decode HTML entities in the given string.\n *\n * @param {string} str - The string to decode.\n * @returns {string} The decoded string.\n */\nfunction decodeHtmlEntities( str ) {\n\treturn str.replace( /&lt;/g, \"<\" ).replace( /&gt;/g, \">\" );\n}\n\nexport function useTextHighlight() {\n\t/**\n\t * Apply a highlight to the given element based on text and its occurrence index.\n\t *\n\t * @param {Element} scopeElement - The element to apply the highlight to.\n\t * @param {Object} highlightData - The highlight data containing the comment information.\n\t * @param {Object} classApplier - The class applier to apply the highlight.\n\t */\n\tfunction applyTextIndexHighlight( scopeElement, highlightData, classApplier ) {\n\t\tconst {comment} = highlightData;\n\t\tif ( !comment || !comment.pos ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"applyTextIndexHighlight: Missing comment or comment.pos\",\n\t\t\t\thighlightData,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst posString = String( comment.pos );\n\t\tconst lastPipePos = posString.lastIndexOf( \"|\" );\n\t\tif ( lastPipePos === -1 ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"applyTextIndexHighlight: Invalid pos string format (missing |)\",\n\t\t\t\tposString,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tlet textToFind = posString.substring( 0, lastPipePos );\n\t\ttextToFind = decodeHtmlEntities( textToFind ); // Ensure text is decoded\n\n\t\tconst index = parseInt( posString.substring( lastPipePos + 1 ), 10 );\n\n\t\tif ( isNaN( index ) || index < 0 ) {\n\t\t\t// Index should be 0 or positive\n\t\t\tconsole.warn(\n\t\t\t\t\"applyTextIndexHighlight: Invalid index (NaN or negative)\",\n\t\t\t\tindex,\n\t\t\t\t\"for pos:\",\n\t\t\t\tposString,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Rangy range for searching\n\t\tconst searchRange = window.rangy.createRange();\n\t\tsearchRange.selectNodeContents( scopeElement );\n\n\t\tlet count = 0;\n\t\tlet found = false;\n\n\t\t// Iterate through text nodes to find the Nth occurrence\n\t\t// rangy.findText is powerful but can be tricky with overlapping/adjacent matches.\n\t\t// A manual iteration like this, though more verbose, gives fine-grained control over occurrence counting.\n\t\tconst textNodes = getTextNodesIn( scopeElement );\n\t\tfor ( const textNode of textNodes ) {\n\t\t\tlet localIndex = textNode.data.indexOf( textToFind );\n\t\t\twhile ( localIndex !== -1 ) {\n\t\t\t\tif ( count === index ) {\n\t\t\t\t\tconst matchRange = window.rangy.createRange();\n\t\t\t\t\tmatchRange.setStart( textNode, localIndex );\n\t\t\t\t\tmatchRange.setEnd( textNode, localIndex + textToFind.length );\n\t\t\t\t\ttry {\n\t\t\t\t\t\tclassApplier.applyToRange( matchRange );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tconsole.error( \"Error applying classApplier to range:\", e, {\n\t\t\t\t\t\t\ttextNode,\n\t\t\t\t\t\t\tlocalIndex,\n\t\t\t\t\t\t\ttextToFind,\n\t\t\t\t\t\t\thighlightData,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t\tlocalIndex = textNode.data.indexOf(\n\t\t\t\t\ttextToFind,\n\t\t\t\t\tlocalIndex + textToFind.length,\n\t\t\t\t); // search from after the current match\n\t\t\t}\n\t\t\tif ( found ) break;\n\t\t}\n\n\t\tif ( !found ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"applyTextIndexHighlight: Text index highlight not found or applied for:\",\n\t\t\t\t{textToFind, index, posString},\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Apply text-based highlights to the given element.\n\t *\n\t * @param {Element} scopeElement - The element to apply highlights to.\n\t * @param {Object} highlightData - The highlight data to apply.\n\t * @param {string} uniqueHighlightClass - The unique highlight class.\n\t * @param {Function} ensureClickListenerIsAttached - Function to ensure click listener is attached.\n\t */\n\tfunction applyTextHighlight(\n\t\tscopeElement,\n\t\thighlightData,\n\t\tuniqueHighlightClass,\n\t\tensureClickListenerIsAttached,\n\t) {\n\t\tif ( !window.rangy ) {\n\t\t\tconsole.error( \"Rangy not initialized. Cannot apply text highlights.\" );\n\t\t\treturn;\n\t\t}\n\n\t\tconst dataCommentId = String( highlightData.comment.data_id );\n\n\t\tlet currentApplier = window.rangy.createClassApplier( uniqueHighlightClass, {\n\t\t\tignoreWhiteSpace: true,\n\t\t\telementTagName: \"span\",\n\t\t\tnormalize: true,\n\t\t\tonElementCreate: ( spanEl, applier ) => {\n\t\t\t\tspanEl.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\tensureClickListenerIsAttached( spanEl, highlightData.comment );\n\t\t\t},\n\t\t} );\n\n\t\t// Call the consolidated function\n\t\tapplyTextIndexHighlight( scopeElement, highlightData, currentApplier );\n\n\t\t// After Rangy application, explicitly find styled elements and ensure listeners.\n\t\t// This is a fallback if onElementCreate didn't fire for all elements or if attributes were missing.\n\t\tconst createdOrClassedElements = scopeElement.querySelectorAll(\n\t\t\t`.${uniqueHighlightClass}`,\n\t\t);\n\t\tif ( createdOrClassedElements.length > 0 ) {\n\t\t\tcreatedOrClassedElements.forEach( ( elementNode ) => {\n\t\t\t\t// Ensure data-comment-id attribute is set (it might not be if onElementCreate didn't fire)\n\t\t\t\tif ( !elementNode.getAttribute( \"data-comment-id\" ) ) {\n\t\t\t\t\telementNode.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\t}\n\t\t\t\t// Ensure the listener is attached, relying on the idempotency of ensureClickListenerIsAttached.\n\t\t\t\tensureClickListenerIsAttached( elementNode, highlightData.comment );\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Remove text-based highlights using Rangy's proper removal method\n\t *\n\t * @param {string} uniqueHighlightClass - The unique highlight class to remove\n\t * @param {Element} scopeElement - The element to search within\n\t * @param {Array} elements - The elements to remove highlights from\n\t */\n\tfunction removeTextHighlight( uniqueHighlightClass, scopeElement, elements ) {\n\t\tif ( !window.rangy ) {\n\t\t\tconsole.warn( \"removeTextHighlight: Rangy not available\" );\n\t\t\treturn;\n\t\t}\n\n\t\t// Create a class applier for this specific highlight class to use Rangy's proper removal\n\t\tconst classApplier = window.rangy.createClassApplier( uniqueHighlightClass, {\n\t\t\tignoreWhiteSpace: true,\n\t\t\telementTagName: \"span\",\n\t\t\tnormalize: true,\n\t\t} );\n\n\t\telements.forEach( ( targetEl ) => {\n\t\t\t// Check if this element has any other smartcomment highlight classes\n\t\t\tconst hasOtherSmartCommentClass = Array.from( targetEl.classList ).some(\n\t\t\t\t( cls ) =>\n\t\t\t\t\tcls.startsWith( \"smartcomment-hl-\" ) && cls !== uniqueHighlightClass,\n\t\t\t);\n\n\t\t\t// For SPAN elements that were likely created by Rangy's text highlighting,\n\t\t\t// use Rangy's proper removal method\n\t\t\tif (\n\t\t\t\ttargetEl.tagName === \"SPAN\" &&\n\t\t\t\ttargetEl.hasAttribute( \"data-comment-id\" )\n\t\t\t) {\n\t\t\t\ttry {\n\t\t\t\t\t// Create a range that encompasses this element's content\n\t\t\t\t\tconst range = window.rangy.createRange();\n\t\t\t\t\trange.selectNodeContents( targetEl );\n\n\t\t\t\t\t// Use the class applier to properly unapply the highlight\n\t\t\t\t\t// This will automatically unwrap the SPAN if it becomes empty\n\t\t\t\t\tclassApplier.undoToRange( range );\n\n\t\t\t\t\t// Remove data-comment-id if no other smartcomment classes remain\n\t\t\t\t\tif ( !hasOtherSmartCommentClass ) {\n\t\t\t\t\t\ttargetEl.removeAttribute( \"data-comment-id\" );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\"removeTextHighlight: Error using Rangy undoToRange, falling back to manual removal:\",\n\t\t\t\t\t\te,\n\t\t\t\t\t);\n\t\t\t\t\t// Fallback to manual removal if Rangy method fails\n\t\t\t\t\tmanuallyRemoveTextHighlight(\n\t\t\t\t\t\ttargetEl,\n\t\t\t\t\t\tuniqueHighlightClass,\n\t\t\t\t\t\thasOtherSmartCommentClass,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Manually remove text highlight (fallback method)\n\t * @param {Element} targetEl - The element to remove highlighting from\n\t * @param {string} uniqueHighlightClass - The highlight class to remove\n\t * @param {boolean} hasOtherSmartCommentClass - Whether the element has other smartcomment classes\n\t */\n\tfunction manuallyRemoveTextHighlight(\n\t\ttargetEl,\n\t\tuniqueHighlightClass,\n\t\thasOtherSmartCommentClass,\n\t) {\n\t\ttargetEl.classList.remove( uniqueHighlightClass );\n\n\t\t// Remove data-comment-id if no other smartcomment classes remain\n\t\tif ( !hasOtherSmartCommentClass ) {\n\t\t\ttargetEl.removeAttribute( \"data-comment-id\" );\n\t\t}\n\n\t\t// Unwrap SPAN elements that were created by highlighting and are now empty/unnecessary\n\t\tif ( targetEl.tagName === \"SPAN\" ) {\n\t\t\tconst shouldUnwrap =\n\t\t\t\t// No more highlight classes\n\t\t\t\t!hasOtherSmartCommentClass &&\n\t\t\t\t// Either no classes at all, or only non-smartcomment classes\n\t\t\t\t( targetEl.classList.length === 0 ||\n\t\t\t\t\t!Array.from( targetEl.classList ).some( ( cls ) =>\n\t\t\t\t\t\tcls.startsWith( \"smartcomment-\" ),\n\t\t\t\t\t) ) &&\n\t\t\t\t// No other attributes that would make this SPAN meaningful\n\t\t\t\t( !targetEl.hasAttributes() ||\n\t\t\t\t\t( targetEl.attributes.length === 1 &&\n\t\t\t\t\t\ttargetEl.hasAttribute( \"class\" ) &&\n\t\t\t\t\t\ttargetEl.classList.length === 0 ) );\n\n\t\t\tif ( shouldUnwrap ) {\n\t\t\t\tconst parent = targetEl.parentNode;\n\t\t\t\tif ( parent ) {\n\t\t\t\t\t// Move all child nodes before the SPAN\n\t\t\t\t\twhile ( targetEl.firstChild ) {\n\t\t\t\t\t\tparent.insertBefore( targetEl.firstChild, targetEl );\n\t\t\t\t\t}\n\t\t\t\t\t// Remove the empty SPAN\n\t\t\t\t\tparent.removeChild( targetEl );\n\t\t\t\t\t// Normalize to merge adjacent text nodes\n\t\t\t\t\ttry {\n\t\t\t\t\t\tparent.normalize();\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\"manuallyRemoveTextHighlight: Error normalizing parent node:\",\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\tapplyTextHighlight,\n\t\tremoveTextHighlight,\n\t\t// Utility functions that might be useful for other composables\n\t\tgetTextNodesIn,\n\t\tdecodeHtmlEntities,\n\t};\n}\n","/**\n * Selector-based highlighting composable for CSS selector and dynamic block highlights\n */\n\nexport function useSelectorHighlight() {\n\t/**\n\t * Apply a highlight to the given element based on the CSS selector.\n\t *\n\t * @param {Element} scopeElement - The element to apply the highlight to.\n\t * @param {Object} highlightData - The highlight data containing the comment information.\n\t * @param {string} uniqueHighlightClass - The unique highlight class string.\n\t * @param {Function} addClickListener - Function to add click listener to the target element.\n\t */\n\tfunction applySelectorHighlight(\n\t\tscopeElement,\n\t\thighlightData,\n\t\tuniqueHighlightClass,\n\t\taddClickListener,\n\t) {\n\t\tconst {comment} = highlightData;\n\t\tif ( !comment || !comment.pos ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"applySelectorHighlight: Missing comment or comment.pos\",\n\t\t\t\thighlightData,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tlet selector = comment.pos;\n\t\tconst classesToAdd = uniqueHighlightClass.split( \" \" );\n\t\tconst dataCommentId = String( comment.data_id );\n\n\t\tif ( selector.startsWith( \"img[\" ) ) {\n\t\t\tapplyImageSelectorHighlight(\n\t\t\t\tscopeElement,\n\t\t\t\tselector,\n\t\t\t\tcomment,\n\t\t\t\tclassesToAdd,\n\t\t\t\tdataCommentId,\n\t\t\t\taddClickListener,\n\t\t\t);\n\t\t} else {\n\t\t\tapplyGenericSelectorHighlight(\n\t\t\t\tscopeElement,\n\t\t\t\tselector,\n\t\t\t\tcomment,\n\t\t\t\tclassesToAdd,\n\t\t\t\tdataCommentId,\n\t\t\t\taddClickListener,\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Apply image selector highlighting (img[hash] format)\n\t *\n\t * @param {Element} scopeElement - The element to apply the highlight to\n\t * @param {string} selector - The image selector\n\t * @param {Object} comment - The comment data\n\t * @param {Array} classesToAdd - Classes to add for highlighting\n\t * @param {string} dataCommentId - The comment ID as string\n\t * @param {Function} addClickListener - Function to add click listener\n\t */\n\tfunction applyImageSelectorHighlight(\n\t\tscopeElement,\n\t\tselector,\n\t\tcomment,\n\t\tclassesToAdd,\n\t\tdataCommentId,\n\t\taddClickListener,\n\t) {\n\t\tconst hash = selector.replace( \"img[\", \"\" ).replace( \"]\", \"\" );\n\n\t\t// First, try to find elements with data-hash attribute that matches the selector\n\t\tconst dynamicBlocksWithHash = scopeElement.querySelectorAll(\n\t\t\t`[data-hash=\"${selector}\"]`,\n\t\t);\n\t\tif ( dynamicBlocksWithHash.length > 0 ) {\n\t\t\tdynamicBlocksWithHash.forEach( ( element ) => {\n\t\t\t\t// Apply highlighting directly to the element with data-hash\n\t\t\t\telement.classList.add( ...classesToAdd );\n\t\t\t\telement.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\taddClickListener( element, comment );\n\t\t\t} );\n\t\t\treturn; // Exit early if we found dynamic blocks\n\t\t}\n\n\t\t// Fallback to original image matching logic\n\t\tconst images = scopeElement.querySelectorAll( \"img\" );\n\t\timages.forEach( ( img ) => {\n\t\t\tif (\n\t\t\t\timg.getAttribute( \"data-original-hash\" ) === hash ||\n\t\t\t\timg.src.includes( hash ) ||\n\t\t\t\t( comment.image_hash && img.src.includes( comment.image_hash ) )\n\t\t\t) {\n\t\t\t\tconst parent = img.closest( \"figure\" ) || img.parentElement;\n\t\t\t\tif ( parent && parent !== scopeElement ) {\n\t\t\t\t\t// Ensure parent is not the body itself if highlighting images directly under body\n\t\t\t\t\tparent.classList.add( ...classesToAdd );\n\t\t\t\t\tparent.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\t\taddClickListener( parent, comment );\n\t\t\t\t} else {\n\t\t\t\t\timg.classList.add( ...classesToAdd );\n\t\t\t\t\timg.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\t\taddClickListener( img, comment );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Apply generic CSS selector highlighting\n\t *\n\t * @param {Element} scopeElement - The element to apply the highlight to\n\t * @param {string} selector - The CSS selector\n\t * @param {Object} comment - The comment data\n\t * @param {Array} classesToAdd - Classes to add for highlighting\n\t * @param {string} dataCommentId - The comment ID as string\n\t * @param {Function} addClickListener - Function to add click listener\n\t */\n\tfunction applyGenericSelectorHighlight(\n\t\tscopeElement,\n\t\tselector,\n\t\tcomment,\n\t\tclassesToAdd,\n\t\tdataCommentId,\n\t\taddClickListener,\n\t) {\n\t\ttry {\n\t\t\tconst elements = scopeElement.querySelectorAll( selector );\n\t\t\telements.forEach( ( targetEl ) => {\n\t\t\t\ttargetEl.classList.add( ...classesToAdd );\n\t\t\t\ttargetEl.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\taddClickListener( targetEl, comment );\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\tconsole.error(\n\t\t\t\t\"Error applying selector highlight with selector:\",\n\t\t\t\tselector,\n\t\t\t\te,\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Remove selector-based highlights\n\t *\n\t * @param {string} uniqueHighlightClass - The unique highlight class to remove\n\t * @param {Element} scopeElement - The element to search within\n\t * @param {Array} elements - The elements to remove highlights from\n\t */\n\tfunction removeSelectorHighlight(\n\t\tuniqueHighlightClass,\n\t\tscopeElement,\n\t\telements,\n\t) {\n\t\telements.forEach( ( targetEl ) => {\n\t\t\t// Check if this element has any other smartcomment highlight classes\n\t\t\tconst hasOtherSmartCommentClass = Array.from( targetEl.classList ).some(\n\t\t\t\t( cls ) =>\n\t\t\t\t\tcls.startsWith( \"smartcomment-hl-\" ) && cls !== uniqueHighlightClass,\n\t\t\t);\n\n\t\t\t// For selector-based highlights, remove manually\n\t\t\ttargetEl.classList.remove( uniqueHighlightClass );\n\n\t\t\t// Remove data-comment-id if no other smartcomment classes remain\n\t\t\tif ( !hasOtherSmartCommentClass ) {\n\t\t\t\ttargetEl.removeAttribute( \"data-comment-id\" );\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn {\n\t\tapplySelectorHighlight,\n\t\tremoveSelectorHighlight,\n\t};\n}\n","/**\n * Event listener management composable for highlighted elements\n */\n\n/**\n * Store attached event listeners to be able to remove them later.\n * Key: data-comment-id (string), Value: Array of { element: HTMLElement, handler: Function, type: string }\n */\nconst attachedListeners = new Map();\n\nexport function useHighlightListeners() {\n\t/**\n\t * Idempotent function to add click listener to an element\n\t *\n\t * @param {HTMLElement} targetEl - The element to attach the listener to\n\t * @param {Object} commentForListener - The comment data for the listener\n\t * @param {Function} onClick - The click callback function\n\t */\n\tfunction ensureClickListenerIsAttached(\n\t\ttargetEl,\n\t\tcommentForListener,\n\t\tonClick,\n\t) {\n\t\tconst currentDataCommentId = String( commentForListener.data_id );\n\n\t\tlet listenersForId = attachedListeners.get( currentDataCommentId );\n\t\tif (\n\t\t\tlistenersForId &&\n\t\t\tlistenersForId.some( ( l ) => l.element === targetEl && l.type === \"click\" )\n\t\t) {\n\t\t\treturn; // Already attached\n\t\t}\n\n\t\tif ( onClick && typeof onClick === \"function\" ) {\n\t\t\tconst clickHandler = ( event ) => {\n\t\t\t\tevent.stopPropagation(); // Prevent event from bubbling up\n\t\t\t\tconst rect = targetEl.getBoundingClientRect();\n\t\t\t\tconst position = {\n\t\t\t\t\ttop: rect.top + window.scrollY,\n\t\t\t\t\tleft: rect.left + window.scrollX,\n\t\t\t\t\tbottom: rect.bottom + window.scrollY,\n\t\t\t\t\tright: rect.right + window.scrollX,\n\t\t\t\t\twidth: rect.width,\n\t\t\t\t\theight: rect.height,\n\t\t\t\t};\n\t\t\t\tonClick( event, commentForListener, position );\n\t\t\t};\n\n\t\t\ttargetEl.addEventListener( \"click\", clickHandler );\n\t\t\ttargetEl.style.cursor = \"pointer\"; // Indicate clickable\n\n\t\t\tif ( !attachedListeners.has( currentDataCommentId ) ) {\n\t\t\t\tattachedListeners.set( currentDataCommentId, [] );\n\t\t\t}\n\t\t\tattachedListeners.get( currentDataCommentId ).push( {\n\t\t\t\telement: targetEl,\n\t\t\t\thandler: clickHandler,\n\t\t\t\ttype: \"click\",\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Clear event listeners for a specific comment ID\n\t *\n\t * @param {string} commentIdStr - The comment ID as string\n\t */\n\tfunction clearListenersForCommentId( commentIdStr ) {\n\t\tif ( attachedListeners.has( commentIdStr ) ) {\n\t\t\tattachedListeners\n\t\t\t\t.get( commentIdStr )\n\t\t\t\t.forEach( ( {element, handler, type} ) => {\n\t\t\t\t\telement.removeEventListener( type, handler );\n\t\t\t\t\telement.style.cursor = \"\"; // Reset cursor\n\t\t\t\t} );\n\t\t\tattachedListeners.delete( commentIdStr );\n\t\t}\n\t}\n\n\t/**\n\t * Clear all managed event listeners\n\t */\n\tfunction clearAllListeners() {\n\t\tattachedListeners.forEach( ( listeners, commentIdStr ) => {\n\t\t\tlisteners.forEach( ( {element, handler, type} ) => {\n\t\t\t\telement.removeEventListener( type, handler );\n\t\t\t\tif ( element ) element.style.cursor = \"\";\n\t\t\t} );\n\t\t} );\n\t\tattachedListeners.clear();\n\t}\n\n\t/**\n\t * Get all attached listeners (for debugging or inspection)\n\t *\n\t * @returns {Map} The map of attached listeners\n\t */\n\tfunction getAttachedListeners() {\n\t\treturn attachedListeners;\n\t}\n\n\t/**\n\t * Check if a listener is attached to a specific element for a comment\n\t *\n\t * @param {HTMLElement} element - The element to check\n\t * @param {string} commentId - The comment ID\n\t * @param {string} type - The event type (default: 'click')\n\t * @returns {boolean} Whether a listener is attached\n\t */\n\tfunction hasListenerAttached( element, commentId, type = \"click\" ) {\n\t\tconst commentIdStr = String( commentId );\n\t\tconst listenersForId = attachedListeners.get( commentIdStr );\n\t\treturn (\n\t\t\tlistenersForId &&\n\t\t\tlistenersForId.some( ( l ) => l.element === element && l.type === type )\n\t\t);\n\t}\n\n\treturn {\n\t\tensureClickListenerIsAttached,\n\t\tclearListenersForCommentId,\n\t\tclearAllListeners,\n\t\tgetAttachedListeners,\n\t\thasListenerAttached,\n\t};\n}\n","/**\n * Refactored highlight manager using Strategy pattern and shared utilities\n * This eliminates code duplication and improves maintainability\n */\n\nimport {useTextHighlight} from \"./useTextHighlight.js\";\nimport {useSelectorHighlight} from \"./useSelectorHighlight.js\";\nimport {useSVGHighlight} from \"./useSVGHighlight.js\";\nimport {useHighlightListeners} from \"./useHighlightListeners.js\";\nimport {\n\tgenerateHighlightClass,\n\tfindHighlightedElements,\n\tbatchRemoveHighlights,\n\tcleanupHighlightElement,\n\tunwrapEmptySpan,\n\tHIGHLIGHT_CLASS_PREFIX,\n} from \"./shared/HighlightUtils.js\";\nimport {errorHandler} from \"./shared/HighlightErrorHandler.js\";\n\n/**\n * Strategy factory for creating highlight strategies\n */\nclass HighlightStrategyFactory {\n\tstatic strategies = null;\n\n\tstatic initialize() {\n\t\tif ( this.strategies ) return this.strategies;\n\n\t\tconst {applyTextHighlight, removeTextHighlight} = useTextHighlight();\n\t\tconst {applySelectorHighlight, removeSelectorHighlight} =\n\t\t\tuseSelectorHighlight();\n\t\tconst {applySVGHighlight, removeSVGHighlight} = useSVGHighlight();\n\n\t\tthis.strategies = {\n\t\t\twordIndex: {apply: applyTextHighlight, remove: removeTextHighlight},\n\t\t\tselector: {\n\t\t\t\tapply: applySelectorHighlight,\n\t\t\t\tremove: removeSelectorHighlight,\n\t\t\t},\n\t\t\tsvg: {apply: applySVGHighlight, remove: removeSVGHighlight},\n\t\t};\n\n\t\treturn this.strategies;\n\t}\n\n\tstatic getStrategy( type ) {\n\t\tconst strategies = this.initialize();\n\t\tconst strategy = strategies[ type ];\n\n\t\tif ( !strategy ) {\n\t\t\terrorHandler.handleValidationError( `Unknown highlight type: ${type}`, {\n\t\t\t\ttype,\n\t\t\t} );\n\t\t}\n\n\t\treturn strategy;\n\t}\n}\n\nfunction useHighlightManager() {\n\tconst {\n\t\tensureClickListenerIsAttached,\n\t\tclearListenersForCommentId,\n\t\tclearAllListeners,\n\t} = useHighlightListeners();\n\n\t/**\n\t * Apply highlights to the given element using Strategy pattern\n\t *\n\t * @param {Element} scopeElement - The element to apply highlights to\n\t * @param {Array} highlights - The highlights to apply\n\t * @param {Function} [onClick] - Optional callback for when a highlight is clicked\n\t */\n\tfunction applyHighlights( scopeElement, highlights, onClick ) {\n\t\t// Input validation\n\t\tif ( !highlights || !Array.isArray( highlights ) ) {\n\t\t\terrorHandler.handleValidationError(\n\t\t\t\t\"Highlights must be an array of highlight objects\",\n\t\t\t\t{highlights},\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !window.rangy ) {\n\t\t\terrorHandler.handleRangyError(\n\t\t\t\t\"Rangy not initialized. Cannot apply highlights\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\thighlights.forEach( ( highlightData ) => {\n\t\t\terrorHandler.safeExecute(\n\t\t\t\t() => {\n\t\t\t\t\t// Validate highlight data\n\t\t\t\t\terrorHandler.validateHighlightData( highlightData );\n\n\t\t\t\t\tconst uniqueHighlightClass = generateHighlightClass(\n\t\t\t\t\t\thighlightData.comment.data_id,\n\t\t\t\t\t);\n\n\t\t\t\t\t// Create click listener wrapper\n\t\t\t\t\tconst ensureClickListener = ( targetEl, commentForListener ) => {\n\t\t\t\t\t\tensureClickListenerIsAttached(\n\t\t\t\t\t\t\ttargetEl,\n\t\t\t\t\t\t\tcommentForListener,\n\t\t\t\t\t\t\tonClick,\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\t// Get strategy for this highlight type\n\t\t\t\t\tconst strategy = HighlightStrategyFactory.getStrategy(\n\t\t\t\t\t\thighlightData.type,\n\t\t\t\t\t);\n\n\t\t\t\t\t// Apply highlight using strategy\n\t\t\t\t\tstrategy.apply(\n\t\t\t\t\t\tscopeElement,\n\t\t\t\t\t\thighlightData,\n\t\t\t\t\t\tuniqueHighlightClass,\n\t\t\t\t\t\tensureClickListener,\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t`apply ${highlightData?.type || \"unknown\"} highlight`,\n\t\t\t\t{\n\t\t\t\t\tcommentId: highlightData?.comment?.data_id,\n\t\t\t\t\ttype: highlightData?.type,\n\t\t\t\t},\n\t\t\t);\n\t\t} );\n\t}\n\n\t/**\n\t * Clear specific highlights using Strategy pattern\n\t *\n\t * @param {Element} scopeElement - The element to clear highlights from\n\t * @param {Array} [highlightsToClear] - Specific highlights to remove\n\t */\n\tfunction clearHighlights( scopeElement, highlightsToClear ) {\n\t\tif ( !highlightsToClear || !Array.isArray( highlightsToClear ) ) {\n\t\t\terrorHandler.handleValidationError( \"highlightsToClear must be an array\", {\n\t\t\t\thighlightsToClear,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !window.rangy ) {\n\t\t\terrorHandler.handleRangyError(\n\t\t\t\t\"Rangy not available for clearing highlights\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\thighlightsToClear.forEach( ( highlightData ) => {\n\t\t\terrorHandler.safeExecute(\n\t\t\t\t() => {\n\t\t\t\t\tif ( !highlightData?.comment?.data_id ) {\n\t\t\t\t\t\treturn; // Skip invalid data\n\t\t\t\t\t}\n\n\t\t\t\t\tconst commentIdStr = String( highlightData.comment.data_id );\n\t\t\t\t\tconst uniqueHighlightClass = generateHighlightClass( commentIdStr );\n\n\t\t\t\t\t// Clear event listeners\n\t\t\t\t\tclearListenersForCommentId( commentIdStr );\n\n\t\t\t\t\t// Find elements with this highlight class\n\t\t\t\t\tconst elements = findHighlightedElements( scopeElement, commentIdStr );\n\t\t\t\t\tif ( elements.length === 0 ) return;\n\n\t\t\t\t\t// Get strategy and remove highlights\n\t\t\t\t\tconst strategy = HighlightStrategyFactory.getStrategy(\n\t\t\t\t\t\thighlightData.type,\n\t\t\t\t\t);\n\t\t\t\t\tstrategy.remove(\n\t\t\t\t\t\tuniqueHighlightClass,\n\t\t\t\t\t\tscopeElement,\n\t\t\t\t\t\tArray.from( elements ),\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t`clear ${highlightData?.type || \"unknown\"} highlight`,\n\t\t\t\t{\n\t\t\t\t\tcommentId: highlightData?.comment?.data_id,\n\t\t\t\t\ttype: highlightData?.type,\n\t\t\t\t},\n\t\t\t);\n\t\t} );\n\t}\n\n\t/**\n\t * Clear all highlights (optimized fallback method)\n\t *\n\t * @param {Element} scopeElement - The element to clear highlights from\n\t */\n\tfunction clearAllHighlights( scopeElement ) {\n\t\terrorHandler.safeExecute(\n\t\t\t() => {\n\t\t\t\tclearAllListeners();\n\n\t\t\t\t// Find all potentially highlighted elements\n\t\t\t\tconst potentiallyHighlighted = scopeElement.querySelectorAll(\n\t\t\t\t\t`[data-comment-id], [class*=\"${HIGHLIGHT_CLASS_PREFIX}\"]`,\n\t\t\t\t);\n\n\t\t\t\tpotentiallyHighlighted.forEach( ( element ) => {\n\t\t\t\t\t// Remove all smartcomment highlight classes\n\t\t\t\t\tconst classesToRemove = Array.from( element.classList ).filter( ( cls ) =>\n\t\t\t\t\t\tcls.startsWith( HIGHLIGHT_CLASS_PREFIX ),\n\t\t\t\t\t);\n\n\t\t\t\t\tclassesToRemove.forEach( ( cls ) => {\n\t\t\t\t\t\tcleanupHighlightElement( element, cls );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Unwrap empty SPAN elements\n\t\t\t\t\tif ( element.tagName === \"SPAN\" ) {\n\t\t\t\t\t\tunwrapEmptySpan( element );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t},\n\t\t\t\"clear all highlights\",\n\t\t\t{scopeElement: scopeElement?.tagName},\n\t\t);\n\t}\n\n\t/**\n\t * Remove highlights for a specific comment with type detection\n\t *\n\t * @param {string|number} commentId - The ID of the comment to remove highlights for\n\t * @param {Element} [scopeElement] - The element to search within\n\t */\n\tfunction removeCommentHighlight( commentId, scopeElement = null ) {\n\t\tconst targetElement =\n\t\t\tscopeElement ||\n\t\t\tdocument.getElementById( \"mw-content-text\" ) ||\n\t\t\tdocument.body;\n\n\t\terrorHandler.safeExecute(\n\t\t\t() => {\n\t\t\t\tif ( !window.rangy ) {\n\t\t\t\t\terrorHandler.handleRangyError(\n\t\t\t\t\t\t\"Rangy not available for comment highlight removal\",\n\t\t\t\t\t\t{commentId},\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst commentIdStr = String( commentId );\n\t\t\t\tclearListenersForCommentId( commentIdStr );\n\n\t\t\t\tconst elements = findHighlightedElements( targetElement, commentIdStr );\n\t\t\t\tif ( elements.length === 0 ) return;\n\n\t\t\t\t// Detect highlight type based on element characteristics\n\t\t\t\tconst highlightType = detectHighlightType( Array.from( elements ) );\n\n\t\t\t\tif ( highlightType ) {\n\t\t\t\t\tconst strategy = HighlightStrategyFactory.getStrategy( highlightType );\n\t\t\t\t\tconst uniqueHighlightClass = generateHighlightClass( commentIdStr );\n\t\t\t\t\tstrategy.remove(\n\t\t\t\t\t\tuniqueHighlightClass,\n\t\t\t\t\t\ttargetElement,\n\t\t\t\t\t\tArray.from( elements ),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback to manual cleanup\n\t\t\t\t\tconst uniqueHighlightClass = generateHighlightClass( commentIdStr );\n\t\t\t\t\tbatchRemoveHighlights( targetElement, uniqueHighlightClass );\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"remove comment highlight\",\n\t\t\t{commentId, scopeElement: targetElement?.tagName},\n\t\t);\n\t}\n\n\t/**\n\t * Detect highlight type based on element characteristics\n\t *\n\t * @param {Element[]} elements - Elements to analyze\n\t * @returns {string|null} - Detected highlight type or null\n\t */\n\tfunction detectHighlightType( elements ) {\n\t\t// Check for SPAN elements (likely text highlights)\n\t\tconst hasSpanElements = elements.some(\n\t\t\t( el ) => el.tagName === \"SPAN\" && el.hasAttribute( \"data-comment-id\" ),\n\t\t);\n\n\t\t// Check for SVG-related elements\n\t\tconst hasSVGElements = elements.some(\n\t\t\t( el ) =>\n\t\t\t\tel.hasAttribute( \"data-svg-id\" ) ||\n\t\t\t\tel.closest( \"svg\" ) ||\n\t\t\t\t( el.tagName === \"a\" && el.closest( \"svg\" ) ),\n\t\t);\n\n\t\tif ( hasSpanElements ) return \"wordIndex\";\n\t\tif ( hasSVGElements ) return \"svg\";\n\t\treturn \"selector\"; // Default to selector for other elements\n\t}\n\n\treturn {\n\t\tapplyHighlights,\n\t\tclearHighlights,\n\t\tclearAllHighlights,\n\t\tremoveCommentHighlight,\n\t};\n}\n\nexport {useHighlightManager};\n","/**\n * SVG highlighting composable for svg[id] type highlights\n */\nimport {sanitizeIdString} from \"../selection/shared/SelectionUtils.js\";\n\nexport function useSVGHighlight() {\n\t/**\n\t * Apply a highlight to SVG elements based on the svg[id] selector.\n\t *\n\t * @param {Element} scopeElement - The element to apply the highlight to.\n\t * @param {Object} highlightData - The highlight data containing the comment information.\n\t * @param {string} uniqueHighlightClass - The unique highlight class string.\n\t * @param {Function} addClickListener - Function to add click listener to the target element.\n\t */\n\tfunction applySVGHighlight(\n\t\tscopeElement,\n\t\thighlightData,\n\t\tuniqueHighlightClass,\n\t\taddClickListener,\n\t) {\n\t\tconst {comment} = highlightData;\n\t\tif ( !comment || !comment.pos ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"applySVGHighlight: Missing comment or comment.pos\",\n\t\t\t\thighlightData,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst selector = comment.pos;\n\t\tconst classesToAdd = uniqueHighlightClass.split( \" \" );\n\t\tconst dataCommentId = String( comment.data_id );\n\n\t\t// Extract SVG ID from svg[id] format\n\t\tif ( !selector.startsWith( \"svg[\" ) || !selector.endsWith( \"]\" ) ) {\n\t\t\tconsole.warn( \"applySVGHighlight: Invalid SVG selector format:\", selector );\n\t\t\treturn;\n\t\t}\n\n\t\tconst svgId = selector.slice( 4, -1 ); // Remove 'svg[' and ']'\n\n\t\t// Try immediate highlighting first\n\t\tconst immediateResult = applySVGSelectorHighlight(\n\t\t\tscopeElement,\n\t\t\tsvgId,\n\t\t\tcomment,\n\t\t\tclassesToAdd,\n\t\t\tdataCommentId,\n\t\t\taddClickListener,\n\t\t);\n\n\t\t// If not found immediately and we're likely in a non-debug environment, try again after a short delay\n\t\tif ( !immediateResult ) {\n\t\t\tsetTimeout( () => {\n\t\t\t\tapplySVGSelectorHighlight(\n\t\t\t\t\tscopeElement,\n\t\t\t\t\tsvgId,\n\t\t\t\t\tcomment,\n\t\t\t\t\tclassesToAdd,\n\t\t\t\t\tdataCommentId,\n\t\t\t\t\taddClickListener,\n\t\t\t\t);\n\t\t\t}, 100 ); // 100ms delay to allow DOM to fully load\n\t\t}\n\t}\n\n\t/**\n\t * Apply SVG selector highlighting by finding SVG links with matching ID\n\t *\n\t * @param {Element} scopeElement - The element to apply the highlight to\n\t * @param {string} svgId - The SVG unique ID to match\n\t * @param {Object} comment - The comment data\n\t * @param {Array} classesToAdd - Classes to add for highlighting\n\t * @param {string} dataCommentId - The comment ID as string\n\t * @param {Function} addClickListener - Function to add click listener\n\t * @returns {boolean} - True if highlighting was successfully applied\n\t */\n\tfunction applySVGSelectorHighlight(\n\t\tscopeElement,\n\t\tsvgId,\n\t\tcomment,\n\t\tclassesToAdd,\n\t\tdataCommentId,\n\t\taddClickListener,\n\t) {\n\t\tlet found = false;\n\n\t\t// Strategy 1: Look for elements with data-svg-id attribute\n\t\tconst elementsWithSvgId = scopeElement.querySelectorAll(\n\t\t\t`[data-svg-id=\"${svgId}\"]`,\n\t\t);\n\t\tif ( elementsWithSvgId.length > 0 ) {\n\t\t\telementsWithSvgId.forEach( ( element ) => {\n\t\t\t\telement.classList.add( ...classesToAdd );\n\t\t\t\telement.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\taddClickListener( element, comment );\n\t\t\t\tfound = true;\n\t\t\t} );\n\t\t}\n\n\t\t// Strategy 2: Look for SVG anchor elements and try to match based on href or content\n\t\tif ( !found ) {\n\t\t\tconst svgLinks = scopeElement.querySelectorAll( \"svg a\" );\n\t\t\tsvgLinks.forEach( ( svgLink, index ) => {\n\t\t\t\tif ( matchesSVGId( svgLink, svgId ) ) {\n\t\t\t\t\t// Store the SVG ID as a data attribute for future reference\n\t\t\t\t\tsvgLink.setAttribute( \"data-svg-id\", svgId );\n\t\t\t\t\tsvgLink.classList.add( ...classesToAdd );\n\t\t\t\t\tsvgLink.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\t\taddClickListener( svgLink, comment );\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Strategy 3: Fallback - look for any SVG elements that might contain the ID in various attributes\n\t\tif ( !found ) {\n\t\t\tconst allSvgElements = scopeElement.querySelectorAll(\n\t\t\t\t\"svg *[href], svg *[xlink\\\\:href]\",\n\t\t\t);\n\t\t\tallSvgElements.forEach( ( element, index ) => {\n\t\t\t\tif ( matchesSVGId( element, svgId ) ) {\n\t\t\t\t\tconst targetElement = element.closest( \"a\" ) || element;\n\t\t\t\t\ttargetElement.setAttribute( \"data-svg-id\", svgId );\n\t\t\t\t\ttargetElement.classList.add( ...classesToAdd );\n\t\t\t\t\ttargetElement.setAttribute( \"data-comment-id\", dataCommentId );\n\t\t\t\t\taddClickListener( targetElement, comment );\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tif ( !found ) {\n\t\t\tconsole.warn( \"applySVGHighlight: SVG element not found for ID:\", svgId );\n\t\t}\n\n\t\treturn found;\n\t}\n\n\t/**\n\t * Check if an SVG link matches the given SVG ID\n\t *\n\t * @param {Element} svgElement - The SVG element to check\n\t * @param {string} svgId - The SVG ID to match against\n\t * @returns {boolean} - True if the element matches the SVG ID\n\t */\n\tfunction matchesSVGId( svgElement, svgId ) {\n\t\t// Check if it already has the data-svg-id attribute\n\t\tif ( svgElement.getAttribute( \"data-svg-id\" ) === svgId ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if it matches the expected ID generation patterns from useSVGSelection\n\t\tconst href =\n\t\t\tsvgElement.getAttribute( \"xlink:href\" ) || svgElement.getAttribute( \"href\" );\n\n\t\t// Pattern 1: svg-href-{segment}\n\t\tif ( svgId.startsWith( \"svg-href-\" ) && href ) {\n\t\t\ttry {\n\t\t\t\tconst url = new URL( href );\n\t\t\t\tconst pathSegments = url.pathname.split( \"/\" ).filter( Boolean );\n\t\t\t\tconst lastSegment = pathSegments[ pathSegments.length - 1 ];\n\n\t\t\t\tif ( lastSegment && lastSegment !== \"index.php\" ) {\n\t\t\t\t\t// Apply the same sanitization logic as SVGSelectionStrategy\n\t\t\t\t\tconst sanitizedSegment = sanitizeIdString( lastSegment );\n\t\t\t\t\tconst expectedId = `svg-href-${sanitizedSegment}`.trim();\n\t\t\t\t\tconst cleanSvgId = svgId.trim();\n\n\t\t\t\t\tif ( cleanSvgId === expectedId ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch ( e ) {\n\t\t\t\t// Invalid URL, use as is but sanitized\n\t\t\t\tconst sanitizedHref = sanitizeIdString( href );\n\t\t\t\tconst expectedId = `svg-href-${sanitizedHref}`.trim();\n\t\t\t\tconst cleanSvgId = svgId.trim();\n\n\t\t\t\tif ( cleanSvgId === expectedId ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Pattern 2: svg-text-{text}-{position}\n\t\tif ( svgId.startsWith( \"svg-text-\" ) ) {\n\t\t\tconst textContent = extractSVGTextContent( svgElement );\n\t\t\tif ( textContent ) {\n\t\t\t\tconst rect = svgElement.getBoundingClientRect();\n\t\t\t\tconst positionHash = `${Math.round( rect.left )}-${Math.round( rect.top )}`;\n\t\t\t\tconst cleanText = sanitizeIdString( textContent.toLowerCase() );\n\t\t\t\tconst expectedId = `svg-text-${cleanText}-${positionHash}`;\n\n\t\t\t\tif ( svgId === expectedId ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Pattern 3: svg-fallback-{hash}\n\t\tif ( svgId.startsWith( \"svg-fallback-\" ) ) {\n\t\t\t// For fallback patterns, we can try to regenerate the hash and compare\n\t\t\ttry {\n\t\t\t\tconst elementInfo = {\n\t\t\t\t\ttagName: svgElement.tagName,\n\t\t\t\t\tposition: svgElement.getBoundingClientRect(),\n\t\t\t\t\tchildCount: svgElement.children.length,\n\t\t\t\t};\n\t\t\t\tconst fallbackHash = btoa( JSON.stringify( elementInfo ) )\n\t\t\t\t\t.replace( /[^a-zA-Z0-9]/g, \"\" )\n\t\t\t\t\t.substring( 0, 16 );\n\t\t\t\tconst expectedId = `svg-fallback-${fallbackHash}`;\n\n\t\t\t\tif ( svgId === expectedId ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} catch ( e ) {\n\t\t\t\t// Hash generation failed, skip this match\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Extract text content from SVG element (helper function)\n\t *\n\t * @param {Element} svgElement - The SVG element\n\t * @returns {string} - Extracted text content\n\t */\n\tfunction extractSVGTextContent( svgElement ) {\n\t\t// Look for text elements and tspan elements\n\t\tconst textElements = svgElement.querySelectorAll( \"text, tspan\" );\n\t\tconst textParts = [];\n\n\t\ttextElements.forEach( ( textElement ) => {\n\t\t\tconst text = textElement.textContent.trim();\n\t\t\tif ( text && !textParts.includes( text ) ) {\n\t\t\t\ttextParts.push( text );\n\t\t\t}\n\t\t} );\n\n\t\t// Also check for title element\n\t\tconst titleElement = svgElement.querySelector( \"title\" );\n\t\tif ( titleElement && titleElement.textContent.trim() ) {\n\t\t\tconst titleText = titleElement.textContent.trim();\n\t\t\tif ( !textParts.includes( titleText ) ) {\n\t\t\t\ttextParts.unshift( titleText ); // Add title at the beginning\n\t\t\t}\n\t\t}\n\n\t\treturn textParts.join( \" \" );\n\t}\n\n\t/**\n\t * Remove SVG-based highlights\n\t *\n\t * @param {string} uniqueHighlightClass - The unique highlight class to remove\n\t * @param {Element} scopeElement - The element to search within\n\t * @param {Array} elements - The elements to remove highlights from\n\t */\n\tfunction removeSVGHighlight( uniqueHighlightClass, scopeElement, elements ) {\n\t\telements.forEach( ( targetEl ) => {\n\t\t\t// Check if this element has any other smartcomment highlight classes\n\t\t\tconst hasOtherSmartCommentClass = Array.from( targetEl.classList ).some(\n\t\t\t\t( cls ) =>\n\t\t\t\t\tcls.startsWith( \"smartcomment-hl-\" ) && cls !== uniqueHighlightClass,\n\t\t\t);\n\n\t\t\t// For SVG-based highlights, remove manually\n\t\t\ttargetEl.classList.remove( uniqueHighlightClass );\n\n\t\t\t// Remove data-comment-id if no other smartcomment classes remain\n\t\t\tif ( !hasOtherSmartCommentClass ) {\n\t\t\t\ttargetEl.removeAttribute( \"data-comment-id\" );\n\t\t\t}\n\n\t\t\t// Optionally remove data-svg-id if no other smartcomment classes remain\n\t\t\t// This keeps the ID for potential future re-highlighting\n\t\t\t// targetEl.removeAttribute('data-svg-id');\n\t\t} );\n\t}\n\n\treturn {\n\t\tapplySVGHighlight,\n\t\tremoveSVGHighlight,\n\t};\n}\n","import {defineStore} from \"pinia\";\nimport useComments from \"../composables/features/useComments.js\";\nimport {useHighlightData} from \"../composables/highlights/useHighlightData.js\";\nimport {useHighlightManager} from \"../composables/highlights/useHighlightManager.js\";\nimport {smartCommentsEvents, EVENTS} from \"../utils/smartCommentsEvents.js\";\n\nexport default defineStore( \"commentsStore\", {\n\tstate: () => ( {\n\t\tcomments: [],\n\t\tcurrentCommentId: null,\n\t\tisLoading: false,\n\t\terror: null,\n\n\t\t// Dialog state management\n\t\tactiveComment: null,\n\t\tcommentPosition: null,\n\t\tisCommentDialogVisible: false,\n\n\t\t// New comment dialog state\n\t\tisNewCommentDialogVisible: false,\n\t\tnewCommentSelection: null,\n\t} ),\n\n\tgetters: {\n\t\tgetCurrentComment: ( state ) => {\n\t\t\treturn (\n\t\t\t\tstate.comments.find(\n\t\t\t\t\t( comment ) =>\n\t\t\t\t\t\t( comment.id && comment.id === state.currentCommentId ) ||\n\t\t\t\t\t\t( comment.data_id && comment.data_id === state.currentCommentId ),\n\t\t\t\t) || null\n\t\t\t);\n\t\t},\n\n\t\tgetCurrentCommentIndex: ( state ) => {\n\t\t\tconst openComments = state.comments.filter(\n\t\t\t\t( comment ) => comment.status !== \"completed\",\n\t\t\t);\n\t\t\treturn openComments.findIndex(\n\t\t\t\t( comment ) =>\n\t\t\t\t\t( comment.id && comment.id === state.currentCommentId ) ||\n\t\t\t\t\t( comment.data_id && comment.data_id === state.currentCommentId ),\n\t\t\t);\n\t\t},\n\n\t\thasNextComment: ( state ) => {\n\t\t\tconst openComments = state.comments.filter(\n\t\t\t\t( comment ) => comment.status !== \"completed\",\n\t\t\t);\n\t\t\tconst currentIndex = openComments.findIndex(\n\t\t\t\t( comment ) =>\n\t\t\t\t\t( comment.id && comment.id === state.currentCommentId ) ||\n\t\t\t\t\t( comment.data_id && comment.data_id === state.currentCommentId ),\n\t\t\t);\n\t\t\treturn currentIndex !== -1 && currentIndex < openComments.length - 1;\n\t\t},\n\n\t\thasPreviousComment: ( state ) => {\n\t\t\tconst openComments = state.comments.filter(\n\t\t\t\t( comment ) => comment.status !== \"completed\",\n\t\t\t);\n\t\t\tconst currentIndex = openComments.findIndex(\n\t\t\t\t( comment ) =>\n\t\t\t\t\t( comment.id && comment.id === state.currentCommentId ) ||\n\t\t\t\t\t( comment.data_id && comment.data_id === state.currentCommentId ),\n\t\t\t);\n\t\t\treturn currentIndex > 0;\n\t\t},\n\n\t\tgetNextComment: ( state ) => {\n\t\t\tconst openComments = state.comments.filter(\n\t\t\t\t( comment ) => comment.status !== \"completed\",\n\t\t\t);\n\t\t\tconst currentIndex = openComments.findIndex(\n\t\t\t\t( comment ) =>\n\t\t\t\t\t( comment.id && comment.id === state.currentCommentId ) ||\n\t\t\t\t\t( comment.data_id && comment.data_id === state.currentCommentId ),\n\t\t\t);\n\t\t\tif ( currentIndex !== -1 && currentIndex < openComments.length - 1 ) {\n\t\t\t\treturn openComments[ currentIndex + 1 ];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tgetPreviousComment: ( state ) => {\n\t\t\tconst openComments = state.comments.filter(\n\t\t\t\t( comment ) => comment.status !== \"completed\",\n\t\t\t);\n\t\t\tconst currentIndex = openComments.findIndex(\n\t\t\t\t( comment ) =>\n\t\t\t\t\t( comment.id && comment.id === state.currentCommentId ) ||\n\t\t\t\t\t( comment.data_id && comment.data_id === state.currentCommentId ),\n\t\t\t);\n\t\t\tif ( currentIndex > 0 ) {\n\t\t\t\treturn openComments[ currentIndex - 1 ];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t},\n\n\tactions: {\n\t\tsetComments( comments ) {\n\t\t\tthis.comments = comments;\n\t\t},\n\n\t\tsetCurrentComment( commentId ) {\n\t\t\tthis.currentCommentId = commentId;\n\t\t},\n\n\t\taddComment( comment ) {\n\t\t\tthis.comments.push( comment );\n\t\t},\n\n\t\tupdateComment( commentId, updatedData ) {\n\t\t\tconst index = this.comments.findIndex(\n\t\t\t\t( comment ) =>\n\t\t\t\t\t( comment.id && comment.id === commentId ) ||\n\t\t\t\t\t( comment.data_id && comment.data_id === commentId ),\n\t\t\t);\n\t\t\tif ( index !== -1 ) {\n\t\t\t\tthis.comments[ index ] = {...this.comments[ index ], ...updatedData};\n\t\t\t}\n\t\t},\n\n\t\tremoveComment( commentId ) {\n\t\t\tconst originalLength = this.comments.length;\n\t\t\tthis.comments = this.comments.filter( ( comment ) => {\n\t\t\t\t// Keep comment if neither id nor data_id matches the commentId to remove\n\t\t\t\tconst idMatch = comment.id && comment.id == commentId;\n\t\t\t\tconst dataIdMatch = comment.data_id && comment.data_id == commentId;\n\t\t\t\treturn !idMatch && !dataIdMatch;\n\t\t\t} );\n\n\t\t\t// Log for debugging if comment removal seems unexpected\n\t\t\tif ( this.comments.length === originalLength ) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"CommentsStore: removeComment called but no comment was removed\",\n\t\t\t\t\t{commentId, totalComments: originalLength},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( this.currentCommentId == commentId ) {\n\t\t\t\tthis.currentCommentId = null;\n\t\t\t}\n\t\t},\n\n\t\tgoToNextComment() {\n\t\t\tconst nextComment = this.getNextComment;\n\t\t\tif ( nextComment ) {\n\t\t\t\tthis.currentCommentId = nextComment.id || nextComment.data_id;\n\t\t\t\treturn nextComment;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tgoToPreviousComment() {\n\t\t\tconst previousComment = this.getPreviousComment;\n\t\t\tif ( previousComment ) {\n\t\t\t\tthis.currentCommentId = previousComment.id || previousComment.data_id;\n\t\t\t\treturn previousComment;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\tsetLoading( loading ) {\n\t\t\tthis.isLoading = loading;\n\t\t},\n\n\t\tsetError( error ) {\n\t\t\tthis.error = error;\n\t\t},\n\n\t\tclearError() {\n\t\t\tthis.error = null;\n\t\t},\n\n\t\t/**\n\t\t * Open a comment dialog with the specified comment and position\n\t\t */\n\t\tasync openCommentDialog( commentData, position ) {\n\t\t\tthis.setLoading( true );\n\t\t\tthis.clearError();\n\n\t\t\ttry {\n\t\t\t\tconst {getComment} = useComments();\n\t\t\t\tconst fetchedComment = await getComment( commentData.data_id );\n\n\t\t\t\tif ( fetchedComment ) {\n\t\t\t\t\tthis.activeComment = fetchedComment;\n\t\t\t\t\tthis.commentPosition = position;\n\t\t\t\t\tthis.isCommentDialogVisible = true;\n\t\t\t\t\tthis.setCurrentComment( fetchedComment.id || fetchedComment.data_id );\n\n\t\t\t\t\t// Set active highlight\n\t\t\t\t\tthis.setActiveHighlight( fetchedComment.data_id || fetchedComment.id );\n\t\t\t\t} else {\n\t\t\t\t\tthis.setError( \"Comment not found\" );\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\"CommentsStore: Comment not found:\",\n\t\t\t\t\t\tcommentData.data_id,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tthis.setError( \"Error fetching comment\" );\n\t\t\t\tconsole.error( \"CommentsStore: Error fetching comment:\", error );\n\t\t\t} finally {\n\t\t\t\tthis.setLoading( false );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Close the comment dialog\n\t\t */\n\t\tcloseCommentDialog() {\n\t\t\t// Trigger comment group close event\n\t\t\tsmartCommentsEvents.triggerCommentGroupClose();\n\n\t\t\t// Clear active highlight\n\t\t\tthis.clearActiveHighlight();\n\n\t\t\tthis.activeComment = null;\n\t\t\tthis.commentPosition = null;\n\t\t\tthis.isCommentDialogVisible = false;\n\t\t\tthis.setCurrentComment( null );\n\t\t},\n\n\t\t/**\n\t\t * Navigate to next/previous comment\n\t\t */\n\t\tasync navigateComment( direction ) {\n\t\t\tconst targetComment =\n\t\t\t\tdirection === \"next\"\n\t\t\t\t\t? this.goToNextComment()\n\t\t\t\t\t: this.goToPreviousComment();\n\n\t\t\tif ( targetComment ) {\n\t\t\t\ttry {\n\t\t\t\t\tconst {getComment} = useComments();\n\t\t\t\t\tconst fetchedComment = await getComment(\n\t\t\t\t\t\ttargetComment.data_id || targetComment.id,\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( fetchedComment ) {\n\t\t\t\t\t\tthis.activeComment = fetchedComment;\n\n\t\t\t\t\t\t// Ensure currentCommentId is properly set\n\t\t\t\t\t\tthis.setCurrentComment( fetchedComment.id || fetchedComment.data_id );\n\n\t\t\t\t\t\t// Update active highlight to the new comment and scroll it into view\n\t\t\t\t\t\tthis.setActiveHighlight(\n\t\t\t\t\t\t\tfetchedComment.data_id || fetchedComment.id,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Keep the same position for now, could be enhanced to scroll to highlighted element\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setError( `Could not fetch ${direction} comment` );\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\"CommentsStore: Could not fetch\",\n\t\t\t\t\t\t\tdirection,\n\t\t\t\t\t\t\t\"comment:\",\n\t\t\t\t\t\t\ttargetComment,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tthis.setError( `Error navigating to ${direction} comment` );\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\"CommentsStore: Error navigating to\",\n\t\t\t\t\t\tdirection,\n\t\t\t\t\t\t\"comment:\",\n\t\t\t\t\t\terror,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Open new comment dialog with selection data\n\t\t */\n\t\topenNewCommentDialog( selectionData ) {\n\t\t\tthis.newCommentSelection = {\n\t\t\t\ttext: selectionData.selection.text,\n\t\t\t\tindex: selectionData.selection.index,\n\t\t\t\ttype: selectionData.selection.type,\n\t\t\t\timage: selectionData.selection.image || null,\n\t\t\t};\n\t\t\tthis.isNewCommentDialogVisible = true;\n\t\t},\n\n\t\t/**\n\t\t * Close new comment dialog\n\t\t */\n\t\tcloseNewCommentDialog() {\n\t\t\tthis.newCommentSelection = null;\n\t\t\tthis.isNewCommentDialogVisible = false;\n\t\t},\n\n\t\t/**\n\t\t * Handle comment save completion\n\t\t */\n\t\tasync handleCommentSaved( savedComment ) {\n\t\t\tthis.closeNewCommentDialog();\n\n\t\t\t// Trigger comment created event\n\t\t\tsmartCommentsEvents.triggerCommentCreated( savedComment );\n\n\t\t\t// Emit an event that the main component can listen to for reloading highlights\n\t\t\t// This maintains separation - the store doesn't know about highlight management\n\t\t\tif ( typeof window !== \"undefined\" ) {\n\t\t\t\twindow.dispatchEvent(\n\t\t\t\t\tnew CustomEvent( \"smartcomments:refresh-highlights\", {\n\t\t\t\t\t\tdetail: {savedComment},\n\t\t\t\t\t} ),\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Delete a comment\n\t\t */\n\t\tasync deleteComment( comment ) {\n\t\t\tthis.setLoading( true );\n\n\t\t\ttry {\n\t\t\t\tconst {deleteComment} = useComments();\n\t\t\t\tconst result = await deleteComment( comment.id || comment.data_id );\n\n\t\t\t\tif ( result.success === \"1\" || result.success === true ) {\n\t\t\t\t\tthis.removeComment( comment.id || comment.data_id );\n\n\t\t\t\t\t// Trigger comment deleted event\n\t\t\t\t\tsmartCommentsEvents.triggerCommentDeleted( comment );\n\n\t\t\t\t\t// Clear highlighting for the deleted comment\n\t\t\t\t\tconst {removeCommentHighlight} = useHighlightManager();\n\t\t\t\t\tremoveCommentHighlight( comment.id || comment.data_id );\n\n\t\t\t\t\tthis.closeCommentDialog();\n\n\t\t\t\t\t// Trigger highlight refresh\n\t\t\t\t\tif ( typeof window !== \"undefined\" ) {\n\t\t\t\t\t\twindow.dispatchEvent(\n\t\t\t\t\t\t\tnew CustomEvent( \"smartcomments:refresh-highlights\", {\n\t\t\t\t\t\t\t\tdetail: {deletedComment: comment},\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.setError( result.message || \"Failed to delete comment\" );\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tthis.setError( \"Error deleting comment\" );\n\t\t\t\tconsole.error( \"CommentsStore: Error deleting comment:\", error );\n\t\t\t} finally {\n\t\t\t\tthis.setLoading( false );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Complete a comment\n\t\t */\n\t\tasync completeComment( comment ) {\n\t\t\tthis.setLoading( true );\n\n\t\t\ttry {\n\t\t\t\tconst {updateComment} = useComments();\n\t\t\t\tconst result = await updateComment(\n\t\t\t\t\tcomment.id || comment.data_id,\n\t\t\t\t\t\"completed\",\n\t\t\t\t\t\"\", // Send empty text when updating status\n\t\t\t\t);\n\n\t\t\t\tif ( result.success === \"1\" || result.success === true ) {\n\t\t\t\t\tthis.updateComment( comment.id || comment.data_id, {\n\t\t\t\t\t\tstatus: \"completed\",\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Trigger comment completed event\n\t\t\t\t\tsmartCommentsEvents.triggerCommentCompleted( comment );\n\n\t\t\t\t\t// Clear highlighting for the completed comment\n\t\t\t\t\tconst {removeCommentHighlight} = useHighlightManager();\n\t\t\t\t\tremoveCommentHighlight( comment.id || comment.data_id );\n\n\t\t\t\t\t// Trigger highlight refresh\n\t\t\t\t\tif ( typeof window !== \"undefined\" ) {\n\t\t\t\t\t\twindow.dispatchEvent(\n\t\t\t\t\t\t\tnew CustomEvent( \"smartcomments:refresh-highlights\", {\n\t\t\t\t\t\t\t\tdetail: {completedComment: comment},\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.closeCommentDialog();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setError( result.message || \"Failed to complete comment\" );\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tthis.setError( \"Error completing comment\" );\n\t\t\t\tconsole.error( \"CommentsStore: Error completing comment:\", error );\n\t\t\t} finally {\n\t\t\t\tthis.setLoading( false );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * View page for comment\n\t\t */\n\t\tviewPage( comment ) {\n\t\t\t// Navigate to the SmartComments special page\n\t\t\tconst specialPageUrl = mw.util.getUrl( \"Special:SmartComments\", {\n\t\t\t\tpage: mw.config.get( \"wgPageName\" ),\n\t\t\t} );\n\n\t\t\t// Open in new window/tab to keep the current page accessible\n\t\t\twindow.open( specialPageUrl, \"_blank\" );\n\t\t},\n\n\t\t/**\n\t\t * Close all dialogs (useful for global state changes)\n\t\t */\n\t\tcloseAllDialogs() {\n\t\t\tthis.closeCommentDialog();\n\t\t\tthis.closeNewCommentDialog();\n\t\t},\n\n\t\t/**\n\t\t * Set active highlight for a comment\n\t\t */\n\t\tsetActiveHighlight( commentId, scrollIntoView = false ) {\n\t\t\t// First clear any existing active highlights\n\t\t\tthis.clearActiveHighlight();\n\n\t\t\t// Find elements with the specific comment highlight class\n\t\t\tconst specificClass = `smartcomment-hl-${commentId}`;\n\t\t\tconst highlightElements = document.querySelectorAll( `.${specificClass}` );\n\n\t\t\thighlightElements.forEach( ( element ) => {\n\t\t\t\telement.classList.add( \"active\" );\n\t\t\t} );\n\n\t\t\t// Also check for elements with data-comment-id attribute\n\t\t\tconst dataElements = document.querySelectorAll(\n\t\t\t\t`[data-comment-id=\"${commentId}\"]`,\n\t\t\t);\n\t\t\tdataElements.forEach( ( element ) => {\n\t\t\t\telement.classList.add( \"active\" );\n\t\t\t} );\n\n\t\t\t// Scroll the first active element into view if requested\n\t\t\tif ( scrollIntoView ) {\n\t\t\t\tconst firstActiveElement = highlightElements[ 0 ] || dataElements[ 0 ];\n\t\t\t\tif ( firstActiveElement ) {\n\t\t\t\t\tfirstActiveElement.scrollIntoView( {\n\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t\tblock: \"center\",\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Clear all active highlights\n\t\t */\n\t\tclearActiveHighlight() {\n\t\t\t// Remove active class from all highlighted elements\n\t\t\tconst activeElements = document.querySelectorAll(\n\t\t\t\t'[class*=\"smartcomment-hl-\"].active, [data-comment-id].active',\n\t\t\t);\n\t\t\tactiveElements.forEach( ( element ) => {\n\t\t\t\telement.classList.remove( \"active\" );\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Handle reply added to comment\n\t\t */\n\t\thandleReplyAdded( replyData ) {\n\t\t\t// Update the active comment in the store with the new reply\n\t\t\tif ( this.activeComment && replyData.comment ) {\n\t\t\t\tconst commentId = replyData.comment.id || replyData.comment.data_id;\n\t\t\t\tthis.updateComment( commentId, {\n\t\t\t\t\treplies: replyData.comment.replies,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Trigger highlight refresh to update timeline indicators\n\t\t\tif ( typeof window !== \"undefined\" ) {\n\t\t\t\twindow.dispatchEvent(\n\t\t\t\t\tnew CustomEvent( \"smartcomments:refresh-highlights\", {\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\treplyAdded: true,\n\t\t\t\t\t\t\treplyData,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ),\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Open a comment dialog by ID (for URL parameter handling)\n\t\t * @param {string|number} commentId - The comment ID to open\n\t\t */\n\t\tasync openCommentDialogById( commentId ) {\n\t\t\tif ( !commentId ) return;\n\n\t\t\tthis.setLoading( true );\n\t\t\tthis.clearError();\n\n\t\t\ttry {\n\t\t\t\tconst {getComment} = useComments();\n\t\t\t\tconst fetchedComment = await getComment( commentId );\n\n\t\t\t\tif ( fetchedComment ) {\n\t\t\t\t\t// Find the highlight element for this comment\n\t\t\t\t\tconst highlightElement = document.querySelector(\n\t\t\t\t\t\t`.smartcomment-hl-${commentId}`,\n\t\t\t\t\t);\n\n\t\t\t\t\tlet position;\n\t\t\t\t\tif ( highlightElement ) {\n\t\t\t\t\t\t// Use the highlight element position\n\t\t\t\t\t\tconst rect = highlightElement.getBoundingClientRect();\n\t\t\t\t\t\tposition = {\n\t\t\t\t\t\t\ttop: rect.top + window.scrollY,\n\t\t\t\t\t\t\tleft: rect.left + window.scrollX,\n\t\t\t\t\t\t\tbottom: rect.bottom + window.scrollY,\n\t\t\t\t\t\t\tright: rect.right + window.scrollX,\n\t\t\t\t\t\t\twidth: rect.width,\n\t\t\t\t\t\t\theight: rect.height,\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Fallback position if no highlight found (broken comment)\n\t\t\t\t\t\tposition = {\n\t\t\t\t\t\t\ttop: 100,\n\t\t\t\t\t\t\tleft: 100,\n\t\t\t\t\t\t\tbottom: 150,\n\t\t\t\t\t\t\tright: 400,\n\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t\theight: 50,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.activeComment = fetchedComment;\n\t\t\t\t\tthis.commentPosition = position;\n\t\t\t\t\tthis.isCommentDialogVisible = true;\n\t\t\t\t\tthis.setCurrentComment( fetchedComment.id || fetchedComment.data_id );\n\n\t\t\t\t\t// Set active highlight and scroll into view\n\t\t\t\t\tthis.setActiveHighlight(\n\t\t\t\t\t\tfetchedComment.data_id || fetchedComment.id,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\n\t\t\t\t\t// Update the comments array if this comment isn't already in it\n\t\t\t\t\tconst existingIndex = this.comments.findIndex(\n\t\t\t\t\t\t( comment ) =>\n\t\t\t\t\t\t\t( comment.id && comment.id === commentId ) ||\n\t\t\t\t\t\t\t( comment.data_id && comment.data_id === commentId ),\n\t\t\t\t\t);\n\t\t\t\t\tif ( existingIndex === -1 ) {\n\t\t\t\t\t\tthis.comments.push( fetchedComment );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.setError( \"Comment not found\" );\n\t\t\t\t\tconsole.error( \"CommentsStore: Comment not found for ID:\", commentId );\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tthis.setError( \"Error fetching comment\" );\n\t\t\t\tconsole.error( \"CommentsStore: Error fetching comment by ID:\", error );\n\t\t\t} finally {\n\t\t\t\tthis.setLoading( false );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Check URL parameters and open comment if commentId or focusId is present\n\t\t */\n\t\tasync checkAndOpenCommentFromUrl() {\n\t\t\tconst urlParams = new URLSearchParams( window.location.search );\n\t\t\tconst commentId = urlParams.get( \"commentId\" ) || urlParams.get( \"focusId\" );\n\n\t\t\tif ( commentId ) {\n\t\t\t\tawait this.openCommentDialogById( commentId );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Alias for openCommentDialogById for consistency\n\t\t * @param {string|number} commentId - The comment ID to open\n\t\t */\n\t\tasync openCommentById( commentId ) {\n\t\t\treturn await this.openCommentDialogById( commentId );\n\t\t},\n\t},\n} );\n","/**\n * Refactored highlight directive using composable structure\n */\nimport {useHighlightManager} from \"../composables/highlights/useHighlightManager.js\";\n\n/**\n * Create a highlight manager instance\n */\nconst {\n\tapplyHighlights,\n\tclearHighlights,\n\tclearAllHighlights,\n\tremoveCommentHighlight,\n} = useHighlightManager();\n\nexport const highlightDirective = {\n\tmounted( el, binding ) {\n\t\tapplyHighlights(\n\t\t\tdocument.body,\n\t\t\tbinding.value.anchors,\n\t\t\tbinding.value.onClick,\n\t\t);\n\t},\n\tupdated( el, binding ) {\n\t\tclearHighlights(\n\t\t\tdocument.body,\n\t\t\tbinding.oldValue ? binding.oldValue.anchors : [],\n\t\t);\n\t\tapplyHighlights(\n\t\t\tdocument.body,\n\t\t\tbinding.value.anchors,\n\t\t\tbinding.value.onClick,\n\t\t);\n\t},\n\tbeforeUnmount( el, binding ) {\n\t\tclearHighlights( document.body, binding.value ? binding.value.anchors : [] );\n\t},\n};\n\nexport {applyHighlights, clearAllHighlights, removeCommentHighlight};\n","<template>\n  <div class=\"smartcomments-reply-form\">\n    <div class=\"smartcomments-reply-form-header\">\n      <p>{{ messages.replyHeader() }}</p>\n    </div>\n    <div class=\"smartcomments-reply-form-body\">\n      <textarea\n          class=\"smartcomments-reply-form-body-textarea\"\n          :class=\"{ 'has-content': hasContent }\"\n          v-model=\"reply\"\n          :placeholder=\"messages.replyPlaceholder()\"\n          @focus=\"onFocus\"\n          @blur=\"onBlur\"\n          @input=\"onInput\"\n          :aria-label=\"replyAriaLabel\"\n          ref=\"textarea\"\n      ></textarea>\n    </div>\n    <div class=\"smartcomments-reply-form-footer\" v-show=\"showActions\">\n      <div class=\"smartcomments-reply-form-actions\">\n        <button\n            class=\"smartcomments-reply-form-cancel\"\n            @click=\"cancelReply\"\n            type=\"button\"\n        >\n          {{ messages.cancel() }}\n        </button>\n        <button\n            class=\"smartcomments-reply-form-submit\"\n            @click=\"submitReply\"\n            :disabled=\"!canSubmit\"\n            type=\"submit\"\n        >\n          {{ messages.replySubmit() }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {defineComponent, computed} from \"vue\";\nimport useMessages from \"../composables/core/useMessages.js\";\n\nexport default defineComponent( {\n  name: \"ReplyForm\",\n  data() {\n    return {\n      reply: \"\",\n      isFocused: false,\n      hasContent: false,\n      isSubmitting: false,\n    };\n  },\n  props: {\n    comment: {\n      type: Object,\n      required: true,\n    },\n  },\n  emits: [\"reply-submitted\"],\n  setup( props ) {\n    const {messages, msg} = useMessages();\n\n    const replyAriaLabel = computed( () => {\n      // Create a label for screen readers\n      const authorName = props.comment.author\n          ? props.comment.author.replace( /<[^>]*>/g, \"\" ) // Strip HTML tags\n          : \"comment\";\n      return msg( \"sic-reply-aria-label\", `Reply to ${authorName}`, authorName );\n    } );\n\n    return {\n      messages,\n      replyAriaLabel,\n    };\n  },\n  computed: {\n    showActions() {\n      return this.isFocused || this.hasContent || this.isSubmitting;\n    },\n    canSubmit() {\n      return this.reply.trim().length > 0 && !this.isSubmitting;\n    },\n  },\n  methods: {\n    onFocus() {\n      this.isFocused = true;\n    },\n    onBlur() {\n      this.isFocused = false;\n    },\n    onInput() {\n      this.hasContent = this.reply.trim().length > 0;\n    },\n    async submitReply() {\n      if ( !this.canSubmit ) {\n        return;\n      }\n\n      this.isSubmitting = true;\n\n      try {\n        // Use the reply method from the enhanced comment object\n        if ( this.comment.reply && typeof this.comment.reply === \"function\" ) {\n          const success = await this.comment.reply( this.reply );\n\n          if ( success ) {\n            // Create reply data for the event\n            const replyData = {\n              text: this.reply,\n              author: mw.config.get( \"wgUserName\" ),\n              datetime: new Date().toISOString(),\n            };\n\n            // Emit the reply-submitted event\n            this.$emit( \"reply-submitted\", replyData );\n\n            // Reset form\n            this.reply = \"\";\n            this.hasContent = false;\n            this.isFocused = false;\n          } else {\n            console.error( \"Failed to submit reply\" );\n          }\n        } else {\n          console.error( \"Comment object does not have a reply method\" );\n        }\n      } catch ( error ) {\n        console.error( \"Error submitting reply:\", error );\n      } finally {\n        this.isSubmitting = false;\n      }\n    },\n    cancelReply() {\n      this.reply = \"\";\n      this.hasContent = false;\n      this.isFocused = false;\n      this.$refs.textarea.blur();\n    },\n  },\n} );\n</script>\n\n<style lang=\"less\">\n.smartcomments-reply-form {\n  margin-left: -3px;\n  padding: 8px 16px 16px;\n  padding-left: ~\"calc(16px + 3px)\";\n  background: #f9f9f9;\n  border-top: 1px solid #ccc;\n  border-left: 1px solid #ccc;\n  font-size: 14px;\n\n  &-footer {\n    transition: all 0.2s ease-in-out;\n  }\n\n  &-actions {\n    display: flex;\n    gap: 8px;\n    justify-content: flex-end;\n    align-items: center;\n  }\n\n  textarea {\n    border: 1px solid #a2a9b1;\n    border-radius: 2px;\n    padding: 5px 8px;\n    font-family: inherit;\n    resize: vertical;\n    margin-bottom: 8px;\n    height: 35px;\n    min-height: 35px;\n    transition: height 0.2s ease-in-out;\n    width: 100%;\n    box-sizing: border-box;\n\n    &:focus {\n      height: 75px;\n      min-height: 75px;\n      outline: 2px solid #36c;\n      outline-offset: -1px;\n    }\n\n    &.has-content {\n      height: 75px;\n      min-height: 75px;\n      transition: none;\n    }\n  }\n\n  button {\n    border: 1px solid #a2a9b1;\n    border-radius: 2px;\n    padding: 8px 16px;\n    font-weight: bold;\n    cursor: pointer;\n    font-size: 14px;\n    transition: all 0.15s ease-in-out;\n\n    &:disabled {\n      opacity: 0.6;\n      cursor: not-allowed;\n    }\n  }\n\n  &-cancel {\n    background-color: transparent;\n    color: #54595d;\n    border-color: #c8ccd1;\n\n    &:hover:not(:disabled) {\n      background-color: #f8f9fa;\n      border-color: #a2a9b1;\n    }\n  }\n\n  &-submit {\n    background-color: #36c;\n    color: #fff;\n    border-color: #36c;\n\n    &:hover:not(:disabled) {\n      background-color: #2a4b8d;\n      border-color: #2a4b8d;\n    }\n\n    &:disabled {\n      background-color: #a2a9b1;\n      border-color: #a2a9b1;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"smartcomments-message\">\n    <div class=\"smartcomments-message-header\">\n      <div\n          class=\"smartcomments-message-header-author\"\n          v-html=\"comment.author\"\n      ></div>\n      <div\n          class=\"smartcomments-message-header-date\"\n          v-html=\"comment.datetime\"\n      ></div>\n    </div>\n    <div class=\"smartcomments-message-body\" v-html=\"commentText\"></div>\n  </div>\n</template>\n\n<script>\nimport {defineComponent} from \"vue\";\n\nfunction unescapeHtml( html ) {\n  if ( typeof html !== \"string\" ) {\n    return html;\n  }\n  const textarea = document.createElement( \"textarea\" );\n  textarea.innerHTML = html;\n  return textarea.value;\n}\n\nexport default defineComponent( {\n  name: \"CommentMessage\",\n  props: {\n    comment: {\n      type: Object,\n      required: true,\n    },\n  },\n  computed: {\n    commentText() {\n      if ( this.comment && typeof this.comment.text === \"string\" ) {\n        return unescapeHtml( this.comment.text );\n      }\n      return \"\";\n    },\n  },\n} );\n</script>\n\n<style lang=\"less\">\n.smartcomments-message {\n  padding: 8px 16px;\n  border-bottom: 1px dotted #ccc;\n  font-size: 14px;\n\n  .smartcomments-message-header {\n    display: flex;\n    padding: 8px 0;\n    align-items: center;\n\n    .smartcomments-message-header-author {\n      flex-grow: 1;\n\n      a {\n        font-weight: bold;\n        color: #0070ff;\n        cursor: pointer;\n      }\n    }\n\n    .smartcomments-message-header-date {\n      text-align: right;\n      color: #999;\n      font-size: 14px;\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"smartcomments-reply-list\">\n    <div\n        class=\"smartcomments-reply-list-item\"\n        v-for=\"reply in replies\"\n        :key=\"reply.id\"\n    >\n      <comment-message :comment=\"reply\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {defineComponent} from \"vue\";\n\nimport CommentMessage from \"./CommentMessage.vue\";\n\nexport default defineComponent( {\n  name: \"ReplyList\",\n  components: {\n    CommentMessage,\n  },\n  props: {\n    replies: {\n      type: Array,\n      required: true,\n    },\n  },\n} );\n</script>\n\n<style lang=\"less\">\n.smartcomments-reply-list {\n  background: #fff;\n}\n</style>\n","<template>\n  <div class=\"smartcomments-comment-actions\">\n    <div\n        class=\"smartcomments-comment-actions-item\"\n        v-for=\"action in filteredActions\"\n        :key=\"action.icon\"\n        :class=\"`align-${action.align}`\"\n        :style=\"action.style\"\n    >\n      <!-- Simple action button without sub-items -->\n      <button\n          v-if=\"!action.items\"\n          class=\"smartcomments-comment-actions-item-button\"\n          @click=\"action.action\"\n          :data-tooltip=\"action.label\"\n      >\n        <span class=\"oo-ui-iconElement-icon\" :class=\"action.icon\"></span>\n        <span\n            class=\"smartcomments-visually-hidden\"\n            v-html=\"action.label\"\n        ></span>\n      </button>\n\n      <!-- Dropdown action button with sub-items -->\n      <div\n          v-else\n          class=\"smartcomments-dropdown\"\n          :class=\"{ 'is-open': dropdownStates[action.icon] }\"\n      >\n        <button\n            class=\"smartcomments-comment-actions-item-button smartcomments-dropdown-toggle\"\n            @click=\"toggleDropdown(action.icon)\"\n            :data-tooltip=\"action.label\"\n        >\n          <span class=\"oo-ui-iconElement-icon\" :class=\"action.icon\"></span>\n          <span\n              class=\"smartcomments-visually-hidden\"\n              v-html=\"action.label\"\n          ></span>\n        </button>\n\n        <div\n            class=\"smartcomments-dropdown-menu\"\n            v-if=\"dropdownStates[action.icon]\"\n        >\n          <button\n              v-for=\"subItem in action.items\"\n              :key=\"subItem.icon\"\n              class=\"smartcomments-dropdown-item\"\n              @click=\"handleSubItemClick(subItem, action.icon)\"\n              :style=\"subItem.style\"\n          >\n            <span class=\"oo-ui-iconElement-icon\" :class=\"subItem.icon\"></span>\n            <span v-html=\"subItem.label\"></span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {defineComponent, computed, ref} from \"vue\";\nimport useUserStore from \"../store/userStore.js\";\nimport useCommentsStore from \"../store/commentsStore.js\";\nimport useMessages from \"../composables/core/useMessages.js\";\n\nexport default defineComponent( {\n  name: \"CommentActions\",\n  props: {\n    comment: {\n      type: Object,\n      required: true,\n    },\n  },\n  setup( props, {emit} ) {\n    const userStore = useUserStore();\n    const commentsStore = useCommentsStore();\n    const {messages} = useMessages();\n\n    const actions = computed( () => [\n      {\n        icon: \"oo-ui-icon-arrowPrevious\",\n        label: messages.previousComment(),\n        align: \"left\",\n        action: () => {\n          emit( \"previous\" );\n        },\n        when: () => {\n          return commentsStore.hasPreviousComment;\n        },\n      },\n      {\n        icon: \"oo-ui-icon-arrowNext\",\n        label: messages.nextComment(),\n        align: \"left\",\n        action: () => {\n          emit( \"next\" );\n        },\n        when: () => {\n          return commentsStore.hasNextComment;\n        },\n      },\n      {\n        icon: \"oo-ui-icon-ellipsis\",\n        label: messages.actions(),\n        align: \"right\",\n        items: [\n          {\n            icon: \"oo-ui-icon-check\",\n            label: messages.markComplete(),\n            style: \"\",\n            action: () => {\n              emit( \"complete\", props.comment );\n            },\n          },\n          {\n            icon: \"oo-ui-icon-trash\",\n            label: messages.markDelete(),\n            style: \"\",\n            action: () => {\n              emit( \"delete\", props.comment );\n            },\n          },\n          {\n            icon: \"oo-ui-icon-articles\",\n            label: messages.viewOverview(),\n            style: \"\",\n            action: () => {\n              emit( \"view\", props.comment );\n            },\n          },\n        ],\n        when: () => {\n          return userStore.canManageComments;\n        },\n      },\n      {\n        icon: \"oo-ui-icon-close\",\n        label: messages.close(),\n        align: \"right\",\n        action: () => {\n          emit( \"close\" );\n        },\n        when: () => {\n          return true;\n        },\n      },\n    ] );\n\n    const filteredActions = computed( () => {\n      return actions.value.filter( ( action ) => action.when() );\n    } );\n\n    const dropdownStates = ref( {} );\n\n    const toggleDropdown = ( icon ) => {\n      dropdownStates.value[ icon ] = !dropdownStates.value[ icon ];\n    };\n\n    const handleSubItemClick = ( subItem, icon ) => {\n      subItem.action();\n      dropdownStates.value[ icon ] = false;\n    };\n\n    return {\n      filteredActions,\n      dropdownStates,\n      toggleDropdown,\n      handleSubItemClick,\n    };\n  },\n} );\n</script>\n\n<style lang=\"less\">\n.smartcomments-comment-actions {\n  display: flex;\n  align-items: center;\n  padding: 8px 8px 0;\n\n  .smartcomments-comment-actions-item {\n    &.align-left {\n      order: -1;\n    }\n\n    &.align-right {\n      order: 1;\n      margin-left: auto;\n\n      & + .align-right {\n        margin-left: 0;\n      }\n    }\n  }\n\n  span.oo-ui-iconElement-icon {\n    width: 14px;\n    height: 14px;\n    min-width: 14px;\n    min-height: 14px;\n    position: relative;\n  }\n\n  button {\n    background: transparent;\n    cursor: pointer;\n    position: relative;\n    padding: 8px;\n    display: flex;\n    border: none;\n\n    &:hover {\n      background: #e0e0e0;\n    }\n  }\n\n  .smartcomments-dropdown {\n    position: relative;\n    display: inline-block;\n\n    .smartcomments-dropdown-menu {\n      position: absolute;\n      top: 100%;\n      right: 0;\n      background: white;\n      border: 1px solid #c8ccd1;\n      border-radius: 2px;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      min-width: 200px;\n      z-index: 1000;\n\n      .smartcomments-dropdown-item {\n        display: flex;\n        align-items: center;\n        width: 100%;\n        padding: 8px 8px;\n        text-align: left;\n        background: transparent;\n        border: none;\n        cursor: pointer;\n        font-size: 13px;\n\n        &:hover {\n          background: #e0e0e0;\n        }\n\n        span.oo-ui-iconElement-icon {\n          margin-right: 4px;\n        }\n      }\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"smartcomments-comment-body\">\n    <comment-message :comment=\"comment\"/>\n  </div>\n</template>\n\n<script>\nimport {defineComponent} from \"vue\";\n\nimport CommentMessage from \"./CommentMessage.vue\";\n\nexport default defineComponent( {\n  name: \"CommentBody\",\n  components: {\n    CommentMessage,\n  },\n  props: {\n    comment: {\n      type: Object,\n      required: true,\n    },\n  },\n} );\n</script>\n","<template>\n  <div class=\"smartcomments-side-panel\" :style=\"panelStyle\">\n    <div class=\"smartcomments-commentgroup\">\n      <!-- Actions -->\n      <comment-actions\n          @close=\"$emit('close')\"\n          @delete=\"$emit('delete', $event)\"\n          @complete=\"$emit('complete', $event)\"\n          @view=\"$emit('view', $event)\"\n          @next=\"handleNext\"\n          @previous=\"handlePrevious\"\n          :comment=\"comment\"\n      ></comment-actions>\n\n      <!-- Body -->\n      <comment-body :comment=\"comment\"></comment-body>\n\n      <!-- Replies -->\n      <reply-list :replies=\"comment.replies || []\"></reply-list>\n\n      <!-- Reply form -->\n      <reply-form\n          :comment=\"enhancedComment\"\n          @reply-submitted=\"handleReplySubmitted\"\n      ></reply-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {defineComponent, computed} from \"vue\";\nimport ReplyForm from \"./ReplyForm.vue\";\nimport ReplyList from \"./ReplyList.vue\";\nimport CommentActions from \"./CommentActions.vue\";\nimport CommentBody from \"./CommentBody.vue\";\nimport useComments from \"../composables/features/useComments.js\";\nimport useMessages from \"../composables/core/useMessages.js\";\n\nexport default defineComponent( {\n  name: \"Comment\",\n  components: {\n    ReplyForm,\n    ReplyList,\n    CommentActions,\n    CommentBody,\n  },\n  props: {\n    comment: {\n      type: Object,\n      required: true,\n    },\n    position: {\n      type: Object,\n      default: null,\n    },\n  },\n  emits: [\"close\", \"delete\", \"complete\", \"view\", \"navigate\", \"reply-added\"],\n  setup( props, {emit} ) {\n    const {messages} = useMessages();\n\n    const panelStyle = computed( () => {\n      if ( !props.position ) {\n        console.warn(\n            \"Comment panel: No position data, using default positioning\",\n        );\n        return {\n          top: \"0\",\n        };\n      }\n\n      // Calculate position to place the comment panel next to the highlighted element\n      // We'll position it to the right of the element, or to the left if there's not enough space\n      const viewportHeight = window.innerHeight;\n      const panelEstimatedHeight = 200;\n\n      let top;\n\n      // Position vertically aligned with the top of the element\n      // But ensure it doesn't go off the bottom of the viewport\n      top = props.position.top;\n      const maxTop =\n          window.scrollY + viewportHeight - panelEstimatedHeight - 20;\n      if ( top > maxTop ) {\n        top = Math.max( window.scrollY + 10, maxTop );\n      }\n\n      return {\n        top: `${top}px`,\n      };\n    } );\n\n    // Enhanced comment object with reply method\n    const enhancedComment = computed( () => {\n      return {\n        ...props.comment,\n        reply: submitReply,\n      };\n    } );\n\n    const submitReply = async ( replyText ) => {\n      if ( !replyText || replyText.trim() === \"\" ) {\n        console.warn( \"Cannot submit empty reply\" );\n        return false;\n      }\n\n      try {\n        const {saveComment} = useComments();\n\n        // For replies, we need to create a fake selection with the parent comment ID\n        // The API expects the parent comment ID in the 'comment' parameter\n        const selectionData = {\n          text: replyText, // Use the reply text for validation\n          parentId: props.comment.id || props.comment.data_id, // This will be passed as 'comment' parameter\n          type: \"reply\",\n        };\n\n        const result = await saveComment( replyText, selectionData );\n\n        if ( result.success === \"1\" || result.success === true ) {\n          // Create a new reply object for immediate UI update\n          const newReply = {\n            id: result.comment || Date.now(),\n            text: `<div class=\"sic-text\"><p>${replyText}</p></div>`,\n            author: `<a href=\"${mw.util.getUrl( \"User:\" + mw.config.get( \"wgUserName\" ) )}\">${mw.config.get( \"wgUserName\" )}</a>`,\n            datetime: messages.justNow(),\n            modifiedBy: mw.config.get( \"wgUserName\" ),\n            modifiedDateTime: messages.justNow(),\n          };\n\n          // Add reply to the comment's replies array\n          if ( !props.comment.replies ) {\n            props.comment.replies = [];\n          }\n          props.comment.replies.push( newReply );\n\n          // Emit event for parent component to handle\n          emit( \"reply-added\", {\n            comment: props.comment,\n            reply: newReply,\n          } );\n\n          return true;\n        } else {\n          console.error( \"Failed to submit reply:\", result.message );\n          return false;\n        }\n      } catch ( error ) {\n        console.error( \"Error submitting reply:\", error );\n        return false;\n      }\n    };\n\n    const handleReplySubmitted = ( replyData ) => {\n      // Trigger refresh of highlights to show updated reply count\n      if ( typeof window !== \"undefined\" ) {\n        window.dispatchEvent(\n            new CustomEvent( \"smartcomments:refresh-highlights\", {\n              detail: {\n                replyAdded: true,\n                comment: props.comment,\n                reply: replyData,\n              },\n            } ),\n        );\n      }\n    };\n\n    const handleNext = () => {\n      emit( \"navigate\", {direction: \"next\"} );\n    };\n\n    const handlePrevious = () => {\n      emit( \"navigate\", {direction: \"previous\"} );\n    };\n\n    return {\n      panelStyle,\n      enhancedComment,\n      handleNext,\n      handlePrevious,\n      handleReplySubmitted,\n      messages,\n    };\n  },\n} );\n</script>\n\n<style lang=\"less\">\n.smartcomments-side-panel {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 310px;\n  overflow: hidden;\n  overflow-y: auto;\n  padding-left: 48px;\n  z-index: 4;\n\n  .smartcomments-commentgroup {\n    background: #ffffee;\n    border-left: 3px solid #f6c343;\n    border-bottom: 1px solid #ccc;\n    border-top: 1px solid #ccc;\n  }\n}\n</style>\n","<template>\n  <!-- Backdrop overlay -->\n  <div\n      class=\"smartcomments-dialog-overlay\"\n      v-if=\"isVisible\"\n      @click=\"handleBackdropClick\"\n  >\n    <div\n        class=\"smartcomments-new-comment-dialog\"\n        :style=\"dialogStyle\"\n        @click.stop\n    >\n      <div class=\"smartcomments-new-comment-content\">\n        <!-- Header -->\n        <div class=\"smartcomments-dialog-header\">\n          <span class=\"smartcomments-dialog-title\">{{ title }}</span>\n          <button\n              class=\"smartcomments-dialog-close\"\n              @click=\"handleCancel\"\n              :data-tooltip=\"messages.close()\"\n          >\n            <span class=\"oo-ui-iconElement-icon oo-ui-icon-close\"></span>\n          </button>\n        </div>\n\n        <!-- Selected content preview -->\n        <div class=\"smartcomments-selected-content\" v-if=\"selectionData\">\n          <div class=\"smartcomments-selected-text\">\n            <strong>{{ t( \"selectedText\" ) }}:</strong>\n            <div class=\"smartcomments-selection-preview\">\n              {{ selectionData.text }}\n            </div>\n          </div>\n          <img\n              v-if=\"selectionData.image\"\n              class=\"smartcomments-selected-image\"\n              :src=\"selectionData.image\"\n              :alt=\"t('selectedImage')\"\n          />\n        </div>\n\n        <!-- Comment input -->\n        <div class=\"smartcomments-comment-input-wrapper\">\n          <label\n              for=\"smartcomments-comment-input\"\n              class=\"smartcomments-input-label\"\n          >\n            {{ messages.commentInput() }}\n          </label>\n          <textarea\n              id=\"smartcomments-comment-input\"\n              v-model=\"commentText\"\n              class=\"smartcomments-comment-input\"\n              :placeholder=\"t('commentPlaceholder')\"\n              rows=\"4\"\n              ref=\"commentInput\"\n              @keydown=\"handleKeydown\"\n          ></textarea>\n          <div v-if=\"error\" class=\"smartcomments-error-message\">\n            {{ error }}\n          </div>\n        </div>\n\n        <!-- Actions -->\n        <div class=\"smartcomments-dialog-actions\">\n          <button\n              class=\"smartcomments-button smartcomments-button-cancel\"\n              @click=\"handleCancel\"\n              :disabled=\"isSaving\"\n          >\n            {{ messages.cancel() }}\n          </button>\n          <button\n              class=\"smartcomments-button smartcomments-button-save\"\n              @click=\"handleSave\"\n              :disabled=\"!canSave || isSaving\"\n          >\n            <span v-if=\"isSaving\">{{ t( \"saving\" ) }}</span>\n            <span v-else>{{ messages.save() }}</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  defineComponent,\n  ref,\n  computed,\n  nextTick,\n  onMounted,\n  onUnmounted,\n} from \"vue\";\nimport useComments from \"../composables/features/useComments.js\";\nimport useMessages from \"../composables/core/useMessages.js\";\n\nexport default defineComponent( {\n  name: \"NewCommentDialog\",\n  props: {\n    isVisible: {\n      type: Boolean,\n      default: false,\n    },\n    selectionData: {\n      type: Object,\n      default: null,\n    },\n    title: {\n      type: String,\n      default: \"\",\n    },\n  },\n  emits: [\"close\", \"save\", \"cancel\"],\n  setup( props, {emit} ) {\n    const commentText = ref( \"\" );\n    const error = ref( \"\" );\n    const isSaving = ref( false );\n    const commentInput = ref( null );\n\n    const {saveComment} = useComments();\n    const {messages, msg} = useMessages();\n\n    // Computed title with fallback\n    const computedTitle = computed( () => {\n      return props.title || messages.newCommentTitle();\n    } );\n\n    // Translation helper function for inline use\n    const t = ( key ) => {\n      const translations = {\n        selectedText: msg( \"sic-selected-text\", \"Selected text\" ),\n        selectedImage: msg( \"sic-selected-image\", \"Selected image\" ),\n        commentPlaceholder: msg(\n            \"sic-comment-placeholder\",\n            \"Enter your comment...\",\n        ),\n        saving: msg( \"sic-saving\", \"Saving...\" ),\n      };\n      return translations[ key ] || key;\n    };\n\n    const canSave = computed( () => {\n      return commentText.value.trim().length > 0;\n    } );\n\n    const dialogStyle = computed( () => {\n      return {\n        // Always center the dialog\n        position: \"fixed\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n      };\n    } );\n\n    const handleCancel = () => {\n      commentText.value = \"\";\n      error.value = \"\";\n      emit( \"cancel\" );\n      emit( \"close\" );\n    };\n\n    const handleSave = async () => {\n      if ( !canSave.value ) {\n        error.value = messages.errorEmpty();\n        return;\n      }\n\n      isSaving.value = true;\n      error.value = \"\";\n\n      try {\n        const result = await saveComment(\n            commentText.value,\n            props.selectionData,\n        );\n\n        if ( result.success === \"1\" || result.success === true ) {\n          // Success\n          emit( \"save\", {\n            text: commentText.value,\n            result: result,\n          } );\n\n          // Reset form\n          commentText.value = \"\";\n\n          // Show success message\n          if ( window.mw && window.mw.notify ) {\n            window.mw.notify( messages.commentAdded(), {type: \"success\"} );\n          }\n\n          emit( \"close\" );\n        } else {\n          // Error\n          error.value = result.message || messages.apiError();\n        }\n      } catch ( err ) {\n        error.value = messages.apiError();\n        console.error( \"Error saving comment:\", err );\n      } finally {\n        isSaving.value = false;\n      }\n    };\n\n    const handleKeydown = ( event ) => {\n      if ( event.key === \"Escape\" ) {\n        handleCancel();\n      } else if ( event.key === \"Enter\" && ( event.ctrlKey || event.metaKey ) ) {\n        event.preventDefault();\n        handleSave();\n      }\n    };\n\n    // Global escape key handler\n    const handleGlobalKeydown = ( event ) => {\n      if ( event.key === \"Escape\" && props.isVisible ) {\n        handleCancel();\n      }\n    };\n\n    // Body class management for preventing scroll\n    const manageBodyClass = () => {\n      if ( props.isVisible ) {\n        document.body.classList.add( \"smartcomments-dialog-open\" );\n      } else {\n        document.body.classList.remove( \"smartcomments-dialog-open\" );\n      }\n    };\n\n    // Focus the input when dialog becomes visible\n    const focusInput = async () => {\n      if ( props.isVisible && commentInput.value ) {\n        await nextTick();\n        commentInput.value.focus();\n      }\n    };\n\n    onMounted( () => {\n      document.addEventListener( \"keydown\", handleGlobalKeydown );\n    } );\n\n    onUnmounted( () => {\n      document.removeEventListener( \"keydown\", handleGlobalKeydown );\n      document.body.classList.remove( \"smartcomments-dialog-open\" );\n    } );\n\n    const handleBackdropClick = () => {\n      handleCancel();\n    };\n\n    return {\n      commentText,\n      error,\n      isSaving,\n      commentInput,\n      canSave,\n      dialogStyle,\n      handleCancel,\n      handleSave,\n      handleKeydown,\n      focusInput,\n      handleBackdropClick,\n      manageBodyClass,\n      messages,\n      t,\n      title: computedTitle,\n    };\n  },\n  watch: {\n    isVisible: {\n      handler( newValue ) {\n        this.manageBodyClass();\n        if ( newValue ) {\n          this.focusInput();\n        }\n      },\n      immediate: true,\n    },\n  },\n} );\n</script>\n\n<style lang=\"less\">\n/* Backdrop overlay */\n.smartcomments-dialog-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 9999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  backdrop-filter: blur(2px);\n  -webkit-backdrop-filter: blur(2px);\n}\n\n.smartcomments-new-comment-dialog {\n  background: #fff;\n  border: 1px solid #a2a9b1;\n  border-radius: 4px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  min-width: 400px;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow-y: auto;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Lato\",\n  \"Helvetica\", \"Arial\", sans-serif;\n  font-size: 14px;\n  animation: fadeInScale 0.2s ease-out;\n\n  .smartcomments-new-comment-content {\n    padding: 0;\n  }\n\n  .smartcomments-dialog-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 16px;\n    border-bottom: 1px solid #a2a9b1;\n    background: #f8f9fa;\n\n    .smartcomments-dialog-title {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n      color: #222;\n    }\n\n    .smartcomments-dialog-close {\n      background: transparent;\n      border: none;\n      cursor: pointer;\n      padding: 4px;\n      border-radius: 2px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      &:hover {\n        background: #e4e6ea;\n      }\n\n      &:focus {\n        outline: 2px solid #36c;\n        outline-offset: 1px;\n      }\n\n      .oo-ui-iconElement-icon {\n        width: 20px;\n        height: 20px;\n        background-size: contain;\n        position: relative;\n      }\n    }\n  }\n\n  .smartcomments-selected-content {\n    background: #f8f9fa;\n\n    .smartcomments-selected-text {\n      padding: 16px;\n      margin-bottom: 12px;\n      display: none;\n\n      strong {\n        display: block;\n        margin-bottom: 4px;\n        color: #222;\n      }\n\n      .smartcomments-selection-preview {\n        padding: 8px 12px;\n        background: #fff;\n        border: 1px solid #a2a9b1;\n        border-radius: 2px;\n        font-style: italic;\n        color: #555;\n        max-height: 60px;\n        overflow-y: auto;\n      }\n    }\n\n    .smartcomments-selected-image {\n      max-width: 100%;\n      max-height: 150px;\n      border-bottom: 1px solid #eaecf0;\n    }\n  }\n\n  .smartcomments-comment-input-wrapper {\n    padding: 16px;\n\n    .smartcomments-input-label {\n      display: block;\n      margin-bottom: 8px;\n      font-weight: 600;\n      color: #222;\n    }\n\n    .smartcomments-comment-input {\n      width: 100%;\n      padding: 8px 12px;\n      border: 1px solid #a2a9b1;\n      border-radius: 2px;\n      font-family: inherit;\n      font-size: 14px;\n      line-height: 1.4;\n      resize: vertical;\n      min-height: 80px;\n      box-sizing: border-box;\n\n      &:focus {\n        outline: none;\n        border-color: #36c;\n        box-shadow: inset 0 0 0 1px #36c;\n      }\n\n      &::placeholder {\n        color: #72777d;\n      }\n    }\n\n    .smartcomments-error-message {\n      margin-top: 8px;\n      padding: 8px 12px;\n      background: #fee7e6;\n      border: 1px solid #d33;\n      border-radius: 2px;\n      color: #d33;\n      font-size: 13px;\n    }\n  }\n\n  .smartcomments-dialog-actions {\n    display: flex;\n    justify-content: flex-end;\n    gap: 8px;\n    padding: 12px 16px;\n    border-top: 1px solid #a2a9b1;\n    background: #f8f9fa;\n\n    .smartcomments-button {\n      padding: 8px 16px;\n      border: 1px solid #a2a9b1;\n      border-radius: 2px;\n      font-size: 14px;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.1s ease;\n\n      &:focus {\n        outline: 2px solid #36c;\n        outline-offset: 1px;\n      }\n\n      &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n\n      &.smartcomments-button-cancel {\n        background: #f8f9fa;\n        color: #222;\n\n        &:hover:not(:disabled) {\n          background: #e4e6ea;\n          border-color: #72777d;\n        }\n      }\n\n      &.smartcomments-button-save {\n        background: #36c;\n        color: #fff;\n        border-color: #36c;\n\n        &:hover:not(:disabled) {\n          background: #2a4b8d;\n          border-color: #2a4b8d;\n        }\n\n        &:disabled {\n          background: #c8ccd1;\n          border-color: #c8ccd1;\n          color: #72777d;\n        }\n      }\n    }\n  }\n}\n\n/* Animation for dialog appearance */\n@keyframes fadeInScale {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(0.9);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n\n/* Ensure proper stacking and prevent body scroll when dialog is open */\nbody.smartcomments-dialog-open {\n  overflow: hidden;\n}\n</style>\n","<template>\n  <div\n      v-if=\"isEnabled && positionedComments.length > 0\"\n      class=\"sic-timeline-container\"\n      :style=\"containerStyle\"\n  >\n    <div\n        v-for=\"comment in positionedComments\"\n        :key=\"comment.id || comment.data_id\"\n        class=\"sic-timeline-item\"\n        :class=\"{\n        broken: comment.isBroken,\n        'sic-timeline-item-hasreplies':\n          comment.hasReplies === 'true' ||\n          comment.hasReplies === true ||\n          (comment.replies && comment.replies.length > 0),\n      }\"\n        :style=\"comment.itemStyle\"\n        :data-selection=\"comment.posimg\"\n        @click=\"handleCommentClick(comment)\"\n        @mouseover=\"handleMouseOver(comment, $event)\"\n        @mouseout=\"handleMouseOut(comment)\"\n    >\n      <span class=\"oo-ui-iconElement-icon oo-ui-icon-speechBubbles\"></span>\n    </div>\n\n    <!-- Hover preview for broken comments -->\n    <div\n        v-if=\"brokenCommentHover.visible\"\n        class=\"sic-timeline-item-hover\"\n        :style=\"brokenCommentHover.style\"\n    >\n      <h2>{{ brokenCommentMessage }}</h2>\n      <img\n          v-if=\"brokenCommentHover.selection\"\n          :src=\"brokenCommentHover.selection\"\n          width=\"500\"\n          alt=\"Comment selection preview\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  defineComponent,\n  ref,\n  computed,\n  onMounted,\n  onBeforeUnmount,\n  nextTick,\n} from \"vue\";\nimport useCommentsStore from \"../store/commentsStore.js\";\nimport {useAppStateStore} from \"../store/appStateStore.js\";\nimport useMessages from \"../composables/core/useMessages.js\";\n\nexport default defineComponent( {\n  name: \"CommentTimeline\",\n  setup() {\n    const commentsStore = useCommentsStore();\n    const appStateStore = useAppStateStore();\n    const {messages} = useMessages();\n\n    // Reactive data\n    const positions = ref( [] );\n    const brokenCommentHover = ref( {\n      visible: false,\n      style: {},\n      selection: null,\n    } );\n\n    // Initialize component\n    onMounted( () => {\n      // Add window resize listener to recalculate positions\n      window.addEventListener( \"resize\", handleResize );\n      window.addEventListener( \"scroll\", handleScroll );\n    } );\n\n    onBeforeUnmount( () => {\n      window.removeEventListener( \"resize\", handleResize );\n      window.removeEventListener( \"scroll\", handleScroll );\n    } );\n\n    // Handle window resize and scroll events\n    const handleResize = () => {\n      // Force reactivity update by clearing and resetting positions\n      positions.value = [];\n    };\n\n    const handleScroll = () => {\n      // Hide broken comment hover on scroll\n      if ( brokenCommentHover.value.visible ) {\n        brokenCommentHover.value.visible = false;\n      }\n\n      // Force reactivity update to reposition broken comments at bottom of viewport\n      positions.value = [];\n    };\n\n    // Computed properties\n    const isEnabled = computed( () => appStateStore.isEnabled );\n\n    const comments = computed( () => {\n      // Ensure we have a valid comments array before filtering\n      if ( !Array.isArray( commentsStore.comments ) ) {\n        console.warn(\n            \"CommentTimeline: commentsStore.comments is not an array:\",\n            commentsStore.comments,\n        );\n        return [];\n      }\n      return commentsStore.comments.filter(\n          ( comment ) => comment && comment.status !== \"completed\",\n      );\n    } );\n\n    const brokenCommentMessage = computed( () => {\n      return messages.unlocalizedComment();\n    } );\n\n    const containerStyle = computed( () => {\n      const bodyElement =\n          document.querySelector( \".mw-body\" ) || document.querySelector( \"body\" );\n      if ( !bodyElement ) {\n        console.warn( \"CommentTimeline: Could not find body element\" );\n        return {top: \"0px\"};\n      }\n\n      const rect = bodyElement.getBoundingClientRect();\n      const topOffset = -rect.top - 80;\n\n      return {\n        top: `${topOffset}px`,\n      };\n    } );\n\n    const positionedComments = computed( () => {\n      const processedComments = [];\n      const usedPositions = [];\n      const brokenComments = [];\n      const normalComments = [];\n\n      // Early return if no comments to avoid unnecessary processing\n      if ( !comments.value || comments.value.length === 0 ) {\n        return [];\n      }\n\n      // First pass: separate broken and normal comments\n      comments.value.forEach( ( comment ) => {\n        const commentId = comment.data_id || comment.id;\n        const highlightElement = document.querySelector(\n            `.smartcomment-hl-${commentId}`,\n        );\n\n        if ( highlightElement ) {\n          // Normal comment with valid highlight\n          const rect = highlightElement.getBoundingClientRect();\n          const positionTop = rect.top + window.scrollY;\n          normalComments.push( {\n            ...comment,\n            isBroken: false,\n            positionTop,\n          } );\n        } else {\n          // Broken comment\n          brokenComments.push( {\n            ...comment,\n            isBroken: true,\n          } );\n        }\n      } );\n\n      // Process normal comments with layered positioning\n      normalComments.forEach( ( comment ) => {\n        let adjustedPosition = comment.positionTop;\n        while ( usedPositions.includes( adjustedPosition ) ) {\n          adjustedPosition += 10;\n        }\n        usedPositions.push( adjustedPosition );\n\n        processedComments.push( {\n          ...comment,\n          itemStyle: {\n            top: `${adjustedPosition}px`,\n            right: \"0px\",\n            position: \"absolute\",\n          },\n        } );\n      } );\n\n      // Process broken comments - position them at the bottom of the screen\n      const viewportHeight = window.innerHeight;\n      const scrollTop = window.scrollY;\n      const bottomBasePosition = scrollTop + viewportHeight - 150;\n\n      brokenComments.forEach( ( comment, index ) => {\n        const bottomPosition = bottomBasePosition - index * 10;\n\n        processedComments.push( {\n          ...comment,\n          itemStyle: {\n            top: `${bottomPosition}px`,\n            right: \"0px\",\n            position: \"absolute\",\n          },\n        } );\n      } );\n      return processedComments;\n    } );\n\n    // Methods\n    const handleCommentClick = ( comment ) => {\n      const commentId = comment.data_id || comment.id;\n      const highlightElement = document.querySelector(\n          `.smartcomment-hl-${commentId}`,\n      );\n\n      if ( comment.isBroken ) {\n        // For broken comments, use the timeline item as reference\n        const timelineItem = document.querySelector(\n            `.sic-timeline-item[data-selection=\"${comment.posimg}\"]`,\n        );\n        if ( timelineItem ) {\n          const rect = timelineItem.getBoundingClientRect();\n          const position = {\n            top: rect.top + window.scrollY,\n            left: rect.left + window.scrollX,\n            bottom: rect.bottom + window.scrollY,\n            right: rect.right + window.scrollX,\n            width: rect.width,\n            height: rect.height,\n          };\n          commentsStore.openCommentDialog( comment, position );\n        }\n      } else if ( highlightElement ) {\n        highlightElement.dispatchEvent(\n            new MouseEvent( \"click\", {\n              bubbles: true,\n              cancelable: true,\n              view: window,\n            } ),\n        );\n      }\n    };\n\n    const handleMouseOver = ( comment, event ) => {\n      const commentId = comment.data_id || comment.id;\n      const highlightElement = document.querySelector(\n          `.smartcomment-hl-${commentId}`,\n      );\n\n      if ( highlightElement ) {\n        highlightElement.classList.add( \"active\" );\n      }\n\n      // Handle broken comment hover preview\n      if ( comment.isBroken && comment.posimg ) {\n        brokenCommentHover.value = {\n          visible: true,\n          selection: comment.posimg,\n          style: {\n            position: \"absolute\",\n            right: \"30px\",\n            top: `${event.pageY - 50}px`,\n            border: \"2px solid #ff000050\",\n            background: \"white\",\n            padding: \"10px\",\n            borderRadius: \"5px\",\n            boxShadow: \"0 2px 10px rgba(0,0,0,0.1)\",\n            zIndex: 1000,\n          },\n        };\n      }\n    };\n\n    const handleMouseOut = ( comment ) => {\n      const commentId = comment.data_id || comment.id;\n      const highlightElement = document.querySelector(\n          `.smartcomment-hl-${commentId}`,\n      );\n\n      if ( highlightElement ) {\n        highlightElement.classList.remove( \"active\" );\n      }\n\n      // Hide broken comment hover\n      if ( comment.isBroken ) {\n        brokenCommentHover.value.visible = false;\n      }\n    };\n\n    return {\n      isEnabled,\n      comments,\n      positionedComments,\n      containerStyle,\n      brokenCommentHover,\n      brokenCommentMessage,\n      handleCommentClick,\n      handleMouseOver,\n      handleMouseOut,\n    };\n  },\n} );\n</script>\n\n<style lang=\"less\">\n.sic-timeline-container {\n  pointer-events: none;\n  z-index: 1;\n\n  .sic-timeline-item {\n    width: 24px;\n    height: 18px;\n    background: #ffffe0;\n    border: 1px solid rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    pointer-events: auto;\n    transition: all 0.2s ease;\n    z-index: 2;\n    border-radius: 2px;\n\n    .oo-ui-iconElement-icon {\n      width: 14px;\n      height: 14px;\n      min-width: 14px;\n      min-height: 14px;\n      padding-top: 5px;\n      pointer-events: none;\n      opacity: 0.6;\n    }\n\n    &:hover {\n      background: #b4f3ff;\n      border-color: rgba(0, 0, 0, 0.7);\n      z-index: 3;\n    }\n\n    &.broken {\n      background: #ffe0e0;\n      border-color: #d33;\n\n      &:hover {\n        background: #ffb4b4;\n        border-color: #a00;\n      }\n    }\n\n    &.sic-timeline-item-hasreplies {\n      background: #90ee90;\n      border-color: #27ae60;\n\n      &:hover {\n        background: #7de67d;\n      }\n    }\n  }\n}\n\n.sic-timeline-item-hover {\n  background: #fff;\n  border: 1px solid #a2a9b1;\n  padding: 10px;\n  box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);\n  max-width: 520px;\n  z-index: 1001;\n  pointer-events: auto;\n\n  h2 {\n    margin: 0 0 10px 0;\n    font-size: 14px;\n    color: #333;\n    border-bottom: 1px solid #eee;\n    padding-bottom: 5px;\n  }\n\n  img {\n    max-width: 100%;\n    height: auto;\n    border: 1px solid #ccc;\n  }\n}\n</style>\n","<template>\n  <div class=\"smartcomments\" v-if=\"isEnabled\">\n    <!-- Comment Dialog - now controlled by store -->\n    <comment\n        v-if=\"commentsStore.isCommentDialogVisible\"\n        :comment=\"commentsStore.activeComment\"\n        :position=\"commentsStore.commentPosition\"\n        @close=\"commentsStore.closeCommentDialog\"\n        @delete=\"commentsStore.deleteComment\"\n        @complete=\"commentsStore.completeComment\"\n        @view=\"commentsStore.viewPage\"\n        @navigate=\"handleCommentNavigation\"\n        @reply-added=\"commentsStore.handleReplyAdded\"\n    ></comment>\n\n    <!-- New Comment Dialog - now controlled by store -->\n    <new-comment-dialog\n        :is-visible=\"commentsStore.isNewCommentDialogVisible\"\n        :selection-data=\"commentsStore.newCommentSelection\"\n        @close=\"commentsStore.closeNewCommentDialog\"\n        @save=\"commentsStore.handleCommentSaved\"\n        @cancel=\"commentsStore.closeNewCommentDialog\"\n    ></new-comment-dialog>\n\n    <!-- Comment Timeline -->\n    <comment-timeline></comment-timeline>\n  </div>\n</template>\n\n<script>\nimport {defineComponent} from \"vue\";\nimport useSmartCommentsSetup from \"./composables/setup/useSmartCommentsSetup.js\";\nimport {useSelectionEvents} from \"./composables/selection/useSelectionEvents.js\";\nimport {useLinkPrevention} from \"./composables/features/useLinkPrevention.js\";\nimport {useAppStateStore} from \"./store/appStateStore.js\";\nimport useCommentsStore from \"./store/commentsStore.js\";\nimport useMessages from \"./composables/core/useMessages.js\";\nimport useHighlightOrchestrator from \"./composables/highlights/useHighlightOrchestrator.js\";\nimport useKeyboardShortcuts from \"./composables/ui/useKeyboardShortcuts.js\";\nimport useCustomProperties from \"./composables/core/useCustomProperties.js\";\nimport useSmartCommentsEventHandlers from \"./composables/ui/useSmartCommentsEventHandlers.js\";\nimport useUrlNavigation from \"./composables/features/useUrlNavigation.js\";\nimport Comment from \"./components/Comment.vue\";\nimport NewCommentDialog from \"./components/NewCommentDialog.vue\";\nimport CommentTimeline from \"./components/CommentTimeline.vue\";\nimport {smartCommentsEvents, EVENTS} from \"./utils/smartCommentsEvents.js\";\n\nexport default defineComponent( {\n  name: \"SmartComments\",\n  components: {\n    Comment,\n    NewCommentDialog,\n    CommentTimeline,\n  },\n  setup() {\n    const smartCommentsSetup = useSmartCommentsSetup();\n    const store = useAppStateStore();\n    const commentsStore = useCommentsStore();\n    const messages = useMessages();\n    const linkPrevention = useLinkPrevention();\n\n    // Initialize specialized composables\n    const highlightsManager = useHighlightOrchestrator(\n        smartCommentsSetup,\n        commentsStore,\n        smartCommentsEvents,\n    );\n    const keyboardShortcuts = useKeyboardShortcuts( commentsStore );\n    const customProperties = useCustomProperties( messages );\n    const eventHandlers = useSmartCommentsEventHandlers(\n        smartCommentsEvents,\n        EVENTS,\n        store,\n        commentsStore,\n        highlightsManager,\n    );\n    const urlNavigation = useUrlNavigation( commentsStore );\n\n    return {\n      smartCommentsSetup,\n      store,\n      commentsStore,\n      smartCommentsEvents,\n      EVENTS,\n      messages,\n      linkPrevention,\n      highlightsManager,\n      keyboardShortcuts,\n      customProperties,\n      eventHandlers,\n      urlNavigation,\n    };\n  },\n  data() {\n    return {\n      selectionEvents: null,\n      cleanupFunctions: [],\n    };\n  },\n  computed: {\n    isEnabled() {\n      return this.store.isEnabled;\n    },\n  },\n  mounted() {\n    this.selectionEvents = useSelectionEvents();\n\n    // Setup all systems\n    this.setupSystems();\n\n    this.$watch(\n        () => this.isEnabled,\n        async ( stateNowEnabled ) => {\n          if ( stateNowEnabled ) {\n            await this.enableSmartComments();\n          } else {\n            await this.disableSmartComments();\n          }\n        },\n        {immediate: true},\n    );\n\n    // Handle selection events - delegate to store\n    this.cleanupFunctions.push(\n        this.selectionEvents.onSelectionCreate( this.handleNewSelection ),\n    );\n  },\n  beforeUnmount() {\n    this.highlightsManager.clearHighlights();\n    if ( this.selectionEvents ) this.selectionEvents.unbindEvents();\n    if ( this.linkPrevention ) this.linkPrevention.unbindEvents();\n\n    // Clean up all registered functions\n    this.cleanupFunctions.forEach( ( cleanup ) => cleanup() );\n  },\n  methods: {\n    /**\n     * Setup all systems and event handlers\n     */\n    setupSystems() {\n      // Setup highlight refresh listener\n      this.cleanupFunctions.push(\n          this.highlightsManager.setupHighlightRefreshListener(),\n      );\n\n      // Setup SmartComments events\n      this.cleanupFunctions.push( this.eventHandlers.setupSmartCommentsEvents() );\n\n      // Setup keyboard shortcuts\n      this.cleanupFunctions.push(\n          this.keyboardShortcuts.setupKeyboardShortcuts(),\n      );\n\n      // Setup CSS custom properties watchers\n      this.cleanupFunctions.push(\n          this.customProperties.setupCustomPropertiesWatchers(),\n      );\n\n      // Setup URL navigation\n      this.cleanupFunctions.push(\n          this.urlNavigation.setupUrlNavigation( () => this.isEnabled ),\n      );\n    },\n\n    /**\n     * Enable SmartComments system\n     */\n    async enableSmartComments() {\n      try {\n        // Trigger comments enabled event\n        this.smartCommentsEvents.triggerCommentsEnabled();\n\n        if ( this.selectionEvents ) this.selectionEvents.bindEvents();\n\n        // Setup image selection to create dynamic block wrappers\n        try {\n          const {useSelection} = await import(\n              \"./composables/selection/useSelection.js\"\n              );\n          const selection = useSelection();\n          selection.setupSelection();\n        } catch ( error ) {\n          console.error( \"Failed to setup selection strategies:\", error );\n        }\n\n        // Bind link prevention events when comment mode is enabled\n        if ( this.linkPrevention ) this.linkPrevention.bindEvents();\n\n        this.highlightsManager.clearHighlights();\n\n        await this.highlightsManager.reloadHighlightsAndComments();\n\n        // Check URL parameters and open comment if specified\n        await this.commentsStore.checkAndOpenCommentFromUrl();\n      } catch ( e ) {\n        console.error( \"SmartComments.vue enableSmartComments: Error:\", e );\n      }\n    },\n\n    /**\n     * Disable SmartComments system\n     */\n    async disableSmartComments() {\n      // Trigger comments disabled event\n      this.smartCommentsEvents.triggerCommentsDisabled();\n\n      if ( this.selectionEvents ) this.selectionEvents.unbindEvents();\n      if ( this.linkPrevention ) this.linkPrevention.unbindEvents();\n\n      this.highlightsManager.clearHighlights();\n\n      // Close all dialogs when disabling\n      this.commentsStore.closeAllDialogs();\n    },\n\n    /**\n     * Handle new selection - delegate to store\n     */\n    handleNewSelection( selectionData ) {\n      this.smartCommentsEvents.triggerSelectionActive( selectionData );\n      this.commentsStore.openNewCommentDialog( selectionData );\n    },\n\n    /**\n     * Handle comment navigation from Comment component\n     */\n    handleCommentNavigation( navigationData ) {\n      const {direction} = navigationData;\n      this.commentsStore.navigateComment( direction );\n    },\n\n    /**\n     * Manual highlight reload (for debugging)\n     */\n    async reloadHighlights() {\n      await this.highlightsManager.reloadHighlights( this.isEnabled );\n    },\n\n    /**\n     * Check URL parameters and open comment (for debugging)\n     */\n    async checkUrlParameters() {\n      await this.urlNavigation.checkUrlParameters( () => this.isEnabled );\n    },\n  },\n} );\n</script>\n\n<style lang=\"less\">\n.smartcomments {\n  *[data-tooltip] {\n    position: relative;\n\n    &:hover:after {\n      content: attr(data-tooltip);\n      position: absolute;\n      background: rgba(0, 0, 0, 0.8);\n      color: #fff;\n      padding: 5px;\n      border-radius: 5px;\n      font-size: 12px;\n      z-index: 1000;\n      pointer-events: none;\n      top: calc(100% + 8px);\n\n      /* Position relative to right edge to prevent overflow */\n      right: -8px;\n      max-width: 250px;\n      width: auto;\n      white-space: normal;\n      word-wrap: break-word;\n      box-sizing: border-box;\n    }\n  }\n\n  .smartcomments-visually-hidden {\n    border: 0;\n    clip: rect(0 0 0 0);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n  }\n}\n\n*[class^=\"smartcomment-hl-\"] {\n  cursor: pointer;\n  text-decoration: none;\n  color: #000;\n  background: #ffffe0;\n  padding: 0 2px;\n  box-shadow: 0 0 1px #000;\n  transition: all 0.2s ease;\n  position: relative;\n\n  &.active {\n    background: #ffde8d;\n  }\n}\n\n/* Selection system styles */\n.sc-dynamic-block {\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  position: relative;\n\n  &:hover,\n  &[class*=\"smartcomment-hl-\"] {\n    &:before {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(255, 255, 224, 0.8);\n      border-top: 1px solid rgba(0, 0, 0, 0.2);\n      content: var(--smartcomments-button-open-text, \"View comment\");\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: black;\n      font-weight: bold;\n    }\n  }\n\n  &:hover:not([class*=\"smartcomment-hl-\"]) {\n    &:before {\n      content: var(--smartcomments-annotate-text, \"annotate\");\n    }\n  }\n\n  &.sc-hover {\n    background-color: rgba(255, 255, 0, 0.2);\n    outline: 1px solid rgba(255, 255, 0, 0.5);\n  }\n\n  &.sc-image-block {\n    display: inline-block;\n\n    img {\n      display: block;\n      max-width: 100%;\n      height: auto;\n    }\n  }\n}\n\n/* Screenshot creation state - hide all SmartComments styling except active highlight */\nbody.smartcomments-creating-screenshot {\n  .smartcomments {\n    *[data-tooltip]:hover:after {\n      display: none;\n    }\n  }\n\n  .sc-dynamic-block {\n    &:hover,\n    &[class*=\"smartcomment-hl-\"]:not(.active) {\n      &:before {\n        display: none;\n      }\n    }\n\n    &.sc-hover {\n      background-color: transparent;\n      outline: none;\n    }\n  }\n\n  *[class^=\"smartcomment-hl-\"]:not(.active) {\n    background: transparent;\n    box-shadow: none;\n    padding: 0;\n  }\n\n  .smartcomments-enabled {\n    svg a:not(.active) {\n      rect,\n      path,\n      circle,\n      polygon {\n        stroke: inherit !important;\n        stroke-width: inherit !important;\n        filter: none;\n      }\n\n      text {\n        font-weight: inherit;\n        filter: none;\n      }\n    }\n\n    .sc-selection-highlight:not(.active) {\n      background-color: transparent;\n      border: none;\n    }\n  }\n}\n\n.smartcomments-enabled {\n  svg a {\n    cursor: pointer;\n    transition: all 0.2s ease;\n\n    &.sc-svg-hover {\n      rect,\n      path,\n      circle,\n      polygon {\n        stroke: rgba(255, 255, 0, 0.8) !important;\n        stroke-width: 2 !important;\n        filter: drop-shadow(0 0 3px rgba(255, 255, 0, 0.6));\n      }\n\n      text {\n        font-weight: bold;\n        filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.3));\n      }\n    }\n\n    &[class*=\"smartcomment-hl-\"] {\n      rect {\n        stroke: rgba(255, 222, 141, 0.8) !important;\n        stroke-width: 2 !important;\n        fill: rgba(255, 255, 224, 0.4) !important;\n      }\n\n      &.active {\n        rect {\n          fill: rgba(255, 222, 141, 0.6) !important;\n        }\n      }\n    }\n  }\n\n  /* Text selection highlighting */\n\n  .sc-selection-highlight {\n    background-color: rgba(255, 255, 224, 0.8);\n    border-top: 1px solid rgba(0, 0, 0, 0.2);\n    border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n\n    &:first-child {\n      border-left: 1px solid rgba(0, 0, 0, 0.2);\n    }\n\n    &:last-child {\n      border-right: 1px solid rgba(0, 0, 0, 0.2);\n    }\n  }\n\n  /* Selection disabled state */\n\n  &.selection-disabled {\n    .sc-dynamic-block {\n      cursor: default;\n\n      &:hover {\n        background-color: transparent;\n        outline: none;\n      }\n    }\n  }\n}\n</style>\n","import {ref} from \"vue\";\nimport {\n\tapplyHighlights,\n\tclearAllHighlights,\n} from \"../../directives/highlightDirective.js\";\n\n/**\n * Composable for orchestrating the entire highlighting system\n * This handles DOM operations, event management, and integration with stores\n */\nfunction useHighlightOrchestrator(\n\tsmartCommentsSetup,\n\tcommentsStore,\n\tsmartCommentsEvents,\n) {\n\tconst isRefreshing = ref( false );\n\n\t/**\n\t * Get the target element for highlights\n\t */\n\tconst getTargetElement = () => {\n\t\treturn document.getElementById( \"mw-content-text\" ) || document.body;\n\t};\n\n\t/**\n\t * Handle highlight click events\n\t */\n\tconst handleHighlightClick = ( event, commentData, position ) => {\n\t\tif ( event && event.preventDefault ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\t// Trigger events\n\t\tsmartCommentsEvents.triggerHighlightClicked( commentData, position );\n\t\tsmartCommentsEvents.triggerCommentGroupOpen( commentData, position );\n\n\t\tcommentsStore.openCommentDialog( commentData, position );\n\t};\n\n\t/**\n\t * Reload highlights and update comments store\n\t */\n\tconst reloadHighlightsAndComments = async () => {\n\t\tif ( isRefreshing.value ) return;\n\n\t\ttry {\n\t\t\tisRefreshing.value = true;\n\t\t\tconst targetElement = getTargetElement();\n\n\t\t\t// Clear existing highlights first\n\t\t\tif ( smartCommentsSetup.highlightedAnchors?.value ) {\n\t\t\t\tclearAllHighlights(\n\t\t\t\t\ttargetElement,\n\t\t\t\t\tsmartCommentsSetup.highlightedAnchors.value,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Reload comments and highlights from server\n\t\t\tawait smartCommentsSetup.loadAndSetHighlights();\n\n\t\t\t// Update the comments store with the freshly loaded comments\n\t\t\tif ( smartCommentsSetup.comments?.value !== undefined ) {\n\t\t\t\tcommentsStore.setComments( smartCommentsSetup.comments.value );\n\t\t\t} else {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t\"useHighlightOrchestrator: comments.value is undefined after loadAndSetHighlights, setting empty array\",\n\t\t\t\t);\n\t\t\t\tcommentsStore.setComments( [] );\n\t\t\t}\n\n\t\t\t// Apply the fresh highlights\n\t\t\tif ( smartCommentsSetup.highlightedAnchors?.value ) {\n\t\t\t\tapplyHighlights(\n\t\t\t\t\ttargetElement,\n\t\t\t\t\tsmartCommentsSetup.highlightedAnchors.value,\n\t\t\t\t\thandleHighlightClick,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Restore active highlight if dialog is open\n\t\t\tif ( commentsStore.isCommentDialogVisible && commentsStore.activeComment ) {\n\t\t\t\tconst commentId =\n\t\t\t\t\tcommentsStore.activeComment.data_id || commentsStore.activeComment.id;\n\t\t\t\tcommentsStore.setActiveHighlight( commentId );\n\t\t\t}\n\t\t} catch ( error ) {\n\t\t\tconsole.error(\n\t\t\t\t\"useHighlightOrchestrator: Error reloading highlights:\",\n\t\t\t\terror,\n\t\t\t);\n\t\t} finally {\n\t\t\tisRefreshing.value = false;\n\t\t}\n\t};\n\n\t/**\n\t * Clear all highlights\n\t */\n\tconst clearHighlights = () => {\n\t\tconst targetElement = getTargetElement();\n\t\tif ( smartCommentsSetup.highlightedAnchors?.value ) {\n\t\t\tclearAllHighlights(\n\t\t\t\ttargetElement,\n\t\t\t\tsmartCommentsSetup.highlightedAnchors.value,\n\t\t\t);\n\t\t}\n\t};\n\n\t/**\n\t * Setup highlight refresh event listener\n\t */\n\tconst setupHighlightRefreshListener = () => {\n\t\tconst handleHighlightRefresh = async () => {\n\t\t\tawait reloadHighlightsAndComments();\n\t\t};\n\n\t\tdocument.addEventListener(\n\t\t\t\"smartcomments:refresh-highlights\",\n\t\t\thandleHighlightRefresh,\n\t\t);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\n\t\t\t\t\"smartcomments:refresh-highlights\",\n\t\t\t\thandleHighlightRefresh,\n\t\t\t);\n\t\t};\n\t};\n\n\t/**\n\t * Manual highlight reload (for debugging)\n\t */\n\tconst reloadHighlights = async ( isEnabled ) => {\n\t\tif ( !isEnabled ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"useHighlightOrchestrator: Cannot reload highlights, system is disabled.\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !smartCommentsSetup?.loadAndSetHighlights ) {\n\t\t\tconsole.error(\n\t\t\t\t\"useHighlightOrchestrator: smartCommentsSetup.loadAndSetHighlights not available.\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tclearHighlights();\n\t\t\tawait reloadHighlightsAndComments();\n\t\t} catch ( error ) {\n\t\t\tconsole.error( \"useHighlightOrchestrator reloadHighlights: Error:\", error );\n\t\t}\n\t};\n\n\treturn {\n\t\tisRefreshing,\n\t\treloadHighlightsAndComments,\n\t\tclearHighlights,\n\t\tsetupHighlightRefreshListener,\n\t\treloadHighlights,\n\t\thandleHighlightClick,\n\t};\n}\n\nexport default useHighlightOrchestrator;\n","/**\n * Composable for managing keyboard shortcuts\n */\nfunction useKeyboardShortcuts( commentsStore ) {\n\t/**\n\t * Handle keyboard shortcuts\n\t */\n\tconst handleKeydown = ( event ) => {\n\t\tif ( event.key === \"Escape\" && commentsStore.isCommentDialogVisible ) {\n\t\t\tcommentsStore.closeCommentDialog();\n\t\t} else if ( event.key === \"Delete\" && commentsStore.activeComment ) {\n\t\t\tcommentsStore.deleteComment( commentsStore.activeComment );\n\t\t} else if ( event.key === \"ArrowDown\" && commentsStore.hasNextComment ) {\n\t\t\tcommentsStore.navigateComment( \"next\" );\n\t\t} else if ( event.key === \"ArrowUp\" && commentsStore.hasPreviousComment ) {\n\t\t\tcommentsStore.navigateComment( \"previous\" );\n\t\t}\n\t};\n\n\t/**\n\t * Setup keyboard event listeners\n\t */\n\tconst setupKeyboardShortcuts = () => {\n\t\tdocument.addEventListener( \"keydown\", handleKeydown );\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener( \"keydown\", handleKeydown );\n\t\t};\n\t};\n\n\treturn {\n\t\tsetupKeyboardShortcuts,\n\t};\n}\n\nexport default useKeyboardShortcuts;\n","import {watch} from \"vue\";\n\n/**\n * Composable for managing CSS custom properties\n */\nfunction useCustomProperties( messages ) {\n\t/**\n\t * Update CSS custom property for annotate tooltip text\n\t */\n\tconst updateAnnotateTooltipText = ( text ) => {\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--smartcomments-annotate-text\",\n\t\t\t`\"${text}\"`,\n\t\t);\n\t};\n\n\t/**\n\t * Update CSS custom property for button open text\n\t */\n\tconst updateButtonOpenText = ( text ) => {\n\t\tdocument.documentElement.style.setProperty(\n\t\t\t\"--smartcomments-button-open-text\",\n\t\t\t`\"${text}\"`,\n\t\t);\n\t};\n\n\t/**\n\t * Setup watchers for CSS custom properties\n\t */\n\tconst setupCustomPropertiesWatchers = () => {\n\t\tconst annotateTooltipText = () => messages.msg( \"sic-annotate-tooltip\" );\n\t\tconst buttonOpenText = () => messages.msg( \"sic-button-open\" );\n\n\t\t// Initial setup\n\t\tupdateAnnotateTooltipText( annotateTooltipText() );\n\t\tupdateButtonOpenText( buttonOpenText() );\n\n\t\t// Watch for changes (e.g., language changes)\n\t\tconst stopAnnotateWatcher = watch( annotateTooltipText, ( newText ) => {\n\t\t\tupdateAnnotateTooltipText( newText );\n\t\t} );\n\n\t\tconst stopButtonWatcher = watch( buttonOpenText, ( newText ) => {\n\t\t\tupdateButtonOpenText( newText );\n\t\t} );\n\n\t\treturn () => {\n\t\t\tstopAnnotateWatcher();\n\t\t\tstopButtonWatcher();\n\t\t};\n\t};\n\n\treturn {\n\t\tsetupCustomPropertiesWatchers,\n\t\tupdateAnnotateTooltipText,\n\t\tupdateButtonOpenText,\n\t};\n}\n\nexport default useCustomProperties;\n","/**\n * Composable for managing SmartComments event handlers\n */\nfunction useSmartCommentsEventHandlers(\n\tsmartCommentsEvents,\n\tEVENTS,\n\tstore,\n\tcommentsStore,\n\thighlightsManager,\n) {\n\t/**\n\t * Setup SmartComments events\n\t */\n\tconst setupSmartCommentsEvents = () => {\n\t\tconst cleanupFunctions = [];\n\n\t\t// Listen for debug mode events\n\t\tcleanupFunctions.push(\n\t\t\tsmartCommentsEvents.on( EVENTS.DEBUG_MODE, ( event ) => {\n\t\t\t\tif ( event.detail.enabled && !store.isEnabled ) {\n\t\t\t\t\tstore.setEnabled( true );\n\t\t\t\t}\n\t\t\t} ),\n\t\t);\n\n\t\t// Listen for selection active events\n\t\tcleanupFunctions.push(\n\t\t\tsmartCommentsEvents.on( EVENTS.SELECTION_ACTIVE, ( event ) => {\n\t\t\t\t// Close any open comment dialogs when a new selection is made\n\t\t\t\tif ( commentsStore.isCommentDialogVisible ) {\n\t\t\t\t\tcommentsStore.closeCommentDialog();\n\t\t\t\t}\n\t\t\t} ),\n\t\t);\n\n\t\t// Listen for open comment events\n\t\tcleanupFunctions.push(\n\t\t\tsmartCommentsEvents.on( EVENTS.OPEN_COMMENT_ID, ( event ) => {\n\t\t\t\tif ( event.detail.commentId ) {\n\t\t\t\t\t// Handle opening specific comment\n\t\t\t\t\tcommentsStore.openCommentById( event.detail.commentId );\n\t\t\t\t}\n\t\t\t} ),\n\t\t);\n\n\t\t// Listen for comment created events\n\t\tcleanupFunctions.push(\n\t\t\tsmartCommentsEvents.on( EVENTS.COMMENT_CREATED, ( event ) => {\n\t\t\t\tif ( highlightsManager ) {\n\t\t\t\t\thighlightsManager.reloadHighlightsAndComments();\n\t\t\t\t}\n\t\t\t} ),\n\t\t);\n\n\t\treturn () => {\n\t\t\tcleanupFunctions.forEach( ( cleanup ) => cleanup() );\n\t\t};\n\t};\n\n\treturn {\n\t\tsetupSmartCommentsEvents,\n\t};\n}\n\nexport default useSmartCommentsEventHandlers;\n","/**\n * Composable for managing URL navigation and parameters\n */\nfunction useUrlNavigation( commentsStore ) {\n\t/**\n\t * Setup URL navigation handlers\n\t */\n\tconst setupUrlNavigation = ( isEnabled ) => {\n\t\t// Handle URL changes (back/forward navigation)\n\t\tconst handlePopState = async () => {\n\t\t\tif ( isEnabled() ) {\n\t\t\t\tawait commentsStore.checkAndOpenCommentFromUrl();\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener( \"popstate\", handlePopState );\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener( \"popstate\", handlePopState );\n\t\t};\n\t};\n\n\t/**\n\t * Check URL parameters and open comment (for debugging)\n\t */\n\tconst checkUrlParameters = async ( isEnabled ) => {\n\t\tif ( !isEnabled() ) {\n\t\t\tconsole.warn(\n\t\t\t\t\"useUrlNavigation: Cannot check URL parameters, system is disabled.\",\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tawait commentsStore.checkAndOpenCommentFromUrl();\n\t};\n\n\treturn {\n\t\tsetupUrlNavigation,\n\t\tcheckUrlParameters,\n\t};\n}\n\nexport default useUrlNavigation;\n","/**\n * Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Copyright 2024, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.2\n * Build date: 2 November 2024\n */\n\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory();\n    } else {\n        // No AMD or CommonJS support so we place Rangy in (probably) the global variable\n        root.rangy = factory();\n    }\n})(function() {\n\n    var OBJECT = \"object\", FUNCTION = \"function\", UNDEFINED = \"undefined\";\n\n    // Minimal set of properties required for DOM Level 2 Range compliance. Comparison constants such as START_TO_START\n    // are omitted because ranges in KHTML do not have them but otherwise work perfectly well. See issue 113.\n    var domRangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n        \"commonAncestorContainer\"];\n\n    // Minimal set of methods required for DOM Level 2 Range compliance\n    var domRangeMethods = [\"setStart\", \"setStartBefore\", \"setStartAfter\", \"setEnd\", \"setEndBefore\",\n        \"setEndAfter\", \"collapse\", \"selectNode\", \"selectNodeContents\", \"compareBoundaryPoints\", \"deleteContents\",\n        \"extractContents\", \"cloneContents\", \"insertNode\", \"surroundContents\", \"cloneRange\", \"toString\", \"detach\"];\n\n    var textRangeProperties = [\"boundingHeight\", \"boundingLeft\", \"boundingTop\", \"boundingWidth\", \"htmlText\", \"text\"];\n\n    // Subset of TextRange's full set of methods that we're interested in\n    var textRangeMethods = [\"collapse\", \"compareEndPoints\", \"duplicate\", \"moveToElementText\", \"parentElement\", \"select\",\n        \"setEndPoint\", \"getBoundingClientRect\"];\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Trio of functions taken from Peter Michaux's article:\n    // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\n    function isHostMethod(o, p) {\n        var t = typeof o[p];\n        return t == FUNCTION || (!!(t == OBJECT && o[p])) || t == \"unknown\";\n    }\n\n    function isHostObject(o, p) {\n        return !!(typeof o[p] == OBJECT && o[p]);\n    }\n\n    function isHostProperty(o, p) {\n        return typeof o[p] != UNDEFINED;\n    }\n\n    // Creates a convenience function to save verbose repeated calls to tests functions\n    function createMultiplePropertyTest(testFunc) {\n        return function(o, props) {\n            var i = props.length;\n            while (i--) {\n                if (!testFunc(o, props[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    }\n\n    // Next trio of functions are a convenience to save verbose repeated calls to previous two functions\n    var areHostMethods = createMultiplePropertyTest(isHostMethod);\n    var areHostObjects = createMultiplePropertyTest(isHostObject);\n    var areHostProperties = createMultiplePropertyTest(isHostProperty);\n\n    function isTextRange(range) {\n        return range && areHostMethods(range, textRangeMethods) && areHostProperties(range, textRangeProperties);\n    }\n\n    function getBody(doc) {\n        return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\n    }\n\n    var forEach = [].forEach ?\n        function(arr, func) {\n            arr.forEach(func);\n        } :\n        function(arr, func) {\n            for (var i = 0, len = arr.length; i < len; ++i) {\n                func(arr[i], i);\n            }\n        };\n\n    var modules = {};\n\n    var isBrowser = (typeof window != UNDEFINED && typeof document != UNDEFINED);\n\n    var util = {\n        isHostMethod: isHostMethod,\n        isHostObject: isHostObject,\n        isHostProperty: isHostProperty,\n        areHostMethods: areHostMethods,\n        areHostObjects: areHostObjects,\n        areHostProperties: areHostProperties,\n        isTextRange: isTextRange,\n        getBody: getBody,\n        forEach: forEach\n    };\n\n    var api = {\n        version: \"1.3.2\",\n        initialized: false,\n        isBrowser: isBrowser,\n        supported: true,\n        util: util,\n        features: {},\n        modules: modules,\n        config: {\n            alertOnFail: false,\n            alertOnWarn: false,\n            preferTextRange: false,\n            autoInitialize: (typeof rangyAutoInitialize == UNDEFINED) ? true : rangyAutoInitialize\n        }\n    };\n\n    function consoleLog(msg) {\n        if (typeof console != UNDEFINED && isHostMethod(console, \"log\")) {\n            console.log(msg);\n        }\n    }\n\n    function alertOrLog(msg, shouldAlert) {\n        if (isBrowser && shouldAlert) {\n            alert(msg);\n        } else  {\n            consoleLog(msg);\n        }\n    }\n\n    function fail(reason) {\n        api.initialized = true;\n        api.supported = false;\n        alertOrLog(\"Rangy is not supported in this environment. Reason: \" + reason, api.config.alertOnFail);\n    }\n\n    api.fail = fail;\n\n    function warn(msg) {\n        alertOrLog(\"Rangy warning: \" + msg, api.config.alertOnWarn);\n    }\n\n    api.warn = warn;\n\n    // Add utility extend() method\n    var extend;\n    if ({}.hasOwnProperty) {\n        util.extend = extend = function(obj, props, deep) {\n            var o, p;\n            for (var i in props) {\n                if (i === \"__proto__\" || i === \"constructor\" || i === \"prototype\") {\n                    continue;\n                }\n                if (props.hasOwnProperty(i)) {\n                    o = obj[i];\n                    p = props[i];\n                    if (deep && o !== null && typeof o == \"object\" && p !== null && typeof p == \"object\") {\n                        extend(o, p, true);\n                    }\n                    obj[i] = p;\n                }\n            }\n            // Special case for toString, which does not show up in for...in loops in IE <= 8\n            if (props.hasOwnProperty(\"toString\")) {\n                obj.toString = props.toString;\n            }\n            return obj;\n        };\n\n        util.createOptions = function(optionsParam, defaults) {\n            var options = {};\n            extend(options, defaults);\n            if (optionsParam) {\n                extend(options, optionsParam);\n            }\n            return options;\n        };\n    } else {\n        fail(\"hasOwnProperty not supported\");\n    }\n\n    // Test whether we're in a browser and bail out if not\n    if (!isBrowser) {\n        fail(\"Rangy can only run in a browser\");\n    }\n\n    // Test whether Array.prototype.slice can be relied on for NodeLists and use an alternative toArray() if not\n    (function() {\n        var toArray;\n\n        if (isBrowser) {\n            var el = document.createElement(\"div\");\n            el.appendChild(document.createElement(\"span\"));\n            var slice = [].slice;\n            try {\n                if (slice.call(el.childNodes, 0)[0].nodeType == 1) {\n                    toArray = function(arrayLike) {\n                        return slice.call(arrayLike, 0);\n                    };\n                }\n            } catch (e) {}\n        }\n\n        if (!toArray) {\n            toArray = function(arrayLike) {\n                var arr = [];\n                for (var i = 0, len = arrayLike.length; i < len; ++i) {\n                    arr[i] = arrayLike[i];\n                }\n                return arr;\n            };\n        }\n\n        util.toArray = toArray;\n    })();\n\n    // Very simple event handler wrapper function that doesn't attempt to solve issues such as \"this\" handling or\n    // normalization of event properties because we don't need this.\n    var addListener;\n    if (isBrowser) {\n        if (isHostMethod(document, \"addEventListener\")) {\n            addListener = function(obj, eventType, listener) {\n                obj.addEventListener(eventType, listener, false);\n            };\n        } else if (isHostMethod(document, \"attachEvent\")) {\n            addListener = function(obj, eventType, listener) {\n                obj.attachEvent(\"on\" + eventType, listener);\n            };\n        } else {\n            fail(\"Document does not have required addEventListener or attachEvent method\");\n        }\n\n        util.addListener = addListener;\n    }\n\n    var initListeners = [];\n\n    function getErrorDesc(ex) {\n        return ex.message || ex.description || String(ex);\n    }\n\n    // Initialization\n    function init() {\n        if (!isBrowser || api.initialized) {\n            return;\n        }\n        var testRange;\n        var implementsDomRange = false, implementsTextRange = false;\n\n        // First, perform basic feature tests\n\n        if (isHostMethod(document, \"createRange\")) {\n            testRange = document.createRange();\n            if (areHostMethods(testRange, domRangeMethods) && areHostProperties(testRange, domRangeProperties)) {\n                implementsDomRange = true;\n            }\n        }\n\n        var body = getBody(document);\n        if (!body || body.nodeName.toLowerCase() != \"body\") {\n            fail(\"No body element found\");\n            return;\n        }\n\n        if (body && isHostMethod(body, \"createTextRange\")) {\n            testRange = body.createTextRange();\n            if (isTextRange(testRange)) {\n                implementsTextRange = true;\n            }\n        }\n\n        if (!implementsDomRange && !implementsTextRange) {\n            fail(\"Neither Range nor TextRange are available\");\n            return;\n        }\n\n        api.initialized = true;\n        api.features = {\n            implementsDomRange: implementsDomRange,\n            implementsTextRange: implementsTextRange\n        };\n\n        // Initialize modules\n        var module, errorMessage;\n        for (var moduleName in modules) {\n            if ( (module = modules[moduleName]) instanceof Module ) {\n                module.init(module, api);\n            }\n        }\n\n        // Call init listeners\n        for (var i = 0, len = initListeners.length; i < len; ++i) {\n            try {\n                initListeners[i](api);\n            } catch (ex) {\n                errorMessage = \"Rangy init listener threw an exception. Continuing. Detail: \" + getErrorDesc(ex);\n                consoleLog(errorMessage);\n            }\n        }\n    }\n\n    function deprecationNotice(deprecated, replacement, module) {\n        if (module) {\n            deprecated += \" in module \" + module.name;\n        }\n        api.warn(\"DEPRECATED: \" + deprecated + \" is deprecated. Please use \" +\n        replacement + \" instead.\");\n    }\n\n    function createAliasForDeprecatedMethod(owner, deprecated, replacement, module) {\n        owner[deprecated] = function() {\n            deprecationNotice(deprecated, replacement, module);\n            return owner[replacement].apply(owner, util.toArray(arguments));\n        };\n    }\n\n    util.deprecationNotice = deprecationNotice;\n    util.createAliasForDeprecatedMethod = createAliasForDeprecatedMethod;\n\n    // Allow external scripts to initialize this library in case it's loaded after the document has loaded\n    api.init = init;\n\n    // Execute listener immediately if already initialized\n    api.addInitListener = function(listener) {\n        if (api.initialized) {\n            listener(api);\n        } else {\n            initListeners.push(listener);\n        }\n    };\n\n    var shimListeners = [];\n\n    api.addShimListener = function(listener) {\n        shimListeners.push(listener);\n    };\n\n    function shim(win) {\n        win = win || window;\n        init();\n\n        // Notify listeners\n        for (var i = 0, len = shimListeners.length; i < len; ++i) {\n            shimListeners[i](win);\n        }\n    }\n\n    if (isBrowser) {\n        api.shim = api.createMissingNativeApi = shim;\n        createAliasForDeprecatedMethod(api, \"createMissingNativeApi\", \"shim\");\n    }\n\n    function Module(name, dependencies, initializer) {\n        this.name = name;\n        this.dependencies = dependencies;\n        this.initialized = false;\n        this.supported = false;\n        this.initializer = initializer;\n    }\n\n    Module.prototype = {\n        init: function() {\n            var requiredModuleNames = this.dependencies || [];\n            for (var i = 0, len = requiredModuleNames.length, requiredModule, moduleName; i < len; ++i) {\n                moduleName = requiredModuleNames[i];\n\n                requiredModule = modules[moduleName];\n                if (!requiredModule || !(requiredModule instanceof Module)) {\n                    throw new Error(\"required module '\" + moduleName + \"' not found\");\n                }\n\n                requiredModule.init();\n\n                if (!requiredModule.supported) {\n                    throw new Error(\"required module '\" + moduleName + \"' not supported\");\n                }\n            }\n\n            // Now run initializer\n            this.initializer(this);\n        },\n\n        fail: function(reason) {\n            this.initialized = true;\n            this.supported = false;\n            throw new Error(reason);\n        },\n\n        warn: function(msg) {\n            api.warn(\"Module \" + this.name + \": \" + msg);\n        },\n\n        deprecationNotice: function(deprecated, replacement) {\n            api.warn(\"DEPRECATED: \" + deprecated + \" in module \" + this.name + \" is deprecated. Please use \" +\n                replacement + \" instead\");\n        },\n\n        createError: function(msg) {\n            return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\n        }\n    };\n\n    function createModule(name, dependencies, initFunc) {\n        var newModule = new Module(name, dependencies, function(module) {\n            if (!module.initialized) {\n                module.initialized = true;\n                try {\n                    initFunc(api, module);\n                    module.supported = true;\n                } catch (ex) {\n                    var errorMessage = \"Module '\" + name + \"' failed to load: \" + getErrorDesc(ex);\n                    consoleLog(errorMessage);\n                    if (ex.stack) {\n                        consoleLog(ex.stack);\n                    }\n                }\n            }\n        });\n        modules[name] = newModule;\n        return newModule;\n    }\n\n    api.createModule = function(name) {\n        // Allow 2 or 3 arguments (second argument is an optional array of dependencies)\n        var initFunc, dependencies;\n        if (arguments.length == 2) {\n            initFunc = arguments[1];\n            dependencies = [];\n        } else {\n            initFunc = arguments[2];\n            dependencies = arguments[1];\n        }\n\n        var module = createModule(name, dependencies, initFunc);\n\n        // Initialize the module immediately if the core is already initialized\n        if (api.initialized && api.supported) {\n            module.init();\n        }\n    };\n\n    api.createCoreModule = function(name, dependencies, initFunc) {\n        createModule(name, dependencies, initFunc);\n    };\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Ensure rangy.rangePrototype and rangy.selectionPrototype are available immediately\n\n    function RangePrototype() {}\n    api.RangePrototype = RangePrototype;\n    api.rangePrototype = new RangePrototype();\n\n    function SelectionPrototype() {}\n    api.selectionPrototype = new SelectionPrototype();\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // DOM utility methods used by Rangy\n    api.createCoreModule(\"DomUtil\", [], function(api, module) {\n        var UNDEF = \"undefined\";\n        var util = api.util;\n        var getBody = util.getBody;\n\n        // Perform feature tests\n        if (!util.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n            module.fail(\"document missing a Node creation method\");\n        }\n\n        if (!util.isHostMethod(document, \"getElementsByTagName\")) {\n            module.fail(\"document missing getElementsByTagName method\");\n        }\n\n        var el = document.createElement(\"div\");\n        if (!util.areHostMethods(el, [\"insertBefore\", \"appendChild\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]))) {\n            module.fail(\"Incomplete Element implementation\");\n        }\n\n        // innerHTML is required for Range's createContextualFragment method\n        if (!util.isHostProperty(el, \"innerHTML\")) {\n            module.fail(\"Element is missing innerHTML property\");\n        }\n\n        var textNode = document.createTextNode(\"test\");\n        if (!util.areHostMethods(textNode, [\"splitText\", \"deleteData\", \"insertData\", \"appendData\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]) ||\n                !util.areHostProperties(textNode, [\"data\"]))) {\n            module.fail(\"Incomplete Text Node implementation\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Removed use of indexOf because of a bizarre bug in Opera that is thrown in one of the Acid3 tests. I haven't been\n        // able to replicate it outside of the test. The bug is that indexOf returns -1 when called on an Array that\n        // contains just the document as a single element and the value searched for is the document.\n        var arrayContains = /*Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val) > -1;\n            }:*/\n\n            function(arr, val) {\n                var i = arr.length;\n                while (i--) {\n                    if (arr[i] === val) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n\n        // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\n        function isHtmlNamespace(node) {\n            var ns;\n            return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n        }\n\n        function parentElement(node) {\n            var parent = node.parentNode;\n            return (parent.nodeType == 1) ? parent : null;\n        }\n\n        function getNodeIndex(node) {\n            var i = 0;\n            while( (node = node.previousSibling) ) {\n                ++i;\n            }\n            return i;\n        }\n\n        function getNodeLength(node) {\n            switch (node.nodeType) {\n                case 7:\n                case 10:\n                    return 0;\n                case 3:\n                case 8:\n                    return node.length;\n                default:\n                    return node.childNodes.length;\n            }\n        }\n\n        function getCommonAncestor(node1, node2) {\n            var ancestors = [], n;\n            for (n = node1; n; n = n.parentNode) {\n                ancestors.push(n);\n            }\n\n            for (n = node2; n; n = n.parentNode) {\n                if (arrayContains(ancestors, n)) {\n                    return n;\n                }\n            }\n\n            return null;\n        }\n\n        function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n            var n = selfIsAncestor ? descendant : descendant.parentNode;\n            while (n) {\n                if (n === ancestor) {\n                    return true;\n                } else {\n                    n = n.parentNode;\n                }\n            }\n            return false;\n        }\n\n        function isOrIsAncestorOf(ancestor, descendant) {\n            return isAncestorOf(ancestor, descendant, true);\n        }\n\n        function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n            var p, n = selfIsAncestor ? node : node.parentNode;\n            while (n) {\n                p = n.parentNode;\n                if (p === ancestor) {\n                    return n;\n                }\n                n = p;\n            }\n            return null;\n        }\n\n        function isCharacterDataNode(node) {\n            var t = node.nodeType;\n            return t == 3 || t == 4 || t == 8 ; // Text, CDataSection or Comment\n        }\n\n        function isTextOrCommentNode(node) {\n            if (!node) {\n                return false;\n            }\n            var t = node.nodeType;\n            return t == 3 || t == 8 ; // Text or Comment\n        }\n\n        function insertAfter(node, precedingNode) {\n            var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n            if (nextNode) {\n                parent.insertBefore(node, nextNode);\n            } else {\n                parent.appendChild(node);\n            }\n            return node;\n        }\n\n        // Note that we cannot use splitText() because it is bugridden in IE 9.\n        function splitDataNode(node, index, positionsToPreserve) {\n            var newNode = node.cloneNode(false);\n            newNode.deleteData(0, index);\n            node.deleteData(index, node.length - index);\n            insertAfter(newNode, node);\n\n            // Preserve positions\n            if (positionsToPreserve) {\n                for (var i = 0, position; position = positionsToPreserve[i++]; ) {\n                    // Handle case where position was inside the portion of node after the split point\n                    if (position.node == node && position.offset > index) {\n                        position.node = newNode;\n                        position.offset -= index;\n                    }\n                    // Handle the case where the position is a node offset within node's parent\n                    else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                        ++position.offset;\n                    }\n                }\n            }\n            return newNode;\n        }\n\n        function getDocument(node) {\n            if (node.nodeType == 9) {\n                return node;\n            } else if (typeof node.ownerDocument != UNDEF) {\n                return node.ownerDocument;\n            } else if (typeof node.document != UNDEF) {\n                return node.document;\n            } else if (node.parentNode) {\n                return getDocument(node.parentNode);\n            } else {\n                throw module.createError(\"getDocument: no document found for node\");\n            }\n        }\n\n        function getWindow(node) {\n            var doc = getDocument(node);\n            if (typeof doc.defaultView != UNDEF) {\n                return doc.defaultView;\n            } else if (typeof doc.parentWindow != UNDEF) {\n                return doc.parentWindow;\n            } else {\n                throw module.createError(\"Cannot get a window object for node\");\n            }\n        }\n\n        function getIframeDocument(iframeEl) {\n            if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument;\n            } else if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow.document;\n            } else {\n                throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n            }\n        }\n\n        function getIframeWindow(iframeEl) {\n            if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow;\n            } else if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument.defaultView;\n            } else {\n                throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n            }\n        }\n\n        // This looks bad. Is it worth it?\n        function isWindow(obj) {\n            return obj && util.isHostMethod(obj, \"setTimeout\") && util.isHostObject(obj, \"document\");\n        }\n\n        function getContentDocument(obj, module, methodName) {\n            var doc;\n\n            if (!obj) {\n                doc = document;\n            }\n\n            // Test if a DOM node has been passed and obtain a document object for it if so\n            else if (util.isHostProperty(obj, \"nodeType\")) {\n                doc = (obj.nodeType == 1 && obj.tagName.toLowerCase() == \"iframe\") ?\n                    getIframeDocument(obj) : getDocument(obj);\n            }\n\n            // Test if the doc parameter appears to be a Window object\n            else if (isWindow(obj)) {\n                doc = obj.document;\n            }\n\n            if (!doc) {\n                throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n            }\n\n            return doc;\n        }\n\n        function getRootContainer(node) {\n            var parent;\n            while ( (parent = node.parentNode) ) {\n                node = parent;\n            }\n            return node;\n        }\n\n        function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n            // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n            var nodeC, root, childA, childB, n;\n            if (nodeA == nodeB) {\n                // Case 1: nodes are the same\n                return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeB, nodeA, true)) ) {\n                // Case 2: node C (container B or an ancestor) is a child node of A\n                return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeA, nodeB, true)) ) {\n                // Case 3: node C (container A or an ancestor) is a child node of B\n                return getNodeIndex(nodeC) < offsetB  ? -1 : 1;\n            } else {\n                root = getCommonAncestor(nodeA, nodeB);\n                if (!root) {\n                    throw new Error(\"comparePoints error: nodes have no common ancestor\");\n                }\n\n                // Case 4: containers are siblings or descendants of siblings\n                childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n                childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n\n                if (childA === childB) {\n                    // This shouldn't be possible\n                    throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n                } else {\n                    n = root.firstChild;\n                    while (n) {\n                        if (n === childA) {\n                            return -1;\n                        } else if (n === childB) {\n                            return 1;\n                        }\n                        n = n.nextSibling;\n                    }\n                }\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test for IE's crash (IE 6/7) or exception (IE >= 8) when a reference to garbage-collected text node is queried\n        var crashyTextNodes = false;\n\n        function isBrokenNode(node) {\n            var n;\n            try {\n                n = node.parentNode;\n                return false;\n            } catch (e) {\n                return true;\n            }\n        }\n\n        (function() {\n            var el = document.createElement(\"b\");\n            el.innerHTML = \"1\";\n            var textNode = el.firstChild;\n            el.innerHTML = \"<br />\";\n            crashyTextNodes = isBrokenNode(textNode);\n\n            api.features.crashyTextNodes = crashyTextNodes;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function inspectNode(node) {\n            if (!node) {\n                return \"[No node]\";\n            }\n            if (crashyTextNodes && isBrokenNode(node)) {\n                return \"[Broken node]\";\n            }\n            if (isCharacterDataNode(node)) {\n                return '\"' + node.data + '\"';\n            }\n            if (node.nodeType == 1) {\n                var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n                return \"<\" + node.nodeName + idAttr + \">[index:\" + getNodeIndex(node) + \",length:\" + node.childNodes.length + \"][\" + (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n            }\n            return node.nodeName;\n        }\n\n        function fragmentFromNodeChildren(node) {\n            var fragment = getDocument(node).createDocumentFragment(), child;\n            while ( (child = node.firstChild) ) {\n                fragment.appendChild(child);\n            }\n            return fragment;\n        }\n\n        var getComputedStyleProperty;\n        if (typeof window.getComputedStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return getWindow(el).getComputedStyle(el, null)[propName];\n            };\n        } else if (typeof document.documentElement.currentStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return el.currentStyle ? el.currentStyle[propName] : \"\";\n            };\n        } else {\n            module.fail(\"No means of obtaining computed style properties found\");\n        }\n\n        function createTestElement(doc, html, contentEditable) {\n            var body = getBody(doc);\n            var el = doc.createElement(\"div\");\n            el.contentEditable = \"\" + !!contentEditable;\n            if (html) {\n                el.innerHTML = html;\n            }\n\n            // Insert the test element at the start of the body to prevent scrolling to the bottom in iOS (issue #292)\n            var bodyFirstChild = body.firstChild;\n            if (bodyFirstChild) {\n                body.insertBefore(el, bodyFirstChild);\n            } else {\n                body.appendChild(el);\n            }\n\n            return el;\n        }\n\n        function removeNode(node) {\n            return node.parentNode.removeChild(node);\n        }\n\n        function NodeIterator(root) {\n            this.root = root;\n            this._next = root;\n        }\n\n        NodeIterator.prototype = {\n            _current: null,\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                var n = this._current = this._next;\n                var child, next;\n                if (this._current) {\n                    child = n.firstChild;\n                    if (child) {\n                        this._next = child;\n                    } else {\n                        next = null;\n                        while ((n !== this.root) && !(next = n.nextSibling)) {\n                            n = n.parentNode;\n                        }\n                        this._next = next;\n                    }\n                }\n                return this._current;\n            },\n\n            detach: function() {\n                this._current = this._next = this.root = null;\n            }\n        };\n\n        function createIterator(root) {\n            return new NodeIterator(root);\n        }\n\n        function DomPosition(node, offset) {\n            this.node = node;\n            this.offset = offset;\n        }\n\n        DomPosition.prototype = {\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset == pos.offset;\n            },\n\n            inspect: function() {\n                return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n            },\n\n            toString: function() {\n                return this.inspect();\n            }\n        };\n\n        function DOMException(codeName) {\n            this.code = this[codeName];\n            this.codeName = codeName;\n            this.message = \"DOMException: \" + this.codeName;\n        }\n\n        DOMException.prototype = {\n            INDEX_SIZE_ERR: 1,\n            HIERARCHY_REQUEST_ERR: 3,\n            WRONG_DOCUMENT_ERR: 4,\n            NO_MODIFICATION_ALLOWED_ERR: 7,\n            NOT_FOUND_ERR: 8,\n            NOT_SUPPORTED_ERR: 9,\n            INVALID_STATE_ERR: 11,\n            INVALID_NODE_TYPE_ERR: 24\n        };\n\n        DOMException.prototype.toString = function() {\n            return this.message;\n        };\n\n        api.dom = {\n            arrayContains: arrayContains,\n            isHtmlNamespace: isHtmlNamespace,\n            parentElement: parentElement,\n            getNodeIndex: getNodeIndex,\n            getNodeLength: getNodeLength,\n            getCommonAncestor: getCommonAncestor,\n            isAncestorOf: isAncestorOf,\n            isOrIsAncestorOf: isOrIsAncestorOf,\n            getClosestAncestorIn: getClosestAncestorIn,\n            isCharacterDataNode: isCharacterDataNode,\n            isTextOrCommentNode: isTextOrCommentNode,\n            insertAfter: insertAfter,\n            splitDataNode: splitDataNode,\n            getDocument: getDocument,\n            getWindow: getWindow,\n            getIframeWindow: getIframeWindow,\n            getIframeDocument: getIframeDocument,\n            getBody: getBody,\n            isWindow: isWindow,\n            getContentDocument: getContentDocument,\n            getRootContainer: getRootContainer,\n            comparePoints: comparePoints,\n            isBrokenNode: isBrokenNode,\n            inspectNode: inspectNode,\n            getComputedStyleProperty: getComputedStyleProperty,\n            createTestElement: createTestElement,\n            removeNode: removeNode,\n            fragmentFromNodeChildren: fragmentFromNodeChildren,\n            createIterator: createIterator,\n            DomPosition: DomPosition\n        };\n\n        api.DOMException = DOMException;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Pure JavaScript implementation of DOM Range\n    api.createCoreModule(\"DomRange\", [\"DomUtil\"], function(api, module) {\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DOMException = api.DOMException;\n\n        var isCharacterDataNode = dom.isCharacterDataNode;\n        var getNodeIndex = dom.getNodeIndex;\n        var isOrIsAncestorOf = dom.isOrIsAncestorOf;\n        var getDocument = dom.getDocument;\n        var comparePoints = dom.comparePoints;\n        var splitDataNode = dom.splitDataNode;\n        var getClosestAncestorIn = dom.getClosestAncestorIn;\n        var getNodeLength = dom.getNodeLength;\n        var arrayContains = dom.arrayContains;\n        var getRootContainer = dom.getRootContainer;\n        var crashyTextNodes = api.features.crashyTextNodes;\n\n        var removeNode = dom.removeNode;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Utility functions\n\n        function isNonTextPartiallySelected(node, range) {\n            return (node.nodeType != 3) &&\n                   (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n        }\n\n        function getRangeDocument(range) {\n            return range.document || getDocument(range.startContainer);\n        }\n\n        function getRangeRoot(range) {\n            return getRootContainer(range.startContainer);\n        }\n\n        function getBoundaryBeforeNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node));\n        }\n\n        function getBoundaryAfterNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n        }\n\n        function insertNodeAtPosition(node, n, o) {\n            var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n            if (isCharacterDataNode(n)) {\n                if (o == n.length) {\n                    dom.insertAfter(node, n);\n                } else {\n                    n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n                }\n            } else if (o >= n.childNodes.length) {\n                n.appendChild(node);\n            } else {\n                n.insertBefore(node, n.childNodes[o]);\n            }\n            return firstNodeInserted;\n        }\n\n        function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n            assertRangeValid(rangeA);\n            assertRangeValid(rangeB);\n\n            if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n\n            var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset),\n                endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n\n            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n        }\n\n        function cloneSubtree(iterator) {\n            var partiallySelected;\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n                partiallySelected = iterator.isPartiallySelectedSubtree();\n                node = node.cloneNode(!partiallySelected);\n                if (partiallySelected) {\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(cloneSubtree(subIterator));\n                    subIterator.detach();\n                }\n\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function iterateSubtree(rangeIterator, func, iteratorState) {\n            var it, n;\n            iteratorState = iteratorState || { stop: false };\n            for (var node, subRangeIterator; node = rangeIterator.next(); ) {\n                if (rangeIterator.isPartiallySelectedSubtree()) {\n                    if (func(node) === false) {\n                        iteratorState.stop = true;\n                        return;\n                    } else {\n                        // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                        // the node selected by the Range.\n                        subRangeIterator = rangeIterator.getSubtreeIterator();\n                        iterateSubtree(subRangeIterator, func, iteratorState);\n                        subRangeIterator.detach();\n                        if (iteratorState.stop) {\n                            return;\n                        }\n                    }\n                } else {\n                    // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n                    // descendants\n                    it = dom.createIterator(node);\n                    while ( (n = it.next()) ) {\n                        if (func(n) === false) {\n                            iteratorState.stop = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        function deleteSubtree(iterator) {\n            var subIterator;\n            while (iterator.next()) {\n                if (iterator.isPartiallySelectedSubtree()) {\n                    subIterator = iterator.getSubtreeIterator();\n                    deleteSubtree(subIterator);\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n            }\n        }\n\n        function extractSubtree(iterator) {\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n\n                if (iterator.isPartiallySelectedSubtree()) {\n                    node = node.cloneNode(false);\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(extractSubtree(subIterator));\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function getNodesInRange(range, nodeTypes, filter) {\n            var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n            var filterExists = !!filter;\n            if (filterNodeTypes) {\n                regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n            }\n\n            var nodes = [];\n            iterateSubtree(new RangeIterator(range, false), function(node) {\n                if (filterNodeTypes && !regex.test(node.nodeType)) {\n                    return;\n                }\n                if (filterExists && !filter(node)) {\n                    return;\n                }\n                // Don't include a boundary container if it is a character data node and the range does not contain any\n                // of its character data. See issue 190.\n                var sc = range.startContainer;\n                if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n                    return;\n                }\n\n                var ec = range.endContainer;\n                if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n                    return;\n                }\n\n                nodes.push(node);\n            });\n            return nodes;\n        }\n\n        function inspect(range) {\n            var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n            return \"[\" + name + \"(\" + dom.inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n                    dom.inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\n\n        function RangeIterator(range, clonePartiallySelectedTextNodes) {\n            this.range = range;\n            this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n\n\n            if (!range.collapsed) {\n                this.sc = range.startContainer;\n                this.so = range.startOffset;\n                this.ec = range.endContainer;\n                this.eo = range.endOffset;\n                var root = range.commonAncestorContainer;\n\n                if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                    this.isSingleCharacterDataNode = true;\n                    this._first = this._last = this._next = this.sc;\n                } else {\n                    this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                        this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                    this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                        this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n                }\n            }\n        }\n\n        RangeIterator.prototype = {\n            _current: null,\n            _next: null,\n            _first: null,\n            _last: null,\n            isSingleCharacterDataNode: false,\n\n            reset: function() {\n                this._current = null;\n                this._next = this._first;\n            },\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                // Move to next node\n                var current = this._current = this._next;\n                if (current) {\n                    this._next = (current !== this._last) ? current.nextSibling : null;\n\n                    // Check for partially selected text nodes\n                    if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                        if (current === this.ec) {\n                            (current = current.cloneNode(true)).deleteData(this.eo, current.length - this.eo);\n                        }\n                        if (this._current === this.sc) {\n                            (current = current.cloneNode(true)).deleteData(0, this.so);\n                        }\n                    }\n                }\n\n                return current;\n            },\n\n            remove: function() {\n                var current = this._current, start, end;\n\n                if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n                    start = (current === this.sc) ? this.so : 0;\n                    end = (current === this.ec) ? this.eo : current.length;\n                    if (start != end) {\n                        current.deleteData(start, end - start);\n                    }\n                } else {\n                    if (current.parentNode) {\n                        removeNode(current);\n                    } else {\n                    }\n                }\n            },\n\n            // Checks if the current node is partially selected\n            isPartiallySelectedSubtree: function() {\n                var current = this._current;\n                return isNonTextPartiallySelected(current, this.range);\n            },\n\n            getSubtreeIterator: function() {\n                var subRange;\n                if (this.isSingleCharacterDataNode) {\n                    subRange = this.range.cloneRange();\n                    subRange.collapse(false);\n                } else {\n                    subRange = new Range(getRangeDocument(this.range));\n                    var current = this._current;\n                    var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n\n                    if (isOrIsAncestorOf(current, this.sc)) {\n                        startContainer = this.sc;\n                        startOffset = this.so;\n                    }\n                    if (isOrIsAncestorOf(current, this.ec)) {\n                        endContainer = this.ec;\n                        endOffset = this.eo;\n                    }\n\n                    updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n                }\n                return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n            },\n\n            detach: function() {\n                this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\n        var rootContainerNodeTypes = [2, 9, 11];\n        var readonlyNodeTypes = [5, 6, 10, 12];\n        var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\n        var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\n\n        function createAncestorFinder(nodeTypes) {\n            return function(node, selfIsAncestor) {\n                var t, n = selfIsAncestor ? node : node.parentNode;\n                while (n) {\n                    t = n.nodeType;\n                    if (arrayContains(nodeTypes, t)) {\n                        return n;\n                    }\n                    n = n.parentNode;\n                }\n                return null;\n            };\n        }\n\n        var getDocumentOrFragmentContainer = createAncestorFinder( [9, 11] );\n        var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\n        var getDocTypeNotationEntityAncestor = createAncestorFinder( [6, 10, 12] );\n        var getElementAncestor = createAncestorFinder( [1] );\n\n        function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n            if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidNodeType(node, invalidTypes) {\n            if (!arrayContains(invalidTypes, node.nodeType)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        function assertSameDocumentOrFragment(node1, node2) {\n            if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertNodeNotReadOnly(node) {\n            if (getReadonlyAncestor(node, true)) {\n                throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n            }\n        }\n\n        function assertNode(node, codeName) {\n            if (!node) {\n                throw new DOMException(codeName);\n            }\n        }\n\n        function isValidOffset(node, offset) {\n            return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n        }\n\n        function isRangeValid(range) {\n            return (!!range.startContainer && !!range.endContainer &&\n                    !(crashyTextNodes && (dom.isBrokenNode(range.startContainer) || dom.isBrokenNode(range.endContainer))) &&\n                    getRootContainer(range.startContainer) == getRootContainer(range.endContainer) &&\n                    isValidOffset(range.startContainer, range.startOffset) &&\n                    isValidOffset(range.endContainer, range.endOffset));\n        }\n\n        function assertRangeValid(range) {\n            if (!isRangeValid(range)) {\n                throw new Error(\"Range error: Range is not valid. This usually happens after DOM mutation. Range: (\" + range.inspect() + \")\");\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test the browser's innerHTML support to decide how to implement createContextualFragment\n        var styleEl = document.createElement(\"style\");\n        var htmlParsingConforms = false;\n        try {\n            styleEl.innerHTML = \"<b>x</b>\";\n            htmlParsingConforms = (styleEl.firstChild.nodeType == 3); // Pre-Blink Opera incorrectly creates an element node\n        } catch (e) {\n            // IE 6 and 7 throw\n        }\n\n        api.features.htmlParsingConforms = htmlParsingConforms;\n\n        var createContextualFragment = htmlParsingConforms ?\n\n            // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n            // discussion and base code for this implementation at issue 67.\n            // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n            // Thanks to Aleks Williams.\n            function(fragmentStr) {\n                // \"Let node the context object's start's node.\"\n                var node = this.startContainer;\n                var doc = getDocument(node);\n\n                // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n                // exception and abort these steps.\"\n                if (!node) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // \"Let element be as follows, depending on node's interface:\"\n                // Document, Document Fragment: null\n                var el = null;\n\n                // \"Element: node\"\n                if (node.nodeType == 1) {\n                    el = node;\n\n                // \"Text, Comment: node's parentElement\"\n                } else if (isCharacterDataNode(node)) {\n                    el = dom.parentElement(node);\n                }\n\n                // \"If either element is null or element's ownerDocument is an HTML document\n                // and element's local name is \"html\" and element's namespace is the HTML\n                // namespace\"\n                if (el === null || (\n                    el.nodeName == \"HTML\" &&\n                    dom.isHtmlNamespace(getDocument(el).documentElement) &&\n                    dom.isHtmlNamespace(el)\n                )) {\n\n                // \"let element be a new Element with \"body\" as its local name and the HTML\n                // namespace as its namespace.\"\"\n                    el = doc.createElement(\"body\");\n                } else {\n                    el = el.cloneNode(false);\n                }\n\n                // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n                // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n                // \"In either case, the algorithm must be invoked with fragment as the input\n                // and element as the context element.\"\n                el.innerHTML = fragmentStr;\n\n                // \"If this raises an exception, then abort these steps. Otherwise, let new\n                // children be the nodes returned.\"\n\n                // \"Let fragment be a new DocumentFragment.\"\n                // \"Append all new children to fragment.\"\n                // \"Return fragment.\"\n                return dom.fragmentFromNodeChildren(el);\n            } :\n\n            // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that\n            // previous versions of Rangy used (with the exception of using a body element rather than a div)\n            function(fragmentStr) {\n                var doc = getRangeDocument(this);\n                var el = doc.createElement(\"body\");\n                el.innerHTML = fragmentStr;\n\n                return dom.fragmentFromNodeChildren(el);\n            };\n\n        function splitRangeBoundaries(range, positionsToPreserve) {\n            assertRangeValid(range);\n\n            var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n            var startEndSame = (sc === ec);\n\n            if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n                splitDataNode(ec, eo, positionsToPreserve);\n            }\n\n            if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n                sc = splitDataNode(sc, so, positionsToPreserve);\n                if (startEndSame) {\n                    eo -= so;\n                    ec = sc;\n                } else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n                    eo++;\n                }\n                so = 0;\n            }\n            range.setStartAndEnd(sc, so, ec, eo);\n        }\n\n        function rangeToHtml(range) {\n            assertRangeValid(range);\n            var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n            container.appendChild( range.cloneContents() );\n            return container.innerHTML;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var rangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n            \"commonAncestorContainer\"];\n\n        var s2s = 0, s2e = 1, e2e = 2, e2s = 3;\n        var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\n\n        util.extend(api.rangePrototype, {\n            compareBoundaryPoints: function(how, range) {\n                assertRangeValid(this);\n                assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n\n                var nodeA, offsetA, nodeB, offsetB;\n                var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n                var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n                nodeA = this[prefixA + \"Container\"];\n                offsetA = this[prefixA + \"Offset\"];\n                nodeB = range[prefixB + \"Container\"];\n                offsetB = range[prefixB + \"Offset\"];\n                return comparePoints(nodeA, offsetA, nodeB, offsetB);\n            },\n\n            insertNode: function(node) {\n                assertRangeValid(this);\n                assertValidNodeType(node, insertableNodeTypes);\n                assertNodeNotReadOnly(this.startContainer);\n\n                if (isOrIsAncestorOf(node, this.startContainer)) {\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n\n                // No check for whether the container of the start of the Range is of a type that does not allow\n                // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n                // to add the node\n\n                var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                this.setStartBefore(firstNodeInserted);\n            },\n\n            cloneContents: function() {\n                assertRangeValid(this);\n\n                var clone, frag;\n                if (this.collapsed) {\n                    return getRangeDocument(this).createDocumentFragment();\n                } else {\n                    if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                        clone = this.startContainer.cloneNode(true);\n                        clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                        frag = getRangeDocument(this).createDocumentFragment();\n                        frag.appendChild(clone);\n                        return frag;\n                    } else {\n                        var iterator = new RangeIterator(this, true);\n                        clone = cloneSubtree(iterator);\n                        iterator.detach();\n                    }\n                    return clone;\n                }\n            },\n\n            canSurroundContents: function() {\n                assertRangeValid(this);\n                assertNodeNotReadOnly(this.startContainer);\n                assertNodeNotReadOnly(this.endContainer);\n\n                // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                // no non-text nodes.\n                var iterator = new RangeIterator(this, true);\n                var boundariesInvalid = (iterator._first && (isNonTextPartiallySelected(iterator._first, this)) ||\n                        (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                iterator.detach();\n                return !boundariesInvalid;\n            },\n\n            surroundContents: function(node) {\n                assertValidNodeType(node, surroundNodeTypes);\n\n                if (!this.canSurroundContents()) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // Extract the contents\n                var content = this.extractContents();\n\n                // Clear the children of the node\n                if (node.hasChildNodes()) {\n                    while (node.lastChild) {\n                        node.removeChild(node.lastChild);\n                    }\n                }\n\n                // Insert the new node and add the extracted contents\n                insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                node.appendChild(content);\n\n                this.selectNode(node);\n            },\n\n            cloneRange: function() {\n                assertRangeValid(this);\n                var range = new Range(getRangeDocument(this));\n                var i = rangeProperties.length, prop;\n                while (i--) {\n                    prop = rangeProperties[i];\n                    range[prop] = this[prop];\n                }\n                return range;\n            },\n\n            toString: function() {\n                assertRangeValid(this);\n                var sc = this.startContainer;\n                if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                    return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n                } else {\n                    var textParts = [], iterator = new RangeIterator(this, true);\n                    iterateSubtree(iterator, function(node) {\n                        // Accept only text or CDATA nodes, not comments\n                        if (node.nodeType == 3 || node.nodeType == 4) {\n                            textParts.push(node.data);\n                        }\n                    });\n                    iterator.detach();\n                    return textParts.join(\"\");\n                }\n            },\n\n            // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n            // been removed from Mozilla.\n\n            compareNode: function(node) {\n                assertRangeValid(this);\n\n                var parent = node.parentNode;\n                var nodeIndex = getNodeIndex(node);\n\n                if (!parent) {\n                    throw new DOMException(\"NOT_FOUND_ERR\");\n                }\n\n                var startComparison = this.comparePoint(parent, nodeIndex),\n                    endComparison = this.comparePoint(parent, nodeIndex + 1);\n\n                if (startComparison < 0) { // Node starts before\n                    return (endComparison > 0) ? n_b_a : n_b;\n                } else {\n                    return (endComparison > 0) ? n_a : n_i;\n                }\n            },\n\n            comparePoint: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                    return -1;\n                } else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                    return 1;\n                }\n                return 0;\n            },\n\n            createContextualFragment: createContextualFragment,\n\n            toHtml: function() {\n                return rangeToHtml(this);\n            },\n\n            // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n            // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n            intersectsNode: function(node, touchingIsIntersecting) {\n                assertRangeValid(this);\n                if (getRootContainer(node) != getRangeRoot(this)) {\n                    return false;\n                }\n\n                var parent = node.parentNode, offset = getNodeIndex(node);\n                if (!parent) {\n                    return true;\n                }\n\n                var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset),\n                    endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n\n                return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n            },\n\n            isPointInRange: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                       (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n            },\n\n            // The methods below are non-standard and invented by me.\n\n            // Sharing a boundary start-to-end or end-to-start does not count as intersection.\n            intersectsRange: function(range) {\n                return rangesIntersect(this, range, false);\n            },\n\n            // Sharing a boundary start-to-end or end-to-start does count as intersection.\n            intersectsOrTouchesRange: function(range) {\n                return rangesIntersect(this, range, true);\n            },\n\n            intersection: function(range) {\n                if (this.intersectsRange(range)) {\n                    var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset),\n                        endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n\n                    var intersectionRange = this.cloneRange();\n                    if (startComparison == -1) {\n                        intersectionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (endComparison == 1) {\n                        intersectionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return intersectionRange;\n                }\n                return null;\n            },\n\n            union: function(range) {\n                if (this.intersectsOrTouchesRange(range)) {\n                    var unionRange = this.cloneRange();\n                    if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                        unionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                        unionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return unionRange;\n                } else {\n                    throw new DOMException(\"Ranges do not intersect\");\n                }\n            },\n\n            containsNode: function(node, allowPartial) {\n                if (allowPartial) {\n                    return this.intersectsNode(node, false);\n                } else {\n                    return this.compareNode(node) == n_i;\n                }\n            },\n\n            containsNodeContents: function(node) {\n                return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n            },\n\n            containsRange: function(range) {\n                var intersection = this.intersection(range);\n                return intersection !== null && range.equals(intersection);\n            },\n\n            containsNodeText: function(node) {\n                var nodeRange = this.cloneRange();\n                nodeRange.selectNode(node);\n                var textNodes = nodeRange.getNodes([3]);\n                if (textNodes.length > 0) {\n                    nodeRange.setStart(textNodes[0], 0);\n                    var lastTextNode = textNodes.pop();\n                    nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                    return this.containsRange(nodeRange);\n                } else {\n                    return this.containsNodeContents(node);\n                }\n            },\n\n            getNodes: function(nodeTypes, filter) {\n                assertRangeValid(this);\n                return getNodesInRange(this, nodeTypes, filter);\n            },\n\n            getDocument: function() {\n                return getRangeDocument(this);\n            },\n\n            collapseBefore: function(node) {\n                this.setEndBefore(node);\n                this.collapse(false);\n            },\n\n            collapseAfter: function(node) {\n                this.setStartAfter(node);\n                this.collapse(true);\n            },\n\n            getBookmark: function(containerNode) {\n                var doc = getRangeDocument(this);\n                var preSelectionRange = api.createRange(doc);\n                containerNode = containerNode || dom.getBody(doc);\n                preSelectionRange.selectNodeContents(containerNode);\n                var range = this.intersection(preSelectionRange);\n                var start = 0, end = 0;\n                if (range) {\n                    preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                    start = preSelectionRange.toString().length;\n                    end = start + range.toString().length;\n                }\n\n                return {\n                    start: start,\n                    end: end,\n                    containerNode: containerNode\n                };\n            },\n\n            moveToBookmark: function(bookmark) {\n                var containerNode = bookmark.containerNode;\n                var charIndex = 0;\n                this.setStart(containerNode, 0);\n                this.collapse(true);\n                var nodeStack = [containerNode], node, foundStart = false, stop = false;\n                var nextCharIndex, i, childNodes;\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType == 3) {\n                        nextCharIndex = charIndex + node.length;\n                        if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                            this.setStart(node, bookmark.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                            this.setEnd(node, bookmark.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        childNodes = node.childNodes;\n                        i = childNodes.length;\n                        while (i--) {\n                            nodeStack.push(childNodes[i]);\n                        }\n                    }\n                }\n            },\n\n            getName: function() {\n                return \"DomRange\";\n            },\n\n            equals: function(range) {\n                return Range.rangesEqual(this, range);\n            },\n\n            isValid: function() {\n                return isRangeValid(this);\n            },\n\n            inspect: function() {\n                return inspect(this);\n            },\n\n            detach: function() {\n                // In DOM4, detach() is now a no-op.\n            }\n        });\n\n        function copyComparisonConstantsToObject(obj) {\n            obj.START_TO_START = s2s;\n            obj.START_TO_END = s2e;\n            obj.END_TO_END = e2e;\n            obj.END_TO_START = e2s;\n\n            obj.NODE_BEFORE = n_b;\n            obj.NODE_AFTER = n_a;\n            obj.NODE_BEFORE_AND_AFTER = n_b_a;\n            obj.NODE_INSIDE = n_i;\n        }\n\n        function copyComparisonConstants(constructor) {\n            copyComparisonConstantsToObject(constructor);\n            copyComparisonConstantsToObject(constructor.prototype);\n        }\n\n        function createRangeContentRemover(remover, boundaryUpdater) {\n            return function() {\n                assertRangeValid(this);\n\n                var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n\n                var iterator = new RangeIterator(this, true);\n\n                // Work out where to position the range after content removal\n                var node, boundary;\n                if (sc !== root) {\n                    node = getClosestAncestorIn(sc, root, true);\n                    boundary = getBoundaryAfterNode(node);\n                    sc = boundary.node;\n                    so = boundary.offset;\n                }\n\n                // Check none of the range is read-only\n                iterateSubtree(iterator, assertNodeNotReadOnly);\n\n                iterator.reset();\n\n                // Remove the content\n                var returnValue = remover(iterator);\n                iterator.detach();\n\n                // Move to the new position\n                boundaryUpdater(this, sc, so, sc, so);\n\n                return returnValue;\n            };\n        }\n\n        function createPrototypeRange(constructor, boundaryUpdater) {\n            function createBeforeAfterNodeSetter(isBefore, isStart) {\n                return function(node) {\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n                    assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n\n                    var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n                    (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n                };\n            }\n\n            function setRangeStart(range, node, offset) {\n                var ec = range.endContainer, eo = range.endOffset;\n                if (node !== range.startContainer || offset !== range.startOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                        ec = node;\n                        eo = offset;\n                    }\n                    boundaryUpdater(range, node, offset, ec, eo);\n                }\n            }\n\n            function setRangeEnd(range, node, offset) {\n                var sc = range.startContainer, so = range.startOffset;\n                if (node !== range.endContainer || offset !== range.endOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                        sc = node;\n                        so = offset;\n                    }\n                    boundaryUpdater(range, sc, so, node, offset);\n                }\n            }\n\n            // Set up inheritance\n            var F = function() {};\n            F.prototype = api.rangePrototype;\n            constructor.prototype = new F();\n\n            util.extend(constructor.prototype, {\n                setStart: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeStart(this, node, offset);\n                },\n\n                setEnd: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeEnd(this, node, offset);\n                },\n\n                /**\n                 * Convenience method to set a range's start and end boundaries. Overloaded as follows:\n                 * - Two parameters (node, offset) creates a collapsed range at that position\n                 * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at\n                 *   startOffset and ending at endOffset\n                 * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in\n                 *   startNode and ending at endOffset in endNode\n                 */\n                setStartAndEnd: function() {\n                    var args = arguments;\n                    var sc = args[0], so = args[1], ec = sc, eo = so;\n\n                    switch (args.length) {\n                        case 3:\n                            eo = args[2];\n                            break;\n                        case 4:\n                            ec = args[2];\n                            eo = args[3];\n                            break;\n                    }\n\n                    assertNoDocTypeNotationEntityAncestor(sc, true);\n                    assertValidOffset(sc, so);\n\n                    assertNoDocTypeNotationEntityAncestor(ec, true);\n                    assertValidOffset(ec, eo);\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                setBoundary: function(node, offset, isStart) {\n                    this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                },\n\n                setStartBefore: createBeforeAfterNodeSetter(true, true),\n                setStartAfter: createBeforeAfterNodeSetter(false, true),\n                setEndBefore: createBeforeAfterNodeSetter(true, false),\n                setEndAfter: createBeforeAfterNodeSetter(false, false),\n\n                collapse: function(isStart) {\n                    assertRangeValid(this);\n                    if (isStart) {\n                        boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n                    } else {\n                        boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n                    }\n                },\n\n                selectNodeContents: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n\n                    boundaryUpdater(this, node, 0, node, getNodeLength(node));\n                },\n\n                selectNode: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, false);\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n\n                    var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n                    boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n                },\n\n                extractContents: createRangeContentRemover(extractSubtree, boundaryUpdater),\n\n                deleteContents: createRangeContentRemover(deleteSubtree, boundaryUpdater),\n\n                canSurroundContents: function() {\n                    assertRangeValid(this);\n                    assertNodeNotReadOnly(this.startContainer);\n                    assertNodeNotReadOnly(this.endContainer);\n\n                    // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                    // no non-text nodes.\n                    var iterator = new RangeIterator(this, true);\n                    var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                            (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                    iterator.detach();\n                    return !boundariesInvalid;\n                },\n\n                splitBoundaries: function() {\n                    splitRangeBoundaries(this);\n                },\n\n                splitBoundariesPreservingPositions: function(positionsToPreserve) {\n                    splitRangeBoundaries(this, positionsToPreserve);\n                },\n\n                normalizeBoundaries: function() {\n                    assertRangeValid(this);\n\n                    var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n\n                    var mergeForward = function(node) {\n                        var sibling = node.nextSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            ec = node;\n                            eo = node.length;\n                            node.appendData(sibling.data);\n                            removeNode(sibling);\n                        }\n                    };\n\n                    var mergeBackward = function(node) {\n                        var sibling = node.previousSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            sc = node;\n                            var nodeLength = node.length;\n                            so = sibling.length;\n                            node.insertData(0, sibling.data);\n                            removeNode(sibling);\n                            if (sc == ec) {\n                                eo += so;\n                                ec = sc;\n                            } else if (ec == node.parentNode) {\n                                var nodeIndex = getNodeIndex(node);\n                                if (eo == nodeIndex) {\n                                    ec = node;\n                                    eo = nodeLength;\n                                } else if (eo > nodeIndex) {\n                                    eo--;\n                                }\n                            }\n                        }\n                    };\n\n                    var normalizeStart = true;\n                    var sibling;\n\n                    if (isCharacterDataNode(ec)) {\n                        if (eo == ec.length) {\n                            mergeForward(ec);\n                        } else if (eo == 0) {\n                            sibling = ec.previousSibling;\n                            if (sibling && sibling.nodeType == ec.nodeType) {\n                                eo = sibling.length;\n                                if (sc == ec) {\n                                    normalizeStart = false;\n                                }\n                                sibling.appendData(ec.data);\n                                removeNode(ec);\n                                ec = sibling;\n                            }\n                        }\n                    } else {\n                        if (eo > 0) {\n                            var endNode = ec.childNodes[eo - 1];\n                            if (endNode && isCharacterDataNode(endNode)) {\n                                mergeForward(endNode);\n                            }\n                        }\n                        normalizeStart = !this.collapsed;\n                    }\n\n                    if (normalizeStart) {\n                        if (isCharacterDataNode(sc)) {\n                            if (so == 0) {\n                                mergeBackward(sc);\n                            } else if (so == sc.length) {\n                                sibling = sc.nextSibling;\n                                if (sibling && sibling.nodeType == sc.nodeType) {\n                                    if (ec == sibling) {\n                                        ec = sc;\n                                        eo += sc.length;\n                                    }\n                                    sc.appendData(sibling.data);\n                                    removeNode(sibling);\n                                }\n                            }\n                        } else {\n                            if (so < sc.childNodes.length) {\n                                var startNode = sc.childNodes[so];\n                                if (startNode && isCharacterDataNode(startNode)) {\n                                    mergeBackward(startNode);\n                                }\n                            }\n                        }\n                    } else {\n                        sc = ec;\n                        so = eo;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                collapseToPoint: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n                    this.setStartAndEnd(node, offset);\n                },\n\n                parentElement: function() {\n                    assertRangeValid(this);\n                    var parentNode = this.commonAncestorContainer;\n                    return parentNode ? getElementAncestor(this.commonAncestorContainer, true) : null;\n                }\n            });\n\n            copyComparisonConstants(constructor);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Updates commonAncestorContainer and collapsed after boundary change\n        function updateCollapsedAndCommonAncestor(range) {\n            range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n            range.commonAncestorContainer = range.collapsed ?\n                range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);\n        }\n\n        function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n            range.startContainer = startContainer;\n            range.startOffset = startOffset;\n            range.endContainer = endContainer;\n            range.endOffset = endOffset;\n            range.document = dom.getDocument(startContainer);\n            updateCollapsedAndCommonAncestor(range);\n        }\n\n        function Range(doc) {\n            updateBoundaries(this, doc, 0, doc, 0);\n        }\n\n        createPrototypeRange(Range, updateBoundaries);\n\n        util.extend(Range, {\n            rangeProperties: rangeProperties,\n            RangeIterator: RangeIterator,\n            copyComparisonConstants: copyComparisonConstants,\n            createPrototypeRange: createPrototypeRange,\n            inspect: inspect,\n            toHtml: rangeToHtml,\n            getRangeDocument: getRangeDocument,\n            rangesEqual: function(r1, r2) {\n                return r1.startContainer === r2.startContainer &&\n                    r1.startOffset === r2.startOffset &&\n                    r1.endContainer === r2.endContainer &&\n                    r1.endOffset === r2.endOffset;\n            }\n        });\n\n        api.DomRange = Range;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wrappers for the browser's native DOM Range and/or TextRange implementation\n    api.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n        var WrappedRange, WrappedTextRange;\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DomRange = api.DomRange;\n        var getBody = dom.getBody;\n        var getContentDocument = dom.getContentDocument;\n        var isCharacterDataNode = dom.isCharacterDataNode;\n\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        if (api.features.implementsDomRange) {\n            // This is a wrapper around the browser's native DOM Range. It has two aims:\n            // - Provide workarounds for specific browser bugs\n            // - provide convenient extensions, which are inherited from Rangy's DomRange\n\n            (function() {\n                var rangeProto;\n                var rangeProperties = DomRange.rangeProperties;\n\n                function updateRangeProperties(range) {\n                    var i = rangeProperties.length, prop;\n                    while (i--) {\n                        prop = rangeProperties[i];\n                        range[prop] = range.nativeRange[prop];\n                    }\n                    // Fix for broken collapsed property in IE 9.\n                    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n                }\n\n                function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n                    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n                    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n                    var nativeRangeDifferent = !range.equals(range.nativeRange);\n\n                    // Always set both boundaries for the benefit of IE9 (see issue 35)\n                    if (startMoved || endMoved || nativeRangeDifferent) {\n                        range.setEnd(endContainer, endOffset);\n                        range.setStart(startContainer, startOffset);\n                    }\n                }\n\n                var createBeforeAfterNodeSetter;\n\n                WrappedRange = function(range) {\n                    if (!range) {\n                        throw module.createError(\"WrappedRange: Range must be specified\");\n                    }\n                    this.nativeRange = range;\n                    updateRangeProperties(this);\n                };\n\n                DomRange.createPrototypeRange(WrappedRange, updateNativeRange);\n\n                rangeProto = WrappedRange.prototype;\n\n                rangeProto.selectNode = function(node) {\n                    this.nativeRange.selectNode(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneContents = function() {\n                    return this.nativeRange.cloneContents();\n                };\n\n                // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n                // insertNode() is never delegated to the native range.\n\n                rangeProto.surroundContents = function(node) {\n                    this.nativeRange.surroundContents(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.collapse = function(isStart) {\n                    this.nativeRange.collapse(isStart);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneRange = function() {\n                    return new WrappedRange(this.nativeRange.cloneRange());\n                };\n\n                rangeProto.refresh = function() {\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.toString = function() {\n                    return this.nativeRange.toString();\n                };\n\n                // Create test range and node for feature detection\n\n                var testTextNode = document.createTextNode(\"test\");\n                getBody(document).appendChild(testTextNode);\n                var range = document.createRange();\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n                // correct for it\n\n                range.setStart(testTextNode, 0);\n                range.setEnd(testTextNode, 0);\n\n                try {\n                    range.setStart(testTextNode, 1);\n\n                    rangeProto.setStart = function(node, offset) {\n                        this.nativeRange.setStart(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        this.nativeRange.setEnd(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name) {\n                        return function(node) {\n                            this.nativeRange[name](node);\n                            updateRangeProperties(this);\n                        };\n                    };\n\n                } catch(ex) {\n\n                    rangeProto.setStart = function(node, offset) {\n                        try {\n                            this.nativeRange.setStart(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setEnd(node, offset);\n                            this.nativeRange.setStart(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        try {\n                            this.nativeRange.setEnd(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setStart(node, offset);\n                            this.nativeRange.setEnd(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name, oppositeName) {\n                        return function(node) {\n                            try {\n                                this.nativeRange[name](node);\n                            } catch (ex) {\n                                this.nativeRange[oppositeName](node);\n                                this.nativeRange[name](node);\n                            }\n                            updateRangeProperties(this);\n                        };\n                    };\n                }\n\n                rangeProto.setStartBefore = createBeforeAfterNodeSetter(\"setStartBefore\", \"setEndBefore\");\n                rangeProto.setStartAfter = createBeforeAfterNodeSetter(\"setStartAfter\", \"setEndAfter\");\n                rangeProto.setEndBefore = createBeforeAfterNodeSetter(\"setEndBefore\", \"setStartBefore\");\n                rangeProto.setEndAfter = createBeforeAfterNodeSetter(\"setEndAfter\", \"setStartAfter\");\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n                // whether the native implementation can be trusted\n                rangeProto.selectNodeContents = function(node) {\n                    this.setStartAndEnd(node, 0, dom.getNodeLength(node));\n                };\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n                // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n\n                range.selectNodeContents(testTextNode);\n                range.setEnd(testTextNode, 3);\n\n                var range2 = document.createRange();\n                range2.selectNodeContents(testTextNode);\n                range2.setEnd(testTextNode, 4);\n                range2.setStart(testTextNode, 2);\n\n                if (range.compareBoundaryPoints(range.START_TO_END, range2) == -1 &&\n                        range.compareBoundaryPoints(range.END_TO_START, range2) == 1) {\n                    // This is the wrong way round, so correct for it\n\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        range = range.nativeRange || range;\n                        if (type == range.START_TO_END) {\n                            type = range.END_TO_START;\n                        } else if (type == range.END_TO_START) {\n                            type = range.START_TO_END;\n                        }\n                        return this.nativeRange.compareBoundaryPoints(type, range);\n                    };\n                } else {\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        return this.nativeRange.compareBoundaryPoints(type, range.nativeRange || range);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for IE deleteContents() and extractContents() bug and correct it. See issue 107.\n\n                var el = document.createElement(\"div\");\n                el.innerHTML = \"123\";\n                var textNode = el.firstChild;\n                var body = getBody(document);\n                body.appendChild(el);\n\n                range.setStart(textNode, 1);\n                range.setEnd(textNode, 2);\n                range.deleteContents();\n\n                if (textNode.data == \"13\") {\n                    // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n                    // extractContents()\n                    rangeProto.deleteContents = function() {\n                        this.nativeRange.deleteContents();\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.extractContents = function() {\n                        var frag = this.nativeRange.extractContents();\n                        updateRangeProperties(this);\n                        return frag;\n                    };\n                } else {\n                }\n\n                body.removeChild(el);\n                body = null;\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for existence of createContextualFragment and delegate to it if it exists\n                if (util.isHostMethod(range, \"createContextualFragment\")) {\n                    rangeProto.createContextualFragment = function(fragmentStr) {\n                        return this.nativeRange.createContextualFragment(fragmentStr);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Clean up\n                getBody(document).removeChild(testTextNode);\n\n                rangeProto.getName = function() {\n                    return \"WrappedRange\";\n                };\n\n                api.WrappedRange = WrappedRange;\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return doc.createRange();\n                };\n            })();\n        }\n\n        if (api.features.implementsTextRange) {\n            /*\n            This is a workaround for a bug where IE returns the wrong container element from the TextRange's parentElement()\n            method. For example, in the following (where pipes denote the selection boundaries):\n\n            <ul id=\"ul\"><li id=\"a\">| a </li><li id=\"b\"> b |</li></ul>\n\n            var range = document.selection.createRange();\n            alert(range.parentElement().id); // Should alert \"ul\" but alerts \"b\"\n\n            This method returns the common ancestor node of the following:\n            - the parentElement() of the textRange\n            - the parentElement() of the textRange after calling collapse(true)\n            - the parentElement() of the textRange after calling collapse(false)\n            */\n            var getTextRangeContainerElement = function(textRange) {\n                var parentEl = textRange.parentElement();\n                var range = textRange.duplicate();\n                range.collapse(true);\n                var startEl = range.parentElement();\n                range = textRange.duplicate();\n                range.collapse(false);\n                var endEl = range.parentElement();\n                var startEndContainer = (startEl == endEl) ? startEl : dom.getCommonAncestor(startEl, endEl);\n\n                return startEndContainer == parentEl ? startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);\n            };\n\n            var textRangeIsCollapsed = function(textRange) {\n                return textRange.compareEndPoints(\"StartToEnd\", textRange) == 0;\n            };\n\n            // Gets the boundary of a TextRange expressed as a node and an offset within that node. This function started\n            // out as an improved version of code found in Tim Cameron Ryan's IERange (http://code.google.com/p/ierange/)\n            // but has grown, fixing problems with line breaks in preformatted text, adding workaround for IE TextRange\n            // bugs, handling for inputs and images, plus optimizations.\n            var getTextRangeBoundaryPosition = function(textRange, wholeRangeContainerElement, isStart, isCollapsed, startInfo) {\n                var workingRange = textRange.duplicate();\n                workingRange.collapse(isStart);\n                var containerElement = workingRange.parentElement();\n\n                // Sometimes collapsing a TextRange that's at the start of a text node can move it into the previous node, so\n                // check for that\n                if (!dom.isOrIsAncestorOf(wholeRangeContainerElement, containerElement)) {\n                    containerElement = wholeRangeContainerElement;\n                }\n\n\n                // Deal with nodes that cannot \"contain rich HTML markup\". In practice, this means form inputs, images and\n                // similar. See http://msdn.microsoft.com/en-us/library/aa703950%28VS.85%29.aspx\n                if (!containerElement.canHaveHTML) {\n                    var pos = new DomPosition(containerElement.parentNode, dom.getNodeIndex(containerElement));\n                    return {\n                        boundaryPosition: pos,\n                        nodeInfo: {\n                            nodeIndex: pos.offset,\n                            containerElement: pos.node\n                        }\n                    };\n                }\n\n                var workingNode = dom.getDocument(containerElement).createElement(\"span\");\n\n                // Workaround for HTML5 Shiv's insane violation of document.createElement(). See Rangy issue 104 and HTML5\n                // Shiv issue 64: https://github.com/aFarkas/html5shiv/issues/64\n                if (workingNode.parentNode) {\n                    dom.removeNode(workingNode);\n                }\n\n                var comparison, workingComparisonType = isStart ? \"StartToStart\" : \"StartToEnd\";\n                var previousNode, nextNode, boundaryPosition, boundaryNode;\n                var start = (startInfo && startInfo.containerElement == containerElement) ? startInfo.nodeIndex : 0;\n                var childNodeCount = containerElement.childNodes.length;\n                var end = childNodeCount;\n\n                // Check end first. Code within the loop assumes that the endth child node of the container is definitely\n                // after the range boundary.\n                var nodeIndex = end;\n\n                while (true) {\n                    if (nodeIndex == childNodeCount) {\n                        containerElement.appendChild(workingNode);\n                    } else {\n                        containerElement.insertBefore(workingNode, containerElement.childNodes[nodeIndex]);\n                    }\n                    workingRange.moveToElementText(workingNode);\n                    comparison = workingRange.compareEndPoints(workingComparisonType, textRange);\n                    if (comparison == 0 || start == end) {\n                        break;\n                    } else if (comparison == -1) {\n                        if (end == start + 1) {\n                            // We know the endth child node is after the range boundary, so we must be done.\n                            break;\n                        } else {\n                            start = nodeIndex;\n                        }\n                    } else {\n                        end = (end == start + 1) ? start : nodeIndex;\n                    }\n                    nodeIndex = Math.floor((start + end) / 2);\n                    containerElement.removeChild(workingNode);\n                }\n\n\n                // We've now reached or gone past the boundary of the text range we're interested in\n                // so have identified the node we want\n                boundaryNode = workingNode.nextSibling;\n\n                if (comparison == -1 && boundaryNode && isCharacterDataNode(boundaryNode)) {\n                    // This is a character data node (text, comment, cdata). The working range is collapsed at the start of\n                    // the node containing the text range's boundary, so we move the end of the working range to the\n                    // boundary point and measure the length of its text to get the boundary's offset within the node.\n                    workingRange.setEndPoint(isStart ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n                    var offset;\n\n                    if (/[\\r\\n]/.test(boundaryNode.data)) {\n                        /*\n                        For the particular case of a boundary within a text node containing rendered line breaks (within a\n                        <pre> element, for example), we need a slightly complicated approach to get the boundary's offset in\n                        IE. The facts:\n\n                        - Each line break is represented as \\r in the text node's data/nodeValue properties\n                        - Each line break is represented as \\r\\n in the TextRange's 'text' property\n                        - The 'text' property of the TextRange does not contain trailing line breaks\n\n                        To get round the problem presented by the final fact above, we can use the fact that TextRange's\n                        moveStart() and moveEnd() methods return the actual number of characters moved, which is not\n                        necessarily the same as the number of characters it was instructed to move. The simplest approach is\n                        to use this to store the characters moved when moving both the start and end of the range to the\n                        start of the document body and subtracting the start offset from the end offset (the\n                        \"move-negative-gazillion\" method). However, this is extremely slow when the document is large and\n                        the range is near the end of it. Clearly doing the mirror image (i.e. moving the range boundaries to\n                        the end of the document) has the same problem.\n\n                        Another approach that works is to use moveStart() to move the start boundary of the range up to the\n                        end boundary one character at a time and incrementing a counter with the value returned by the\n                        moveStart() call. However, the check for whether the start boundary has reached the end boundary is\n                        expensive, so this method is slow (although unlike \"move-negative-gazillion\" is largely unaffected\n                        by the location of the range within the document).\n\n                        The approach used below is a hybrid of the two methods above. It uses the fact that a string\n                        containing the TextRange's 'text' property with each \\r\\n converted to a single \\r character cannot\n                        be longer than the text of the TextRange, so the start of the range is moved that length initially\n                        and then a character at a time to make up for any trailing line breaks not contained in the 'text'\n                        property. This has good performance in most situations compared to the previous two methods.\n                        */\n                        var tempRange = workingRange.duplicate();\n                        var rangeLength = tempRange.text.replace(/\\r\\n/g, \"\\r\").length;\n\n                        offset = tempRange.moveStart(\"character\", rangeLength);\n                        while ( (comparison = tempRange.compareEndPoints(\"StartToEnd\", tempRange)) == -1) {\n                            offset++;\n                            tempRange.moveStart(\"character\", 1);\n                        }\n                    } else {\n                        offset = workingRange.text.length;\n                    }\n                    boundaryPosition = new DomPosition(boundaryNode, offset);\n                } else {\n\n                    // If the boundary immediately follows a character data node and this is the end boundary, we should favour\n                    // a position within that, and likewise for a start boundary preceding a character data node\n                    previousNode = (isCollapsed || !isStart) && workingNode.previousSibling;\n                    nextNode = (isCollapsed || isStart) && workingNode.nextSibling;\n                    if (nextNode && isCharacterDataNode(nextNode)) {\n                        boundaryPosition = new DomPosition(nextNode, 0);\n                    } else if (previousNode && isCharacterDataNode(previousNode)) {\n                        boundaryPosition = new DomPosition(previousNode, previousNode.data.length);\n                    } else {\n                        boundaryPosition = new DomPosition(containerElement, dom.getNodeIndex(workingNode));\n                    }\n                }\n\n                // Clean up\n                dom.removeNode(workingNode);\n\n                return {\n                    boundaryPosition: boundaryPosition,\n                    nodeInfo: {\n                        nodeIndex: nodeIndex,\n                        containerElement: containerElement\n                    }\n                };\n            };\n\n            // Returns a TextRange representing the boundary of a TextRange expressed as a node and an offset within that\n            // node. This function started out as an optimized version of code found in Tim Cameron Ryan's IERange\n            // (http://code.google.com/p/ierange/)\n            var createBoundaryTextRange = function(boundaryPosition, isStart) {\n                var boundaryNode, boundaryParent, boundaryOffset = boundaryPosition.offset;\n                var doc = dom.getDocument(boundaryPosition.node);\n                var workingNode, childNodes, workingRange = getBody(doc).createTextRange();\n                var nodeIsDataNode = isCharacterDataNode(boundaryPosition.node);\n\n                if (nodeIsDataNode) {\n                    boundaryNode = boundaryPosition.node;\n                    boundaryParent = boundaryNode.parentNode;\n                } else {\n                    childNodes = boundaryPosition.node.childNodes;\n                    boundaryNode = (boundaryOffset < childNodes.length) ? childNodes[boundaryOffset] : null;\n                    boundaryParent = boundaryPosition.node;\n                }\n\n                // Position the range immediately before the node containing the boundary\n                workingNode = doc.createElement(\"span\");\n\n                // Making the working element non-empty element persuades IE to consider the TextRange boundary to be within\n                // the element rather than immediately before or after it\n                workingNode.innerHTML = \"&#feff;\";\n\n                // insertBefore is supposed to work like appendChild if the second parameter is null. However, a bug report\n                // for IERange suggests that it can crash the browser: http://code.google.com/p/ierange/issues/detail?id=12\n                if (boundaryNode) {\n                    boundaryParent.insertBefore(workingNode, boundaryNode);\n                } else {\n                    boundaryParent.appendChild(workingNode);\n                }\n\n                workingRange.moveToElementText(workingNode);\n                workingRange.collapse(!isStart);\n\n                // Clean up\n                boundaryParent.removeChild(workingNode);\n\n                // Move the working range to the text offset, if required\n                if (nodeIsDataNode) {\n                    workingRange[isStart ? \"moveStart\" : \"moveEnd\"](\"character\", boundaryOffset);\n                }\n\n                return workingRange;\n            };\n\n            /*------------------------------------------------------------------------------------------------------------*/\n\n            // This is a wrapper around a TextRange, providing full DOM Range functionality using rangy's DomRange as a\n            // prototype\n\n            WrappedTextRange = function(textRange) {\n                this.textRange = textRange;\n                this.refresh();\n            };\n\n            WrappedTextRange.prototype = new DomRange(document);\n\n            WrappedTextRange.prototype.refresh = function() {\n                var start, end, startBoundary;\n\n                // TextRange's parentElement() method cannot be trusted. getTextRangeContainerElement() works around that.\n                var rangeContainerElement = getTextRangeContainerElement(this.textRange);\n\n                if (textRangeIsCollapsed(this.textRange)) {\n                    end = start = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true,\n                        true).boundaryPosition;\n                } else {\n                    startBoundary = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true, false);\n                    start = startBoundary.boundaryPosition;\n\n                    // An optimization used here is that if the start and end boundaries have the same parent element, the\n                    // search scope for the end boundary can be limited to exclude the portion of the element that precedes\n                    // the start boundary\n                    end = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, false, false,\n                        startBoundary.nodeInfo).boundaryPosition;\n                }\n\n                this.setStart(start.node, start.offset);\n                this.setEnd(end.node, end.offset);\n            };\n\n            WrappedTextRange.prototype.getName = function() {\n                return \"WrappedTextRange\";\n            };\n\n            DomRange.copyComparisonConstants(WrappedTextRange);\n\n            var rangeToTextRange = function(range) {\n                if (range.collapsed) {\n                    return createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                } else {\n                    var startRange = createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                    var endRange = createBoundaryTextRange(new DomPosition(range.endContainer, range.endOffset), false);\n                    var textRange = getBody( DomRange.getRangeDocument(range) ).createTextRange();\n                    textRange.setEndPoint(\"StartToStart\", startRange);\n                    textRange.setEndPoint(\"EndToEnd\", endRange);\n                    return textRange;\n                }\n            };\n\n            WrappedTextRange.rangeToTextRange = rangeToTextRange;\n\n            WrappedTextRange.prototype.toTextRange = function() {\n                return rangeToTextRange(this);\n            };\n\n            api.WrappedTextRange = WrappedTextRange;\n\n            // IE 9 and above have both implementations and Rangy makes both available. The next few lines sets which\n            // implementation to use by default.\n            if (!api.features.implementsDomRange || api.config.preferTextRange) {\n                // Add WrappedTextRange as the Range property of the global object to allow expression like Range.END_TO_END to work\n                var globalObj = (function(f) { return f(\"return this;\")(); })(Function);\n                if (typeof globalObj.Range == \"undefined\") {\n                    globalObj.Range = WrappedTextRange;\n                }\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return getBody(doc).createTextRange();\n                };\n\n                api.WrappedRange = WrappedTextRange;\n            }\n        }\n\n        api.createRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRange\");\n            return new api.WrappedRange(api.createNativeRange(doc));\n        };\n\n        api.createRangyRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRangyRange\");\n            return new DomRange(doc);\n        };\n\n        util.createAliasForDeprecatedMethod(api, \"createIframeRange\", \"createRange\");\n        util.createAliasForDeprecatedMethod(api, \"createIframeRangyRange\", \"createRangyRange\");\n\n        api.addShimListener(function(win) {\n            var doc = win.document;\n            if (typeof doc.createRange == \"undefined\") {\n                doc.createRange = function() {\n                    return api.createRange(doc);\n                };\n            }\n            doc = win = null;\n        });\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n    // in the W3C Selection API spec (https://www.w3.org/TR/selection-api)\n    api.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\n        api.config.checkSelectionRanges = true;\n\n        var BOOLEAN = \"boolean\";\n        var NUMBER = \"number\";\n        var dom = api.dom;\n        var util = api.util;\n        var isHostMethod = util.isHostMethod;\n        var DomRange = api.DomRange;\n        var WrappedRange = api.WrappedRange;\n        var DOMException = api.DOMException;\n        var DomPosition = dom.DomPosition;\n        var getNativeSelection;\n        var selectionIsCollapsed;\n        var features = api.features;\n        var CONTROL = \"Control\";\n        var getDocument = dom.getDocument;\n        var getBody = dom.getBody;\n        var rangesEqual = DomRange.rangesEqual;\n\n\n        // Utility function to support direction parameters in the API that may be a string (\"backward\", \"backwards\",\n        // \"forward\" or \"forwards\") or a Boolean (true for backwards).\n        function isDirectionBackward(dir) {\n            return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n        }\n\n        function getWindow(win, methodName) {\n            if (!win) {\n                return window;\n            } else if (dom.isWindow(win)) {\n                return win;\n            } else if (win instanceof WrappedSelection) {\n                return win.win;\n            } else {\n                var doc = dom.getContentDocument(win, module, methodName);\n                return dom.getWindow(doc);\n            }\n        }\n\n        function getWinSelection(winParam) {\n            return getWindow(winParam, \"getWinSelection\").getSelection();\n        }\n\n        function getDocSelection(winParam) {\n            return getWindow(winParam, \"getDocSelection\").document.selection;\n        }\n\n        function winSelectionIsBackward(sel) {\n            var backward = false;\n            if (sel.anchorNode) {\n                backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n            }\n            return backward;\n        }\n\n        // Test for the Range/TextRange and Selection features required\n        // Test for ability to retrieve selection\n        var implementsWinGetSelection = isHostMethod(window, \"getSelection\"),\n            implementsDocSelection = util.isHostObject(document, \"selection\");\n\n        features.implementsWinGetSelection = implementsWinGetSelection;\n        features.implementsDocSelection = implementsDocSelection;\n\n        var useDocumentSelection = implementsDocSelection && (!implementsWinGetSelection || api.config.preferTextRange);\n\n        if (useDocumentSelection) {\n            getNativeSelection = getDocSelection;\n            api.isSelectionValid = function(winParam) {\n                var doc = getWindow(winParam, \"isSelectionValid\").document, nativeSel = doc.selection;\n\n                // Check whether the selection TextRange is actually contained within the correct document\n                return (nativeSel.type != \"None\" || getDocument(nativeSel.createRange().parentElement()) == doc);\n            };\n        } else if (implementsWinGetSelection) {\n            getNativeSelection = getWinSelection;\n            api.isSelectionValid = function() {\n                return true;\n            };\n        } else {\n            module.fail(\"Neither document.selection or window.getSelection() detected.\");\n            return false;\n        }\n\n        api.getNativeSelection = getNativeSelection;\n\n        var testSelection = getNativeSelection();\n\n        // In Firefox, the selection is null in an iframe with display: none. See issue #138.\n        if (!testSelection) {\n            module.fail(\"Native selection was null (possibly issue 138?)\");\n            return false;\n        }\n\n        var testRange = api.createNativeRange(document);\n        var body = getBody(document);\n\n        // Obtaining a range from a selection\n        var selectionHasAnchorAndFocus = util.areHostProperties(testSelection,\n            [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n\n        features.selectionHasAnchorAndFocus = selectionHasAnchorAndFocus;\n\n        // Test for existence of native selection extend() method\n        var selectionHasExtend = isHostMethod(testSelection, \"extend\");\n        features.selectionHasExtend = selectionHasExtend;\n\n        // Test for existence of native selection setBaseAndExtent() method\n        var selectionHasSetBaseAndExtent = isHostMethod(testSelection, \"setBaseAndExtent\");\n        features.selectionHasSetBaseAndExtent = selectionHasSetBaseAndExtent;\n\n        // Test if rangeCount exists\n        var selectionHasRangeCount = (typeof testSelection.rangeCount == NUMBER);\n        features.selectionHasRangeCount = selectionHasRangeCount;\n\n        var selectionSupportsMultipleRanges = false;\n        var collapsedNonEditableSelectionsSupported = true;\n\n        var addRangeBackwardToNative = selectionHasExtend ?\n            function(nativeSelection, range) {\n                var doc = DomRange.getRangeDocument(range);\n                var endRange = api.createRange(doc);\n                endRange.collapseToPoint(range.endContainer, range.endOffset);\n                nativeSelection.addRange(getNativeRange(endRange));\n                nativeSelection.extend(range.startContainer, range.startOffset);\n            } : null;\n\n        if (util.areHostMethods(testSelection, [\"addRange\", \"getRangeAt\", \"removeAllRanges\"]) &&\n                typeof testSelection.rangeCount == NUMBER && features.implementsDomRange) {\n\n            (function() {\n                // Previously an iframe was used but this caused problems in some circumstances in IE, so tests are\n                // performed on the current document's selection. See issue 109.\n\n                // Note also that if a selection previously existed, it is wiped and later restored by these tests. This\n                // will result in the selection direction being reversed if the original selection was backwards and the\n                // browser does not support setting backwards selections (Internet Explorer, I'm looking at you).\n                var sel = window.getSelection();\n                if (sel) {\n                    // Store the current selection\n                    var originalSelectionRangeCount = sel.rangeCount;\n                    var selectionHasMultipleRanges = (originalSelectionRangeCount > 1);\n                    var originalSelectionRanges = [];\n                    var originalSelectionBackward = winSelectionIsBackward(sel);\n                    for (var i = 0; i < originalSelectionRangeCount; ++i) {\n                        originalSelectionRanges[i] = sel.getRangeAt(i);\n                    }\n\n                    // Create some test elements\n                    var testEl = dom.createTestElement(document, \"\", false);\n                    var textNode = testEl.appendChild( document.createTextNode(\"\\u00a0\\u00a0\\u00a0\") );\n\n                    // Test whether the native selection will allow a collapsed selection within a non-editable element\n                    var r1 = document.createRange();\n\n                    r1.setStart(textNode, 1);\n                    r1.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(r1);\n                    collapsedNonEditableSelectionsSupported = (sel.rangeCount == 1);\n                    sel.removeAllRanges();\n\n                    // Test whether the native selection is capable of supporting multiple ranges.\n                    if (!selectionHasMultipleRanges) {\n                        // Doing the original feature test here in Chrome 36 (and presumably later versions) prints a\n                        // console error of \"Discontiguous selection is not supported.\" that cannot be suppressed. There's\n                        // nothing we can do about this while retaining the feature test so we have to resort to a browser\n                        // sniff. I'm not happy about it. See\n                        // https://code.google.com/p/chromium/issues/detail?id=399791\n                        var chromeMatch = window.navigator.appVersion.match(/Chrome\\/(.*?) /);\n                        if (chromeMatch && parseInt(chromeMatch[1]) >= 36) {\n                            selectionSupportsMultipleRanges = false;\n                        } else {\n                            var r2 = r1.cloneRange();\n                            r1.setStart(textNode, 0);\n                            r2.setEnd(textNode, 3);\n                            r2.setStart(textNode, 2);\n                            sel.addRange(r1);\n                            sel.addRange(r2);\n                            selectionSupportsMultipleRanges = (sel.rangeCount == 2);\n                        }\n                    }\n\n                    // Clean up\n                    dom.removeNode(testEl);\n                    sel.removeAllRanges();\n\n                    for (i = 0; i < originalSelectionRangeCount; ++i) {\n                        if (i == 0 && originalSelectionBackward) {\n                            if (addRangeBackwardToNative) {\n                                addRangeBackwardToNative(sel, originalSelectionRanges[i]);\n                            } else {\n                                api.warn(\"Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend\");\n                                sel.addRange(originalSelectionRanges[i]);\n                            }\n                        } else {\n                            sel.addRange(originalSelectionRanges[i]);\n                        }\n                    }\n                }\n            })();\n        }\n\n        features.selectionSupportsMultipleRanges = selectionSupportsMultipleRanges;\n        features.collapsedNonEditableSelectionsSupported = collapsedNonEditableSelectionsSupported;\n\n        // ControlRanges\n        var implementsControlRange = false, testControlRange;\n\n        if (body && isHostMethod(body, \"createControlRange\")) {\n            testControlRange = body.createControlRange();\n            if (util.areHostProperties(testControlRange, [\"item\", \"add\"])) {\n                implementsControlRange = true;\n            }\n        }\n        features.implementsControlRange = implementsControlRange;\n\n        // Selection collapsedness\n        if (selectionHasAnchorAndFocus) {\n            selectionIsCollapsed = function(sel) {\n                return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n            };\n        } else {\n            selectionIsCollapsed = function(sel) {\n                return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n            };\n        }\n\n        function updateAnchorAndFocusFromRange(sel, range, backward) {\n            var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n            sel.anchorNode = range[anchorPrefix + \"Container\"];\n            sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n            sel.focusNode = range[focusPrefix + \"Container\"];\n            sel.focusOffset = range[focusPrefix + \"Offset\"];\n        }\n\n        function updateAnchorAndFocusFromNativeSelection(sel) {\n            var nativeSel = sel.nativeSelection;\n            sel.anchorNode = nativeSel.anchorNode;\n            sel.anchorOffset = nativeSel.anchorOffset;\n            sel.focusNode = nativeSel.focusNode;\n            sel.focusOffset = nativeSel.focusOffset;\n        }\n\n        function updateEmptySelection(sel) {\n            sel.anchorNode = sel.focusNode = null;\n            sel.anchorOffset = sel.focusOffset = 0;\n            sel.rangeCount = 0;\n            sel.isCollapsed = true;\n            sel._ranges.length = 0;\n            updateType(sel);\n        }\n\n        function updateType(sel) {\n            sel.type = (sel.rangeCount == 0) ? \"None\" : (selectionIsCollapsed(sel) ? \"Caret\" : \"Range\");\n        }\n\n        function getNativeRange(range) {\n            var nativeRange;\n            if (range instanceof DomRange) {\n                nativeRange = api.createNativeRange(range.getDocument());\n                nativeRange.setEnd(range.endContainer, range.endOffset);\n                nativeRange.setStart(range.startContainer, range.startOffset);\n            } else if (range instanceof WrappedRange) {\n                nativeRange = range.nativeRange;\n            } else if (features.implementsDomRange && (range instanceof dom.getWindow(range.startContainer).Range)) {\n                nativeRange = range;\n            }\n            return nativeRange;\n        }\n\n        function rangeContainsSingleElement(rangeNodes) {\n            if (!rangeNodes.length || rangeNodes[0].nodeType != 1) {\n                return false;\n            }\n            for (var i = 1, len = rangeNodes.length; i < len; ++i) {\n                if (!dom.isAncestorOf(rangeNodes[0], rangeNodes[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function getSingleElementFromRange(range) {\n            var nodes = range.getNodes();\n            if (!rangeContainsSingleElement(nodes)) {\n                throw module.createError(\"getSingleElementFromRange: range \" + range.inspect() + \" did not consist of a single element\");\n            }\n            return nodes[0];\n        }\n\n        // Simple, quick test which only needs to distinguish between a TextRange and a ControlRange\n        function isTextRange(range) {\n            return !!range && typeof range.text != \"undefined\";\n        }\n\n        function updateFromTextRange(sel, range) {\n            // Create a Range from the selected TextRange\n            var wrappedRange = new WrappedRange(range);\n            sel._ranges = [wrappedRange];\n\n            updateAnchorAndFocusFromRange(sel, wrappedRange, false);\n            sel.rangeCount = 1;\n            sel.isCollapsed = wrappedRange.collapsed;\n            updateType(sel);\n        }\n\n        function updateControlSelection(sel) {\n            // Update the wrapped selection based on what's now in the native selection\n            sel._ranges.length = 0;\n            if (sel.docSelection.type == \"None\") {\n                updateEmptySelection(sel);\n            } else {\n                var controlRange = sel.docSelection.createRange();\n                if (isTextRange(controlRange)) {\n                    // This case (where the selection type is \"Control\" and calling createRange() on the selection returns\n                    // a TextRange) can happen in IE 9. It happens, for example, when all elements in the selected\n                    // ControlRange have been removed from the ControlRange and removed from the document.\n                    updateFromTextRange(sel, controlRange);\n                } else {\n                    sel.rangeCount = controlRange.length;\n                    var range, doc = getDocument(controlRange.item(0));\n                    for (var i = 0; i < sel.rangeCount; ++i) {\n                        range = api.createRange(doc);\n                        range.selectNode(controlRange.item(i));\n                        sel._ranges.push(range);\n                    }\n                    sel.isCollapsed = sel.rangeCount == 1 && sel._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);\n                    updateType(sel);\n                }\n            }\n        }\n\n        function addRangeToControlSelection(sel, range) {\n            var controlRange = sel.docSelection.createRange();\n            var rangeElement = getSingleElementFromRange(range);\n\n            // Create a new ControlRange containing all the elements in the selected ControlRange plus the element\n            // contained by the supplied range\n            var doc = getDocument(controlRange.item(0));\n            var newControlRange = getBody(doc).createControlRange();\n            for (var i = 0, len = controlRange.length; i < len; ++i) {\n                newControlRange.add(controlRange.item(i));\n            }\n            try {\n                newControlRange.add(rangeElement);\n            } catch (ex) {\n                throw module.createError(\"addRange(): Element within the specified Range could not be added to control selection (does it have layout?)\");\n            }\n            newControlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        var getSelectionRangeAt;\n\n        if (isHostMethod(testSelection, \"getRangeAt\")) {\n            // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n            // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n            // lesson to us all, especially me.\n            getSelectionRangeAt = function(sel, index) {\n                try {\n                    return sel.getRangeAt(index);\n                } catch (ex) {\n                    return null;\n                }\n            };\n        } else if (selectionHasAnchorAndFocus) {\n            getSelectionRangeAt = function(sel) {\n                var doc = getDocument(sel.anchorNode);\n                var range = api.createRange(doc);\n                range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n\n                // Handle the case when the selection was selected backwards (from the end to the start in the\n                // document)\n                if (range.collapsed !== this.isCollapsed) {\n                    range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n                }\n\n                return range;\n            };\n        }\n\n        function WrappedSelection(selection, docSelection, win) {\n            this.nativeSelection = selection;\n            this.docSelection = docSelection;\n            this._ranges = [];\n            this.win = win;\n            this.refresh();\n        }\n\n        WrappedSelection.prototype = api.selectionPrototype;\n\n        function deleteProperties(sel) {\n            sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n            sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n            sel.detached = true;\n            updateType(sel);\n        }\n\n        var cachedRangySelections = [];\n\n        function actOnCachedSelection(win, action) {\n            var i = cachedRangySelections.length, cached, sel;\n            while (i--) {\n                cached = cachedRangySelections[i];\n                sel = cached.selection;\n                if (action == \"deleteAll\") {\n                    deleteProperties(sel);\n                } else if (cached.win == win) {\n                    if (action == \"delete\") {\n                        cachedRangySelections.splice(i, 1);\n                        return true;\n                    } else {\n                        return sel;\n                    }\n                }\n            }\n            if (action == \"deleteAll\") {\n                cachedRangySelections.length = 0;\n            }\n            return null;\n        }\n\n        var getSelection = function(win) {\n            // Check if the parameter is a Rangy Selection object\n            if (win && win instanceof WrappedSelection) {\n                win.refresh();\n                return win;\n            }\n\n            win = getWindow(win, \"getNativeSelection\");\n\n            var sel = actOnCachedSelection(win);\n            var nativeSel = getNativeSelection(win), docSel = implementsDocSelection ? getDocSelection(win) : null;\n            if (sel) {\n                sel.nativeSelection = nativeSel;\n                sel.docSelection = docSel;\n                sel.refresh();\n            } else {\n                sel = new WrappedSelection(nativeSel, docSel, win);\n                cachedRangySelections.push( { win: win, selection: sel } );\n            }\n            return sel;\n        };\n\n        api.getSelection = getSelection;\n\n        util.createAliasForDeprecatedMethod(api, \"getIframeSelection\", \"getSelection\");\n\n        var selProto = WrappedSelection.prototype;\n\n        function createControlSelection(sel, ranges) {\n            // Ensure that the selection becomes of type \"Control\"\n            var doc = getDocument(ranges[0].startContainer);\n            var controlRange = getBody(doc).createControlRange();\n            for (var i = 0, el, len = ranges.length; i < len; ++i) {\n                el = getSingleElementFromRange(ranges[i]);\n                try {\n                    controlRange.add(el);\n                } catch (ex) {\n                    throw module.createError(\"setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)\");\n                }\n            }\n            controlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        // Selecting a range\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && util.areHostMethods(testSelection, [\"removeAllRanges\", \"addRange\"])) {\n            selProto.removeAllRanges = function() {\n                this.nativeSelection.removeAllRanges();\n                updateEmptySelection(this);\n            };\n\n            var addRangeBackward = function(sel, range) {\n                addRangeBackwardToNative(sel.nativeSelection, range);\n                sel.refresh();\n            };\n\n            if (selectionHasRangeCount) {\n                selProto.addRange = function(range, direction) {\n                    if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                        addRangeToControlSelection(this, range);\n                    } else {\n                        if (isDirectionBackward(direction) && selectionHasExtend) {\n                            addRangeBackward(this, range);\n                        } else {\n                            var previousRangeCount;\n                            if (selectionSupportsMultipleRanges) {\n                                previousRangeCount = this.rangeCount;\n                            } else {\n                                this.removeAllRanges();\n                                previousRangeCount = 0;\n                            }\n                            // Clone the native range so that changing the selected range does not affect the selection.\n                            // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                            // issue 80.\n                            var clonedNativeRange = getNativeRange(range).cloneRange();\n                            try {\n                                this.nativeSelection.addRange(clonedNativeRange);\n                            } catch (ex) {\n                            }\n\n                            // Check whether adding the range was successful\n                            this.rangeCount = this.nativeSelection.rangeCount;\n\n                            if (this.rangeCount == previousRangeCount + 1) {\n                                // The range was added successfully\n\n                                // Check whether the range that we added to the selection is reflected in the last range extracted from\n                                // the selection\n                                if (api.config.checkSelectionRanges) {\n                                    var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                                    if (nativeRange && !rangesEqual(nativeRange, range)) {\n                                        // Happens in WebKit with, for example, a selection placed at the start of a text node\n                                        range = new WrappedRange(nativeRange);\n                                    }\n                                }\n                                this._ranges[this.rangeCount - 1] = range;\n                                updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                                this.isCollapsed = selectionIsCollapsed(this);\n                                updateType(this);\n                            } else {\n                                // The range was not added successfully. The simplest thing is to refresh\n                                this.refresh();\n                            }\n                        }\n                    }\n                };\n            } else {\n                selProto.addRange = function(range, direction) {\n                    if (isDirectionBackward(direction) && selectionHasExtend) {\n                        addRangeBackward(this, range);\n                    } else {\n                        this.nativeSelection.addRange(getNativeRange(range));\n                        this.refresh();\n                    }\n                };\n            }\n\n            selProto.setRanges = function(ranges) {\n                if (implementsControlRange && implementsDocSelection && ranges.length > 1) {\n                    createControlSelection(this, ranges);\n                } else {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        this.addRange(ranges[i]);\n                    }\n                }\n            };\n        } else if (isHostMethod(testSelection, \"empty\") && isHostMethod(testRange, \"select\") &&\n                   implementsControlRange && useDocumentSelection) {\n\n            selProto.removeAllRanges = function() {\n                // Added try/catch as fix for issue #21\n                try {\n                    this.docSelection.empty();\n\n                    // Check for empty() not working (issue #24)\n                    if (this.docSelection.type != \"None\") {\n                        // Work around failure to empty a control selection by instead selecting a TextRange and then\n                        // calling empty()\n                        var doc;\n                        if (this.anchorNode) {\n                            doc = getDocument(this.anchorNode);\n                        } else if (this.docSelection.type == CONTROL) {\n                            var controlRange = this.docSelection.createRange();\n                            if (controlRange.length) {\n                                doc = getDocument( controlRange.item(0) );\n                            }\n                        }\n                        if (doc) {\n                            var textRange = getBody(doc).createTextRange();\n                            textRange.select();\n                            this.docSelection.empty();\n                        }\n                    }\n                } catch(ex) {}\n                updateEmptySelection(this);\n            };\n\n            selProto.addRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    addRangeToControlSelection(this, range);\n                } else {\n                    api.WrappedTextRange.rangeToTextRange(range).select();\n                    this._ranges[0] = range;\n                    this.rangeCount = 1;\n                    this.isCollapsed = this._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(this, range, false);\n                    updateType(this);\n                }\n            };\n\n            selProto.setRanges = function(ranges) {\n                this.removeAllRanges();\n                var rangeCount = ranges.length;\n                if (rangeCount > 1) {\n                    createControlSelection(this, ranges);\n                } else if (rangeCount) {\n                    this.addRange(ranges[0]);\n                }\n            };\n        } else {\n            module.fail(\"No means of selecting a Range or TextRange was found\");\n            return false;\n        }\n\n        selProto.getRangeAt = function(index) {\n            if (index < 0 || index >= this.rangeCount) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            } else {\n                // Clone the range to preserve selection-range independence. See issue 80.\n                return this._ranges[index].cloneRange();\n            }\n        };\n\n        var refreshSelection;\n\n        if (useDocumentSelection) {\n            refreshSelection = function(sel) {\n                var range;\n                if (api.isSelectionValid(sel.win)) {\n                    range = sel.docSelection.createRange();\n                } else {\n                    range = getBody(sel.win.document).createTextRange();\n                    range.collapse(true);\n                }\n\n                if (sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else if (isTextRange(range)) {\n                    updateFromTextRange(sel, range);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else if (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n            refreshSelection = function(sel) {\n                if (implementsControlRange && implementsDocSelection && sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else {\n                    sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n                    if (sel.rangeCount) {\n                        for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                            sel._ranges[i] = new api.WrappedRange(sel.nativeSelection.getRangeAt(i));\n                        }\n                        updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n                        sel.isCollapsed = selectionIsCollapsed(sel);\n                        updateType(sel);\n                    } else {\n                        updateEmptySelection(sel);\n                    }\n                }\n            };\n        } else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n            refreshSelection = function(sel) {\n                var range, nativeSel = sel.nativeSelection;\n                if (nativeSel.anchorNode) {\n                    range = getSelectionRangeAt(nativeSel, 0);\n                    sel._ranges = [range];\n                    sel.rangeCount = 1;\n                    updateAnchorAndFocusFromNativeSelection(sel);\n                    sel.isCollapsed = selectionIsCollapsed(sel);\n                    updateType(sel);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else {\n            module.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n            return false;\n        }\n\n        selProto.refresh = function(checkForChanges) {\n            var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n            var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n\n            refreshSelection(this);\n            if (checkForChanges) {\n                // Check the range count first\n                var i = oldRanges.length;\n                if (i != this._ranges.length) {\n                    return true;\n                }\n\n                // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                // ranges after this\n                if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                    return true;\n                }\n\n                // Finally, compare each range in turn\n                while (i--) {\n                    if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        };\n\n        // Removal of a single range\n        var removeRangeManually = function(sel, range) {\n            var ranges = sel.getAllRanges();\n            sel.removeAllRanges();\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                if (!rangesEqual(range, ranges[i])) {\n                    sel.addRange(ranges[i]);\n                }\n            }\n            if (!sel.rangeCount) {\n                updateEmptySelection(sel);\n            }\n        };\n\n        if (implementsControlRange && implementsDocSelection) {\n            selProto.removeRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    var controlRange = this.docSelection.createRange();\n                    var rangeElement = getSingleElementFromRange(range);\n\n                    // Create a new ControlRange containing all the elements in the selected ControlRange minus the\n                    // element contained by the supplied range\n                    var doc = getDocument(controlRange.item(0));\n                    var newControlRange = getBody(doc).createControlRange();\n                    var el, removed = false;\n                    for (var i = 0, len = controlRange.length; i < len; ++i) {\n                        el = controlRange.item(i);\n                        if (el !== rangeElement || removed) {\n                            newControlRange.add(controlRange.item(i));\n                        } else {\n                            removed = true;\n                        }\n                    }\n                    newControlRange.select();\n\n                    // Update the wrapped selection based on what's now in the native selection\n                    updateControlSelection(this);\n                } else {\n                    removeRangeManually(this, range);\n                }\n            };\n        } else {\n            selProto.removeRange = function(range) {\n                removeRangeManually(this, range);\n            };\n        }\n\n        // Detecting if a selection is backward\n        var selectionIsBackward;\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && features.implementsDomRange) {\n            selectionIsBackward = winSelectionIsBackward;\n\n            selProto.isBackward = function() {\n                return selectionIsBackward(this);\n            };\n        } else {\n            selectionIsBackward = selProto.isBackward = function() {\n                return false;\n            };\n        }\n\n        // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n        selProto.isBackwards = selProto.isBackward;\n\n        // Selection stringifier\n        // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n        // The current spec does not yet define this method.\n        selProto.toString = function() {\n            var rangeTexts = [];\n            for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                rangeTexts[i] = \"\" + this._ranges[i];\n            }\n            return rangeTexts.join(\"\");\n        };\n\n        function assertNodeInSameDocument(sel, node) {\n            if (sel.win.document != getDocument(node)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (dom.isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n        selProto.collapse = function(node, offset) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.collapseToPoint(node, offset);\n            this.setSingleRange(range);\n            this.isCollapsed = true;\n        };\n\n        selProto.collapseToStart = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[0];\n                this.collapse(range.startContainer, range.startOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        selProto.collapseToEnd = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[this.rangeCount - 1];\n                this.collapse(range.endContainer, range.endOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        // The spec is very specific on how selectAllChildren should be implemented and not all browsers implement it as\n        // specified so the native implementation is never used by Rangy.\n        selProto.selectAllChildren = function(node) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.selectNodeContents(node);\n            this.setSingleRange(range);\n        };\n\n        if (selectionHasSetBaseAndExtent) {\n            selProto.setBaseAndExtent = function(anchorNode, anchorOffset, focusNode, focusOffset) {\n                this.nativeSelection.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);\n                this.refresh();\n            };\n        } else if (selectionHasExtend) {\n            selProto.setBaseAndExtent = function(anchorNode, anchorOffset, focusNode, focusOffset) {\n                assertValidOffset(anchorNode, anchorOffset);\n                assertValidOffset(focusNode, focusOffset);\n                assertNodeInSameDocument(this, anchorNode);\n                assertNodeInSameDocument(this, focusNode);\n                var range = api.createRange(node);\n                var isBackwards = (dom.comparePoints(anchorNode, anchorOffset, focusNode, focusOffset) == -1);\n                if (isBackwards) {\n                    range.setStartAndEnd(focusNode, focusOffset, anchorNode, anchorOffset);\n                } else {\n                    range.setStartAndEnd(anchorNode, anchorOffset, focusNode, focusOffset);\n                }\n                this.setSingleRange(range, isBackwards);\n            };\n        }\n\n        selProto.deleteFromDocument = function() {\n            // Sepcial behaviour required for IE's control selections\n            if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                var controlRange = this.docSelection.createRange();\n                var element;\n                while (controlRange.length) {\n                    element = controlRange.item(0);\n                    controlRange.remove(element);\n                    dom.removeNode(element);\n                }\n                this.refresh();\n            } else if (this.rangeCount) {\n                var ranges = this.getAllRanges();\n                if (ranges.length) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        ranges[i].deleteContents();\n                    }\n                    // The spec says nothing about what the selection should contain after calling deleteContents on each\n                    // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                    this.addRange(ranges[len - 1]);\n                }\n            }\n        };\n\n        // The following are non-standard extensions\n        selProto.eachRange = function(func, returnValue) {\n            for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                if ( func( this.getRangeAt(i) ) ) {\n                    return returnValue;\n                }\n            }\n        };\n\n        selProto.getAllRanges = function() {\n            var ranges = [];\n            this.eachRange(function(range) {\n                ranges.push(range);\n            });\n            return ranges;\n        };\n\n        selProto.setSingleRange = function(range, direction) {\n            this.removeAllRanges();\n            this.addRange(range, direction);\n        };\n\n        selProto.callMethodOnEachRange = function(methodName, params) {\n            var results = [];\n            this.eachRange( function(range) {\n                results.push( range[methodName].apply(range, params || []) );\n            } );\n            return results;\n        };\n\n        function createStartOrEndSetter(isStart) {\n            return function(node, offset) {\n                var range;\n                if (this.rangeCount) {\n                    range = this.getRangeAt(0);\n                    range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                } else {\n                    range = api.createRange(this.win.document);\n                    range.setStartAndEnd(node, offset);\n                }\n                this.setSingleRange(range, this.isBackward());\n            };\n        }\n\n        selProto.setStart = createStartOrEndSetter(true);\n        selProto.setEnd = createStartOrEndSetter(false);\n\n        // Add select() method to Range prototype. Any existing selection will be removed.\n        api.rangePrototype.select = function(direction) {\n            getSelection( this.getDocument() ).setSingleRange(this, direction);\n        };\n\n        selProto.changeEachRange = function(func) {\n            var ranges = [];\n            var backward = this.isBackward();\n\n            this.eachRange(function(range) {\n                func(range);\n                ranges.push(range);\n            });\n\n            this.removeAllRanges();\n            if (backward && ranges.length == 1) {\n                this.addRange(ranges[0], \"backward\");\n            } else {\n                this.setRanges(ranges);\n            }\n        };\n\n        selProto.containsNode = function(node, allowPartial) {\n            return this.eachRange( function(range) {\n                return range.containsNode(node, allowPartial);\n            }, true ) || false;\n        };\n\n        selProto.getBookmark = function(containerNode) {\n            return {\n                backward: this.isBackward(),\n                rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n            };\n        };\n\n        selProto.moveToBookmark = function(bookmark) {\n            var selRanges = [];\n            for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++]; ) {\n                range = api.createRange(this.win);\n                range.moveToBookmark(rangeBookmark);\n                selRanges.push(range);\n            }\n            if (bookmark.backward) {\n                this.setSingleRange(selRanges[0], \"backward\");\n            } else {\n                this.setRanges(selRanges);\n            }\n        };\n\n        selProto.saveRanges = function() {\n            return {\n                backward: this.isBackward(),\n                ranges: this.callMethodOnEachRange(\"cloneRange\")\n            };\n        };\n\n        selProto.restoreRanges = function(selRanges) {\n            this.removeAllRanges();\n            for (var i = 0, range; range = selRanges.ranges[i]; ++i) {\n                this.addRange(range, (selRanges.backward && i == 0));\n            }\n        };\n\n        selProto.toHtml = function() {\n            var rangeHtmls = [];\n            this.eachRange(function(range) {\n                rangeHtmls.push( DomRange.toHtml(range) );\n            });\n            return rangeHtmls.join(\"\");\n        };\n\n        if (features.implementsTextRange) {\n            selProto.getNativeTextRange = function() {\n                var sel, textRange;\n                if ( (sel = this.docSelection) ) {\n                    var range = sel.createRange();\n                    if (isTextRange(range)) {\n                        return range;\n                    } else {\n                        throw module.createError(\"getNativeTextRange: selection is a control selection\");\n                    }\n                } else if (this.rangeCount > 0) {\n                    return api.WrappedTextRange.rangeToTextRange( this.getRangeAt(0) );\n                } else {\n                    throw module.createError(\"getNativeTextRange: selection contains no range\");\n                }\n            };\n        }\n\n        function inspect(sel) {\n            var rangeInspects = [];\n            var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n            var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n            var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n\n            if (typeof sel.rangeCount != \"undefined\") {\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                }\n            }\n            return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                    \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n        }\n\n        selProto.getName = function() {\n            return \"WrappedSelection\";\n        };\n\n        selProto.inspect = function() {\n            return inspect(this);\n        };\n\n        selProto.detach = function() {\n            actOnCachedSelection(this.win, \"delete\");\n            deleteProperties(this);\n        };\n\n        WrappedSelection.detachAll = function() {\n            actOnCachedSelection(null, \"deleteAll\");\n        };\n\n        WrappedSelection.inspect = inspect;\n        WrappedSelection.isDirectionBackward = isDirectionBackward;\n\n        api.Selection = WrappedSelection;\n\n        api.selectionPrototype = selProto;\n\n        api.addShimListener(function(win) {\n            if (typeof win.getSelection == \"undefined\") {\n                win.getSelection = function() {\n                    return getSelection(win);\n                };\n            }\n            win = null;\n        });\n    });\n    \n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wait for document to load before initializing\n    var docReady = false;\n\n    var loadHandler = function(e) {\n        if (!docReady) {\n            docReady = true;\n            if (!api.initialized && api.config.autoInitialize) {\n                init();\n            }\n        }\n    };\n\n    if (isBrowser) {\n        // Test whether the document has already been loaded and initialize immediately if so\n        if (document.readyState == \"complete\") {\n            loadHandler();\n        } else {\n            if (isHostMethod(document, \"addEventListener\")) {\n                document.addEventListener(\"DOMContentLoaded\", loadHandler, false);\n            }\n\n            // Add a fallback in case the DOMContentLoaded event isn't supported\n            addListener(window, \"load\", loadHandler);\n        }\n    }\n\n    return api;\n}, this);","/**\n * Class Applier module for Rangy.\n * Adds, removes and toggles classes on Ranges and Selections\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright 2024, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.2\n * Build date: 2 November 2024\n */\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"./rangy-core\"], factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory( require(\"rangy\") );\n    } else {\n        // No AMD or CommonJS support so we use the rangy property of root (probably the global variable)\n        factory(root.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"ClassApplier\", [\"WrappedSelection\"], function(api, module) {\n        var dom = api.dom;\n        var DomPosition = dom.DomPosition;\n        var contains = dom.arrayContains;\n        var util = api.util;\n        var forEach = util.forEach;\n\n\n        var defaultTagName = \"span\";\n        var createElementNSSupported = util.isHostMethod(document, \"createElementNS\");\n\n        function each(obj, func) {\n            for (var i in obj) {\n                if (obj.hasOwnProperty(i)) {\n                    if (func(i, obj[i]) === false) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n\n        function trim(str) {\n            return str.replace(/^\\s\\s*/, \"\").replace(/\\s\\s*$/, \"\");\n        }\n\n        function classNameContainsClass(fullClassName, className) {\n            return !!fullClassName && new RegExp(\"(?:^|\\\\s)\" + className + \"(?:\\\\s|$)\").test(fullClassName);\n        }\n\n        // Inefficient, inelegant nonsense for IE's svg element, which has no classList and non-HTML className implementation\n        function hasClass(el, className) {\n            if (typeof el.classList == \"object\") {\n                return el.classList.contains(className);\n            } else {\n                var classNameSupported = (typeof el.className == \"string\");\n                var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n                return classNameContainsClass(elClass, className);\n            }\n        }\n\n        function addClass(el, className) {\n            if (typeof el.classList == \"object\") {\n                el.classList.add(className);\n            } else {\n                var classNameSupported = (typeof el.className == \"string\");\n                var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n                if (elClass) {\n                    if (!classNameContainsClass(elClass, className)) {\n                        elClass += \" \" + className;\n                    }\n                } else {\n                    elClass = className;\n                }\n                if (classNameSupported) {\n                    el.className = elClass;\n                } else {\n                    el.setAttribute(\"class\", elClass);\n                }\n            }\n        }\n\n        var removeClass = (function() {\n            function replacer(matched, whiteSpaceBefore, whiteSpaceAfter) {\n                return (whiteSpaceBefore && whiteSpaceAfter) ? \" \" : \"\";\n            }\n\n            return function(el, className) {\n                if (typeof el.classList == \"object\") {\n                    el.classList.remove(className);\n                } else {\n                    var classNameSupported = (typeof el.className == \"string\");\n                    var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n                    elClass = elClass.replace(new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\"), replacer);\n                    if (classNameSupported) {\n                        el.className = elClass;\n                    } else {\n                        el.setAttribute(\"class\", elClass);\n                    }\n                }\n            };\n        })();\n\n        function getClass(el) {\n            var classNameSupported = (typeof el.className == \"string\");\n            return classNameSupported ? el.className : el.getAttribute(\"class\");\n        }\n\n        function sortClassName(className) {\n            return className && className.split(/\\s+/).sort().join(\" \");\n        }\n\n        function getSortedClassName(el) {\n            return sortClassName( getClass(el) );\n        }\n\n        function haveSameClasses(el1, el2) {\n            return getSortedClassName(el1) == getSortedClassName(el2);\n        }\n\n        function hasAllClasses(el, className) {\n            var classes = className.split(/\\s+/);\n            for (var i = 0, len = classes.length; i < len; ++i) {\n                if (!hasClass(el, trim(classes[i]))) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function canTextBeStyled(textNode) {\n            var parent = textNode.parentNode;\n            return (parent && parent.nodeType == 1 && !/^(textarea|style|script|select|iframe)$/i.test(parent.nodeName));\n        }\n\n        function movePosition(position, oldParent, oldIndex, newParent, newIndex) {\n            var posNode = position.node, posOffset = position.offset;\n            var newNode = posNode, newOffset = posOffset;\n\n            if (posNode == newParent && posOffset > newIndex) {\n                ++newOffset;\n            }\n\n            if (posNode == oldParent && (posOffset == oldIndex  || posOffset == oldIndex + 1)) {\n                newNode = newParent;\n                newOffset += newIndex - oldIndex;\n            }\n\n            if (posNode == oldParent && posOffset > oldIndex + 1) {\n                --newOffset;\n            }\n\n            position.node = newNode;\n            position.offset = newOffset;\n        }\n\n        function movePositionWhenRemovingNode(position, parentNode, index) {\n            if (position.node == parentNode && position.offset > index) {\n                --position.offset;\n            }\n        }\n\n        function movePreservingPositions(node, newParent, newIndex, positionsToPreserve) {\n            // For convenience, allow newIndex to be -1 to mean \"insert at the end\".\n            if (newIndex == -1) {\n                newIndex = newParent.childNodes.length;\n            }\n\n            var oldParent = node.parentNode;\n            var oldIndex = dom.getNodeIndex(node);\n\n            forEach(positionsToPreserve, function(position) {\n                movePosition(position, oldParent, oldIndex, newParent, newIndex);\n            });\n\n            // Now actually move the node.\n            if (newParent.childNodes.length == newIndex) {\n                newParent.appendChild(node);\n            } else {\n                newParent.insertBefore(node, newParent.childNodes[newIndex]);\n            }\n        }\n\n        function removePreservingPositions(node, positionsToPreserve) {\n\n            var oldParent = node.parentNode;\n            var oldIndex = dom.getNodeIndex(node);\n\n            forEach(positionsToPreserve, function(position) {\n                movePositionWhenRemovingNode(position, oldParent, oldIndex);\n            });\n\n            dom.removeNode(node);\n        }\n\n        function moveChildrenPreservingPositions(node, newParent, newIndex, removeNode, positionsToPreserve) {\n            var child, children = [];\n            while ( (child = node.firstChild) ) {\n                movePreservingPositions(child, newParent, newIndex++, positionsToPreserve);\n                children.push(child);\n            }\n            if (removeNode) {\n                removePreservingPositions(node, positionsToPreserve);\n            }\n            return children;\n        }\n\n        function replaceWithOwnChildrenPreservingPositions(element, positionsToPreserve) {\n            return moveChildrenPreservingPositions(element, element.parentNode, dom.getNodeIndex(element), true, positionsToPreserve);\n        }\n\n        function rangeSelectsAnyText(range, textNode) {\n            var textNodeRange = range.cloneRange();\n            textNodeRange.selectNodeContents(textNode);\n\n            var intersectionRange = textNodeRange.intersection(range);\n            var text = intersectionRange ? intersectionRange.toString() : \"\";\n\n            return text != \"\";\n        }\n\n        function getEffectiveTextNodes(range) {\n            var nodes = range.getNodes([3]);\n\n            // Optimization as per issue 145\n\n            // Remove non-intersecting text nodes from the start of the range\n            var start = 0, node;\n            while ( (node = nodes[start]) && !rangeSelectsAnyText(range, node) ) {\n                ++start;\n            }\n\n            // Remove non-intersecting text nodes from the start of the range\n            var end = nodes.length - 1;\n            while ( (node = nodes[end]) && !rangeSelectsAnyText(range, node) ) {\n                --end;\n            }\n\n            return nodes.slice(start, end + 1);\n        }\n\n        function elementsHaveSameNonClassAttributes(el1, el2) {\n            if (el1.attributes.length != el2.attributes.length) return false;\n            for (var i = 0, len = el1.attributes.length, attr1, attr2, name; i < len; ++i) {\n                attr1 = el1.attributes[i];\n                name = attr1.name;\n                if (name != \"class\") {\n                    attr2 = el2.attributes.getNamedItem(name);\n                    if ( (attr1 === null) != (attr2 === null) ) return false;\n                    if (attr1.specified != attr2.specified) return false;\n                    if (attr1.specified && attr1.nodeValue !== attr2.nodeValue) return false;\n                }\n            }\n            return true;\n        }\n\n        function elementHasNonClassAttributes(el, exceptions) {\n            for (var i = 0, len = el.attributes.length, attrName; i < len; ++i) {\n                attrName = el.attributes[i].name;\n                if ( !(exceptions && contains(exceptions, attrName)) && el.attributes[i].specified && attrName != \"class\") {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        var getComputedStyleProperty = dom.getComputedStyleProperty;\n        var isEditableElement = (function() {\n            var testEl = document.createElement(\"div\");\n            return typeof testEl.isContentEditable == \"boolean\" ?\n                function (node) {\n                    return node && node.nodeType == 1 && node.isContentEditable;\n                } :\n                function (node) {\n                    if (!node || node.nodeType != 1 || node.contentEditable == \"false\") {\n                        return false;\n                    }\n                    return node.contentEditable == \"true\" || isEditableElement(node.parentNode);\n                };\n        })();\n\n        function isEditingHost(node) {\n            var parent;\n            return node && node.nodeType == 1 &&\n                (( (parent = node.parentNode) && parent.nodeType == 9 && parent.designMode == \"on\") ||\n                (isEditableElement(node) && !isEditableElement(node.parentNode)));\n        }\n\n        function isEditable(node) {\n            return (isEditableElement(node) || (node.nodeType != 1 && isEditableElement(node.parentNode))) && !isEditingHost(node);\n        }\n\n        var inlineDisplayRegex = /^inline(-block|-table)?$/i;\n\n        function isNonInlineElement(node) {\n            return node && node.nodeType == 1 && !inlineDisplayRegex.test(getComputedStyleProperty(node, \"display\"));\n        }\n\n        // White space characters as defined by HTML 4 (http://www.w3.org/TR/html401/struct/text.html)\n        var htmlNonWhiteSpaceRegex = /[^\\r\\n\\t\\f \\u200B]/;\n\n        function isUnrenderedWhiteSpaceNode(node) {\n            if (node.data.length == 0) {\n                return true;\n            }\n            if (htmlNonWhiteSpaceRegex.test(node.data)) {\n                return false;\n            }\n            var cssWhiteSpace = getComputedStyleProperty(node.parentNode, \"whiteSpace\");\n            switch (cssWhiteSpace) {\n                case \"pre\":\n                case \"pre-wrap\":\n                case \"-moz-pre-wrap\":\n                    return false;\n                case \"pre-line\":\n                    if (/[\\r\\n]/.test(node.data)) {\n                        return false;\n                    }\n            }\n\n            // We now have a whitespace-only text node that may be rendered depending on its context. If it is adjacent to a\n            // non-inline element, it will not be rendered. This seems to be a good enough definition.\n            return isNonInlineElement(node.previousSibling) || isNonInlineElement(node.nextSibling);\n        }\n\n        function getRangeBoundaries(ranges) {\n            var positions = [], i, range;\n            for (i = 0; range = ranges[i++]; ) {\n                positions.push(\n                    new DomPosition(range.startContainer, range.startOffset),\n                    new DomPosition(range.endContainer, range.endOffset)\n                );\n            }\n            return positions;\n        }\n\n        function updateRangesFromBoundaries(ranges, positions) {\n            for (var i = 0, range, start, end, len = ranges.length; i < len; ++i) {\n                range = ranges[i];\n                start = positions[i * 2];\n                end = positions[i * 2 + 1];\n                range.setStartAndEnd(start.node, start.offset, end.node, end.offset);\n            }\n        }\n\n        function isSplitPoint(node, offset) {\n            if (dom.isCharacterDataNode(node)) {\n                if (offset == 0) {\n                    return !!node.previousSibling;\n                } else if (offset == node.length) {\n                    return !!node.nextSibling;\n                } else {\n                    return true;\n                }\n            }\n\n            return offset > 0 && offset < node.childNodes.length;\n        }\n\n        function splitNodeAt(node, descendantNode, descendantOffset, positionsToPreserve) {\n            var newNode, parentNode;\n            var splitAtStart = (descendantOffset == 0);\n\n            if (dom.isAncestorOf(descendantNode, node)) {\n                return node;\n            }\n\n            if (dom.isCharacterDataNode(descendantNode)) {\n                var descendantIndex = dom.getNodeIndex(descendantNode);\n                if (descendantOffset == 0) {\n                    descendantOffset = descendantIndex;\n                } else if (descendantOffset == descendantNode.length) {\n                    descendantOffset = descendantIndex + 1;\n                } else {\n                    throw module.createError(\"splitNodeAt() should not be called with offset in the middle of a data node (\" +\n                        descendantOffset + \" in \" + descendantNode.data);\n                }\n                descendantNode = descendantNode.parentNode;\n            }\n\n            if (isSplitPoint(descendantNode, descendantOffset)) {\n                // descendantNode is now guaranteed not to be a text or other character node\n                newNode = descendantNode.cloneNode(false);\n                parentNode = descendantNode.parentNode;\n                if (newNode.id) {\n                    newNode.removeAttribute(\"id\");\n                }\n                var child, newChildIndex = 0;\n\n                while ( (child = descendantNode.childNodes[descendantOffset]) ) {\n                    movePreservingPositions(child, newNode, newChildIndex++, positionsToPreserve);\n                }\n                movePreservingPositions(newNode, parentNode, dom.getNodeIndex(descendantNode) + 1, positionsToPreserve);\n                return (descendantNode == node) ? newNode : splitNodeAt(node, parentNode, dom.getNodeIndex(newNode), positionsToPreserve);\n            } else if (node != descendantNode) {\n                newNode = descendantNode.parentNode;\n\n                // Work out a new split point in the parent node\n                var newNodeIndex = dom.getNodeIndex(descendantNode);\n\n                if (!splitAtStart) {\n                    newNodeIndex++;\n                }\n                return splitNodeAt(node, newNode, newNodeIndex, positionsToPreserve);\n            }\n            return node;\n        }\n\n        function areElementsMergeable(el1, el2) {\n            return el1.namespaceURI == el2.namespaceURI &&\n                el1.tagName.toLowerCase() == el2.tagName.toLowerCase() &&\n                haveSameClasses(el1, el2) &&\n                elementsHaveSameNonClassAttributes(el1, el2) &&\n                getComputedStyleProperty(el1, \"display\") == \"inline\" &&\n                getComputedStyleProperty(el2, \"display\") == \"inline\";\n        }\n\n        function createAdjacentMergeableTextNodeGetter(forward) {\n            var siblingPropName = forward ? \"nextSibling\" : \"previousSibling\";\n\n            return function(textNode, checkParentElement) {\n                var el = textNode.parentNode;\n                var adjacentNode = textNode[siblingPropName];\n                if (adjacentNode) {\n                    // Can merge if the node's previous/next sibling is a text node\n                    if (adjacentNode && adjacentNode.nodeType == 3) {\n                        return adjacentNode;\n                    }\n                } else if (checkParentElement) {\n                    // Compare text node parent element with its sibling\n                    adjacentNode = el[siblingPropName];\n                    if (adjacentNode && adjacentNode.nodeType == 1 && areElementsMergeable(el, adjacentNode)) {\n                        var adjacentNodeChild = adjacentNode[forward ? \"firstChild\" : \"lastChild\"];\n                        if (adjacentNodeChild && adjacentNodeChild.nodeType == 3) {\n                            return adjacentNodeChild;\n                        }\n                    }\n                }\n                return null;\n            };\n        }\n\n        var getPreviousMergeableTextNode = createAdjacentMergeableTextNodeGetter(false),\n            getNextMergeableTextNode = createAdjacentMergeableTextNodeGetter(true);\n\n    \n        function Merge(firstNode) {\n            this.isElementMerge = (firstNode.nodeType == 1);\n            this.textNodes = [];\n            var firstTextNode = this.isElementMerge ? firstNode.lastChild : firstNode;\n            if (firstTextNode) {\n                this.textNodes[0] = firstTextNode;\n            }\n        }\n\n        Merge.prototype = {\n            doMerge: function(positionsToPreserve) {\n                var textNodes = this.textNodes;\n                var firstTextNode = textNodes[0];\n                if (textNodes.length > 1) {\n                    var firstTextNodeIndex = dom.getNodeIndex(firstTextNode);\n                    var textParts = [], combinedTextLength = 0, textNode, parent;\n                    forEach(textNodes, function(textNode, i) {\n                        parent = textNode.parentNode;\n                        if (i > 0) {\n                            parent.removeChild(textNode);\n                            if (!parent.hasChildNodes()) {\n                                dom.removeNode(parent);\n                            }\n                            if (positionsToPreserve) {\n                                forEach(positionsToPreserve, function(position) {\n                                    // Handle case where position is inside the text node being merged into a preceding node\n                                    if (position.node == textNode) {\n                                        position.node = firstTextNode;\n                                        position.offset += combinedTextLength;\n                                    }\n                                    // Handle case where both text nodes precede the position within the same parent node\n                                    if (position.node == parent && position.offset > firstTextNodeIndex) {\n                                        --position.offset;\n                                        if (position.offset == firstTextNodeIndex + 1 && i < textNodes.length - 1) {\n                                            position.node = firstTextNode;\n                                            position.offset = combinedTextLength;\n                                        }\n                                    }\n                                });\n                            }\n                        }\n                        textParts[i] = textNode.data;\n                        combinedTextLength += textNode.data.length;\n                    });\n                    firstTextNode.data = textParts.join(\"\");\n                }\n                return firstTextNode.data;\n            },\n\n            getLength: function() {\n                var i = this.textNodes.length, len = 0;\n                while (i--) {\n                    len += this.textNodes[i].length;\n                }\n                return len;\n            },\n\n            toString: function() {\n                var textParts = [];\n                forEach(this.textNodes, function(textNode, i) {\n                    textParts[i] = \"'\" + textNode.data + \"'\";\n                });\n                return \"[Merge(\" + textParts.join(\",\") + \")]\";\n            }\n        };\n\n        var optionProperties = [\"elementTagName\", \"ignoreWhiteSpace\", \"applyToEditableOnly\", \"useExistingElements\",\n            \"removeEmptyElements\", \"onElementCreate\"];\n\n        // TODO: Populate this with every attribute name that corresponds to a property with a different name. Really??\n        var attrNamesForProperties = {};\n\n        function ClassApplier(className, options, tagNames) {\n            var normalize, i, len, propName, applier = this;\n            applier.cssClass = applier.className = className; // cssClass property is for backward compatibility\n\n            var elementPropertiesFromOptions = null, elementAttributes = {};\n\n            // Initialize from options object\n            if (typeof options == \"object\" && options !== null) {\n                if (typeof options.elementTagName !== \"undefined\") {\n                    options.elementTagName = options.elementTagName.toLowerCase();\n                }\n                tagNames = options.tagNames;\n                elementPropertiesFromOptions = options.elementProperties;\n                elementAttributes = options.elementAttributes;\n\n                for (i = 0; propName = optionProperties[i++]; ) {\n                    if (options.hasOwnProperty(propName)) {\n                        applier[propName] = options[propName];\n                    }\n                }\n                normalize = options.normalize;\n            } else {\n                normalize = options;\n            }\n\n            // Backward compatibility: the second parameter can also be a Boolean indicating to normalize after unapplying\n            applier.normalize = (typeof normalize == \"undefined\") ? true : normalize;\n\n            // Initialize element properties and attribute exceptions\n            applier.attrExceptions = [];\n            var el = document.createElement(applier.elementTagName);\n            applier.elementProperties = applier.copyPropertiesToElement(elementPropertiesFromOptions, el, true);\n            each(elementAttributes, function(attrName, attrValue) {\n                applier.attrExceptions.push(attrName);\n                // Ensure each attribute value is a string\n                elementAttributes[attrName] = \"\" + attrValue;\n            });\n            applier.elementAttributes = elementAttributes;\n\n            applier.elementSortedClassName = applier.elementProperties.hasOwnProperty(\"className\") ?\n                sortClassName(applier.elementProperties.className + \" \" + className) : className;\n\n            // Initialize tag names\n            applier.applyToAnyTagName = false;\n            var type = typeof tagNames;\n            if (type == \"string\") {\n                if (tagNames == \"*\") {\n                    applier.applyToAnyTagName = true;\n                } else {\n                    applier.tagNames = trim(tagNames.toLowerCase()).split(/\\s*,\\s*/);\n                }\n            } else if (type == \"object\" && typeof tagNames.length == \"number\") {\n                applier.tagNames = [];\n                for (i = 0, len = tagNames.length; i < len; ++i) {\n                    if (tagNames[i] == \"*\") {\n                        applier.applyToAnyTagName = true;\n                    } else {\n                        applier.tagNames.push(tagNames[i].toLowerCase());\n                    }\n                }\n            } else {\n                applier.tagNames = [applier.elementTagName];\n            }\n        }\n\n        ClassApplier.prototype = {\n            elementTagName: defaultTagName,\n            elementProperties: {},\n            elementAttributes: {},\n            ignoreWhiteSpace: true,\n            applyToEditableOnly: false,\n            useExistingElements: true,\n            removeEmptyElements: true,\n            onElementCreate: null,\n\n            copyPropertiesToElement: function(props, el, createCopy) {\n                var s, elStyle, elProps = {}, elPropsStyle, propValue, elPropValue, attrName;\n\n                for (var p in props) {\n                    if (props.hasOwnProperty(p)) {\n                        propValue = props[p];\n                        elPropValue = el[p];\n\n                        // Special case for class. The copied properties object has the applier's class as well as its own\n                        // to simplify checks when removing styling elements\n                        if (p == \"className\") {\n                            addClass(el, propValue);\n                            addClass(el, this.className);\n                            el[p] = sortClassName(el[p]);\n                            if (createCopy) {\n                                elProps[p] = propValue;\n                            }\n                        }\n\n                        // Special case for style\n                        else if (p == \"style\") {\n                            elStyle = elPropValue;\n                            if (createCopy) {\n                                elProps[p] = elPropsStyle = {};\n                            }\n                            for (s in props[p]) {\n                                if (props[p].hasOwnProperty(s)) {\n                                    elStyle[s] = propValue[s];\n                                    if (createCopy) {\n                                        elPropsStyle[s] = elStyle[s];\n                                    }\n                                }\n                            }\n                            this.attrExceptions.push(p);\n                        } else {\n                            el[p] = propValue;\n                            // Copy the property back from the dummy element so that later comparisons to check whether\n                            // elements may be removed are checking against the right value. For example, the href property\n                            // of an element returns a fully qualified URL even if it was previously assigned a relative\n                            // URL.\n                            if (createCopy) {\n                                elProps[p] = el[p];\n\n                                // Not all properties map to identically-named attributes\n                                attrName = attrNamesForProperties.hasOwnProperty(p) ? attrNamesForProperties[p] : p;\n                                this.attrExceptions.push(attrName);\n                            }\n                        }\n                    }\n                }\n\n                return createCopy ? elProps : \"\";\n            },\n\n            copyAttributesToElement: function(attrs, el) {\n                for (var attrName in attrs) {\n                    if (attrs.hasOwnProperty(attrName) && !/^class(?:Name)?$/i.test(attrName)) {\n                        el.setAttribute(attrName, attrs[attrName]);\n                    }\n                }\n            },\n\n            appliesToElement: function(el) {\n                return contains(this.tagNames, el.tagName.toLowerCase());\n            },\n\n            getEmptyElements: function(range) {\n                var applier = this;\n                return range.getNodes([1], function(el) {\n                    return applier.appliesToElement(el) && !el.hasChildNodes();\n                });\n            },\n\n            hasClass: function(node) {\n                return node.nodeType == 1 &&\n                    (this.applyToAnyTagName || this.appliesToElement(node)) &&\n                    hasClass(node, this.className);\n            },\n\n            getSelfOrAncestorWithClass: function(node) {\n                while (node) {\n                    if (this.hasClass(node)) {\n                        return node;\n                    }\n                    node = node.parentNode;\n                }\n                return null;\n            },\n\n            isModifiable: function(node) {\n                return !this.applyToEditableOnly || isEditable(node);\n            },\n\n            // White space adjacent to an unwrappable node can be ignored for wrapping\n            isIgnorableWhiteSpaceNode: function(node) {\n                return this.ignoreWhiteSpace && node && node.nodeType == 3 && isUnrenderedWhiteSpaceNode(node);\n            },\n\n            // Normalizes nodes after applying a class to a Range.\n            postApply: function(textNodes, range, positionsToPreserve, isUndo) {\n                var firstNode = textNodes[0], lastNode = textNodes[textNodes.length - 1];\n                var merges = [], currentMerge;\n                var rangeStartNode = firstNode, rangeEndNode = lastNode;\n                var rangeStartOffset = 0, rangeEndOffset = lastNode.length;\n                var precedingTextNode;\n\n                // Check for every required merge and create a Merge object for each\n                forEach(textNodes, function(textNode) {\n                    precedingTextNode = getPreviousMergeableTextNode(textNode, !isUndo);\n                    if (precedingTextNode) {\n                        if (!currentMerge) {\n                            currentMerge = new Merge(precedingTextNode);\n                            merges.push(currentMerge);\n                        }\n                        currentMerge.textNodes.push(textNode);\n                        if (textNode === firstNode) {\n                            rangeStartNode = currentMerge.textNodes[0];\n                            rangeStartOffset = rangeStartNode.length;\n                        }\n                        if (textNode === lastNode) {\n                            rangeEndNode = currentMerge.textNodes[0];\n                            rangeEndOffset = currentMerge.getLength();\n                        }\n                    } else {\n                        currentMerge = null;\n                    }\n                });\n\n                // Test whether the first node after the range needs merging\n                var nextTextNode = getNextMergeableTextNode(lastNode, !isUndo);\n\n                if (nextTextNode) {\n                    if (!currentMerge) {\n                        currentMerge = new Merge(lastNode);\n                        merges.push(currentMerge);\n                    }\n                    currentMerge.textNodes.push(nextTextNode);\n                }\n\n                // Apply the merges\n                if (merges.length) {\n                    for (var i = 0, len = merges.length; i < len; ++i) {\n                        merges[i].doMerge(positionsToPreserve);\n                    }\n\n                    // Set the range boundaries\n                    range.setStartAndEnd(rangeStartNode, rangeStartOffset, rangeEndNode, rangeEndOffset);\n                }\n            },\n\n            createContainer: function(parentNode) {\n                var doc = dom.getDocument(parentNode);\n                var namespace;\n                var el = createElementNSSupported && !dom.isHtmlNamespace(parentNode) && (namespace = parentNode.namespaceURI) ?\n                    doc.createElementNS(parentNode.namespaceURI, this.elementTagName) :\n                    doc.createElement(this.elementTagName);\n\n                this.copyPropertiesToElement(this.elementProperties, el, false);\n                this.copyAttributesToElement(this.elementAttributes, el);\n                addClass(el, this.className);\n                if (this.onElementCreate) {\n                    this.onElementCreate(el, this);\n                }\n                return el;\n            },\n\n            elementHasProperties: function(el, props) {\n                var applier = this;\n                return each(props, function(p, propValue) {\n                    if (p == \"className\") {\n                        // For checking whether we should reuse an existing element, we just want to check that the element\n                        // has all the classes specified in the className property. When deciding whether the element is\n                        // removable when unapplying a class, there is separate special handling to check whether the\n                        // element has extra classes so the same simple check will do.\n                        return hasAllClasses(el, propValue);\n                    } else if (typeof propValue == \"object\") {\n                        if (!applier.elementHasProperties(el[p], propValue)) {\n                            return false;\n                        }\n                    } else if (el[p] !== propValue) {\n                        return false;\n                    }\n                });\n            },\n\n            elementHasAttributes: function(el, attrs) {\n                return each(attrs, function(name, value) {\n                    if (el.getAttribute(name) !== value) {\n                        return false;\n                    }\n                });\n            },\n\n            applyToTextNode: function(textNode, positionsToPreserve) {\n\n                // Check whether the text node can be styled. Text within a <style> or <script> element, for example,\n                // should not be styled. See issue 283.\n                if (canTextBeStyled(textNode)) {\n                    var parent = textNode.parentNode;\n                    if (parent.childNodes.length == 1 &&\n                        this.useExistingElements &&\n                        this.appliesToElement(parent) &&\n                        this.elementHasProperties(parent, this.elementProperties) &&\n                        this.elementHasAttributes(parent, this.elementAttributes)) {\n\n                        addClass(parent, this.className);\n                    } else {\n                        var textNodeParent = textNode.parentNode;\n                        var el = this.createContainer(textNodeParent);\n                        textNodeParent.insertBefore(el, textNode);\n                        el.appendChild(textNode);\n                    }\n                }\n\n            },\n\n            isRemovable: function(el) {\n                return el.tagName.toLowerCase() == this.elementTagName &&\n                    getSortedClassName(el) == this.elementSortedClassName &&\n                    this.elementHasProperties(el, this.elementProperties) &&\n                    !elementHasNonClassAttributes(el, this.attrExceptions) &&\n                    this.elementHasAttributes(el, this.elementAttributes) &&\n                    this.isModifiable(el);\n            },\n\n            isEmptyContainer: function(el) {\n                var childNodeCount = el.childNodes.length;\n                return el.nodeType == 1 &&\n                    this.isRemovable(el) &&\n                    (childNodeCount == 0 || (childNodeCount == 1 && this.isEmptyContainer(el.firstChild)));\n            },\n\n            removeEmptyContainers: function(range) {\n                var applier = this;\n                var nodesToRemove = range.getNodes([1], function(el) {\n                    return applier.isEmptyContainer(el);\n                });\n\n                var rangesToPreserve = [range];\n                var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n\n                forEach(nodesToRemove, function(node) {\n                    removePreservingPositions(node, positionsToPreserve);\n                });\n\n                // Update the range from the preserved boundary positions\n                updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n            },\n\n            undoToTextNode: function(textNode, range, ancestorWithClass, positionsToPreserve) {\n                if (!range.containsNode(ancestorWithClass)) {\n                    // Split out the portion of the ancestor from which we can remove the class\n                    //var parent = ancestorWithClass.parentNode, index = dom.getNodeIndex(ancestorWithClass);\n                    var ancestorRange = range.cloneRange();\n                    ancestorRange.selectNode(ancestorWithClass);\n                    if (ancestorRange.isPointInRange(range.endContainer, range.endOffset)) {\n                        splitNodeAt(ancestorWithClass, range.endContainer, range.endOffset, positionsToPreserve);\n                        range.setEndAfter(ancestorWithClass);\n                    }\n                    if (ancestorRange.isPointInRange(range.startContainer, range.startOffset)) {\n                        ancestorWithClass = splitNodeAt(ancestorWithClass, range.startContainer, range.startOffset, positionsToPreserve);\n                    }\n                }\n\n                if (this.isRemovable(ancestorWithClass)) {\n                    replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n                } else {\n                    removeClass(ancestorWithClass, this.className);\n                }\n            },\n\n            splitAncestorWithClass: function(container, offset, positionsToPreserve) {\n                var ancestorWithClass = this.getSelfOrAncestorWithClass(container);\n                if (ancestorWithClass) {\n                    splitNodeAt(ancestorWithClass, container, offset, positionsToPreserve);\n                }\n            },\n\n            undoToAncestor: function(ancestorWithClass, positionsToPreserve) {\n                if (this.isRemovable(ancestorWithClass)) {\n                    replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n                } else {\n                    removeClass(ancestorWithClass, this.className);\n                }\n            },\n\n            applyToRange: function(range, rangesToPreserve) {\n                var applier = this;\n                rangesToPreserve = rangesToPreserve || [];\n\n                // Create an array of range boundaries to preserve\n                var positionsToPreserve = getRangeBoundaries(rangesToPreserve || []);\n\n                range.splitBoundariesPreservingPositions(positionsToPreserve);\n\n                // Tidy up the DOM by removing empty containers\n                if (applier.removeEmptyElements) {\n                    applier.removeEmptyContainers(range);\n                }\n\n                var textNodes = getEffectiveTextNodes(range);\n\n                if (textNodes.length) {\n                    forEach(textNodes, function(textNode) {\n                        if (!applier.isIgnorableWhiteSpaceNode(textNode) && !applier.getSelfOrAncestorWithClass(textNode) &&\n                                applier.isModifiable(textNode)) {\n                            applier.applyToTextNode(textNode, positionsToPreserve);\n                        }\n                    });\n                    var lastTextNode = textNodes[textNodes.length - 1];\n                    range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n                    if (applier.normalize) {\n                        applier.postApply(textNodes, range, positionsToPreserve, false);\n                    }\n\n                    // Update the ranges from the preserved boundary positions\n                    updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n                }\n\n                // Apply classes to any appropriate empty elements\n                var emptyElements = applier.getEmptyElements(range);\n\n                forEach(emptyElements, function(el) {\n                    addClass(el, applier.className);\n                });\n            },\n\n            applyToRanges: function(ranges) {\n\n                var i = ranges.length;\n                while (i--) {\n                    this.applyToRange(ranges[i], ranges);\n                }\n\n\n                return ranges;\n            },\n\n            applyToSelection: function(win) {\n                var sel = api.getSelection(win);\n                sel.setRanges( this.applyToRanges(sel.getAllRanges()) );\n            },\n\n            undoToRange: function(range, rangesToPreserve) {\n                var applier = this;\n                // Create an array of range boundaries to preserve\n                rangesToPreserve = rangesToPreserve || [];\n                var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n\n\n                range.splitBoundariesPreservingPositions(positionsToPreserve);\n\n                // Tidy up the DOM by removing empty containers\n                if (applier.removeEmptyElements) {\n                    applier.removeEmptyContainers(range, positionsToPreserve);\n                }\n\n                var textNodes = getEffectiveTextNodes(range);\n                var textNode, ancestorWithClass;\n                var lastTextNode = textNodes[textNodes.length - 1];\n\n                if (textNodes.length) {\n                    applier.splitAncestorWithClass(range.endContainer, range.endOffset, positionsToPreserve);\n                    applier.splitAncestorWithClass(range.startContainer, range.startOffset, positionsToPreserve);\n                    for (var i = 0, len = textNodes.length; i < len; ++i) {\n                        textNode = textNodes[i];\n                        ancestorWithClass = applier.getSelfOrAncestorWithClass(textNode);\n                        if (ancestorWithClass && applier.isModifiable(textNode)) {\n                            applier.undoToAncestor(ancestorWithClass, positionsToPreserve);\n                        }\n                    }\n                    // Ensure the range is still valid\n                    range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n\n\n                    if (applier.normalize) {\n                        applier.postApply(textNodes, range, positionsToPreserve, true);\n                    }\n\n                    // Update the ranges from the preserved boundary positions\n                    updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n                }\n\n                // Remove class from any appropriate empty elements\n                var emptyElements = applier.getEmptyElements(range);\n\n                forEach(emptyElements, function(el) {\n                    removeClass(el, applier.className);\n                });\n            },\n\n            undoToRanges: function(ranges) {\n                // Get ranges returned in document order\n                var i = ranges.length;\n\n                while (i--) {\n                    this.undoToRange(ranges[i], ranges);\n                }\n\n                return ranges;\n            },\n\n            undoToSelection: function(win) {\n                var sel = api.getSelection(win);\n                var ranges = api.getSelection(win).getAllRanges();\n                this.undoToRanges(ranges);\n                sel.setRanges(ranges);\n            },\n\n            isAppliedToRange: function(range) {\n                if (range.collapsed || range.toString() == \"\") {\n                    return !!this.getSelfOrAncestorWithClass(range.commonAncestorContainer);\n                } else {\n                    var textNodes = range.getNodes( [3] );\n                    if (textNodes.length)\n                    for (var i = 0, textNode; textNode = textNodes[i++]; ) {\n                        if (!this.isIgnorableWhiteSpaceNode(textNode) && rangeSelectsAnyText(range, textNode) &&\n                                this.isModifiable(textNode) && !this.getSelfOrAncestorWithClass(textNode)) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n            },\n\n            isAppliedToRanges: function(ranges) {\n                var i = ranges.length;\n                if (i == 0) {\n                    return false;\n                }\n                while (i--) {\n                    if (!this.isAppliedToRange(ranges[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n\n            isAppliedToSelection: function(win) {\n                var sel = api.getSelection(win);\n                return this.isAppliedToRanges(sel.getAllRanges());\n            },\n\n            toggleRange: function(range) {\n                if (this.isAppliedToRange(range)) {\n                    this.undoToRange(range);\n                } else {\n                    this.applyToRange(range);\n                }\n            },\n\n            toggleSelection: function(win) {\n                if (this.isAppliedToSelection(win)) {\n                    this.undoToSelection(win);\n                } else {\n                    this.applyToSelection(win);\n                }\n            },\n\n            getElementsWithClassIntersectingRange: function(range) {\n                var elements = [];\n                var applier = this;\n                range.getNodes([3], function(textNode) {\n                    var el = applier.getSelfOrAncestorWithClass(textNode);\n                    if (el && !contains(elements, el)) {\n                        elements.push(el);\n                    }\n                });\n                return elements;\n            },\n\n            detach: function() {}\n        };\n\n        function createClassApplier(className, options, tagNames) {\n            return new ClassApplier(className, options, tagNames);\n        }\n\n        ClassApplier.util = {\n            hasClass: hasClass,\n            addClass: addClass,\n            removeClass: removeClass,\n            getClass: getClass,\n            hasSameClasses: haveSameClasses,\n            hasAllClasses: hasAllClasses,\n            replaceWithOwnChildren: replaceWithOwnChildrenPreservingPositions,\n            elementsHaveSameNonClassAttributes: elementsHaveSameNonClassAttributes,\n            elementHasNonClassAttributes: elementHasNonClassAttributes,\n            splitNodeAt: splitNodeAt,\n            isEditableElement: isEditableElement,\n            isEditingHost: isEditingHost,\n            isEditable: isEditable\n        };\n\n        api.CssClassApplier = api.ClassApplier = ClassApplier;\n        api.createClassApplier = createClassApplier;\n        util.createAliasForDeprecatedMethod(api, \"createCssClassApplier\", \"createClassApplier\", module);\n    });\n    \n    return rangy;\n}, this);\n","/**\n * Highlighter module for Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core, ClassApplier and optionally TextRange modules.\n *\n * Copyright 2024, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.2\n * Build date: 2 November 2024\n */\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"./rangy-core\"], factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory( require(\"rangy\") );\n    } else {\n        // No AMD or CommonJS support so we use the rangy property of root (probably the global variable)\n        factory(root.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"Highlighter\", [\"ClassApplier\"], function(api, module) {\n        var dom = api.dom;\n        var contains = dom.arrayContains;\n        var getBody = dom.getBody;\n        var createOptions = api.util.createOptions;\n        var forEach = api.util.forEach;\n        var nextHighlightId = 1;\n\n        // Puts highlights in order, last in document first.\n        function compareHighlights(h1, h2) {\n            return h1.characterRange.start - h2.characterRange.start;\n        }\n\n        function getContainerElement(doc, id) {\n            return id ? doc.getElementById(id) : getBody(doc);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var highlighterTypes = {};\n\n        function HighlighterType(type, converterCreator) {\n            this.type = type;\n            this.converterCreator = converterCreator;\n        }\n\n        HighlighterType.prototype.create = function() {\n            var converter = this.converterCreator();\n            converter.type = this.type;\n            return converter;\n        };\n\n        function registerHighlighterType(type, converterCreator) {\n            highlighterTypes[type] = new HighlighterType(type, converterCreator);\n        }\n\n        function getConverter(type) {\n            var highlighterType = highlighterTypes[type];\n            if (highlighterType instanceof HighlighterType) {\n                return highlighterType.create();\n            } else {\n                throw new Error(\"Highlighter type '\" + type + \"' is not valid\");\n            }\n        }\n\n        api.registerHighlighterType = registerHighlighterType;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function CharacterRange(start, end) {\n            this.start = start;\n            this.end = end;\n        }\n\n        CharacterRange.prototype = {\n            intersects: function(charRange) {\n                return this.start < charRange.end && this.end > charRange.start;\n            },\n\n            isContiguousWith: function(charRange) {\n                return this.start == charRange.end || this.end == charRange.start;\n            },\n\n            union: function(charRange) {\n                return new CharacterRange(Math.min(this.start, charRange.start), Math.max(this.end, charRange.end));\n            },\n\n            intersection: function(charRange) {\n                return new CharacterRange(Math.max(this.start, charRange.start), Math.min(this.end, charRange.end));\n            },\n\n            getComplements: function(charRange) {\n                var ranges = [];\n                if (this.start >= charRange.start) {\n                    if (this.end <= charRange.end) {\n                        return [];\n                    }\n                    ranges.push(new CharacterRange(charRange.end, this.end));\n                } else {\n                    ranges.push(new CharacterRange(this.start, Math.min(this.end, charRange.start)));\n                    if (this.end > charRange.end) {\n                        ranges.push(new CharacterRange(charRange.end, this.end));\n                    }\n                }\n                return ranges;\n            },\n\n            toString: function() {\n                return \"[CharacterRange(\" + this.start + \", \" + this.end + \")]\";\n            }\n        };\n\n        CharacterRange.fromCharacterRange = function(charRange) {\n            return new CharacterRange(charRange.start, charRange.end);\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var textContentConverter = {\n            rangeToCharacterRange: function(range, containerNode) {\n                var bookmark = range.getBookmark(containerNode);\n                return new CharacterRange(bookmark.start, bookmark.end);\n            },\n\n            characterRangeToRange: function(doc, characterRange, containerNode) {\n                var range = api.createRange(doc);\n                range.moveToBookmark({\n                    start: characterRange.start,\n                    end: characterRange.end,\n                    containerNode: containerNode\n                });\n\n                return range;\n            },\n\n            serializeSelection: function(selection, containerNode) {\n                var ranges = selection.getAllRanges(), rangeCount = ranges.length;\n                var rangeInfos = [];\n\n                var backward = rangeCount == 1 && selection.isBackward();\n\n                for (var i = 0, len = ranges.length; i < len; ++i) {\n                    rangeInfos[i] = {\n                        characterRange: this.rangeToCharacterRange(ranges[i], containerNode),\n                        backward: backward\n                    };\n                }\n\n                return rangeInfos;\n            },\n\n            restoreSelection: function(selection, savedSelection, containerNode) {\n                selection.removeAllRanges();\n                var doc = selection.win.document;\n                for (var i = 0, len = savedSelection.length, range, rangeInfo, characterRange; i < len; ++i) {\n                    rangeInfo = savedSelection[i];\n                    characterRange = rangeInfo.characterRange;\n                    range = this.characterRangeToRange(doc, rangeInfo.characterRange, containerNode);\n                    selection.addRange(range, rangeInfo.backward);\n                }\n            }\n        };\n\n        registerHighlighterType(\"textContent\", function() {\n            return textContentConverter;\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Lazily load the TextRange-based converter so that the dependency is only checked when required.\n        registerHighlighterType(\"TextRange\", (function() {\n            var converter;\n\n            return function() {\n                if (!converter) {\n                    // Test that textRangeModule exists and is supported\n                    var textRangeModule = api.modules.TextRange;\n                    if (!textRangeModule) {\n                        throw new Error(\"TextRange module is missing.\");\n                    } else if (!textRangeModule.supported) {\n                        throw new Error(\"TextRange module is present but not supported.\");\n                    }\n\n                    converter = {\n                        rangeToCharacterRange: function(range, containerNode) {\n                            return CharacterRange.fromCharacterRange( range.toCharacterRange(containerNode) );\n                        },\n\n                        characterRangeToRange: function(doc, characterRange, containerNode) {\n                            var range = api.createRange(doc);\n                            range.selectCharacters(containerNode, characterRange.start, characterRange.end);\n                            return range;\n                        },\n\n                        serializeSelection: function(selection, containerNode) {\n                            return selection.saveCharacterRanges(containerNode);\n                        },\n\n                        restoreSelection: function(selection, savedSelection, containerNode) {\n                            selection.restoreCharacterRanges(containerNode, savedSelection);\n                        }\n                    };\n                }\n\n                return converter;\n            };\n        })());\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function Highlight(doc, characterRange, classApplier, converter, id, containerElementId) {\n            if (id) {\n                this.id = id;\n                nextHighlightId = Math.max(nextHighlightId, id + 1);\n            } else {\n                this.id = nextHighlightId++;\n            }\n            this.characterRange = characterRange;\n            this.doc = doc;\n            this.classApplier = classApplier;\n            this.converter = converter;\n            this.containerElementId = containerElementId || null;\n            this.applied = false;\n        }\n\n        Highlight.prototype = {\n            getContainerElement: function() {\n                return getContainerElement(this.doc, this.containerElementId);\n            },\n\n            getRange: function() {\n                return this.converter.characterRangeToRange(this.doc, this.characterRange, this.getContainerElement());\n            },\n\n            fromRange: function(range) {\n                this.characterRange = this.converter.rangeToCharacterRange(range, this.getContainerElement());\n            },\n\n            getText: function() {\n                return this.getRange().toString();\n            },\n\n            containsElement: function(el) {\n                return this.getRange().containsNodeContents(el.firstChild);\n            },\n\n            unapply: function() {\n                this.classApplier.undoToRange(this.getRange());\n                this.applied = false;\n            },\n\n            apply: function() {\n                this.classApplier.applyToRange(this.getRange());\n                this.applied = true;\n            },\n\n            getHighlightElements: function() {\n                return this.classApplier.getElementsWithClassIntersectingRange(this.getRange());\n            },\n\n            toString: function() {\n                return \"[Highlight(ID: \" + this.id + \", class: \" + this.classApplier.className + \", character range: \" +\n                    this.characterRange.start + \" - \" + this.characterRange.end + \")]\";\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function Highlighter(doc, type) {\n            type = type || \"textContent\";\n            this.doc = doc || document;\n            this.classAppliers = {};\n            this.highlights = [];\n            this.converter = getConverter(type);\n        }\n\n        Highlighter.prototype = {\n            addClassApplier: function(classApplier) {\n                this.classAppliers[classApplier.className] = classApplier;\n            },\n\n            getHighlightForElement: function(el) {\n                var highlights = this.highlights;\n                for (var i = 0, len = highlights.length; i < len; ++i) {\n                    if (highlights[i].containsElement(el)) {\n                        return highlights[i];\n                    }\n                }\n                return null;\n            },\n\n            removeHighlights: function(highlights) {\n                for (var i = 0, len = this.highlights.length, highlight; i < len; ++i) {\n                    highlight = this.highlights[i];\n                    if (contains(highlights, highlight)) {\n                        highlight.unapply();\n                        this.highlights.splice(i--, 1);\n                    }\n                }\n            },\n\n            removeAllHighlights: function() {\n                this.removeHighlights(this.highlights);\n            },\n\n            getIntersectingHighlights: function(ranges) {\n                // Test each range against each of the highlighted ranges to see whether they overlap\n                var intersectingHighlights = [], highlights = this.highlights;\n                forEach(ranges, function(range) {\n                    //var selCharRange = converter.rangeToCharacterRange(range);\n                    forEach(highlights, function(highlight) {\n                        if (range.intersectsRange( highlight.getRange() ) && !contains(intersectingHighlights, highlight)) {\n                            intersectingHighlights.push(highlight);\n                        }\n                    });\n                });\n\n                return intersectingHighlights;\n            },\n\n            highlightCharacterRanges: function(className, charRanges, options) {\n                var i, len, j;\n                var highlights = this.highlights;\n                var converter = this.converter;\n                var doc = this.doc;\n                var highlightsToRemove = [];\n                var classApplier = className ? this.classAppliers[className] : null;\n\n                options = createOptions(options, {\n                    containerElementId: null,\n                    exclusive: true\n                });\n\n                var containerElementId = options.containerElementId;\n                var exclusive = options.exclusive;\n\n                var containerElement, containerElementRange, containerElementCharRange;\n                if (containerElementId) {\n                    containerElement = this.doc.getElementById(containerElementId);\n                    if (containerElement) {\n                        containerElementRange = api.createRange(this.doc);\n                        containerElementRange.selectNodeContents(containerElement);\n                        containerElementCharRange = new CharacterRange(0, containerElementRange.toString().length);\n                    }\n                }\n\n                var charRange, highlightCharRange, removeHighlight, isSameClassApplier, highlightsToKeep, splitHighlight;\n\n                for (i = 0, len = charRanges.length; i < len; ++i) {\n                    charRange = charRanges[i];\n                    highlightsToKeep = [];\n\n                    // Restrict character range to container element, if it exists\n                    if (containerElementCharRange) {\n                        charRange = charRange.intersection(containerElementCharRange);\n                    }\n\n                    // Ignore empty ranges\n                    if (charRange.start == charRange.end) {\n                        continue;\n                    }\n\n                    // Check for intersection with existing highlights. For each intersection, create a new highlight\n                    // which is the union of the highlight range and the selected range\n                    for (j = 0; j < highlights.length; ++j) {\n                        removeHighlight = false;\n\n                        if (containerElementId == highlights[j].containerElementId) {\n                            highlightCharRange = highlights[j].characterRange;\n                            isSameClassApplier = (classApplier == highlights[j].classApplier);\n                            splitHighlight = !isSameClassApplier && exclusive;\n\n                            // Replace the existing highlight if it needs to be:\n                            //  1. merged (isSameClassApplier)\n                            //  2. partially or entirely erased (className === null)\n                            //  3. partially or entirely replaced (isSameClassApplier == false && exclusive == true)\n                            if (    (highlightCharRange.intersects(charRange) || highlightCharRange.isContiguousWith(charRange)) &&\n                                    (isSameClassApplier || splitHighlight) ) {\n\n                                // Remove existing highlights, keeping the unselected parts\n                                if (splitHighlight) {\n                                    forEach(highlightCharRange.getComplements(charRange), function(rangeToAdd) {\n                                        highlightsToKeep.push( new Highlight(doc, rangeToAdd, highlights[j].classApplier, converter, null, containerElementId) );\n                                    });\n                                }\n\n                                removeHighlight = true;\n                                if (isSameClassApplier) {\n                                    charRange = highlightCharRange.union(charRange);\n                                }\n                            }\n                        }\n\n                        if (removeHighlight) {\n                            highlightsToRemove.push(highlights[j]);\n                            highlights[j] = new Highlight(doc, highlightCharRange.union(charRange), classApplier, converter, null, containerElementId);\n                        } else {\n                            highlightsToKeep.push(highlights[j]);\n                        }\n                    }\n\n                    // Add new range\n                    if (classApplier) {\n                        highlightsToKeep.push(new Highlight(doc, charRange, classApplier, converter, null, containerElementId));\n                    }\n                    this.highlights = highlights = highlightsToKeep;\n                }\n\n                // Remove the old highlights\n                forEach(highlightsToRemove, function(highlightToRemove) {\n                    highlightToRemove.unapply();\n                });\n\n                // Apply new highlights\n                var newHighlights = [];\n                forEach(highlights, function(highlight) {\n                    if (!highlight.applied) {\n                        highlight.apply();\n                        newHighlights.push(highlight);\n                    }\n                });\n\n                return newHighlights;\n            },\n\n            highlightRanges: function(className, ranges, options) {\n                var selCharRanges = [];\n                var converter = this.converter;\n\n                options = createOptions(options, {\n                    containerElement: null,\n                    exclusive: true\n                });\n\n                var containerElement = options.containerElement;\n                var containerElementId = containerElement ? containerElement.id : null;\n                var containerElementRange;\n                if (containerElement) {\n                    containerElementRange = api.createRange(containerElement);\n                    containerElementRange.selectNodeContents(containerElement);\n                }\n\n                forEach(ranges, function(range) {\n                    var scopedRange = containerElement ? containerElementRange.intersection(range) : range;\n                    selCharRanges.push( converter.rangeToCharacterRange(scopedRange, containerElement || getBody(range.getDocument())) );\n                });\n\n                return this.highlightCharacterRanges(className, selCharRanges, {\n                    containerElementId: containerElementId,\n                    exclusive: options.exclusive\n                });\n            },\n\n            highlightSelection: function(className, options) {\n                var converter = this.converter;\n                var classApplier = className ? this.classAppliers[className] : false;\n\n                options = createOptions(options, {\n                    containerElementId: null,\n                    exclusive: true\n                });\n\n                var containerElementId = options.containerElementId;\n                var exclusive = options.exclusive;\n                var selection = options.selection || api.getSelection(this.doc);\n                var doc = selection.win.document;\n                var containerElement = getContainerElement(doc, containerElementId);\n\n                if (!classApplier && className !== false) {\n                    throw new Error(\"No class applier found for class '\" + className + \"'\");\n                }\n\n                // Store the existing selection as character ranges\n                var serializedSelection = converter.serializeSelection(selection, containerElement);\n\n                // Create an array of selected character ranges\n                var selCharRanges = [];\n                forEach(serializedSelection, function(rangeInfo) {\n                    selCharRanges.push( CharacterRange.fromCharacterRange(rangeInfo.characterRange) );\n                });\n\n                var newHighlights = this.highlightCharacterRanges(className, selCharRanges, {\n                    containerElementId: containerElementId,\n                    exclusive: exclusive\n                });\n\n                // Restore selection\n                converter.restoreSelection(selection, serializedSelection, containerElement);\n\n                return newHighlights;\n            },\n\n            unhighlightSelection: function(selection) {\n                selection = selection || api.getSelection(this.doc);\n                var intersectingHighlights = this.getIntersectingHighlights( selection.getAllRanges() );\n                this.removeHighlights(intersectingHighlights);\n                selection.removeAllRanges();\n                return intersectingHighlights;\n            },\n\n            getHighlightsInSelection: function(selection) {\n                selection = selection || api.getSelection(this.doc);\n                return this.getIntersectingHighlights(selection.getAllRanges());\n            },\n\n            selectionOverlapsHighlight: function(selection) {\n                return this.getHighlightsInSelection(selection).length > 0;\n            },\n\n            serialize: function(options) {\n                var highlighter = this;\n                var highlights = highlighter.highlights;\n                var serializedType, serializedHighlights, convertType, serializationConverter;\n\n                highlights.sort(compareHighlights);\n                options = createOptions(options, {\n                    serializeHighlightText: false,\n                    type: highlighter.converter.type\n                });\n\n                serializedType = options.type;\n                convertType = (serializedType != highlighter.converter.type);\n\n                if (convertType) {\n                    serializationConverter = getConverter(serializedType);\n                }\n\n                serializedHighlights = [\"type:\" + serializedType];\n\n                forEach(highlights, function(highlight) {\n                    var characterRange = highlight.characterRange;\n                    var containerElement;\n\n                    // Convert to the current Highlighter's type, if different from the serialization type\n                    if (convertType) {\n                        containerElement = highlight.getContainerElement();\n                        characterRange = serializationConverter.rangeToCharacterRange(\n                            highlighter.converter.characterRangeToRange(highlighter.doc, characterRange, containerElement),\n                            containerElement\n                        );\n                    }\n\n                    var parts = [\n                        characterRange.start,\n                        characterRange.end,\n                        highlight.id,\n                        highlight.classApplier.className,\n                        highlight.containerElementId\n                    ];\n\n                    if (options.serializeHighlightText) {\n                        parts.push(highlight.getText());\n                    }\n                    serializedHighlights.push( parts.join(\"$\") );\n                });\n\n                return serializedHighlights.join(\"|\");\n            },\n\n            deserialize: function(serialized) {\n                var serializedHighlights = serialized.split(\"|\");\n                var highlights = [];\n\n                var firstHighlight = serializedHighlights[0];\n                var regexResult;\n                var serializationType, serializationConverter, convertType = false;\n                if ( firstHighlight && (regexResult = /^type:(\\w+)$/.exec(firstHighlight)) ) {\n                    serializationType = regexResult[1];\n                    if (serializationType != this.converter.type) {\n                        serializationConverter = getConverter(serializationType);\n                        convertType = true;\n                    }\n                    serializedHighlights.shift();\n                } else {\n                    throw new Error(\"Serialized highlights are invalid.\");\n                }\n\n                var classApplier, highlight, characterRange, containerElementId, containerElement;\n\n                for (var i = serializedHighlights.length, parts; i-- > 0; ) {\n                    parts = serializedHighlights[i].split(\"$\");\n                    characterRange = new CharacterRange(+parts[0], +parts[1]);\n                    containerElementId = parts[4] || null;\n\n                    // Convert to the current Highlighter's type, if different from the serialization type\n                    if (convertType) {\n                        containerElement = getContainerElement(this.doc, containerElementId);\n                        characterRange = this.converter.rangeToCharacterRange(\n                            serializationConverter.characterRangeToRange(this.doc, characterRange, containerElement),\n                            containerElement\n                        );\n                    }\n\n                    classApplier = this.classAppliers[ parts[3] ];\n\n                    if (!classApplier) {\n                        throw new Error(\"No class applier found for class '\" + parts[3] + \"'\");\n                    }\n\n                    highlight = new Highlight(this.doc, characterRange, classApplier, this.converter, parseInt(parts[2]), containerElementId);\n                    highlight.apply();\n                    highlights.push(highlight);\n                }\n                this.highlights = highlights;\n            }\n        };\n\n        api.Highlighter = Highlighter;\n\n        api.createHighlighter = function(doc, rangeCharacterOffsetConverterType) {\n            return new Highlighter(doc, rangeCharacterOffsetConverterType);\n        };\n    });\n    \n    return rangy;\n}, this);\n","/**\n * Serializer module for Rangy.\n * Serializes Ranges and Selections. An example use would be to store a user's selection on a particular page in a\n * cookie or local storage and restore it on the user's next visit to the same page.\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright 2024, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.2\n * Build date: 2 November 2024\n */\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"./rangy-core\"], factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory( require(\"rangy\") );\n    } else {\n        // No AMD or CommonJS support so we use the rangy property of root (probably the global variable)\n        factory(root.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"Serializer\", [\"WrappedSelection\"], function(api, module) {\n        var UNDEF = \"undefined\";\n        var util = api.util;\n\n        // encodeURIComponent and decodeURIComponent are required for cookie handling\n        if (typeof encodeURIComponent == UNDEF || typeof decodeURIComponent == UNDEF) {\n            module.fail(\"encodeURIComponent and/or decodeURIComponent method is missing\");\n        }\n\n        // Checksum for checking whether range can be serialized\n        var crc32 = (function() {\n            function utf8encode(str) {\n                var utf8CharCodes = [];\n\n                for (var i = 0, len = str.length, c; i < len; ++i) {\n                    c = str.charCodeAt(i);\n                    if (c < 128) {\n                        utf8CharCodes.push(c);\n                    } else if (c < 2048) {\n                        utf8CharCodes.push((c >> 6) | 192, (c & 63) | 128);\n                    } else {\n                        utf8CharCodes.push((c >> 12) | 224, ((c >> 6) & 63) | 128, (c & 63) | 128);\n                    }\n                }\n                return utf8CharCodes;\n            }\n\n            var cachedCrcTable = null;\n\n            function buildCRCTable() {\n                var table = [];\n                for (var i = 0, j, crc; i < 256; ++i) {\n                    crc = i;\n                    j = 8;\n                    while (j--) {\n                        if ((crc & 1) == 1) {\n                            crc = (crc >>> 1) ^ 0xEDB88320;\n                        } else {\n                            crc >>>= 1;\n                        }\n                    }\n                    table[i] = crc >>> 0;\n                }\n                return table;\n            }\n\n            function getCrcTable() {\n                if (!cachedCrcTable) {\n                    cachedCrcTable = buildCRCTable();\n                }\n                return cachedCrcTable;\n            }\n\n            return function(str) {\n                var utf8CharCodes = utf8encode(str), crc = -1, crcTable = getCrcTable();\n                for (var i = 0, len = utf8CharCodes.length, y; i < len; ++i) {\n                    y = (crc ^ utf8CharCodes[i]) & 0xFF;\n                    crc = (crc >>> 8) ^ crcTable[y];\n                }\n                return (crc ^ -1) >>> 0;\n            };\n        })();\n\n        var dom = api.dom;\n\n        function escapeTextForHtml(str) {\n            return str.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n        }\n\n        function nodeToInfoString(node, infoParts) {\n            infoParts = infoParts || [];\n            var nodeType = node.nodeType, children = node.childNodes, childCount = children.length;\n            var nodeInfo = [nodeType, node.nodeName, childCount].join(\":\");\n            var start = \"\", end = \"\";\n            switch (nodeType) {\n                case 3: // Text node\n                    start = escapeTextForHtml(node.nodeValue);\n                    break;\n                case 8: // Comment\n                    start = \"<!--\" + escapeTextForHtml(node.nodeValue) + \"-->\";\n                    break;\n                default:\n                    start = \"<\" + nodeInfo + \">\";\n                    end = \"</>\";\n                    break;\n            }\n            if (start) {\n                infoParts.push(start);\n            }\n            for (var i = 0; i < childCount; ++i) {\n                nodeToInfoString(children[i], infoParts);\n            }\n            if (end) {\n                infoParts.push(end);\n            }\n            return infoParts;\n        }\n\n        // Creates a string representation of the specified element's contents that is similar to innerHTML but omits all\n        // attributes and comments and includes child node counts. This is done instead of using innerHTML to work around\n        // IE <= 8's policy of including element properties in attributes, which ruins things by changing an element's\n        // innerHTML whenever the user changes an input within the element.\n        function getElementChecksum(el) {\n            var info = nodeToInfoString(el).join(\"\");\n            return crc32(info).toString(16);\n        }\n\n        function serializePosition(node, offset, rootNode) {\n            var pathParts = [], n = node;\n            rootNode = rootNode || dom.getDocument(node).documentElement;\n            while (n && n != rootNode) {\n                pathParts.push(dom.getNodeIndex(n, true));\n                n = n.parentNode;\n            }\n            return pathParts.join(\"/\") + \":\" + offset;\n        }\n\n        function deserializePosition(serialized, rootNode, doc) {\n            if (!rootNode) {\n                rootNode = (doc || document).documentElement;\n            }\n            var parts = serialized.split(\":\");\n            var node = rootNode;\n            var nodeIndices = parts[0] ? parts[0].split(\"/\") : [], i = nodeIndices.length, nodeIndex;\n\n            while (i--) {\n                nodeIndex = parseInt(nodeIndices[i], 10);\n                if (nodeIndex < node.childNodes.length) {\n                    node = node.childNodes[nodeIndex];\n                } else {\n                    throw module.createError(\"deserializePosition() failed: node \" + dom.inspectNode(node) +\n                            \" has no child with index \" + nodeIndex + \", \" + i);\n                }\n            }\n\n            return new dom.DomPosition(node, parseInt(parts[1], 10));\n        }\n\n        function serializeRange(range, omitChecksum, rootNode) {\n            rootNode = rootNode || api.DomRange.getRangeDocument(range).documentElement;\n            if (!dom.isOrIsAncestorOf(rootNode, range.commonAncestorContainer)) {\n                throw module.createError(\"serializeRange(): range \" + range.inspect() +\n                    \" is not wholly contained within specified root node \" + dom.inspectNode(rootNode));\n            }\n            var serialized = serializePosition(range.startContainer, range.startOffset, rootNode) + \",\" +\n                serializePosition(range.endContainer, range.endOffset, rootNode);\n            if (!omitChecksum) {\n                serialized += \"{\" + getElementChecksum(rootNode) + \"}\";\n            }\n            return serialized;\n        }\n\n        var deserializeRegex = /^([^,]+),([^,\\{]+)(\\{([^}]+)\\})?$/;\n\n        function deserializeRange(serialized, rootNode, doc) {\n            if (rootNode) {\n                doc = doc || dom.getDocument(rootNode);\n            } else {\n                doc = doc || document;\n                rootNode = doc.documentElement;\n            }\n            var result = deserializeRegex.exec(serialized);\n            var checksum = result[4];\n            if (checksum) {\n                var rootNodeChecksum = getElementChecksum(rootNode);\n                if (checksum !== rootNodeChecksum) {\n                    throw module.createError(\"deserializeRange(): checksums of serialized range root node (\" + checksum +\n                        \") and target root node (\" + rootNodeChecksum + \") do not match\");\n                }\n            }\n            var start = deserializePosition(result[1], rootNode, doc), end = deserializePosition(result[2], rootNode, doc);\n            var range = api.createRange(doc);\n            range.setStartAndEnd(start.node, start.offset, end.node, end.offset);\n            return range;\n        }\n\n        function canDeserializeRange(serialized, rootNode, doc) {\n            if (!rootNode) {\n                rootNode = (doc || document).documentElement;\n            }\n            var result = deserializeRegex.exec(serialized);\n            var checksum = result[3];\n            return !checksum || checksum === getElementChecksum(rootNode);\n        }\n\n        function serializeSelection(selection, omitChecksum, rootNode) {\n            selection = api.getSelection(selection);\n            var ranges = selection.getAllRanges(), serializedRanges = [];\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                serializedRanges[i] = serializeRange(ranges[i], omitChecksum, rootNode);\n            }\n            return serializedRanges.join(\"|\");\n        }\n\n        function deserializeSelection(serialized, rootNode, win) {\n            if (rootNode) {\n                win = win || dom.getWindow(rootNode);\n            } else {\n                win = win || window;\n                rootNode = win.document.documentElement;\n            }\n            var serializedRanges = serialized.split(\"|\");\n            var sel = api.getSelection(win);\n            var ranges = [];\n\n            for (var i = 0, len = serializedRanges.length; i < len; ++i) {\n                ranges[i] = deserializeRange(serializedRanges[i], rootNode, win.document);\n            }\n            sel.setRanges(ranges);\n\n            return sel;\n        }\n\n        function canDeserializeSelection(serialized, rootNode, win) {\n            var doc;\n            if (rootNode) {\n                doc = win ? win.document : dom.getDocument(rootNode);\n            } else {\n                win = win || window;\n                rootNode = win.document.documentElement;\n            }\n            var serializedRanges = serialized.split(\"|\");\n\n            for (var i = 0, len = serializedRanges.length; i < len; ++i) {\n                if (!canDeserializeRange(serializedRanges[i], rootNode, doc)) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        var cookieName = \"rangySerializedSelection\";\n\n        function getSerializedSelectionFromCookie(cookie) {\n            var parts = cookie.split(/[;,]/);\n            for (var i = 0, len = parts.length, nameVal, val; i < len; ++i) {\n                nameVal = parts[i].split(\"=\");\n                if (nameVal[0].replace(/^\\s+/, \"\") == cookieName) {\n                    val = nameVal[1];\n                    if (val) {\n                        return decodeURIComponent(val.replace(/\\s+$/, \"\"));\n                    }\n                }\n            }\n            return null;\n        }\n\n        function restoreSelectionFromCookie(win) {\n            win = win || window;\n            var serialized = getSerializedSelectionFromCookie(win.document.cookie);\n            if (serialized) {\n                deserializeSelection(serialized, win.doc);\n            }\n        }\n\n        function saveSelectionCookie(win, props) {\n            win = win || window;\n            props = (typeof props == \"object\") ? props : {};\n            var expires = props.expires ? \";expires=\" + props.expires.toUTCString() : \"\";\n            var path = props.path ? \";path=\" + props.path : \"\";\n            var domain = props.domain ? \";domain=\" + props.domain : \"\";\n            var secure = props.secure ? \";secure\" : \"\";\n            var serialized = serializeSelection(api.getSelection(win));\n            win.document.cookie = encodeURIComponent(cookieName) + \"=\" + encodeURIComponent(serialized) + expires + path + domain + secure;\n        }\n\n        util.extend(api, {\n            serializePosition: serializePosition,\n            deserializePosition: deserializePosition,\n            serializeRange: serializeRange,\n            deserializeRange: deserializeRange,\n            canDeserializeRange: canDeserializeRange,\n            serializeSelection: serializeSelection,\n            deserializeSelection: deserializeSelection,\n            canDeserializeSelection: canDeserializeSelection,\n            restoreSelectionFromCookie: restoreSelectionFromCookie,\n            saveSelectionCookie: saveSelectionCookie,\n            getElementChecksum: getElementChecksum,\n            nodeToInfoString: nodeToInfoString\n        });\n\n        util.crc32 = crc32;\n    });\n    \n    return rangy;\n}, this);","/**\n * Text range module for Rangy.\n * Text-based manipulation and searching of ranges and selections.\n *\n * Features\n *\n * - Ability to move range boundaries by character or word offsets\n * - Customizable word tokenizer\n * - Ignores text nodes inside <script> or <style> elements or those hidden by CSS display and visibility properties\n * - Range findText method to search for text or regex within the page or within a range. Flags for whole words and case\n *   sensitivity\n * - Selection and range save/restore as text offsets within a node\n * - Methods to return visible text within a range or selection\n * - innerText method for elements\n *\n * References\n *\n * https://www.w3.org/Bugs/Public/show_bug.cgi?id=13145\n * http://aryeh.name/spec/innertext/innertext.html\n * http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright 2024, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.2\n * Build date: 2 November 2024\n */\n\n/**\n * Problem: handling of trailing spaces before line breaks is handled inconsistently between browsers.\n *\n * First, a <br>: this is relatively simple. For the following HTML:\n *\n * 1 <br>2\n *\n * - IE and WebKit render the space, include it in the selection (i.e. when the content is selected and pasted into a\n *   textarea, the space is present) and allow the caret to be placed after it.\n * - Firefox does not acknowledge the space in the selection but it is possible to place the caret after it.\n * - Opera does not render the space but has two separate caret positions on either side of the space (left and right\n *   arrow keys show this) and includes the space in the selection.\n *\n * The other case is the line break or breaks implied by block elements. For the following HTML:\n *\n * <p>1 </p><p>2<p>\n *\n * - WebKit does not acknowledge the space in any way\n * - Firefox, IE and Opera as per <br>\n *\n * One more case is trailing spaces before line breaks in elements with white-space: pre-line. For the following HTML:\n *\n * <p style=\"white-space: pre-line\">1\n * 2</p>\n *\n * - Firefox and WebKit include the space in caret positions\n * - IE does not support pre-line up to and including version 9\n * - Opera ignores the space\n * - Trailing space only renders if there is a non-collapsed character in the line\n *\n * Problem is whether Rangy should ever acknowledge the space and if so, when. Another problem is whether this can be\n * feature-tested\n */\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"./rangy-core\"], factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory( require(\"rangy\") );\n    } else {\n        // No AMD or CommonJS support so we use the rangy property of root (probably the global variable)\n        factory(root.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"TextRange\", [\"WrappedSelection\"], function(api, module) {\n        var UNDEF = \"undefined\";\n        var CHARACTER = \"character\", WORD = \"word\";\n        var dom = api.dom, util = api.util;\n        var extend = util.extend;\n        var createOptions = util.createOptions;\n        var getBody = dom.getBody;\n\n\n        var spacesRegex = /^[ \\t\\f\\r\\n]+$/;\n        var spacesMinusLineBreaksRegex = /^[ \\t\\f\\r]+$/;\n        var allWhiteSpaceRegex = /^[\\t-\\r \\u0085\\u00A0\\u1680\\u180E\\u2000-\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000]+$/;\n        var nonLineBreakWhiteSpaceRegex = /^[\\t \\u00A0\\u1680\\u180E\\u2000-\\u200B\\u202F\\u205F\\u3000]+$/;\n        var lineBreakRegex = /^[\\n-\\r\\u0085\\u2028\\u2029]$/;\n\n        var defaultLanguage = \"en\";\n\n        var isDirectionBackward = api.Selection.isDirectionBackward;\n\n        // Properties representing whether trailing spaces inside blocks are completely collapsed (as they are in WebKit,\n        // but not other browsers). Also test whether trailing spaces before <br> elements are collapsed.\n        var trailingSpaceInBlockCollapses = false;\n        var trailingSpaceBeforeBrCollapses = false;\n        var trailingSpaceBeforeBlockCollapses = false;\n        var trailingSpaceBeforeLineBreakInPreLineCollapses = true;\n\n        (function() {\n            var el = dom.createTestElement(document, \"<p>1 </p><p></p>\", true);\n            var p = el.firstChild;\n            var sel = api.getSelection();\n            sel.collapse(p.lastChild, 2);\n            sel.setStart(p.firstChild, 0);\n            trailingSpaceInBlockCollapses = (\"\" + sel).length == 1;\n\n            el.innerHTML = \"1 <br />\";\n            sel.collapse(el, 2);\n            sel.setStart(el.firstChild, 0);\n            trailingSpaceBeforeBrCollapses = (\"\" + sel).length == 1;\n\n            el.innerHTML = \"1 <p>1</p>\";\n            sel.collapse(el, 2);\n            sel.setStart(el.firstChild, 0);\n            trailingSpaceBeforeBlockCollapses = (\"\" + sel).length == 1;\n\n            dom.removeNode(el);\n            sel.removeAllRanges();\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // This function must create word and non-word tokens for the whole of the text supplied to it\n        function defaultTokenizer(chars, wordOptions) {\n            var word = chars.join(\"\"), result, tokenRanges = [];\n\n            function createTokenRange(start, end, isWord) {\n                tokenRanges.push( { start: start, end: end, isWord: isWord } );\n            }\n\n            // Match words and mark characters\n            var lastWordEnd = 0, wordStart, wordEnd;\n            while ( (result = wordOptions.wordRegex.exec(word)) ) {\n                wordStart = result.index;\n                wordEnd = wordStart + result[0].length;\n\n                // Create token for non-word characters preceding this word\n                if (wordStart > lastWordEnd) {\n                    createTokenRange(lastWordEnd, wordStart, false);\n                }\n\n                // Get trailing space characters for word\n                if (wordOptions.includeTrailingSpace) {\n                    while ( nonLineBreakWhiteSpaceRegex.test(chars[wordEnd]) ) {\n                        ++wordEnd;\n                    }\n                }\n                createTokenRange(wordStart, wordEnd, true);\n                lastWordEnd = wordEnd;\n            }\n\n            // Create token for trailing non-word characters, if any exist\n            if (lastWordEnd < chars.length) {\n                createTokenRange(lastWordEnd, chars.length, false);\n            }\n\n            return tokenRanges;\n        }\n\n        function convertCharRangeToToken(chars, tokenRange) {\n            var tokenChars = chars.slice(tokenRange.start, tokenRange.end);\n            var token = {\n                isWord: tokenRange.isWord,\n                chars: tokenChars,\n                toString: function() {\n                    return tokenChars.join(\"\");\n                }\n            };\n            for (var i = 0, len = tokenChars.length; i < len; ++i) {\n                tokenChars[i].token = token;\n            }\n            return token;\n        }\n\n        function tokenize(chars, wordOptions, tokenizer) {\n            var tokenRanges = tokenizer(chars, wordOptions);\n            var tokens = [];\n            for (var i = 0, tokenRange; tokenRange = tokenRanges[i++]; ) {\n                tokens.push( convertCharRangeToToken(chars, tokenRange) );\n            }\n            return tokens;\n        }\n\n        var defaultCharacterOptions = {\n            includeBlockContentTrailingSpace: true,\n            includeSpaceBeforeBr: true,\n            includeSpaceBeforeBlock: true,\n            includePreLineTrailingSpace: true,\n            ignoreCharacters: \"\"\n        };\n\n        function normalizeIgnoredCharacters(ignoredCharacters) {\n            // Check if character is ignored\n            var ignoredChars = ignoredCharacters || \"\";\n\n            // Normalize ignored characters into a string consisting of characters in ascending order of character code\n            var ignoredCharsArray = (typeof ignoredChars == \"string\") ? ignoredChars.split(\"\") : ignoredChars;\n            ignoredCharsArray.sort(function(char1, char2) {\n                return char1.charCodeAt(0) - char2.charCodeAt(0);\n            });\n\n            /// Convert back to a string and remove duplicates\n            return ignoredCharsArray.join(\"\").replace(/(.)\\1+/g, \"$1\");\n        }\n\n        var defaultCaretCharacterOptions = {\n            includeBlockContentTrailingSpace: !trailingSpaceBeforeLineBreakInPreLineCollapses,\n            includeSpaceBeforeBr: !trailingSpaceBeforeBrCollapses,\n            includeSpaceBeforeBlock: !trailingSpaceBeforeBlockCollapses,\n            includePreLineTrailingSpace: true\n        };\n\n        var defaultWordOptions = {\n            \"en\": {\n                wordRegex: /[a-z0-9]+('[a-z0-9]+)*/gi,\n                includeTrailingSpace: false,\n                tokenizer: defaultTokenizer\n            }\n        };\n\n        var defaultFindOptions = {\n            caseSensitive: false,\n            withinRange: null,\n            wholeWordsOnly: false,\n            wrap: false,\n            direction: \"forward\",\n            wordOptions: null,\n            characterOptions: null\n        };\n\n        var defaultMoveOptions = {\n            wordOptions: null,\n            characterOptions: null\n        };\n\n        var defaultExpandOptions = {\n            wordOptions: null,\n            characterOptions: null,\n            trim: false,\n            trimStart: true,\n            trimEnd: true\n        };\n\n        var defaultWordIteratorOptions = {\n            wordOptions: null,\n            characterOptions: null,\n            direction: \"forward\"\n        };\n\n        function createWordOptions(options) {\n            var lang, defaults;\n            if (!options) {\n                return defaultWordOptions[defaultLanguage];\n            } else {\n                lang = options.language || defaultLanguage;\n                defaults = {};\n                extend(defaults, defaultWordOptions[lang] || defaultWordOptions[defaultLanguage]);\n                extend(defaults, options);\n                return defaults;\n            }\n        }\n\n        function createNestedOptions(optionsParam, defaults) {\n            var options = createOptions(optionsParam, defaults);\n            if (defaults.hasOwnProperty(\"wordOptions\")) {\n                options.wordOptions = createWordOptions(options.wordOptions);\n            }\n            if (defaults.hasOwnProperty(\"characterOptions\")) {\n                options.characterOptions = createOptions(options.characterOptions, defaultCharacterOptions);\n            }\n            return options;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        /* DOM utility functions */\n        var getComputedStyleProperty = dom.getComputedStyleProperty;\n\n        // Create cachable versions of DOM functions\n\n        // Test for old IE's incorrect display properties\n        var tableCssDisplayBlock;\n        (function() {\n            var table = document.createElement(\"table\");\n            var body = getBody(document);\n            body.appendChild(table);\n            tableCssDisplayBlock = (getComputedStyleProperty(table, \"display\") == \"block\");\n            body.removeChild(table);\n        })();\n\n        var defaultDisplayValueForTag = {\n            table: \"table\",\n            caption: \"table-caption\",\n            colgroup: \"table-column-group\",\n            col: \"table-column\",\n            thead: \"table-header-group\",\n            tbody: \"table-row-group\",\n            tfoot: \"table-footer-group\",\n            tr: \"table-row\",\n            td: \"table-cell\",\n            th: \"table-cell\"\n        };\n\n        // Corrects IE's \"block\" value for table-related elements\n        function getComputedDisplay(el, win) {\n            var display = getComputedStyleProperty(el, \"display\", win);\n            var tagName = el.tagName.toLowerCase();\n            return (display == \"block\" &&\n                    tableCssDisplayBlock &&\n                    defaultDisplayValueForTag.hasOwnProperty(tagName)) ?\n                defaultDisplayValueForTag[tagName] : display;\n        }\n\n        function isHidden(node) {\n            var ancestors = getAncestorsAndSelf(node);\n            for (var i = 0, len = ancestors.length; i < len; ++i) {\n                if (ancestors[i].nodeType == 1 && getComputedDisplay(ancestors[i]) == \"none\") {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        function isVisibilityHiddenTextNode(textNode) {\n            var el;\n            return textNode.nodeType == 3 &&\n                (el = textNode.parentNode) &&\n                getComputedStyleProperty(el, \"visibility\") == \"hidden\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n    \n        // \"A block node is either an Element whose \"display\" property does not have\n        // resolved value \"inline\" or \"inline-block\" or \"inline-table\" or \"none\", or a\n        // Document, or a DocumentFragment.\"\n        function isBlockNode(node) {\n            return node &&\n                ((node.nodeType == 1 && !/^(inline(-block|-table)?|none)$/.test(getComputedDisplay(node))) ||\n                node.nodeType == 9 || node.nodeType == 11);\n        }\n\n        function getLastDescendantOrSelf(node) {\n            var lastChild = node.lastChild;\n            return lastChild ? getLastDescendantOrSelf(lastChild) : node;\n        }\n\n        function containsPositions(node) {\n            return dom.isCharacterDataNode(node) ||\n                !/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(node.nodeName);\n        }\n\n        function getAncestors(node) {\n            var ancestors = [];\n            while (node.parentNode) {\n                ancestors.unshift(node.parentNode);\n                node = node.parentNode;\n            }\n            return ancestors;\n        }\n\n        function getAncestorsAndSelf(node) {\n            return getAncestors(node).concat([node]);\n        }\n\n        function nextNodeDescendants(node) {\n            while (node && !node.nextSibling) {\n                node = node.parentNode;\n            }\n            if (!node) {\n                return null;\n            }\n            return node.nextSibling;\n        }\n\n        function nextNode(node, excludeChildren) {\n            if (!excludeChildren && node.hasChildNodes()) {\n                return node.firstChild;\n            }\n            return nextNodeDescendants(node);\n        }\n\n        function previousNode(node) {\n            var previous = node.previousSibling;\n            if (previous) {\n                node = previous;\n                while (node.hasChildNodes()) {\n                    node = node.lastChild;\n                }\n                return node;\n            }\n            var parent = node.parentNode;\n            if (parent && parent.nodeType == 1) {\n                return parent;\n            }\n            return null;\n        }\n\n        // Adpated from Aryeh's code.\n        // \"A whitespace node is either a Text node whose data is the empty string; or\n        // a Text node whose data consists only of one or more tabs (0x0009), line\n        // feeds (0x000A), carriage returns (0x000D), and/or spaces (0x0020), and whose\n        // parent is an Element whose resolved value for \"white-space\" is \"normal\" or\n        // \"nowrap\"; or a Text node whose data consists only of one or more tabs\n        // (0x0009), carriage returns (0x000D), and/or spaces (0x0020), and whose\n        // parent is an Element whose resolved value for \"white-space\" is \"pre-line\".\"\n        function isWhitespaceNode(node) {\n            if (!node || node.nodeType != 3) {\n                return false;\n            }\n            var text = node.data;\n            if (text === \"\") {\n                return true;\n            }\n            var parent = node.parentNode;\n            if (!parent || parent.nodeType != 1) {\n                return false;\n            }\n            var computedWhiteSpace = getComputedStyleProperty(node.parentNode, \"whiteSpace\");\n\n            return (/^[\\t\\n\\r ]+$/.test(text) && /^(normal|nowrap)$/.test(computedWhiteSpace)) ||\n                (/^[\\t\\r ]+$/.test(text) && computedWhiteSpace == \"pre-line\");\n        }\n\n        // Adpated from Aryeh's code.\n        // \"node is a collapsed whitespace node if the following algorithm returns\n        // true:\"\n        function isCollapsedWhitespaceNode(node) {\n            // \"If node's data is the empty string, return true.\"\n            if (node.data === \"\") {\n                return true;\n            }\n\n            // \"If node is not a whitespace node, return false.\"\n            if (!isWhitespaceNode(node)) {\n                return false;\n            }\n\n            // \"Let ancestor be node's parent.\"\n            var ancestor = node.parentNode;\n\n            // \"If ancestor is null, return true.\"\n            if (!ancestor) {\n                return true;\n            }\n\n            // \"If the \"display\" property of some ancestor of node has resolved value \"none\", return true.\"\n            if (isHidden(node)) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function isCollapsedNode(node) {\n            var type = node.nodeType;\n            return type == 7 /* PROCESSING_INSTRUCTION */ ||\n                type == 8 /* COMMENT */ ||\n                isHidden(node) ||\n                /^(script|style)$/i.test(node.nodeName) ||\n                isVisibilityHiddenTextNode(node) ||\n                isCollapsedWhitespaceNode(node);\n        }\n\n        function isIgnoredNode(node, win) {\n            var type = node.nodeType;\n            return type == 7 /* PROCESSING_INSTRUCTION */ ||\n                type == 8 /* COMMENT */ ||\n                (type == 1 && getComputedDisplay(node, win) == \"none\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Possibly overengineered caching system to prevent repeated DOM calls slowing everything down\n\n        function Cache() {\n            this.store = {};\n        }\n\n        Cache.prototype = {\n            get: function(key) {\n                return this.store.hasOwnProperty(key) ? this.store[key] : null;\n            },\n\n            set: function(key, value) {\n                return this.store[key] = value;\n            }\n        };\n\n        var cachedCount = 0, uncachedCount = 0;\n\n        function createCachingGetter(methodName, func, objProperty) {\n            return function(args) {\n                var cache = this.cache;\n                if (cache.hasOwnProperty(methodName)) {\n                    cachedCount++;\n                    return cache[methodName];\n                } else {\n                    uncachedCount++;\n                    var value = func.call(this, objProperty ? this[objProperty] : this, args);\n                    cache[methodName] = value;\n                    return value;\n                }\n            };\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function NodeWrapper(node, session) {\n            this.node = node;\n            this.session = session;\n            this.cache = new Cache();\n            this.positions = new Cache();\n        }\n\n        var nodeProto = {\n            getPosition: function(offset) {\n                var positions = this.positions;\n                return positions.get(offset) || positions.set(offset, new Position(this, offset));\n            },\n\n            toString: function() {\n                return \"[NodeWrapper(\" + dom.inspectNode(this.node) + \")]\";\n            }\n        };\n\n        NodeWrapper.prototype = nodeProto;\n\n        var EMPTY = \"EMPTY\",\n            NON_SPACE = \"NON_SPACE\",\n            UNCOLLAPSIBLE_SPACE = \"UNCOLLAPSIBLE_SPACE\",\n            COLLAPSIBLE_SPACE = \"COLLAPSIBLE_SPACE\",\n            TRAILING_SPACE_BEFORE_BLOCK = \"TRAILING_SPACE_BEFORE_BLOCK\",\n            TRAILING_SPACE_IN_BLOCK = \"TRAILING_SPACE_IN_BLOCK\",\n            TRAILING_SPACE_BEFORE_BR = \"TRAILING_SPACE_BEFORE_BR\",\n            PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK = \"PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK\",\n            TRAILING_LINE_BREAK_AFTER_BR = \"TRAILING_LINE_BREAK_AFTER_BR\",\n            INCLUDED_TRAILING_LINE_BREAK_AFTER_BR = \"INCLUDED_TRAILING_LINE_BREAK_AFTER_BR\";\n\n        extend(nodeProto, {\n            isCharacterDataNode: createCachingGetter(\"isCharacterDataNode\", dom.isCharacterDataNode, \"node\"),\n            getNodeIndex: createCachingGetter(\"nodeIndex\", dom.getNodeIndex, \"node\"),\n            getLength: createCachingGetter(\"nodeLength\", dom.getNodeLength, \"node\"),\n            containsPositions: createCachingGetter(\"containsPositions\", containsPositions, \"node\"),\n            isWhitespace: createCachingGetter(\"isWhitespace\", isWhitespaceNode, \"node\"),\n            isCollapsedWhitespace: createCachingGetter(\"isCollapsedWhitespace\", isCollapsedWhitespaceNode, \"node\"),\n            getComputedDisplay: createCachingGetter(\"computedDisplay\", getComputedDisplay, \"node\"),\n            isCollapsed: createCachingGetter(\"collapsed\", isCollapsedNode, \"node\"),\n            isIgnored: createCachingGetter(\"ignored\", isIgnoredNode, \"node\"),\n            next: createCachingGetter(\"nextPos\", nextNode, \"node\"),\n            previous: createCachingGetter(\"previous\", previousNode, \"node\"),\n\n            getTextNodeInfo: createCachingGetter(\"textNodeInfo\", function(textNode) {\n                var spaceRegex = null, collapseSpaces = false;\n                var cssWhitespace = getComputedStyleProperty(textNode.parentNode, \"whiteSpace\");\n                var preLine = (cssWhitespace == \"pre-line\");\n                if (preLine) {\n                    spaceRegex = spacesMinusLineBreaksRegex;\n                    collapseSpaces = true;\n                } else if (cssWhitespace == \"normal\" || cssWhitespace == \"nowrap\") {\n                    spaceRegex = spacesRegex;\n                    collapseSpaces = true;\n                }\n\n                return {\n                    node: textNode,\n                    text: textNode.data,\n                    spaceRegex: spaceRegex,\n                    collapseSpaces: collapseSpaces,\n                    preLine: preLine\n                };\n            }, \"node\"),\n\n            hasInnerText: createCachingGetter(\"hasInnerText\", function(el, backward) {\n                var session = this.session;\n                var posAfterEl = session.getPosition(el.parentNode, this.getNodeIndex() + 1);\n                var firstPosInEl = session.getPosition(el, 0);\n\n                var pos = backward ? posAfterEl : firstPosInEl;\n                var endPos = backward ? firstPosInEl : posAfterEl;\n\n                /*\n                 <body><p>X  </p><p>Y</p></body>\n\n                 Positions:\n\n                 body:0:\"\"\n                 p:0:\"\"\n                 text:0:\"\"\n                 text:1:\"X\"\n                 text:2:TRAILING_SPACE_IN_BLOCK\n                 text:3:COLLAPSED_SPACE\n                 p:1:\"\"\n                 body:1:\"\\n\"\n                 p:0:\"\"\n                 text:0:\"\"\n                 text:1:\"Y\"\n\n                 A character is a TRAILING_SPACE_IN_BLOCK iff:\n\n                 - There is no uncollapsed character after it within the visible containing block element\n\n                 A character is a TRAILING_SPACE_BEFORE_BR iff:\n\n                 - There is no uncollapsed character after it preceding a <br> element\n\n                 An element has inner text iff\n\n                 - It is not hidden\n                 - It contains an uncollapsed character\n\n                 All trailing spaces (pre-line, before <br>, end of block) require definite non-empty characters to render.\n                 */\n\n                while (pos !== endPos) {\n                    pos.prepopulateChar();\n                    if (pos.isDefinitelyNonEmpty()) {\n                        return true;\n                    }\n                    pos = backward ? pos.previousVisible() : pos.nextVisible();\n                }\n\n                return false;\n            }, \"node\"),\n\n            isRenderedBlock: createCachingGetter(\"isRenderedBlock\", function(el) {\n                // Ensure that a block element containing a <br> is considered to have inner text\n                var brs = el.getElementsByTagName(\"br\");\n                for (var i = 0, len = brs.length; i < len; ++i) {\n                    if (!isCollapsedNode(brs[i])) {\n                        return true;\n                    }\n                }\n                return this.hasInnerText();\n            }, \"node\"),\n\n            getTrailingSpace: createCachingGetter(\"trailingSpace\", function(el) {\n                if (el.tagName.toLowerCase() == \"br\") {\n                    return \"\";\n                } else {\n                    switch (this.getComputedDisplay()) {\n                        case \"inline\":\n                            var child = el.lastChild;\n                            while (child) {\n                                if (!isIgnoredNode(child)) {\n                                    return (child.nodeType == 1) ? this.session.getNodeWrapper(child).getTrailingSpace() : \"\";\n                                }\n                                child = child.previousSibling;\n                            }\n                            break;\n                        case \"inline-block\":\n                        case \"inline-table\":\n                        case \"none\":\n                        case \"table-column\":\n                        case \"table-column-group\":\n                            break;\n                        case \"table-cell\":\n                            return \"\\t\";\n                        default:\n                            return this.isRenderedBlock(true) ? \"\\n\" : \"\";\n                    }\n                }\n                return \"\";\n            }, \"node\"),\n\n            getLeadingSpace: createCachingGetter(\"leadingSpace\", function(el) {\n                switch (this.getComputedDisplay()) {\n                    case \"inline\":\n                    case \"inline-block\":\n                    case \"inline-table\":\n                    case \"none\":\n                    case \"table-column\":\n                    case \"table-column-group\":\n                    case \"table-cell\":\n                        break;\n                    default:\n                        return this.isRenderedBlock(false) ? \"\\n\" : \"\";\n                }\n                return \"\";\n            }, \"node\")\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function Position(nodeWrapper, offset) {\n            this.offset = offset;\n            this.nodeWrapper = nodeWrapper;\n            this.node = nodeWrapper.node;\n            this.session = nodeWrapper.session;\n            this.cache = new Cache();\n        }\n\n        function inspectPosition() {\n            return \"[Position(\" + dom.inspectNode(this.node) + \":\" + this.offset + \")]\";\n        }\n\n        var positionProto = {\n            character: \"\",\n            characterType: EMPTY,\n            isBr: false,\n\n            /*\n            This method:\n            - Fully populates positions that have characters that can be determined independently of any other characters.\n            - Populates most types of space positions with a provisional character. The character is finalized later.\n             */\n            prepopulateChar: function() {\n                var pos = this;\n                if (!pos.prepopulatedChar) {\n                    var node = pos.node, offset = pos.offset;\n                    var visibleChar = \"\", charType = EMPTY;\n                    var finalizedChar = false;\n                    if (offset > 0) {\n                        if (node.nodeType == 3) {\n                            var text = node.data;\n                            var textChar = text.charAt(offset - 1);\n\n                            var nodeInfo = pos.nodeWrapper.getTextNodeInfo();\n                            var spaceRegex = nodeInfo.spaceRegex;\n                            if (nodeInfo.collapseSpaces) {\n                                if (spaceRegex.test(textChar)) {\n                                    // \"If the character at position is from set, append a single space (U+0020) to newdata and advance\n                                    // position until the character at position is not from set.\"\n\n                                    // We also need to check for the case where we're in a pre-line and we have a space preceding a\n                                    // line break, because such spaces are collapsed in some browsers\n                                    if (offset > 1 && spaceRegex.test(text.charAt(offset - 2))) {\n                                    } else if (nodeInfo.preLine && text.charAt(offset) === \"\\n\") {\n                                        visibleChar = \" \";\n                                        charType = PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK;\n                                    } else {\n                                        visibleChar = \" \";\n                                        //pos.checkForFollowingLineBreak = true;\n                                        charType = COLLAPSIBLE_SPACE;\n                                    }\n                                } else {\n                                    visibleChar = textChar;\n                                    charType = NON_SPACE;\n                                    finalizedChar = true;\n                                }\n                            } else {\n                                visibleChar = textChar;\n                                charType = UNCOLLAPSIBLE_SPACE;\n                                finalizedChar = true;\n                            }\n                        } else {\n                            var nodePassed = node.childNodes[offset - 1];\n                            if (nodePassed && nodePassed.nodeType == 1 && !isCollapsedNode(nodePassed)) {\n                                if (nodePassed.tagName.toLowerCase() == \"br\") {\n                                    visibleChar = \"\\n\";\n                                    pos.isBr = true;\n                                    charType = COLLAPSIBLE_SPACE;\n                                    finalizedChar = false;\n                                } else {\n                                    pos.checkForTrailingSpace = true;\n                                }\n                            }\n\n                            // Check the leading space of the next node for the case when a block element follows an inline\n                            // element or text node. In that case, there is an implied line break between the two nodes.\n                            if (!visibleChar) {\n                                var nextNode = node.childNodes[offset];\n                                if (nextNode && nextNode.nodeType == 1 && !isCollapsedNode(nextNode)) {\n                                    pos.checkForLeadingSpace = true;\n                                }\n                            }\n                        }\n                    }\n\n                    pos.prepopulatedChar = true;\n                    pos.character = visibleChar;\n                    pos.characterType = charType;\n                    pos.isCharInvariant = finalizedChar;\n                }\n            },\n\n            isDefinitelyNonEmpty: function() {\n                var charType = this.characterType;\n                return charType == NON_SPACE || charType == UNCOLLAPSIBLE_SPACE;\n            },\n\n            // Resolve leading and trailing spaces, which may involve prepopulating other positions\n            resolveLeadingAndTrailingSpaces: function() {\n                if (!this.prepopulatedChar) {\n                    this.prepopulateChar();\n                }\n                if (this.checkForTrailingSpace) {\n                    var trailingSpace = this.session.getNodeWrapper(this.node.childNodes[this.offset - 1]).getTrailingSpace();\n                    if (trailingSpace) {\n                        this.isTrailingSpace = true;\n                        this.character = trailingSpace;\n                        this.characterType = COLLAPSIBLE_SPACE;\n                    }\n                    this.checkForTrailingSpace = false;\n                }\n                if (this.checkForLeadingSpace) {\n                    var leadingSpace = this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();\n                    if (leadingSpace) {\n                        this.isLeadingSpace = true;\n                        this.character = leadingSpace;\n                        this.characterType = COLLAPSIBLE_SPACE;\n                    }\n                    this.checkForLeadingSpace = false;\n                }\n            },\n\n            getPrecedingUncollapsedPosition: function(characterOptions) {\n                var pos = this, character;\n                while ( (pos = pos.previousVisible()) ) {\n                    character = pos.getCharacter(characterOptions);\n                    if (character !== \"\") {\n                        return pos;\n                    }\n                }\n\n                return null;\n            },\n\n            getCharacter: function(characterOptions) {\n                this.resolveLeadingAndTrailingSpaces();\n\n                var thisChar = this.character, returnChar;\n\n                // Check if character is ignored\n                var ignoredChars = normalizeIgnoredCharacters(characterOptions.ignoreCharacters);\n                var isIgnoredCharacter = (thisChar !== \"\" && ignoredChars.indexOf(thisChar) > -1);\n\n                // Check if this position's  character is invariant (i.e. not dependent on character options) and return it\n                // if so\n                if (this.isCharInvariant) {\n                    returnChar = isIgnoredCharacter ? \"\" : thisChar;\n                    return returnChar;\n                }\n\n                var cacheKey = [\"character\", characterOptions.includeSpaceBeforeBr, characterOptions.includeBlockContentTrailingSpace, characterOptions.includePreLineTrailingSpace, ignoredChars].join(\"_\");\n                var cachedChar = this.cache.get(cacheKey);\n                if (cachedChar !== null) {\n                    return cachedChar;\n                }\n\n                // We need to actually get the character now\n                var character = \"\";\n                var collapsible = (this.characterType == COLLAPSIBLE_SPACE);\n\n                var nextPos, previousPos;\n                var gotPreviousPos = false;\n                var pos = this;\n\n                function getPreviousPos() {\n                    if (!gotPreviousPos) {\n                        previousPos = pos.getPrecedingUncollapsedPosition(characterOptions);\n                        gotPreviousPos = true;\n                    }\n                    return previousPos;\n                }\n\n                // Disallow a collapsible space that is followed by a line break or is the last character\n                if (collapsible) {\n                    // Allow a trailing space that we've previously determined should be included\n                    if (this.type == INCLUDED_TRAILING_LINE_BREAK_AFTER_BR) {\n                        character = \"\\n\";\n                    }\n                    // Disallow a collapsible space that follows a trailing space or line break, or is the first character,\n                    // or follows a collapsible included space\n                    else if (thisChar == \" \" &&\n                            (!getPreviousPos() || previousPos.isTrailingSpace || previousPos.character == \"\\n\" || (previousPos.character == \" \" && previousPos.characterType == COLLAPSIBLE_SPACE))) {\n                    }\n                    // Allow a leading line break unless it follows a line break\n                    else if (thisChar == \"\\n\" && this.isLeadingSpace) {\n                        if (getPreviousPos() && previousPos.character != \"\\n\") {\n                            character = \"\\n\";\n                        } else {\n                        }\n                    } else {\n                        nextPos = this.nextUncollapsed();\n                        if (nextPos) {\n                            if (nextPos.isBr) {\n                                this.type = TRAILING_SPACE_BEFORE_BR;\n                            } else if (nextPos.isTrailingSpace && nextPos.character == \"\\n\") {\n                                this.type = TRAILING_SPACE_IN_BLOCK;\n                            } else if (nextPos.isLeadingSpace && nextPos.character == \"\\n\") {\n                                this.type = TRAILING_SPACE_BEFORE_BLOCK;\n                            }\n\n                            if (nextPos.character == \"\\n\") {\n                                if (this.type == TRAILING_SPACE_BEFORE_BR && !characterOptions.includeSpaceBeforeBr) {\n                                } else if (this.type == TRAILING_SPACE_BEFORE_BLOCK && !characterOptions.includeSpaceBeforeBlock) {\n                                } else if (this.type == TRAILING_SPACE_IN_BLOCK && nextPos.isTrailingSpace && !characterOptions.includeBlockContentTrailingSpace) {\n                                } else if (this.type == PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK && nextPos.type == NON_SPACE && !characterOptions.includePreLineTrailingSpace) {\n                                } else if (thisChar == \"\\n\") {\n                                    if (nextPos.isTrailingSpace) {\n                                        if (this.isTrailingSpace) {\n                                        } else if (this.isBr) {\n                                            nextPos.type = TRAILING_LINE_BREAK_AFTER_BR;\n\n                                            if (getPreviousPos() && previousPos.isLeadingSpace && !previousPos.isTrailingSpace && previousPos.character == \"\\n\") {\n                                                nextPos.character = \"\";\n                                            } else {\n                                                nextPos.type = INCLUDED_TRAILING_LINE_BREAK_AFTER_BR;\n                                            }\n                                        }\n                                    } else {\n                                        character = \"\\n\";\n                                    }\n                                } else if (thisChar == \" \") {\n                                    character = \" \";\n                                } else {\n                                }\n                            } else {\n                                character = thisChar;\n                            }\n                        } else {\n                        }\n                    }\n                }\n\n                if (ignoredChars.indexOf(character) > -1) {\n                    character = \"\";\n                }\n\n\n                this.cache.set(cacheKey, character);\n\n                return character;\n            },\n\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset === pos.offset;\n            },\n\n            inspect: inspectPosition,\n\n            toString: function() {\n                return this.character;\n            }\n        };\n\n        Position.prototype = positionProto;\n\n        extend(positionProto, {\n            next: createCachingGetter(\"nextPos\", function(pos) {\n                var nodeWrapper = pos.nodeWrapper, node = pos.node, offset = pos.offset, session = nodeWrapper.session;\n                if (!node) {\n                    return null;\n                }\n                var nextNode, nextOffset, child;\n                if (offset == nodeWrapper.getLength()) {\n                    // Move onto the next node\n                    nextNode = node.parentNode;\n                    nextOffset = nextNode ? nodeWrapper.getNodeIndex() + 1 : 0;\n                } else {\n                    if (nodeWrapper.isCharacterDataNode()) {\n                        nextNode = node;\n                        nextOffset = offset + 1;\n                    } else {\n                        child = node.childNodes[offset];\n                        // Go into the children next, if children there are\n                        if (session.getNodeWrapper(child).containsPositions()) {\n                            nextNode = child;\n                            nextOffset = 0;\n                        } else {\n                            nextNode = node;\n                            nextOffset = offset + 1;\n                        }\n                    }\n                }\n\n                return nextNode ? session.getPosition(nextNode, nextOffset) : null;\n            }),\n\n            previous: createCachingGetter(\"previous\", function(pos) {\n                var nodeWrapper = pos.nodeWrapper, node = pos.node, offset = pos.offset, session = nodeWrapper.session;\n                var previousNode, previousOffset, child;\n                if (offset == 0) {\n                    previousNode = node.parentNode;\n                    previousOffset = previousNode ? nodeWrapper.getNodeIndex() : 0;\n                } else {\n                    if (nodeWrapper.isCharacterDataNode()) {\n                        previousNode = node;\n                        previousOffset = offset - 1;\n                    } else {\n                        child = node.childNodes[offset - 1];\n                        // Go into the children next, if children there are\n                        if (session.getNodeWrapper(child).containsPositions()) {\n                            previousNode = child;\n                            previousOffset = dom.getNodeLength(child);\n                        } else {\n                            previousNode = node;\n                            previousOffset = offset - 1;\n                        }\n                    }\n                }\n                return previousNode ? session.getPosition(previousNode, previousOffset) : null;\n            }),\n\n            /*\n             Next and previous position moving functions that filter out\n\n             - Hidden (CSS visibility/display) elements\n             - Script and style elements\n             */\n            nextVisible: createCachingGetter(\"nextVisible\", function(pos) {\n                var next = pos.next();\n                if (!next) {\n                    return null;\n                }\n                var nodeWrapper = next.nodeWrapper, node = next.node;\n                var newPos = next;\n                if (nodeWrapper.isCollapsed()) {\n                    // We're skipping this node and all its descendants\n                    newPos = nodeWrapper.session.getPosition(node.parentNode, nodeWrapper.getNodeIndex() + 1);\n                }\n                return newPos;\n            }),\n\n            nextUncollapsed: createCachingGetter(\"nextUncollapsed\", function(pos) {\n                var nextPos = pos;\n                while ( (nextPos = nextPos.nextVisible()) ) {\n                    nextPos.resolveLeadingAndTrailingSpaces();\n                    if (nextPos.character !== \"\") {\n                        return nextPos;\n                    }\n                }\n                return null;\n            }),\n\n            previousVisible: createCachingGetter(\"previousVisible\", function(pos) {\n                var previous = pos.previous();\n                if (!previous) {\n                    return null;\n                }\n                var nodeWrapper = previous.nodeWrapper, node = previous.node;\n                var newPos = previous;\n                if (nodeWrapper.isCollapsed()) {\n                    // We're skipping this node and all its descendants\n                    newPos = nodeWrapper.session.getPosition(node.parentNode, nodeWrapper.getNodeIndex());\n                }\n                return newPos;\n            })\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var currentSession = null;\n\n        var Session = (function() {\n            function createWrapperCache(nodeProperty) {\n                var cache = new Cache();\n\n                return {\n                    get: function(node) {\n                        var wrappersByProperty = cache.get(node[nodeProperty]);\n                        if (wrappersByProperty) {\n                            for (var i = 0, wrapper; wrapper = wrappersByProperty[i++]; ) {\n                                if (wrapper.node === node) {\n                                    return wrapper;\n                                }\n                            }\n                        }\n                        return null;\n                    },\n\n                    set: function(nodeWrapper) {\n                        var property = nodeWrapper.node[nodeProperty];\n                        var wrappersByProperty = cache.get(property) || cache.set(property, []);\n                        wrappersByProperty.push(nodeWrapper);\n                    }\n                };\n            }\n\n            var uniqueIDSupported = util.isHostProperty(document.documentElement, \"uniqueID\");\n\n            function Session() {\n                this.initCaches();\n            }\n\n            Session.prototype = {\n                initCaches: function() {\n                    this.elementCache = uniqueIDSupported ? (function() {\n                        var elementsCache = new Cache();\n\n                        return {\n                            get: function(el) {\n                                return elementsCache.get(el.uniqueID);\n                            },\n\n                            set: function(elWrapper) {\n                                elementsCache.set(elWrapper.node.uniqueID, elWrapper);\n                            }\n                        };\n                    })() : createWrapperCache(\"tagName\");\n\n                    // Store text nodes keyed by data, although we may need to truncate this\n                    this.textNodeCache = createWrapperCache(\"data\");\n                    this.otherNodeCache = createWrapperCache(\"nodeName\");\n                },\n\n                getNodeWrapper: function(node) {\n                    var wrapperCache;\n                    switch (node.nodeType) {\n                        case 1:\n                            wrapperCache = this.elementCache;\n                            break;\n                        case 3:\n                            wrapperCache = this.textNodeCache;\n                            break;\n                        default:\n                            wrapperCache = this.otherNodeCache;\n                            break;\n                    }\n\n                    var wrapper = wrapperCache.get(node);\n                    if (!wrapper) {\n                        wrapper = new NodeWrapper(node, this);\n                        wrapperCache.set(wrapper);\n                    }\n                    return wrapper;\n                },\n\n                getPosition: function(node, offset) {\n                    return this.getNodeWrapper(node).getPosition(offset);\n                },\n\n                getRangeBoundaryPosition: function(range, isStart) {\n                    var prefix = isStart ? \"start\" : \"end\";\n                    return this.getPosition(range[prefix + \"Container\"], range[prefix + \"Offset\"]);\n                },\n\n                detach: function() {\n                    this.elementCache = this.textNodeCache = this.otherNodeCache = null;\n                }\n            };\n\n            return Session;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function startSession() {\n            endSession();\n            return (currentSession = new Session());\n        }\n\n        function getSession() {\n            return currentSession || startSession();\n        }\n\n        function endSession() {\n            if (currentSession) {\n                currentSession.detach();\n            }\n            currentSession = null;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the rangy.dom utility object\n\n        extend(dom, {\n            nextNode: nextNode,\n            previousNode: previousNode\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function createCharacterIterator(startPos, backward, endPos, characterOptions) {\n\n            // Adjust the end position to ensure that it is actually reached\n            if (endPos) {\n                if (backward) {\n                    if (isCollapsedNode(endPos.node)) {\n                        endPos = startPos.previousVisible();\n                    }\n                } else {\n                    if (isCollapsedNode(endPos.node)) {\n                        endPos = endPos.nextVisible();\n                    }\n                }\n            }\n\n            var pos = startPos, finished = false;\n\n            function next() {\n                var charPos = null;\n                if (backward) {\n                    charPos = pos;\n                    if (!finished) {\n                        pos = pos.previousVisible();\n                        finished = !pos || (endPos && pos.equals(endPos));\n                    }\n                } else {\n                    if (!finished) {\n                        charPos = pos = pos.nextVisible();\n                        finished = !pos || (endPos && pos.equals(endPos));\n                    }\n                }\n                if (finished) {\n                    pos = null;\n                }\n                return charPos;\n            }\n\n            var previousTextPos, returnPreviousTextPos = false;\n\n            return {\n                next: function() {\n                    if (returnPreviousTextPos) {\n                        returnPreviousTextPos = false;\n                        return previousTextPos;\n                    } else {\n                        var pos, character;\n                        while ( (pos = next()) ) {\n                            character = pos.getCharacter(characterOptions);\n                            if (character) {\n                                previousTextPos = pos;\n                                return pos;\n                            }\n                        }\n                        return null;\n                    }\n                },\n\n                rewind: function() {\n                    if (previousTextPos) {\n                        returnPreviousTextPos = true;\n                    } else {\n                        throw module.createError(\"createCharacterIterator: cannot rewind. Only one position can be rewound.\");\n                    }\n                },\n\n                dispose: function() {\n                    startPos = endPos = null;\n                }\n            };\n        }\n\n        var arrayIndexOf = Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val);\n            } :\n            function(arr, val) {\n                for (var i = 0, len = arr.length; i < len; ++i) {\n                    if (arr[i] === val) {\n                        return i;\n                    }\n                }\n                return -1;\n            };\n\n        // Provides a pair of iterators over text positions, tokenized. Transparently requests more text when next()\n        // is called and there is no more tokenized text\n        function createTokenizedTextProvider(pos, characterOptions, wordOptions) {\n            var forwardIterator = createCharacterIterator(pos, false, null, characterOptions);\n            var backwardIterator = createCharacterIterator(pos, true, null, characterOptions);\n            var tokenizer = wordOptions.tokenizer;\n\n            // Consumes a word and the whitespace beyond it\n            function consumeWord(forward) {\n                var pos, textChar;\n                var newChars = [], it = forward ? forwardIterator : backwardIterator;\n\n                var passedWordBoundary = false, insideWord = false;\n\n                while ( (pos = it.next()) ) {\n                    textChar = pos.character;\n\n\n                    if (allWhiteSpaceRegex.test(textChar)) {\n                        if (insideWord) {\n                            insideWord = false;\n                            passedWordBoundary = true;\n                        }\n                    } else {\n                        if (passedWordBoundary) {\n                            it.rewind();\n                            break;\n                        } else {\n                            insideWord = true;\n                        }\n                    }\n                    newChars.push(pos);\n                }\n\n\n                return newChars;\n            }\n\n            // Get initial word surrounding initial position and tokenize it\n            var forwardChars = consumeWord(true);\n            var backwardChars = consumeWord(false).reverse();\n            var tokens = tokenize(backwardChars.concat(forwardChars), wordOptions, tokenizer);\n\n            // Create initial token buffers\n            var forwardTokensBuffer = forwardChars.length ?\n                tokens.slice(arrayIndexOf(tokens, forwardChars[0].token)) : [];\n\n            var backwardTokensBuffer = backwardChars.length ?\n                tokens.slice(0, arrayIndexOf(tokens, backwardChars.pop().token) + 1) : [];\n\n            function inspectBuffer(buffer) {\n                var textPositions = [\"[\" + buffer.length + \"]\"];\n                for (var i = 0; i < buffer.length; ++i) {\n                    textPositions.push(\"(word: \" + buffer[i] + \", is word: \" + buffer[i].isWord + \")\");\n                }\n                return textPositions;\n            }\n\n\n            return {\n                nextEndToken: function() {\n                    var lastToken, forwardChars;\n\n                    // If we're down to the last token, consume character chunks until we have a word or run out of\n                    // characters to consume\n                    while ( forwardTokensBuffer.length == 1 &&\n                        !(lastToken = forwardTokensBuffer[0]).isWord &&\n                        (forwardChars = consumeWord(true)).length > 0) {\n\n                        // Merge trailing non-word into next word and tokenize\n                        forwardTokensBuffer = tokenize(lastToken.chars.concat(forwardChars), wordOptions, tokenizer);\n                    }\n\n                    return forwardTokensBuffer.shift();\n                },\n\n                previousStartToken: function() {\n                    var lastToken, backwardChars;\n\n                    // If we're down to the last token, consume character chunks until we have a word or run out of\n                    // characters to consume\n                    while ( backwardTokensBuffer.length == 1 &&\n                        !(lastToken = backwardTokensBuffer[0]).isWord &&\n                        (backwardChars = consumeWord(false)).length > 0) {\n\n                        // Merge leading non-word into next word and tokenize\n                        backwardTokensBuffer = tokenize(backwardChars.reverse().concat(lastToken.chars), wordOptions, tokenizer);\n                    }\n\n                    return backwardTokensBuffer.pop();\n                },\n\n                dispose: function() {\n                    forwardIterator.dispose();\n                    backwardIterator.dispose();\n                    forwardTokensBuffer = backwardTokensBuffer = null;\n                }\n            };\n        }\n\n        function movePositionBy(pos, unit, count, characterOptions, wordOptions) {\n            var unitsMoved = 0, currentPos, newPos = pos, charIterator, nextPos, absCount = Math.abs(count), token;\n            if (count !== 0) {\n                var backward = (count < 0);\n\n                switch (unit) {\n                    case CHARACTER:\n                        charIterator = createCharacterIterator(pos, backward, null, characterOptions);\n                        while ( (currentPos = charIterator.next()) && unitsMoved < absCount ) {\n                            ++unitsMoved;\n                            newPos = currentPos;\n                        }\n                        nextPos = currentPos;\n                        charIterator.dispose();\n                        break;\n                    case WORD:\n                        var tokenizedTextProvider = createTokenizedTextProvider(pos, characterOptions, wordOptions);\n                        var next = backward ? tokenizedTextProvider.previousStartToken : tokenizedTextProvider.nextEndToken;\n\n                        while ( (token = next()) && unitsMoved < absCount ) {\n                            if (token.isWord) {\n                                ++unitsMoved;\n                                newPos = backward ? token.chars[0] : token.chars[token.chars.length - 1];\n                            }\n                        }\n                        break;\n                    default:\n                        throw new Error(\"movePositionBy: unit '\" + unit + \"' not implemented\");\n                }\n\n                // Perform any necessary position tweaks\n                if (backward) {\n                    newPos = newPos.previousVisible();\n                    unitsMoved = -unitsMoved;\n                } else if (newPos && newPos.isLeadingSpace && !newPos.isTrailingSpace) {\n                    // Tweak the position for the case of a leading space. The problem is that an uncollapsed leading space\n                    // before a block element (for example, the line break between \"1\" and \"2\" in the following HTML:\n                    // \"1<p>2</p>\") is considered to be attached to the position immediately before the block element, which\n                    // corresponds with a different selection position in most browsers from the one we want (i.e. at the\n                    // start of the contents of the block element). We get round this by advancing the position returned to\n                    // the last possible equivalent visible position.\n                    if (unit == WORD) {\n                        charIterator = createCharacterIterator(pos, false, null, characterOptions);\n                        nextPos = charIterator.next();\n                        charIterator.dispose();\n                    }\n                    if (nextPos) {\n                        newPos = nextPos.previousVisible();\n                    }\n                }\n            }\n\n\n            return {\n                position: newPos,\n                unitsMoved: unitsMoved\n            };\n        }\n\n        function createRangeCharacterIterator(session, range, characterOptions, backward) {\n            var rangeStart = session.getRangeBoundaryPosition(range, true);\n            var rangeEnd = session.getRangeBoundaryPosition(range, false);\n            var itStart = backward ? rangeEnd : rangeStart;\n            var itEnd = backward ? rangeStart : rangeEnd;\n\n            return createCharacterIterator(itStart, !!backward, itEnd, characterOptions);\n        }\n\n        function getRangeCharacters(session, range, characterOptions) {\n\n            var chars = [], it = createRangeCharacterIterator(session, range, characterOptions), pos;\n            while ( (pos = it.next()) ) {\n                chars.push(pos);\n            }\n\n            it.dispose();\n            return chars;\n        }\n\n        function isWholeWord(startPos, endPos, wordOptions) {\n            var range = api.createRange(startPos.node);\n            range.setStartAndEnd(startPos.node, startPos.offset, endPos.node, endPos.offset);\n            return !range.expand(\"word\", { wordOptions: wordOptions });\n        }\n\n        function findTextFromPosition(initialPos, searchTerm, isRegex, searchScopeRange, findOptions) {\n            var backward = isDirectionBackward(findOptions.direction);\n            var it = createCharacterIterator(\n                initialPos,\n                backward,\n                initialPos.session.getRangeBoundaryPosition(searchScopeRange, backward),\n                findOptions.characterOptions\n            );\n            var text = \"\", chars = [], pos, currentChar, matchStartIndex, matchEndIndex;\n            var result, insideRegexMatch;\n            var returnValue = null;\n\n            function handleMatch(startIndex, endIndex) {\n                var startPos = chars[startIndex].previousVisible();\n                var endPos = chars[endIndex - 1];\n                var valid = (!findOptions.wholeWordsOnly || isWholeWord(startPos, endPos, findOptions.wordOptions));\n\n                return {\n                    startPos: startPos,\n                    endPos: endPos,\n                    valid: valid\n                };\n            }\n\n            while ( (pos = it.next()) ) {\n                currentChar = pos.character;\n                if (!isRegex && !findOptions.caseSensitive) {\n                    currentChar = currentChar.toLowerCase();\n                }\n\n                if (backward) {\n                    chars.unshift(pos);\n                    text = currentChar + text;\n                } else {\n                    chars.push(pos);\n                    text += currentChar;\n                }\n\n                if (isRegex) {\n                    result = searchTerm.exec(text);\n                    if (result) {\n                        matchStartIndex = result.index;\n                        matchEndIndex = matchStartIndex + result[0].length;\n                        if (insideRegexMatch) {\n                            // Check whether the match is now over\n                            if ((!backward && matchEndIndex < text.length) || (backward && matchStartIndex > 0)) {\n                                returnValue = handleMatch(matchStartIndex, matchEndIndex);\n                                break;\n                            }\n                        } else {\n                            insideRegexMatch = true;\n                        }\n                    }\n                } else if ( (matchStartIndex = text.indexOf(searchTerm)) != -1 ) {\n                    returnValue = handleMatch(matchStartIndex, matchStartIndex + searchTerm.length);\n                    break;\n                }\n            }\n\n            // Check whether regex match extends to the end of the range\n            if (insideRegexMatch) {\n                returnValue = handleMatch(matchStartIndex, matchEndIndex);\n            }\n            it.dispose();\n\n            return returnValue;\n        }\n\n        function createEntryPointFunction(func) {\n            return function() {\n                var sessionRunning = !!currentSession;\n                var session = getSession();\n                var args = [session].concat( util.toArray(arguments) );\n                var returnValue = func.apply(this, args);\n                if (!sessionRunning) {\n                    endSession();\n                }\n                return returnValue;\n            };\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the Rangy Range object\n\n        function createRangeBoundaryMover(isStart, collapse) {\n            /*\n             Unit can be \"character\" or \"word\"\n             Options:\n\n             - includeTrailingSpace\n             - wordRegex\n             - tokenizer\n             - collapseSpaceBeforeLineBreak\n             */\n            return createEntryPointFunction(\n                function(session, unit, count, moveOptions) {\n                    if (typeof count == UNDEF) {\n                        count = unit;\n                        unit = CHARACTER;\n                    }\n                    moveOptions = createNestedOptions(moveOptions, defaultMoveOptions);\n\n                    var boundaryIsStart = isStart;\n                    if (collapse) {\n                        boundaryIsStart = (count >= 0);\n                        this.collapse(!boundaryIsStart);\n                    }\n                    var moveResult = movePositionBy(session.getRangeBoundaryPosition(this, boundaryIsStart), unit, count, moveOptions.characterOptions, moveOptions.wordOptions);\n                    var newPos = moveResult.position;\n                    this[boundaryIsStart ? \"setStart\" : \"setEnd\"](newPos.node, newPos.offset);\n                    return moveResult.unitsMoved;\n                }\n            );\n        }\n\n        function createRangeTrimmer(isStart) {\n            return createEntryPointFunction(\n                function(session, characterOptions) {\n                    characterOptions = createOptions(characterOptions, defaultCharacterOptions);\n                    var pos;\n                    var it = createRangeCharacterIterator(session, this, characterOptions, !isStart);\n                    var trimCharCount = 0;\n                    while ( (pos = it.next()) && allWhiteSpaceRegex.test(pos.character) ) {\n                        ++trimCharCount;\n                    }\n                    it.dispose();\n                    var trimmed = (trimCharCount > 0);\n                    if (trimmed) {\n                        this[isStart ? \"moveStart\" : \"moveEnd\"](\n                            \"character\",\n                            isStart ? trimCharCount : -trimCharCount,\n                            { characterOptions: characterOptions }\n                        );\n                    }\n                    return trimmed;\n                }\n            );\n        }\n\n        extend(api.rangePrototype, {\n            moveStart: createRangeBoundaryMover(true, false),\n\n            moveEnd: createRangeBoundaryMover(false, false),\n\n            move: createRangeBoundaryMover(true, true),\n\n            trimStart: createRangeTrimmer(true),\n\n            trimEnd: createRangeTrimmer(false),\n\n            trim: createEntryPointFunction(\n                function(session, characterOptions) {\n                    var startTrimmed = this.trimStart(characterOptions), endTrimmed = this.trimEnd(characterOptions);\n                    return startTrimmed || endTrimmed;\n                }\n            ),\n\n            expand: createEntryPointFunction(\n                function(session, unit, expandOptions) {\n                    var moved = false;\n                    expandOptions = createNestedOptions(expandOptions, defaultExpandOptions);\n                    var characterOptions = expandOptions.characterOptions;\n                    if (!unit) {\n                        unit = CHARACTER;\n                    }\n                    if (unit == WORD) {\n                        var wordOptions = expandOptions.wordOptions;\n                        var startPos = session.getRangeBoundaryPosition(this, true);\n                        var endPos = session.getRangeBoundaryPosition(this, false);\n\n                        var startTokenizedTextProvider = createTokenizedTextProvider(startPos, characterOptions, wordOptions);\n                        var startToken = startTokenizedTextProvider.nextEndToken();\n                        var newStartPos = startToken.chars[0].previousVisible();\n                        var endToken, newEndPos;\n\n                        if (this.collapsed) {\n                            endToken = startToken;\n                        } else {\n                            var endTokenizedTextProvider = createTokenizedTextProvider(endPos, characterOptions, wordOptions);\n                            endToken = endTokenizedTextProvider.previousStartToken();\n                        }\n                        newEndPos = endToken.chars[endToken.chars.length - 1];\n\n                        if (!newStartPos.equals(startPos)) {\n                            this.setStart(newStartPos.node, newStartPos.offset);\n                            moved = true;\n                        }\n                        if (newEndPos && !newEndPos.equals(endPos)) {\n                            this.setEnd(newEndPos.node, newEndPos.offset);\n                            moved = true;\n                        }\n\n                        if (expandOptions.trim) {\n                            if (expandOptions.trimStart) {\n                                moved = this.trimStart(characterOptions) || moved;\n                            }\n                            if (expandOptions.trimEnd) {\n                                moved = this.trimEnd(characterOptions) || moved;\n                            }\n                        }\n\n                        return moved;\n                    } else {\n                        return this.moveEnd(CHARACTER, 1, expandOptions);\n                    }\n                }\n            ),\n\n            text: createEntryPointFunction(\n                function(session, characterOptions) {\n                    return this.collapsed ?\n                        \"\" : getRangeCharacters(session, this, createOptions(characterOptions, defaultCharacterOptions)).join(\"\");\n                }\n            ),\n\n            selectCharacters: createEntryPointFunction(\n                function(session, containerNode, startIndex, endIndex, characterOptions) {\n                    var moveOptions = { characterOptions: characterOptions };\n                    if (!containerNode) {\n                        containerNode = getBody( this.getDocument() );\n                    }\n                    this.selectNodeContents(containerNode);\n                    this.collapse(true);\n                    this.moveStart(\"character\", startIndex, moveOptions);\n                    this.collapse(true);\n                    this.moveEnd(\"character\", endIndex - startIndex, moveOptions);\n                }\n            ),\n\n            // Character indexes are relative to the start of node\n            toCharacterRange: createEntryPointFunction(\n                function(session, containerNode, characterOptions) {\n                    if (!containerNode) {\n                        containerNode = getBody( this.getDocument() );\n                    }\n                    var parent = containerNode.parentNode, nodeIndex = dom.getNodeIndex(containerNode);\n                    var rangeStartsBeforeNode = (dom.comparePoints(this.startContainer, this.endContainer, parent, nodeIndex) == -1);\n                    var rangeBetween = this.cloneRange();\n                    var startIndex, endIndex;\n                    if (rangeStartsBeforeNode) {\n                        rangeBetween.setStartAndEnd(this.startContainer, this.startOffset, parent, nodeIndex);\n                        startIndex = -rangeBetween.text(characterOptions).length;\n                    } else {\n                        rangeBetween.setStartAndEnd(parent, nodeIndex, this.startContainer, this.startOffset);\n                        startIndex = rangeBetween.text(characterOptions).length;\n                    }\n                    endIndex = startIndex + this.text(characterOptions).length;\n\n                    return {\n                        start: startIndex,\n                        end: endIndex\n                    };\n                }\n            ),\n\n            findText: createEntryPointFunction(\n                function(session, searchTermParam, findOptions) {\n                    // Set up options\n                    findOptions = createNestedOptions(findOptions, defaultFindOptions);\n\n                    // Create word options if we're matching whole words only\n                    if (findOptions.wholeWordsOnly) {\n                        // We don't ever want trailing spaces for search results\n                        findOptions.wordOptions.includeTrailingSpace = false;\n                    }\n\n                    var backward = isDirectionBackward(findOptions.direction);\n\n                    // Create a range representing the search scope if none was provided\n                    var searchScopeRange = findOptions.withinRange;\n                    if (!searchScopeRange) {\n                        searchScopeRange = api.createRange();\n                        searchScopeRange.selectNodeContents(this.getDocument());\n                    }\n\n                    // Examine and prepare the search term\n                    var searchTerm = searchTermParam, isRegex = false;\n                    if (typeof searchTerm == \"string\") {\n                        if (!findOptions.caseSensitive) {\n                            searchTerm = searchTerm.toLowerCase();\n                        }\n                    } else {\n                        isRegex = true;\n                    }\n\n                    var initialPos = session.getRangeBoundaryPosition(this, !backward);\n\n                    // Adjust initial position if it lies outside the search scope\n                    var comparison = searchScopeRange.comparePoint(initialPos.node, initialPos.offset);\n\n                    if (comparison === -1) {\n                        initialPos = session.getRangeBoundaryPosition(searchScopeRange, true);\n                    } else if (comparison === 1) {\n                        initialPos = session.getRangeBoundaryPosition(searchScopeRange, false);\n                    }\n\n                    var pos = initialPos;\n                    var wrappedAround = false;\n\n                    // Try to find a match and ignore invalid ones\n                    var findResult;\n                    while (true) {\n                        findResult = findTextFromPosition(pos, searchTerm, isRegex, searchScopeRange, findOptions);\n\n                        if (findResult) {\n                            if (findResult.valid) {\n                                this.setStartAndEnd(findResult.startPos.node, findResult.startPos.offset, findResult.endPos.node, findResult.endPos.offset);\n                                return true;\n                            } else {\n                                // We've found a match that is not a whole word, so we carry on searching from the point immediately\n                                // after the match\n                                pos = backward ? findResult.startPos : findResult.endPos;\n                            }\n                        } else if (findOptions.wrap && !wrappedAround) {\n                            // No result found but we're wrapping around and limiting the scope to the unsearched part of the range\n                            searchScopeRange = searchScopeRange.cloneRange();\n                            pos = session.getRangeBoundaryPosition(searchScopeRange, !backward);\n                            searchScopeRange.setBoundary(initialPos.node, initialPos.offset, backward);\n                            wrappedAround = true;\n                        } else {\n                            // Nothing found and we can't wrap around, so we're done\n                            return false;\n                        }\n                    }\n                }\n            ),\n\n            pasteHtml: function(html) {\n                this.deleteContents();\n                if (html) {\n                    var frag = this.createContextualFragment(html);\n                    var lastChild = frag.lastChild;\n                    this.insertNode(frag);\n                    this.collapseAfter(lastChild);\n                }\n            }\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the Rangy Selection object\n\n        function createSelectionTrimmer(methodName) {\n            return createEntryPointFunction(\n                function(session, characterOptions) {\n                    var trimmed = false;\n                    this.changeEachRange(function(range) {\n                        trimmed = range[methodName](characterOptions) || trimmed;\n                    });\n                    return trimmed;\n                }\n            );\n        }\n\n        extend(api.selectionPrototype, {\n            expand: createEntryPointFunction(\n                function(session, unit, expandOptions) {\n                    this.changeEachRange(function(range) {\n                        range.expand(unit, expandOptions);\n                    });\n                }\n            ),\n\n            move: createEntryPointFunction(\n                function(session, unit, count, options) {\n                    var unitsMoved = 0;\n                    if (this.focusNode) {\n                        this.collapse(this.focusNode, this.focusOffset);\n                        var range = this.getRangeAt(0);\n                        if (!options) {\n                            options = {};\n                        }\n                        options.characterOptions = createOptions(options.characterOptions, defaultCaretCharacterOptions);\n                        unitsMoved = range.move(unit, count, options);\n                        this.setSingleRange(range);\n                    }\n                    return unitsMoved;\n                }\n            ),\n\n            trimStart: createSelectionTrimmer(\"trimStart\"),\n            trimEnd: createSelectionTrimmer(\"trimEnd\"),\n            trim: createSelectionTrimmer(\"trim\"),\n\n            selectCharacters: createEntryPointFunction(\n                function(session, containerNode, startIndex, endIndex, direction, characterOptions) {\n                    var range = api.createRange(containerNode);\n                    range.selectCharacters(containerNode, startIndex, endIndex, characterOptions);\n                    this.setSingleRange(range, direction);\n                }\n            ),\n\n            saveCharacterRanges: createEntryPointFunction(\n                function(session, containerNode, characterOptions) {\n                    var ranges = this.getAllRanges(), rangeCount = ranges.length;\n                    var rangeInfos = [];\n\n                    var backward = rangeCount == 1 && this.isBackward();\n\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        rangeInfos[i] = {\n                            characterRange: ranges[i].toCharacterRange(containerNode, characterOptions),\n                            backward: backward,\n                            characterOptions: characterOptions\n                        };\n                    }\n\n                    return rangeInfos;\n                }\n            ),\n\n            restoreCharacterRanges: createEntryPointFunction(\n                function(session, containerNode, saved) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = saved.length, range, rangeInfo, characterRange; i < len; ++i) {\n                        rangeInfo = saved[i];\n                        characterRange = rangeInfo.characterRange;\n                        range = api.createRange(containerNode);\n                        range.selectCharacters(containerNode, characterRange.start, characterRange.end, rangeInfo.characterOptions);\n                        this.addRange(range, rangeInfo.backward);\n                    }\n                }\n            ),\n\n            text: createEntryPointFunction(\n                function(session, characterOptions) {\n                    var rangeTexts = [];\n                    for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                        rangeTexts[i] = this.getRangeAt(i).text(characterOptions);\n                    }\n                    return rangeTexts.join(\"\");\n                }\n            )\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the core rangy object\n\n        api.innerText = function(el, characterOptions) {\n            var range = api.createRange(el);\n            range.selectNodeContents(el);\n            var text = range.text(characterOptions);\n            return text;\n        };\n\n        api.createWordIterator = function(startNode, startOffset, iteratorOptions) {\n            var session = getSession();\n            iteratorOptions = createNestedOptions(iteratorOptions, defaultWordIteratorOptions);\n            var startPos = session.getPosition(startNode, startOffset);\n            var tokenizedTextProvider = createTokenizedTextProvider(startPos, iteratorOptions.characterOptions, iteratorOptions.wordOptions);\n            var backward = isDirectionBackward(iteratorOptions.direction);\n\n            return {\n                next: function() {\n                    return backward ? tokenizedTextProvider.previousStartToken() : tokenizedTextProvider.nextEndToken();\n                },\n\n                dispose: function() {\n                    tokenizedTextProvider.dispose();\n                    this.next = function() {};\n                }\n            };\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        api.noMutation = function(func) {\n            var session = getSession();\n            func(session);\n            endSession();\n        };\n\n        api.noMutation.createEntryPointFunction = createEntryPointFunction;\n\n        api.textRange = {\n            isBlockNode: isBlockNode,\n            isCollapsedWhitespaceNode: isCollapsedWhitespaceNode,\n\n            createPosition: createEntryPointFunction(\n                function(session, node, offset) {\n                    return session.getPosition(node, offset);\n                }\n            )\n        };\n    });\n    \n    return rangy;\n}, this);","import {createApp} from \"vue\";\nimport {createPinia} from \"pinia\";\nimport SmartCommentsComponent from \"./SmartComments.vue\";\nimport {initializeScreenshotTargetManager} from \"./utils/screenshotTargetManager.js\";\n\n// Import Rangy modules and make it globally available\nimport rangy from \"rangy/lib/rangy-core\";\nimport \"rangy/lib/rangy-classapplier\";\nimport \"rangy/lib/rangy-highlighter\";\nimport \"rangy/lib/rangy-serializer\";\nimport \"rangy/lib/rangy-textrange\";\n//import 'rangy/lib/rangy-selectionsaverestore';\n\n// Make rangy globally available\nwindow.rangy = rangy;\n\n// Initialize rangy\nrangy.init();\n\n// Initialize screenshot target manager\ninitializeScreenshotTargetManager();\n\n// Use MediaWiki's resource loader to ensure dependencies are loaded\nmw.loader.using( [\"mediawiki.util\"] ).then( () => {\n\tconst appElement = document.getElementById( \"smartcomments-app\" );\n\n\tif ( !appElement ) {\n\t\tmw.log.error( \"SmartComments: Mount element #smartcomments-app not found.\" );\n\t\treturn;\n\t}\n\n\ttry {\n\t\t// Create Pinia instance\n\t\tconst pinia = createPinia();\n\n\t\t// Create and configure Vue app\n\t\tconst app = createApp( SmartCommentsComponent );\n\n\t\t// Use Pinia\n\t\tapp.use( pinia );\n\n\t\t// Initialize store state before mounting\n\t\timport(\"./store/appStateStore.js\")\n\t\t\t.then( ( {useAppStateStore} ) => {\n\t\t\t\tconst store = useAppStateStore();\n\t\t\t\tstore.initializeState();\n\n\t\t\t\t// Set initial state based on URL parameter\n\t\t\t\tconst initialIsEnabled = mw.util.getParamValue( \"scenabled\" ) === \"1\";\n\t\t\t\tif ( initialIsEnabled ) {\n\t\t\t\t\tstore.enableAppState();\n\t\t\t\t} else {\n\t\t\t\t\tstore.disableAppState();\n\t\t\t\t}\n\n\t\t\t\t// Mount the app\n\t\t\t\tapp.mount( appElement );\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tmw.log.error( \"SmartComments: Failed to load store:\", error );\n\t\t\t} );\n\t} catch ( error ) {\n\t\tmw.log.error( \"SmartComments: Failed to initialize:\", error );\n\t}\n} );\n"],"names":["makeMap","str","map","Object","create","key","split","val","EMPTY_OBJ","define_process_env_default","NODE_ENV","freeze","EMPTY_ARR","NOOP","NO","isOn","charCodeAt","isModelListener","startsWith","extend","assign","remove","arr","el","i","indexOf","splice","hasOwnProperty","prototype","hasOwn","call","isArray","Array","isMap","toTypeString","isSet","isFunction","isString","isSymbol","isObject","isPromise","then","catch","objectToString","toString","value","toRawType","slice","isPlainObject","isIntegerKey","parseInt","isReservedProp","isBuiltInDirective","cacheStringFunction","fn","cache","camelizeRE","camelize","replace","_","c","toUpperCase","hyphenateRE","hyphenate","toLowerCase","capitalize","charAt","toHandlerKey","hasChanged","oldValue","is","invokeArrayFns","fns","arg","length","def","obj","writable","defineProperty","configurable","enumerable","looseToNumber","n","parseFloat","isNaN","_globalThis","getGlobalThis","globalThis","self","window","global","normalizeStyle","res","item","normalized","parseStringStyle","listDelimiterRE","propertyDelimiterRE","styleCommentRE","cssText","ret","forEach","tmp","trim","normalizeClass","name","isHTMLTag","isSVGTag","isMathMLTag","isSpecialBooleanAttr","includeBooleanAttr","isRef","toDisplayString","JSON","stringify","replacer","String","_key","size","entries","reduce","val2","stringifySymbol","values","v","_a","description","warn","msg","args","console","activeEffectScope","activeSub","EffectScope","constructor","detached","this","_active","_on","effects","cleanups","_isPaused","parent","index","scopes","push","active","pause","l","resume","run","currentEffectScope","on","prevScope","off","stop","fromParent","last","pop","effectScope","getCurrentScope","pausedQueueEffects","WeakSet","ReactiveEffect","deps","depsTail","flags","next","cleanup","scheduler","has","delete","trigger","notify","batch","cleanupEffect","prepareDeps","prevEffect","prevShouldTrack","shouldTrack","cleanupDeps","link","nextDep","removeSub","onStop","add","runIfDirty","isDirty","dirty","batchedSub","batchedComputed","batchDepth","sub","isComputed","startBatch","endBatch","e","error","err","version","prevActiveLink","dep","activeLink","head","tail","prev","prevDep","removeDep","computed","refreshComputed","_dirty","globalVersion","isSSR","prevSub","_value","soft","nextSub","subsHead","subs","sc","trackStack","pauseTracking","resetTracking","Link","Dep","track","debugInfo","addSub","onTrack","effect","onTrigger","currentTail","targetMap","WeakMap","ITERATE_KEY","Symbol","MAP_KEY_ITERATE_KEY","ARRAY_ITERATE_KEY","target","type","depsMap","get","set","Map","newValue","oldTarget","targetIsArray","isArrayIndex","newLength","Number","key2","reactiveReadArray","array","raw","toRaw","isShallow","toReactive","shallowReadArray","arrayInstrumentations","__proto__","iterator","concat","x","every","thisArg","apply","arguments","filter","find","findIndex","findLast","findLastIndex","includes","searchProxy","join","separator","lastIndexOf","noTracking","reduceRight","shift","some","toReversed","toSorted","comparer","toSpliced","unshift","method","wrapValue","iter","_next","result","arrayProto","wrappedRetFn","needsWrap","methodFn","result2","wrappedFn","acc","isProxy","isNonTrackableKeys","builtInSymbols","Set","getOwnPropertyNames","BaseReactiveHandler","_isReadonly","_isShallow","receiver","isReadonly2","isShallow2","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","getPrototypeOf","Reflect","readonly","reactive","MutableReactiveHandler","super","isOldValueReadonly","isReadonly","hadKey","deleteProperty","ownKeys","ReadonlyReactiveHandler","mutableHandlers","readonlyHandlers","shallowReactiveHandlers","shallowReadonlyHandlers","toShallow","getProto","createReadonlyMethod","createInstrumentations","shallow","instrumentations","rawTarget","rawKey","wrap","toReadonly","callback","observed","clear","checkIdentityKeys","hadItems","targetIsMap","isPair","isKeyOnly","innerIterator","done","createIterableMethod","createInstrumentationGetter","mutableCollectionHandlers","shallowCollectionHandlers","readonlyCollectionHandlers","shallowReadonlyCollectionHandlers","createReactiveObject","shallowReadonly","baseHandlers","collectionHandlers","proxyMap","targetType","isExtensible","rawType","targetTypeMap","existingProxy","proxy","Proxy","isReactive","markRaw","r","ref","rawValue","RefImpl","createRef","_rawValue","useDirectValue","unref","ref2","shallowUnwrapHandlers","proxyRefs","objectWithRefs","toRefs","object","propertyToRef","ObjectRefImpl","_object","_defaultValue","newVal","depMap","getDepFromReactive","GetterRefImpl","_getter","toRef","source","defaultValue","ComputedRefImpl","setter","__v_isRef","INITIAL_WATCHER_VALUE","cleanupMap","activeWatcher","watch","cb","options","immediate","deep","once","augmentJob","warnInvalidSource","s","onWarn","reactiveGetter","source2","traverse","getter","boundCleanup","forceTrigger","isMultiSource","currentEffect","baseGetter","depth","Infinity","scope","watchHandle","_cb","fill","job","immediateFirstRun","currentWatcher","effect2","cleanupFn","failSilently","owner","onWatcherCleanup","cleanup2","bind","seen","getOwnPropertySymbols","propertyIsEnumerable","stack","pushWarningContext","vnode","popWarningContext","isWarning","warn$1","instance","component","appWarnHandler","appContext","config","warnHandler","trace","currentVNode","normalizedStack","recurseCount","parentInstance","getComponentTrace","callWithErrorHandling","a","_b","formatComponentName","warnArgs","logs","entry","postfix","isRoot","open","close","props","formatProps","formatTraceEntry","formatTrace","keys","formatProp","ErrorTypeStrings$1","sp","bc","bm","m","bu","u","bum","um","da","ec","rtc","rtg","handleError","callWithAsyncErrorHandling","throwInDev","contextVNode","errorHandler","throwUnhandledErrorInProduction","cur","exposedInstance","errorInfo","errorCapturedHooks","throwInProd","info","logError","queue","flushIndex","pendingPostFlushCbs","activePostFlushCbs","postFlushIndex","resolvedPromise","resolve","currentFlushPromise","nextTick","p","queueJob","jobId","getId","lastJob","id","start","end","middle","middleJob","middleJobId","findInsertionIndex","queueFlush","flushJobs","queuePostFlushCb","flushPreFlushCbs","uid","checkRecursiveUpdates","flushPostFlushCbs","deduped","sort","b","check","count","componentName","getComponentName","isHmrUpdating","hmrDirtyComponents","__VUE_HMR_RUNTIME__","createRecord","tryWrap","rerender","newRender","record","initialDef","render","instances","normalizeClassComponent","renderCache","update","reload","newComp","updateComponentDef","oldComp","dirtyInstances","propsCache","emitsCache","optionsCache","ceReload","styles","location","root","ce","_removeChildStyle","isClassComponent","__vccOpts","devtools$1","buffer","devtoolsNotInstalled","emit$1","event","emit","setDevtoolsHook$1","hook","enabled","HTMLElement","navigator","userAgent","__VUE_DEVTOOLS_HOOK_REPLAY__","newHook","setTimeout","devtoolsComponentAdded","createDevtoolsComponentHook","devtoolsComponentUpdated","_devtoolsComponentRemoved","app","devtoolsPerfStart","createDevtoolsPerformanceHook","devtoolsPerfEnd","time","currentRenderingInstance","currentScopeId","setCurrentRenderingInstance","__scopeId","validateDirectiveName","withDirectives","directives","getComponentPublicInstance","bindings","dirs","dir","modifiers","mounted","updated","invokeDirectiveHook","prevVNode","oldBindings","binding","TeleportEndKey","setTransitionHooks","hooks","shapeFlag","transition","subTree","ssContent","clone","ssFallback","defineComponent","extraOptions","setup","markAsyncBoundary","ids","knownTemplateRefs","setRef","rawRef","oldRawRef","parentSuspense","isUnmount","isAsyncWrapper","__asyncResolved","refValue","oldRef","refs","setupState","rawSetupState","canSetSetupRef","_isString","_isRef","doSet","f","existing","ref3","k","queuePostRenderEffect","requestIdleCallback","cancelIdleCallback","__asyncLoader","isKeepAlive","__isKeepAlive","onActivated","registerKeepAliveHook","onDeactivated","currentInstance","wrappedHook","__wdc","current","isDeactivated","injectHook","injectToKeepAliveRoot","keepAliveRoot","injected","onUnmounted","prepend","__weh","reset","setCurrentInstance","createHook","lifecycle","isInSSRComponentSetup","onBeforeMount","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","onServerPrefetch","onRenderTriggered","onRenderTracked","onErrorCaptured","resolveComponent","maybeSelfReference","warnMissing","Component","selfName","extra","resolveAsset","NULL_DYNAMIC_COMPONENT","for","registry","renderList","renderItem","cached","sourceIsArray","isReadonlySource","isInteger","from","getPublicInstance","isStatefulComponent","publicPropertiesMap","$","$el","$data","data","$props","$attrs","attrs","$slots","slots","$refs","$parent","$root","$host","$emit","$options","resolveMergedOptions","$forceUpdate","$nextTick","$watch","instanceWatch","isReservedPrefix","hasSetupBinding","state","__isScriptSetup","PublicInstanceProxyHandlers","ctx","accessCache","normalizedProps","propsOptions","shouldCacheAccess","publicGetter","cssModule","globalProperties","markAttrsAccessed","__cssModules","descriptor","normalizePropsOrEmits","applyOptions","publicThis","beforeCreate","callHook","dataOptions","computedOptions","methods","watchOptions","provide","provideOptions","inject","injectOptions","created","beforeMount","beforeUpdate","activated","deactivated","beforeDestroy","beforeUnmount","destroyed","unmounted","renderTracked","renderTriggered","errorCaptured","serverPrefetch","expose","inheritAttrs","components","filters","checkDuplicateProperties","createDuplicateChecker","normalizeInject","opt","default","resolveInjections","methodHandler","createWatcher","provides","parentProvides","registerLifecycleHook","register","_hook","exposed","h","createPathGetter","handler","base","mixins","extends","extendsOptions","globalMixins","optionMergeStrategies","resolved","mergeOptions","to","strats","asMixin","strat","internalOptionMergeStrats","mergeDataFn","mergeEmitsOrPropsOptions","emits","mergeObjectOptions","mergeAsArray","merged","createAppContext","isNativeTag","performance","compilerOptions","uid$1","createAppAPI","hydrate","rootComponent","rootProps","context","installedPlugins","pluginCleanupFns","isMounted","_uid","_component","_props","_container","_context","_instance","use","plugin","install","mixin","validateComponentName","directive","mount","rootContainer","isHydrate","namespace","__vue_app__","_ceVNode","createVNode","cloned","cloneVNode","Fragment","Text","Comment","Static","devtoolsInitApp","onUnmount","unmount","devtoolsUnmountApp","runWithContext","lastApp","currentApp","treatDefaultAsFactory","internalObjectProto","createInternalObject","isInternalObject","initProps","rawProps","isStateful","propsDefaults","setFullProps","validateProps","needCastKeys","rawCastValues","hasAttrsChanged","camelKey","isEmitListener","emitsOptions","rawCurrentProps","castValues","resolvePropValue","isAbsent","hasDefault","Function","skipFactory","_setProp","mixinPropsCache","normalizePropsOptions","comp","hasExtends","extendProps","raw2","normalizedKey","validatePropName","prop","propType","shouldCast","shouldCastTrue","typeName","resolvedValues","camelizePropsKey","validateProp","required","validator","skipCheck","isValid","types","expectedTypes","valid","expectedType","assertType","message","receivedType","expectedValue","styleValue","receivedValue","isExplicable","elem","isBoolean","getInvalidTypeMessage","isSimpleType","ctor","getType","t","isInternalKey","normalizeSlotValue","normalizeVNode","normalizeSlot","rawSlot","_n","renderFnWithContext","_d","setBlockTracking","prevInstance","_c","withCtx","normalizeObjectSlots","rawSlots","_ctx","normalizeVNodeSlots","children","assignSlots","optimized","supported","perf","startMeasure","isSupported","mark","now","Date","endMeasure","startTag","endTag","perf$1","measure","clearMarks","supported$1","suspense","pendingBranch","createRenderer","needWarn","multi","initFeatureFlags","__VUE__","__VUE_DEVTOOLS_GLOBAL_HOOK__","insert","hostInsert","hostRemove","patchProp","hostPatchProp","createElement","hostCreateElement","createText","hostCreateText","createComment","hostCreateComment","setText","hostSetText","setElementText","hostSetElementText","parentNode","hostParentNode","nextSibling","hostNextSibling","setScopeId","hostSetScopeId","insertStaticContent","hostInsertStaticContent","patch","n1","n2","container","anchor","parentComponent","slotScopeIds","dynamicChildren","isSameVNodeType","getNextHostNode","patchFlag","processText","processCommentNode","mountStaticNode","patchStaticNode","processFragment","processElement","processComponent","process","internals","removeStaticNode","moveStaticNode","mountElement","patchElement","vnodeHook","mountChildren","resolveChildrenNamespace","scopeId","onVnodeBeforeMount","invokeVNodeHook","needCallTransitionHooks","persisted","needTransition","beforeEnter","onVnodeMounted","enter","filterSingleRoot","isSuspense","parentVNode","child","cloneIfMounted","__vnode","oldProps","newProps","toggleRecurse","onVnodeBeforeUpdate","innerHTML","textContent","patchBlockChildren","traverseStaticChildren","patchChildren","patchProps","class","style","propsToUpdate","dynamicProps","onVnodeUpdated","oldChildren","newChildren","fallbackContainer","oldVNode","newVNode","fragmentStartAnchor","fragmentEndAnchor","fragmentSlotScopeIds","activate","mountComponent","updateComponent","initialVNode","emptyAppContext","exposeProxy","withProxy","normalizeEmitsOptions","emitted","setupContext","suspenseId","pendingId","asyncDep","asyncResolved","isUnmounted","createDevRenderContext","createComponentInstance","__hmrId","registerHMR","renderer","setInSSRSetupState","initSlots","setupResult","names","isRuntimeOnly","exposePropsOnRenderContext","exposedType","attrsProxy","slotsProxy","attrsProxyHandlers","getSlotsProxy","createSetupContext","isAsyncSetup","unsetCurrentInstance","resolvedResult","handleSetupResult","finishComponentSetup","setupStatefulComponent","setupComponent","registerDep","setupRenderEffect","placeholder","nextVNode","prevProps","prevChildren","nextProps","nextChildren","$stable","hasPropsChanged","shouldUpdateComponent","updateComponentPreRender","componentUpdateFn","nonHydratedAsyncRoot","locateNonHydratedAsyncRoot","originNext","nextTree","renderComponentRoot","prevTree","activeBranch","updateHOCHostEl","isAsyncWrapperVNode","_injectChildStyle","scopedInitialVNode","rawPrevProps","isInHmrContext","kebabKey","camelizedKey","updateProps","needDeletionCheck","deletionComparisonTarget","updateSlots","c1","prevShapeFlag","c2","patchKeyedChildren","patchUnkeyedChildren","unmountChildren","oldLength","commonLength","Math","min","nextChild","parentAnchor","l2","e1","e2","nextPos","s1","s2","keyToNewIndexMap","j","patched","toBePatched","moved","maxNewIndexSoFar","newIndexToOldIndexMap","prevChild","newIndex","increasingNewIndexSequence","len","arrI","getSequence","nextIndex","move","moveType","leave","delayLeave","afterLeave","remove2","performLeave","remove22","doRemove","cacheIndex","deactivate","shouldInvokeDirs","shouldInvokeVnodeHook","onVnodeBeforeUnmount","unmountComponent","hasOnce","onVnodeUnmounted","removeFragment","performRemove","unregisterHMR","__","slotCacheKeys","invalidateMount","cleanupBuffer","teleportEnd","isFlushing","_vnode","mt","mc","pc","pbc","o","createApp","baseCreateRenderer","currentNamespace","encoding","allowed","ch1","ch2","subComponent","ssrContextKey","useSSRContext","doWatch","flush","baseWatchOptions","runsImmediately","ssrCleanup","__watcherHandles","watchStopHandle","isPre","isFirstRun","watch$1","path","segments","getModelModifiers","modelName","modelModifiers","rawArgs","number","params","devtoolsComponentEmit","lowerCaseEvent","handlerName","onceHandler","extendEmits","normalizedFromExtend","accessedAttrs","fallthroughAttrs","proxyToUse","thisProxy","render2","getFunctionalFallthrough","blockStack","setRoot","getChildRoot","filterModelListeners","allAttrs","eventAttrs","extraAttrs","isElementRoot","rawChildren","childRoot","dynamicIndex","updatedRoot","recurse","singleRoot","isVNode","nextKeys","__isSuspense","currentBlock","openBlock","disableTracking","isBlockTreeEnabled","inVOnce","setupBlock","createElementBlock","createBaseVNode","createBlock","__v_isVNode","normalizeKey","normalizeRef","ref_key","ref_for","isBlockNode","needFullChildrenNormalization","__v_skip","targetStart","targetAnchor","staticCount","normalizeChildren","normalize","_createVNode","guardReactiveProps","klass","__isTeleport","isTeleport","extraProps","mergeRef","cloneTransition","mergedProps","toMerge","incoming","mergeProps","deepCloneVNode","createTextVNode","text","flag","createCommentVNode","asBlock","memo","slot","slotFlag","getCurrentInstance","internalSetCurrentInstance","g","registerGlobalSetter","setters","isBuiltInTag","__ssrInlineRender","ssrRender","devtoolsRawSetupState","exposeSetupStateOnRenderContext","skipOptions","template","classifyRE","classify","includeInferred","displayName","__name","__file","match","inferFromRegistry","getterOrOptions","debugOptions","computed$1","warnRecursiveComputed","_warnRecursive","policy","tt","trustedTypes","createPolicy","createHTML","unsafeToTrustedHTML","doc","document","templateContainer","nodeOps","insertBefore","removeChild","tag","createElementNS","multiple","setAttribute","createTextNode","node","nodeValue","querySelector","selector","content","before","previousSibling","lastChild","cloneNode","wrapper","firstChild","appendChild","vtcKey","vShowOriginalDisplay","vShowHidden","vShow","display","setDisplay","CSS_VAR_TEXT","displayRE","semicolonRE","importantRE","setStyle","test","setProperty","prefixed","rawName","prefixCache","prefixes","autoPrefix","xlinkNS","patchAttr","isSVG","removeAttributeNS","setAttributeNS","removeAttribute","patchDOMProp","attrName","tagName","getAttribute","needRemove","addEventListener","veiKey","patchEvent","prevValue","nextValue","invokers","existingInvoker","sanitizeEventValue","optionsModifierRE","parseName","invoker","initialValue","_vts","attached","originalStop","stopImmediatePropagation","_stopped","patchStopImmediatePropagation","getNow","createInvoker","removeEventListener","cachedNow","propName","isNativeOn","getModelAssigner","onCompositionStart","composing","onCompositionEnd","dispatchEvent","Event","assignKey","vModelText","lazy","castToNumber","domValue","activeElement","systemModifiers","modifierGuards","stopPropagation","prevent","preventDefault","currentTarget","ctrl","ctrlKey","shiftKey","alt","altKey","meta","metaKey","left","button","right","exact","withModifiers","_withMods","cacheKey","guard","rendererOptions","transitionClasses","className","patchClass","isCssString","hasControlledDisplay","prevStyle","cssVarText","patchStyle","shouldSetAsProp","_isVueCE","_trueValue","_falseValue","camelize$1","injectNativeTagCheck","isCustomElement","injectCompilerOptionsCheck","containerOrSelector","ShadowRoot","mode","normalizeContainer","nodeType","SVGElement","MathMLElement","resolveRootNamespace","Element","max","del","getTarget","vueStyle","numberStyle","stringStyle","keywordStyle","formatter","__vue_custom_formatter","header","__isVue","genRefFlag","formatValue","hasBody","body","formatInstance","blocks","createInstanceBlock","extractKeys","asRaw","Comp","extracted","isKeyOfType","opts","devtoolsFormatters","initCustomFormatter","isProxyAvailable","perf_hooks","ApiProxy","targetQueue","onQueue","defaultSettings","settings","localSettingsSaveId","currentSettings","localStorage","getItem","parse","fallbacks","getSettings","setSettings","setItem","pluginId","proxiedOn","_target","proxiedTarget","Promise","setRealTarget","setupDevtoolsPlugin","pluginDescriptor","setupFn","enableProxy","enableEarlyProxy","__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__","__VUE_DEVTOOLS_PLUGINS__","activePinia","setActivePinia","pinia","piniaSymbol","toJSON","MutationType","IS_CLIENT","_global","download","url","xhr","XMLHttpRequest","responseType","onload","saveAs","response","onerror","send","corsEnabled","status","click","MouseEvent","evt","createEvent","initMouseEvent","_navigator","isMacOSWebView","HTMLAnchorElement","blob","rel","href","origin","URL","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","autoBom","Blob","fromCharCode","bom","popup","title","innerText","force","isSafari","isChromeIOS","FileReader","reader","onloadend","Error","readAsDataURL","toastMessage","piniaMessage","__VUE_DEVTOOLS_TOAST__","log","isPinia","checkClipboardAccess","checkNotFocusedError","fileInput","async","actionGlobalOpenStateFile","accept","reject","onchange","files","file","oncancel","loadStoresState","storeState","formatDisplay","_custom","PINIA_ROOT_LABEL","PINIA_ROOT_ID","formatStoreForInspectorTree","store","label","$id","formatEventData","events","operations","operation","formatMutationType","direct","patchFunction","patchObject","isTimelineActive","componentStateTypes","MUTATIONS_LAYER_ID","INSPECTOR_ID","assign$1","getStoreType","registerPiniaDevtools","logo","packageName","homepage","api","addTimelineLayer","color","addInspector","icon","treeFilterPlaceholder","actions","action","clipboard","writeText","actionGlobalCopyState","tooltip","readText","actionGlobalPasteState","sendInspectorTree","sendInspectorState","actionGlobalSaveState","nodeActions","nodeId","_s","$reset","inspectComponent","payload","componentInstance","_pStores","piniaStores","instanceData","editable","_isOptionsAPI","$state","_getters","getters","getInspectorTree","inspectorId","stores","rootNodes","$pinia","getInspectorState","inspectedStore","$store","storeNames","storeMap","storeId","getterName","_customProperties","customProperties","formatStoreForInspectorState","editInspectorState","editComponentState","activeAction","runningActionId","patchActionForGrouping","actionNames","wrapWithProxy","storeActions","actionName","_actionId","trackedStore","retValue","devtoolsPlugin","_p","_testing","originalHotUpdate","_hotUpdate","newStore","_hmrPayload","logStoreChanges","$onAction","after","onError","groupId","addTimelineEvent","layerId","subtitle","logType","notifyComponentUpdate","$subscribe","eventData","hotUpdate","$dispose","addStoreToDevtools","newState","oldState","subPatch","targetValue","noop","addSubscription","subscriptions","onCleanup","removeSubscription","idx","onScopeDispose","triggerSubscriptions","fallbackRunWithContext","ACTION_MARKER","ACTION_NAME","mergeReactiveObjects","patchToApply","skipHydrateSymbol","createOptionsStore","hot","initialState","createSetupStore","localState","computedGetters","isOptionsStore","optionsForPlugin","_e","$subscribeOptions","isListening","isSyncListening","debuggerEvents","_hotUpdating","actionSubscriptions","hotState","activeListener","$patch","partialStateOrMutator","subscriptionMutation","myListenerId","wrappedAction","afterCallbackList","onErrorCallbackList","partialStore","stopWatcher","setupStore","actionValue","stateKey","newStateTarget","oldStateSource","actionFn","getterValue","nonEnumerable","extender","extensions","defineStore","idOrOptions","setupOptions","isSetupStore","useStore","hasContext","_pinia","hotId","vm","useUserStore","userRights","isLoading","canManageComments","canAddComments","fetchUserRights","mw","user","getRights","setLoading","loading","setError","clearError","useAppStateStore","isEnabled","getIsEnabled","_updateButtonUI","toggleElement","getElementById","classList","initializeState","userStore","onclick","toggleAppState","enableAppState","disableAppState","SELECTION_TIMEOUTS","SELECTION_LIMITS","SELECTION_PATTERNS","HTML_TAG_REGEX","LINEBREAK_REGEX","WHITESPACE_CLEANUP","IMAGE_POSITION_PREFIX","SVG_POSITION_PREFIX","POSITION_SEPARATOR","SELECTION_CLASSES","SCREENSHOT_CONFIG","MEDIAWIKI_SELECTORS","CONTENT_ROOT_SELECTORS","SELECTION_VALIDATION","SELECTION_ENUMS","SMARTCOMMENTS_CLASSES","SCREENSHOT_TARGETING","SKIP_ELEMENTS","SEMANTIC_PARENTS","MIN_CONTENT_LENGTH","TEMP_HIGHLIGHT_CLASSES","getMediaWikiContentRoot","contentTextElement","element","validateSelectionContent","selection","selectionHTML","sanitizeHTMLForValidation","toHtml","commonAncestorContainer","Node","ELEMENT_NODE","outerHTML","html","parser","DOMParser","parseFromString","firstElementChild","contains","querySelectorAll","containsDynamicContent","sanitized","substring","isSelectionEnabled","simpleHash","hash","abs","createImageHash","src","width","height","sanitizeIdString","getMessage","fallback","useMessages","messages","save","cancel","complete","edit","reopen","overview","newComment","newReply","commentInput","replyInput","newCommentTitle","errorTitle","errorEmpty","apiError","justNow","commentAdded","commentAddedRefreshing","unlocalizedComment","selectionError1","selectionError2","selectionError3","selectionError4","selectionError5","replyHeader","replyPlaceholder","replySubmit","previousComment","nextComment","markComplete","markDelete","viewOverview","linkDisabledWarn","linkCommentHighlightWarn","selectionGenericError","msgWithFallback","hasMessage","useComments","comments","blockedMode","apiRequest","Api","requestData","format","post","fetchComments","rawAnchors","page","smartcomments","anchors","processedAnchor","selectionDetails","position","separatorIndex","parts","parseSelectionFromBackend","pos","parsedSelection","highlight_type","getComment","commentId","group","comment","saveComment","selectionData","success","isReply","parentId","posString","formattedSelection","formatted","formatSelectionForBackend","image","updateComment","deleteComment","checkBlockedMode","canSaveComment","getSelection","ERROR_TYPES","SEVERITY_LEVELS","HighlightError","severity","timestamp","toISOString","errorLog","maxLogSize","handleValidationError","_logError","handleDOMError","originalError","handleRangyError","handleSelectorError","handleListenerError","handleCleanupError","validateHighlightData","highlightData","data_id","validateSelectionHighlightData","safeExecute","errorContext","getErrorStats","stats","total","byType","bySeverity","clearErrorLog","HIGHLIGHT_CLASS_PREFIX","DATA_SVG_ID_ATTR","sanitizeCommentId","generateHighlightClass","cleanupHighlightElement","highlightClass","excludeClass","cls","hasOtherSmartCommentClasses","hasAttribute","findHighlightedElements","scopeElement","useHighlightData","highlightedAnchors","addHighlight","commentData","removeHighlight","sanitizedId","clearAllHighlights","setHighlights","highlights","validatedHighlights","highlight","useSmartCommentsSetup","commentsComposable","highlightComposable","loadAndSetHighlights","formattedHighlights","commentsArray","highlightPos","rawComment","selectionErrorHandler","errorCounts","lastErrors","handleSelectionError","selectionType","errorKey","showUserErrorMessage","validationResult","errorMessage","messageKey","userMessage","notificationType","handleScreenshotError","autoHide","createContextualError","fromEntries","totalErrors","sum","clearErrorStats","managedParents","shouldSkipElement","closest","storeOriginalState","originalClasses","hasScreenshotTarget","findScreenshotParent","parentElement","documentElement","handleTempHighlightChange","isAdding","addParentScreenshotTarget","removeParentScreenshotTarget","svgElement","svgRoot","addSVGScreenshotTarget","removeSVGScreenshotTarget","createScreenshotTargetObserver","MutationObserver","mutations","mutation","attributeName","oldClasses","newClasses","baseVal","getElementClasses","tempClass","hadClass","hasClass","hadSVGHover","hasSVGHover","manuallyAddParentTarget","extendStatics","d","setPrototypeOf","__extends","TypeError","__assign","__awaiter","_arguments","P","generator","fulfilled","step","rejected","__generator","y","sent","trys","ops","verb","throw","return","op","__spreadArray","pack","ar","Bounds","top","w","fromClientRect","clientRect","windowBounds","fromDOMRectList","domRectList","domRect","rect","EMPTY","parseBounds","getBoundingClientRect","toCodePoints$1","codePoints","fromCodePoint$1","_i","fromCodePoint","codeUnits","codePoint","chars$2","lookup$2","Uint8Array","i$2","chars$1$1","lookup$1$1","i$1$1","slice16$1","view","Uint16Array","Trie$1","Trie","errorValue","highStart","highValueIndex","ix","UTRIE2_DATA_BLOCK_LENGTH$1","UTRIE2_INDEX_1_OFFSET$1","UTRIE2_INDEX_2_BLOCK_LENGTH$1","chars$3","lookup$3","i$3","view32","view16","SP","BA","HY","CL","CP","EX","IN","NS","OP","IS","NU","PO","PR","SY","AL","EB","EM","H2","H3","ID","JL","JV","JT","SA","ea_OP","BREAK_NOT_ALLOWED$1","BREAK_ALLOWED$1","UnicodeTrie$1","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","ArrayBuffer","bytes","decode$1","polyUint32Array$1","Uint32Array","polyUint16Array$1","headerLength","ceil","ALPHABETICS","HARD_LINE_BREAKS","SPACE$1","PREFIX_POSTFIX","LINE_BREAKS","KOREAN_SYLLABLE_BLOCK","HYPHEN","isAdjacentWithSpaceIgnored","currentIndex","classTypes","previousNonSpaceClassType","_lineBreakAtIndex","indicies","forbiddenBreaks","beforeIndex","afterIndex","prevIndex","cssFormattedClasses","lineBreak","wordBreak","indices","categories","classType","codePointsToCharacterClasses","isLetterNumber","letterNumber","Break","HYPHEN_MINUS","PLUS_SIGN","EOF","isDigit","isHex","isWhiteSpace","isNameStartCodePoint","isLowerCaseLetter","isUpperCaseLetter","isLetter","isNonASCIICodePoint","isNameCodePoint","isNonPrintableCodePoint","isValidEscape","isIdentifierStart","c3","isNumberStart","stringToNumber","sign","integers","int","fraction","fracd","frac","expsign","exponent","exp","pow","LEFT_PARENTHESIS_TOKEN","RIGHT_PARENTHESIS_TOKEN","COMMA_TOKEN","SUFFIX_MATCH_TOKEN","PREFIX_MATCH_TOKEN","COLUMN_TOKEN","DASH_MATCH_TOKEN","INCLUDE_MATCH_TOKEN","LEFT_CURLY_BRACKET_TOKEN","RIGHT_CURLY_BRACKET_TOKEN","SUBSTRING_MATCH_TOKEN","BAD_URL_TOKEN","BAD_STRING_TOKEN","CDO_TOKEN","CDC_TOKEN","COLON_TOKEN","SEMICOLON_TOKEN","LEFT_SQUARE_BRACKET_TOKEN","RIGHT_SQUARE_BRACKET_TOKEN","WHITESPACE_TOKEN","EOF_TOKEN","Tokenizer","write","chunk","read","tokens","token","consumeToken","consumeCodePoint","consumeStringToken","peekCodePoint","consumeName","reconsumeCodePoint","consumeNumericToken","e3","consumeIdentLikeToken","a1","a2","a3","u1","u2","consumeUnicodeRangeToken","consumeWhiteSpace","delta","digits","questionMarks","digit","endDigits","consumeUrlToken","stringToken","consumeBadUrlRemnants","consumeEscapedCodePoint","consumeStringSlice","amount","endingCodePoint","consumeNumber","repr","unit","hex","hexCodePoint","isSurrogateCodePoint","Parser","_tokens","tokenizer","parseValue","parseComponentValue","parseValues","parseComponentValues","SyntaxError","reconsumeToken","consumeComponentValue","consumeSimpleBlock","consumeFunction","block","isEndingTokenFor","functionToken","cssFunction","isDimensionToken","isNumberToken","isIdentToken","isStringToken","isIdentWithValue","nonWhiteSpace","nonFunctionArgSeparator","parseFunctionArgs","isLength","isLengthPercentage","parseLengthPercentageTuple","ZERO_LENGTH","FIFTY_PERCENT","HUNDRED_PERCENT","getAbsoluteValueForTuple","tuple","getAbsoluteValue","GRAD","TURN","angle","PI","isAngle","parseNamedSide","ident","deg","color$1","colorFunction","SUPPORTED_COLOR_FUNCTIONS","namedColor","COLORS","TRANSPARENT","isTransparent","asString","alpha","blue","green","red","round","getTokenColorValue","rgb","hue2rgb","t1","t2","hue","hsl","saturation","lightness","hsla","rgba","parseColor","ALICEBLUE","ANTIQUEWHITE","AQUA","AQUAMARINE","AZURE","BEIGE","BISQUE","BLACK","BLANCHEDALMOND","BLUE","BLUEVIOLET","BROWN","BURLYWOOD","CADETBLUE","CHARTREUSE","CHOCOLATE","CORAL","CORNFLOWERBLUE","CORNSILK","CRIMSON","CYAN","DARKBLUE","DARKCYAN","DARKGOLDENROD","DARKGRAY","DARKGREEN","DARKGREY","DARKKHAKI","DARKMAGENTA","DARKOLIVEGREEN","DARKORANGE","DARKORCHID","DARKRED","DARKSALMON","DARKSEAGREEN","DARKSLATEBLUE","DARKSLATEGRAY","DARKSLATEGREY","DARKTURQUOISE","DARKVIOLET","DEEPPINK","DEEPSKYBLUE","DIMGRAY","DIMGREY","DODGERBLUE","FIREBRICK","FLORALWHITE","FORESTGREEN","FUCHSIA","GAINSBORO","GHOSTWHITE","GOLD","GOLDENROD","GRAY","GREEN","GREENYELLOW","GREY","HONEYDEW","HOTPINK","INDIANRED","INDIGO","IVORY","KHAKI","LAVENDER","LAVENDERBLUSH","LAWNGREEN","LEMONCHIFFON","LIGHTBLUE","LIGHTCORAL","LIGHTCYAN","LIGHTGOLDENRODYELLOW","LIGHTGRAY","LIGHTGREEN","LIGHTGREY","LIGHTPINK","LIGHTSALMON","LIGHTSEAGREEN","LIGHTSKYBLUE","LIGHTSLATEGRAY","LIGHTSLATEGREY","LIGHTSTEELBLUE","LIGHTYELLOW","LIME","LIMEGREEN","LINEN","MAGENTA","MAROON","MEDIUMAQUAMARINE","MEDIUMBLUE","MEDIUMORCHID","MEDIUMPURPLE","MEDIUMSEAGREEN","MEDIUMSLATEBLUE","MEDIUMSPRINGGREEN","MEDIUMTURQUOISE","MEDIUMVIOLETRED","MIDNIGHTBLUE","MINTCREAM","MISTYROSE","MOCCASIN","NAVAJOWHITE","NAVY","OLDLACE","OLIVE","OLIVEDRAB","ORANGE","ORANGERED","ORCHID","PALEGOLDENROD","PALEGREEN","PALETURQUOISE","PALEVIOLETRED","PAPAYAWHIP","PEACHPUFF","PERU","PINK","PLUM","POWDERBLUE","PURPLE","REBECCAPURPLE","RED","ROSYBROWN","ROYALBLUE","SADDLEBROWN","SALMON","SANDYBROWN","SEAGREEN","SEASHELL","SIENNA","SILVER","SKYBLUE","SLATEBLUE","SLATEGRAY","SLATEGREY","SNOW","SPRINGGREEN","STEELBLUE","TAN","TEAL","THISTLE","TOMATO","TURQUOISE","VIOLET","WHEAT","WHITE","WHITESMOKE","YELLOW","YELLOWGREEN","backgroundClip","prefix","backgroundColor","parseColorStop","processColorStops","stops","lineLength","first","processStops","previous","stop_1","absoluteValue","gapBegin","stop_2","gapLength","gapValue","calculateGradientDirection","radian","corner","centerX","centerY","atan2","getAngleFromCorner","sin","cos","halfWidth","halfHeight","halfLineLength","yDiff","xDiff","distance","sqrt","findCorner","stat","cx","cy","optimumDistance","optimumCorner","prefixLinearGradient","angle$1","firstToken","colorStop","CLOSEST_SIDE","FARTHEST_SIDE","CLOSEST_CORNER","FARTHEST_CORNER","CIRCLE","ELLIPSE","COVER","CONTAIN","prefixRadialGradient","shape","isColorStop","image_1","addImage","imageFunction","SUPPORTED_IMAGE_FUNCTIONS","BACKGROUND_SIZE","isAtPosition_1","backgroundImage","isSupportedImage","backgroundOrigin","backgroundPosition","backgroundRepeat","parseBackgroundRepeat","LINE_BREAK","backgroundSize","isBackgroundSizeInfoToken","borderColorForSide","side","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderRadiusForSide","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderStyleForSide","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderWidthForSide","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","direction","bit","parseDisplayValue","float","letterSpacing","WORD_BREAK","STRICT","NORMAL","lineHeight","computeLineHeight","fontSize","listStyleImage","listStylePosition","listStyleType","marginForSide","marginTop","marginRight","marginBottom","marginLeft","overflow","overflowWrap","paddingForSide","paddingTop","paddingRight","paddingBottom","paddingLeft","textAlign","textShadow","shadow","offsetX","offsetY","blur","textTransform","transform$1","transformFunction","SUPPORTED_TRANSFORM_FUNCTIONS","matrix","matrix3d","b1","b2","a4","b4","DEFAULT_VALUE","DEFAULT","transformOrigin","origins","visibility","BREAK_ALL","KEEP_ALL","zIndex","auto","order","opacity","textDecorationColor","textDecorationLine","line","fontFamily","accumulator","results","fontWeight","fontVariant","fontStyle","counterIncrement","increments","filtered","counter","increment","counterReset","resets","duration","quotes","open_1","close_1","getQuote","quote","boxShadow","spread","inset","paintOrder","layers","webkitTextStrokeColor","webkitTextStrokeWidth","CSSParsedDeclaration","declaration","animationDuration","cssFloat","overflowTuple","overflowX","overflowY","textDecoration","transform","isVisible","isTransformed","isPositioned","isPositionedWithZIndex","isFloating","isInlineLevel","CSSParsedPseudoDeclaration","CSSParsedCounterDeclaration","length_1","value_1","isDebugging","elementType","getElementDebugType","ElementContainer","textNodes","elements","getComputedStyle","isHTMLElementNode","bounds","chars$1","lookup$1","i$1","slice16","UTRIE2_DATA_BLOCK_LENGTH","UTRIE2_INDEX_1_OFFSET","UTRIE2_INDEX_2_BLOCK_LENGTH","chars","lookup","PseudoElementType","L","V","LV","LVT","UnicodeTrie","decode","polyUint32Array","polyUint16Array","slice32","createTrieFromBase64","BREAK_NOT_ALLOWED","codePointToClass","_graphemeBreakAtIndex","_codePoints","countRI","GraphemeBreaker","toCodePoints","lastEnd","graphemeBreak","isGreenPixel","createForeignObjectSVG","xmlns","svg","foreignObject","loadSerializedSVG$1","img","Image","encodeURIComponent","XMLSerializer","serializeToString","FEATURES","SUPPORT_RANGE_BOUNDS","createRange","range","testElement","TEST_HEIGHT","selectNode","rangeBounds","rangeHeight","testRangeBounds","SUPPORT_WORD_BREAKING","wordSpacing","repeat","textList","offset","supports","setStart","setEnd","boundAhead","testIOSLineBreak","SUPPORT_SVG_DRAWING","canvas","getContext","drawImage","toDataURL","testSVG","SUPPORT_FOREIGNOBJECT_DRAWING","fetch","fillStyle","fillRect","greenImageSrc","getImageData","testForeignObject","SUPPORT_CORS_IMAGES","crossOrigin","SUPPORT_RESPONSE_TYPE","SUPPORT_CORS_XHR","SUPPORT_NATIVE_TEXT_SEGMENTATION","Intl","Segmenter","TextBounds","getWrapperBounds","ownerDocument","replaceChild","segmentGraphemes","segmenter","granularity","segment","bk","breaker","graphemes","splitGraphemes","breakText","breakWords","segmentWords","wordSeparators","forbiddenBreakpoints","LineBreaker","words","_loop_1","word_1","TextContainer","textBounds","clientRects","getClientRects","subSegments","subOffset_1","subSegment","replacementNode","splitText","parseTextBounds","CAPITALIZE","p1","p2","ImageElementContainer","_super","_this","currentSrc","intrinsicWidth","naturalWidth","intrinsicHeight","naturalHeight","CanvasElementContainer","SVGElementContainer","LIElementContainer","OLElementContainer","reversed","CHECKBOX_BORDER_RADIUS","RADIO_BORDER_RADIUS","CHECKBOX","RADIO","PASSWORD","INPUT_COLOR","InputElementContainer","input","checked","SelectElementContainer","option","selectedIndex","TextareaElementContainer","IFrameElementContainer","iframe","contentWindow","tree","parseTree","documentBackgroundColor","bodyBackgroundColor","LIST_OWNERS","parseNodeTree","childNode","nextNode","isTextNode","isElementNode","isSlotElement","assignedNodes","createContainer","createsRealStackingContext","createsStackingContext","shadowRoot","isTextareaElement","isSVGElement","isSelectElement","isImageElement","isCanvasElement","isLIElement","isOLElement","isInputElement","isIFrameElement","isBodyElement","TEXT_NODE","isSVGElementNode","isVideoElement","isStyleElement","CounterState","counters","getCounterValue","getCounterValues","canReset","counterNames","ROMAN_UPPER","ARMENIAN","HEBREW","GEORGIAN","createAdditiveCounter","symbols","suffix","createCounterText","string","integer","createCounterStyleWithSymbolResolver","codePointRangeLength","isNumeric","resolver","createCounterStyleFromRange","codePointRangeStart","codePointRangeEnd","floor","createCounterStyleFromSymbols","createCJKCounter","numbers","multipliers","negativeSign","coefficient","CHINESE_INFORMAL_MULTIPLIERS","CHINESE_FORMAL_MULTIPLIERS","JAPANESE_NEGATIVE","KOREAN_NEGATIVE","appendSuffix","defaultSuffix","cjkSuffix","koreanSuffix","spaceSuffix","CJK_TEN_COEFFICIENTS","CJK_ZEROS","IGNORE_ATTRIBUTE","DocumentCloner","scrolledElements","referenceElement","quoteDepth","toIFrame","windowSize","createIFrameContainer","scrollX","defaultView","pageXOffset","scrollY","pageYOffset","cloneWindow","documentClone","iframeLoad","iframeLoader","onclone","restoreNodeScroll","scrollTo","logger","clonedReferenceElement","nodeName","fonts","ready","imagesReady","serializeDoctype","doctype","restoreOwnerScroll","adoptNode","createElementClone","createCanvasClone","createVideoClone","createStyleClone","srcset","createCustomElementClone","sheet","cssRules","css","rule","inlineImages","clonedCanvas","clonedCtx","allowTaint","putImageData","gl","attribs","getContextAttributes","preserveDrawingBuffer","video","offsetWidth","offsetHeight","blankCanvas","appendChildNode","copyStyles","ignoreElements","cloneChildNodes","assignedNode","transitionProperty","styleBefore","styleAfter","createPseudoHideStyles","resolvePseudoContent","BEFORE","AFTER","copyCSSStyles","scrollTop","scrollLeft","pseudoElt","anonymousReplacedElement","attr","counterStyle","counterState","counterType","delim","counterStates","counterType_1","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","newClassName","baseValue","destroy","CORNER","cloneIframeContainer","border","scrolling","imageReady","all","images","interval","setInterval","childNodes","readyState","clearInterval","ignoredStyleProperties","property","getPropertyValue","internalSubset","publicId","systemId","PSEUDO_HIDE_ELEMENT_STYLE","createStyles","CacheStorage","getOrigin","_link","protocol","hostname","port","isSameOrigin","_origin","setContext","Cache","_options","_cache","isBlobImage","isRenderable","loadImage","useCORS","useProxy","isInlineImage","debug","isInlineBase64Image","imageTimeout","reader_1","queryString","timeout_1","timeout","ontimeout","INLINE_SVG","INLINE_BASE64","INLINE_IMG","substr","Vector","deltaX","deltaY","lerp","BezierCurve","startControl","endControl","subdivide","firstHalf","ab","cd","abbc","bccd","dest","reverse","isBezierCurve","BoundCurves","tlh","tlv","trh","trv","brh","brv","blh","blv","factors","maxFactor","topWidth","rightHeight","bottomWidth","leftHeight","topLeftBorderDoubleOuterBox","getCurvePoints","TOP_LEFT","topRightBorderDoubleOuterBox","TOP_RIGHT","bottomRightBorderDoubleOuterBox","BOTTOM_RIGHT","bottomLeftBorderDoubleOuterBox","BOTTOM_LEFT","topLeftBorderDoubleInnerBox","topRightBorderDoubleInnerBox","bottomRightBorderDoubleInnerBox","bottomLeftBorderDoubleInnerBox","topLeftBorderStroke","topRightBorderStroke","bottomRightBorderStroke","bottomLeftBorderStroke","topLeftBorderBox","topRightBorderBox","bottomRightBorderBox","bottomLeftBorderBox","topLeftPaddingBox","topRightPaddingBox","bottomRightPaddingBox","bottomLeftPaddingBox","topLeftContentBox","topRightContentBox","bottomRightContentBox","bottomLeftContentBox","r1","r2","kappa","ox","oy","xm","ym","calculateBorderBoxPath","curves","calculatePaddingBoxPath","TransformEffect","ClipEffect","OpacityEffect","isClipEffect","equalPath","StackingContext","inlineLevel","nonInlineLevel","negativeZIndex","zeroOrAutoZIndexOrTransformedOrOpacity","positiveZIndex","nonPositionedFloats","nonPositionedInlineLevel","ElementPaint","borderBox","paddingBox","getEffects","inFlow","croplessEffects","parseStackTree","stackingContext","realStackingContext","listItems","treatAsRealStackingContext","paintContainer","listOwnerItems","parentStack","order_1","index_1","index_2","processListItems","numbering","listValue","parsePathForBorder","borderSide","createPathFromCurves","createStrokePathFromCurves","outer1","outer2","inner1","inner2","contentBox","calculateBackgroundRendering","intrinsicSize","backgroundPositioningArea","getBackgroundValueForIndex","backgroundPaintingArea","calculateBackgroundPaintingArea","backgroundImageSize","calculateBackgroundSize","sizeWidth","sizeHeight","calculateBackgroundRepeatPath","isAuto","AUTO","hasIntrinsicValue","intrinsicProportion","second","hasIntrinsicProportion","hasIntrinsicWidth","hasIntrinsicHeight","hasIntrinsicDimensions","width_3","height_3","SAMPLE_TEXT","FontMetrics","_data","_document","parseMetrics","span","margin","padding","whiteSpace","verticalAlign","baseline","offsetTop","getMetrics","Renderer","CanvasRenderer","_activeEffects","scale","fontMetrics","translate","textBaseline","applyEffects","popEffect","applyEffect","isOpacityEffect","globalAlpha","isTransformEffect","clip","restore","renderStack","renderStackContent","renderNode","paint","renderNodeBackgroundAndBorders","renderNodeContent","renderTextWithLetterSpacing","fillText","letter","measureText","createFontStyle","variant","fixIOSSystemFonts","renderTextNode","font","paintOrderLayer","textShadows","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","strokeStyle","lineWidth","lineJoin","chrome","strokeText","renderReplacedElement","box","beginPath","arc","isTextInputElement","canvasTextAlign","_f","_g","_h","_j","_k","_l","_m","_o","mask","paths","moveTo","lineTo","formatPath","closePath","point","bezierCurveTo","renderRepeat","pattern","resizeImage","renderBackgroundImage","this_1","x0","x1","y0","y1","gradient_1","top_1","rx","ry","radialGradient_1","midX","midY","invF","createPattern","createLinearGradient","addColorStop","background","isRadialGradient","gradient","calculateRadius","createRadialGradient","renderSolidBorder","curvePoints","renderDoubleBorder","outerPaths","innerPaths","parsePathForBorderDoubleOuter","parsePathForBorderDoubleInner","hasBackground","borders","borders_1","calculateBackgroundCurvedPaintingArea","deltaW","deltaH","borderBoxArea","maskOffset","shadowPaintingArea","renderDashedDottedBorder","strokePaths","boxPaths","startX","startY","endX","endY","dashLength","spaceLength","useLineDash","multiplier","numberOfDashes","minSpace","maxSpace","path1","path2","parsePathForBorderStroke","setLineDash","lineCap","stroke","calculateContentBoxPath","iOSBrokenFonts","fontFamilies","ForeignObjectRenderer","loadSerializedSVG","Logger","getTime","Context","instanceName","instanceCount","logging","html2canvas","renderElement","resourceOptions","contextOptions","windowOptions","foreignObjectRendering","cloneOptions","documentCloner","clonedElement","renderOptions","_q","_r","_t","_u","windowWidth","innerWidth","windowHeight","innerHeight","scrollWidth","clientWidth","scrollHeight","clientHeight","parseDocumentSize","parseBackgroundColor","devicePixelRatio","removeContainer","backgroundColorOverride","defaultBackgroundColor","useScreenshot","defaultOnClone","clonedDocument","svgs","getElementsByTagName","takeScreenshot","targetElement","finalOptions","originalCanvas","fixedCanvas","targetWidth","targetHeight","scaleX","scaleY","scaledWidth","scaledHeight","createFixedSizeCanvas","dataURL","screenshotTargetElement","screenshotSelectionArea","currentSelPos","currentStartPos","targetScreenshot","screenshotOptions","selectionPosition","startPosition","currentSelectionTextLength","BaseSelectionStrategy","screenshot","captureSelectionScreenshot","clientX","clientY","useSelectionScreenshot","processSelection","validateTarget","preProcess","postProcess","captureScreenshot","validateSelectionData","createBaseSelectionData","sanitizeText","getName","TextSelectionStrategy","rangyInitialized","highlighter","rangeCount","isCollapsed","ensureRangyInitialized","getRangeAt","extractTextAndIndex","getSelectionElement","prepareScreenshotParams","applyTemporaryHighlight","getRangeRect","bottom","cleanupCallback","clearTemporaryHighlight","highlightApplied","highlightElement","baseEl","selectionPos","rangy","serializeRange","searchText","searchHtml","searchHTMLContent","searchPlainText","searchRange","selectNodeContents","findOptions","caseSensitive","withinRange","testRange","findText","findTextOccurrence","walker","createTreeWalker","NodeFilter","SHOW_TEXT","currentNode","foundOccurrences","searchIndex","targetText","nodeText","isTargetMatch","targetPos","occurrenceIndex","searchStep","collapse","requestAnimationFrame","textNode","targetRange","endContainer","startContainer","borderTop","borderBottom","canSurroundContents","surroundContents","contents","extractContents","insertNode","manuallyRemoveParentTarget","initialized","init","initializeRangy","ImageSelectionStrategy","setupCompleted","isValidImageElement","imgElement","dynamicBlockParent","createImageSelectionData","imageHash","altText","filename","extractFilename","selectionText","imageData","metadata","aspectRatio","toFixed","pathname","setupImageSelection","contentRoot","wrappedCount","shouldWrapImage","wrapImageInDynamicBlock","dataset","calculatePositionData","resetSetup","isSetupCompleted","SVGSelectionStrategy","findSVGLink","svgLink","uniqueId","generateSVGUniqueId","xlinkHref","extractSVGTextContent","extractSVGMetadata","createSVGSelectionData","svgHash","Boolean","createSVGHash","displayText","extractPathFromHref","svgId","enhanceMetadata","generateIdFromHref","generateIdFromTextAndPosition","generateFallbackId","pathSegments","lastSegment","positionHash","elementInfo","childCount","btoa","textParts","titleElement","textElement","descElement","descText","metadataElement","about","rdfAbout","visual","extractVisualProperties","classes","viewBox","enhanced","boundingBox","childElementCount","hasText","hasVisualElements","accessibility","hasTitle","hasDesc","ariaLabel","role","DynamicBlockSelectionStrategy","dynamicBlock","getDynamicBlockElement","isAlreadyCommented","createDynamicBlockSelectionData","determineSelectionText","extractBlockMetadata","blockType","getBlockType","blockHash","truncated","sanitizeHTML","datasets","dimensions","extractImageMetadata","table","extractTableMetadata","extractVideoMetadata","extractIframeMetadata","rows","columns","cells","hasHeader","hasCaption","videoWidth","videoHeight","controls","autoplay","loop","muted","sandbox","getAllDynamicBlocks","getBlockStatistics","commented","uncommented","selectionStrategyFactory","strategies","defaultStrategy","initialize","registerStrategy","strategy","getStrategy","ensureInitialized","determineStrategy","isTextSelection","determineElementStrategy","svgStrategy","dynamicBlockStrategy","imageStrategy","_strategy","getRegisteredTypes","getStatistics","strategyCount","registeredTypes","setupStrategies","validateStrategy","getStrategyByElement","useSelection","isSelectionActive","currentSelection","lastRange","isCapturing","cloneRange","pageX","pageY","updateSelectionState","clearSelection","removeAllRanges","processTextSelection","processDynamicBlockSelection","processImageSelection","processSVGSelection","formatSelectionForAPI","parentCommentElement","formattedData","elementData","hasRange","rangeInfo","setupSelection","getSelectionStats","factory","currentState","isActive","hasSelection","canSelectElement","getElementSelectionType","useHoverEffects","isInitialized","hoveredElements","handleDynamicBlockMouseOver","handleDynamicBlockMouseOut","handleSVGMouseOver","originalStyles","strokeWidth","applySVGHoverEffects","handleSVGMouseOut","removeSVGHoverEffects","clearAllHoverEffects","initializeHoverEffects","destroyHoverEffects","getHoverStats","activeHovers","hoveredElementsCount","EVENTS","SELECTION_ACTIVE","COMMENT_GROUP_OPEN","COMMENT_GROUP_CLOSE","DEBUG_MODE","OPEN_COMMENT_ID","COMMENT_CREATED","COMMENT_UPDATED","COMMENT_DELETED","COMMENT_COMPLETED","HIGHLIGHT_CLICKED","SELECTION_CHANGED","COMMENTS_ENABLED","COMMENTS_DISABLED","REFRESH_HIGHLIGHTS","REFRESH_TIMELINE","smartCommentsEvents","listeners","debugMode","checkDebugMode","setupLegacyCompatibility","URLSearchParams","search","enableDebugMode","disableDebugMode","eventName","CustomEvent","detail","bubbles","cancelable","wrappedCallback","listenerKey","random","removeAllListeners","listener","triggerCommentGroupOpen","triggerCommentGroupClose","triggerSelectionActive","triggerOpenComment","triggerHighlightClicked","triggerCommentCreated","triggerCommentUpdated","triggerCommentDeleted","triggerCommentCompleted","triggerCommentsEnabled","triggerCommentsDisabled","triggerRefreshHighlights","triggerRefreshTimeline","useSelectionEvents","hoverEffects","mouseDownHandler","mouseUpHandler","mouseMoveHandler","clickHandler","isEventsBound","processUniversalSelection","processingOptions","selectionResult","generateTempId","createHighlightData","apiData","selectionEvent","handleSuccessfulSelection","handleSVGSelection","handleMouseDown","handleMouseMove","handleMouseUp","rangySelection","handleClick","unbindEvents","bindEvents","onSelectionCreate","eventHandler","createSelectionFromElement","setSingleRange","showSelectionError","getEventStats","selectionStats","errorStats","resetEventSystem","useLinkPrevention","handleLinkClick","selectOnClick","selectLinksOnClick","getAttributeNS","findLinkElement","hrefValue","contentArea","autoHideSeconds","isLinkPreventionActive","getTextNodesIn","decodeHtmlEntities","useTextHighlight","applyTextHighlight","uniqueHighlightClass","ensureClickListenerIsAttached","dataCommentId","currentApplier","createClassApplier","ignoreWhiteSpace","elementTagName","onElementCreate","spanEl","applier","classApplier","lastPipePos","textToFind","found","localIndex","matchRange","applyToRange","applyTextIndexHighlight","createdOrClassedElements","elementNode","removeTextHighlight","targetEl","hasOtherSmartCommentClass","undoToRange","hasAttributes","attributes","manuallyRemoveTextHighlight","useSelectorHighlight","applySelectorHighlight","addClickListener","classesToAdd","dynamicBlocksWithHash","image_hash","applyImageSelectorHighlight","applyGenericSelectorHighlight","removeSelectorHighlight","attachedListeners","HighlightStrategyFactory","applySVGHighlight","removeSVGHighlight","applySVGSelectorHighlight","elementsWithSvgId","matchesSVGId","expectedId","textElements","titleText","endsWith","useSVGHighlight","wordIndex","useHighlightManager","clearListenersForCommentId","clearAllListeners","commentForListener","onClick","currentDataCommentId","listenersForId","cursor","commentIdStr","getAttachedListeners","hasListenerAttached","applyHighlights","clearHighlights","highlightsToClear","spanElement","unwrapEmptySpan","removeCommentHighlight","highlightType","hasSpanElements","hasSVGElements","detectHighlightType","customCleanup","batchRemoveHighlights","__publicField","useCommentsStore","currentCommentId","activeComment","commentPosition","isCommentDialogVisible","isNewCommentDialogVisible","newCommentSelection","getCurrentComment","getCurrentCommentIndex","hasNextComment","openComments","hasPreviousComment","getNextComment","getPreviousComment","setComments","setCurrentComment","addComment","updatedData","removeComment","originalLength","idMatch","dataIdMatch","totalComments","goToNextComment","goToPreviousComment","openCommentDialog","fetchedComment","setActiveHighlight","closeCommentDialog","clearActiveHighlight","navigateComment","targetComment","openNewCommentDialog","closeNewCommentDialog","handleCommentSaved","savedComment","deletedComment","completeComment","completedComment","viewPage","specialPageUrl","util","getUrl","closeAllDialogs","scrollIntoView","specificClass","highlightElements","dataElements","firstActiveElement","behavior","handleReplyAdded","replyData","replies","replyAdded","openCommentDialogById","checkAndOpenCommentFromUrl","urlParams","openCommentById","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_5","_hoisted_6","reply","isFocused","hasContent","isSubmitting","replyAriaLabel","authorName","author","showActions","canSubmit","onFocus","onBlur","onInput","submitReply","datetime","cancelReply","textarea","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","_normalizeClass","$event","_withDirectives","disabled","_hoisted_7","commentText","unescapeHtml","ReplyForm","ReplyList","CommentMessage","_Fragment","_renderList","_component_comment_message","CommentActions","commentsStore","align","when","items","filteredActions","dropdownStates","toggleDropdown","handleSubItemClick","subItem","_normalizeStyle","CommentBody","panelStyle","viewportHeight","maxTop","enhancedComment","replyText","modifiedBy","modifiedDateTime","handleNext","handlePrevious","handleReplySubmitted","_component_comment_actions","onClose","onDelete","onComplete","onView","onNext","onPrevious","_component_comment_body","_component_reply_list","_component_reply_form","onReplySubmitted","_sfc_main","isSaving","computedTitle","canSave","dialogStyle","handleCancel","handleSave","handleGlobalKeydown","handleKeydown","focusInput","focus","handleBackdropClick","manageBodyClass","selectedText","selectedImage","commentPlaceholder","saving","_hoisted_9","_hoisted_13","_hoisted_10","onKeydown","_hoisted_12","_hoisted_14","_hoisted_17","appStateStore","positions","brokenCommentHover","visible","handleResize","handleScroll","brokenCommentMessage","containerStyle","bodyElement","positionedComments","processedComments","usedPositions","brokenComments","normalComments","positionTop","isBroken","adjustedPosition","itemStyle","bottomBasePosition","bottomPosition","handleCommentClick","timelineItem","posimg","handleMouseOver","borderRadius","handleMouseOut","NewCommentDialog","CommentTimeline","broken","hasReplies","onMouseover","onMouseout","smartCommentsSetup","linkPrevention","highlightsManager","isRefreshing","getTargetElement","handleHighlightClick","reloadHighlightsAndComments","setupHighlightRefreshListener","handleHighlightRefresh","reloadHighlights","useHighlightOrchestrator","keyboardShortcuts","setupKeyboardShortcuts","useKeyboardShortcuts","updateAnnotateTooltipText","updateButtonOpenText","setupCustomPropertiesWatchers","annotateTooltipText","buttonOpenText","stopAnnotateWatcher","newText","stopButtonWatcher","useCustomProperties","eventHandlers","setupSmartCommentsEvents","cleanupFunctions","setEnabled","useSmartCommentsEventHandlers","urlNavigation","setupUrlNavigation","handlePopState","checkUrlParameters","useUrlNavigation","selectionEvents","setupSystems","stateNowEnabled","enableSmartComments","disableSmartComments","handleNewSelection","useSelection$1","handleCommentNavigation","navigationData","_createBlock","_component_comment","onNavigate","onReplyAdded","_component_new_comment_dialog","onSave","onCancel","_component_comment_timeline","exports","OBJECT","FUNCTION","UNDEFINED","domRangeProperties","domRangeMethods","textRangeProperties","textRangeMethods","isHostMethod","isHostObject","isHostProperty","createMultiplePropertyTest","testFunc","areHostMethods","areHostObjects","areHostProperties","isTextRange","getBody","addListener","modules","isBrowser","func","features","alertOnFail","alertOnWarn","preferTextRange","autoInitialize","rangyAutoInitialize","consoleLog","alertOrLog","shouldAlert","alert","fail","reason","createOptions","optionsParam","defaults","toArray","arrayLike","eventType","attachEvent","initListeners","getErrorDesc","ex","implementsDomRange","implementsTextRange","createTextRange","module","moduleName","Module","deprecationNotice","deprecated","replacement","createAliasForDeprecatedMethod","addInitListener","shimListeners","shim","win","dependencies","initializer","createModule","initFunc","newModule","RangePrototype","SelectionPrototype","addShimListener","createMissingNativeApi","requiredModule","requiredModuleNames","createError","createCoreModule","rangePrototype","selectionPrototype","UNDEF","arrayContains","isHtmlNamespace","ns","namespaceURI","getNodeIndex","getNodeLength","getCommonAncestor","node1","node2","ancestors","isAncestorOf","ancestor","descendant","selfIsAncestor","isOrIsAncestorOf","getClosestAncestorIn","isCharacterDataNode","isTextOrCommentNode","insertAfter","precedingNode","splitDataNode","positionsToPreserve","newNode","deleteData","getDocument","getWindow","parentWindow","getIframeDocument","iframeEl","contentDocument","getIframeWindow","isWindow","getContentDocument","methodName","getRootContainer","comparePoints","nodeA","offsetA","nodeB","offsetB","nodeC","childA","childB","getComputedStyleProperty","crashyTextNodes","isBrokenNode","inspectNode","idAttr","fragmentFromNodeChildren","fragment","createDocumentFragment","createTestElement","contentEditable","bodyFirstChild","removeNode","NodeIterator","createIterator","DomPosition","DOMException","codeName","code","currentStyle","_current","hasNext","detach","equals","inspect","INDEX_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","INVALID_NODE_TYPE_ERR","dom","isNonTextPartiallySelected","getRangeDocument","getRangeRoot","getBoundaryBeforeNode","getBoundaryAfterNode","insertNodeAtPosition","firstNodeInserted","rangesIntersect","rangeA","rangeB","touchingIsIntersecting","assertRangeValid","startComparison","startOffset","endOffset","endComparison","cloneSubtree","partiallySelected","subIterator","frag","isPartiallySelectedSubtree","getSubtreeIterator","iterateSubtree","rangeIterator","iteratorState","it","subRangeIterator","deleteSubtree","extractSubtree","getNodesInRange","nodeTypes","regex","filterNodeTypes","filterExists","RegExp","nodes","RangeIterator","clonePartiallySelectedTextNodes","collapsed","so","eo","isSingleCharacterDataNode","_first","_last","subRange","Range","updateBoundaries","beforeAfterNodeTypes","rootContainerNodeTypes","readonlyNodeTypes","insertableNodeTypes","surroundNodeTypes","createAncestorFinder","getDocumentOrFragmentContainer","getReadonlyAncestor","getDocTypeNotationEntityAncestor","getElementAncestor","assertNoDocTypeNotationEntityAncestor","allowSelf","assertValidNodeType","invalidTypes","assertValidOffset","assertSameDocumentOrFragment","assertNodeNotReadOnly","assertNode","isValidOffset","isRangeValid","styleEl","htmlParsingConforms","createContextualFragment","fragmentStr","splitRangeBoundaries","startEndSame","setStartAndEnd","rangeToHtml","cloneContents","rangeProperties","s2s","s2e","e2e","e2s","n_b","n_a","n_b_a","n_i","copyComparisonConstantsToObject","START_TO_START","START_TO_END","END_TO_END","END_TO_START","NODE_BEFORE","NODE_AFTER","NODE_BEFORE_AND_AFTER","NODE_INSIDE","copyComparisonConstants","createRangeContentRemover","remover","boundaryUpdater","boundary","returnValue","createPrototypeRange","createBeforeAfterNodeSetter","isBefore","isStart","setRangeStart","setRangeEnd","F","setBoundary","setStartBefore","setStartAfter","setEndBefore","setEndAfter","deleteContents","boundariesInvalid","splitBoundaries","splitBoundariesPreservingPositions","normalizeBoundaries","sibling","mergeForward","appendData","mergeBackward","nodeLength","insertData","nodeIndex","normalizeStart","endNode","startNode","collapseToPoint","updateCollapsedAndCommonAncestor","compareBoundaryPoints","how","prefixA","prefixB","hasChildNodes","compareNode","comparePoint","intersectsNode","isPointInRange","intersectsRange","intersectsOrTouchesRange","intersection","intersectionRange","union","unionRange","containsNode","allowPartial","containsNodeContents","containsRange","containsNodeText","nodeRange","getNodes","lastTextNode","collapseBefore","collapseAfter","getBookmark","containerNode","preSelectionRange","moveToBookmark","bookmark","charIndex","nextCharIndex","nodeStack","foundStart","rangesEqual","DomRange","WrappedRange","WrappedTextRange","rangeProto","updateRangeProperties","nativeRange","updateNativeRange","startMoved","endMoved","nativeRangeDifferent","refresh","testTextNode","oppositeName","range2","createNativeRange","getTextRangeContainerElement","textRange","parentEl","duplicate","startEl","endEl","startEndContainer","textRangeIsCollapsed","compareEndPoints","getTextRangeBoundaryPosition","wholeRangeContainerElement","startInfo","workingRange","containerElement","canHaveHTML","boundaryPosition","nodeInfo","workingNode","comparison","previousNode","boundaryNode","workingComparisonType","childNodeCount","moveToElementText","setEndPoint","tempRange","rangeLength","moveStart","createBoundaryTextRange","boundaryParent","boundaryOffset","nodeIsDataNode","startBoundary","rangeContainerElement","rangeToTextRange","startRange","endRange","toTextRange","globalObj","createRangyRange","checkSelectionRanges","getNativeSelection","selectionIsCollapsed","BOOLEAN","NUMBER","CONTROL","isDirectionBackward","WrappedSelection","getWinSelection","winParam","getDocSelection","winSelectionIsBackward","sel","backward","anchorNode","anchorOffset","focusNode","focusOffset","implementsWinGetSelection","implementsDocSelection","useDocumentSelection","isSelectionValid","nativeSel","testSelection","selectionHasAnchorAndFocus","selectionHasExtend","selectionHasSetBaseAndExtent","selectionHasRangeCount","selectionSupportsMultipleRanges","collapsedNonEditableSelectionsSupported","addRangeBackwardToNative","nativeSelection","addRange","getNativeRange","originalSelectionRangeCount","selectionHasMultipleRanges","originalSelectionRanges","originalSelectionBackward","testEl","chromeMatch","appVersion","testControlRange","getSelectionRangeAt","implementsControlRange","updateAnchorAndFocusFromRange","anchorPrefix","focusPrefix","updateAnchorAndFocusFromNativeSelection","updateEmptySelection","_ranges","updateType","rangeContainsSingleElement","rangeNodes","getSingleElementFromRange","updateFromTextRange","wrappedRange","updateControlSelection","docSelection","controlRange","addRangeToControlSelection","rangeElement","newControlRange","createControlRange","select","deleteProperties","cachedRangySelections","actOnCachedSelection","docSel","refreshSelection","selProto","createControlSelection","ranges","addRangeBackward","previousRangeCount","clonedNativeRange","selectionIsBackward","setRanges","empty","checkForChanges","oldRanges","oldAnchorNode","oldAnchorOffset","removeRangeManually","getAllRanges","assertNodeInSameDocument","createStartOrEndSetter","isBackward","rangeInspects","removeRange","removed","isBackwards","rangeTexts","collapseToStart","collapseToEnd","selectAllChildren","setBaseAndExtent","deleteFromDocument","eachRange","callMethodOnEachRange","changeEachRange","rangeBookmarks","rangeBookmark","selRanges","saveRanges","restoreRanges","rangeHtmls","getNativeTextRange","detachAll","Selection","docReady","loadHandler","require$$0","defaultTagName","createElementNSSupported","each","classNameContainsClass","fullClassName","addClass","classNameSupported","elClass","removeClass","matched","whiteSpaceBefore","whiteSpaceAfter","getClass","sortClassName","getSortedClassName","haveSameClasses","el1","el2","hasAllClasses","canTextBeStyled","movePosition","oldParent","oldIndex","newParent","posNode","posOffset","newOffset","movePositionWhenRemovingNode","movePreservingPositions","removePreservingPositions","moveChildrenPreservingPositions","replaceWithOwnChildrenPreservingPositions","rangeSelectsAnyText","textNodeRange","getEffectiveTextNodes","elementsHaveSameNonClassAttributes","attr1","attr2","getNamedItem","specified","elementHasNonClassAttributes","exceptions","isEditableElement","isContentEditable","isEditingHost","designMode","isEditable","inlineDisplayRegex","isNonInlineElement","htmlNonWhiteSpaceRegex","isUnrenderedWhiteSpaceNode","getRangeBoundaries","updateRangesFromBoundaries","isSplitPoint","splitNodeAt","descendantNode","descendantOffset","splitAtStart","descendantIndex","newChildIndex","newNodeIndex","areElementsMergeable","createAdjacentMergeableTextNodeGetter","forward","siblingPropName","checkParentElement","adjacentNode","adjacentNodeChild","getPreviousMergeableTextNode","getNextMergeableTextNode","Merge","firstNode","isElementMerge","firstTextNode","doMerge","firstTextNodeIndex","combinedTextLength","getLength","optionProperties","attrNamesForProperties","ClassApplier","tagNames","cssClass","elementPropertiesFromOptions","elementAttributes","elementProperties","attrExceptions","copyPropertiesToElement","attrValue","elementSortedClassName","applyToAnyTagName","applyToEditableOnly","useExistingElements","removeEmptyElements","createCopy","elStyle","elPropsStyle","propValue","elPropValue","elProps","copyAttributesToElement","appliesToElement","getEmptyElements","getSelfOrAncestorWithClass","isModifiable","isIgnorableWhiteSpaceNode","postApply","isUndo","currentMerge","precedingTextNode","lastNode","merges","rangeStartNode","rangeEndNode","rangeStartOffset","rangeEndOffset","nextTextNode","elementHasProperties","elementHasAttributes","applyToTextNode","textNodeParent","isRemovable","isEmptyContainer","removeEmptyContainers","nodesToRemove","rangesToPreserve","undoToTextNode","ancestorWithClass","ancestorRange","splitAncestorWithClass","undoToAncestor","emptyElements","applyToRanges","applyToSelection","undoToRanges","undoToSelection","isAppliedToRange","isAppliedToRanges","isAppliedToSelection","toggleRange","toggleSelection","getElementsWithClassIntersectingRange","hasSameClasses","replaceWithOwnChildren","CssClassApplier","nextHighlightId","compareHighlights","h1","h2","characterRange","getContainerElement","highlighterTypes","HighlighterType","converterCreator","registerHighlighterType","getConverter","highlighterType","CharacterRange","converter","intersects","charRange","isContiguousWith","getComplements","fromCharacterRange","textContentConverter","rangeToCharacterRange","characterRangeToRange","serializeSelection","rangeInfos","restoreSelection","savedSelection","Highlight","containerElementId","applied","Highlighter","classAppliers","textRangeModule","TextRange","toCharacterRange","selectCharacters","saveCharacterRanges","restoreCharacterRanges","getRange","fromRange","getText","containsElement","unapply","getHighlightElements","addClassApplier","getHighlightForElement","removeHighlights","removeAllHighlights","getIntersectingHighlights","intersectingHighlights","highlightCharacterRanges","charRanges","containerElementRange","containerElementCharRange","highlightCharRange","isSameClassApplier","highlightsToKeep","splitHighlight","highlightsToRemove","exclusive","rangeToAdd","highlightToRemove","newHighlights","highlightRanges","selCharRanges","scopedRange","highlightSelection","serializedSelection","unhighlightSelection","getHighlightsInSelection","selectionOverlapsHighlight","serialize","serializedType","serializedHighlights","convertType","serializationConverter","serializeHighlightText","deserialize","serialized","regexResult","serializationType","firstHighlight","exec","createHighlighter","rangeCharacterOffsetConverterType","decodeURIComponent","crc32","utf8encode","utf8CharCodes","cachedCrcTable","buildCRCTable","crc","getCrcTable","crcTable","escapeTextForHtml","nodeToInfoString","infoParts","getElementChecksum","serializePosition","rootNode","pathParts","deserializePosition","nodeIndices","omitChecksum","deserializeRegex","deserializeRange","checksum","rootNodeChecksum","canDeserializeRange","serializedRanges","deserializeSelection","canDeserializeSelection","cookieName","getSerializedSelectionFromCookie","cookie","nameVal","restoreSelectionFromCookie","saveSelectionCookie","expires","toUTCString","domain","secure","CHARACTER","WORD","spacesRegex","spacesMinusLineBreaksRegex","allWhiteSpaceRegex","nonLineBreakWhiteSpaceRegex","defaultLanguage","trailingSpaceBeforeBrCollapses","trailingSpaceBeforeBlockCollapses","defaultTokenizer","wordOptions","word","tokenRanges","createTokenRange","isWord","wordStart","wordEnd","lastWordEnd","wordRegex","includeTrailingSpace","convertCharRangeToToken","tokenRange","tokenChars","tokenize","defaultCharacterOptions","includeBlockContentTrailingSpace","includeSpaceBeforeBr","includeSpaceBeforeBlock","includePreLineTrailingSpace","ignoreCharacters","normalizeIgnoredCharacters","ignoredCharacters","ignoredChars","ignoredCharsArray","char1","char2","defaultCaretCharacterOptions","defaultWordOptions","en","defaultFindOptions","wholeWordsOnly","characterOptions","defaultMoveOptions","defaultExpandOptions","trimStart","trimEnd","defaultWordIteratorOptions","createWordOptions","lang","language","createNestedOptions","tableCssDisplayBlock","defaultDisplayValueForTag","caption","colgroup","col","thead","tbody","tfoot","tr","td","th","getComputedDisplay","isHidden","getAncestorsAndSelf","isVisibilityHiddenTextNode","containsPositions","getAncestors","nextNodeDescendants","excludeChildren","isWhitespaceNode","computedWhiteSpace","isCollapsedWhitespaceNode","isCollapsedNode","isIgnoredNode","createCachingGetter","objProperty","NodeWrapper","session","nodeProto","getPosition","Position","NON_SPACE","UNCOLLAPSIBLE_SPACE","COLLAPSIBLE_SPACE","TRAILING_SPACE_BEFORE_BLOCK","TRAILING_SPACE_IN_BLOCK","TRAILING_SPACE_BEFORE_BR","PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK","TRAILING_LINE_BREAK_AFTER_BR","INCLUDED_TRAILING_LINE_BREAK_AFTER_BR","nodeWrapper","inspectPosition","isWhitespace","isCollapsedWhitespace","isIgnored","getTextNodeInfo","spaceRegex","collapseSpaces","cssWhitespace","preLine","hasInnerText","posAfterEl","firstPosInEl","endPos","prepopulateChar","isDefinitelyNonEmpty","previousVisible","nextVisible","isRenderedBlock","brs","getTrailingSpace","getNodeWrapper","getLeadingSpace","positionProto","character","characterType","isBr","prepopulatedChar","visibleChar","charType","finalizedChar","textChar","nodePassed","checkForTrailingSpace","checkForLeadingSpace","isCharInvariant","resolveLeadingAndTrailingSpaces","trailingSpace","isTrailingSpace","leadingSpace","isLeadingSpace","getPrecedingUncollapsedPosition","getCharacter","thisChar","isIgnoredCharacter","cachedChar","previousPos","collapsible","gotPreviousPos","getPreviousPos","nextUncollapsed","nextOffset","previousOffset","newPos","currentSession","Session","createWrapperCache","nodeProperty","wrappersByProperty","uniqueIDSupported","initCaches","elementsCache","elementCache","uniqueID","elWrapper","textNodeCache","otherNodeCache","wrapperCache","getRangeBoundaryPosition","startSession","endSession","getSession","createCharacterIterator","startPos","finished","charPos","previousTextPos","returnPreviousTextPos","rewind","dispose","arrayIndexOf","createTokenizedTextProvider","forwardIterator","backwardIterator","consumeWord","newChars","passedWordBoundary","insideWord","forwardChars","backwardChars","forwardTokensBuffer","backwardTokensBuffer","nextEndToken","lastToken","previousStartToken","movePositionBy","currentPos","charIterator","unitsMoved","absCount","tokenizedTextProvider","createRangeCharacterIterator","rangeStart","rangeEnd","getRangeCharacters","isWholeWord","expand","findTextFromPosition","initialPos","searchTerm","isRegex","searchScopeRange","currentChar","matchStartIndex","matchEndIndex","insideRegexMatch","handleMatch","startIndex","endIndex","createEntryPointFunction","sessionRunning","createRangeBoundaryMover","moveOptions","boundaryIsStart","moveResult","createRangeTrimmer","trimCharCount","trimmed","createSelectionTrimmer","moveEnd","startTrimmed","endTrimmed","expandOptions","endToken","newEndPos","startToken","newStartPos","rangeStartsBeforeNode","rangeBetween","searchTermParam","findResult","wrappedAround","pasteHtml","saved","createWordIterator","iteratorOptions","noMutation","createPosition","rangy$1","rootElement","observer","observe","attributeOldValue","attributeFilter","subtree","initializeScreenshotTargetManager","loader","using","appElement","toBeInstalled","createPinia","SmartCommentsComponent","getParamValue"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,25,60,61,62,63,64]}