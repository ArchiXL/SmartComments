(function(factory,root){if(typeof define=="function"&&define.amd){define(factory);}else if(typeof module!="undefined"&&typeof exports=="object"){module.exports=factory();}else{root.rangy=factory();}})(function(){var OBJECT="object",FUNCTION="function",UNDEFINED="undefined";var domRangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var domRangeMethods=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];var textRangeProperties=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];var textRangeMethods=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function isHostMethod(o,p){var t=typeof o[p];return t==FUNCTION||(!!(t==OBJECT&&o[p]))||t=="unknown";
}function isHostObject(o,p){return!!(typeof o[p]==OBJECT&&o[p]);}function isHostProperty(o,p){return typeof o[p]!=UNDEFINED;}function createMultiplePropertyTest(testFunc){return function(o,props){var i=props.length;while(i--){if(!testFunc(o,props[i])){return false;}}return true;};}var areHostMethods=createMultiplePropertyTest(isHostMethod);var areHostObjects=createMultiplePropertyTest(isHostObject);var areHostProperties=createMultiplePropertyTest(isHostProperty);function isTextRange(range){return range&&areHostMethods(range,textRangeMethods)&&areHostProperties(range,textRangeProperties);}function getBody(doc){return isHostObject(doc,"body")?doc.body:doc.getElementsByTagName("body")[0];}var forEach=[].forEach?function(arr,func){arr.forEach(func);}:function(arr,func){for(var i=0,len=arr.length;i<len;++i){func(arr[i],i);}};var modules={};var isBrowser=(typeof window!=UNDEFINED&&typeof document!=UNDEFINED);var util={isHostMethod:isHostMethod,isHostObject:isHostObject,isHostProperty:isHostProperty,
areHostMethods:areHostMethods,areHostObjects:areHostObjects,areHostProperties:areHostProperties,isTextRange:isTextRange,getBody:getBody,forEach:forEach};var api={version:"1.3.1",initialized:false,isBrowser:isBrowser,supported:true,util:util,features:{},modules:modules,config:{alertOnFail:false,alertOnWarn:false,preferTextRange:false,autoInitialize:(typeof rangyAutoInitialize==UNDEFINED)?true:rangyAutoInitialize}};function consoleLog(msg){if(typeof console!=UNDEFINED&&isHostMethod(console,"log")){console.log(msg);}}function alertOrLog(msg,shouldAlert){if(isBrowser&&shouldAlert){alert(msg);}else{consoleLog(msg);}}function fail(reason){api.initialized=true;api.supported=false;alertOrLog("Rangy is not supported in this environment. Reason: "+reason,api.config.alertOnFail);}api.fail=fail;function warn(msg){alertOrLog("Rangy warning: "+msg,api.config.alertOnWarn);}api.warn=warn;var extend;if({}.hasOwnProperty){util.extend=extend=function(obj,props,deep){var o,p;for(var i in props){if(props.hasOwnProperty(i)){
o=obj[i];p=props[i];if(deep&&o!==null&&typeof o=="object"&&p!==null&&typeof p=="object"){extend(o,p,true);}obj[i]=p;}}if(props.hasOwnProperty("toString")){obj.toString=props.toString;}return obj;};util.createOptions=function(optionsParam,defaults){var options={};extend(options,defaults);if(optionsParam){extend(options,optionsParam);}return options;};}else{fail("hasOwnProperty not supported");}if(!isBrowser){fail("Rangy can only run in a browser");}(function(){var toArray;if(isBrowser){var el=document.createElement("div");el.appendChild(document.createElement("span"));var slice=[].slice;try{if(slice.call(el.childNodes,0)[0].nodeType==1){toArray=function(arrayLike){return slice.call(arrayLike,0);};}}catch(e){}}if(!toArray){toArray=function(arrayLike){var arr=[];for(var i=0,len=arrayLike.length;i<len;++i){arr[i]=arrayLike[i];}return arr;};}util.toArray=toArray;})();var addListener;if(isBrowser){if(isHostMethod(document,"addEventListener")){addListener=function(obj,eventType,listener){obj.addEventListener(eventType,listener,false);
};}else if(isHostMethod(document,"attachEvent")){addListener=function(obj,eventType,listener){obj.attachEvent("on"+eventType,listener);};}else{fail("Document does not have required addEventListener or attachEvent method");}util.addListener=addListener;}var initListeners=[];function getErrorDesc(ex){return ex.message||ex.description||String(ex);}function init(){if(!isBrowser||api.initialized){return;}var testRange;var implementsDomRange=false,implementsTextRange=false;if(isHostMethod(document,"createRange")){testRange=document.createRange();if(areHostMethods(testRange,domRangeMethods)&&areHostProperties(testRange,domRangeProperties)){implementsDomRange=true;}}var body=getBody(document);if(!body||body.nodeName.toLowerCase()!="body"){fail("No body element found");return;}if(body&&isHostMethod(body,"createTextRange")){testRange=body.createTextRange();if(isTextRange(testRange)){implementsTextRange=true;}}if(!implementsDomRange&&!implementsTextRange){fail("Neither Range nor TextRange are available");
return;}api.initialized=true;api.features={implementsDomRange:implementsDomRange,implementsTextRange:implementsTextRange};var module,errorMessage;for(var moduleName in modules){if((module=modules[moduleName])instanceof Module){module.init(module,api);}}for(var i=0,len=initListeners.length;i<len;++i){try{initListeners[i](api);}catch(ex){errorMessage="Rangy init listener threw an exception. Continuing. Detail: "+getErrorDesc(ex);consoleLog(errorMessage);}}}function deprecationNotice(deprecated,replacement,module){if(module){deprecated+=" in module "+module.name;}api.warn("DEPRECATED: "+deprecated+" is deprecated. Please use "+replacement+" instead.");}function createAliasForDeprecatedMethod(owner,deprecated,replacement,module){owner[deprecated]=function(){deprecationNotice(deprecated,replacement,module);return owner[replacement].apply(owner,util.toArray(arguments));};}util.deprecationNotice=deprecationNotice;util.createAliasForDeprecatedMethod=createAliasForDeprecatedMethod;api.init=init;
api.addInitListener=function(listener){if(api.initialized){listener(api);}else{initListeners.push(listener);}};var shimListeners=[];api.addShimListener=function(listener){shimListeners.push(listener);};function shim(win){win=win||window;init();for(var i=0,len=shimListeners.length;i<len;++i){shimListeners[i](win);}}if(isBrowser){api.shim=api.createMissingNativeApi=shim;createAliasForDeprecatedMethod(api,"createMissingNativeApi","shim");}function Module(name,dependencies,initializer){this.name=name;this.dependencies=dependencies;this.initialized=false;this.supported=false;this.initializer=initializer;}Module.prototype={init:function(){var requiredModuleNames=this.dependencies||[];for(var i=0,len=requiredModuleNames.length,requiredModule,moduleName;i<len;++i){moduleName=requiredModuleNames[i];requiredModule=modules[moduleName];if(!requiredModule||!(requiredModule instanceof Module)){throw new Error("required module '"+moduleName+"' not found");}requiredModule.init();if(!requiredModule.supported){
throw new Error("required module '"+moduleName+"' not supported");}}this.initializer(this);},fail:function(reason){this.initialized=true;this.supported=false;throw new Error(reason);},warn:function(msg){api.warn("Module "+this.name+": "+msg);},deprecationNotice:function(deprecated,replacement){api.warn("DEPRECATED: "+deprecated+" in module "+this.name+" is deprecated. Please use "+replacement+" instead");},createError:function(msg){return new Error("Error in Rangy "+this.name+" module: "+msg);}};function createModule(name,dependencies,initFunc){var newModule=new Module(name,dependencies,function(module){if(!module.initialized){module.initialized=true;try{initFunc(api,module);module.supported=true;}catch(ex){var errorMessage="Module '"+name+"' failed to load: "+getErrorDesc(ex);consoleLog(errorMessage);if(ex.stack){consoleLog(ex.stack);}}}});modules[name]=newModule;return newModule;}api.createModule=function(name){var initFunc,dependencies;if(arguments.length==2){initFunc=arguments[1];
dependencies=[];}else{initFunc=arguments[2];dependencies=arguments[1];}var module=createModule(name,dependencies,initFunc);if(api.initialized&&api.supported){module.init();}};api.createCoreModule=function(name,dependencies,initFunc){createModule(name,dependencies,initFunc);};function RangePrototype(){}api.RangePrototype=RangePrototype;api.rangePrototype=new RangePrototype();function SelectionPrototype(){}api.selectionPrototype=new SelectionPrototype();api.createCoreModule("DomUtil",[],function(api,module){var UNDEF="undefined";var util=api.util;var getBody=util.getBody;if(!util.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){module.fail("document missing a Node creation method");}if(!util.isHostMethod(document,"getElementsByTagName")){module.fail("document missing getElementsByTagName method");}var el=document.createElement("div");if(!util.areHostMethods(el,["insertBefore","appendChild","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"]))){
module.fail("Incomplete Element implementation");}if(!util.isHostProperty(el,"innerHTML")){module.fail("Element is missing innerHTML property");}var textNode=document.createTextNode("test");if(!util.areHostMethods(textNode,["splitText","deleteData","insertData","appendData","cloneNode"]||!util.areHostObjects(el,["previousSibling","nextSibling","childNodes","parentNode"])||!util.areHostProperties(textNode,["data"]))){module.fail("Incomplete Text Node implementation");}var arrayContains=function(arr,val){var i=arr.length;while(i--){if(arr[i]===val){return true;}}return false;};function isHtmlNamespace(node){var ns;return typeof node.namespaceURI==UNDEF||((ns=node.namespaceURI)===null||ns=="http://www.w3.org/1999/xhtml");}function parentElement(node){var parent=node.parentNode;return(parent.nodeType==1)?parent:null;}function getNodeIndex(node){var i=0;while((node=node.previousSibling)){++i;}return i;}function getNodeLength(node){switch(node.nodeType){case 7:case 10:return 0;case 3:case 8:
return node.length;default:return node.childNodes.length;}}function getCommonAncestor(node1,node2){var ancestors=[],n;for(n=node1;n;n=n.parentNode){ancestors.push(n);}for(n=node2;n;n=n.parentNode){if(arrayContains(ancestors,n)){return n;}}return null;}function isAncestorOf(ancestor,descendant,selfIsAncestor){var n=selfIsAncestor?descendant:descendant.parentNode;while(n){if(n===ancestor){return true;}else{n=n.parentNode;}}return false;}function isOrIsAncestorOf(ancestor,descendant){return isAncestorOf(ancestor,descendant,true);}function getClosestAncestorIn(node,ancestor,selfIsAncestor){var p,n=selfIsAncestor?node:node.parentNode;while(n){p=n.parentNode;if(p===ancestor){return n;}n=p;}return null;}function isCharacterDataNode(node){var t=node.nodeType;return t==3||t==4||t==8;}function isTextOrCommentNode(node){if(!node){return false;}var t=node.nodeType;return t==3||t==8;}function insertAfter(node,precedingNode){var nextNode=precedingNode.nextSibling,parent=precedingNode.parentNode;if(nextNode){
parent.insertBefore(node,nextNode);}else{parent.appendChild(node);}return node;}function splitDataNode(node,index,positionsToPreserve){var newNode=node.cloneNode(false);newNode.deleteData(0,index);node.deleteData(index,node.length-index);insertAfter(newNode,node);if(positionsToPreserve){for(var i=0,position;position=positionsToPreserve[i++];){if(position.node==node&&position.offset>index){position.node=newNode;position.offset-=index;}else if(position.node==node.parentNode&&position.offset>getNodeIndex(node)){++position.offset;}}}return newNode;}function getDocument(node){if(node.nodeType==9){return node;}else if(typeof node.ownerDocument!=UNDEF){return node.ownerDocument;}else if(typeof node.document!=UNDEF){return node.document;}else if(node.parentNode){return getDocument(node.parentNode);}else{throw module.createError("getDocument: no document found for node");}}function getWindow(node){var doc=getDocument(node);if(typeof doc.defaultView!=UNDEF){return doc.defaultView;}else if(typeof doc.parentWindow!=UNDEF){
return doc.parentWindow;}else{throw module.createError("Cannot get a window object for node");}}function getIframeDocument(iframeEl){if(typeof iframeEl.contentDocument!=UNDEF){return iframeEl.contentDocument;}else if(typeof iframeEl.contentWindow!=UNDEF){return iframeEl.contentWindow.document;}else{throw module.createError("getIframeDocument: No Document object found for iframe element");}}function getIframeWindow(iframeEl){if(typeof iframeEl.contentWindow!=UNDEF){return iframeEl.contentWindow;}else if(typeof iframeEl.contentDocument!=UNDEF){return iframeEl.contentDocument.defaultView;}else{throw module.createError("getIframeWindow: No Window object found for iframe element");}}function isWindow(obj){return obj&&util.isHostMethod(obj,"setTimeout")&&util.isHostObject(obj,"document");}function getContentDocument(obj,module,methodName){var doc;if(!obj){doc=document;}else if(util.isHostProperty(obj,"nodeType")){doc=(obj.nodeType==1&&obj.tagName.toLowerCase()=="iframe")?getIframeDocument(obj):getDocument(obj);
}else if(isWindow(obj)){doc=obj.document;}if(!doc){throw module.createError(methodName+"(): Parameter must be a Window object or DOM node");}return doc;}function getRootContainer(node){var parent;while((parent=node.parentNode)){node=parent;}return node;}function comparePoints(nodeA,offsetA,nodeB,offsetB){var nodeC,root,childA,childB,n;if(nodeA==nodeB){return offsetA===offsetB?0:(offsetA<offsetB)?-1:1;}else if((nodeC=getClosestAncestorIn(nodeB,nodeA,true))){return offsetA<=getNodeIndex(nodeC)?-1:1;}else if((nodeC=getClosestAncestorIn(nodeA,nodeB,true))){return getNodeIndex(nodeC)<offsetB?-1:1;}else{root=getCommonAncestor(nodeA,nodeB);if(!root){throw new Error("comparePoints error: nodes have no common ancestor");}childA=(nodeA===root)?root:getClosestAncestorIn(nodeA,root,true);childB=(nodeB===root)?root:getClosestAncestorIn(nodeB,root,true);if(childA===childB){throw module.createError("comparePoints got to case 4 and childA and childB are the same!");}else{n=root.firstChild;while(n){if(n===childA){
return-1;}else if(n===childB){return 1;}n=n.nextSibling;}}}}var crashyTextNodes=false;function isBrokenNode(node){var n;try{n=node.parentNode;return false;}catch(e){return true;}}(function(){var el=document.createElement("b");el.innerHTML="1";var textNode=el.firstChild;el.innerHTML="<br />";crashyTextNodes=isBrokenNode(textNode);api.features.crashyTextNodes=crashyTextNodes;})();function inspectNode(node){if(!node){return"[No node]";}if(crashyTextNodes&&isBrokenNode(node)){return"[Broken node]";}if(isCharacterDataNode(node)){return'"'+node.data+'"';}if(node.nodeType==1){var idAttr=node.id?' id="'+node.id+'"':"";return"<"+node.nodeName+idAttr+">[index:"+getNodeIndex(node)+",length:"+node.childNodes.length+"]["+(node.innerHTML||"[innerHTML not supported]").slice(0,25)+"]";}return node.nodeName;}function fragmentFromNodeChildren(node){var fragment=getDocument(node).createDocumentFragment(),child;while((child=node.firstChild)){fragment.appendChild(child);}return fragment;}var getComputedStyleProperty;
if(typeof window.getComputedStyle!=UNDEF){getComputedStyleProperty=function(el,propName){return getWindow(el).getComputedStyle(el,null)[propName];};}else if(typeof document.documentElement.currentStyle!=UNDEF){getComputedStyleProperty=function(el,propName){return el.currentStyle?el.currentStyle[propName]:"";};}else{module.fail("No means of obtaining computed style properties found");}function createTestElement(doc,html,contentEditable){var body=getBody(doc);var el=doc.createElement("div");el.contentEditable=""+!!contentEditable;if(html){el.innerHTML=html;}var bodyFirstChild=body.firstChild;if(bodyFirstChild){body.insertBefore(el,bodyFirstChild);}else{body.appendChild(el);}return el;}function removeNode(node){return node.parentNode.removeChild(node);}function NodeIterator(root){this.root=root;this._next=root;}NodeIterator.prototype={_current:null,hasNext:function(){return!!this._next;},next:function(){var n=this._current=this._next;var child,next;if(this._current){child=n.firstChild;if(child){
this._next=child;}else{next=null;while((n!==this.root)&&!(next=n.nextSibling)){n=n.parentNode;}this._next=next;}}return this._current;},detach:function(){this._current=this._next=this.root=null;}};function createIterator(root){return new NodeIterator(root);}function DomPosition(node,offset){this.node=node;this.offset=offset;}DomPosition.prototype={equals:function(pos){return!!pos&&this.node===pos.node&&this.offset==pos.offset;},inspect:function(){return"[DomPosition("+inspectNode(this.node)+":"+this.offset+")]";},toString:function(){return this.inspect();}};function DOMException(codeName){this.code=this[codeName];this.codeName=codeName;this.message="DOMException: "+this.codeName;}DOMException.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24};DOMException.prototype.toString=function(){return this.message;};api.dom={arrayContains:arrayContains,
isHtmlNamespace:isHtmlNamespace,parentElement:parentElement,getNodeIndex:getNodeIndex,getNodeLength:getNodeLength,getCommonAncestor:getCommonAncestor,isAncestorOf:isAncestorOf,isOrIsAncestorOf:isOrIsAncestorOf,getClosestAncestorIn:getClosestAncestorIn,isCharacterDataNode:isCharacterDataNode,isTextOrCommentNode:isTextOrCommentNode,insertAfter:insertAfter,splitDataNode:splitDataNode,getDocument:getDocument,getWindow:getWindow,getIframeWindow:getIframeWindow,getIframeDocument:getIframeDocument,getBody:getBody,isWindow:isWindow,getContentDocument:getContentDocument,getRootContainer:getRootContainer,comparePoints:comparePoints,isBrokenNode:isBrokenNode,inspectNode:inspectNode,getComputedStyleProperty:getComputedStyleProperty,createTestElement:createTestElement,removeNode:removeNode,fragmentFromNodeChildren:fragmentFromNodeChildren,createIterator:createIterator,DomPosition:DomPosition};api.DOMException=DOMException;});api.createCoreModule("DomRange",["DomUtil"],function(api,module){var dom=api.dom;
var util=api.util;var DomPosition=dom.DomPosition;var DOMException=api.DOMException;var isCharacterDataNode=dom.isCharacterDataNode;var getNodeIndex=dom.getNodeIndex;var isOrIsAncestorOf=dom.isOrIsAncestorOf;var getDocument=dom.getDocument;var comparePoints=dom.comparePoints;var splitDataNode=dom.splitDataNode;var getClosestAncestorIn=dom.getClosestAncestorIn;var getNodeLength=dom.getNodeLength;var arrayContains=dom.arrayContains;var getRootContainer=dom.getRootContainer;var crashyTextNodes=api.features.crashyTextNodes;var removeNode=dom.removeNode;function isNonTextPartiallySelected(node,range){return(node.nodeType!=3)&&(isOrIsAncestorOf(node,range.startContainer)||isOrIsAncestorOf(node,range.endContainer));}function getRangeDocument(range){return range.document||getDocument(range.startContainer);}function getRangeRoot(range){return getRootContainer(range.startContainer);}function getBoundaryBeforeNode(node){return new DomPosition(node.parentNode,getNodeIndex(node));}function getBoundaryAfterNode(node){
return new DomPosition(node.parentNode,getNodeIndex(node)+1);}function insertNodeAtPosition(node,n,o){var firstNodeInserted=node.nodeType==11?node.firstChild:node;if(isCharacterDataNode(n)){if(o==n.length){dom.insertAfter(node,n);}else{n.parentNode.insertBefore(node,o==0?n:splitDataNode(n,o));}}else if(o>=n.childNodes.length){n.appendChild(node);}else{n.insertBefore(node,n.childNodes[o]);}return firstNodeInserted;}function rangesIntersect(rangeA,rangeB,touchingIsIntersecting){assertRangeValid(rangeA);assertRangeValid(rangeB);if(getRangeDocument(rangeB)!=getRangeDocument(rangeA)){throw new DOMException("WRONG_DOCUMENT_ERR");}var startComparison=comparePoints(rangeA.startContainer,rangeA.startOffset,rangeB.endContainer,rangeB.endOffset),endComparison=comparePoints(rangeA.endContainer,rangeA.endOffset,rangeB.startContainer,rangeB.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0;}function cloneSubtree(iterator){var partiallySelected;
for(var node,frag=getRangeDocument(iterator.range).createDocumentFragment(),subIterator;node=iterator.next();){partiallySelected=iterator.isPartiallySelectedSubtree();node=node.cloneNode(!partiallySelected);if(partiallySelected){subIterator=iterator.getSubtreeIterator();node.appendChild(cloneSubtree(subIterator));subIterator.detach();}if(node.nodeType==10){throw new DOMException("HIERARCHY_REQUEST_ERR");}frag.appendChild(node);}return frag;}function iterateSubtree(rangeIterator,func,iteratorState){var it,n;iteratorState=iteratorState||{stop:false};for(var node,subRangeIterator;node=rangeIterator.next();){if(rangeIterator.isPartiallySelectedSubtree()){if(func(node)===false){iteratorState.stop=true;return;}else{subRangeIterator=rangeIterator.getSubtreeIterator();iterateSubtree(subRangeIterator,func,iteratorState);subRangeIterator.detach();if(iteratorState.stop){return;}}}else{it=dom.createIterator(node);while((n=it.next())){if(func(n)===false){iteratorState.stop=true;return;}}}}}function deleteSubtree(iterator){
var subIterator;while(iterator.next()){if(iterator.isPartiallySelectedSubtree()){subIterator=iterator.getSubtreeIterator();deleteSubtree(subIterator);subIterator.detach();}else{iterator.remove();}}}function extractSubtree(iterator){for(var node,frag=getRangeDocument(iterator.range).createDocumentFragment(),subIterator;node=iterator.next();){if(iterator.isPartiallySelectedSubtree()){node=node.cloneNode(false);subIterator=iterator.getSubtreeIterator();node.appendChild(extractSubtree(subIterator));subIterator.detach();}else{iterator.remove();}if(node.nodeType==10){throw new DOMException("HIERARCHY_REQUEST_ERR");}frag.appendChild(node);}return frag;}function getNodesInRange(range,nodeTypes,filter){var filterNodeTypes=!!(nodeTypes&&nodeTypes.length),regex;var filterExists=!!filter;if(filterNodeTypes){regex=new RegExp("^("+nodeTypes.join("|")+")$");}var nodes=[];iterateSubtree(new RangeIterator(range,false),function(node){if(filterNodeTypes&&!regex.test(node.nodeType)){return;}if(filterExists&&!filter(node)){
return;}var sc=range.startContainer;if(node==sc&&isCharacterDataNode(sc)&&range.startOffset==sc.length){return;}var ec=range.endContainer;if(node==ec&&isCharacterDataNode(ec)&&range.endOffset==0){return;}nodes.push(node);});return nodes;}function inspect(range){var name=(typeof range.getName=="undefined")?"Range":range.getName();return"["+name+"("+dom.inspectNode(range.startContainer)+":"+range.startOffset+", "+dom.inspectNode(range.endContainer)+":"+range.endOffset+")]";}function RangeIterator(range,clonePartiallySelectedTextNodes){this.range=range;this.clonePartiallySelectedTextNodes=clonePartiallySelectedTextNodes;if(!range.collapsed){this.sc=range.startContainer;this.so=range.startOffset;this.ec=range.endContainer;this.eo=range.endOffset;var root=range.commonAncestorContainer;if(this.sc===this.ec&&isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc;}else{this._first=this._next=(this.sc===root&&!isCharacterDataNode(this.sc))?
this.sc.childNodes[this.so]:getClosestAncestorIn(this.sc,root,true);this._last=(this.ec===root&&!isCharacterDataNode(this.ec))?this.ec.childNodes[this.eo-1]:getClosestAncestorIn(this.ec,root,true);}}}RangeIterator.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first;},hasNext:function(){return!!this._next;},next:function(){var current=this._current=this._next;if(current){this._next=(current!==this._last)?current.nextSibling:null;if(isCharacterDataNode(current)&&this.clonePartiallySelectedTextNodes){if(current===this.ec){(current=current.cloneNode(true)).deleteData(this.eo,current.length-this.eo);}if(this._current===this.sc){(current=current.cloneNode(true)).deleteData(0,this.so);}}}return current;},remove:function(){var current=this._current,start,end;if(isCharacterDataNode(current)&&(current===this.sc||current===this.ec)){start=(current===this.sc)?this.so:0;end=(current===this.ec)?this.eo:current.length;
if(start!=end){current.deleteData(start,end-start);}}else{if(current.parentNode){removeNode(current);}else{}}},isPartiallySelectedSubtree:function(){var current=this._current;return isNonTextPartiallySelected(current,this.range);},getSubtreeIterator:function(){var subRange;if(this.isSingleCharacterDataNode){subRange=this.range.cloneRange();subRange.collapse(false);}else{subRange=new Range(getRangeDocument(this.range));var current=this._current;var startContainer=current,startOffset=0,endContainer=current,endOffset=getNodeLength(current);if(isOrIsAncestorOf(current,this.sc)){startContainer=this.sc;startOffset=this.so;}if(isOrIsAncestorOf(current,this.ec)){endContainer=this.ec;endOffset=this.eo;}updateBoundaries(subRange,startContainer,startOffset,endContainer,endOffset);}return new RangeIterator(subRange,this.clonePartiallySelectedTextNodes);},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null;}};var beforeAfterNodeTypes=[1,3,4,5,7,8,10];
var rootContainerNodeTypes=[2,9,11];var readonlyNodeTypes=[5,6,10,12];var insertableNodeTypes=[1,3,4,5,7,8,10,11];var surroundNodeTypes=[1,3,4,5,7,8];function createAncestorFinder(nodeTypes){return function(node,selfIsAncestor){var t,n=selfIsAncestor?node:node.parentNode;while(n){t=n.nodeType;if(arrayContains(nodeTypes,t)){return n;}n=n.parentNode;}return null;};}var getDocumentOrFragmentContainer=createAncestorFinder([9,11]);var getReadonlyAncestor=createAncestorFinder(readonlyNodeTypes);var getDocTypeNotationEntityAncestor=createAncestorFinder([6,10,12]);var getElementAncestor=createAncestorFinder([1]);function assertNoDocTypeNotationEntityAncestor(node,allowSelf){if(getDocTypeNotationEntityAncestor(node,allowSelf)){throw new DOMException("INVALID_NODE_TYPE_ERR");}}function assertValidNodeType(node,invalidTypes){if(!arrayContains(invalidTypes,node.nodeType)){throw new DOMException("INVALID_NODE_TYPE_ERR");}}function assertValidOffset(node,offset){if(offset<0||offset>(isCharacterDataNode(node)?node.length:node.childNodes.length)){
throw new DOMException("INDEX_SIZE_ERR");}}function assertSameDocumentOrFragment(node1,node2){if(getDocumentOrFragmentContainer(node1,true)!==getDocumentOrFragmentContainer(node2,true)){throw new DOMException("WRONG_DOCUMENT_ERR");}}function assertNodeNotReadOnly(node){if(getReadonlyAncestor(node,true)){throw new DOMException("NO_MODIFICATION_ALLOWED_ERR");}}function assertNode(node,codeName){if(!node){throw new DOMException(codeName);}}function isValidOffset(node,offset){return offset<=(isCharacterDataNode(node)?node.length:node.childNodes.length);}function isRangeValid(range){return(!!range.startContainer&&!!range.endContainer&&!(crashyTextNodes&&(dom.isBrokenNode(range.startContainer)||dom.isBrokenNode(range.endContainer)))&&getRootContainer(range.startContainer)==getRootContainer(range.endContainer)&&isValidOffset(range.startContainer,range.startOffset)&&isValidOffset(range.endContainer,range.endOffset));}function assertRangeValid(range){if(!isRangeValid(range)){throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+range.inspect()+")");
}}var styleEl=document.createElement("style");var htmlParsingConforms=false;try{styleEl.innerHTML="<b>x</b>";htmlParsingConforms=(styleEl.firstChild.nodeType==3);}catch(e){}api.features.htmlParsingConforms=htmlParsingConforms;var createContextualFragment=htmlParsingConforms?function(fragmentStr){var node=this.startContainer;var doc=getDocument(node);if(!node){throw new DOMException("INVALID_STATE_ERR");}var el=null;if(node.nodeType==1){el=node;}else if(isCharacterDataNode(node)){el=dom.parentElement(node);}if(el===null||(el.nodeName=="HTML"&&dom.isHtmlNamespace(getDocument(el).documentElement)&&dom.isHtmlNamespace(el))){el=doc.createElement("body");}else{el=el.cloneNode(false);}el.innerHTML=fragmentStr;return dom.fragmentFromNodeChildren(el);}:function(fragmentStr){var doc=getRangeDocument(this);var el=doc.createElement("body");el.innerHTML=fragmentStr;return dom.fragmentFromNodeChildren(el);};function splitRangeBoundaries(range,positionsToPreserve){assertRangeValid(range);var sc=range.startContainer,so=range.startOffset,ec=range.endContainer,eo=range.endOffset;
var startEndSame=(sc===ec);if(isCharacterDataNode(ec)&&eo>0&&eo<ec.length){splitDataNode(ec,eo,positionsToPreserve);}if(isCharacterDataNode(sc)&&so>0&&so<sc.length){sc=splitDataNode(sc,so,positionsToPreserve);if(startEndSame){eo-=so;ec=sc;}else if(ec==sc.parentNode&&eo>=getNodeIndex(sc)){eo++;}so=0;}range.setStartAndEnd(sc,so,ec,eo);}function rangeToHtml(range){assertRangeValid(range);var container=range.commonAncestorContainer.parentNode.cloneNode(false);container.appendChild(range.cloneContents());return container.innerHTML;}var rangeProperties=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var s2s=0,s2e=1,e2e=2,e2s=3;var n_b=0,n_a=1,n_b_a=2,n_i=3;util.extend(api.rangePrototype,{compareBoundaryPoints:function(how,range){assertRangeValid(this);assertSameDocumentOrFragment(this.startContainer,range.startContainer);var nodeA,offsetA,nodeB,offsetB;var prefixA=(how==e2s||how==s2s)?"start":"end";var prefixB=(how==s2e||how==s2s)?"start":"end";
nodeA=this[prefixA+"Container"];offsetA=this[prefixA+"Offset"];nodeB=range[prefixB+"Container"];offsetB=range[prefixB+"Offset"];return comparePoints(nodeA,offsetA,nodeB,offsetB);},insertNode:function(node){assertRangeValid(this);assertValidNodeType(node,insertableNodeTypes);assertNodeNotReadOnly(this.startContainer);if(isOrIsAncestorOf(node,this.startContainer)){throw new DOMException("HIERARCHY_REQUEST_ERR");}var firstNodeInserted=insertNodeAtPosition(node,this.startContainer,this.startOffset);this.setStartBefore(firstNodeInserted);},cloneContents:function(){assertRangeValid(this);var clone,frag;if(this.collapsed){return getRangeDocument(this).createDocumentFragment();}else{if(this.startContainer===this.endContainer&&isCharacterDataNode(this.startContainer)){clone=this.startContainer.cloneNode(true);clone.data=clone.data.slice(this.startOffset,this.endOffset);frag=getRangeDocument(this).createDocumentFragment();frag.appendChild(clone);return frag;}else{var iterator=new RangeIterator(this,true);
clone=cloneSubtree(iterator);iterator.detach();}return clone;}},canSurroundContents:function(){assertRangeValid(this);assertNodeNotReadOnly(this.startContainer);assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,true);var boundariesInvalid=(iterator._first&&(isNonTextPartiallySelected(iterator._first,this))||(iterator._last&&isNonTextPartiallySelected(iterator._last,this)));iterator.detach();return!boundariesInvalid;},surroundContents:function(node){assertValidNodeType(node,surroundNodeTypes);if(!this.canSurroundContents()){throw new DOMException("INVALID_STATE_ERR");}var content=this.extractContents();if(node.hasChildNodes()){while(node.lastChild){node.removeChild(node.lastChild);}}insertNodeAtPosition(node,this.startContainer,this.startOffset);node.appendChild(content);this.selectNode(node);},cloneRange:function(){assertRangeValid(this);var range=new Range(getRangeDocument(this));var i=rangeProperties.length,prop;while(i--){prop=rangeProperties[i];range[prop]=this[prop];
}return range;},toString:function(){assertRangeValid(this);var sc=this.startContainer;if(sc===this.endContainer&&isCharacterDataNode(sc)){return(sc.nodeType==3||sc.nodeType==4)?sc.data.slice(this.startOffset,this.endOffset):"";}else{var textParts=[],iterator=new RangeIterator(this,true);iterateSubtree(iterator,function(node){if(node.nodeType==3||node.nodeType==4){textParts.push(node.data);}});iterator.detach();return textParts.join("");}},compareNode:function(node){assertRangeValid(this);var parent=node.parentNode;var nodeIndex=getNodeIndex(node);if(!parent){throw new DOMException("NOT_FOUND_ERR");}var startComparison=this.comparePoint(parent,nodeIndex),endComparison=this.comparePoint(parent,nodeIndex+1);if(startComparison<0){return(endComparison>0)?n_b_a:n_b;}else{return(endComparison>0)?n_a:n_i;}},comparePoint:function(node,offset){assertRangeValid(this);assertNode(node,"HIERARCHY_REQUEST_ERR");assertSameDocumentOrFragment(node,this.startContainer);if(comparePoints(node,offset,this.startContainer,this.startOffset)<0){
return-1;}else if(comparePoints(node,offset,this.endContainer,this.endOffset)>0){return 1;}return 0;},createContextualFragment:createContextualFragment,toHtml:function(){return rangeToHtml(this);},intersectsNode:function(node,touchingIsIntersecting){assertRangeValid(this);if(getRootContainer(node)!=getRangeRoot(this)){return false;}var parent=node.parentNode,offset=getNodeIndex(node);if(!parent){return true;}var startComparison=comparePoints(parent,offset,this.endContainer,this.endOffset),endComparison=comparePoints(parent,offset+1,this.startContainer,this.startOffset);return touchingIsIntersecting?startComparison<=0&&endComparison>=0:startComparison<0&&endComparison>0;},isPointInRange:function(node,offset){assertRangeValid(this);assertNode(node,"HIERARCHY_REQUEST_ERR");assertSameDocumentOrFragment(node,this.startContainer);return(comparePoints(node,offset,this.startContainer,this.startOffset)>=0)&&(comparePoints(node,offset,this.endContainer,this.endOffset)<=0);},intersectsRange:function(range){
return rangesIntersect(this,range,false);},intersectsOrTouchesRange:function(range){return rangesIntersect(this,range,true);},intersection:function(range){if(this.intersectsRange(range)){var startComparison=comparePoints(this.startContainer,this.startOffset,range.startContainer,range.startOffset),endComparison=comparePoints(this.endContainer,this.endOffset,range.endContainer,range.endOffset);var intersectionRange=this.cloneRange();if(startComparison==-1){intersectionRange.setStart(range.startContainer,range.startOffset);}if(endComparison==1){intersectionRange.setEnd(range.endContainer,range.endOffset);}return intersectionRange;}return null;},union:function(range){if(this.intersectsOrTouchesRange(range)){var unionRange=this.cloneRange();if(comparePoints(range.startContainer,range.startOffset,this.startContainer,this.startOffset)==-1){unionRange.setStart(range.startContainer,range.startOffset);}if(comparePoints(range.endContainer,range.endOffset,this.endContainer,this.endOffset)==1){
unionRange.setEnd(range.endContainer,range.endOffset);}return unionRange;}else{throw new DOMException("Ranges do not intersect");}},containsNode:function(node,allowPartial){if(allowPartial){return this.intersectsNode(node,false);}else{return this.compareNode(node)==n_i;}},containsNodeContents:function(node){return this.comparePoint(node,0)>=0&&this.comparePoint(node,getNodeLength(node))<=0;},containsRange:function(range){var intersection=this.intersection(range);return intersection!==null&&range.equals(intersection);},containsNodeText:function(node){var nodeRange=this.cloneRange();nodeRange.selectNode(node);var textNodes=nodeRange.getNodes([3]);if(textNodes.length>0){nodeRange.setStart(textNodes[0],0);var lastTextNode=textNodes.pop();nodeRange.setEnd(lastTextNode,lastTextNode.length);return this.containsRange(nodeRange);}else{return this.containsNodeContents(node);}},getNodes:function(nodeTypes,filter){assertRangeValid(this);return getNodesInRange(this,nodeTypes,filter);},getDocument:function(){
return getRangeDocument(this);},collapseBefore:function(node){this.setEndBefore(node);this.collapse(false);},collapseAfter:function(node){this.setStartAfter(node);this.collapse(true);},getBookmark:function(containerNode){var doc=getRangeDocument(this);var preSelectionRange=api.createRange(doc);containerNode=containerNode||dom.getBody(doc);preSelectionRange.selectNodeContents(containerNode);var range=this.intersection(preSelectionRange);var start=0,end=0;if(range){preSelectionRange.setEnd(range.startContainer,range.startOffset);start=preSelectionRange.toString().length;end=start+range.toString().length;}return{start:start,end:end,containerNode:containerNode};},moveToBookmark:function(bookmark){var containerNode=bookmark.containerNode;var charIndex=0;this.setStart(containerNode,0);this.collapse(true);var nodeStack=[containerNode],node,foundStart=false,stop=false;var nextCharIndex,i,childNodes;while(!stop&&(node=nodeStack.pop())){if(node.nodeType==3){nextCharIndex=charIndex+node.length;if(!foundStart&&bookmark.start>=charIndex&&bookmark.start<=nextCharIndex){
this.setStart(node,bookmark.start-charIndex);foundStart=true;}if(foundStart&&bookmark.end>=charIndex&&bookmark.end<=nextCharIndex){this.setEnd(node,bookmark.end-charIndex);stop=true;}charIndex=nextCharIndex;}else{childNodes=node.childNodes;i=childNodes.length;while(i--){nodeStack.push(childNodes[i]);}}}},getName:function(){return"DomRange";},equals:function(range){return Range.rangesEqual(this,range);},isValid:function(){return isRangeValid(this);},inspect:function(){return inspect(this);},detach:function(){}});function copyComparisonConstantsToObject(obj){obj.START_TO_START=s2s;obj.START_TO_END=s2e;obj.END_TO_END=e2e;obj.END_TO_START=e2s;obj.NODE_BEFORE=n_b;obj.NODE_AFTER=n_a;obj.NODE_BEFORE_AND_AFTER=n_b_a;obj.NODE_INSIDE=n_i;}function copyComparisonConstants(constructor){copyComparisonConstantsToObject(constructor);copyComparisonConstantsToObject(constructor.prototype);}function createRangeContentRemover(remover,boundaryUpdater){return function(){assertRangeValid(this);var sc=this.startContainer,so=this.startOffset,root=this.commonAncestorContainer;
var iterator=new RangeIterator(this,true);var node,boundary;if(sc!==root){node=getClosestAncestorIn(sc,root,true);boundary=getBoundaryAfterNode(node);sc=boundary.node;so=boundary.offset;}iterateSubtree(iterator,assertNodeNotReadOnly);iterator.reset();var returnValue=remover(iterator);iterator.detach();boundaryUpdater(this,sc,so,sc,so);return returnValue;};}function createPrototypeRange(constructor,boundaryUpdater){function createBeforeAfterNodeSetter(isBefore,isStart){return function(node){assertValidNodeType(node,beforeAfterNodeTypes);assertValidNodeType(getRootContainer(node),rootContainerNodeTypes);var boundary=(isBefore?getBoundaryBeforeNode:getBoundaryAfterNode)(node);(isStart?setRangeStart:setRangeEnd)(this,boundary.node,boundary.offset);};}function setRangeStart(range,node,offset){var ec=range.endContainer,eo=range.endOffset;if(node!==range.startContainer||offset!==range.startOffset){if(getRootContainer(node)!=getRootContainer(ec)||comparePoints(node,offset,ec,eo)==1){ec=node;eo=offset;
}boundaryUpdater(range,node,offset,ec,eo);}}function setRangeEnd(range,node,offset){var sc=range.startContainer,so=range.startOffset;if(node!==range.endContainer||offset!==range.endOffset){if(getRootContainer(node)!=getRootContainer(sc)||comparePoints(node,offset,sc,so)==-1){sc=node;so=offset;}boundaryUpdater(range,sc,so,node,offset);}}var F=function(){};F.prototype=api.rangePrototype;constructor.prototype=new F();util.extend(constructor.prototype,{setStart:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);setRangeStart(this,node,offset);},setEnd:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);setRangeEnd(this,node,offset);},setStartAndEnd:function(){var args=arguments;var sc=args[0],so=args[1],ec=sc,eo=so;switch(args.length){case 3:eo=args[2];break;case 4:ec=args[2];eo=args[3];break;}assertNoDocTypeNotationEntityAncestor(sc,true);assertValidOffset(sc,so);
assertNoDocTypeNotationEntityAncestor(ec,true);assertValidOffset(ec,eo);boundaryUpdater(this,sc,so,ec,eo);},setBoundary:function(node,offset,isStart){this["set"+(isStart?"Start":"End")](node,offset);},setStartBefore:createBeforeAfterNodeSetter(true,true),setStartAfter:createBeforeAfterNodeSetter(false,true),setEndBefore:createBeforeAfterNodeSetter(true,false),setEndAfter:createBeforeAfterNodeSetter(false,false),collapse:function(isStart){assertRangeValid(this);if(isStart){boundaryUpdater(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset);}else{boundaryUpdater(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset);}},selectNodeContents:function(node){assertNoDocTypeNotationEntityAncestor(node,true);boundaryUpdater(this,node,0,node,getNodeLength(node));},selectNode:function(node){assertNoDocTypeNotationEntityAncestor(node,false);assertValidNodeType(node,beforeAfterNodeTypes);var start=getBoundaryBeforeNode(node),end=getBoundaryAfterNode(node);
boundaryUpdater(this,start.node,start.offset,end.node,end.offset);},extractContents:createRangeContentRemover(extractSubtree,boundaryUpdater),deleteContents:createRangeContentRemover(deleteSubtree,boundaryUpdater),canSurroundContents:function(){assertRangeValid(this);assertNodeNotReadOnly(this.startContainer);assertNodeNotReadOnly(this.endContainer);var iterator=new RangeIterator(this,true);var boundariesInvalid=(iterator._first&&isNonTextPartiallySelected(iterator._first,this)||(iterator._last&&isNonTextPartiallySelected(iterator._last,this)));iterator.detach();return!boundariesInvalid;},splitBoundaries:function(){splitRangeBoundaries(this);},splitBoundariesPreservingPositions:function(positionsToPreserve){splitRangeBoundaries(this,positionsToPreserve);},normalizeBoundaries:function(){assertRangeValid(this);var sc=this.startContainer,so=this.startOffset,ec=this.endContainer,eo=this.endOffset;var mergeForward=function(node){var sibling=node.nextSibling;if(sibling&&sibling.nodeType==node.nodeType){
ec=node;eo=node.length;node.appendData(sibling.data);removeNode(sibling);}};var mergeBackward=function(node){var sibling=node.previousSibling;if(sibling&&sibling.nodeType==node.nodeType){sc=node;var nodeLength=node.length;so=sibling.length;node.insertData(0,sibling.data);removeNode(sibling);if(sc==ec){eo+=so;ec=sc;}else if(ec==node.parentNode){var nodeIndex=getNodeIndex(node);if(eo==nodeIndex){ec=node;eo=nodeLength;}else if(eo>nodeIndex){eo--;}}}};var normalizeStart=true;var sibling;if(isCharacterDataNode(ec)){if(eo==ec.length){mergeForward(ec);}else if(eo==0){sibling=ec.previousSibling;if(sibling&&sibling.nodeType==ec.nodeType){eo=sibling.length;if(sc==ec){normalizeStart=false;}sibling.appendData(ec.data);removeNode(ec);ec=sibling;}}}else{if(eo>0){var endNode=ec.childNodes[eo-1];if(endNode&&isCharacterDataNode(endNode)){mergeForward(endNode);}}normalizeStart=!this.collapsed;}if(normalizeStart){if(isCharacterDataNode(sc)){if(so==0){mergeBackward(sc);}else if(so==sc.length){sibling=sc.nextSibling;
if(sibling&&sibling.nodeType==sc.nodeType){if(ec==sibling){ec=sc;eo+=sc.length;}sc.appendData(sibling.data);removeNode(sibling);}}}else{if(so<sc.childNodes.length){var startNode=sc.childNodes[so];if(startNode&&isCharacterDataNode(startNode)){mergeBackward(startNode);}}}}else{sc=ec;so=eo;}boundaryUpdater(this,sc,so,ec,eo);},collapseToPoint:function(node,offset){assertNoDocTypeNotationEntityAncestor(node,true);assertValidOffset(node,offset);this.setStartAndEnd(node,offset);},parentElement:function(){assertRangeValid(this);var parentNode=this.commonAncestorContainer;return parentNode?getElementAncestor(this.commonAncestorContainer,true):null;}});copyComparisonConstants(constructor);}function updateCollapsedAndCommonAncestor(range){range.collapsed=(range.startContainer===range.endContainer&&range.startOffset===range.endOffset);range.commonAncestorContainer=range.collapsed?range.startContainer:dom.getCommonAncestor(range.startContainer,range.endContainer);}function updateBoundaries(range,startContainer,startOffset,endContainer,endOffset){
range.startContainer=startContainer;range.startOffset=startOffset;range.endContainer=endContainer;range.endOffset=endOffset;range.document=dom.getDocument(startContainer);updateCollapsedAndCommonAncestor(range);}function Range(doc){updateBoundaries(this,doc,0,doc,0);}createPrototypeRange(Range,updateBoundaries);util.extend(Range,{rangeProperties:rangeProperties,RangeIterator:RangeIterator,copyComparisonConstants:copyComparisonConstants,createPrototypeRange:createPrototypeRange,inspect:inspect,toHtml:rangeToHtml,getRangeDocument:getRangeDocument,rangesEqual:function(r1,r2){return r1.startContainer===r2.startContainer&&r1.startOffset===r2.startOffset&&r1.endContainer===r2.endContainer&&r1.endOffset===r2.endOffset;}});api.DomRange=Range;});api.createCoreModule("WrappedRange",["DomRange"],function(api,module){var WrappedRange,WrappedTextRange;var dom=api.dom;var util=api.util;var DomPosition=dom.DomPosition;var DomRange=api.DomRange;var getBody=dom.getBody;var getContentDocument=dom.getContentDocument;
var isCharacterDataNode=dom.isCharacterDataNode;if(api.features.implementsDomRange){(function(){var rangeProto;var rangeProperties=DomRange.rangeProperties;function updateRangeProperties(range){var i=rangeProperties.length,prop;while(i--){prop=rangeProperties[i];range[prop]=range.nativeRange[prop];}range.collapsed=(range.startContainer===range.endContainer&&range.startOffset===range.endOffset);}function updateNativeRange(range,startContainer,startOffset,endContainer,endOffset){var startMoved=(range.startContainer!==startContainer||range.startOffset!=startOffset);var endMoved=(range.endContainer!==endContainer||range.endOffset!=endOffset);var nativeRangeDifferent=!range.equals(range.nativeRange);if(startMoved||endMoved||nativeRangeDifferent){range.setEnd(endContainer,endOffset);range.setStart(startContainer,startOffset);}}var createBeforeAfterNodeSetter;WrappedRange=function(range){if(!range){throw module.createError("WrappedRange: Range must be specified");}this.nativeRange=range;
updateRangeProperties(this);};DomRange.createPrototypeRange(WrappedRange,updateNativeRange);rangeProto=WrappedRange.prototype;rangeProto.selectNode=function(node){this.nativeRange.selectNode(node);updateRangeProperties(this);};rangeProto.cloneContents=function(){return this.nativeRange.cloneContents();};rangeProto.surroundContents=function(node){this.nativeRange.surroundContents(node);updateRangeProperties(this);};rangeProto.collapse=function(isStart){this.nativeRange.collapse(isStart);updateRangeProperties(this);};rangeProto.cloneRange=function(){return new WrappedRange(this.nativeRange.cloneRange());};rangeProto.refresh=function(){updateRangeProperties(this);};rangeProto.toString=function(){return this.nativeRange.toString();};var testTextNode=document.createTextNode("test");getBody(document).appendChild(testTextNode);var range=document.createRange();range.setStart(testTextNode,0);range.setEnd(testTextNode,0);try{range.setStart(testTextNode,1);rangeProto.setStart=function(node,offset){
this.nativeRange.setStart(node,offset);updateRangeProperties(this);};rangeProto.setEnd=function(node,offset){this.nativeRange.setEnd(node,offset);updateRangeProperties(this);};createBeforeAfterNodeSetter=function(name){return function(node){this.nativeRange[name](node);updateRangeProperties(this);};};}catch(ex){rangeProto.setStart=function(node,offset){try{this.nativeRange.setStart(node,offset);}catch(ex){this.nativeRange.setEnd(node,offset);this.nativeRange.setStart(node,offset);}updateRangeProperties(this);};rangeProto.setEnd=function(node,offset){try{this.nativeRange.setEnd(node,offset);}catch(ex){this.nativeRange.setStart(node,offset);this.nativeRange.setEnd(node,offset);}updateRangeProperties(this);};createBeforeAfterNodeSetter=function(name,oppositeName){return function(node){try{this.nativeRange[name](node);}catch(ex){this.nativeRange[oppositeName](node);this.nativeRange[name](node);}updateRangeProperties(this);};};}rangeProto.setStartBefore=createBeforeAfterNodeSetter("setStartBefore","setEndBefore");
rangeProto.setStartAfter=createBeforeAfterNodeSetter("setStartAfter","setEndAfter");rangeProto.setEndBefore=createBeforeAfterNodeSetter("setEndBefore","setStartBefore");rangeProto.setEndAfter=createBeforeAfterNodeSetter("setEndAfter","setStartAfter");rangeProto.selectNodeContents=function(node){this.setStartAndEnd(node,0,dom.getNodeLength(node));};range.selectNodeContents(testTextNode);range.setEnd(testTextNode,3);var range2=document.createRange();range2.selectNodeContents(testTextNode);range2.setEnd(testTextNode,4);range2.setStart(testTextNode,2);if(range.compareBoundaryPoints(range.START_TO_END,range2)==-1&&range.compareBoundaryPoints(range.END_TO_START,range2)==1){rangeProto.compareBoundaryPoints=function(type,range){range=range.nativeRange||range;if(type==range.START_TO_END){type=range.END_TO_START;}else if(type==range.END_TO_START){type=range.START_TO_END;}return this.nativeRange.compareBoundaryPoints(type,range);};}else{rangeProto.compareBoundaryPoints=function(type,range){return this.nativeRange.compareBoundaryPoints(type,range.nativeRange||range);
};}var el=document.createElement("div");el.innerHTML="123";var textNode=el.firstChild;var body=getBody(document);body.appendChild(el);range.setStart(textNode,1);range.setEnd(textNode,2);range.deleteContents();if(textNode.data=="13"){rangeProto.deleteContents=function(){this.nativeRange.deleteContents();updateRangeProperties(this);};rangeProto.extractContents=function(){var frag=this.nativeRange.extractContents();updateRangeProperties(this);return frag;};}else{}body.removeChild(el);body=null;if(util.isHostMethod(range,"createContextualFragment")){rangeProto.createContextualFragment=function(fragmentStr){return this.nativeRange.createContextualFragment(fragmentStr);};}getBody(document).removeChild(testTextNode);rangeProto.getName=function(){return"WrappedRange";};api.WrappedRange=WrappedRange;api.createNativeRange=function(doc){doc=getContentDocument(doc,module,"createNativeRange");return doc.createRange();};})();}if(api.features.implementsTextRange){var getTextRangeContainerElement=function(textRange){
var parentEl=textRange.parentElement();var range=textRange.duplicate();range.collapse(true);var startEl=range.parentElement();range=textRange.duplicate();range.collapse(false);var endEl=range.parentElement();var startEndContainer=(startEl==endEl)?startEl:dom.getCommonAncestor(startEl,endEl);return startEndContainer==parentEl?startEndContainer:dom.getCommonAncestor(parentEl,startEndContainer);};var textRangeIsCollapsed=function(textRange){return textRange.compareEndPoints("StartToEnd",textRange)==0;};var getTextRangeBoundaryPosition=function(textRange,wholeRangeContainerElement,isStart,isCollapsed,startInfo){var workingRange=textRange.duplicate();workingRange.collapse(isStart);var containerElement=workingRange.parentElement();if(!dom.isOrIsAncestorOf(wholeRangeContainerElement,containerElement)){containerElement=wholeRangeContainerElement;}if(!containerElement.canHaveHTML){var pos=new DomPosition(containerElement.parentNode,dom.getNodeIndex(containerElement));return{boundaryPosition:pos,
nodeInfo:{nodeIndex:pos.offset,containerElement:pos.node}};}var workingNode=dom.getDocument(containerElement).createElement("span");if(workingNode.parentNode){dom.removeNode(workingNode);}var comparison,workingComparisonType=isStart?"StartToStart":"StartToEnd";var previousNode,nextNode,boundaryPosition,boundaryNode;var start=(startInfo&&startInfo.containerElement==containerElement)?startInfo.nodeIndex:0;var childNodeCount=containerElement.childNodes.length;var end=childNodeCount;var nodeIndex=end;while(true){if(nodeIndex==childNodeCount){containerElement.appendChild(workingNode);}else{containerElement.insertBefore(workingNode,containerElement.childNodes[nodeIndex]);}workingRange.moveToElementText(workingNode);comparison=workingRange.compareEndPoints(workingComparisonType,textRange);if(comparison==0||start==end){break;}else if(comparison==-1){if(end==start+1){break;}else{start=nodeIndex;}}else{end=(end==start+1)?start:nodeIndex;}nodeIndex=Math.floor((start+end)/2);containerElement.removeChild(workingNode);
}boundaryNode=workingNode.nextSibling;if(comparison==-1&&boundaryNode&&isCharacterDataNode(boundaryNode)){workingRange.setEndPoint(isStart?"EndToStart":"EndToEnd",textRange);var offset;if(/[\r\n]/.test(boundaryNode.data)){var tempRange=workingRange.duplicate();var rangeLength=tempRange.text.replace(/\r\n/g,"\r").length;offset=tempRange.moveStart("character",rangeLength);while((comparison=tempRange.compareEndPoints("StartToEnd",tempRange))==-1){offset++;tempRange.moveStart("character",1);}}else{offset=workingRange.text.length;}boundaryPosition=new DomPosition(boundaryNode,offset);}else{previousNode=(isCollapsed||!isStart)&&workingNode.previousSibling;nextNode=(isCollapsed||isStart)&&workingNode.nextSibling;if(nextNode&&isCharacterDataNode(nextNode)){boundaryPosition=new DomPosition(nextNode,0);}else if(previousNode&&isCharacterDataNode(previousNode)){boundaryPosition=new DomPosition(previousNode,previousNode.data.length);}else{boundaryPosition=new DomPosition(containerElement,dom.getNodeIndex(workingNode));
}}dom.removeNode(workingNode);return{boundaryPosition:boundaryPosition,nodeInfo:{nodeIndex:nodeIndex,containerElement:containerElement}};};var createBoundaryTextRange=function(boundaryPosition,isStart){var boundaryNode,boundaryParent,boundaryOffset=boundaryPosition.offset;var doc=dom.getDocument(boundaryPosition.node);var workingNode,childNodes,workingRange=getBody(doc).createTextRange();var nodeIsDataNode=isCharacterDataNode(boundaryPosition.node);if(nodeIsDataNode){boundaryNode=boundaryPosition.node;boundaryParent=boundaryNode.parentNode;}else{childNodes=boundaryPosition.node.childNodes;boundaryNode=(boundaryOffset<childNodes.length)?childNodes[boundaryOffset]:null;boundaryParent=boundaryPosition.node;}workingNode=doc.createElement("span");workingNode.innerHTML="&#feff;";if(boundaryNode){boundaryParent.insertBefore(workingNode,boundaryNode);}else{boundaryParent.appendChild(workingNode);}workingRange.moveToElementText(workingNode);workingRange.collapse(!isStart);boundaryParent.removeChild(workingNode);
if(nodeIsDataNode){workingRange[isStart?"moveStart":"moveEnd"]("character",boundaryOffset);}return workingRange;};WrappedTextRange=function(textRange){this.textRange=textRange;this.refresh();};WrappedTextRange.prototype=new DomRange(document);WrappedTextRange.prototype.refresh=function(){var start,end,startBoundary;var rangeContainerElement=getTextRangeContainerElement(this.textRange);if(textRangeIsCollapsed(this.textRange)){end=start=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,true,true).boundaryPosition;}else{startBoundary=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,true,false);start=startBoundary.boundaryPosition;end=getTextRangeBoundaryPosition(this.textRange,rangeContainerElement,false,false,startBoundary.nodeInfo).boundaryPosition;}this.setStart(start.node,start.offset);this.setEnd(end.node,end.offset);};WrappedTextRange.prototype.getName=function(){return"WrappedTextRange";};DomRange.copyComparisonConstants(WrappedTextRange);var rangeToTextRange=function(range){
if(range.collapsed){return createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),true);}else{var startRange=createBoundaryTextRange(new DomPosition(range.startContainer,range.startOffset),true);var endRange=createBoundaryTextRange(new DomPosition(range.endContainer,range.endOffset),false);var textRange=getBody(DomRange.getRangeDocument(range)).createTextRange();textRange.setEndPoint("StartToStart",startRange);textRange.setEndPoint("EndToEnd",endRange);return textRange;}};WrappedTextRange.rangeToTextRange=rangeToTextRange;WrappedTextRange.prototype.toTextRange=function(){return rangeToTextRange(this);};api.WrappedTextRange=WrappedTextRange;if(!api.features.implementsDomRange||api.config.preferTextRange){var globalObj=(function(f){return f("return this;")();})(Function);if(typeof globalObj.Range=="undefined"){globalObj.Range=WrappedTextRange;}api.createNativeRange=function(doc){doc=getContentDocument(doc,module,"createNativeRange");return getBody(doc).createTextRange();
};api.WrappedRange=WrappedTextRange;}}api.createRange=function(doc){doc=getContentDocument(doc,module,"createRange");return new api.WrappedRange(api.createNativeRange(doc));};api.createRangyRange=function(doc){doc=getContentDocument(doc,module,"createRangyRange");return new DomRange(doc);};util.createAliasForDeprecatedMethod(api,"createIframeRange","createRange");util.createAliasForDeprecatedMethod(api,"createIframeRangyRange","createRangyRange");api.addShimListener(function(win){var doc=win.document;if(typeof doc.createRange=="undefined"){doc.createRange=function(){return api.createRange(doc);};}doc=win=null;});});api.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(api,module){api.config.checkSelectionRanges=true;var BOOLEAN="boolean";var NUMBER="number";var dom=api.dom;var util=api.util;var isHostMethod=util.isHostMethod;var DomRange=api.DomRange;var WrappedRange=api.WrappedRange;var DOMException=api.DOMException;var DomPosition=dom.DomPosition;var getNativeSelection;
var selectionIsCollapsed;var features=api.features;var CONTROL="Control";var getDocument=dom.getDocument;var getBody=dom.getBody;var rangesEqual=DomRange.rangesEqual;function isDirectionBackward(dir){return(typeof dir=="string")?/^backward(s)?$/i.test(dir):!!dir;}function getWindow(win,methodName){if(!win){return window;}else if(dom.isWindow(win)){return win;}else if(win instanceof WrappedSelection){return win.win;}else{var doc=dom.getContentDocument(win,module,methodName);return dom.getWindow(doc);}}function getWinSelection(winParam){return getWindow(winParam,"getWinSelection").getSelection();}function getDocSelection(winParam){return getWindow(winParam,"getDocSelection").document.selection;}function winSelectionIsBackward(sel){var backward=false;if(sel.anchorNode){backward=(dom.comparePoints(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset)==1);}return backward;}var implementsWinGetSelection=isHostMethod(window,"getSelection"),implementsDocSelection=util.isHostObject(document,"selection");
features.implementsWinGetSelection=implementsWinGetSelection;features.implementsDocSelection=implementsDocSelection;var useDocumentSelection=implementsDocSelection&&(!implementsWinGetSelection||api.config.preferTextRange);if(useDocumentSelection){getNativeSelection=getDocSelection;api.isSelectionValid=function(winParam){var doc=getWindow(winParam,"isSelectionValid").document,nativeSel=doc.selection;return(nativeSel.type!="None"||getDocument(nativeSel.createRange().parentElement())==doc);};}else if(implementsWinGetSelection){getNativeSelection=getWinSelection;api.isSelectionValid=function(){return true;};}else{module.fail("Neither document.selection or window.getSelection() detected.");return false;}api.getNativeSelection=getNativeSelection;var testSelection=getNativeSelection();if(!testSelection){module.fail("Native selection was null (possibly issue 138?)");return false;}var testRange=api.createNativeRange(document);var body=getBody(document);var selectionHasAnchorAndFocus=util.areHostProperties(testSelection,
["anchorNode","focusNode","anchorOffset","focusOffset"]);features.selectionHasAnchorAndFocus=selectionHasAnchorAndFocus;var selectionHasExtend=isHostMethod(testSelection,"extend");features.selectionHasExtend=selectionHasExtend;var selectionHasSetBaseAndExtent=isHostMethod(testSelection,"setBaseAndExtent");features.selectionHasSetBaseAndExtent=selectionHasSetBaseAndExtent;var selectionHasRangeCount=(typeof testSelection.rangeCount==NUMBER);features.selectionHasRangeCount=selectionHasRangeCount;var selectionSupportsMultipleRanges=false;var collapsedNonEditableSelectionsSupported=true;var addRangeBackwardToNative=selectionHasExtend?function(nativeSelection,range){var doc=DomRange.getRangeDocument(range);var endRange=api.createRange(doc);endRange.collapseToPoint(range.endContainer,range.endOffset);nativeSelection.addRange(getNativeRange(endRange));nativeSelection.extend(range.startContainer,range.startOffset);}:null;if(util.areHostMethods(testSelection,["addRange","getRangeAt","removeAllRanges"])&&
typeof testSelection.rangeCount==NUMBER&&features.implementsDomRange){(function(){var sel=window.getSelection();if(sel){var originalSelectionRangeCount=sel.rangeCount;var selectionHasMultipleRanges=(originalSelectionRangeCount>1);var originalSelectionRanges=[];var originalSelectionBackward=winSelectionIsBackward(sel);for(var i=0;i<originalSelectionRangeCount;++i){originalSelectionRanges[i]=sel.getRangeAt(i);}var testEl=dom.createTestElement(document,"",false);var textNode=testEl.appendChild(document.createTextNode("\u00a0\u00a0\u00a0"));var r1=document.createRange();r1.setStart(textNode,1);r1.collapse(true);sel.removeAllRanges();sel.addRange(r1);collapsedNonEditableSelectionsSupported=(sel.rangeCount==1);sel.removeAllRanges();if(!selectionHasMultipleRanges){var chromeMatch=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(chromeMatch&&parseInt(chromeMatch[1])>=36){selectionSupportsMultipleRanges=false;}else{var r2=r1.cloneRange();r1.setStart(textNode,0);r2.setEnd(textNode,3);r2.setStart(textNode,2);
sel.addRange(r1);sel.addRange(r2);selectionSupportsMultipleRanges=(sel.rangeCount==2);}}dom.removeNode(testEl);sel.removeAllRanges();for(i=0;i<originalSelectionRangeCount;++i){if(i==0&&originalSelectionBackward){if(addRangeBackwardToNative){addRangeBackwardToNative(sel,originalSelectionRanges[i]);}else{api.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend");sel.addRange(originalSelectionRanges[i]);}}else{sel.addRange(originalSelectionRanges[i]);}}}})();}features.selectionSupportsMultipleRanges=selectionSupportsMultipleRanges;features.collapsedNonEditableSelectionsSupported=collapsedNonEditableSelectionsSupported;var implementsControlRange=false,testControlRange;if(body&&isHostMethod(body,"createControlRange")){testControlRange=body.createControlRange();if(util.areHostProperties(testControlRange,["item","add"])){implementsControlRange=true;}}features.implementsControlRange=implementsControlRange;
if(selectionHasAnchorAndFocus){selectionIsCollapsed=function(sel){return sel.anchorNode===sel.focusNode&&sel.anchorOffset===sel.focusOffset;};}else{selectionIsCollapsed=function(sel){return sel.rangeCount?sel.getRangeAt(sel.rangeCount-1).collapsed:false;};}function updateAnchorAndFocusFromRange(sel,range,backward){var anchorPrefix=backward?"end":"start",focusPrefix=backward?"start":"end";sel.anchorNode=range[anchorPrefix+"Container"];sel.anchorOffset=range[anchorPrefix+"Offset"];sel.focusNode=range[focusPrefix+"Container"];sel.focusOffset=range[focusPrefix+"Offset"];}function updateAnchorAndFocusFromNativeSelection(sel){var nativeSel=sel.nativeSelection;sel.anchorNode=nativeSel.anchorNode;sel.anchorOffset=nativeSel.anchorOffset;sel.focusNode=nativeSel.focusNode;sel.focusOffset=nativeSel.focusOffset;}function updateEmptySelection(sel){sel.anchorNode=sel.focusNode=null;sel.anchorOffset=sel.focusOffset=0;sel.rangeCount=0;sel.isCollapsed=true;sel._ranges.length=0;updateType(sel);}function updateType(sel){
sel.type=(sel.rangeCount==0)?"None":(selectionIsCollapsed(sel)?"Caret":"Range");}function getNativeRange(range){var nativeRange;if(range instanceof DomRange){nativeRange=api.createNativeRange(range.getDocument());nativeRange.setEnd(range.endContainer,range.endOffset);nativeRange.setStart(range.startContainer,range.startOffset);}else if(range instanceof WrappedRange){nativeRange=range.nativeRange;}else if(features.implementsDomRange&&(range instanceof dom.getWindow(range.startContainer).Range)){nativeRange=range;}return nativeRange;}function rangeContainsSingleElement(rangeNodes){if(!rangeNodes.length||rangeNodes[0].nodeType!=1){return false;}for(var i=1,len=rangeNodes.length;i<len;++i){if(!dom.isAncestorOf(rangeNodes[0],rangeNodes[i])){return false;}}return true;}function getSingleElementFromRange(range){var nodes=range.getNodes();if(!rangeContainsSingleElement(nodes)){throw module.createError("getSingleElementFromRange: range "+range.inspect()+" did not consist of a single element");}
return nodes[0];}function isTextRange(range){return!!range&&typeof range.text!="undefined";}function updateFromTextRange(sel,range){var wrappedRange=new WrappedRange(range);sel._ranges=[wrappedRange];updateAnchorAndFocusFromRange(sel,wrappedRange,false);sel.rangeCount=1;sel.isCollapsed=wrappedRange.collapsed;updateType(sel);}function updateControlSelection(sel){sel._ranges.length=0;if(sel.docSelection.type=="None"){updateEmptySelection(sel);}else{var controlRange=sel.docSelection.createRange();if(isTextRange(controlRange)){updateFromTextRange(sel,controlRange);}else{sel.rangeCount=controlRange.length;var range,doc=getDocument(controlRange.item(0));for(var i=0;i<sel.rangeCount;++i){range=api.createRange(doc);range.selectNode(controlRange.item(i));sel._ranges.push(range);}sel.isCollapsed=sel.rangeCount==1&&sel._ranges[0].collapsed;updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],false);updateType(sel);}}}function addRangeToControlSelection(sel,range){var controlRange=sel.docSelection.createRange();
var rangeElement=getSingleElementFromRange(range);var doc=getDocument(controlRange.item(0));var newControlRange=getBody(doc).createControlRange();for(var i=0,len=controlRange.length;i<len;++i){newControlRange.add(controlRange.item(i));}try{newControlRange.add(rangeElement);}catch(ex){throw module.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");}newControlRange.select();updateControlSelection(sel);}var getSelectionRangeAt;if(isHostMethod(testSelection,"getRangeAt")){getSelectionRangeAt=function(sel,index){try{return sel.getRangeAt(index);}catch(ex){return null;}};}else if(selectionHasAnchorAndFocus){getSelectionRangeAt=function(sel){var doc=getDocument(sel.anchorNode);var range=api.createRange(doc);range.setStartAndEnd(sel.anchorNode,sel.anchorOffset,sel.focusNode,sel.focusOffset);if(range.collapsed!==this.isCollapsed){range.setStartAndEnd(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset);}return range;
};}function WrappedSelection(selection,docSelection,win){this.nativeSelection=selection;this.docSelection=docSelection;this._ranges=[];this.win=win;this.refresh();}WrappedSelection.prototype=api.selectionPrototype;function deleteProperties(sel){sel.win=sel.anchorNode=sel.focusNode=sel._ranges=null;sel.rangeCount=sel.anchorOffset=sel.focusOffset=0;sel.detached=true;updateType(sel);}var cachedRangySelections=[];function actOnCachedSelection(win,action){var i=cachedRangySelections.length,cached,sel;while(i--){cached=cachedRangySelections[i];sel=cached.selection;if(action=="deleteAll"){deleteProperties(sel);}else if(cached.win==win){if(action=="delete"){cachedRangySelections.splice(i,1);return true;}else{return sel;}}}if(action=="deleteAll"){cachedRangySelections.length=0;}return null;}var getSelection=function(win){if(win&&win instanceof WrappedSelection){win.refresh();return win;}win=getWindow(win,"getNativeSelection");var sel=actOnCachedSelection(win);var nativeSel=getNativeSelection(win),docSel=implementsDocSelection?getDocSelection(win):null;
if(sel){sel.nativeSelection=nativeSel;sel.docSelection=docSel;sel.refresh();}else{sel=new WrappedSelection(nativeSel,docSel,win);cachedRangySelections.push({win:win,selection:sel});}return sel;};api.getSelection=getSelection;util.createAliasForDeprecatedMethod(api,"getIframeSelection","getSelection");var selProto=WrappedSelection.prototype;function createControlSelection(sel,ranges){var doc=getDocument(ranges[0].startContainer);var controlRange=getBody(doc).createControlRange();for(var i=0,el,len=ranges.length;i<len;++i){el=getSingleElementFromRange(ranges[i]);try{controlRange.add(el);}catch(ex){throw module.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");}}controlRange.select();updateControlSelection(sel);}if(!useDocumentSelection&&selectionHasAnchorAndFocus&&util.areHostMethods(testSelection,["removeAllRanges","addRange"])){selProto.removeAllRanges=function(){this.nativeSelection.removeAllRanges();
updateEmptySelection(this);};var addRangeBackward=function(sel,range){addRangeBackwardToNative(sel.nativeSelection,range);sel.refresh();};if(selectionHasRangeCount){selProto.addRange=function(range,direction){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL){addRangeToControlSelection(this,range);}else{if(isDirectionBackward(direction)&&selectionHasExtend){addRangeBackward(this,range);}else{var previousRangeCount;if(selectionSupportsMultipleRanges){previousRangeCount=this.rangeCount;}else{this.removeAllRanges();previousRangeCount=0;}var clonedNativeRange=getNativeRange(range).cloneRange();try{this.nativeSelection.addRange(clonedNativeRange);}catch(ex){}this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==previousRangeCount+1){if(api.config.checkSelectionRanges){var nativeRange=getSelectionRangeAt(this.nativeSelection,this.rangeCount-1);if(nativeRange&&!rangesEqual(nativeRange,range)){range=new WrappedRange(nativeRange);}}this._ranges[this.rangeCount-1]=range;
updateAnchorAndFocusFromRange(this,range,selectionIsBackward(this.nativeSelection));this.isCollapsed=selectionIsCollapsed(this);updateType(this);}else{this.refresh();}}}};}else{selProto.addRange=function(range,direction){if(isDirectionBackward(direction)&&selectionHasExtend){addRangeBackward(this,range);}else{this.nativeSelection.addRange(getNativeRange(range));this.refresh();}};}selProto.setRanges=function(ranges){if(implementsControlRange&&implementsDocSelection&&ranges.length>1){createControlSelection(this,ranges);}else{this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){this.addRange(ranges[i]);}}};}else if(isHostMethod(testSelection,"empty")&&isHostMethod(testRange,"select")&&implementsControlRange&&useDocumentSelection){selProto.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var doc;if(this.anchorNode){doc=getDocument(this.anchorNode);}else if(this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();
if(controlRange.length){doc=getDocument(controlRange.item(0));}}if(doc){var textRange=getBody(doc).createTextRange();textRange.select();this.docSelection.empty();}}}catch(ex){}updateEmptySelection(this);};selProto.addRange=function(range){if(this.docSelection.type==CONTROL){addRangeToControlSelection(this,range);}else{api.WrappedTextRange.rangeToTextRange(range).select();this._ranges[0]=range;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;updateAnchorAndFocusFromRange(this,range,false);updateType(this);}};selProto.setRanges=function(ranges){this.removeAllRanges();var rangeCount=ranges.length;if(rangeCount>1){createControlSelection(this,ranges);}else if(rangeCount){this.addRange(ranges[0]);}};}else{module.fail("No means of selecting a Range or TextRange was found");return false;}selProto.getRangeAt=function(index){if(index<0||index>=this.rangeCount){throw new DOMException("INDEX_SIZE_ERR");}else{return this._ranges[index].cloneRange();}};var refreshSelection;if(useDocumentSelection){
refreshSelection=function(sel){var range;if(api.isSelectionValid(sel.win)){range=sel.docSelection.createRange();}else{range=getBody(sel.win.document).createTextRange();range.collapse(true);}if(sel.docSelection.type==CONTROL){updateControlSelection(sel);}else if(isTextRange(range)){updateFromTextRange(sel,range);}else{updateEmptySelection(sel);}};}else if(isHostMethod(testSelection,"getRangeAt")&&typeof testSelection.rangeCount==NUMBER){refreshSelection=function(sel){if(implementsControlRange&&implementsDocSelection&&sel.docSelection.type==CONTROL){updateControlSelection(sel);}else{sel._ranges.length=sel.rangeCount=sel.nativeSelection.rangeCount;if(sel.rangeCount){for(var i=0,len=sel.rangeCount;i<len;++i){sel._ranges[i]=new api.WrappedRange(sel.nativeSelection.getRangeAt(i));}updateAnchorAndFocusFromRange(sel,sel._ranges[sel.rangeCount-1],selectionIsBackward(sel.nativeSelection));sel.isCollapsed=selectionIsCollapsed(sel);updateType(sel);}else{updateEmptySelection(sel);}}};}else if(selectionHasAnchorAndFocus&&typeof testSelection.isCollapsed==BOOLEAN&&typeof testRange.collapsed==BOOLEAN&&features.implementsDomRange){
refreshSelection=function(sel){var range,nativeSel=sel.nativeSelection;if(nativeSel.anchorNode){range=getSelectionRangeAt(nativeSel,0);sel._ranges=[range];sel.rangeCount=1;updateAnchorAndFocusFromNativeSelection(sel);sel.isCollapsed=selectionIsCollapsed(sel);updateType(sel);}else{updateEmptySelection(sel);}};}else{module.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false;}selProto.refresh=function(checkForChanges){var oldRanges=checkForChanges?this._ranges.slice(0):null;var oldAnchorNode=this.anchorNode,oldAnchorOffset=this.anchorOffset;refreshSelection(this);if(checkForChanges){var i=oldRanges.length;if(i!=this._ranges.length){return true;}if(this.anchorNode!=oldAnchorNode||this.anchorOffset!=oldAnchorOffset){return true;}while(i--){if(!rangesEqual(oldRanges[i],this._ranges[i])){return true;}}return false;}};var removeRangeManually=function(sel,range){var ranges=sel.getAllRanges();sel.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){
if(!rangesEqual(range,ranges[i])){sel.addRange(ranges[i]);}}if(!sel.rangeCount){updateEmptySelection(sel);}};if(implementsControlRange&&implementsDocSelection){selProto.removeRange=function(range){if(this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();var rangeElement=getSingleElementFromRange(range);var doc=getDocument(controlRange.item(0));var newControlRange=getBody(doc).createControlRange();var el,removed=false;for(var i=0,len=controlRange.length;i<len;++i){el=controlRange.item(i);if(el!==rangeElement||removed){newControlRange.add(controlRange.item(i));}else{removed=true;}}newControlRange.select();updateControlSelection(this);}else{removeRangeManually(this,range);}};}else{selProto.removeRange=function(range){removeRangeManually(this,range);};}var selectionIsBackward;if(!useDocumentSelection&&selectionHasAnchorAndFocus&&features.implementsDomRange){selectionIsBackward=winSelectionIsBackward;selProto.isBackward=function(){return selectionIsBackward(this);
};}else{selectionIsBackward=selProto.isBackward=function(){return false;};}selProto.isBackwards=selProto.isBackward;selProto.toString=function(){var rangeTexts=[];for(var i=0,len=this.rangeCount;i<len;++i){rangeTexts[i]=""+this._ranges[i];}return rangeTexts.join("");};function assertNodeInSameDocument(sel,node){if(sel.win.document!=getDocument(node)){throw new DOMException("WRONG_DOCUMENT_ERR");}}function assertValidOffset(node,offset){if(offset<0||offset>(dom.isCharacterDataNode(node)?node.length:node.childNodes.length)){throw new DOMException("INDEX_SIZE_ERR");}}selProto.collapse=function(node,offset){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.collapseToPoint(node,offset);this.setSingleRange(range);this.isCollapsed=true;};selProto.collapseToStart=function(){if(this.rangeCount){var range=this._ranges[0];this.collapse(range.startContainer,range.startOffset);}else{throw new DOMException("INVALID_STATE_ERR");}};selProto.collapseToEnd=function(){if(this.rangeCount){
var range=this._ranges[this.rangeCount-1];this.collapse(range.endContainer,range.endOffset);}else{throw new DOMException("INVALID_STATE_ERR");}};selProto.selectAllChildren=function(node){assertNodeInSameDocument(this,node);var range=api.createRange(node);range.selectNodeContents(node);this.setSingleRange(range);};if(selectionHasSetBaseAndExtent){selProto.setBaseAndExtent=function(anchorNode,anchorOffset,focusNode,focusOffset){this.nativeSelection.setBaseAndExtent(anchorNode,anchorOffset,focusNode,focusOffset);this.refresh();};}else if(selectionHasExtend){selProto.setBaseAndExtent=function(anchorNode,anchorOffset,focusNode,focusOffset){assertValidOffset(anchorNode,anchorOffset);assertValidOffset(focusNode,focusOffset);assertNodeInSameDocument(this,anchorNode);assertNodeInSameDocument(this,focusNode);var range=api.createRange(node);var isBackwards=(dom.comparePoints(anchorNode,anchorOffset,focusNode,focusOffset)==-1);if(isBackwards){range.setStartAndEnd(focusNode,focusOffset,anchorNode,anchorOffset);
}else{range.setStartAndEnd(anchorNode,anchorOffset,focusNode,focusOffset);}this.setSingleRange(range,isBackwards);};}selProto.deleteFromDocument=function(){if(implementsControlRange&&implementsDocSelection&&this.docSelection.type==CONTROL){var controlRange=this.docSelection.createRange();var element;while(controlRange.length){element=controlRange.item(0);controlRange.remove(element);dom.removeNode(element);}this.refresh();}else if(this.rangeCount){var ranges=this.getAllRanges();if(ranges.length){this.removeAllRanges();for(var i=0,len=ranges.length;i<len;++i){ranges[i].deleteContents();}this.addRange(ranges[len-1]);}}};selProto.eachRange=function(func,returnValue){for(var i=0,len=this._ranges.length;i<len;++i){if(func(this.getRangeAt(i))){return returnValue;}}};selProto.getAllRanges=function(){var ranges=[];this.eachRange(function(range){ranges.push(range);});return ranges;};selProto.setSingleRange=function(range,direction){this.removeAllRanges();this.addRange(range,direction);};
selProto.callMethodOnEachRange=function(methodName,params){var results=[];this.eachRange(function(range){results.push(range[methodName].apply(range,params||[]));});return results;};function createStartOrEndSetter(isStart){return function(node,offset){var range;if(this.rangeCount){range=this.getRangeAt(0);range["set"+(isStart?"Start":"End")](node,offset);}else{range=api.createRange(this.win.document);range.setStartAndEnd(node,offset);}this.setSingleRange(range,this.isBackward());};}selProto.setStart=createStartOrEndSetter(true);selProto.setEnd=createStartOrEndSetter(false);api.rangePrototype.select=function(direction){getSelection(this.getDocument()).setSingleRange(this,direction);};selProto.changeEachRange=function(func){var ranges=[];var backward=this.isBackward();this.eachRange(function(range){func(range);ranges.push(range);});this.removeAllRanges();if(backward&&ranges.length==1){this.addRange(ranges[0],"backward");}else{this.setRanges(ranges);}};selProto.containsNode=function(node,allowPartial){
return this.eachRange(function(range){return range.containsNode(node,allowPartial);},true)||false;};selProto.getBookmark=function(containerNode){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[containerNode])};};selProto.moveToBookmark=function(bookmark){var selRanges=[];for(var i=0,rangeBookmark,range;rangeBookmark=bookmark.rangeBookmarks[i++];){range=api.createRange(this.win);range.moveToBookmark(rangeBookmark);selRanges.push(range);}if(bookmark.backward){this.setSingleRange(selRanges[0],"backward");}else{this.setRanges(selRanges);}};selProto.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")};};selProto.restoreRanges=function(selRanges){this.removeAllRanges();for(var i=0,range;range=selRanges.ranges[i];++i){this.addRange(range,(selRanges.backward&&i==0));}};selProto.toHtml=function(){var rangeHtmls=[];this.eachRange(function(range){rangeHtmls.push(DomRange.toHtml(range));});return rangeHtmls.join("");
};if(features.implementsTextRange){selProto.getNativeTextRange=function(){var sel,textRange;if((sel=this.docSelection)){var range=sel.createRange();if(isTextRange(range)){return range;}else{throw module.createError("getNativeTextRange: selection is a control selection");}}else if(this.rangeCount>0){return api.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));}else{throw module.createError("getNativeTextRange: selection contains no range");}};}function inspect(sel){var rangeInspects=[];var anchor=new DomPosition(sel.anchorNode,sel.anchorOffset);var focus=new DomPosition(sel.focusNode,sel.focusOffset);var name=(typeof sel.getName=="function")?sel.getName():"Selection";if(typeof sel.rangeCount!="undefined"){for(var i=0,len=sel.rangeCount;i<len;++i){rangeInspects[i]=DomRange.inspect(sel.getRangeAt(i));}}return"["+name+"(Ranges: "+rangeInspects.join(", ")+")(anchor: "+anchor.inspect()+", focus: "+focus.inspect()+"]";}selProto.getName=function(){return"WrappedSelection";};selProto.inspect=function(){
return inspect(this);};selProto.detach=function(){actOnCachedSelection(this.win,"delete");deleteProperties(this);};WrappedSelection.detachAll=function(){actOnCachedSelection(null,"deleteAll");};WrappedSelection.inspect=inspect;WrappedSelection.isDirectionBackward=isDirectionBackward;api.Selection=WrappedSelection;api.selectionPrototype=selProto;api.addShimListener(function(win){if(typeof win.getSelection=="undefined"){win.getSelection=function(){return getSelection(win);};}win=null;});});var docReady=false;var loadHandler=function(e){if(!docReady){docReady=true;if(!api.initialized&&api.config.autoInitialize){init();}}};if(isBrowser){if(document.readyState=="complete"){loadHandler();}else{if(isHostMethod(document,"addEventListener")){document.addEventListener("DOMContentLoaded",loadHandler,false);}addListener(window,"load",loadHandler);}}return api;},this);;(function(factory,root){if(typeof define=="function"&&define.amd){define(["./rangy-core"],factory);}else if(typeof module!="undefined"&&typeof exports=="object"){
module.exports=factory(require("rangy"));}else{factory(root.rangy);}})(function(rangy){rangy.createModule("ClassApplier",["WrappedSelection"],function(api,module){var dom=api.dom;var DomPosition=dom.DomPosition;var contains=dom.arrayContains;var util=api.util;var forEach=util.forEach;var defaultTagName="span";var createElementNSSupported=util.isHostMethod(document,"createElementNS");function each(obj,func){for(var i in obj){if(obj.hasOwnProperty(i)){if(func(i,obj[i])===false){return false;}}}return true;}function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");}function classNameContainsClass(fullClassName,className){return!!fullClassName&&new RegExp("(?:^|\\s)"+className+"(?:\\s|$)").test(fullClassName);}function hasClass(el,className){if(typeof el.classList=="object"){return el.classList.contains(className);}else{var classNameSupported=(typeof el.className=="string");var elClass=classNameSupported?el.className:el.getAttribute("class");return classNameContainsClass(elClass,className);
}}function addClass(el,className){if(typeof el.classList=="object"){el.classList.add(className);}else{var classNameSupported=(typeof el.className=="string");var elClass=classNameSupported?el.className:el.getAttribute("class");if(elClass){if(!classNameContainsClass(elClass,className)){elClass+=" "+className;}}else{elClass=className;}if(classNameSupported){el.className=elClass;}else{el.setAttribute("class",elClass);}}}var removeClass=(function(){function replacer(matched,whiteSpaceBefore,whiteSpaceAfter){return(whiteSpaceBefore&&whiteSpaceAfter)?" ":"";}return function(el,className){if(typeof el.classList=="object"){el.classList.remove(className);}else{var classNameSupported=(typeof el.className=="string");var elClass=classNameSupported?el.className:el.getAttribute("class");elClass=elClass.replace(new RegExp("(^|\\s)"+className+"(\\s|$)"),replacer);if(classNameSupported){el.className=elClass;}else{el.setAttribute("class",elClass);}}};})();function getClass(el){var classNameSupported=(typeof el.className=="string");
return classNameSupported?el.className:el.getAttribute("class");}function sortClassName(className){return className&&className.split(/\s+/).sort().join(" ");}function getSortedClassName(el){return sortClassName(getClass(el));}function haveSameClasses(el1,el2){return getSortedClassName(el1)==getSortedClassName(el2);}function hasAllClasses(el,className){var classes=className.split(/\s+/);for(var i=0,len=classes.length;i<len;++i){if(!hasClass(el,trim(classes[i]))){return false;}}return true;}function canTextBeStyled(textNode){var parent=textNode.parentNode;return(parent&&parent.nodeType==1&&!/^(textarea|style|script|select|iframe)$/i.test(parent.nodeName));}function movePosition(position,oldParent,oldIndex,newParent,newIndex){var posNode=position.node,posOffset=position.offset;var newNode=posNode,newOffset=posOffset;if(posNode==newParent&&posOffset>newIndex){++newOffset;}if(posNode==oldParent&&(posOffset==oldIndex||posOffset==oldIndex+1)){newNode=newParent;newOffset+=newIndex-oldIndex;}if(posNode==oldParent&&posOffset>oldIndex+1){--newOffset;
}position.node=newNode;position.offset=newOffset;}function movePositionWhenRemovingNode(position,parentNode,index){if(position.node==parentNode&&position.offset>index){--position.offset;}}function movePreservingPositions(node,newParent,newIndex,positionsToPreserve){if(newIndex==-1){newIndex=newParent.childNodes.length;}var oldParent=node.parentNode;var oldIndex=dom.getNodeIndex(node);forEach(positionsToPreserve,function(position){movePosition(position,oldParent,oldIndex,newParent,newIndex);});if(newParent.childNodes.length==newIndex){newParent.appendChild(node);}else{newParent.insertBefore(node,newParent.childNodes[newIndex]);}}function removePreservingPositions(node,positionsToPreserve){var oldParent=node.parentNode;var oldIndex=dom.getNodeIndex(node);forEach(positionsToPreserve,function(position){movePositionWhenRemovingNode(position,oldParent,oldIndex);});dom.removeNode(node);}function moveChildrenPreservingPositions(node,newParent,newIndex,removeNode,positionsToPreserve){var child,children=[];
while((child=node.firstChild)){movePreservingPositions(child,newParent,newIndex++,positionsToPreserve);children.push(child);}if(removeNode){removePreservingPositions(node,positionsToPreserve);}return children;}function replaceWithOwnChildrenPreservingPositions(element,positionsToPreserve){return moveChildrenPreservingPositions(element,element.parentNode,dom.getNodeIndex(element),true,positionsToPreserve);}function rangeSelectsAnyText(range,textNode){var textNodeRange=range.cloneRange();textNodeRange.selectNodeContents(textNode);var intersectionRange=textNodeRange.intersection(range);var text=intersectionRange?intersectionRange.toString():"";return text!="";}function getEffectiveTextNodes(range){var nodes=range.getNodes([3]);var start=0,node;while((node=nodes[start])&&!rangeSelectsAnyText(range,node)){++start;}var end=nodes.length-1;while((node=nodes[end])&&!rangeSelectsAnyText(range,node)){--end;}return nodes.slice(start,end+1);}function elementsHaveSameNonClassAttributes(el1,el2){if(el1.attributes.length!=el2.attributes.length)return false;
for(var i=0,len=el1.attributes.length,attr1,attr2,name;i<len;++i){attr1=el1.attributes[i];name=attr1.name;if(name!="class"){attr2=el2.attributes.getNamedItem(name);if((attr1===null)!=(attr2===null))return false;if(attr1.specified!=attr2.specified)return false;if(attr1.specified&&attr1.nodeValue!==attr2.nodeValue)return false;}}return true;}function elementHasNonClassAttributes(el,exceptions){for(var i=0,len=el.attributes.length,attrName;i<len;++i){attrName=el.attributes[i].name;if(!(exceptions&&contains(exceptions,attrName))&&el.attributes[i].specified&&attrName!="class"){return true;}}return false;}var getComputedStyleProperty=dom.getComputedStyleProperty;var isEditableElement=(function(){var testEl=document.createElement("div");return typeof testEl.isContentEditable=="boolean"?function(node){return node&&node.nodeType==1&&node.isContentEditable;}:function(node){if(!node||node.nodeType!=1||node.contentEditable=="false"){return false;}return node.contentEditable=="true"||isEditableElement(node.parentNode);
};})();function isEditingHost(node){var parent;return node&&node.nodeType==1&&(((parent=node.parentNode)&&parent.nodeType==9&&parent.designMode=="on")||(isEditableElement(node)&&!isEditableElement(node.parentNode)));}function isEditable(node){return(isEditableElement(node)||(node.nodeType!=1&&isEditableElement(node.parentNode)))&&!isEditingHost(node);}var inlineDisplayRegex=/^inline(-block|-table)?$/i;function isNonInlineElement(node){return node&&node.nodeType==1&&!inlineDisplayRegex.test(getComputedStyleProperty(node,"display"));}var htmlNonWhiteSpaceRegex=/[^\r\n\t\f \u200B]/;function isUnrenderedWhiteSpaceNode(node){if(node.data.length==0){return true;}if(htmlNonWhiteSpaceRegex.test(node.data)){return false;}var cssWhiteSpace=getComputedStyleProperty(node.parentNode,"whiteSpace");switch(cssWhiteSpace){case"pre":case"pre-wrap":case"-moz-pre-wrap":return false;case"pre-line":if(/[\r\n]/.test(node.data)){return false;}}return isNonInlineElement(node.previousSibling)||isNonInlineElement(node.nextSibling);
}function getRangeBoundaries(ranges){var positions=[],i,range;for(i=0;range=ranges[i++];){positions.push(new DomPosition(range.startContainer,range.startOffset),new DomPosition(range.endContainer,range.endOffset));}return positions;}function updateRangesFromBoundaries(ranges,positions){for(var i=0,range,start,end,len=ranges.length;i<len;++i){range=ranges[i];start=positions[i*2];end=positions[i*2+1];range.setStartAndEnd(start.node,start.offset,end.node,end.offset);}}function isSplitPoint(node,offset){if(dom.isCharacterDataNode(node)){if(offset==0){return!!node.previousSibling;}else if(offset==node.length){return!!node.nextSibling;}else{return true;}}return offset>0&&offset<node.childNodes.length;}function splitNodeAt(node,descendantNode,descendantOffset,positionsToPreserve){var newNode,parentNode;var splitAtStart=(descendantOffset==0);if(dom.isAncestorOf(descendantNode,node)){return node;}if(dom.isCharacterDataNode(descendantNode)){var descendantIndex=dom.getNodeIndex(descendantNode);if(descendantOffset==0){
descendantOffset=descendantIndex;}else if(descendantOffset==descendantNode.length){descendantOffset=descendantIndex+1;}else{throw module.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+descendantOffset+" in "+descendantNode.data);}descendantNode=descendantNode.parentNode;}if(isSplitPoint(descendantNode,descendantOffset)){newNode=descendantNode.cloneNode(false);parentNode=descendantNode.parentNode;if(newNode.id){newNode.removeAttribute("id");}var child,newChildIndex=0;while((child=descendantNode.childNodes[descendantOffset])){movePreservingPositions(child,newNode,newChildIndex++,positionsToPreserve);}movePreservingPositions(newNode,parentNode,dom.getNodeIndex(descendantNode)+1,positionsToPreserve);return(descendantNode==node)?newNode:splitNodeAt(node,parentNode,dom.getNodeIndex(newNode),positionsToPreserve);}else if(node!=descendantNode){newNode=descendantNode.parentNode;var newNodeIndex=dom.getNodeIndex(descendantNode);if(!splitAtStart){
newNodeIndex++;}return splitNodeAt(node,newNode,newNodeIndex,positionsToPreserve);}return node;}function areElementsMergeable(el1,el2){return el1.namespaceURI==el2.namespaceURI&&el1.tagName.toLowerCase()==el2.tagName.toLowerCase()&&haveSameClasses(el1,el2)&&elementsHaveSameNonClassAttributes(el1,el2)&&getComputedStyleProperty(el1,"display")=="inline"&&getComputedStyleProperty(el2,"display")=="inline";}function createAdjacentMergeableTextNodeGetter(forward){var siblingPropName=forward?"nextSibling":"previousSibling";return function(textNode,checkParentElement){var el=textNode.parentNode;var adjacentNode=textNode[siblingPropName];if(adjacentNode){if(adjacentNode&&adjacentNode.nodeType==3){return adjacentNode;}}else if(checkParentElement){adjacentNode=el[siblingPropName];if(adjacentNode&&adjacentNode.nodeType==1&&areElementsMergeable(el,adjacentNode)){var adjacentNodeChild=adjacentNode[forward?"firstChild":"lastChild"];if(adjacentNodeChild&&adjacentNodeChild.nodeType==3){return adjacentNodeChild;
}}}return null;};}var getPreviousMergeableTextNode=createAdjacentMergeableTextNodeGetter(false),getNextMergeableTextNode=createAdjacentMergeableTextNodeGetter(true);function Merge(firstNode){this.isElementMerge=(firstNode.nodeType==1);this.textNodes=[];var firstTextNode=this.isElementMerge?firstNode.lastChild:firstNode;if(firstTextNode){this.textNodes[0]=firstTextNode;}}Merge.prototype={doMerge:function(positionsToPreserve){var textNodes=this.textNodes;var firstTextNode=textNodes[0];if(textNodes.length>1){var firstTextNodeIndex=dom.getNodeIndex(firstTextNode);var textParts=[],combinedTextLength=0,textNode,parent;forEach(textNodes,function(textNode,i){parent=textNode.parentNode;if(i>0){parent.removeChild(textNode);if(!parent.hasChildNodes()){dom.removeNode(parent);}if(positionsToPreserve){forEach(positionsToPreserve,function(position){if(position.node==textNode){position.node=firstTextNode;position.offset+=combinedTextLength;}if(position.node==parent&&position.offset>firstTextNodeIndex){--position.offset;
if(position.offset==firstTextNodeIndex+1&&i<textNodes.length-1){position.node=firstTextNode;position.offset=combinedTextLength;}}});}}textParts[i]=textNode.data;combinedTextLength+=textNode.data.length;});firstTextNode.data=textParts.join("");}return firstTextNode.data;},getLength:function(){var i=this.textNodes.length,len=0;while(i--){len+=this.textNodes[i].length;}return len;},toString:function(){var textParts=[];forEach(this.textNodes,function(textNode,i){textParts[i]="'"+textNode.data+"'";});return"[Merge("+textParts.join(",")+")]";}};var optionProperties=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"];var attrNamesForProperties={};function ClassApplier(className,options,tagNames){var normalize,i,len,propName,applier=this;applier.cssClass=applier.className=className;var elementPropertiesFromOptions=null,elementAttributes={};if(typeof options=="object"&&options!==null){if(typeof options.elementTagName!=="undefined"){
options.elementTagName=options.elementTagName.toLowerCase();}tagNames=options.tagNames;elementPropertiesFromOptions=options.elementProperties;elementAttributes=options.elementAttributes;for(i=0;propName=optionProperties[i++];){if(options.hasOwnProperty(propName)){applier[propName]=options[propName];}}normalize=options.normalize;}else{normalize=options;}applier.normalize=(typeof normalize=="undefined")?true:normalize;applier.attrExceptions=[];var el=document.createElement(applier.elementTagName);applier.elementProperties=applier.copyPropertiesToElement(elementPropertiesFromOptions,el,true);each(elementAttributes,function(attrName,attrValue){applier.attrExceptions.push(attrName);elementAttributes[attrName]=""+attrValue;});applier.elementAttributes=elementAttributes;applier.elementSortedClassName=applier.elementProperties.hasOwnProperty("className")?sortClassName(applier.elementProperties.className+" "+className):className;applier.applyToAnyTagName=false;var type=typeof tagNames;if(type=="string"){
if(tagNames=="*"){applier.applyToAnyTagName=true;}else{applier.tagNames=trim(tagNames.toLowerCase()).split(/\s*,\s*/);}}else if(type=="object"&&typeof tagNames.length=="number"){applier.tagNames=[];for(i=0,len=tagNames.length;i<len;++i){if(tagNames[i]=="*"){applier.applyToAnyTagName=true;}else{applier.tagNames.push(tagNames[i].toLowerCase());}}}else{applier.tagNames=[applier.elementTagName];}}ClassApplier.prototype={elementTagName:defaultTagName,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:true,applyToEditableOnly:false,useExistingElements:true,removeEmptyElements:true,onElementCreate:null,copyPropertiesToElement:function(props,el,createCopy){var s,elStyle,elProps={},elPropsStyle,propValue,elPropValue,attrName;for(var p in props){if(props.hasOwnProperty(p)){propValue=props[p];elPropValue=el[p];if(p=="className"){addClass(el,propValue);addClass(el,this.className);el[p]=sortClassName(el[p]);if(createCopy){elProps[p]=propValue;}}else if(p=="style"){elStyle=elPropValue;if(createCopy){
elProps[p]=elPropsStyle={};}for(s in props[p]){if(props[p].hasOwnProperty(s)){elStyle[s]=propValue[s];if(createCopy){elPropsStyle[s]=elStyle[s];}}}this.attrExceptions.push(p);}else{el[p]=propValue;if(createCopy){elProps[p]=el[p];attrName=attrNamesForProperties.hasOwnProperty(p)?attrNamesForProperties[p]:p;this.attrExceptions.push(attrName);}}}}return createCopy?elProps:"";},copyAttributesToElement:function(attrs,el){for(var attrName in attrs){if(attrs.hasOwnProperty(attrName)&&!/^class(?:Name)?$/i.test(attrName)){el.setAttribute(attrName,attrs[attrName]);}}},appliesToElement:function(el){return contains(this.tagNames,el.tagName.toLowerCase());},getEmptyElements:function(range){var applier=this;return range.getNodes([1],function(el){return applier.appliesToElement(el)&&!el.hasChildNodes();});},hasClass:function(node){return node.nodeType==1&&(this.applyToAnyTagName||this.appliesToElement(node))&&hasClass(node,this.className);},getSelfOrAncestorWithClass:function(node){while(node){if(this.hasClass(node)){
return node;}node=node.parentNode;}return null;},isModifiable:function(node){return!this.applyToEditableOnly||isEditable(node);},isIgnorableWhiteSpaceNode:function(node){return this.ignoreWhiteSpace&&node&&node.nodeType==3&&isUnrenderedWhiteSpaceNode(node);},postApply:function(textNodes,range,positionsToPreserve,isUndo){var firstNode=textNodes[0],lastNode=textNodes[textNodes.length-1];var merges=[],currentMerge;var rangeStartNode=firstNode,rangeEndNode=lastNode;var rangeStartOffset=0,rangeEndOffset=lastNode.length;var precedingTextNode;forEach(textNodes,function(textNode){precedingTextNode=getPreviousMergeableTextNode(textNode,!isUndo);if(precedingTextNode){if(!currentMerge){currentMerge=new Merge(precedingTextNode);merges.push(currentMerge);}currentMerge.textNodes.push(textNode);if(textNode===firstNode){rangeStartNode=currentMerge.textNodes[0];rangeStartOffset=rangeStartNode.length;}if(textNode===lastNode){rangeEndNode=currentMerge.textNodes[0];rangeEndOffset=currentMerge.getLength();
}}else{currentMerge=null;}});var nextTextNode=getNextMergeableTextNode(lastNode,!isUndo);if(nextTextNode){if(!currentMerge){currentMerge=new Merge(lastNode);merges.push(currentMerge);}currentMerge.textNodes.push(nextTextNode);}if(merges.length){for(var i=0,len=merges.length;i<len;++i){merges[i].doMerge(positionsToPreserve);}range.setStartAndEnd(rangeStartNode,rangeStartOffset,rangeEndNode,rangeEndOffset);}},createContainer:function(parentNode){var doc=dom.getDocument(parentNode);var namespace;var el=createElementNSSupported&&!dom.isHtmlNamespace(parentNode)&&(namespace=parentNode.namespaceURI)?doc.createElementNS(parentNode.namespaceURI,this.elementTagName):doc.createElement(this.elementTagName);this.copyPropertiesToElement(this.elementProperties,el,false);this.copyAttributesToElement(this.elementAttributes,el);addClass(el,this.className);if(this.onElementCreate){this.onElementCreate(el,this);}return el;},elementHasProperties:function(el,props){var applier=this;return each(props,function(p,propValue){
if(p=="className"){return hasAllClasses(el,propValue);}else if(typeof propValue=="object"){if(!applier.elementHasProperties(el[p],propValue)){return false;}}else if(el[p]!==propValue){return false;}});},elementHasAttributes:function(el,attrs){return each(attrs,function(name,value){if(el.getAttribute(name)!==value){return false;}});},applyToTextNode:function(textNode,positionsToPreserve){if(canTextBeStyled(textNode)){var parent=textNode.parentNode;if(parent.childNodes.length==1&&this.useExistingElements&&this.appliesToElement(parent)&&this.elementHasProperties(parent,this.elementProperties)&&this.elementHasAttributes(parent,this.elementAttributes)){addClass(parent,this.className);}else{var textNodeParent=textNode.parentNode;var el=this.createContainer(textNodeParent);textNodeParent.insertBefore(el,textNode);el.appendChild(textNode);}}},isRemovable:function(el){return el.tagName.toLowerCase()==this.elementTagName&&getSortedClassName(el)==this.elementSortedClassName&&this.elementHasProperties(el,this.elementProperties)&&
!elementHasNonClassAttributes(el,this.attrExceptions)&&this.elementHasAttributes(el,this.elementAttributes)&&this.isModifiable(el);},isEmptyContainer:function(el){var childNodeCount=el.childNodes.length;return el.nodeType==1&&this.isRemovable(el)&&(childNodeCount==0||(childNodeCount==1&&this.isEmptyContainer(el.firstChild)));},removeEmptyContainers:function(range){var applier=this;var nodesToRemove=range.getNodes([1],function(el){return applier.isEmptyContainer(el);});var rangesToPreserve=[range];var positionsToPreserve=getRangeBoundaries(rangesToPreserve);forEach(nodesToRemove,function(node){removePreservingPositions(node,positionsToPreserve);});updateRangesFromBoundaries(rangesToPreserve,positionsToPreserve);},undoToTextNode:function(textNode,range,ancestorWithClass,positionsToPreserve){if(!range.containsNode(ancestorWithClass)){var ancestorRange=range.cloneRange();ancestorRange.selectNode(ancestorWithClass);if(ancestorRange.isPointInRange(range.endContainer,range.endOffset)){
splitNodeAt(ancestorWithClass,range.endContainer,range.endOffset,positionsToPreserve);range.setEndAfter(ancestorWithClass);}if(ancestorRange.isPointInRange(range.startContainer,range.startOffset)){ancestorWithClass=splitNodeAt(ancestorWithClass,range.startContainer,range.startOffset,positionsToPreserve);}}if(this.isRemovable(ancestorWithClass)){replaceWithOwnChildrenPreservingPositions(ancestorWithClass,positionsToPreserve);}else{removeClass(ancestorWithClass,this.className);}},splitAncestorWithClass:function(container,offset,positionsToPreserve){var ancestorWithClass=this.getSelfOrAncestorWithClass(container);if(ancestorWithClass){splitNodeAt(ancestorWithClass,container,offset,positionsToPreserve);}},undoToAncestor:function(ancestorWithClass,positionsToPreserve){if(this.isRemovable(ancestorWithClass)){replaceWithOwnChildrenPreservingPositions(ancestorWithClass,positionsToPreserve);}else{removeClass(ancestorWithClass,this.className);}},applyToRange:function(range,rangesToPreserve){var applier=this;
rangesToPreserve=rangesToPreserve||[];var positionsToPreserve=getRangeBoundaries(rangesToPreserve||[]);range.splitBoundariesPreservingPositions(positionsToPreserve);if(applier.removeEmptyElements){applier.removeEmptyContainers(range);}var textNodes=getEffectiveTextNodes(range);if(textNodes.length){forEach(textNodes,function(textNode){if(!applier.isIgnorableWhiteSpaceNode(textNode)&&!applier.getSelfOrAncestorWithClass(textNode)&&applier.isModifiable(textNode)){applier.applyToTextNode(textNode,positionsToPreserve);}});var lastTextNode=textNodes[textNodes.length-1];range.setStartAndEnd(textNodes[0],0,lastTextNode,lastTextNode.length);if(applier.normalize){applier.postApply(textNodes,range,positionsToPreserve,false);}updateRangesFromBoundaries(rangesToPreserve,positionsToPreserve);}var emptyElements=applier.getEmptyElements(range);forEach(emptyElements,function(el){addClass(el,applier.className);});},applyToRanges:function(ranges){var i=ranges.length;while(i--){this.applyToRange(ranges[i],ranges);
}return ranges;},applyToSelection:function(win){var sel=api.getSelection(win);sel.setRanges(this.applyToRanges(sel.getAllRanges()));},undoToRange:function(range,rangesToPreserve){var applier=this;rangesToPreserve=rangesToPreserve||[];var positionsToPreserve=getRangeBoundaries(rangesToPreserve);range.splitBoundariesPreservingPositions(positionsToPreserve);if(applier.removeEmptyElements){applier.removeEmptyContainers(range,positionsToPreserve);}var textNodes=getEffectiveTextNodes(range);var textNode,ancestorWithClass;var lastTextNode=textNodes[textNodes.length-1];if(textNodes.length){applier.splitAncestorWithClass(range.endContainer,range.endOffset,positionsToPreserve);applier.splitAncestorWithClass(range.startContainer,range.startOffset,positionsToPreserve);for(var i=0,len=textNodes.length;i<len;++i){textNode=textNodes[i];ancestorWithClass=applier.getSelfOrAncestorWithClass(textNode);if(ancestorWithClass&&applier.isModifiable(textNode)){applier.undoToAncestor(ancestorWithClass,positionsToPreserve);
}}range.setStartAndEnd(textNodes[0],0,lastTextNode,lastTextNode.length);if(applier.normalize){applier.postApply(textNodes,range,positionsToPreserve,true);}updateRangesFromBoundaries(rangesToPreserve,positionsToPreserve);}var emptyElements=applier.getEmptyElements(range);forEach(emptyElements,function(el){removeClass(el,applier.className);});},undoToRanges:function(ranges){var i=ranges.length;while(i--){this.undoToRange(ranges[i],ranges);}return ranges;},undoToSelection:function(win){var sel=api.getSelection(win);var ranges=api.getSelection(win).getAllRanges();this.undoToRanges(ranges);sel.setRanges(ranges);},isAppliedToRange:function(range){if(range.collapsed||range.toString()==""){return!!this.getSelfOrAncestorWithClass(range.commonAncestorContainer);}else{var textNodes=range.getNodes([3]);if(textNodes.length)for(var i=0,textNode;textNode=textNodes[i++];){if(!this.isIgnorableWhiteSpaceNode(textNode)&&rangeSelectsAnyText(range,textNode)&&this.isModifiable(textNode)&&!this.getSelfOrAncestorWithClass(textNode)){
return false;}}return true;}},isAppliedToRanges:function(ranges){var i=ranges.length;if(i==0){return false;}while(i--){if(!this.isAppliedToRange(ranges[i])){return false;}}return true;},isAppliedToSelection:function(win){var sel=api.getSelection(win);return this.isAppliedToRanges(sel.getAllRanges());},toggleRange:function(range){if(this.isAppliedToRange(range)){this.undoToRange(range);}else{this.applyToRange(range);}},toggleSelection:function(win){if(this.isAppliedToSelection(win)){this.undoToSelection(win);}else{this.applyToSelection(win);}},getElementsWithClassIntersectingRange:function(range){var elements=[];var applier=this;range.getNodes([3],function(textNode){var el=applier.getSelfOrAncestorWithClass(textNode);if(el&&!contains(elements,el)){elements.push(el);}});return elements;},detach:function(){}};function createClassApplier(className,options,tagNames){return new ClassApplier(className,options,tagNames);}ClassApplier.util={hasClass:hasClass,addClass:addClass,removeClass:removeClass,
getClass:getClass,hasSameClasses:haveSameClasses,hasAllClasses:hasAllClasses,replaceWithOwnChildren:replaceWithOwnChildrenPreservingPositions,elementsHaveSameNonClassAttributes:elementsHaveSameNonClassAttributes,elementHasNonClassAttributes:elementHasNonClassAttributes,splitNodeAt:splitNodeAt,isEditableElement:isEditableElement,isEditingHost:isEditingHost,isEditable:isEditable};api.CssClassApplier=api.ClassApplier=ClassApplier;api.createClassApplier=createClassApplier;util.createAliasForDeprecatedMethod(api,"createCssClassApplier","createClassApplier",module);});return rangy;},this);;(function(factory,root){if(typeof define=="function"&&define.amd){define(["./rangy-core"],factory);}else if(typeof module!="undefined"&&typeof exports=="object"){module.exports=factory(require("rangy"));}else{factory(root.rangy);}})(function(rangy){rangy.createModule("Highlighter",["ClassApplier"],function(api,module){var dom=api.dom;var contains=dom.arrayContains;var getBody=dom.getBody;var createOptions=api.util.createOptions;
var forEach=api.util.forEach;var nextHighlightId=1;function compareHighlights(h1,h2){return h1.characterRange.start-h2.characterRange.start;}function getContainerElement(doc,id){return id?doc.getElementById(id):getBody(doc);}var highlighterTypes={};function HighlighterType(type,converterCreator){this.type=type;this.converterCreator=converterCreator;}HighlighterType.prototype.create=function(){var converter=this.converterCreator();converter.type=this.type;return converter;};function registerHighlighterType(type,converterCreator){highlighterTypes[type]=new HighlighterType(type,converterCreator);}function getConverter(type){var highlighterType=highlighterTypes[type];if(highlighterType instanceof HighlighterType){return highlighterType.create();}else{throw new Error("Highlighter type '"+type+"' is not valid");}}api.registerHighlighterType=registerHighlighterType;function CharacterRange(start,end){this.start=start;this.end=end;}CharacterRange.prototype={intersects:function(charRange){return this.start<charRange.end&&this.end>charRange.start;
},isContiguousWith:function(charRange){return this.start==charRange.end||this.end==charRange.start;},union:function(charRange){return new CharacterRange(Math.min(this.start,charRange.start),Math.max(this.end,charRange.end));},intersection:function(charRange){return new CharacterRange(Math.max(this.start,charRange.start),Math.min(this.end,charRange.end));},getComplements:function(charRange){var ranges=[];if(this.start>=charRange.start){if(this.end<=charRange.end){return[];}ranges.push(new CharacterRange(charRange.end,this.end));}else{ranges.push(new CharacterRange(this.start,Math.min(this.end,charRange.start)));if(this.end>charRange.end){ranges.push(new CharacterRange(charRange.end,this.end));}}return ranges;},toString:function(){return"[CharacterRange("+this.start+", "+this.end+")]";}};CharacterRange.fromCharacterRange=function(charRange){return new CharacterRange(charRange.start,charRange.end);};var textContentConverter={rangeToCharacterRange:function(range,containerNode){var bookmark=range.getBookmark(containerNode);
return new CharacterRange(bookmark.start,bookmark.end);},characterRangeToRange:function(doc,characterRange,containerNode){var range=api.createRange(doc);range.moveToBookmark({start:characterRange.start,end:characterRange.end,containerNode:containerNode});return range;},serializeSelection:function(selection,containerNode){var ranges=selection.getAllRanges(),rangeCount=ranges.length;var rangeInfos=[];var backward=rangeCount==1&&selection.isBackward();for(var i=0,len=ranges.length;i<len;++i){rangeInfos[i]={characterRange:this.rangeToCharacterRange(ranges[i],containerNode),backward:backward};}return rangeInfos;},restoreSelection:function(selection,savedSelection,containerNode){selection.removeAllRanges();var doc=selection.win.document;for(var i=0,len=savedSelection.length,range,rangeInfo,characterRange;i<len;++i){rangeInfo=savedSelection[i];characterRange=rangeInfo.characterRange;range=this.characterRangeToRange(doc,rangeInfo.characterRange,containerNode);selection.addRange(range,rangeInfo.backward);
}}};registerHighlighterType("textContent",function(){return textContentConverter;});registerHighlighterType("TextRange",(function(){var converter;return function(){if(!converter){var textRangeModule=api.modules.TextRange;if(!textRangeModule){throw new Error("TextRange module is missing.");}else if(!textRangeModule.supported){throw new Error("TextRange module is present but not supported.");}converter={rangeToCharacterRange:function(range,containerNode){return CharacterRange.fromCharacterRange(range.toCharacterRange(containerNode));},characterRangeToRange:function(doc,characterRange,containerNode){var range=api.createRange(doc);range.selectCharacters(containerNode,characterRange.start,characterRange.end);return range;},serializeSelection:function(selection,containerNode){return selection.saveCharacterRanges(containerNode);},restoreSelection:function(selection,savedSelection,containerNode){selection.restoreCharacterRanges(containerNode,savedSelection);}};}return converter;};})());
function Highlight(doc,characterRange,classApplier,converter,id,containerElementId){if(id){this.id=id;nextHighlightId=Math.max(nextHighlightId,id+1);}else{this.id=nextHighlightId++;}this.characterRange=characterRange;this.doc=doc;this.classApplier=classApplier;this.converter=converter;this.containerElementId=containerElementId||null;this.applied=false;}Highlight.prototype={getContainerElement:function(){return getContainerElement(this.doc,this.containerElementId);},getRange:function(){return this.converter.characterRangeToRange(this.doc,this.characterRange,this.getContainerElement());},fromRange:function(range){this.characterRange=this.converter.rangeToCharacterRange(range,this.getContainerElement());},getText:function(){return this.getRange().toString();},containsElement:function(el){return this.getRange().containsNodeContents(el.firstChild);},unapply:function(){this.classApplier.undoToRange(this.getRange());this.applied=false;},apply:function(){this.classApplier.applyToRange(this.getRange());
this.applied=true;},getHighlightElements:function(){return this.classApplier.getElementsWithClassIntersectingRange(this.getRange());},toString:function(){return"[Highlight(ID: "+this.id+", class: "+this.classApplier.className+", character range: "+this.characterRange.start+" - "+this.characterRange.end+")]";}};function Highlighter(doc,type){type=type||"textContent";this.doc=doc||document;this.classAppliers={};this.highlights=[];this.converter=getConverter(type);}Highlighter.prototype={addClassApplier:function(classApplier){this.classAppliers[classApplier.className]=classApplier;},getHighlightForElement:function(el){var highlights=this.highlights;for(var i=0,len=highlights.length;i<len;++i){if(highlights[i].containsElement(el)){return highlights[i];}}return null;},removeHighlights:function(highlights){for(var i=0,len=this.highlights.length,highlight;i<len;++i){highlight=this.highlights[i];if(contains(highlights,highlight)){highlight.unapply();this.highlights.splice(i--,1);}}},
removeAllHighlights:function(){this.removeHighlights(this.highlights);},getIntersectingHighlights:function(ranges){var intersectingHighlights=[],highlights=this.highlights;forEach(ranges,function(range){forEach(highlights,function(highlight){if(range.intersectsRange(highlight.getRange())&&!contains(intersectingHighlights,highlight)){intersectingHighlights.push(highlight);}});});return intersectingHighlights;},highlightCharacterRanges:function(className,charRanges,options){var i,len,j;var highlights=this.highlights;var converter=this.converter;var doc=this.doc;var highlightsToRemove=[];var classApplier=className?this.classAppliers[className]:null;options=createOptions(options,{containerElementId:null,exclusive:true});var containerElementId=options.containerElementId;var exclusive=options.exclusive;var containerElement,containerElementRange,containerElementCharRange;if(containerElementId){containerElement=this.doc.getElementById(containerElementId);if(containerElement){
containerElementRange=api.createRange(this.doc);containerElementRange.selectNodeContents(containerElement);containerElementCharRange=new CharacterRange(0,containerElementRange.toString().length);}}var charRange,highlightCharRange,removeHighlight,isSameClassApplier,highlightsToKeep,splitHighlight;for(i=0,len=charRanges.length;i<len;++i){charRange=charRanges[i];highlightsToKeep=[];if(containerElementCharRange){charRange=charRange.intersection(containerElementCharRange);}if(charRange.start==charRange.end){continue;}for(j=0;j<highlights.length;++j){removeHighlight=false;if(containerElementId==highlights[j].containerElementId){highlightCharRange=highlights[j].characterRange;isSameClassApplier=(classApplier==highlights[j].classApplier);splitHighlight=!isSameClassApplier&&exclusive;if((highlightCharRange.intersects(charRange)||highlightCharRange.isContiguousWith(charRange))&&(isSameClassApplier||splitHighlight)){if(splitHighlight){forEach(highlightCharRange.getComplements(charRange),function(rangeToAdd){
highlightsToKeep.push(new Highlight(doc,rangeToAdd,highlights[j].classApplier,converter,null,containerElementId));});}removeHighlight=true;if(isSameClassApplier){charRange=highlightCharRange.union(charRange);}}}if(removeHighlight){highlightsToRemove.push(highlights[j]);highlights[j]=new Highlight(doc,highlightCharRange.union(charRange),classApplier,converter,null,containerElementId);}else{highlightsToKeep.push(highlights[j]);}}if(classApplier){highlightsToKeep.push(new Highlight(doc,charRange,classApplier,converter,null,containerElementId));}this.highlights=highlights=highlightsToKeep;}forEach(highlightsToRemove,function(highlightToRemove){highlightToRemove.unapply();});var newHighlights=[];forEach(highlights,function(highlight){if(!highlight.applied){highlight.apply();newHighlights.push(highlight);}});return newHighlights;},highlightRanges:function(className,ranges,options){var selCharRanges=[];var converter=this.converter;options=createOptions(options,{containerElement:null,exclusive:true
});var containerElement=options.containerElement;var containerElementId=containerElement?containerElement.id:null;var containerElementRange;if(containerElement){containerElementRange=api.createRange(containerElement);containerElementRange.selectNodeContents(containerElement);}forEach(ranges,function(range){var scopedRange=containerElement?containerElementRange.intersection(range):range;selCharRanges.push(converter.rangeToCharacterRange(scopedRange,containerElement||getBody(range.getDocument())));});return this.highlightCharacterRanges(className,selCharRanges,{containerElementId:containerElementId,exclusive:options.exclusive});},highlightSelection:function(className,options){var converter=this.converter;var classApplier=className?this.classAppliers[className]:false;options=createOptions(options,{containerElementId:null,exclusive:true});var containerElementId=options.containerElementId;var exclusive=options.exclusive;var selection=options.selection||api.getSelection(this.doc);var doc=selection.win.document;
var containerElement=getContainerElement(doc,containerElementId);if(!classApplier&&className!==false){throw new Error("No class applier found for class '"+className+"'");}var serializedSelection=converter.serializeSelection(selection,containerElement);var selCharRanges=[];forEach(serializedSelection,function(rangeInfo){selCharRanges.push(CharacterRange.fromCharacterRange(rangeInfo.characterRange));});var newHighlights=this.highlightCharacterRanges(className,selCharRanges,{containerElementId:containerElementId,exclusive:exclusive});converter.restoreSelection(selection,serializedSelection,containerElement);return newHighlights;},unhighlightSelection:function(selection){selection=selection||api.getSelection(this.doc);var intersectingHighlights=this.getIntersectingHighlights(selection.getAllRanges());this.removeHighlights(intersectingHighlights);selection.removeAllRanges();return intersectingHighlights;},getHighlightsInSelection:function(selection){selection=selection||api.getSelection(this.doc);
return this.getIntersectingHighlights(selection.getAllRanges());},selectionOverlapsHighlight:function(selection){return this.getHighlightsInSelection(selection).length>0;},serialize:function(options){var highlighter=this;var highlights=highlighter.highlights;var serializedType,serializedHighlights,convertType,serializationConverter;highlights.sort(compareHighlights);options=createOptions(options,{serializeHighlightText:false,type:highlighter.converter.type});serializedType=options.type;convertType=(serializedType!=highlighter.converter.type);if(convertType){serializationConverter=getConverter(serializedType);}serializedHighlights=["type:"+serializedType];forEach(highlights,function(highlight){var characterRange=highlight.characterRange;var containerElement;if(convertType){containerElement=highlight.getContainerElement();characterRange=serializationConverter.rangeToCharacterRange(highlighter.converter.characterRangeToRange(highlighter.doc,characterRange,containerElement),
containerElement);}var parts=[characterRange.start,characterRange.end,highlight.id,highlight.classApplier.className,highlight.containerElementId];if(options.serializeHighlightText){parts.push(highlight.getText());}serializedHighlights.push(parts.join("$"));});return serializedHighlights.join("|");},deserialize:function(serialized){var serializedHighlights=serialized.split("|");var highlights=[];var firstHighlight=serializedHighlights[0];var regexResult;var serializationType,serializationConverter,convertType=false;if(firstHighlight&&(regexResult=/^type:(\w+)$/.exec(firstHighlight))){serializationType=regexResult[1];if(serializationType!=this.converter.type){serializationConverter=getConverter(serializationType);convertType=true;}serializedHighlights.shift();}else{throw new Error("Serialized highlights are invalid.");}var classApplier,highlight,characterRange,containerElementId,containerElement;for(var i=serializedHighlights.length,parts;i-->0;){parts=serializedHighlights[i].split("$");
characterRange=new CharacterRange(+parts[0],+parts[1]);containerElementId=parts[4]||null;if(convertType){containerElement=getContainerElement(this.doc,containerElementId);characterRange=this.converter.rangeToCharacterRange(serializationConverter.characterRangeToRange(this.doc,characterRange,containerElement),containerElement);}classApplier=this.classAppliers[parts[3]];if(!classApplier){throw new Error("No class applier found for class '"+parts[3]+"'");}highlight=new Highlight(this.doc,characterRange,classApplier,this.converter,parseInt(parts[2]),containerElementId);highlight.apply();highlights.push(highlight);}this.highlights=highlights;}};api.Highlighter=Highlighter;api.createHighlighter=function(doc,rangeCharacterOffsetConverterType){return new Highlighter(doc,rangeCharacterOffsetConverterType);};});return rangy;},this);;(function(factory,root){if(typeof define=="function"&&define.amd){define(["./rangy-core"],factory);}else if(typeof module!="undefined"&&typeof exports=="object"){
module.exports=factory(require("rangy"));}else{factory(root.rangy);}})(function(rangy){rangy.createModule("Serializer",["WrappedSelection"],function(api,module){var UNDEF="undefined";var util=api.util;if(typeof encodeURIComponent==UNDEF||typeof decodeURIComponent==UNDEF){module.fail("encodeURIComponent and/or decodeURIComponent method is missing");}var crc32=(function(){function utf8encode(str){var utf8CharCodes=[];for(var i=0,len=str.length,c;i<len;++i){c=str.charCodeAt(i);if(c<128){utf8CharCodes.push(c);}else if(c<2048){utf8CharCodes.push((c>>6)|192,(c&63)|128);}else{utf8CharCodes.push((c>>12)|224,((c>>6)&63)|128,(c&63)|128);}}return utf8CharCodes;}var cachedCrcTable=null;function buildCRCTable(){var table=[];for(var i=0,j,crc;i<256;++i){crc=i;j=8;while(j--){if((crc&1)==1){crc=(crc>>>1)^0xEDB88320;}else{crc>>>=1;}}table[i]=crc>>>0;}return table;}function getCrcTable(){if(!cachedCrcTable){cachedCrcTable=buildCRCTable();}return cachedCrcTable;}return function(str){var utf8CharCodes=utf8encode(str),crc=-1,crcTable=getCrcTable();
for(var i=0,len=utf8CharCodes.length,y;i<len;++i){y=(crc^utf8CharCodes[i])&0xFF;crc=(crc>>>8)^crcTable[y];}return(crc^-1)>>>0;};})();var dom=api.dom;function escapeTextForHtml(str){return str.replace(/</g,"&lt;").replace(/>/g,"&gt;");}function nodeToInfoString(node,infoParts){infoParts=infoParts||[];var nodeType=node.nodeType,children=node.childNodes,childCount=children.length;var nodeInfo=[nodeType,node.nodeName,childCount].join(":");var start="",end="";switch(nodeType){case 3:start=escapeTextForHtml(node.nodeValue);break;case 8:start="<!--"+escapeTextForHtml(node.nodeValue)+"-->";break;default:start="<"+nodeInfo+">";end="</>";break;}if(start){infoParts.push(start);}for(var i=0;i<childCount;++i){nodeToInfoString(children[i],infoParts);}if(end){infoParts.push(end);}return infoParts;}function getElementChecksum(el){var info=nodeToInfoString(el).join("");return crc32(info).toString(16);}function serializePosition(node,offset,rootNode){var pathParts=[],n=node;rootNode=rootNode||dom.getDocument(node).documentElement;
while(n&&n!=rootNode){pathParts.push(dom.getNodeIndex(n,true));n=n.parentNode;}return pathParts.join("/")+":"+offset;}function deserializePosition(serialized,rootNode,doc){if(!rootNode){rootNode=(doc||document).documentElement;}var parts=serialized.split(":");var node=rootNode;var nodeIndices=parts[0]?parts[0].split("/"):[],i=nodeIndices.length,nodeIndex;while(i--){nodeIndex=parseInt(nodeIndices[i],10);if(nodeIndex<node.childNodes.length){node=node.childNodes[nodeIndex];}else{throw module.createError("deserializePosition() failed: node "+dom.inspectNode(node)+" has no child with index "+nodeIndex+", "+i);}}return new dom.DomPosition(node,parseInt(parts[1],10));}function serializeRange(range,omitChecksum,rootNode){rootNode=rootNode||api.DomRange.getRangeDocument(range).documentElement;if(!dom.isOrIsAncestorOf(rootNode,range.commonAncestorContainer)){throw module.createError("serializeRange(): range "+range.inspect()+" is not wholly contained within specified root node "+dom.inspectNode(rootNode));
}var serialized=serializePosition(range.startContainer,range.startOffset,rootNode)+","+serializePosition(range.endContainer,range.endOffset,rootNode);if(!omitChecksum){serialized+="{"+getElementChecksum(rootNode)+"}";}return serialized;}var deserializeRegex=/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/;function deserializeRange(serialized,rootNode,doc){if(rootNode){doc=doc||dom.getDocument(rootNode);}else{doc=doc||document;rootNode=doc.documentElement;}var result=deserializeRegex.exec(serialized);var checksum=result[4];if(checksum){var rootNodeChecksum=getElementChecksum(rootNode);if(checksum!==rootNodeChecksum){throw module.createError("deserializeRange(): checksums of serialized range root node ("+checksum+") and target root node ("+rootNodeChecksum+") do not match");}}var start=deserializePosition(result[1],rootNode,doc),end=deserializePosition(result[2],rootNode,doc);var range=api.createRange(doc);range.setStartAndEnd(start.node,start.offset,end.node,end.offset);return range;}function canDeserializeRange(serialized,rootNode,doc){
if(!rootNode){rootNode=(doc||document).documentElement;}var result=deserializeRegex.exec(serialized);var checksum=result[3];return!checksum||checksum===getElementChecksum(rootNode);}function serializeSelection(selection,omitChecksum,rootNode){selection=api.getSelection(selection);var ranges=selection.getAllRanges(),serializedRanges=[];for(var i=0,len=ranges.length;i<len;++i){serializedRanges[i]=serializeRange(ranges[i],omitChecksum,rootNode);}return serializedRanges.join("|");}function deserializeSelection(serialized,rootNode,win){if(rootNode){win=win||dom.getWindow(rootNode);}else{win=win||window;rootNode=win.document.documentElement;}var serializedRanges=serialized.split("|");var sel=api.getSelection(win);var ranges=[];for(var i=0,len=serializedRanges.length;i<len;++i){ranges[i]=deserializeRange(serializedRanges[i],rootNode,win.document);}sel.setRanges(ranges);return sel;}function canDeserializeSelection(serialized,rootNode,win){var doc;if(rootNode){doc=win?win.document:dom.getDocument(rootNode);
}else{win=win||window;rootNode=win.document.documentElement;}var serializedRanges=serialized.split("|");for(var i=0,len=serializedRanges.length;i<len;++i){if(!canDeserializeRange(serializedRanges[i],rootNode,doc)){return false;}}return true;}var cookieName="rangySerializedSelection";function getSerializedSelectionFromCookie(cookie){var parts=cookie.split(/[;,]/);for(var i=0,len=parts.length,nameVal,val;i<len;++i){nameVal=parts[i].split("=");if(nameVal[0].replace(/^\s+/,"")==cookieName){val=nameVal[1];if(val){return decodeURIComponent(val.replace(/\s+$/,""));}}}return null;}function restoreSelectionFromCookie(win){win=win||window;var serialized=getSerializedSelectionFromCookie(win.document.cookie);if(serialized){deserializeSelection(serialized,win.doc);}}function saveSelectionCookie(win,props){win=win||window;props=(typeof props=="object")?props:{};var expires=props.expires?";expires="+props.expires.toUTCString():"";var path=props.path?";path="+props.path:"";var domain=props.domain?";domain="+props.domain:"";
var secure=props.secure?";secure":"";var serialized=serializeSelection(api.getSelection(win));win.document.cookie=encodeURIComponent(cookieName)+"="+encodeURIComponent(serialized)+expires+path+domain+secure;}util.extend(api,{serializePosition:serializePosition,deserializePosition:deserializePosition,serializeRange:serializeRange,deserializeRange:deserializeRange,canDeserializeRange:canDeserializeRange,serializeSelection:serializeSelection,deserializeSelection:deserializeSelection,canDeserializeSelection:canDeserializeSelection,restoreSelectionFromCookie:restoreSelectionFromCookie,saveSelectionCookie:saveSelectionCookie,getElementChecksum:getElementChecksum,nodeToInfoString:nodeToInfoString});util.crc32=crc32;});return rangy;},this);;(function(factory,root){if(typeof define=="function"&&define.amd){define(["./rangy-core"],factory);}else if(typeof module!="undefined"&&typeof exports=="object"){module.exports=factory(require("rangy"));}else{factory(root.rangy);}})(function(rangy){rangy.createModule("TextRange",["WrappedSelection"],function(api,module){
var UNDEF="undefined";var CHARACTER="character",WORD="word";var dom=api.dom,util=api.util;var extend=util.extend;var createOptions=util.createOptions;var getBody=dom.getBody;var spacesRegex=/^[ \t\f\r\n]+$/;var spacesMinusLineBreaksRegex=/^[ \t\f\r]+$/;var allWhiteSpaceRegex=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/;var nonLineBreakWhiteSpaceRegex=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/;var lineBreakRegex=/^[\n-\r\u0085\u2028\u2029]$/;var defaultLanguage="en";var isDirectionBackward=api.Selection.isDirectionBackward;var trailingSpaceInBlockCollapses=false;var trailingSpaceBeforeBrCollapses=false;var trailingSpaceBeforeBlockCollapses=false;var trailingSpaceBeforeLineBreakInPreLineCollapses=true;(function(){var el=dom.createTestElement(document,"<p>1 </p><p></p>",true);var p=el.firstChild;var sel=api.getSelection();sel.collapse(p.lastChild,2);sel.setStart(p.firstChild,0);trailingSpaceInBlockCollapses=(""+sel).length==1;el.innerHTML="1 <br />";
sel.collapse(el,2);sel.setStart(el.firstChild,0);trailingSpaceBeforeBrCollapses=(""+sel).length==1;el.innerHTML="1 <p>1</p>";sel.collapse(el,2);sel.setStart(el.firstChild,0);trailingSpaceBeforeBlockCollapses=(""+sel).length==1;dom.removeNode(el);sel.removeAllRanges();})();function defaultTokenizer(chars,wordOptions){var word=chars.join(""),result,tokenRanges=[];function createTokenRange(start,end,isWord){tokenRanges.push({start:start,end:end,isWord:isWord});}var lastWordEnd=0,wordStart,wordEnd;while((result=wordOptions.wordRegex.exec(word))){wordStart=result.index;wordEnd=wordStart+result[0].length;if(wordStart>lastWordEnd){createTokenRange(lastWordEnd,wordStart,false);}if(wordOptions.includeTrailingSpace){while(nonLineBreakWhiteSpaceRegex.test(chars[wordEnd])){++wordEnd;}}createTokenRange(wordStart,wordEnd,true);lastWordEnd=wordEnd;}if(lastWordEnd<chars.length){createTokenRange(lastWordEnd,chars.length,false);}return tokenRanges;}function convertCharRangeToToken(chars,tokenRange){var tokenChars=chars.slice(tokenRange.start,tokenRange.end);
var token={isWord:tokenRange.isWord,chars:tokenChars,toString:function(){return tokenChars.join("");}};for(var i=0,len=tokenChars.length;i<len;++i){tokenChars[i].token=token;}return token;}function tokenize(chars,wordOptions,tokenizer){var tokenRanges=tokenizer(chars,wordOptions);var tokens=[];for(var i=0,tokenRange;tokenRange=tokenRanges[i++];){tokens.push(convertCharRangeToToken(chars,tokenRange));}return tokens;}var defaultCharacterOptions={includeBlockContentTrailingSpace:true,includeSpaceBeforeBr:true,includeSpaceBeforeBlock:true,includePreLineTrailingSpace:true,ignoreCharacters:""};function normalizeIgnoredCharacters(ignoredCharacters){var ignoredChars=ignoredCharacters||"";var ignoredCharsArray=(typeof ignoredChars=="string")?ignoredChars.split(""):ignoredChars;ignoredCharsArray.sort(function(char1,char2){return char1.charCodeAt(0)-char2.charCodeAt(0);});return ignoredCharsArray.join("").replace(/(.)\1+/g,"$1");}var defaultCaretCharacterOptions={includeBlockContentTrailingSpace:!trailingSpaceBeforeLineBreakInPreLineCollapses,
includeSpaceBeforeBr:!trailingSpaceBeforeBrCollapses,includeSpaceBeforeBlock:!trailingSpaceBeforeBlockCollapses,includePreLineTrailingSpace:true};var defaultWordOptions={"en":{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:false,tokenizer:defaultTokenizer}};var defaultFindOptions={caseSensitive:false,withinRange:null,wholeWordsOnly:false,wrap:false,direction:"forward",wordOptions:null,characterOptions:null};var defaultMoveOptions={wordOptions:null,characterOptions:null};var defaultExpandOptions={wordOptions:null,characterOptions:null,trim:false,trimStart:true,trimEnd:true};var defaultWordIteratorOptions={wordOptions:null,characterOptions:null,direction:"forward"};function createWordOptions(options){var lang,defaults;if(!options){return defaultWordOptions[defaultLanguage];}else{lang=options.language||defaultLanguage;defaults={};extend(defaults,defaultWordOptions[lang]||defaultWordOptions[defaultLanguage]);extend(defaults,options);return defaults;}}function createNestedOptions(optionsParam,defaults){
var options=createOptions(optionsParam,defaults);if(defaults.hasOwnProperty("wordOptions")){options.wordOptions=createWordOptions(options.wordOptions);}if(defaults.hasOwnProperty("characterOptions")){options.characterOptions=createOptions(options.characterOptions,defaultCharacterOptions);}return options;}var getComputedStyleProperty=dom.getComputedStyleProperty;var tableCssDisplayBlock;(function(){var table=document.createElement("table");var body=getBody(document);body.appendChild(table);tableCssDisplayBlock=(getComputedStyleProperty(table,"display")=="block");body.removeChild(table);})();var defaultDisplayValueForTag={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function getComputedDisplay(el,win){var display=getComputedStyleProperty(el,"display",win);var tagName=el.tagName.toLowerCase();return(display=="block"&&
tableCssDisplayBlock&&defaultDisplayValueForTag.hasOwnProperty(tagName))?defaultDisplayValueForTag[tagName]:display;}function isHidden(node){var ancestors=getAncestorsAndSelf(node);for(var i=0,len=ancestors.length;i<len;++i){if(ancestors[i].nodeType==1&&getComputedDisplay(ancestors[i])=="none"){return true;}}return false;}function isVisibilityHiddenTextNode(textNode){var el;return textNode.nodeType==3&&(el=textNode.parentNode)&&getComputedStyleProperty(el,"visibility")=="hidden";}function isBlockNode(node){return node&&((node.nodeType==1&&!/^(inline(-block|-table)?|none)$/.test(getComputedDisplay(node)))||node.nodeType==9||node.nodeType==11);}function getLastDescendantOrSelf(node){var lastChild=node.lastChild;return lastChild?getLastDescendantOrSelf(lastChild):node;}function containsPositions(node){return dom.isCharacterDataNode(node)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(node.nodeName);}function getAncestors(node){var ancestors=[];while(node.parentNode){
ancestors.unshift(node.parentNode);node=node.parentNode;}return ancestors;}function getAncestorsAndSelf(node){return getAncestors(node).concat([node]);}function nextNodeDescendants(node){while(node&&!node.nextSibling){node=node.parentNode;}if(!node){return null;}return node.nextSibling;}function nextNode(node,excludeChildren){if(!excludeChildren&&node.hasChildNodes()){return node.firstChild;}return nextNodeDescendants(node);}function previousNode(node){var previous=node.previousSibling;if(previous){node=previous;while(node.hasChildNodes()){node=node.lastChild;}return node;}var parent=node.parentNode;if(parent&&parent.nodeType==1){return parent;}return null;}function isWhitespaceNode(node){if(!node||node.nodeType!=3){return false;}var text=node.data;if(text===""){return true;}var parent=node.parentNode;if(!parent||parent.nodeType!=1){return false;}var computedWhiteSpace=getComputedStyleProperty(node.parentNode,"whiteSpace");return(/^[\t\n\r ]+$/.test(text)&&/^(normal|nowrap)$/.test(computedWhiteSpace))||
(/^[\t\r ]+$/.test(text)&&computedWhiteSpace=="pre-line");}function isCollapsedWhitespaceNode(node){if(node.data===""){return true;}if(!isWhitespaceNode(node)){return false;}var ancestor=node.parentNode;if(!ancestor){return true;}if(isHidden(node)){return true;}return false;}function isCollapsedNode(node){var type=node.nodeType;return type==7||type==8||isHidden(node)||/^(script|style)$/i.test(node.nodeName)||isVisibilityHiddenTextNode(node)||isCollapsedWhitespaceNode(node);}function isIgnoredNode(node,win){var type=node.nodeType;return type==7||type==8||(type==1&&getComputedDisplay(node,win)=="none");}function Cache(){this.store={};}Cache.prototype={get:function(key){return this.store.hasOwnProperty(key)?this.store[key]:null;},set:function(key,value){return this.store[key]=value;}};var cachedCount=0,uncachedCount=0;function createCachingGetter(methodName,func,objProperty){return function(args){var cache=this.cache;if(cache.hasOwnProperty(methodName)){cachedCount++;return cache[methodName];
}else{uncachedCount++;var value=func.call(this,objProperty?this[objProperty]:this,args);cache[methodName]=value;return value;}};}function NodeWrapper(node,session){this.node=node;this.session=session;this.cache=new Cache();this.positions=new Cache();}var nodeProto={getPosition:function(offset){var positions=this.positions;return positions.get(offset)||positions.set(offset,new Position(this,offset));},toString:function(){return"[NodeWrapper("+dom.inspectNode(this.node)+")]";}};NodeWrapper.prototype=nodeProto;var EMPTY="EMPTY",NON_SPACE="NON_SPACE",UNCOLLAPSIBLE_SPACE="UNCOLLAPSIBLE_SPACE",COLLAPSIBLE_SPACE="COLLAPSIBLE_SPACE",TRAILING_SPACE_BEFORE_BLOCK="TRAILING_SPACE_BEFORE_BLOCK",TRAILING_SPACE_IN_BLOCK="TRAILING_SPACE_IN_BLOCK",TRAILING_SPACE_BEFORE_BR="TRAILING_SPACE_BEFORE_BR",PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",TRAILING_LINE_BREAK_AFTER_BR="TRAILING_LINE_BREAK_AFTER_BR",INCLUDED_TRAILING_LINE_BREAK_AFTER_BR="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";
extend(nodeProto,{isCharacterDataNode:createCachingGetter("isCharacterDataNode",dom.isCharacterDataNode,"node"),getNodeIndex:createCachingGetter("nodeIndex",dom.getNodeIndex,"node"),getLength:createCachingGetter("nodeLength",dom.getNodeLength,"node"),containsPositions:createCachingGetter("containsPositions",containsPositions,"node"),isWhitespace:createCachingGetter("isWhitespace",isWhitespaceNode,"node"),isCollapsedWhitespace:createCachingGetter("isCollapsedWhitespace",isCollapsedWhitespaceNode,"node"),getComputedDisplay:createCachingGetter("computedDisplay",getComputedDisplay,"node"),isCollapsed:createCachingGetter("collapsed",isCollapsedNode,"node"),isIgnored:createCachingGetter("ignored",isIgnoredNode,"node"),next:createCachingGetter("nextPos",nextNode,"node"),previous:createCachingGetter("previous",previousNode,"node"),getTextNodeInfo:createCachingGetter("textNodeInfo",function(textNode){var spaceRegex=null,collapseSpaces=false;var cssWhitespace=getComputedStyleProperty(textNode.parentNode,"whiteSpace");
var preLine=(cssWhitespace=="pre-line");if(preLine){spaceRegex=spacesMinusLineBreaksRegex;collapseSpaces=true;}else if(cssWhitespace=="normal"||cssWhitespace=="nowrap"){spaceRegex=spacesRegex;collapseSpaces=true;}return{node:textNode,text:textNode.data,spaceRegex:spaceRegex,collapseSpaces:collapseSpaces,preLine:preLine};},"node"),hasInnerText:createCachingGetter("hasInnerText",function(el,backward){var session=this.session;var posAfterEl=session.getPosition(el.parentNode,this.getNodeIndex()+1);var firstPosInEl=session.getPosition(el,0);var pos=backward?posAfterEl:firstPosInEl;var endPos=backward?firstPosInEl:posAfterEl;while(pos!==endPos){pos.prepopulateChar();if(pos.isDefinitelyNonEmpty()){return true;}pos=backward?pos.previousVisible():pos.nextVisible();}return false;},"node"),isRenderedBlock:createCachingGetter("isRenderedBlock",function(el){var brs=el.getElementsByTagName("br");for(var i=0,len=brs.length;i<len;++i){if(!isCollapsedNode(brs[i])){return true;}}return this.hasInnerText();
},"node"),getTrailingSpace:createCachingGetter("trailingSpace",function(el){if(el.tagName.toLowerCase()=="br"){return"";}else{switch(this.getComputedDisplay()){case"inline":var child=el.lastChild;while(child){if(!isIgnoredNode(child)){return(child.nodeType==1)?this.session.getNodeWrapper(child).getTrailingSpace():"";}child=child.previousSibling;}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(true)?"\n":"";}}return"";},"node"),getLeadingSpace:createCachingGetter("leadingSpace",function(el){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(false)?"\n":"";}return"";},"node")});function Position(nodeWrapper,offset){this.offset=offset;this.nodeWrapper=nodeWrapper;this.node=nodeWrapper.node;this.session=nodeWrapper.session;
this.cache=new Cache();}function inspectPosition(){return"[Position("+dom.inspectNode(this.node)+":"+this.offset+")]";}var positionProto={character:"",characterType:EMPTY,isBr:false,prepopulateChar:function(){var pos=this;if(!pos.prepopulatedChar){var node=pos.node,offset=pos.offset;var visibleChar="",charType=EMPTY;var finalizedChar=false;if(offset>0){if(node.nodeType==3){var text=node.data;var textChar=text.charAt(offset-1);var nodeInfo=pos.nodeWrapper.getTextNodeInfo();var spaceRegex=nodeInfo.spaceRegex;if(nodeInfo.collapseSpaces){if(spaceRegex.test(textChar)){if(offset>1&&spaceRegex.test(text.charAt(offset-2))){}else if(nodeInfo.preLine&&text.charAt(offset)==="\n"){visibleChar=" ";charType=PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK;}else{visibleChar=" ";charType=COLLAPSIBLE_SPACE;}}else{visibleChar=textChar;charType=NON_SPACE;finalizedChar=true;}}else{visibleChar=textChar;charType=UNCOLLAPSIBLE_SPACE;finalizedChar=true;}}else{var nodePassed=node.childNodes[offset-1];if(nodePassed&&nodePassed.nodeType==1&&!isCollapsedNode(nodePassed)){
if(nodePassed.tagName.toLowerCase()=="br"){visibleChar="\n";pos.isBr=true;charType=COLLAPSIBLE_SPACE;finalizedChar=false;}else{pos.checkForTrailingSpace=true;}}if(!visibleChar){var nextNode=node.childNodes[offset];if(nextNode&&nextNode.nodeType==1&&!isCollapsedNode(nextNode)){pos.checkForLeadingSpace=true;}}}}pos.prepopulatedChar=true;pos.character=visibleChar;pos.characterType=charType;pos.isCharInvariant=finalizedChar;}},isDefinitelyNonEmpty:function(){var charType=this.characterType;return charType==NON_SPACE||charType==UNCOLLAPSIBLE_SPACE;},resolveLeadingAndTrailingSpaces:function(){if(!this.prepopulatedChar){this.prepopulateChar();}if(this.checkForTrailingSpace){var trailingSpace=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();if(trailingSpace){this.isTrailingSpace=true;this.character=trailingSpace;this.characterType=COLLAPSIBLE_SPACE;}this.checkForTrailingSpace=false;}if(this.checkForLeadingSpace){var leadingSpace=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();
if(leadingSpace){this.isLeadingSpace=true;this.character=leadingSpace;this.characterType=COLLAPSIBLE_SPACE;}this.checkForLeadingSpace=false;}},getPrecedingUncollapsedPosition:function(characterOptions){var pos=this,character;while((pos=pos.previousVisible())){character=pos.getCharacter(characterOptions);if(character!==""){return pos;}}return null;},getCharacter:function(characterOptions){this.resolveLeadingAndTrailingSpaces();var thisChar=this.character,returnChar;var ignoredChars=normalizeIgnoredCharacters(characterOptions.ignoreCharacters);var isIgnoredCharacter=(thisChar!==""&&ignoredChars.indexOf(thisChar)>-1);if(this.isCharInvariant){returnChar=isIgnoredCharacter?"":thisChar;return returnChar;}var cacheKey=["character",characterOptions.includeSpaceBeforeBr,characterOptions.includeBlockContentTrailingSpace,characterOptions.includePreLineTrailingSpace,ignoredChars].join("_");var cachedChar=this.cache.get(cacheKey);if(cachedChar!==null){return cachedChar;}var character="";var collapsible=(this.characterType==COLLAPSIBLE_SPACE);
var nextPos,previousPos;var gotPreviousPos=false;var pos=this;function getPreviousPos(){if(!gotPreviousPos){previousPos=pos.getPrecedingUncollapsedPosition(characterOptions);gotPreviousPos=true;}return previousPos;}if(collapsible){if(this.type==INCLUDED_TRAILING_LINE_BREAK_AFTER_BR){character="\n";}else if(thisChar==" "&&(!getPreviousPos()||previousPos.isTrailingSpace||previousPos.character=="\n"||(previousPos.character==" "&&previousPos.characterType==COLLAPSIBLE_SPACE))){}else if(thisChar=="\n"&&this.isLeadingSpace){if(getPreviousPos()&&previousPos.character!="\n"){character="\n";}else{}}else{nextPos=this.nextUncollapsed();if(nextPos){if(nextPos.isBr){this.type=TRAILING_SPACE_BEFORE_BR;}else if(nextPos.isTrailingSpace&&nextPos.character=="\n"){this.type=TRAILING_SPACE_IN_BLOCK;}else if(nextPos.isLeadingSpace&&nextPos.character=="\n"){this.type=TRAILING_SPACE_BEFORE_BLOCK;}if(nextPos.character=="\n"){if(this.type==TRAILING_SPACE_BEFORE_BR&&!characterOptions.includeSpaceBeforeBr){}else if(this.type==TRAILING_SPACE_BEFORE_BLOCK&&!characterOptions.includeSpaceBeforeBlock){
}else if(this.type==TRAILING_SPACE_IN_BLOCK&&nextPos.isTrailingSpace&&!characterOptions.includeBlockContentTrailingSpace){}else if(this.type==PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK&&nextPos.type==NON_SPACE&&!characterOptions.includePreLineTrailingSpace){}else if(thisChar=="\n"){if(nextPos.isTrailingSpace){if(this.isTrailingSpace){}else if(this.isBr){nextPos.type=TRAILING_LINE_BREAK_AFTER_BR;if(getPreviousPos()&&previousPos.isLeadingSpace&&!previousPos.isTrailingSpace&&previousPos.character=="\n"){nextPos.character="";}else{nextPos.type=INCLUDED_TRAILING_LINE_BREAK_AFTER_BR;}}}else{character="\n";}}else if(thisChar==" "){character=" ";}else{}}else{character=thisChar;}}else{}}}if(ignoredChars.indexOf(character)>-1){character="";}this.cache.set(cacheKey,character);return character;},equals:function(pos){return!!pos&&this.node===pos.node&&this.offset===pos.offset;},inspect:inspectPosition,toString:function(){return this.character;}};Position.prototype=positionProto;extend(positionProto,{
next:createCachingGetter("nextPos",function(pos){var nodeWrapper=pos.nodeWrapper,node=pos.node,offset=pos.offset,session=nodeWrapper.session;if(!node){return null;}var nextNode,nextOffset,child;if(offset==nodeWrapper.getLength()){nextNode=node.parentNode;nextOffset=nextNode?nodeWrapper.getNodeIndex()+1:0;}else{if(nodeWrapper.isCharacterDataNode()){nextNode=node;nextOffset=offset+1;}else{child=node.childNodes[offset];if(session.getNodeWrapper(child).containsPositions()){nextNode=child;nextOffset=0;}else{nextNode=node;nextOffset=offset+1;}}}return nextNode?session.getPosition(nextNode,nextOffset):null;}),previous:createCachingGetter("previous",function(pos){var nodeWrapper=pos.nodeWrapper,node=pos.node,offset=pos.offset,session=nodeWrapper.session;var previousNode,previousOffset,child;if(offset==0){previousNode=node.parentNode;previousOffset=previousNode?nodeWrapper.getNodeIndex():0;}else{if(nodeWrapper.isCharacterDataNode()){previousNode=node;previousOffset=offset-1;}else{child=node.childNodes[offset-1];
if(session.getNodeWrapper(child).containsPositions()){previousNode=child;previousOffset=dom.getNodeLength(child);}else{previousNode=node;previousOffset=offset-1;}}}return previousNode?session.getPosition(previousNode,previousOffset):null;}),nextVisible:createCachingGetter("nextVisible",function(pos){var next=pos.next();if(!next){return null;}var nodeWrapper=next.nodeWrapper,node=next.node;var newPos=next;if(nodeWrapper.isCollapsed()){newPos=nodeWrapper.session.getPosition(node.parentNode,nodeWrapper.getNodeIndex()+1);}return newPos;}),nextUncollapsed:createCachingGetter("nextUncollapsed",function(pos){var nextPos=pos;while((nextPos=nextPos.nextVisible())){nextPos.resolveLeadingAndTrailingSpaces();if(nextPos.character!==""){return nextPos;}}return null;}),previousVisible:createCachingGetter("previousVisible",function(pos){var previous=pos.previous();if(!previous){return null;}var nodeWrapper=previous.nodeWrapper,node=previous.node;var newPos=previous;if(nodeWrapper.isCollapsed()){newPos=nodeWrapper.session.getPosition(node.parentNode,nodeWrapper.getNodeIndex());
}return newPos;})});var currentSession=null;var Session=(function(){function createWrapperCache(nodeProperty){var cache=new Cache();return{get:function(node){var wrappersByProperty=cache.get(node[nodeProperty]);if(wrappersByProperty){for(var i=0,wrapper;wrapper=wrappersByProperty[i++];){if(wrapper.node===node){return wrapper;}}}return null;},set:function(nodeWrapper){var property=nodeWrapper.node[nodeProperty];var wrappersByProperty=cache.get(property)||cache.set(property,[]);wrappersByProperty.push(nodeWrapper);}};}var uniqueIDSupported=util.isHostProperty(document.documentElement,"uniqueID");function Session(){this.initCaches();}Session.prototype={initCaches:function(){this.elementCache=uniqueIDSupported?(function(){var elementsCache=new Cache();return{get:function(el){return elementsCache.get(el.uniqueID);},set:function(elWrapper){elementsCache.set(elWrapper.node.uniqueID,elWrapper);}};})():createWrapperCache("tagName");this.textNodeCache=createWrapperCache("data");this.otherNodeCache=createWrapperCache("nodeName");
},getNodeWrapper:function(node){var wrapperCache;switch(node.nodeType){case 1:wrapperCache=this.elementCache;break;case 3:wrapperCache=this.textNodeCache;break;default:wrapperCache=this.otherNodeCache;break;}var wrapper=wrapperCache.get(node);if(!wrapper){wrapper=new NodeWrapper(node,this);wrapperCache.set(wrapper);}return wrapper;},getPosition:function(node,offset){return this.getNodeWrapper(node).getPosition(offset);},getRangeBoundaryPosition:function(range,isStart){var prefix=isStart?"start":"end";return this.getPosition(range[prefix+"Container"],range[prefix+"Offset"]);},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null;}};return Session;})();function startSession(){endSession();return(currentSession=new Session());}function getSession(){return currentSession||startSession();}function endSession(){if(currentSession){currentSession.detach();}currentSession=null;}extend(dom,{nextNode:nextNode,previousNode:previousNode});function createCharacterIterator(startPos,backward,endPos,characterOptions){
if(endPos){if(backward){if(isCollapsedNode(endPos.node)){endPos=startPos.previousVisible();}}else{if(isCollapsedNode(endPos.node)){endPos=endPos.nextVisible();}}}var pos=startPos,finished=false;function next(){var charPos=null;if(backward){charPos=pos;if(!finished){pos=pos.previousVisible();finished=!pos||(endPos&&pos.equals(endPos));}}else{if(!finished){charPos=pos=pos.nextVisible();finished=!pos||(endPos&&pos.equals(endPos));}}if(finished){pos=null;}return charPos;}var previousTextPos,returnPreviousTextPos=false;return{next:function(){if(returnPreviousTextPos){returnPreviousTextPos=false;return previousTextPos;}else{var pos,character;while((pos=next())){character=pos.getCharacter(characterOptions);if(character){previousTextPos=pos;return pos;}}return null;}},rewind:function(){if(previousTextPos){returnPreviousTextPos=true;}else{throw module.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");}},dispose:function(){startPos=endPos=null;}};}var arrayIndexOf=Array.prototype.indexOf?
function(arr,val){return arr.indexOf(val);}:function(arr,val){for(var i=0,len=arr.length;i<len;++i){if(arr[i]===val){return i;}}return-1;};function createTokenizedTextProvider(pos,characterOptions,wordOptions){var forwardIterator=createCharacterIterator(pos,false,null,characterOptions);var backwardIterator=createCharacterIterator(pos,true,null,characterOptions);var tokenizer=wordOptions.tokenizer;function consumeWord(forward){var pos,textChar;var newChars=[],it=forward?forwardIterator:backwardIterator;var passedWordBoundary=false,insideWord=false;while((pos=it.next())){textChar=pos.character;if(allWhiteSpaceRegex.test(textChar)){if(insideWord){insideWord=false;passedWordBoundary=true;}}else{if(passedWordBoundary){it.rewind();break;}else{insideWord=true;}}newChars.push(pos);}return newChars;}var forwardChars=consumeWord(true);var backwardChars=consumeWord(false).reverse();var tokens=tokenize(backwardChars.concat(forwardChars),wordOptions,tokenizer);var forwardTokensBuffer=forwardChars.length?
tokens.slice(arrayIndexOf(tokens,forwardChars[0].token)):[];var backwardTokensBuffer=backwardChars.length?tokens.slice(0,arrayIndexOf(tokens,backwardChars.pop().token)+1):[];function inspectBuffer(buffer){var textPositions=["["+buffer.length+"]"];for(var i=0;i<buffer.length;++i){textPositions.push("(word: "+buffer[i]+", is word: "+buffer[i].isWord+")");}return textPositions;}return{nextEndToken:function(){var lastToken,forwardChars;while(forwardTokensBuffer.length==1&&!(lastToken=forwardTokensBuffer[0]).isWord&&(forwardChars=consumeWord(true)).length>0){forwardTokensBuffer=tokenize(lastToken.chars.concat(forwardChars),wordOptions,tokenizer);}return forwardTokensBuffer.shift();},previousStartToken:function(){var lastToken,backwardChars;while(backwardTokensBuffer.length==1&&!(lastToken=backwardTokensBuffer[0]).isWord&&(backwardChars=consumeWord(false)).length>0){backwardTokensBuffer=tokenize(backwardChars.reverse().concat(lastToken.chars),wordOptions,tokenizer);}return backwardTokensBuffer.pop();
},dispose:function(){forwardIterator.dispose();backwardIterator.dispose();forwardTokensBuffer=backwardTokensBuffer=null;}};}function movePositionBy(pos,unit,count,characterOptions,wordOptions){var unitsMoved=0,currentPos,newPos=pos,charIterator,nextPos,absCount=Math.abs(count),token;if(count!==0){var backward=(count<0);switch(unit){case CHARACTER:charIterator=createCharacterIterator(pos,backward,null,characterOptions);while((currentPos=charIterator.next())&&unitsMoved<absCount){++unitsMoved;newPos=currentPos;}nextPos=currentPos;charIterator.dispose();break;case WORD:var tokenizedTextProvider=createTokenizedTextProvider(pos,characterOptions,wordOptions);var next=backward?tokenizedTextProvider.previousStartToken:tokenizedTextProvider.nextEndToken;while((token=next())&&unitsMoved<absCount){if(token.isWord){++unitsMoved;newPos=backward?token.chars[0]:token.chars[token.chars.length-1];}}break;default:throw new Error("movePositionBy: unit '"+unit+"' not implemented");}if(backward){newPos=newPos.previousVisible();
unitsMoved=-unitsMoved;}else if(newPos&&newPos.isLeadingSpace&&!newPos.isTrailingSpace){if(unit==WORD){charIterator=createCharacterIterator(pos,false,null,characterOptions);nextPos=charIterator.next();charIterator.dispose();}if(nextPos){newPos=nextPos.previousVisible();}}}return{position:newPos,unitsMoved:unitsMoved};}function createRangeCharacterIterator(session,range,characterOptions,backward){var rangeStart=session.getRangeBoundaryPosition(range,true);var rangeEnd=session.getRangeBoundaryPosition(range,false);var itStart=backward?rangeEnd:rangeStart;var itEnd=backward?rangeStart:rangeEnd;return createCharacterIterator(itStart,!!backward,itEnd,characterOptions);}function getRangeCharacters(session,range,characterOptions){var chars=[],it=createRangeCharacterIterator(session,range,characterOptions),pos;while((pos=it.next())){chars.push(pos);}it.dispose();return chars;}function isWholeWord(startPos,endPos,wordOptions){var range=api.createRange(startPos.node);range.setStartAndEnd(startPos.node,startPos.offset,endPos.node,endPos.offset);
return!range.expand("word",{wordOptions:wordOptions});}function findTextFromPosition(initialPos,searchTerm,isRegex,searchScopeRange,findOptions){var backward=isDirectionBackward(findOptions.direction);var it=createCharacterIterator(initialPos,backward,initialPos.session.getRangeBoundaryPosition(searchScopeRange,backward),findOptions.characterOptions);var text="",chars=[],pos,currentChar,matchStartIndex,matchEndIndex;var result,insideRegexMatch;var returnValue=null;function handleMatch(startIndex,endIndex){var startPos=chars[startIndex].previousVisible();var endPos=chars[endIndex-1];var valid=(!findOptions.wholeWordsOnly||isWholeWord(startPos,endPos,findOptions.wordOptions));return{startPos:startPos,endPos:endPos,valid:valid};}while((pos=it.next())){currentChar=pos.character;if(!isRegex&&!findOptions.caseSensitive){currentChar=currentChar.toLowerCase();}if(backward){chars.unshift(pos);text=currentChar+text;}else{chars.push(pos);text+=currentChar;}if(isRegex){result=searchTerm.exec(text);
if(result){matchStartIndex=result.index;matchEndIndex=matchStartIndex+result[0].length;if(insideRegexMatch){if((!backward&&matchEndIndex<text.length)||(backward&&matchStartIndex>0)){returnValue=handleMatch(matchStartIndex,matchEndIndex);break;}}else{insideRegexMatch=true;}}}else if((matchStartIndex=text.indexOf(searchTerm))!=-1){returnValue=handleMatch(matchStartIndex,matchStartIndex+searchTerm.length);break;}}if(insideRegexMatch){returnValue=handleMatch(matchStartIndex,matchEndIndex);}it.dispose();return returnValue;}function createEntryPointFunction(func){return function(){var sessionRunning=!!currentSession;var session=getSession();var args=[session].concat(util.toArray(arguments));var returnValue=func.apply(this,args);if(!sessionRunning){endSession();}return returnValue;};}function createRangeBoundaryMover(isStart,collapse){return createEntryPointFunction(function(session,unit,count,moveOptions){if(typeof count==UNDEF){count=unit;unit=CHARACTER;}moveOptions=createNestedOptions(moveOptions,defaultMoveOptions);
var boundaryIsStart=isStart;if(collapse){boundaryIsStart=(count>=0);this.collapse(!boundaryIsStart);}var moveResult=movePositionBy(session.getRangeBoundaryPosition(this,boundaryIsStart),unit,count,moveOptions.characterOptions,moveOptions.wordOptions);var newPos=moveResult.position;this[boundaryIsStart?"setStart":"setEnd"](newPos.node,newPos.offset);return moveResult.unitsMoved;});}function createRangeTrimmer(isStart){return createEntryPointFunction(function(session,characterOptions){characterOptions=createOptions(characterOptions,defaultCharacterOptions);var pos;var it=createRangeCharacterIterator(session,this,characterOptions,!isStart);var trimCharCount=0;while((pos=it.next())&&allWhiteSpaceRegex.test(pos.character)){++trimCharCount;}it.dispose();var trimmed=(trimCharCount>0);if(trimmed){this[isStart?"moveStart":"moveEnd"]("character",isStart?trimCharCount:-trimCharCount,{characterOptions:characterOptions});}return trimmed;});}extend(api.rangePrototype,{moveStart:createRangeBoundaryMover(true,false),
moveEnd:createRangeBoundaryMover(false,false),move:createRangeBoundaryMover(true,true),trimStart:createRangeTrimmer(true),trimEnd:createRangeTrimmer(false),trim:createEntryPointFunction(function(session,characterOptions){var startTrimmed=this.trimStart(characterOptions),endTrimmed=this.trimEnd(characterOptions);return startTrimmed||endTrimmed;}),expand:createEntryPointFunction(function(session,unit,expandOptions){var moved=false;expandOptions=createNestedOptions(expandOptions,defaultExpandOptions);var characterOptions=expandOptions.characterOptions;if(!unit){unit=CHARACTER;}if(unit==WORD){var wordOptions=expandOptions.wordOptions;var startPos=session.getRangeBoundaryPosition(this,true);var endPos=session.getRangeBoundaryPosition(this,false);var startTokenizedTextProvider=createTokenizedTextProvider(startPos,characterOptions,wordOptions);var startToken=startTokenizedTextProvider.nextEndToken();var newStartPos=startToken.chars[0].previousVisible();var endToken,newEndPos;if(this.collapsed){
endToken=startToken;}else{var endTokenizedTextProvider=createTokenizedTextProvider(endPos,characterOptions,wordOptions);endToken=endTokenizedTextProvider.previousStartToken();}newEndPos=endToken.chars[endToken.chars.length-1];if(!newStartPos.equals(startPos)){this.setStart(newStartPos.node,newStartPos.offset);moved=true;}if(newEndPos&&!newEndPos.equals(endPos)){this.setEnd(newEndPos.node,newEndPos.offset);moved=true;}if(expandOptions.trim){if(expandOptions.trimStart){moved=this.trimStart(characterOptions)||moved;}if(expandOptions.trimEnd){moved=this.trimEnd(characterOptions)||moved;}}return moved;}else{return this.moveEnd(CHARACTER,1,expandOptions);}}),text:createEntryPointFunction(function(session,characterOptions){return this.collapsed?"":getRangeCharacters(session,this,createOptions(characterOptions,defaultCharacterOptions)).join("");}),selectCharacters:createEntryPointFunction(function(session,containerNode,startIndex,endIndex,characterOptions){var moveOptions={characterOptions:characterOptions};
if(!containerNode){containerNode=getBody(this.getDocument());}this.selectNodeContents(containerNode);this.collapse(true);this.moveStart("character",startIndex,moveOptions);this.collapse(true);this.moveEnd("character",endIndex-startIndex,moveOptions);}),toCharacterRange:createEntryPointFunction(function(session,containerNode,characterOptions){if(!containerNode){containerNode=getBody(this.getDocument());}var parent=containerNode.parentNode,nodeIndex=dom.getNodeIndex(containerNode);var rangeStartsBeforeNode=(dom.comparePoints(this.startContainer,this.endContainer,parent,nodeIndex)==-1);var rangeBetween=this.cloneRange();var startIndex,endIndex;if(rangeStartsBeforeNode){rangeBetween.setStartAndEnd(this.startContainer,this.startOffset,parent,nodeIndex);startIndex=-rangeBetween.text(characterOptions).length;}else{rangeBetween.setStartAndEnd(parent,nodeIndex,this.startContainer,this.startOffset);startIndex=rangeBetween.text(characterOptions).length;}endIndex=startIndex+this.text(characterOptions).length;
return{start:startIndex,end:endIndex};}),findText:createEntryPointFunction(function(session,searchTermParam,findOptions){findOptions=createNestedOptions(findOptions,defaultFindOptions);if(findOptions.wholeWordsOnly){findOptions.wordOptions.includeTrailingSpace=false;}var backward=isDirectionBackward(findOptions.direction);var searchScopeRange=findOptions.withinRange;if(!searchScopeRange){searchScopeRange=api.createRange();searchScopeRange.selectNodeContents(this.getDocument());}var searchTerm=searchTermParam,isRegex=false;if(typeof searchTerm=="string"){if(!findOptions.caseSensitive){searchTerm=searchTerm.toLowerCase();}}else{isRegex=true;}var initialPos=session.getRangeBoundaryPosition(this,!backward);var comparison=searchScopeRange.comparePoint(initialPos.node,initialPos.offset);if(comparison===-1){initialPos=session.getRangeBoundaryPosition(searchScopeRange,true);}else if(comparison===1){initialPos=session.getRangeBoundaryPosition(searchScopeRange,false);}var pos=initialPos;var wrappedAround=false;
var findResult;while(true){findResult=findTextFromPosition(pos,searchTerm,isRegex,searchScopeRange,findOptions);if(findResult){if(findResult.valid){this.setStartAndEnd(findResult.startPos.node,findResult.startPos.offset,findResult.endPos.node,findResult.endPos.offset);return true;}else{pos=backward?findResult.startPos:findResult.endPos;}}else if(findOptions.wrap&&!wrappedAround){searchScopeRange=searchScopeRange.cloneRange();pos=session.getRangeBoundaryPosition(searchScopeRange,!backward);searchScopeRange.setBoundary(initialPos.node,initialPos.offset,backward);wrappedAround=true;}else{return false;}}}),pasteHtml:function(html){this.deleteContents();if(html){var frag=this.createContextualFragment(html);var lastChild=frag.lastChild;this.insertNode(frag);this.collapseAfter(lastChild);}}});function createSelectionTrimmer(methodName){return createEntryPointFunction(function(session,characterOptions){var trimmed=false;this.changeEachRange(function(range){trimmed=range[methodName](characterOptions)||trimmed;
});return trimmed;});}extend(api.selectionPrototype,{expand:createEntryPointFunction(function(session,unit,expandOptions){this.changeEachRange(function(range){range.expand(unit,expandOptions);});}),move:createEntryPointFunction(function(session,unit,count,options){var unitsMoved=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var range=this.getRangeAt(0);if(!options){options={};}options.characterOptions=createOptions(options.characterOptions,defaultCaretCharacterOptions);unitsMoved=range.move(unit,count,options);this.setSingleRange(range);}return unitsMoved;}),trimStart:createSelectionTrimmer("trimStart"),trimEnd:createSelectionTrimmer("trimEnd"),trim:createSelectionTrimmer("trim"),selectCharacters:createEntryPointFunction(function(session,containerNode,startIndex,endIndex,direction,characterOptions){var range=api.createRange(containerNode);range.selectCharacters(containerNode,startIndex,endIndex,characterOptions);this.setSingleRange(range,direction);}),
saveCharacterRanges:createEntryPointFunction(function(session,containerNode,characterOptions){var ranges=this.getAllRanges(),rangeCount=ranges.length;var rangeInfos=[];var backward=rangeCount==1&&this.isBackward();for(var i=0,len=ranges.length;i<len;++i){rangeInfos[i]={characterRange:ranges[i].toCharacterRange(containerNode,characterOptions),backward:backward,characterOptions:characterOptions};}return rangeInfos;}),restoreCharacterRanges:createEntryPointFunction(function(session,containerNode,saved){this.removeAllRanges();for(var i=0,len=saved.length,range,rangeInfo,characterRange;i<len;++i){rangeInfo=saved[i];characterRange=rangeInfo.characterRange;range=api.createRange(containerNode);range.selectCharacters(containerNode,characterRange.start,characterRange.end,rangeInfo.characterOptions);this.addRange(range,rangeInfo.backward);}}),text:createEntryPointFunction(function(session,characterOptions){var rangeTexts=[];for(var i=0,len=this.rangeCount;i<len;++i){rangeTexts[i]=this.getRangeAt(i).text(characterOptions);
}return rangeTexts.join("");})});api.innerText=function(el,characterOptions){var range=api.createRange(el);range.selectNodeContents(el);var text=range.text(characterOptions);return text;};api.createWordIterator=function(startNode,startOffset,iteratorOptions){var session=getSession();iteratorOptions=createNestedOptions(iteratorOptions,defaultWordIteratorOptions);var startPos=session.getPosition(startNode,startOffset);var tokenizedTextProvider=createTokenizedTextProvider(startPos,iteratorOptions.characterOptions,iteratorOptions.wordOptions);var backward=isDirectionBackward(iteratorOptions.direction);return{next:function(){return backward?tokenizedTextProvider.previousStartToken():tokenizedTextProvider.nextEndToken();},dispose:function(){tokenizedTextProvider.dispose();this.next=function(){};}};};api.noMutation=function(func){var session=getSession();func(session);endSession();};api.noMutation.createEntryPointFunction=createEntryPointFunction;api.textRange={isBlockNode:isBlockNode,
isCollapsedWhitespaceNode:isCollapsedWhitespaceNode,createPosition:createEntryPointFunction(function(session,node,offset){return session.getPosition(node,offset);})};});return rangy;},this);;(function(factory,root){if(typeof define=="function"&&define.amd){define(["./rangy-core"],factory);}else if(typeof module!="undefined"&&typeof exports=="object"){module.exports=factory(require("rangy"));}else{factory(root.rangy);}})(function(rangy){rangy.createModule("SaveRestore",["WrappedSelection"],function(api,module){var dom=api.dom;var removeNode=dom.removeNode;var isDirectionBackward=api.Selection.isDirectionBackward;var markerTextChar="\ufeff";function gEBI(id,doc){return(doc||document).getElementById(id);}function insertRangeBoundaryMarker(range,atStart){var markerId="selectionBoundary_"+(+new Date())+"_"+(""+Math.random()).slice(2);var markerEl;var doc=dom.getDocument(range.startContainer);var boundaryRange=range.cloneRange();boundaryRange.collapse(atStart);markerEl=doc.createElement("span");
markerEl.id=markerId;markerEl.style.lineHeight="0";markerEl.style.display="none";markerEl.className="rangySelectionBoundary";markerEl.appendChild(doc.createTextNode(markerTextChar));boundaryRange.insertNode(markerEl);return markerEl;}function setRangeBoundary(doc,range,markerId,atStart){var markerEl=gEBI(markerId,doc);if(markerEl){range[atStart?"setStartBefore":"setEndBefore"](markerEl);removeNode(markerEl);}else{module.warn("Marker element has been removed. Cannot restore selection.");}}function compareRanges(r1,r2){return r2.compareBoundaryPoints(r1.START_TO_START,r1);}function saveRange(range,direction){var startEl,endEl,doc=api.DomRange.getRangeDocument(range),text=range.toString();var backward=isDirectionBackward(direction);if(range.collapsed){endEl=insertRangeBoundaryMarker(range,false);return{document:doc,markerId:endEl.id,collapsed:true};}else{endEl=insertRangeBoundaryMarker(range,false);startEl=insertRangeBoundaryMarker(range,true);return{document:doc,startMarkerId:startEl.id,
endMarkerId:endEl.id,collapsed:false,backward:backward,toString:function(){return"original text: '"+text+"', new text: '"+range.toString()+"'";}};}}function restoreRange(rangeInfo,normalize){var doc=rangeInfo.document;if(typeof normalize=="undefined"){normalize=true;}var range=api.createRange(doc);if(rangeInfo.collapsed){var markerEl=gEBI(rangeInfo.markerId,doc);if(markerEl){markerEl.style.display="inline";var previousNode=markerEl.previousSibling;if(previousNode&&previousNode.nodeType==3){removeNode(markerEl);range.collapseToPoint(previousNode,previousNode.length);}else{range.collapseBefore(markerEl);removeNode(markerEl);}}else{module.warn("Marker element has been removed. Cannot restore selection.");}}else{setRangeBoundary(doc,range,rangeInfo.startMarkerId,true);setRangeBoundary(doc,range,rangeInfo.endMarkerId,false);}if(normalize){range.normalizeBoundaries();}return range;}function saveRanges(ranges,direction){var rangeInfos=[],range,doc;var backward=isDirectionBackward(direction);
ranges=ranges.slice(0);ranges.sort(compareRanges);for(var i=0,len=ranges.length;i<len;++i){rangeInfos[i]=saveRange(ranges[i],backward);}for(i=len-1;i>=0;--i){range=ranges[i];doc=api.DomRange.getRangeDocument(range);if(range.collapsed){range.collapseAfter(gEBI(rangeInfos[i].markerId,doc));}else{range.setEndBefore(gEBI(rangeInfos[i].endMarkerId,doc));range.setStartAfter(gEBI(rangeInfos[i].startMarkerId,doc));}}return rangeInfos;}function saveSelection(win){if(!api.isSelectionValid(win)){module.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");return null;}var sel=api.getSelection(win);var ranges=sel.getAllRanges();var backward=(ranges.length==1&&sel.isBackward());var rangeInfos=saveRanges(ranges,backward);if(backward){sel.setSingleRange(ranges[0],backward);}else{sel.setRanges(ranges);}return{win:win,rangeInfos:rangeInfos,restored:false};}function restoreRanges(rangeInfos){var ranges=[];var rangeCount=rangeInfos.length;
for(var i=rangeCount-1;i>=0;i--){ranges[i]=restoreRange(rangeInfos[i],true);}return ranges;}function restoreSelection(savedSelection,preserveDirection){if(!savedSelection.restored){var rangeInfos=savedSelection.rangeInfos;var sel=api.getSelection(savedSelection.win);var ranges=restoreRanges(rangeInfos),rangeCount=rangeInfos.length;if(rangeCount==1&&preserveDirection&&api.features.selectionHasExtend&&rangeInfos[0].backward){sel.removeAllRanges();sel.addRange(ranges[0],true);}else{sel.setRanges(ranges);}savedSelection.restored=true;}}function removeMarkerElement(doc,markerId){var markerEl=gEBI(markerId,doc);if(markerEl){removeNode(markerEl);}}function removeMarkers(savedSelection){var rangeInfos=savedSelection.rangeInfos;for(var i=0,len=rangeInfos.length,rangeInfo;i<len;++i){rangeInfo=rangeInfos[i];if(rangeInfo.collapsed){removeMarkerElement(savedSelection.doc,rangeInfo.markerId);}else{removeMarkerElement(savedSelection.doc,rangeInfo.startMarkerId);removeMarkerElement(savedSelection.doc,rangeInfo.endMarkerId);
}}}api.util.extend(api,{saveRange:saveRange,restoreRange:restoreRange,saveRanges:saveRanges,restoreRanges:restoreRanges,saveSelection:saveSelection,restoreSelection:restoreSelection,removeMarkerElement:removeMarkerElement,removeMarkers:removeMarkers});});return rangy;},this);;(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,global.html2canvas=factory());}(this,(function(){'use strict';var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return extendStatics(d,b);};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d;}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}return t;};return __assign.apply(this,arguments);};function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;
function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||(op[1]>t[0]&&op[1]<t[3]))){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}}function __spreadArray(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){
if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i];}}return to.concat(ar||from);}var Bounds=(function(){function Bounds(left,top,width,height){this.left=left;this.top=top;this.width=width;this.height=height;}Bounds.prototype.add=function(x,y,w,h){return new Bounds(this.left+x,this.top+y,this.width+w,this.height+h);};Bounds.fromClientRect=function(context,clientRect){return new Bounds(clientRect.left+context.windowBounds.left,clientRect.top+context.windowBounds.top,clientRect.width,clientRect.height);};Bounds.fromDOMRectList=function(context,domRectList){var domRect=Array.from(domRectList).find(function(rect){return rect.width!==0;});return domRect?new Bounds(domRect.left+context.windowBounds.left,domRect.top+context.windowBounds.top,domRect.width,domRect.height):Bounds.EMPTY;};Bounds.EMPTY=new Bounds(0,0,0,0);return Bounds;}());var parseBounds=function(context,node){return Bounds.fromClientRect(context,node.getBoundingClientRect());};var parseDocumentSize=function(document){
var body=document.body;var documentElement=document.documentElement;if(!body||!documentElement){throw new Error("Unable to get document size");}var width=Math.max(Math.max(body.scrollWidth,documentElement.scrollWidth),Math.max(body.offsetWidth,documentElement.offsetWidth),Math.max(body.clientWidth,documentElement.clientWidth));var height=Math.max(Math.max(body.scrollHeight,documentElement.scrollHeight),Math.max(body.offsetHeight,documentElement.offsetHeight),Math.max(body.clientHeight,documentElement.clientHeight));return new Bounds(0,0,width,height);};var toCodePoints$1=function(str){var codePoints=[];var i=0;var length=str.length;while(i<length){var value=str.charCodeAt(i++);if(value>=0xd800&&value<=0xdbff&&i<length){var extra=str.charCodeAt(i++);if((extra&0xfc00)===0xdc00){codePoints.push(((value&0x3ff)<<10)+(extra&0x3ff)+0x10000);}else{codePoints.push(value);i--;}}else{codePoints.push(value);}}return codePoints;};var fromCodePoint$1=function(){var codePoints=[];for(var _i=0;_i<arguments.length;_i++){
codePoints[_i]=arguments[_i];}if(String.fromCodePoint){return String.fromCodePoint.apply(String,codePoints);}var length=codePoints.length;if(!length){return'';}var codeUnits=[];var index=-1;var result='';while(++index<length){var codePoint=codePoints[index];if(codePoint<=0xffff){codeUnits.push(codePoint);}else{codePoint-=0x10000;codeUnits.push((codePoint>>10)+0xd800,(codePoint%0x400)+0xdc00);}if(index+1===length||codeUnits.length>0x4000){result+=String.fromCharCode.apply(String,codeUnits);codeUnits.length=0;}}return result;};var chars$2='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';var lookup$2=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++){lookup$2[chars$2.charCodeAt(i$2)]=i$2;}var chars$1$1='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';var lookup$1$1=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++){lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;
}var decode$1=function(base64){var bufferLength=base64.length*0.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==='='){bufferLength--;if(base64[base64.length-2]==='='){bufferLength--;}}var buffer=typeof ArrayBuffer!=='undefined'&&typeof Uint8Array!=='undefined'&&typeof Uint8Array.prototype.slice!=='undefined'?new ArrayBuffer(bufferLength):new Array(bufferLength);var bytes=Array.isArray(buffer)?buffer:new Uint8Array(buffer);for(i=0;i<len;i+=4){encoded1=lookup$1$1[base64.charCodeAt(i)];encoded2=lookup$1$1[base64.charCodeAt(i+1)];encoded3=lookup$1$1[base64.charCodeAt(i+2)];encoded4=lookup$1$1[base64.charCodeAt(i+3)];bytes[p++]=(encoded1<<2)|(encoded2>>4);bytes[p++]=((encoded2&15)<<4)|(encoded3>>2);bytes[p++]=((encoded3&3)<<6)|(encoded4&63);}return buffer;};var polyUint16Array$1=function(buffer){var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=2){bytes.push((buffer[i+1]<<8)|buffer[i]);}return bytes;};var polyUint32Array$1=function(buffer){
var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=4){bytes.push((buffer[i+3]<<24)|(buffer[i+2]<<16)|(buffer[i+1]<<8)|buffer[i]);}return bytes;};var UTRIE2_SHIFT_2$1=5;var UTRIE2_SHIFT_1$1=6+5;var UTRIE2_INDEX_SHIFT$1=2;var UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1;var UTRIE2_LSCP_INDEX_2_OFFSET$1=0x10000>>UTRIE2_SHIFT_2$1;var UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1;var UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1;var UTRIE2_LSCP_INDEX_2_LENGTH$1=0x400>>UTRIE2_SHIFT_2$1;var UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1;var UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1;var UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=0x800>>6;var UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1;var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=0x10000>>UTRIE2_SHIFT_1$1;var UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1;var UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1;var slice16$1=function(view,start,end){
if(view.slice){return view.slice(start,end);}return new Uint16Array(Array.prototype.slice.call(view,start,end));};var slice32$1=function(view,start,end){if(view.slice){return view.slice(start,end);}return new Uint32Array(Array.prototype.slice.call(view,start,end));};var createTrieFromBase64$1=function(base64,_byteLength){var buffer=decode$1(base64);var view32=Array.isArray(buffer)?polyUint32Array$1(buffer):new Uint32Array(buffer);var view16=Array.isArray(buffer)?polyUint16Array$1(buffer):new Uint16Array(buffer);var headerLength=24;var index=slice16$1(view16,headerLength/2,view32[4]/2);var data=view32[5]===2?slice16$1(view16,(headerLength+view32[4])/2):slice32$1(view32,Math.ceil((headerLength+view32[4])/4));return new Trie$1(view32[0],view32[1],view32[2],view32[3],index,data);};var Trie$1=(function(){function Trie(initialValue,errorValue,highStart,highValueIndex,index,data){this.initialValue=initialValue;this.errorValue=errorValue;this.highStart=highStart;this.highValueIndex=highValueIndex;
this.index=index;this.data=data;}Trie.prototype.get=function(codePoint){var ix;if(codePoint>=0){if(codePoint<0x0d800||(codePoint>0x0dbff&&codePoint<=0x0ffff)){ix=this.index[codePoint>>UTRIE2_SHIFT_2$1];ix=(ix<<UTRIE2_INDEX_SHIFT$1)+(codePoint&UTRIE2_DATA_MASK$1);return this.data[ix];}if(codePoint<=0xffff){ix=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+((codePoint-0xd800)>>UTRIE2_SHIFT_2$1)];ix=(ix<<UTRIE2_INDEX_SHIFT$1)+(codePoint&UTRIE2_DATA_MASK$1);return this.data[ix];}if(codePoint<this.highStart){ix=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(codePoint>>UTRIE2_SHIFT_1$1);ix=this.index[ix];ix+=(codePoint>>UTRIE2_SHIFT_2$1)&UTRIE2_INDEX_2_MASK$1;ix=this.index[ix];ix=(ix<<UTRIE2_INDEX_SHIFT$1)+(codePoint&UTRIE2_DATA_MASK$1);return this.data[ix];}if(codePoint<=0x10ffff){return this.data[this.highValueIndex];}}return this.errorValue;};return Trie;}());var chars$3='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';var lookup$3=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);
for(var i$3=0;i$3<chars$3.length;i$3++){lookup$3[chars$3.charCodeAt(i$3)]=i$3;}var base64$1='KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==';
var LETTER_NUMBER_MODIFIER=50;var BK=1;var CR$1=2;var LF$1=3;var CM=4;var NL=5;var WJ=7;var ZW=8;var GL=9;var SP=10;var ZWJ$1=11;var B2=12;var BA=13;var BB=14;var HY=15;var CB=16;var CL=17;var CP=18;var EX=19;var IN=20;var NS=21;var OP=22;var QU=23;var IS=24;var NU=25;var PO=26;var PR=27;var SY=28;var AI=29;var AL=30;var CJ=31;var EB=32;var EM=33;var H2=34;var H3=35;var HL=36;var ID=37;var JL=38;var JV=39;var JT=40;var RI$1=41;var SA=42;var XX=43;var ea_OP=[0x2329,0xff08];var BREAK_MANDATORY='!';var BREAK_NOT_ALLOWED$1='';var BREAK_ALLOWED$1='';var UnicodeTrie$1=createTrieFromBase64$1(base64$1);var ALPHABETICS=[AL,HL];var HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL];var SPACE$1=[SP,ZW];var PREFIX_POSTFIX=[PR,PO];var LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1);var KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3];var HYPHEN=[HY,BA];var codePointsToCharacterClasses=function(codePoints,lineBreak){if(lineBreak===void 0){lineBreak='strict';}var types=[];var indices=[];var categories=[];codePoints.forEach(function(codePoint,index){
var classType=UnicodeTrie$1.get(codePoint);if(classType>LETTER_NUMBER_MODIFIER){categories.push(true);classType-=LETTER_NUMBER_MODIFIER;}else{categories.push(false);}if(['normal','auto','loose'].indexOf(lineBreak)!==-1){if([0x2010,0x2013,0x301c,0x30a0].indexOf(codePoint)!==-1){indices.push(index);return types.push(CB);}}if(classType===CM||classType===ZWJ$1){if(index===0){indices.push(index);return types.push(AL);}var prev=types[index-1];if(LINE_BREAKS.indexOf(prev)===-1){indices.push(indices[index-1]);return types.push(prev);}indices.push(index);return types.push(AL);}indices.push(index);if(classType===CJ){return types.push(lineBreak==='strict'?NS:ID);}if(classType===SA){return types.push(AL);}if(classType===AI){return types.push(AL);}if(classType===XX){if((codePoint>=0x20000&&codePoint<=0x2fffd)||(codePoint>=0x30000&&codePoint<=0x3fffd)){return types.push(ID);}else{return types.push(AL);}}types.push(classType);});return[indices,types,categories];};var isAdjacentWithSpaceIgnored=function(a,b,currentIndex,classTypes){
var current=classTypes[currentIndex];if(Array.isArray(a)?a.indexOf(current)!==-1:a===current){var i=currentIndex;while(i<=classTypes.length){i++;var next=classTypes[i];if(next===b){return true;}if(next!==SP){break;}}}if(current===SP){var i=currentIndex;while(i>0){i--;var prev=classTypes[i];if(Array.isArray(a)?a.indexOf(prev)!==-1:a===prev){var n=currentIndex;while(n<=classTypes.length){n++;var next=classTypes[n];if(next===b){return true;}if(next!==SP){break;}}}if(prev!==SP){break;}}}return false;};var previousNonSpaceClassType=function(currentIndex,classTypes){var i=currentIndex;while(i>=0){var type=classTypes[i];if(type===SP){i--;}else{return type;}}return 0;};var _lineBreakAtIndex=function(codePoints,classTypes,indicies,index,forbiddenBreaks){if(indicies[index]===0){return BREAK_NOT_ALLOWED$1;}var currentIndex=index-1;if(Array.isArray(forbiddenBreaks)&&forbiddenBreaks[currentIndex]===true){return BREAK_NOT_ALLOWED$1;}var beforeIndex=currentIndex-1;var afterIndex=currentIndex+1;var current=classTypes[currentIndex];
var before=beforeIndex>=0?classTypes[beforeIndex]:0;var next=classTypes[afterIndex];if(current===CR$1&&next===LF$1){return BREAK_NOT_ALLOWED$1;}if(HARD_LINE_BREAKS.indexOf(current)!==-1){return BREAK_MANDATORY;}if(HARD_LINE_BREAKS.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}if(SPACE$1.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}if(previousNonSpaceClassType(currentIndex,classTypes)===ZW){return BREAK_ALLOWED$1;}if(UnicodeTrie$1.get(codePoints[currentIndex])===ZWJ$1){return BREAK_NOT_ALLOWED$1;}if((current===EB||current===EM)&&UnicodeTrie$1.get(codePoints[afterIndex])===ZWJ$1){return BREAK_NOT_ALLOWED$1;}if(current===WJ||next===WJ){return BREAK_NOT_ALLOWED$1;}if(current===GL){return BREAK_NOT_ALLOWED$1;}if([SP,BA,HY].indexOf(current)===-1&&next===GL){return BREAK_NOT_ALLOWED$1;}if([CL,CP,EX,IS,SY].indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}if(previousNonSpaceClassType(currentIndex,classTypes)===OP){return BREAK_NOT_ALLOWED$1;}if(isAdjacentWithSpaceIgnored(QU,OP,currentIndex,classTypes)){
return BREAK_NOT_ALLOWED$1;}if(isAdjacentWithSpaceIgnored([CL,CP],NS,currentIndex,classTypes)){return BREAK_NOT_ALLOWED$1;}if(isAdjacentWithSpaceIgnored(B2,B2,currentIndex,classTypes)){return BREAK_NOT_ALLOWED$1;}if(current===SP){return BREAK_ALLOWED$1;}if(current===QU||next===QU){return BREAK_NOT_ALLOWED$1;}if(next===CB||current===CB){return BREAK_ALLOWED$1;}if([BA,HY,NS].indexOf(next)!==-1||current===BB){return BREAK_NOT_ALLOWED$1;}if(before===HL&&HYPHEN.indexOf(current)!==-1){return BREAK_NOT_ALLOWED$1;}if(current===SY&&next===HL){return BREAK_NOT_ALLOWED$1;}if(next===IN){return BREAK_NOT_ALLOWED$1;}if((ALPHABETICS.indexOf(next)!==-1&&current===NU)||(ALPHABETICS.indexOf(current)!==-1&&next===NU)){return BREAK_NOT_ALLOWED$1;}if((current===PR&&[ID,EB,EM].indexOf(next)!==-1)||([ID,EB,EM].indexOf(current)!==-1&&next===PO)){return BREAK_NOT_ALLOWED$1;}if((ALPHABETICS.indexOf(current)!==-1&&PREFIX_POSTFIX.indexOf(next)!==-1)||(PREFIX_POSTFIX.indexOf(current)!==-1&&ALPHABETICS.indexOf(next)!==-1)){
return BREAK_NOT_ALLOWED$1;}if(([PR,PO].indexOf(current)!==-1&&(next===NU||([OP,HY].indexOf(next)!==-1&&classTypes[afterIndex+1]===NU)))||([OP,HY].indexOf(current)!==-1&&next===NU)||(current===NU&&[NU,SY,IS].indexOf(next)!==-1)){return BREAK_NOT_ALLOWED$1;}if([NU,SY,IS,CL,CP].indexOf(next)!==-1){var prevIndex=currentIndex;while(prevIndex>=0){var type=classTypes[prevIndex];if(type===NU){return BREAK_NOT_ALLOWED$1;}else if([SY,IS].indexOf(type)!==-1){prevIndex--;}else{break;}}}if([PR,PO].indexOf(next)!==-1){var prevIndex=[CL,CP].indexOf(current)!==-1?beforeIndex:currentIndex;while(prevIndex>=0){var type=classTypes[prevIndex];if(type===NU){return BREAK_NOT_ALLOWED$1;}else if([SY,IS].indexOf(type)!==-1){prevIndex--;}else{break;}}}if((JL===current&&[JL,JV,H2,H3].indexOf(next)!==-1)||([JV,H2].indexOf(current)!==-1&&[JV,JT].indexOf(next)!==-1)||([JT,H3].indexOf(current)!==-1&&next===JT)){return BREAK_NOT_ALLOWED$1;}if((KOREAN_SYLLABLE_BLOCK.indexOf(current)!==-1&&[IN,PO].indexOf(next)!==-1)||
(KOREAN_SYLLABLE_BLOCK.indexOf(next)!==-1&&current===PR)){return BREAK_NOT_ALLOWED$1;}if(ALPHABETICS.indexOf(current)!==-1&&ALPHABETICS.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}if(current===IS&&ALPHABETICS.indexOf(next)!==-1){return BREAK_NOT_ALLOWED$1;}if((ALPHABETICS.concat(NU).indexOf(current)!==-1&&next===OP&&ea_OP.indexOf(codePoints[afterIndex])===-1)||(ALPHABETICS.concat(NU).indexOf(next)!==-1&&current===CP)){return BREAK_NOT_ALLOWED$1;}if(current===RI$1&&next===RI$1){var i=indicies[currentIndex];var count=1;while(i>0){i--;if(classTypes[i]===RI$1){count++;}else{break;}}if(count%2!==0){return BREAK_NOT_ALLOWED$1;}}if(current===EB&&next===EM){return BREAK_NOT_ALLOWED$1;}return BREAK_ALLOWED$1;};var cssFormattedClasses=function(codePoints,options){if(!options){options={lineBreak:'normal',wordBreak:'normal'};}var _a=codePointsToCharacterClasses(codePoints,options.lineBreak),indicies=_a[0],classTypes=_a[1],isLetterNumber=_a[2];if(options.wordBreak==='break-all'||options.wordBreak==='break-word'){
classTypes=classTypes.map(function(type){return([NU,AL,SA].indexOf(type)!==-1?ID:type);});}var forbiddenBreakpoints=options.wordBreak==='keep-all'?isLetterNumber.map(function(letterNumber,i){return letterNumber&&codePoints[i]>=0x4e00&&codePoints[i]<=0x9fff;}):undefined;return[indicies,classTypes,forbiddenBreakpoints];};var Break=(function(){function Break(codePoints,lineBreak,start,end){this.codePoints=codePoints;this.required=lineBreak===BREAK_MANDATORY;this.start=start;this.end=end;}Break.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end));};return Break;}());var LineBreaker=function(str,options){var codePoints=toCodePoints$1(str);var _a=cssFormattedClasses(codePoints,options),indicies=_a[0],classTypes=_a[1],forbiddenBreakpoints=_a[2];var length=codePoints.length;var lastEnd=0;var nextIndex=0;return{next:function(){if(nextIndex>=length){return{done:true,value:null};}var lineBreak=BREAK_NOT_ALLOWED$1;while(nextIndex<length&&(lineBreak=_lineBreakAtIndex(codePoints,classTypes,indicies,++nextIndex,forbiddenBreakpoints))===
BREAK_NOT_ALLOWED$1){}if(lineBreak!==BREAK_NOT_ALLOWED$1||nextIndex===length){var value=new Break(codePoints,lineBreak,lastEnd,nextIndex);lastEnd=nextIndex;return{value:value,done:false};}return{done:true,value:null};},};};var FLAG_UNRESTRICTED=1<<0;var FLAG_ID=1<<1;var FLAG_INTEGER=1<<2;var FLAG_NUMBER=1<<3;var LINE_FEED=0x000a;var SOLIDUS=0x002f;var REVERSE_SOLIDUS=0x005c;var CHARACTER_TABULATION=0x0009;var SPACE=0x0020;var QUOTATION_MARK=0x0022;var EQUALS_SIGN=0x003d;var NUMBER_SIGN=0x0023;var DOLLAR_SIGN=0x0024;var PERCENTAGE_SIGN=0x0025;var APOSTROPHE=0x0027;var LEFT_PARENTHESIS=0x0028;var RIGHT_PARENTHESIS=0x0029;var LOW_LINE=0x005f;var HYPHEN_MINUS=0x002d;var EXCLAMATION_MARK=0x0021;var LESS_THAN_SIGN=0x003c;var GREATER_THAN_SIGN=0x003e;var COMMERCIAL_AT=0x0040;var LEFT_SQUARE_BRACKET=0x005b;var RIGHT_SQUARE_BRACKET=0x005d;var CIRCUMFLEX_ACCENT=0x003d;var LEFT_CURLY_BRACKET=0x007b;var QUESTION_MARK=0x003f;var RIGHT_CURLY_BRACKET=0x007d;var VERTICAL_LINE=0x007c;var TILDE=0x007e;
var CONTROL=0x0080;var REPLACEMENT_CHARACTER=0xfffd;var ASTERISK=0x002a;var PLUS_SIGN=0x002b;var COMMA=0x002c;var COLON=0x003a;var SEMICOLON=0x003b;var FULL_STOP=0x002e;var NULL=0x0000;var BACKSPACE=0x0008;var LINE_TABULATION=0x000b;var SHIFT_OUT=0x000e;var INFORMATION_SEPARATOR_ONE=0x001f;var DELETE=0x007f;var EOF=-1;var ZERO=0x0030;var a=0x0061;var e=0x0065;var f=0x0066;var u=0x0075;var z=0x007a;var A=0x0041;var E=0x0045;var F=0x0046;var U=0x0055;var Z=0x005a;var isDigit=function(codePoint){return codePoint>=ZERO&&codePoint<=0x0039;};var isSurrogateCodePoint=function(codePoint){return codePoint>=0xd800&&codePoint<=0xdfff;};var isHex=function(codePoint){return isDigit(codePoint)||(codePoint>=A&&codePoint<=F)||(codePoint>=a&&codePoint<=f);};var isLowerCaseLetter=function(codePoint){return codePoint>=a&&codePoint<=z;};var isUpperCaseLetter=function(codePoint){return codePoint>=A&&codePoint<=Z;};var isLetter=function(codePoint){return isLowerCaseLetter(codePoint)||isUpperCaseLetter(codePoint);};
var isNonASCIICodePoint=function(codePoint){return codePoint>=CONTROL;};var isWhiteSpace=function(codePoint){return codePoint===LINE_FEED||codePoint===CHARACTER_TABULATION||codePoint===SPACE;};var isNameStartCodePoint=function(codePoint){return isLetter(codePoint)||isNonASCIICodePoint(codePoint)||codePoint===LOW_LINE;};var isNameCodePoint=function(codePoint){return isNameStartCodePoint(codePoint)||isDigit(codePoint)||codePoint===HYPHEN_MINUS;};var isNonPrintableCodePoint=function(codePoint){return((codePoint>=NULL&&codePoint<=BACKSPACE)||codePoint===LINE_TABULATION||(codePoint>=SHIFT_OUT&&codePoint<=INFORMATION_SEPARATOR_ONE)||codePoint===DELETE);};var isValidEscape=function(c1,c2){if(c1!==REVERSE_SOLIDUS){return false;}return c2!==LINE_FEED;};var isIdentifierStart=function(c1,c2,c3){if(c1===HYPHEN_MINUS){return isNameStartCodePoint(c2)||isValidEscape(c2,c3);}else if(isNameStartCodePoint(c1)){return true;}else if(c1===REVERSE_SOLIDUS&&isValidEscape(c1,c2)){return true;}return false;};
var isNumberStart=function(c1,c2,c3){if(c1===PLUS_SIGN||c1===HYPHEN_MINUS){if(isDigit(c2)){return true;}return c2===FULL_STOP&&isDigit(c3);}if(c1===FULL_STOP){return isDigit(c2);}return isDigit(c1);};var stringToNumber=function(codePoints){var c=0;var sign=1;if(codePoints[c]===PLUS_SIGN||codePoints[c]===HYPHEN_MINUS){if(codePoints[c]===HYPHEN_MINUS){sign=-1;}c++;}var integers=[];while(isDigit(codePoints[c])){integers.push(codePoints[c++]);}var int=integers.length?parseInt(fromCodePoint$1.apply(void 0,integers),10):0;if(codePoints[c]===FULL_STOP){c++;}var fraction=[];while(isDigit(codePoints[c])){fraction.push(codePoints[c++]);}var fracd=fraction.length;var frac=fracd?parseInt(fromCodePoint$1.apply(void 0,fraction),10):0;if(codePoints[c]===E||codePoints[c]===e){c++;}var expsign=1;if(codePoints[c]===PLUS_SIGN||codePoints[c]===HYPHEN_MINUS){if(codePoints[c]===HYPHEN_MINUS){expsign=-1;}c++;}var exponent=[];while(isDigit(codePoints[c])){exponent.push(codePoints[c++]);}var exp=exponent.length?parseInt(fromCodePoint$1.apply(void 0,exponent),10):0;
return sign*(int+frac*Math.pow(10,-fracd))*Math.pow(10,expsign*exp);};var LEFT_PARENTHESIS_TOKEN={type:2};var RIGHT_PARENTHESIS_TOKEN={type:3};var COMMA_TOKEN={type:4};var SUFFIX_MATCH_TOKEN={type:13};var PREFIX_MATCH_TOKEN={type:8};var COLUMN_TOKEN={type:21};var DASH_MATCH_TOKEN={type:9};var INCLUDE_MATCH_TOKEN={type:10};var LEFT_CURLY_BRACKET_TOKEN={type:11};var RIGHT_CURLY_BRACKET_TOKEN={type:12};var SUBSTRING_MATCH_TOKEN={type:14};var BAD_URL_TOKEN={type:23};var BAD_STRING_TOKEN={type:1};var CDO_TOKEN={type:25};var CDC_TOKEN={type:24};var COLON_TOKEN={type:26};var SEMICOLON_TOKEN={type:27};var LEFT_SQUARE_BRACKET_TOKEN={type:28};var RIGHT_SQUARE_BRACKET_TOKEN={type:29};var WHITESPACE_TOKEN={type:31};var EOF_TOKEN={type:32};var Tokenizer=(function(){function Tokenizer(){this._value=[];}Tokenizer.prototype.write=function(chunk){this._value=this._value.concat(toCodePoints$1(chunk));};Tokenizer.prototype.read=function(){var tokens=[];var token=this.consumeToken();while(token!==EOF_TOKEN){
tokens.push(token);token=this.consumeToken();}return tokens;};Tokenizer.prototype.consumeToken=function(){var codePoint=this.consumeCodePoint();switch(codePoint){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var c1=this.peekCodePoint(0);var c2=this.peekCodePoint(1);var c3=this.peekCodePoint(2);if(isNameCodePoint(c1)||isValidEscape(c2,c3)){var flags=isIdentifierStart(c1,c2,c3)?FLAG_ID:FLAG_UNRESTRICTED;var value=this.consumeName();return{type:5,value:value,flags:flags};}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return SUFFIX_MATCH_TOKEN;}break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return SUBSTRING_MATCH_TOKEN;}break;case PLUS_SIGN:if(isNumberStart(codePoint,this.peekCodePoint(0),this.peekCodePoint(1))){
this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var e1=codePoint;var e2=this.peekCodePoint(0);var e3=this.peekCodePoint(1);if(isNumberStart(e1,e2,e3)){this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}if(isIdentifierStart(e1,e2,e3)){this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();}if(e2===HYPHEN_MINUS&&e3===GREATER_THAN_SIGN){this.consumeCodePoint();this.consumeCodePoint();return CDC_TOKEN;}break;case FULL_STOP:if(isNumberStart(codePoint,this.peekCodePoint(0),this.peekCodePoint(1))){this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK){this.consumeCodePoint();while(true){var c=this.consumeCodePoint();if(c===ASTERISK){c=this.consumeCodePoint();if(c===SOLIDUS){return this.consumeToken();}}if(c===EOF){return this.consumeToken();}}}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;
case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS){this.consumeCodePoint();this.consumeCodePoint();return CDO_TOKEN;}break;case COMMERCIAL_AT:var a1=this.peekCodePoint(0);var a2=this.peekCodePoint(1);var a3=this.peekCodePoint(2);if(isIdentifierStart(a1,a2,a3)){var value=this.consumeName();return{type:7,value:value};}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(codePoint,this.peekCodePoint(0))){this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();}break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return PREFIX_MATCH_TOKEN;}break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var u1=this.peekCodePoint(0);var u2=this.peekCodePoint(1);if(u1===PLUS_SIGN&&(isHex(u2)||u2===QUESTION_MARK)){
this.consumeCodePoint();this.consumeUnicodeRangeToken();}this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return DASH_MATCH_TOKEN;}if(this.peekCodePoint(0)===VERTICAL_LINE){this.consumeCodePoint();return COLUMN_TOKEN;}break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN){this.consumeCodePoint();return INCLUDE_MATCH_TOKEN;}break;case EOF:return EOF_TOKEN;}if(isWhiteSpace(codePoint)){this.consumeWhiteSpace();return WHITESPACE_TOKEN;}if(isDigit(codePoint)){this.reconsumeCodePoint(codePoint);return this.consumeNumericToken();}if(isNameStartCodePoint(codePoint)){this.reconsumeCodePoint(codePoint);return this.consumeIdentLikeToken();}return{type:6,value:fromCodePoint$1(codePoint)};};Tokenizer.prototype.consumeCodePoint=function(){var value=this._value.shift();return typeof value==='undefined'?-1:value;};Tokenizer.prototype.reconsumeCodePoint=function(codePoint){this._value.unshift(codePoint);
};Tokenizer.prototype.peekCodePoint=function(delta){if(delta>=this._value.length){return-1;}return this._value[delta];};Tokenizer.prototype.consumeUnicodeRangeToken=function(){var digits=[];var codePoint=this.consumeCodePoint();while(isHex(codePoint)&&digits.length<6){digits.push(codePoint);codePoint=this.consumeCodePoint();}var questionMarks=false;while(codePoint===QUESTION_MARK&&digits.length<6){digits.push(codePoint);codePoint=this.consumeCodePoint();questionMarks=true;}if(questionMarks){var start_1=parseInt(fromCodePoint$1.apply(void 0,digits.map(function(digit){return(digit===QUESTION_MARK?ZERO:digit);})),16);var end=parseInt(fromCodePoint$1.apply(void 0,digits.map(function(digit){return(digit===QUESTION_MARK?F:digit);})),16);return{type:30,start:start_1,end:end};}var start=parseInt(fromCodePoint$1.apply(void 0,digits),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint();codePoint=this.consumeCodePoint();var endDigits=[];while(isHex(codePoint)&&endDigits.length<6){
endDigits.push(codePoint);codePoint=this.consumeCodePoint();}var end=parseInt(fromCodePoint$1.apply(void 0,endDigits),16);return{type:30,start:start,end:end};}else{return{type:30,start:start,end:start};}};Tokenizer.prototype.consumeIdentLikeToken=function(){var value=this.consumeName();if(value.toLowerCase()==='url'&&this.peekCodePoint(0)===LEFT_PARENTHESIS){this.consumeCodePoint();return this.consumeUrlToken();}else if(this.peekCodePoint(0)===LEFT_PARENTHESIS){this.consumeCodePoint();return{type:19,value:value};}return{type:20,value:value};};Tokenizer.prototype.consumeUrlToken=function(){var value=[];this.consumeWhiteSpace();if(this.peekCodePoint(0)===EOF){return{type:22,value:''};}var next=this.peekCodePoint(0);if(next===APOSTROPHE||next===QUOTATION_MARK){var stringToken=this.consumeStringToken(this.consumeCodePoint());if(stringToken.type===0){this.consumeWhiteSpace();if(this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS){this.consumeCodePoint();return{type:22,value:stringToken.value};
}}this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}while(true){var codePoint=this.consumeCodePoint();if(codePoint===EOF||codePoint===RIGHT_PARENTHESIS){return{type:22,value:fromCodePoint$1.apply(void 0,value)};}else if(isWhiteSpace(codePoint)){this.consumeWhiteSpace();if(this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS){this.consumeCodePoint();return{type:22,value:fromCodePoint$1.apply(void 0,value)};}this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}else if(codePoint===QUOTATION_MARK||codePoint===APOSTROPHE||codePoint===LEFT_PARENTHESIS||isNonPrintableCodePoint(codePoint)){this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}else if(codePoint===REVERSE_SOLIDUS){if(isValidEscape(codePoint,this.peekCodePoint(0))){value.push(this.consumeEscapedCodePoint());}else{this.consumeBadUrlRemnants();return BAD_URL_TOKEN;}}else{value.push(codePoint);}}};Tokenizer.prototype.consumeWhiteSpace=function(){while(isWhiteSpace(this.peekCodePoint(0))){this.consumeCodePoint();}};
Tokenizer.prototype.consumeBadUrlRemnants=function(){while(true){var codePoint=this.consumeCodePoint();if(codePoint===RIGHT_PARENTHESIS||codePoint===EOF){return;}if(isValidEscape(codePoint,this.peekCodePoint(0))){this.consumeEscapedCodePoint();}}};Tokenizer.prototype.consumeStringSlice=function(count){var SLICE_STACK_SIZE=50000;var value='';while(count>0){var amount=Math.min(SLICE_STACK_SIZE,count);value+=fromCodePoint$1.apply(void 0,this._value.splice(0,amount));count-=amount;}this._value.shift();return value;};Tokenizer.prototype.consumeStringToken=function(endingCodePoint){var value='';var i=0;do{var codePoint=this._value[i];if(codePoint===EOF||codePoint===undefined||codePoint===endingCodePoint){value+=this.consumeStringSlice(i);return{type:0,value:value};}if(codePoint===LINE_FEED){this._value.splice(0,i);return BAD_STRING_TOKEN;}if(codePoint===REVERSE_SOLIDUS){var next=this._value[i+1];if(next!==EOF&&next!==undefined){if(next===LINE_FEED){value+=this.consumeStringSlice(i);i=-1;this._value.shift();
}else if(isValidEscape(codePoint,next)){value+=this.consumeStringSlice(i);value+=fromCodePoint$1(this.consumeEscapedCodePoint());i=-1;}}}i++;}while(true);};Tokenizer.prototype.consumeNumber=function(){var repr=[];var type=FLAG_INTEGER;var c1=this.peekCodePoint(0);if(c1===PLUS_SIGN||c1===HYPHEN_MINUS){repr.push(this.consumeCodePoint());}while(isDigit(this.peekCodePoint(0))){repr.push(this.consumeCodePoint());}c1=this.peekCodePoint(0);var c2=this.peekCodePoint(1);if(c1===FULL_STOP&&isDigit(c2)){repr.push(this.consumeCodePoint(),this.consumeCodePoint());type=FLAG_NUMBER;while(isDigit(this.peekCodePoint(0))){repr.push(this.consumeCodePoint());}}c1=this.peekCodePoint(0);c2=this.peekCodePoint(1);var c3=this.peekCodePoint(2);if((c1===E||c1===e)&&(((c2===PLUS_SIGN||c2===HYPHEN_MINUS)&&isDigit(c3))||isDigit(c2))){repr.push(this.consumeCodePoint(),this.consumeCodePoint());type=FLAG_NUMBER;while(isDigit(this.peekCodePoint(0))){repr.push(this.consumeCodePoint());}}return[stringToNumber(repr),type];
};Tokenizer.prototype.consumeNumericToken=function(){var _a=this.consumeNumber(),number=_a[0],flags=_a[1];var c1=this.peekCodePoint(0);var c2=this.peekCodePoint(1);var c3=this.peekCodePoint(2);if(isIdentifierStart(c1,c2,c3)){var unit=this.consumeName();return{type:15,number:number,flags:flags,unit:unit};}if(c1===PERCENTAGE_SIGN){this.consumeCodePoint();return{type:16,number:number,flags:flags};}return{type:17,number:number,flags:flags};};Tokenizer.prototype.consumeEscapedCodePoint=function(){var codePoint=this.consumeCodePoint();if(isHex(codePoint)){var hex=fromCodePoint$1(codePoint);while(isHex(this.peekCodePoint(0))&&hex.length<6){hex+=fromCodePoint$1(this.consumeCodePoint());}if(isWhiteSpace(this.peekCodePoint(0))){this.consumeCodePoint();}var hexCodePoint=parseInt(hex,16);if(hexCodePoint===0||isSurrogateCodePoint(hexCodePoint)||hexCodePoint>0x10ffff){return REPLACEMENT_CHARACTER;}return hexCodePoint;}if(codePoint===EOF){return REPLACEMENT_CHARACTER;}return codePoint;};Tokenizer.prototype.consumeName=function(){
var result='';while(true){var codePoint=this.consumeCodePoint();if(isNameCodePoint(codePoint)){result+=fromCodePoint$1(codePoint);}else if(isValidEscape(codePoint,this.peekCodePoint(0))){result+=fromCodePoint$1(this.consumeEscapedCodePoint());}else{this.reconsumeCodePoint(codePoint);return result;}}};return Tokenizer;}());var Parser=(function(){function Parser(tokens){this._tokens=tokens;}Parser.create=function(value){var tokenizer=new Tokenizer();tokenizer.write(value);return new Parser(tokenizer.read());};Parser.parseValue=function(value){return Parser.create(value).parseComponentValue();};Parser.parseValues=function(value){return Parser.create(value).parseComponentValues();};Parser.prototype.parseComponentValue=function(){var token=this.consumeToken();while(token.type===31){token=this.consumeToken();}if(token.type===32){throw new SyntaxError("Error parsing CSS component value, unexpected EOF");}this.reconsumeToken(token);var value=this.consumeComponentValue();do{token=this.consumeToken();
}while(token.type===31);if(token.type===32){return value;}throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one");};Parser.prototype.parseComponentValues=function(){var values=[];while(true){var value=this.consumeComponentValue();if(value.type===32){return values;}values.push(value);values.push();}};Parser.prototype.consumeComponentValue=function(){var token=this.consumeToken();switch(token.type){case 11:case 28:case 2:return this.consumeSimpleBlock(token.type);case 19:return this.consumeFunction(token);}return token;};Parser.prototype.consumeSimpleBlock=function(type){var block={type:type,values:[]};var token=this.consumeToken();while(true){if(token.type===32||isEndingTokenFor(token,type)){return block;}this.reconsumeToken(token);block.values.push(this.consumeComponentValue());token=this.consumeToken();}};Parser.prototype.consumeFunction=function(functionToken){var cssFunction={name:functionToken.value,values:[],type:18};while(true){
var token=this.consumeToken();if(token.type===32||token.type===3){return cssFunction;}this.reconsumeToken(token);cssFunction.values.push(this.consumeComponentValue());}};Parser.prototype.consumeToken=function(){var token=this._tokens.shift();return typeof token==='undefined'?EOF_TOKEN:token;};Parser.prototype.reconsumeToken=function(token){this._tokens.unshift(token);};return Parser;}());var isDimensionToken=function(token){return token.type===15;};var isNumberToken=function(token){return token.type===17;};var isIdentToken=function(token){return token.type===20;};var isStringToken=function(token){return token.type===0;};var isIdentWithValue=function(token,value){return isIdentToken(token)&&token.value===value;};var nonWhiteSpace=function(token){return token.type!==31;};var nonFunctionArgSeparator=function(token){return token.type!==31&&token.type!==4;};var parseFunctionArgs=function(tokens){var args=[];var arg=[];tokens.forEach(function(token){if(token.type===4){if(arg.length===0){
throw new Error("Error parsing function args, zero tokens for arg");}args.push(arg);arg=[];return;}if(token.type!==31){arg.push(token);}});if(arg.length){args.push(arg);}return args;};var isEndingTokenFor=function(token,type){if(type===11&&token.type===12){return true;}if(type===28&&token.type===29){return true;}return type===2&&token.type===3;};var isLength=function(token){return token.type===17||token.type===15;};var isLengthPercentage=function(token){return token.type===16||isLength(token);};var parseLengthPercentageTuple=function(tokens){return tokens.length>1?[tokens[0],tokens[1]]:[tokens[0]];};var ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER};var FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER};var HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER};var getAbsoluteValueForTuple=function(tuple,width,height){var x=tuple[0],y=tuple[1];return[getAbsoluteValue(x,width),getAbsoluteValue(typeof y!=='undefined'?y:x,height)];};var getAbsoluteValue=function(token,parent){if(token.type===16){
return(token.number/100)*parent;}if(isDimensionToken(token)){switch(token.unit){case'rem':case'em':return 16*token.number;case'px':default:return token.number;}}return token.number;};var DEG='deg';var GRAD='grad';var RAD='rad';var TURN='turn';var angle={name:'angle',parse:function(_context,value){if(value.type===15){switch(value.unit){case DEG:return(Math.PI*value.number)/180;case GRAD:return(Math.PI/200)*value.number;case RAD:return value.number;case TURN:return Math.PI*2*value.number;}}throw new Error("Unsupported angle type");}};var isAngle=function(value){if(value.type===15){if(value.unit===DEG||value.unit===GRAD||value.unit===RAD||value.unit===TURN){return true;}}return false;};var parseNamedSide=function(tokens){var sideOrCorner=tokens.filter(isIdentToken).map(function(ident){return ident.value;}).join(' ');switch(sideOrCorner){case'to bottom right':case'to right bottom':case'left top':case'top left':return[ZERO_LENGTH,ZERO_LENGTH];case'to top':case'bottom':return deg(0);case'to bottom left':
case'to left bottom':case'right top':case'top right':return[ZERO_LENGTH,HUNDRED_PERCENT];case'to right':case'left':return deg(90);case'to top left':case'to left top':case'right bottom':case'bottom right':return[HUNDRED_PERCENT,HUNDRED_PERCENT];case'to bottom':case'top':return deg(180);case'to top right':case'to right top':case'left bottom':case'bottom left':return[HUNDRED_PERCENT,ZERO_LENGTH];case'to left':case'right':return deg(270);}return 0;};var deg=function(deg){return(Math.PI*deg)/180;};var color$1={name:'color',parse:function(context,value){if(value.type===18){var colorFunction=SUPPORTED_COLOR_FUNCTIONS[value.name];if(typeof colorFunction==='undefined'){throw new Error("Attempting to parse an unsupported color function \""+value.name+"\"");}return colorFunction(context,value.values);}if(value.type===5){if(value.value.length===3){var r=value.value.substring(0,1);var g=value.value.substring(1,2);var b=value.value.substring(2,3);return pack(parseInt(r+r,16),parseInt(g+g,16),parseInt(b+b,16),1);
}if(value.value.length===4){var r=value.value.substring(0,1);var g=value.value.substring(1,2);var b=value.value.substring(2,3);var a=value.value.substring(3,4);return pack(parseInt(r+r,16),parseInt(g+g,16),parseInt(b+b,16),parseInt(a+a,16)/255);}if(value.value.length===6){var r=value.value.substring(0,2);var g=value.value.substring(2,4);var b=value.value.substring(4,6);return pack(parseInt(r,16),parseInt(g,16),parseInt(b,16),1);}if(value.value.length===8){var r=value.value.substring(0,2);var g=value.value.substring(2,4);var b=value.value.substring(4,6);var a=value.value.substring(6,8);return pack(parseInt(r,16),parseInt(g,16),parseInt(b,16),parseInt(a,16)/255);}}if(value.type===20){var namedColor=COLORS[value.value.toUpperCase()];if(typeof namedColor!=='undefined'){return namedColor;}}return COLORS.TRANSPARENT;}};var isTransparent=function(color){return(0xff&color)===0;};var asString=function(color){var alpha=0xff&color;var blue=0xff&(color>>8);var green=0xff&(color>>16);var red=0xff&(color>>24);
return alpha<255?"rgba("+red+","+green+","+blue+","+alpha/255+")":"rgb("+red+","+green+","+blue+")";};var pack=function(r,g,b,a){return((r<<24)|(g<<16)|(b<<8)|(Math.round(a*255)<<0))>>>0;};var getTokenColorValue=function(token,i){if(token.type===17){return token.number;}if(token.type===16){var max=i===3?1:255;return i===3?(token.number/100)*max:Math.round((token.number/100)*max);}return 0;};var rgb=function(_context,args){var tokens=args.filter(nonFunctionArgSeparator);if(tokens.length===3){var _a=tokens.map(getTokenColorValue),r=_a[0],g=_a[1],b=_a[2];return pack(r,g,b,1);}if(tokens.length===4){var _b=tokens.map(getTokenColorValue),r=_b[0],g=_b[1],b=_b[2],a=_b[3];return pack(r,g,b,a);}return 0;};function hue2rgb(t1,t2,hue){if(hue<0){hue+=1;}if(hue>=1){hue-=1;}if(hue<1/6){return(t2-t1)*hue*6+t1;}else if(hue<1/2){return t2;}else if(hue<2/3){return(t2-t1)*6*(2/3-hue)+t1;}else{return t1;}}var hsl=function(context,args){var tokens=args.filter(nonFunctionArgSeparator);var hue=tokens[0],saturation=tokens[1],lightness=tokens[2],alpha=tokens[3];
var h=(hue.type===17?deg(hue.number):angle.parse(context,hue))/(Math.PI*2);var s=isLengthPercentage(saturation)?saturation.number/100:0;var l=isLengthPercentage(lightness)?lightness.number/100:0;var a=typeof alpha!=='undefined'&&isLengthPercentage(alpha)?getAbsoluteValue(alpha,1):1;if(s===0){return pack(l*255,l*255,l*255,1);}var t2=l<=0.5?l*(s+1):l+s-l*s;var t1=l*2-t2;var r=hue2rgb(t1,t2,h+1/3);var g=hue2rgb(t1,t2,h);var b=hue2rgb(t1,t2,h-1/3);return pack(r*255,g*255,b*255,a);};var SUPPORTED_COLOR_FUNCTIONS={hsl:hsl,hsla:hsl,rgb:rgb,rgba:rgb};var parseColor=function(context,value){return color$1.parse(context,Parser.create(value).parseComponentValue());};var COLORS={ALICEBLUE:0xf0f8ffff,ANTIQUEWHITE:0xfaebd7ff,AQUA:0x00ffffff,AQUAMARINE:0x7fffd4ff,AZURE:0xf0ffffff,BEIGE:0xf5f5dcff,BISQUE:0xffe4c4ff,BLACK:0x000000ff,BLANCHEDALMOND:0xffebcdff,BLUE:0x0000ffff,BLUEVIOLET:0x8a2be2ff,BROWN:0xa52a2aff,BURLYWOOD:0xdeb887ff,CADETBLUE:0x5f9ea0ff,CHARTREUSE:0x7fff00ff,CHOCOLATE:0xd2691eff,CORAL:0xff7f50ff,
CORNFLOWERBLUE:0x6495edff,CORNSILK:0xfff8dcff,CRIMSON:0xdc143cff,CYAN:0x00ffffff,DARKBLUE:0x00008bff,DARKCYAN:0x008b8bff,DARKGOLDENROD:0xb886bbff,DARKGRAY:0xa9a9a9ff,DARKGREEN:0x006400ff,DARKGREY:0xa9a9a9ff,DARKKHAKI:0xbdb76bff,DARKMAGENTA:0x8b008bff,DARKOLIVEGREEN:0x556b2fff,DARKORANGE:0xff8c00ff,DARKORCHID:0x9932ccff,DARKRED:0x8b0000ff,DARKSALMON:0xe9967aff,DARKSEAGREEN:0x8fbc8fff,DARKSLATEBLUE:0x483d8bff,DARKSLATEGRAY:0x2f4f4fff,DARKSLATEGREY:0x2f4f4fff,DARKTURQUOISE:0x00ced1ff,DARKVIOLET:0x9400d3ff,DEEPPINK:0xff1493ff,DEEPSKYBLUE:0x00bfffff,DIMGRAY:0x696969ff,DIMGREY:0x696969ff,DODGERBLUE:0x1e90ffff,FIREBRICK:0xb22222ff,FLORALWHITE:0xfffaf0ff,FORESTGREEN:0x228b22ff,FUCHSIA:0xff00ffff,GAINSBORO:0xdcdcdcff,GHOSTWHITE:0xf8f8ffff,GOLD:0xffd700ff,GOLDENROD:0xdaa520ff,GRAY:0x808080ff,GREEN:0x008000ff,GREENYELLOW:0xadff2fff,GREY:0x808080ff,HONEYDEW:0xf0fff0ff,HOTPINK:0xff69b4ff,INDIANRED:0xcd5c5cff,INDIGO:0x4b0082ff,IVORY:0xfffff0ff,KHAKI:0xf0e68cff,LAVENDER:0xe6e6faff,LAVENDERBLUSH:0xfff0f5ff,
LAWNGREEN:0x7cfc00ff,LEMONCHIFFON:0xfffacdff,LIGHTBLUE:0xadd8e6ff,LIGHTCORAL:0xf08080ff,LIGHTCYAN:0xe0ffffff,LIGHTGOLDENRODYELLOW:0xfafad2ff,LIGHTGRAY:0xd3d3d3ff,LIGHTGREEN:0x90ee90ff,LIGHTGREY:0xd3d3d3ff,LIGHTPINK:0xffb6c1ff,LIGHTSALMON:0xffa07aff,LIGHTSEAGREEN:0x20b2aaff,LIGHTSKYBLUE:0x87cefaff,LIGHTSLATEGRAY:0x778899ff,LIGHTSLATEGREY:0x778899ff,LIGHTSTEELBLUE:0xb0c4deff,LIGHTYELLOW:0xffffe0ff,LIME:0x00ff00ff,LIMEGREEN:0x32cd32ff,LINEN:0xfaf0e6ff,MAGENTA:0xff00ffff,MAROON:0x800000ff,MEDIUMAQUAMARINE:0x66cdaaff,MEDIUMBLUE:0x0000cdff,MEDIUMORCHID:0xba55d3ff,MEDIUMPURPLE:0x9370dbff,MEDIUMSEAGREEN:0x3cb371ff,MEDIUMSLATEBLUE:0x7b68eeff,MEDIUMSPRINGGREEN:0x00fa9aff,MEDIUMTURQUOISE:0x48d1ccff,MEDIUMVIOLETRED:0xc71585ff,MIDNIGHTBLUE:0x191970ff,MINTCREAM:0xf5fffaff,MISTYROSE:0xffe4e1ff,MOCCASIN:0xffe4b5ff,NAVAJOWHITE:0xffdeadff,NAVY:0x000080ff,OLDLACE:0xfdf5e6ff,OLIVE:0x808000ff,OLIVEDRAB:0x6b8e23ff,ORANGE:0xffa500ff,ORANGERED:0xff4500ff,ORCHID:0xda70d6ff,PALEGOLDENROD:0xeee8aaff,PALEGREEN:0x98fb98ff,
PALETURQUOISE:0xafeeeeff,PALEVIOLETRED:0xdb7093ff,PAPAYAWHIP:0xffefd5ff,PEACHPUFF:0xffdab9ff,PERU:0xcd853fff,PINK:0xffc0cbff,PLUM:0xdda0ddff,POWDERBLUE:0xb0e0e6ff,PURPLE:0x800080ff,REBECCAPURPLE:0x663399ff,RED:0xff0000ff,ROSYBROWN:0xbc8f8fff,ROYALBLUE:0x4169e1ff,SADDLEBROWN:0x8b4513ff,SALMON:0xfa8072ff,SANDYBROWN:0xf4a460ff,SEAGREEN:0x2e8b57ff,SEASHELL:0xfff5eeff,SIENNA:0xa0522dff,SILVER:0xc0c0c0ff,SKYBLUE:0x87ceebff,SLATEBLUE:0x6a5acdff,SLATEGRAY:0x708090ff,SLATEGREY:0x708090ff,SNOW:0xfffafaff,SPRINGGREEN:0x00ff7fff,STEELBLUE:0x4682b4ff,TAN:0xd2b48cff,TEAL:0x008080ff,THISTLE:0xd8bfd8ff,TOMATO:0xff6347ff,TRANSPARENT:0x00000000,TURQUOISE:0x40e0d0ff,VIOLET:0xee82eeff,WHEAT:0xf5deb3ff,WHITE:0xffffffff,WHITESMOKE:0xf5f5f5ff,YELLOW:0xffff00ff,YELLOWGREEN:0x9acd32ff};var backgroundClip={name:'background-clip',initialValue:'border-box',prefix:false,type:1,parse:function(_context,tokens){return tokens.map(function(token){if(isIdentToken(token)){switch(token.value){case'padding-box':return 1;
case'content-box':return 2;}}return 0;});}};var backgroundColor={name:"background-color",initialValue:'transparent',prefix:false,type:3,format:'color'};var parseColorStop=function(context,args){var color=color$1.parse(context,args[0]);var stop=args[1];return stop&&isLengthPercentage(stop)?{color:color,stop:stop}:{color:color,stop:null};};var processColorStops=function(stops,lineLength){var first=stops[0];var last=stops[stops.length-1];if(first.stop===null){first.stop=ZERO_LENGTH;}if(last.stop===null){last.stop=HUNDRED_PERCENT;}var processStops=[];var previous=0;for(var i=0;i<stops.length;i++){var stop_1=stops[i].stop;if(stop_1!==null){var absoluteValue=getAbsoluteValue(stop_1,lineLength);if(absoluteValue>previous){processStops.push(absoluteValue);}else{processStops.push(previous);}previous=absoluteValue;}else{processStops.push(null);}}var gapBegin=null;for(var i=0;i<processStops.length;i++){var stop_2=processStops[i];if(stop_2===null){if(gapBegin===null){gapBegin=i;}}else if(gapBegin!==null){
var gapLength=i-gapBegin;var beforeGap=processStops[gapBegin-1];var gapValue=(stop_2-beforeGap)/(gapLength+1);for(var g=1;g<=gapLength;g++){processStops[gapBegin+g-1]=gapValue*g;}gapBegin=null;}}return stops.map(function(_a,i){var color=_a.color;return{color:color,stop:Math.max(Math.min(1,processStops[i]/lineLength),0)};});};var getAngleFromCorner=function(corner,width,height){var centerX=width/2;var centerY=height/2;var x=getAbsoluteValue(corner[0],width)-centerX;var y=centerY-getAbsoluteValue(corner[1],height);return(Math.atan2(y,x)+Math.PI*2)%(Math.PI*2);};var calculateGradientDirection=function(angle,width,height){var radian=typeof angle==='number'?angle:getAngleFromCorner(angle,width,height);var lineLength=Math.abs(width*Math.sin(radian))+Math.abs(height*Math.cos(radian));var halfWidth=width/2;var halfHeight=height/2;var halfLineLength=lineLength/2;var yDiff=Math.sin(radian-Math.PI/2)*halfLineLength;var xDiff=Math.cos(radian-Math.PI/2)*halfLineLength;return[lineLength,halfWidth-xDiff,halfWidth+xDiff,halfHeight-yDiff,halfHeight+yDiff];
};var distance=function(a,b){return Math.sqrt(a*a+b*b);};var findCorner=function(width,height,x,y,closest){var corners=[[0,0],[0,height],[width,0],[width,height]];return corners.reduce(function(stat,corner){var cx=corner[0],cy=corner[1];var d=distance(x-cx,y-cy);if(closest?d<stat.optimumDistance:d>stat.optimumDistance){return{optimumCorner:corner,optimumDistance:d};}return stat;},{optimumDistance:closest?Infinity:-Infinity,optimumCorner:null}).optimumCorner;};var calculateRadius=function(gradient,x,y,width,height){var rx=0;var ry=0;switch(gradient.size){case 0:if(gradient.shape===0){rx=ry=Math.min(Math.abs(x),Math.abs(x-width),Math.abs(y),Math.abs(y-height));}else if(gradient.shape===1){rx=Math.min(Math.abs(x),Math.abs(x-width));ry=Math.min(Math.abs(y),Math.abs(y-height));}break;case 2:if(gradient.shape===0){rx=ry=Math.min(distance(x,y),distance(x,y-height),distance(x-width,y),distance(x-width,y-height));}else if(gradient.shape===1){var c=Math.min(Math.abs(y),Math.abs(y-height))/Math.min(Math.abs(x),Math.abs(x-width));
var _a=findCorner(width,height,x,y,true),cx=_a[0],cy=_a[1];rx=distance(cx-x,(cy-y)/c);ry=c*rx;}break;case 1:if(gradient.shape===0){rx=ry=Math.max(Math.abs(x),Math.abs(x-width),Math.abs(y),Math.abs(y-height));}else if(gradient.shape===1){rx=Math.max(Math.abs(x),Math.abs(x-width));ry=Math.max(Math.abs(y),Math.abs(y-height));}break;case 3:if(gradient.shape===0){rx=ry=Math.max(distance(x,y),distance(x,y-height),distance(x-width,y),distance(x-width,y-height));}else if(gradient.shape===1){var c=Math.max(Math.abs(y),Math.abs(y-height))/Math.max(Math.abs(x),Math.abs(x-width));var _b=findCorner(width,height,x,y,false),cx=_b[0],cy=_b[1];rx=distance(cx-x,(cy-y)/c);ry=c*rx;}break;}if(Array.isArray(gradient.size)){rx=getAbsoluteValue(gradient.size[0],width);ry=gradient.size.length===2?getAbsoluteValue(gradient.size[1],height):rx;}return[rx,ry];};var linearGradient=function(context,tokens){var angle$1=deg(180);var stops=[];parseFunctionArgs(tokens).forEach(function(arg,i){if(i===0){var firstToken=arg[0];
if(firstToken.type===20&&firstToken.value==='to'){angle$1=parseNamedSide(arg);return;}else if(isAngle(firstToken)){angle$1=angle.parse(context,firstToken);return;}}var colorStop=parseColorStop(context,arg);stops.push(colorStop);});return{angle:angle$1,stops:stops,type:1};};var prefixLinearGradient=function(context,tokens){var angle$1=deg(180);var stops=[];parseFunctionArgs(tokens).forEach(function(arg,i){if(i===0){var firstToken=arg[0];if(firstToken.type===20&&['top','left','right','bottom'].indexOf(firstToken.value)!==-1){angle$1=parseNamedSide(arg);return;}else if(isAngle(firstToken)){angle$1=(angle.parse(context,firstToken)+deg(270))%deg(360);return;}}var colorStop=parseColorStop(context,arg);stops.push(colorStop);});return{angle:angle$1,stops:stops,type:1};};var webkitGradient=function(context,tokens){var angle=deg(180);var stops=[];var type=1;var shape=0;var size=3;var position=[];parseFunctionArgs(tokens).forEach(function(arg,i){var firstToken=arg[0];if(i===0){if(isIdentToken(firstToken)&&firstToken.value==='linear'){
type=1;return;}else if(isIdentToken(firstToken)&&firstToken.value==='radial'){type=2;return;}}if(firstToken.type===18){if(firstToken.name==='from'){var color=color$1.parse(context,firstToken.values[0]);stops.push({stop:ZERO_LENGTH,color:color});}else if(firstToken.name==='to'){var color=color$1.parse(context,firstToken.values[0]);stops.push({stop:HUNDRED_PERCENT,color:color});}else if(firstToken.name==='color-stop'){var values=firstToken.values.filter(nonFunctionArgSeparator);if(values.length===2){var color=color$1.parse(context,values[1]);var stop_1=values[0];if(isNumberToken(stop_1)){stops.push({stop:{type:16,number:stop_1.number*100,flags:stop_1.flags},color:color});}}}}});return type===1?{angle:(angle+deg(180))%deg(360),stops:stops,type:type}:{size:size,shape:shape,stops:stops,position:position,type:type};};var CLOSEST_SIDE='closest-side';var FARTHEST_SIDE='farthest-side';var CLOSEST_CORNER='closest-corner';var FARTHEST_CORNER='farthest-corner';var CIRCLE='circle';var ELLIPSE='ellipse';
var COVER='cover';var CONTAIN='contain';var radialGradient=function(context,tokens){var shape=0;var size=3;var stops=[];var position=[];parseFunctionArgs(tokens).forEach(function(arg,i){var isColorStop=true;if(i===0){var isAtPosition_1=false;isColorStop=arg.reduce(function(acc,token){if(isAtPosition_1){if(isIdentToken(token)){switch(token.value){case'center':position.push(FIFTY_PERCENT);return acc;case'top':case'left':position.push(ZERO_LENGTH);return acc;case'right':case'bottom':position.push(HUNDRED_PERCENT);return acc;}}else if(isLengthPercentage(token)||isLength(token)){position.push(token);}}else if(isIdentToken(token)){switch(token.value){case CIRCLE:shape=0;return false;case ELLIPSE:shape=1;return false;case'at':isAtPosition_1=true;return false;case CLOSEST_SIDE:size=0;return false;case COVER:case FARTHEST_SIDE:size=1;return false;case CONTAIN:case CLOSEST_CORNER:size=2;return false;case FARTHEST_CORNER:size=3;return false;}}else if(isLength(token)||isLengthPercentage(token)){if(!Array.isArray(size)){
size=[];}size.push(token);return false;}return acc;},isColorStop);}if(isColorStop){var colorStop=parseColorStop(context,arg);stops.push(colorStop);}});return{size:size,shape:shape,stops:stops,position:position,type:2};};var prefixRadialGradient=function(context,tokens){var shape=0;var size=3;var stops=[];var position=[];parseFunctionArgs(tokens).forEach(function(arg,i){var isColorStop=true;if(i===0){isColorStop=arg.reduce(function(acc,token){if(isIdentToken(token)){switch(token.value){case'center':position.push(FIFTY_PERCENT);return false;case'top':case'left':position.push(ZERO_LENGTH);return false;case'right':case'bottom':position.push(HUNDRED_PERCENT);return false;}}else if(isLengthPercentage(token)||isLength(token)){position.push(token);return false;}return acc;},isColorStop);}else if(i===1){isColorStop=arg.reduce(function(acc,token){if(isIdentToken(token)){switch(token.value){case CIRCLE:shape=0;return false;case ELLIPSE:shape=1;return false;case CONTAIN:case CLOSEST_SIDE:size=0;
return false;case FARTHEST_SIDE:size=1;return false;case CLOSEST_CORNER:size=2;return false;case COVER:case FARTHEST_CORNER:size=3;return false;}}else if(isLength(token)||isLengthPercentage(token)){if(!Array.isArray(size)){size=[];}size.push(token);return false;}return acc;},isColorStop);}if(isColorStop){var colorStop=parseColorStop(context,arg);stops.push(colorStop);}});return{size:size,shape:shape,stops:stops,position:position,type:2};};var isLinearGradient=function(background){return background.type===1;};var isRadialGradient=function(background){return background.type===2;};var image={name:'image',parse:function(context,value){if(value.type===22){var image_1={url:value.value,type:0};context.cache.addImage(value.value);return image_1;}if(value.type===18){var imageFunction=SUPPORTED_IMAGE_FUNCTIONS[value.name];if(typeof imageFunction==='undefined'){throw new Error("Attempting to parse an unsupported image function \""+value.name+"\"");}return imageFunction(context,value.values);}
throw new Error("Unsupported image type "+value.type);}};function isSupportedImage(value){return(!(value.type===20&&value.value==='none')&&(value.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[value.name]));}var SUPPORTED_IMAGE_FUNCTIONS={'linear-gradient':linearGradient,'-moz-linear-gradient':prefixLinearGradient,'-ms-linear-gradient':prefixLinearGradient,'-o-linear-gradient':prefixLinearGradient,'-webkit-linear-gradient':prefixLinearGradient,'radial-gradient':radialGradient,'-moz-radial-gradient':prefixRadialGradient,'-ms-radial-gradient':prefixRadialGradient,'-o-radial-gradient':prefixRadialGradient,'-webkit-radial-gradient':prefixRadialGradient,'-webkit-gradient':webkitGradient};var backgroundImage={name:'background-image',initialValue:'none',type:1,prefix:false,parse:function(context,tokens){if(tokens.length===0){return[];}var first=tokens[0];if(first.type===20&&first.value==='none'){return[];}return tokens.filter(function(value){return nonFunctionArgSeparator(value)&&isSupportedImage(value);})
.map(function(value){return image.parse(context,value);});}};var backgroundOrigin={name:'background-origin',initialValue:'border-box',prefix:false,type:1,parse:function(_context,tokens){return tokens.map(function(token){if(isIdentToken(token)){switch(token.value){case'padding-box':return 1;case'content-box':return 2;}}return 0;});}};var backgroundPosition={name:'background-position',initialValue:'0% 0%',type:1,prefix:false,parse:function(_context,tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isLengthPercentage);}).map(parseLengthPercentageTuple);}};var backgroundRepeat={name:'background-repeat',initialValue:'repeat',prefix:false,type:1,parse:function(_context,tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isIdentToken).map(function(token){return token.value;}).join(' ');}).map(parseBackgroundRepeat);}};var parseBackgroundRepeat=function(value){switch(value){case'no-repeat':return 1;case'repeat-x':case'repeat no-repeat':
return 2;case'repeat-y':case'no-repeat repeat':return 3;case'repeat':default:return 0;}};var BACKGROUND_SIZE;(function(BACKGROUND_SIZE){BACKGROUND_SIZE["AUTO"]="auto";BACKGROUND_SIZE["CONTAIN"]="contain";BACKGROUND_SIZE["COVER"]="cover";})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:'background-size',initialValue:'0',prefix:false,type:1,parse:function(_context,tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isBackgroundSizeInfoToken);});}};var isBackgroundSizeInfoToken=function(value){return isIdentToken(value)||isLengthPercentage(value);};var borderColorForSide=function(side){return({name:"border-"+side+"-color",initialValue:'transparent',prefix:false,type:3,format:'color'});};var borderTopColor=borderColorForSide('top');var borderRightColor=borderColorForSide('right');var borderBottomColor=borderColorForSide('bottom');var borderLeftColor=borderColorForSide('left');var borderRadiusForSide=function(side){return({name:"border-radius-"+side,
initialValue:'0 0',prefix:false,type:1,parse:function(_context,tokens){return parseLengthPercentageTuple(tokens.filter(isLengthPercentage));}});};var borderTopLeftRadius=borderRadiusForSide('top-left');var borderTopRightRadius=borderRadiusForSide('top-right');var borderBottomRightRadius=borderRadiusForSide('bottom-right');var borderBottomLeftRadius=borderRadiusForSide('bottom-left');var borderStyleForSide=function(side){return({name:"border-"+side+"-style",initialValue:'solid',prefix:false,type:2,parse:function(_context,style){switch(style){case'none':return 0;case'dashed':return 2;case'dotted':return 3;case'double':return 4;}return 1;}});};var borderTopStyle=borderStyleForSide('top');var borderRightStyle=borderStyleForSide('right');var borderBottomStyle=borderStyleForSide('bottom');var borderLeftStyle=borderStyleForSide('left');var borderWidthForSide=function(side){return({name:"border-"+side+"-width",initialValue:'0',type:0,prefix:false,parse:function(_context,token){if(isDimensionToken(token)){
return token.number;}return 0;}});};var borderTopWidth=borderWidthForSide('top');var borderRightWidth=borderWidthForSide('right');var borderBottomWidth=borderWidthForSide('bottom');var borderLeftWidth=borderWidthForSide('left');var color={name:"color",initialValue:'transparent',prefix:false,type:3,format:'color'};var direction={name:'direction',initialValue:'ltr',prefix:false,type:2,parse:function(_context,direction){switch(direction){case'rtl':return 1;case'ltr':default:return 0;}}};var display={name:'display',initialValue:'inline-block',prefix:false,type:1,parse:function(_context,tokens){return tokens.filter(isIdentToken).reduce(function(bit,token){return bit|parseDisplayValue(token.value);},0);}};var parseDisplayValue=function(display){switch(display){case'block':case'-webkit-box':return 2;case'inline':return 4;case'run-in':return 8;case'flow':return 16;case'flow-root':return 32;case'table':return 64;case'flex':case'-webkit-flex':return 128;case'grid':case'-ms-grid':return 256;case'ruby':
return 512;case'subgrid':return 1024;case'list-item':return 2048;case'table-row-group':return 4096;case'table-header-group':return 8192;case'table-footer-group':return 16384;case'table-row':return 32768;case'table-cell':return 65536;case'table-column-group':return 131072;case'table-column':return 262144;case'table-caption':return 524288;case'ruby-base':return 1048576;case'ruby-text':return 2097152;case'ruby-base-container':return 4194304;case'ruby-text-container':return 8388608;case'contents':return 16777216;case'inline-block':return 33554432;case'inline-list-item':return 67108864;case'inline-table':return 134217728;case'inline-flex':return 268435456;case'inline-grid':return 536870912;}return 0;};var float={name:'float',initialValue:'none',prefix:false,type:2,parse:function(_context,float){switch(float){case'left':return 1;case'right':return 2;case'inline-start':return 3;case'inline-end':return 4;}return 0;}};var letterSpacing={name:'letter-spacing',initialValue:'0',prefix:false,type:0,
parse:function(_context,token){if(token.type===20&&token.value==='normal'){return 0;}if(token.type===17){return token.number;}if(token.type===15){return token.number;}return 0;}};var LINE_BREAK;(function(LINE_BREAK){LINE_BREAK["NORMAL"]="normal";LINE_BREAK["STRICT"]="strict";})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:'line-break',initialValue:'normal',prefix:false,type:2,parse:function(_context,lineBreak){switch(lineBreak){case'strict':return LINE_BREAK.STRICT;case'normal':default:return LINE_BREAK.NORMAL;}}};var lineHeight={name:'line-height',initialValue:'normal',prefix:false,type:4};var computeLineHeight=function(token,fontSize){if(isIdentToken(token)&&token.value==='normal'){return 1.2*fontSize;}else if(token.type===17){return fontSize*token.number;}else if(isLengthPercentage(token)){return getAbsoluteValue(token,fontSize);}return fontSize;};var listStyleImage={name:'list-style-image',initialValue:'none',type:0,prefix:false,parse:function(context,token){if(token.type===20&&token.value==='none'){
return null;}return image.parse(context,token);}};var listStylePosition={name:'list-style-position',initialValue:'outside',prefix:false,type:2,parse:function(_context,position){switch(position){case'inside':return 0;case'outside':default:return 1;}}};var listStyleType={name:'list-style-type',initialValue:'none',prefix:false,type:2,parse:function(_context,type){switch(type){case'disc':return 0;case'circle':return 1;case'square':return 2;case'decimal':return 3;case'cjk-decimal':return 4;case'decimal-leading-zero':return 5;case'lower-roman':return 6;case'upper-roman':return 7;case'lower-greek':return 8;case'lower-alpha':return 9;case'upper-alpha':return 10;case'arabic-indic':return 11;case'armenian':return 12;case'bengali':return 13;case'cambodian':return 14;case'cjk-earthly-branch':return 15;case'cjk-heavenly-stem':return 16;case'cjk-ideographic':return 17;case'devanagari':return 18;case'ethiopic-numeric':return 19;case'georgian':return 20;case'gujarati':return 21;case'gurmukhi':return 22;
case'hebrew':return 22;case'hiragana':return 23;case'hiragana-iroha':return 24;case'japanese-formal':return 25;case'japanese-informal':return 26;case'kannada':return 27;case'katakana':return 28;case'katakana-iroha':return 29;case'khmer':return 30;case'korean-hangul-formal':return 31;case'korean-hanja-formal':return 32;case'korean-hanja-informal':return 33;case'lao':return 34;case'lower-armenian':return 35;case'malayalam':return 36;case'mongolian':return 37;case'myanmar':return 38;case'oriya':return 39;case'persian':return 40;case'simp-chinese-formal':return 41;case'simp-chinese-informal':return 42;case'tamil':return 43;case'telugu':return 44;case'thai':return 45;case'tibetan':return 46;case'trad-chinese-formal':return 47;case'trad-chinese-informal':return 48;case'upper-armenian':return 49;case'disclosure-open':return 50;case'disclosure-closed':return 51;case'none':default:return-1;}}};var marginForSide=function(side){return({name:"margin-"+side,initialValue:'0',prefix:false,type:4});};
var marginTop=marginForSide('top');var marginRight=marginForSide('right');var marginBottom=marginForSide('bottom');var marginLeft=marginForSide('left');var overflow={name:'overflow',initialValue:'visible',prefix:false,type:1,parse:function(_context,tokens){return tokens.filter(isIdentToken).map(function(overflow){switch(overflow.value){case'hidden':return 1;case'scroll':return 2;case'clip':return 3;case'auto':return 4;case'visible':default:return 0;}});}};var overflowWrap={name:'overflow-wrap',initialValue:'normal',prefix:false,type:2,parse:function(_context,overflow){switch(overflow){case'break-word':return"break-word";case'normal':default:return"normal";}}};var paddingForSide=function(side){return({name:"padding-"+side,initialValue:'0',prefix:false,type:3,format:'length-percentage'});};var paddingTop=paddingForSide('top');var paddingRight=paddingForSide('right');var paddingBottom=paddingForSide('bottom');var paddingLeft=paddingForSide('left');var textAlign={name:'text-align',
initialValue:'left',prefix:false,type:2,parse:function(_context,textAlign){switch(textAlign){case'right':return 2;case'center':case'justify':return 1;case'left':default:return 0;}}};var position={name:'position',initialValue:'static',prefix:false,type:2,parse:function(_context,position){switch(position){case'relative':return 1;case'absolute':return 2;case'fixed':return 3;case'sticky':return 4;}return 0;}};var textShadow={name:'text-shadow',initialValue:'none',type:1,prefix:false,parse:function(context,tokens){if(tokens.length===1&&isIdentWithValue(tokens[0],'none')){return[];}return parseFunctionArgs(tokens).map(function(values){var shadow={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH};var c=0;for(var i=0;i<values.length;i++){var token=values[i];if(isLength(token)){if(c===0){shadow.offsetX=token;}else if(c===1){shadow.offsetY=token;}else{shadow.blur=token;}c++;}else{shadow.color=color$1.parse(context,token);}}return shadow;});}};var textTransform={
name:'text-transform',initialValue:'none',prefix:false,type:2,parse:function(_context,textTransform){switch(textTransform){case'uppercase':return 2;case'lowercase':return 1;case'capitalize':return 3;}return 0;}};var transform$1={name:'transform',initialValue:'none',prefix:true,type:0,parse:function(_context,token){if(token.type===20&&token.value==='none'){return null;}if(token.type===18){var transformFunction=SUPPORTED_TRANSFORM_FUNCTIONS[token.name];if(typeof transformFunction==='undefined'){throw new Error("Attempting to parse an unsupported transform function \""+token.name+"\"");}return transformFunction(token.values);}return null;}};var matrix=function(args){var values=args.filter(function(arg){return arg.type===17;}).map(function(arg){return arg.number;});return values.length===6?values:null;};var matrix3d=function(args){var values=args.filter(function(arg){return arg.type===17;}).map(function(arg){return arg.number;});var a1=values[0],b1=values[1];values[2];values[3];var a2=values[4],b2=values[5];values[6];values[7];values[8];values[9];values[10];values[11];var a4=values[12],b4=values[13];values[14];values[15];
return values.length===16?[a1,b1,a2,b2,a4,b4]:null;};var SUPPORTED_TRANSFORM_FUNCTIONS={matrix:matrix,matrix3d:matrix3d};var DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER};var DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE];var transformOrigin={name:'transform-origin',initialValue:'50% 50%',prefix:true,type:1,parse:function(_context,tokens){var origins=tokens.filter(isLengthPercentage);if(origins.length!==2){return DEFAULT;}return[origins[0],origins[1]];}};var visibility={name:'visible',initialValue:'none',prefix:false,type:2,parse:function(_context,visibility){switch(visibility){case'hidden':return 1;case'collapse':return 2;case'visible':default:return 0;}}};var WORD_BREAK;(function(WORD_BREAK){WORD_BREAK["NORMAL"]="normal";WORD_BREAK["BREAK_ALL"]="break-all";WORD_BREAK["KEEP_ALL"]="keep-all";})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:'word-break',initialValue:'normal',prefix:false,type:2,parse:function(_context,wordBreak){switch(wordBreak){case'break-all':return WORD_BREAK.BREAK_ALL;
case'keep-all':return WORD_BREAK.KEEP_ALL;case'normal':default:return WORD_BREAK.NORMAL;}}};var zIndex={name:'z-index',initialValue:'auto',prefix:false,type:0,parse:function(_context,token){if(token.type===20){return{auto:true,order:0};}if(isNumberToken(token)){return{auto:false,order:token.number};}throw new Error("Invalid z-index number parsed");}};var time={name:'time',parse:function(_context,value){if(value.type===15){switch(value.unit.toLowerCase()){case's':return 1000*value.number;case'ms':return value.number;}}throw new Error("Unsupported time type");}};var opacity={name:'opacity',initialValue:'1',type:0,prefix:false,parse:function(_context,token){if(isNumberToken(token)){return token.number;}return 1;}};var textDecorationColor={name:"text-decoration-color",initialValue:'transparent',prefix:false,type:3,format:'color'};var textDecorationLine={name:'text-decoration-line',initialValue:'none',prefix:false,type:1,parse:function(_context,tokens){return tokens.filter(isIdentToken).map(function(token){
switch(token.value){case'underline':return 1;case'overline':return 2;case'line-through':return 3;case'none':return 4;}return 0;}).filter(function(line){return line!==0;});}};var fontFamily={name:"font-family",initialValue:'',prefix:false,type:1,parse:function(_context,tokens){var accumulator=[];var results=[];tokens.forEach(function(token){switch(token.type){case 20:case 0:accumulator.push(token.value);break;case 17:accumulator.push(token.number.toString());break;case 4:results.push(accumulator.join(' '));accumulator.length=0;break;}});if(accumulator.length){results.push(accumulator.join(' '));}return results.map(function(result){return(result.indexOf(' ')===-1?result:"'"+result+"'");});}};var fontSize={name:"font-size",initialValue:'0',prefix:false,type:3,format:'length'};var fontWeight={name:'font-weight',initialValue:'normal',type:0,prefix:false,parse:function(_context,token){if(isNumberToken(token)){return token.number;}if(isIdentToken(token)){switch(token.value){case'bold':return 700;
case'normal':default:return 400;}}return 400;}};var fontVariant={name:'font-variant',initialValue:'none',type:1,prefix:false,parse:function(_context,tokens){return tokens.filter(isIdentToken).map(function(token){return token.value;});}};var fontStyle={name:'font-style',initialValue:'normal',prefix:false,type:2,parse:function(_context,overflow){switch(overflow){case'oblique':return"oblique";case'italic':return"italic";case'normal':default:return"normal";}}};var contains=function(bit,value){return(bit&value)!==0;};var content={name:'content',initialValue:'none',type:1,prefix:false,parse:function(_context,tokens){if(tokens.length===0){return[];}var first=tokens[0];if(first.type===20&&first.value==='none'){return[];}return tokens;}};var counterIncrement={name:'counter-increment',initialValue:'none',prefix:true,type:1,parse:function(_context,tokens){if(tokens.length===0){return null;}var first=tokens[0];if(first.type===20&&first.value==='none'){return null;}var increments=[];var filtered=tokens.filter(nonWhiteSpace);
for(var i=0;i<filtered.length;i++){var counter=filtered[i];var next=filtered[i+1];if(counter.type===20){var increment=next&&isNumberToken(next)?next.number:1;increments.push({counter:counter.value,increment:increment});}}return increments;}};var counterReset={name:'counter-reset',initialValue:'none',prefix:true,type:1,parse:function(_context,tokens){if(tokens.length===0){return[];}var resets=[];var filtered=tokens.filter(nonWhiteSpace);for(var i=0;i<filtered.length;i++){var counter=filtered[i];var next=filtered[i+1];if(isIdentToken(counter)&&counter.value!=='none'){var reset=next&&isNumberToken(next)?next.number:0;resets.push({counter:counter.value,reset:reset});}}return resets;}};var duration={name:'duration',initialValue:'0s',prefix:false,type:1,parse:function(context,tokens){return tokens.filter(isDimensionToken).map(function(token){return time.parse(context,token);});}};var quotes={name:'quotes',initialValue:'none',prefix:true,type:1,parse:function(_context,tokens){if(tokens.length===0){
return null;}var first=tokens[0];if(first.type===20&&first.value==='none'){return null;}var quotes=[];var filtered=tokens.filter(isStringToken);if(filtered.length%2!==0){return null;}for(var i=0;i<filtered.length;i+=2){var open_1=filtered[i].value;var close_1=filtered[i+1].value;quotes.push({open:open_1,close:close_1});}return quotes;}};var getQuote=function(quotes,depth,open){if(!quotes){return'';}var quote=quotes[Math.min(depth,quotes.length-1)];if(!quote){return'';}return open?quote.open:quote.close;};var boxShadow={name:'box-shadow',initialValue:'none',type:1,prefix:false,parse:function(context,tokens){if(tokens.length===1&&isIdentWithValue(tokens[0],'none')){return[];}return parseFunctionArgs(tokens).map(function(values){var shadow={color:0x000000ff,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:false};var c=0;for(var i=0;i<values.length;i++){var token=values[i];if(isIdentWithValue(token,'inset')){shadow.inset=true;}else if(isLength(token)){if(c===0){
shadow.offsetX=token;}else if(c===1){shadow.offsetY=token;}else if(c===2){shadow.blur=token;}else{shadow.spread=token;}c++;}else{shadow.color=color$1.parse(context,token);}}return shadow;});}};var paintOrder={name:'paint-order',initialValue:'normal',prefix:false,type:1,parse:function(_context,tokens){var DEFAULT_VALUE=[0,1,2];var layers=[];tokens.filter(isIdentToken).forEach(function(token){switch(token.value){case'stroke':layers.push(1);break;case'fill':layers.push(0);break;case'markers':layers.push(2);break;}});DEFAULT_VALUE.forEach(function(value){if(layers.indexOf(value)===-1){layers.push(value);}});return layers;}};var webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:'currentcolor',prefix:false,type:3,format:'color'};var webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:'0',type:0,prefix:false,parse:function(_context,token){if(isDimensionToken(token)){return token.number;}return 0;}};var CSSParsedDeclaration=(function(){function CSSParsedDeclaration(context,declaration){
var _a,_b;this.animationDuration=parse(context,duration,declaration.animationDuration);this.backgroundClip=parse(context,backgroundClip,declaration.backgroundClip);this.backgroundColor=parse(context,backgroundColor,declaration.backgroundColor);this.backgroundImage=parse(context,backgroundImage,declaration.backgroundImage);this.backgroundOrigin=parse(context,backgroundOrigin,declaration.backgroundOrigin);this.backgroundPosition=parse(context,backgroundPosition,declaration.backgroundPosition);this.backgroundRepeat=parse(context,backgroundRepeat,declaration.backgroundRepeat);this.backgroundSize=parse(context,backgroundSize,declaration.backgroundSize);this.borderTopColor=parse(context,borderTopColor,declaration.borderTopColor);this.borderRightColor=parse(context,borderRightColor,declaration.borderRightColor);this.borderBottomColor=parse(context,borderBottomColor,declaration.borderBottomColor);this.borderLeftColor=parse(context,borderLeftColor,declaration.borderLeftColor);this.borderTopLeftRadius=parse(context,borderTopLeftRadius,declaration.borderTopLeftRadius);
this.borderTopRightRadius=parse(context,borderTopRightRadius,declaration.borderTopRightRadius);this.borderBottomRightRadius=parse(context,borderBottomRightRadius,declaration.borderBottomRightRadius);this.borderBottomLeftRadius=parse(context,borderBottomLeftRadius,declaration.borderBottomLeftRadius);this.borderTopStyle=parse(context,borderTopStyle,declaration.borderTopStyle);this.borderRightStyle=parse(context,borderRightStyle,declaration.borderRightStyle);this.borderBottomStyle=parse(context,borderBottomStyle,declaration.borderBottomStyle);this.borderLeftStyle=parse(context,borderLeftStyle,declaration.borderLeftStyle);this.borderTopWidth=parse(context,borderTopWidth,declaration.borderTopWidth);this.borderRightWidth=parse(context,borderRightWidth,declaration.borderRightWidth);this.borderBottomWidth=parse(context,borderBottomWidth,declaration.borderBottomWidth);this.borderLeftWidth=parse(context,borderLeftWidth,declaration.borderLeftWidth);this.boxShadow=parse(context,boxShadow,declaration.boxShadow);
this.color=parse(context,color,declaration.color);this.direction=parse(context,direction,declaration.direction);this.display=parse(context,display,declaration.display);this.float=parse(context,float,declaration.cssFloat);this.fontFamily=parse(context,fontFamily,declaration.fontFamily);this.fontSize=parse(context,fontSize,declaration.fontSize);this.fontStyle=parse(context,fontStyle,declaration.fontStyle);this.fontVariant=parse(context,fontVariant,declaration.fontVariant);this.fontWeight=parse(context,fontWeight,declaration.fontWeight);this.letterSpacing=parse(context,letterSpacing,declaration.letterSpacing);this.lineBreak=parse(context,lineBreak,declaration.lineBreak);this.lineHeight=parse(context,lineHeight,declaration.lineHeight);this.listStyleImage=parse(context,listStyleImage,declaration.listStyleImage);this.listStylePosition=parse(context,listStylePosition,declaration.listStylePosition);this.listStyleType=parse(context,listStyleType,declaration.listStyleType);this.marginTop=parse(context,marginTop,declaration.marginTop);
this.marginRight=parse(context,marginRight,declaration.marginRight);this.marginBottom=parse(context,marginBottom,declaration.marginBottom);this.marginLeft=parse(context,marginLeft,declaration.marginLeft);this.opacity=parse(context,opacity,declaration.opacity);var overflowTuple=parse(context,overflow,declaration.overflow);this.overflowX=overflowTuple[0];this.overflowY=overflowTuple[overflowTuple.length>1?1:0];this.overflowWrap=parse(context,overflowWrap,declaration.overflowWrap);this.paddingTop=parse(context,paddingTop,declaration.paddingTop);this.paddingRight=parse(context,paddingRight,declaration.paddingRight);this.paddingBottom=parse(context,paddingBottom,declaration.paddingBottom);this.paddingLeft=parse(context,paddingLeft,declaration.paddingLeft);this.paintOrder=parse(context,paintOrder,declaration.paintOrder);this.position=parse(context,position,declaration.position);this.textAlign=parse(context,textAlign,declaration.textAlign);this.textDecorationColor=parse(context,textDecorationColor,(_a=declaration.textDecorationColor)!==null&&_a!==void 0?_a:declaration.color);
this.textDecorationLine=parse(context,textDecorationLine,(_b=declaration.textDecorationLine)!==null&&_b!==void 0?_b:declaration.textDecoration);this.textShadow=parse(context,textShadow,declaration.textShadow);this.textTransform=parse(context,textTransform,declaration.textTransform);this.transform=parse(context,transform$1,declaration.transform);this.transformOrigin=parse(context,transformOrigin,declaration.transformOrigin);this.visibility=parse(context,visibility,declaration.visibility);this.webkitTextStrokeColor=parse(context,webkitTextStrokeColor,declaration.webkitTextStrokeColor);this.webkitTextStrokeWidth=parse(context,webkitTextStrokeWidth,declaration.webkitTextStrokeWidth);this.wordBreak=parse(context,wordBreak,declaration.wordBreak);this.zIndex=parse(context,zIndex,declaration.zIndex);}CSSParsedDeclaration.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0;};CSSParsedDeclaration.prototype.isTransparent=function(){return isTransparent(this.backgroundColor);
};CSSParsedDeclaration.prototype.isTransformed=function(){return this.transform!==null;};CSSParsedDeclaration.prototype.isPositioned=function(){return this.position!==0;};CSSParsedDeclaration.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto;};CSSParsedDeclaration.prototype.isFloating=function(){return this.float!==0;};CSSParsedDeclaration.prototype.isInlineLevel=function(){return(contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728));};return CSSParsedDeclaration;}());var CSSParsedPseudoDeclaration=(function(){function CSSParsedPseudoDeclaration(context,declaration){this.content=parse(context,content,declaration.content);this.quotes=parse(context,quotes,declaration.quotes);}return CSSParsedPseudoDeclaration;}());var CSSParsedCounterDeclaration=(function(){function CSSParsedCounterDeclaration(context,declaration){
this.counterIncrement=parse(context,counterIncrement,declaration.counterIncrement);this.counterReset=parse(context,counterReset,declaration.counterReset);}return CSSParsedCounterDeclaration;}());var parse=function(context,descriptor,style){var tokenizer=new Tokenizer();var value=style!==null&&typeof style!=='undefined'?style.toString():descriptor.initialValue;tokenizer.write(value);var parser=new Parser(tokenizer.read());switch(descriptor.type){case 2:var token=parser.parseComponentValue();return descriptor.parse(context,isIdentToken(token)?token.value:descriptor.initialValue);case 0:return descriptor.parse(context,parser.parseComponentValue());case 1:return descriptor.parse(context,parser.parseComponentValues());case 4:return parser.parseComponentValue();case 3:switch(descriptor.format){case'angle':return angle.parse(context,parser.parseComponentValue());case'color':return color$1.parse(context,parser.parseComponentValue());case'image':return image.parse(context,parser.parseComponentValue());
case'length':var length_1=parser.parseComponentValue();return isLength(length_1)?length_1:ZERO_LENGTH;case'length-percentage':var value_1=parser.parseComponentValue();return isLengthPercentage(value_1)?value_1:ZERO_LENGTH;case'time':return time.parse(context,parser.parseComponentValue());}break;}};var elementDebuggerAttribute='data-html2canvas-debug';var getElementDebugType=function(element){var attribute=element.getAttribute(elementDebuggerAttribute);switch(attribute){case'all':return 1;case'clone':return 2;case'parse':return 3;case'render':return 4;default:return 0;}};var isDebugging=function(element,type){var elementType=getElementDebugType(element);return elementType===1||type===elementType;};var ElementContainer=(function(){function ElementContainer(context,element){this.context=context;this.textNodes=[];this.elements=[];this.flags=0;if(isDebugging(element,3)){debugger;}this.styles=new CSSParsedDeclaration(context,window.getComputedStyle(element,null));if(isHTMLElementNode(element)){
if(this.styles.animationDuration.some(function(duration){return duration>0;})){element.style.animationDuration='0s';}if(this.styles.transform!==null){element.style.transform='none';}}this.bounds=parseBounds(this.context,element);if(isDebugging(element,4)){this.flags|=16;}}return ElementContainer;}());var base64='AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=';
var chars$1='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';var lookup$1=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++){lookup$1[chars$1.charCodeAt(i$1)]=i$1;}var decode=function(base64){var bufferLength=base64.length*0.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==='='){bufferLength--;if(base64[base64.length-2]==='='){bufferLength--;}}var buffer=typeof ArrayBuffer!=='undefined'&&typeof Uint8Array!=='undefined'&&typeof Uint8Array.prototype.slice!=='undefined'?new ArrayBuffer(bufferLength):new Array(bufferLength);var bytes=Array.isArray(buffer)?buffer:new Uint8Array(buffer);for(i=0;i<len;i+=4){encoded1=lookup$1[base64.charCodeAt(i)];encoded2=lookup$1[base64.charCodeAt(i+1)];encoded3=lookup$1[base64.charCodeAt(i+2)];encoded4=lookup$1[base64.charCodeAt(i+3)];bytes[p++]=(encoded1<<2)|(encoded2>>4);bytes[p++]=((encoded2&15)<<4)|(encoded3>>2);bytes[p++]=((encoded3&3)<<6)|(encoded4&63);
}return buffer;};var polyUint16Array=function(buffer){var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=2){bytes.push((buffer[i+1]<<8)|buffer[i]);}return bytes;};var polyUint32Array=function(buffer){var length=buffer.length;var bytes=[];for(var i=0;i<length;i+=4){bytes.push((buffer[i+3]<<24)|(buffer[i+2]<<16)|(buffer[i+1]<<8)|buffer[i]);}return bytes;};var UTRIE2_SHIFT_2=5;var UTRIE2_SHIFT_1=6+5;var UTRIE2_INDEX_SHIFT=2;var UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2;var UTRIE2_LSCP_INDEX_2_OFFSET=0x10000>>UTRIE2_SHIFT_2;var UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2;var UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1;var UTRIE2_LSCP_INDEX_2_LENGTH=0x400>>UTRIE2_SHIFT_2;var UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH;var UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH;var UTRIE2_UTF8_2B_INDEX_2_LENGTH=0x800>>6;var UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH;var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=0x10000>>UTRIE2_SHIFT_1;
var UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2;var UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1;var slice16=function(view,start,end){if(view.slice){return view.slice(start,end);}return new Uint16Array(Array.prototype.slice.call(view,start,end));};var slice32=function(view,start,end){if(view.slice){return view.slice(start,end);}return new Uint32Array(Array.prototype.slice.call(view,start,end));};var createTrieFromBase64=function(base64,_byteLength){var buffer=decode(base64);var view32=Array.isArray(buffer)?polyUint32Array(buffer):new Uint32Array(buffer);var view16=Array.isArray(buffer)?polyUint16Array(buffer):new Uint16Array(buffer);var headerLength=24;var index=slice16(view16,headerLength/2,view32[4]/2);var data=view32[5]===2?slice16(view16,(headerLength+view32[4])/2):slice32(view32,Math.ceil((headerLength+view32[4])/4));return new Trie(view32[0],view32[1],view32[2],view32[3],index,data);};var Trie=(function(){function Trie(initialValue,errorValue,highStart,highValueIndex,index,data){
this.initialValue=initialValue;this.errorValue=errorValue;this.highStart=highStart;this.highValueIndex=highValueIndex;this.index=index;this.data=data;}Trie.prototype.get=function(codePoint){var ix;if(codePoint>=0){if(codePoint<0x0d800||(codePoint>0x0dbff&&codePoint<=0x0ffff)){ix=this.index[codePoint>>UTRIE2_SHIFT_2];ix=(ix<<UTRIE2_INDEX_SHIFT)+(codePoint&UTRIE2_DATA_MASK);return this.data[ix];}if(codePoint<=0xffff){ix=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+((codePoint-0xd800)>>UTRIE2_SHIFT_2)];ix=(ix<<UTRIE2_INDEX_SHIFT)+(codePoint&UTRIE2_DATA_MASK);return this.data[ix];}if(codePoint<this.highStart){ix=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(codePoint>>UTRIE2_SHIFT_1);ix=this.index[ix];ix+=(codePoint>>UTRIE2_SHIFT_2)&UTRIE2_INDEX_2_MASK;ix=this.index[ix];ix=(ix<<UTRIE2_INDEX_SHIFT)+(codePoint&UTRIE2_DATA_MASK);return this.data[ix];}if(codePoint<=0x10ffff){return this.data[this.highValueIndex];}}return this.errorValue;};return Trie;}());var chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
var lookup=typeof Uint8Array==='undefined'?[]:new Uint8Array(256);for(var i=0;i<chars.length;i++){lookup[chars.charCodeAt(i)]=i;}var Prepend=1;var CR=2;var LF=3;var Control=4;var Extend=5;var SpacingMark=7;var L=8;var V=9;var T=10;var LV=11;var LVT=12;var ZWJ=13;var Extended_Pictographic=14;var RI=15;var toCodePoints=function(str){var codePoints=[];var i=0;var length=str.length;while(i<length){var value=str.charCodeAt(i++);if(value>=0xd800&&value<=0xdbff&&i<length){var extra=str.charCodeAt(i++);if((extra&0xfc00)===0xdc00){codePoints.push(((value&0x3ff)<<10)+(extra&0x3ff)+0x10000);}else{codePoints.push(value);i--;}}else{codePoints.push(value);}}return codePoints;};var fromCodePoint=function(){var codePoints=[];for(var _i=0;_i<arguments.length;_i++){codePoints[_i]=arguments[_i];}if(String.fromCodePoint){return String.fromCodePoint.apply(String,codePoints);}var length=codePoints.length;if(!length){return'';}var codeUnits=[];var index=-1;var result='';while(++index<length){var codePoint=codePoints[index];
if(codePoint<=0xffff){codeUnits.push(codePoint);}else{codePoint-=0x10000;codeUnits.push((codePoint>>10)+0xd800,(codePoint%0x400)+0xdc00);}if(index+1===length||codeUnits.length>0x4000){result+=String.fromCharCode.apply(String,codeUnits);codeUnits.length=0;}}return result;};var UnicodeTrie=createTrieFromBase64(base64);var BREAK_NOT_ALLOWED='';var BREAK_ALLOWED='';var codePointToClass=function(codePoint){return UnicodeTrie.get(codePoint);};var _graphemeBreakAtIndex=function(_codePoints,classTypes,index){var prevIndex=index-2;var prev=classTypes[prevIndex];var current=classTypes[index-1];var next=classTypes[index];if(current===CR&&next===LF){return BREAK_NOT_ALLOWED;}if(current===CR||current===LF||current===Control){return BREAK_ALLOWED;}if(next===CR||next===LF||next===Control){return BREAK_ALLOWED;}if(current===L&&[L,V,LV,LVT].indexOf(next)!==-1){return BREAK_NOT_ALLOWED;}if((current===LV||current===V)&&(next===V||next===T)){return BREAK_NOT_ALLOWED;}if((current===LVT||current===T)&&next===T){
return BREAK_NOT_ALLOWED;}if(next===ZWJ||next===Extend){return BREAK_NOT_ALLOWED;}if(next===SpacingMark){return BREAK_NOT_ALLOWED;}if(current===Prepend){return BREAK_NOT_ALLOWED;}if(current===ZWJ&&next===Extended_Pictographic){while(prev===Extend){prev=classTypes[--prevIndex];}if(prev===Extended_Pictographic){return BREAK_NOT_ALLOWED;}}if(current===RI&&next===RI){var countRI=0;while(prev===RI){countRI++;prev=classTypes[--prevIndex];}if(countRI%2===0){return BREAK_NOT_ALLOWED;}}return BREAK_ALLOWED;};var GraphemeBreaker=function(str){var codePoints=toCodePoints(str);var length=codePoints.length;var index=0;var lastEnd=0;var classTypes=codePoints.map(codePointToClass);return{next:function(){if(index>=length){return{done:true,value:null};}var graphemeBreak=BREAK_NOT_ALLOWED;while(index<length&&(graphemeBreak=_graphemeBreakAtIndex(codePoints,classTypes,++index))===BREAK_NOT_ALLOWED){}if(graphemeBreak!==BREAK_NOT_ALLOWED||index===length){var value=fromCodePoint.apply(null,codePoints.slice(lastEnd,index));
lastEnd=index;return{value:value,done:false};}return{done:true,value:null};},};};var splitGraphemes=function(str){var breaker=GraphemeBreaker(str);var graphemes=[];var bk;while(!(bk=breaker.next()).done){if(bk.value){graphemes.push(bk.value.slice());}}return graphemes;};var testRangeBounds=function(document){var TEST_HEIGHT=123;if(document.createRange){var range=document.createRange();if(range.getBoundingClientRect){var testElement=document.createElement('boundtest');testElement.style.height=TEST_HEIGHT+"px";testElement.style.display='block';document.body.appendChild(testElement);range.selectNode(testElement);var rangeBounds=range.getBoundingClientRect();var rangeHeight=Math.round(rangeBounds.height);document.body.removeChild(testElement);if(rangeHeight===TEST_HEIGHT){return true;}}}return false;};var testIOSLineBreak=function(document){var testElement=document.createElement('boundtest');testElement.style.width='50px';testElement.style.display='block';testElement.style.fontSize='12px';
testElement.style.letterSpacing='0px';testElement.style.wordSpacing='0px';document.body.appendChild(testElement);var range=document.createRange();testElement.innerHTML=typeof''.repeat==='function'?'&#128104;'.repeat(10):'';var node=testElement.firstChild;var textList=toCodePoints$1(node.data).map(function(i){return fromCodePoint$1(i);});var offset=0;var prev={};var supports=textList.every(function(text,i){range.setStart(node,offset);range.setEnd(node,offset+text.length);var rect=range.getBoundingClientRect();offset+=text.length;var boundAhead=rect.x>prev.x||rect.y>prev.y;prev=rect;if(i===0){return true;}return boundAhead;});document.body.removeChild(testElement);return supports;};var testCORS=function(){return typeof new Image().crossOrigin!=='undefined';};var testResponseType=function(){return typeof new XMLHttpRequest().responseType==='string';};var testSVG=function(document){var img=new Image();var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');if(!ctx){
return false;}img.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{ctx.drawImage(img,0,0);canvas.toDataURL();}catch(e){return false;}return true;};var isGreenPixel=function(data){return data[0]===0&&data[1]===255&&data[2]===0&&data[3]===255;};var testForeignObject=function(document){var canvas=document.createElement('canvas');var size=100;canvas.width=size;canvas.height=size;var ctx=canvas.getContext('2d');if(!ctx){return Promise.reject(false);}ctx.fillStyle='rgb(0, 255, 0)';ctx.fillRect(0,0,size,size);var img=new Image();var greenImageSrc=canvas.toDataURL();img.src=greenImageSrc;var svg=createForeignObjectSVG(size,size,0,0,img);ctx.fillStyle='red';ctx.fillRect(0,0,size,size);return loadSerializedSVG$1(svg).then(function(img){ctx.drawImage(img,0,0);var data=ctx.getImageData(0,0,size,size).data;ctx.fillStyle='red';ctx.fillRect(0,0,size,size);var node=document.createElement('div');node.style.backgroundImage="url("+greenImageSrc+")";node.style.height=size+"px";
return isGreenPixel(data)?loadSerializedSVG$1(createForeignObjectSVG(size,size,0,0,node)):Promise.reject(false);}).then(function(img){ctx.drawImage(img,0,0);return isGreenPixel(ctx.getImageData(0,0,size,size).data);}).catch(function(){return false;});};var createForeignObjectSVG=function(width,height,x,y,node){var xmlns='http://www.w3.org/2000/svg';var svg=document.createElementNS(xmlns,'svg');var foreignObject=document.createElementNS(xmlns,'foreignObject');svg.setAttributeNS(null,'width',width.toString());svg.setAttributeNS(null,'height',height.toString());foreignObject.setAttributeNS(null,'width','100%');foreignObject.setAttributeNS(null,'height','100%');foreignObject.setAttributeNS(null,'x',x.toString());foreignObject.setAttributeNS(null,'y',y.toString());foreignObject.setAttributeNS(null,'externalResourcesRequired','true');svg.appendChild(foreignObject);foreignObject.appendChild(node);return svg;};var loadSerializedSVG$1=function(svg){return new Promise(function(resolve,reject){
var img=new Image();img.onload=function(){return resolve(img);};img.onerror=reject;img.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(svg));});};var FEATURES={get SUPPORT_RANGE_BOUNDS(){var value=testRangeBounds(document);Object.defineProperty(FEATURES,'SUPPORT_RANGE_BOUNDS',{value:value});return value;},get SUPPORT_WORD_BREAKING(){var value=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);Object.defineProperty(FEATURES,'SUPPORT_WORD_BREAKING',{value:value});return value;},get SUPPORT_SVG_DRAWING(){var value=testSVG(document);Object.defineProperty(FEATURES,'SUPPORT_SVG_DRAWING',{value:value});return value;},get SUPPORT_FOREIGNOBJECT_DRAWING(){var value=typeof Array.from==='function'&&typeof window.fetch==='function'?testForeignObject(document):Promise.resolve(false);Object.defineProperty(FEATURES,'SUPPORT_FOREIGNOBJECT_DRAWING',{value:value});return value;},get SUPPORT_CORS_IMAGES(){var value=testCORS();Object.defineProperty(FEATURES,'SUPPORT_CORS_IMAGES',{value:value});
return value;},get SUPPORT_RESPONSE_TYPE(){var value=testResponseType();Object.defineProperty(FEATURES,'SUPPORT_RESPONSE_TYPE',{value:value});return value;},get SUPPORT_CORS_XHR(){var value='withCredentials'in new XMLHttpRequest();Object.defineProperty(FEATURES,'SUPPORT_CORS_XHR',{value:value});return value;},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var value=!!(typeof Intl!=='undefined'&&Intl.Segmenter);Object.defineProperty(FEATURES,'SUPPORT_NATIVE_TEXT_SEGMENTATION',{value:value});return value;}};var TextBounds=(function(){function TextBounds(text,bounds){this.text=text;this.bounds=bounds;}return TextBounds;}());var parseTextBounds=function(context,value,styles,node){var textList=breakText(value,styles);var textBounds=[];var offset=0;textList.forEach(function(text){if(styles.textDecorationLine.length||text.trim().length>0){if(FEATURES.SUPPORT_RANGE_BOUNDS){var clientRects=createRange(node,offset,text.length).getClientRects();if(clientRects.length>1){var subSegments=segmentGraphemes(text);
var subOffset_1=0;subSegments.forEach(function(subSegment){textBounds.push(new TextBounds(subSegment,Bounds.fromDOMRectList(context,createRange(node,subOffset_1+offset,subSegment.length).getClientRects())));subOffset_1+=subSegment.length;});}else{textBounds.push(new TextBounds(text,Bounds.fromDOMRectList(context,clientRects)));}}else{var replacementNode=node.splitText(text.length);textBounds.push(new TextBounds(text,getWrapperBounds(context,node)));node=replacementNode;}}else if(!FEATURES.SUPPORT_RANGE_BOUNDS){node=node.splitText(text.length);}offset+=text.length;});return textBounds;};var getWrapperBounds=function(context,node){var ownerDocument=node.ownerDocument;if(ownerDocument){var wrapper=ownerDocument.createElement('html2canvaswrapper');wrapper.appendChild(node.cloneNode(true));var parentNode=node.parentNode;if(parentNode){parentNode.replaceChild(wrapper,node);var bounds=parseBounds(context,wrapper);if(wrapper.firstChild){parentNode.replaceChild(wrapper.firstChild,wrapper);}
return bounds;}}return Bounds.EMPTY;};var createRange=function(node,offset,length){var ownerDocument=node.ownerDocument;if(!ownerDocument){throw new Error('Node has no owner document');}var range=ownerDocument.createRange();range.setStart(node,offset);range.setEnd(node,offset+length);return range;};var segmentGraphemes=function(value){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var segmenter=new Intl.Segmenter(void 0,{granularity:'grapheme'});return Array.from(segmenter.segment(value)).map(function(segment){return segment.segment;});}return splitGraphemes(value);};var segmentWords=function(value,styles){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var segmenter=new Intl.Segmenter(void 0,{granularity:'word'});return Array.from(segmenter.segment(value)).map(function(segment){return segment.segment;});}return breakWords(value,styles);};var breakText=function(value,styles){return styles.letterSpacing!==0?segmentGraphemes(value):segmentWords(value,styles);};var wordSeparators=[0x0020,0x00a0,0x1361,0x10100,0x10101,0x1039,0x1091];
var breakWords=function(str,styles){var breaker=LineBreaker(str,{lineBreak:styles.lineBreak,wordBreak:styles.overflowWrap==="break-word"?'break-word':styles.wordBreak});var words=[];var bk;var _loop_1=function(){if(bk.value){var value=bk.value.slice();var codePoints=toCodePoints$1(value);var word_1='';codePoints.forEach(function(codePoint){if(wordSeparators.indexOf(codePoint)===-1){word_1+=fromCodePoint$1(codePoint);}else{if(word_1.length){words.push(word_1);}words.push(fromCodePoint$1(codePoint));word_1='';}});if(word_1.length){words.push(word_1);}}};while(!(bk=breaker.next()).done){_loop_1();}return words;};var TextContainer=(function(){function TextContainer(context,node,styles){this.text=transform(node.data,styles.textTransform);this.textBounds=parseTextBounds(context,this.text,styles,node);}return TextContainer;}());var transform=function(text,transform){switch(transform){case 1:return text.toLowerCase();case 3:return text.replace(CAPITALIZE,capitalize);case 2:return text.toUpperCase();
default:return text;}};var CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g;var capitalize=function(m,p1,p2){if(m.length>0){return p1+p2.toUpperCase();}return m;};var ImageElementContainer=(function(_super){__extends(ImageElementContainer,_super);function ImageElementContainer(context,img){var _this=_super.call(this,context,img)||this;_this.src=img.currentSrc||img.src;_this.intrinsicWidth=img.naturalWidth;_this.intrinsicHeight=img.naturalHeight;_this.context.cache.addImage(_this.src);return _this;}return ImageElementContainer;}(ElementContainer));var CanvasElementContainer=(function(_super){__extends(CanvasElementContainer,_super);function CanvasElementContainer(context,canvas){var _this=_super.call(this,context,canvas)||this;_this.canvas=canvas;_this.intrinsicWidth=canvas.width;_this.intrinsicHeight=canvas.height;return _this;}return CanvasElementContainer;}(ElementContainer));var SVGElementContainer=(function(_super){__extends(SVGElementContainer,_super);function SVGElementContainer(context,img){
var _this=_super.call(this,context,img)||this;var s=new XMLSerializer();var bounds=parseBounds(context,img);img.setAttribute('width',bounds.width+"px");img.setAttribute('height',bounds.height+"px");_this.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(img));_this.intrinsicWidth=img.width.baseVal.value;_this.intrinsicHeight=img.height.baseVal.value;_this.context.cache.addImage(_this.svg);return _this;}return SVGElementContainer;}(ElementContainer));var LIElementContainer=(function(_super){__extends(LIElementContainer,_super);function LIElementContainer(context,element){var _this=_super.call(this,context,element)||this;_this.value=element.value;return _this;}return LIElementContainer;}(ElementContainer));var OLElementContainer=(function(_super){__extends(OLElementContainer,_super);function OLElementContainer(context,element){var _this=_super.call(this,context,element)||this;_this.start=element.start;_this.reversed=typeof element.reversed==='boolean'&&element.reversed===true;
return _this;}return OLElementContainer;}(ElementContainer));var CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:'px',number:3}];var RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}];var reformatInputBounds=function(bounds){if(bounds.width>bounds.height){return new Bounds(bounds.left+(bounds.width-bounds.height)/2,bounds.top,bounds.height,bounds.height);}else if(bounds.width<bounds.height){return new Bounds(bounds.left,bounds.top+(bounds.height-bounds.width)/2,bounds.width,bounds.width);}return bounds;};var getInputValue=function(node){var value=node.type===PASSWORD?new Array(node.value.length+1).join('\u2022'):node.value;return value.length===0?node.placeholder||'':value;};var CHECKBOX='checkbox';var RADIO='radio';var PASSWORD='password';var INPUT_COLOR=0x2a2a2aff;var InputElementContainer=(function(_super){__extends(InputElementContainer,_super);function InputElementContainer(context,input){var _this=_super.call(this,context,input)||this;_this.type=input.type.toLowerCase();_this.checked=input.checked;
_this.value=getInputValue(input);if(_this.type===CHECKBOX||_this.type===RADIO){_this.styles.backgroundColor=0xdededeff;_this.styles.borderTopColor=_this.styles.borderRightColor=_this.styles.borderBottomColor=_this.styles.borderLeftColor=0xa5a5a5ff;_this.styles.borderTopWidth=_this.styles.borderRightWidth=_this.styles.borderBottomWidth=_this.styles.borderLeftWidth=1;_this.styles.borderTopStyle=_this.styles.borderRightStyle=_this.styles.borderBottomStyle=_this.styles.borderLeftStyle=1;_this.styles.backgroundClip=[0];_this.styles.backgroundOrigin=[0];_this.bounds=reformatInputBounds(_this.bounds);}switch(_this.type){case CHECKBOX:_this.styles.borderTopRightRadius=_this.styles.borderTopLeftRadius=_this.styles.borderBottomRightRadius=_this.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:_this.styles.borderTopRightRadius=_this.styles.borderTopLeftRadius=_this.styles.borderBottomRightRadius=_this.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break;}return _this;}
return InputElementContainer;}(ElementContainer));var SelectElementContainer=(function(_super){__extends(SelectElementContainer,_super);function SelectElementContainer(context,element){var _this=_super.call(this,context,element)||this;var option=element.options[element.selectedIndex||0];_this.value=option?option.text||'':'';return _this;}return SelectElementContainer;}(ElementContainer));var TextareaElementContainer=(function(_super){__extends(TextareaElementContainer,_super);function TextareaElementContainer(context,element){var _this=_super.call(this,context,element)||this;_this.value=element.value;return _this;}return TextareaElementContainer;}(ElementContainer));var IFrameElementContainer=(function(_super){__extends(IFrameElementContainer,_super);function IFrameElementContainer(context,iframe){var _this=_super.call(this,context,iframe)||this;_this.src=iframe.src;_this.width=parseInt(iframe.width,10)||0;_this.height=parseInt(iframe.height,10)||0;_this.backgroundColor=_this.styles.backgroundColor;
try{if(iframe.contentWindow&&iframe.contentWindow.document&&iframe.contentWindow.document.documentElement){_this.tree=parseTree(context,iframe.contentWindow.document.documentElement);var documentBackgroundColor=iframe.contentWindow.document.documentElement?parseColor(context,getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT;var bodyBackgroundColor=iframe.contentWindow.document.body?parseColor(context,getComputedStyle(iframe.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;_this.backgroundColor=isTransparent(documentBackgroundColor)?isTransparent(bodyBackgroundColor)?_this.styles.backgroundColor:bodyBackgroundColor:documentBackgroundColor;}}catch(e){}return _this;}return IFrameElementContainer;}(ElementContainer));var LIST_OWNERS=['OL','UL','MENU'];var parseNodeTree=function(context,node,parent,root){for(var childNode=node.firstChild,nextNode=void 0;childNode;childNode=nextNode){nextNode=childNode.nextSibling;if(isTextNode(childNode)&&childNode.data.trim().length>0){
parent.textNodes.push(new TextContainer(context,childNode,parent.styles));}else if(isElementNode(childNode)){if(isSlotElement(childNode)&&childNode.assignedNodes){childNode.assignedNodes().forEach(function(childNode){return parseNodeTree(context,childNode,parent,root);});}else{var container=createContainer(context,childNode);if(container.styles.isVisible()){if(createsRealStackingContext(childNode,container,root)){container.flags|=4;}else if(createsStackingContext(container.styles)){container.flags|=2;}if(LIST_OWNERS.indexOf(childNode.tagName)!==-1){container.flags|=8;}parent.elements.push(container);childNode.slot;if(childNode.shadowRoot){parseNodeTree(context,childNode.shadowRoot,container,root);}else if(!isTextareaElement(childNode)&&!isSVGElement(childNode)&&!isSelectElement(childNode)){parseNodeTree(context,childNode,container,root);}}}}}};var createContainer=function(context,element){if(isImageElement(element)){return new ImageElementContainer(context,element);}if(isCanvasElement(element)){
return new CanvasElementContainer(context,element);}if(isSVGElement(element)){return new SVGElementContainer(context,element);}if(isLIElement(element)){return new LIElementContainer(context,element);}if(isOLElement(element)){return new OLElementContainer(context,element);}if(isInputElement(element)){return new InputElementContainer(context,element);}if(isSelectElement(element)){return new SelectElementContainer(context,element);}if(isTextareaElement(element)){return new TextareaElementContainer(context,element);}if(isIFrameElement(element)){return new IFrameElementContainer(context,element);}return new ElementContainer(context,element);};var parseTree=function(context,element){var container=createContainer(context,element);container.flags|=4;parseNodeTree(context,element,container,container);return container;};var createsRealStackingContext=function(node,container,root){return(container.styles.isPositionedWithZIndex()||container.styles.opacity<1||container.styles.isTransformed()||(isBodyElement(node)&&root.styles.isTransparent()));
};var createsStackingContext=function(styles){return styles.isPositioned()||styles.isFloating();};var isTextNode=function(node){return node.nodeType===Node.TEXT_NODE;};var isElementNode=function(node){return node.nodeType===Node.ELEMENT_NODE;};var isHTMLElementNode=function(node){return isElementNode(node)&&typeof node.style!=='undefined'&&!isSVGElementNode(node);};var isSVGElementNode=function(element){return typeof element.className==='object';};var isLIElement=function(node){return node.tagName==='LI';};var isOLElement=function(node){return node.tagName==='OL';};var isInputElement=function(node){return node.tagName==='INPUT';};var isHTMLElement=function(node){return node.tagName==='HTML';};var isSVGElement=function(node){return node.tagName==='svg';};var isBodyElement=function(node){return node.tagName==='BODY';};var isCanvasElement=function(node){return node.tagName==='CANVAS';};var isVideoElement=function(node){return node.tagName==='VIDEO';};var isImageElement=function(node){return node.tagName==='IMG';};
var isIFrameElement=function(node){return node.tagName==='IFRAME';};var isStyleElement=function(node){return node.tagName==='STYLE';};var isScriptElement=function(node){return node.tagName==='SCRIPT';};var isTextareaElement=function(node){return node.tagName==='TEXTAREA';};var isSelectElement=function(node){return node.tagName==='SELECT';};var isSlotElement=function(node){return node.tagName==='SLOT';};var isCustomElement=function(node){return node.tagName.indexOf('-')>0;};var CounterState=(function(){function CounterState(){this.counters={};}CounterState.prototype.getCounterValue=function(name){var counter=this.counters[name];if(counter&&counter.length){return counter[counter.length-1];}return 1;};CounterState.prototype.getCounterValues=function(name){var counter=this.counters[name];return counter?counter:[];};CounterState.prototype.pop=function(counters){var _this=this;counters.forEach(function(counter){return _this.counters[counter].pop();});};CounterState.prototype.parse=function(style){
var _this=this;var counterIncrement=style.counterIncrement;var counterReset=style.counterReset;var canReset=true;if(counterIncrement!==null){counterIncrement.forEach(function(entry){var counter=_this.counters[entry.counter];if(counter&&entry.increment!==0){canReset=false;if(!counter.length){counter.push(1);}counter[Math.max(0,counter.length-1)]+=entry.increment;}});}var counterNames=[];if(canReset){counterReset.forEach(function(entry){var counter=_this.counters[entry.counter];counterNames.push(entry.counter);if(!counter){counter=_this.counters[entry.counter]=[];}counter.push(entry.reset);});}return counterNames;};return CounterState;}());var ROMAN_UPPER={integers:[1000,900,500,400,100,90,50,40,10,9,5,4,1],values:['M','CM','D','CD','C','XC','L','XL','X','IX','V','IV','I']};var ARMENIAN={integers:[9000,8000,7000,6000,5000,4000,3000,2000,1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:['','','','','','','','','','','',
'','','','','','','','','','','','','','','','','','','','','','','','','']};var HEBREW={integers:[10000,9000,8000,7000,6000,5000,4000,3000,2000,1000,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','']};var GEORGIAN={integers:[10000,9000,8000,7000,6000,5000,4000,3000,2000,1000,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','']};var createAdditiveCounter=function(value,min,max,symbols,fallback,suffix){if(value<min||value>max){return createCounterText(value,fallback,suffix.length>0);
}return(symbols.integers.reduce(function(string,integer,index){while(value>=integer){value-=integer;string+=symbols.values[index];}return string;},'')+suffix);};var createCounterStyleWithSymbolResolver=function(value,codePointRangeLength,isNumeric,resolver){var string='';do{if(!isNumeric){value--;}string=resolver(value)+string;value/=codePointRangeLength;}while(value*codePointRangeLength>=codePointRangeLength);return string;};var createCounterStyleFromRange=function(value,codePointRangeStart,codePointRangeEnd,isNumeric,suffix){var codePointRangeLength=codePointRangeEnd-codePointRangeStart+1;return((value<0?'-':'')+(createCounterStyleWithSymbolResolver(Math.abs(value),codePointRangeLength,isNumeric,function(codePoint){return fromCodePoint$1(Math.floor(codePoint%codePointRangeLength)+codePointRangeStart);})+suffix));};var createCounterStyleFromSymbols=function(value,symbols,suffix){if(suffix===void 0){suffix='. ';}var codePointRangeLength=symbols.length;return(createCounterStyleWithSymbolResolver(Math.abs(value),codePointRangeLength,false,function(codePoint){return symbols[Math.floor(codePoint%codePointRangeLength)];})+suffix);
};var CJK_ZEROS=1<<0;var CJK_TEN_COEFFICIENTS=1<<1;var CJK_TEN_HIGH_COEFFICIENTS=1<<2;var CJK_HUNDRED_COEFFICIENTS=1<<3;var createCJKCounter=function(value,numbers,multipliers,negativeSign,suffix,flags){if(value<-9999||value>9999){return createCounterText(value,4,suffix.length>0);}var tmp=Math.abs(value);var string=suffix;if(tmp===0){return numbers[0]+string;}for(var digit=0;tmp>0&&digit<=4;digit++){var coefficient=tmp%10;if(coefficient===0&&contains(flags,CJK_ZEROS)&&string!==''){string=numbers[coefficient]+string;}else if(coefficient>1||(coefficient===1&&digit===0)||(coefficient===1&&digit===1&&contains(flags,CJK_TEN_COEFFICIENTS))||(coefficient===1&&digit===1&&contains(flags,CJK_TEN_HIGH_COEFFICIENTS)&&value>100)||(coefficient===1&&digit>1&&contains(flags,CJK_HUNDRED_COEFFICIENTS))){string=numbers[coefficient]+(digit>0?multipliers[digit-1]:'')+string;}else if(coefficient===1&&digit>0){string=multipliers[digit-1]+string;}tmp=Math.floor(tmp/10);}return(value<0?negativeSign:'')+string;
};var CHINESE_INFORMAL_MULTIPLIERS='';var CHINESE_FORMAL_MULTIPLIERS='';var JAPANESE_NEGATIVE='';var KOREAN_NEGATIVE='';var createCounterText=function(value,type,appendSuffix){var defaultSuffix=appendSuffix?'. ':'';var cjkSuffix=appendSuffix?'':'';var koreanSuffix=appendSuffix?', ':'';var spaceSuffix=appendSuffix?' ':'';switch(type){case 0:return''+spaceSuffix;case 1:return''+spaceSuffix;case 2:return''+spaceSuffix;case 5:var string=createCounterStyleFromRange(value,48,57,true,defaultSuffix);return string.length<4?"0"+string:string;case 4:return createCounterStyleFromSymbols(value,'',cjkSuffix);case 6:return createAdditiveCounter(value,1,3999,ROMAN_UPPER,3,defaultSuffix).toLowerCase();case 7:return createAdditiveCounter(value,1,3999,ROMAN_UPPER,3,defaultSuffix);case 8:return createCounterStyleFromRange(value,945,969,false,defaultSuffix);case 9:return createCounterStyleFromRange(value,97,122,false,defaultSuffix);
case 10:return createCounterStyleFromRange(value,65,90,false,defaultSuffix);case 11:return createCounterStyleFromRange(value,1632,1641,true,defaultSuffix);case 12:case 49:return createAdditiveCounter(value,1,9999,ARMENIAN,3,defaultSuffix);case 35:return createAdditiveCounter(value,1,9999,ARMENIAN,3,defaultSuffix).toLowerCase();case 13:return createCounterStyleFromRange(value,2534,2543,true,defaultSuffix);case 14:case 30:return createCounterStyleFromRange(value,6112,6121,true,defaultSuffix);case 15:return createCounterStyleFromSymbols(value,'',cjkSuffix);case 16:return createCounterStyleFromSymbols(value,'',cjkSuffix);case 17:case 48:return createCJKCounter(value,'',CHINESE_INFORMAL_MULTIPLIERS,'',cjkSuffix,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(value,'',CHINESE_FORMAL_MULTIPLIERS,'',cjkSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);
case 42:return createCJKCounter(value,'',CHINESE_INFORMAL_MULTIPLIERS,'',cjkSuffix,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(value,'',CHINESE_FORMAL_MULTIPLIERS,'',cjkSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(value,'','',JAPANESE_NEGATIVE,cjkSuffix,0);case 25:return createCJKCounter(value,'','',JAPANESE_NEGATIVE,cjkSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(value,'','',KOREAN_NEGATIVE,koreanSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(value,'','',KOREAN_NEGATIVE,koreanSuffix,0);case 32:return createCJKCounter(value,'','',KOREAN_NEGATIVE,koreanSuffix,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);
case 18:return createCounterStyleFromRange(value,0x966,0x96f,true,defaultSuffix);case 20:return createAdditiveCounter(value,1,19999,GEORGIAN,3,defaultSuffix);case 21:return createCounterStyleFromRange(value,0xae6,0xaef,true,defaultSuffix);case 22:return createCounterStyleFromRange(value,0xa66,0xa6f,true,defaultSuffix);case 22:return createAdditiveCounter(value,1,10999,HEBREW,3,defaultSuffix);case 23:return createCounterStyleFromSymbols(value,'');case 24:return createCounterStyleFromSymbols(value,'');case 27:return createCounterStyleFromRange(value,0xce6,0xcef,true,defaultSuffix);case 28:return createCounterStyleFromSymbols(value,'',cjkSuffix);
case 29:return createCounterStyleFromSymbols(value,'',cjkSuffix);case 34:return createCounterStyleFromRange(value,0xed0,0xed9,true,defaultSuffix);case 37:return createCounterStyleFromRange(value,0x1810,0x1819,true,defaultSuffix);case 38:return createCounterStyleFromRange(value,0x1040,0x1049,true,defaultSuffix);case 39:return createCounterStyleFromRange(value,0xb66,0xb6f,true,defaultSuffix);case 40:return createCounterStyleFromRange(value,0x6f0,0x6f9,true,defaultSuffix);case 43:return createCounterStyleFromRange(value,0xbe6,0xbef,true,defaultSuffix);case 44:return createCounterStyleFromRange(value,0xc66,0xc6f,true,defaultSuffix);case 45:return createCounterStyleFromRange(value,0xe50,0xe59,true,defaultSuffix);case 46:return createCounterStyleFromRange(value,0xf20,0xf29,true,defaultSuffix);case 3:default:return createCounterStyleFromRange(value,48,57,true,defaultSuffix);
}};var IGNORE_ATTRIBUTE='data-html2canvas-ignore';var DocumentCloner=(function(){function DocumentCloner(context,element,options){this.context=context;this.options=options;this.scrolledElements=[];this.referenceElement=element;this.counters=new CounterState();this.quoteDepth=0;if(!element.ownerDocument){throw new Error('Cloned element does not have an owner document');}this.documentElement=this.cloneNode(element.ownerDocument.documentElement,false);}DocumentCloner.prototype.toIFrame=function(ownerDocument,windowSize){var _this=this;var iframe=createIFrameContainer(ownerDocument,windowSize);if(!iframe.contentWindow){return Promise.reject("Unable to find iframe window");}var scrollX=ownerDocument.defaultView.pageXOffset;var scrollY=ownerDocument.defaultView.pageYOffset;var cloneWindow=iframe.contentWindow;var documentClone=cloneWindow.document;var iframeLoad=iframeLoader(iframe).then(function(){return __awaiter(_this,void 0,void 0,function(){var onclone,referenceElement;return __generator(this,function(_a){
switch(_a.label){case 0:this.scrolledElements.forEach(restoreNodeScroll);if(cloneWindow){cloneWindow.scrollTo(windowSize.left,windowSize.top);if(/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(cloneWindow.scrollY!==windowSize.top||cloneWindow.scrollX!==windowSize.left)){this.context.logger.warn('Unable to restore scroll position for cloned document');this.context.windowBounds=this.context.windowBounds.add(cloneWindow.scrollX-windowSize.left,cloneWindow.scrollY-windowSize.top,0,0);}}onclone=this.options.onclone;referenceElement=this.clonedReferenceElement;if(typeof referenceElement==='undefined'){return[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")];}if(!(documentClone.fonts&&documentClone.fonts.ready))return[3,2];return[4,documentClone.fonts.ready];case 1:_a.sent();_a.label=2;case 2:if(!/(AppleWebKit)/g.test(navigator.userAgent))return[3,4];return[4,imagesReady(documentClone)];case 3:_a.sent();_a.label=4;case 4:if(typeof onclone==='function'){
return[2,Promise.resolve().then(function(){return onclone(documentClone,referenceElement);}).then(function(){return iframe;})];}return[2,iframe];}});});});documentClone.open();documentClone.write(serializeDoctype(document.doctype)+"<html></html>");restoreOwnerScroll(this.referenceElement.ownerDocument,scrollX,scrollY);documentClone.replaceChild(documentClone.adoptNode(this.documentElement),documentClone.documentElement);documentClone.close();return iframeLoad;};DocumentCloner.prototype.createElementClone=function(node){if(isDebugging(node,2)){debugger;}if(isCanvasElement(node)){return this.createCanvasClone(node);}if(isVideoElement(node)){return this.createVideoClone(node);}if(isStyleElement(node)){return this.createStyleClone(node);}var clone=node.cloneNode(false);if(isImageElement(clone)){if(isImageElement(node)&&node.currentSrc&&node.currentSrc!==node.src){clone.src=node.currentSrc;clone.srcset='';}if(clone.loading==='lazy'){clone.loading='eager';}}if(isCustomElement(clone)){return this.createCustomElementClone(clone);
}return clone;};DocumentCloner.prototype.createCustomElementClone=function(node){var clone=document.createElement('html2canvascustomelement');copyCSSStyles(node.style,clone);return clone;};DocumentCloner.prototype.createStyleClone=function(node){try{var sheet=node.sheet;if(sheet&&sheet.cssRules){var css=[].slice.call(sheet.cssRules,0).reduce(function(css,rule){if(rule&&typeof rule.cssText==='string'){return css+rule.cssText;}return css;},'');var style=node.cloneNode(false);style.textContent=css;return style;}}catch(e){this.context.logger.error('Unable to access cssRules property',e);if(e.name!=='SecurityError'){throw e;}}return node.cloneNode(false);};DocumentCloner.prototype.createCanvasClone=function(canvas){var _a;if(this.options.inlineImages&&canvas.ownerDocument){var img=canvas.ownerDocument.createElement('img');try{img.src=canvas.toDataURL();return img;}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",canvas);}}var clonedCanvas=canvas.cloneNode(false);
try{clonedCanvas.width=canvas.width;clonedCanvas.height=canvas.height;var ctx=canvas.getContext('2d');var clonedCtx=clonedCanvas.getContext('2d');if(clonedCtx){if(!this.options.allowTaint&&ctx){clonedCtx.putImageData(ctx.getImageData(0,0,canvas.width,canvas.height),0,0);}else{var gl=(_a=canvas.getContext('webgl2'))!==null&&_a!==void 0?_a:canvas.getContext('webgl');if(gl){var attribs=gl.getContextAttributes();if((attribs===null||attribs===void 0?void 0:attribs.preserveDrawingBuffer)===false){this.context.logger.warn('Unable to clone WebGL context as it has preserveDrawingBuffer=false',canvas);}}clonedCtx.drawImage(canvas,0,0);}}return clonedCanvas;}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",canvas);}return clonedCanvas;};DocumentCloner.prototype.createVideoClone=function(video){var canvas=video.ownerDocument.createElement('canvas');canvas.width=video.offsetWidth;canvas.height=video.offsetHeight;var ctx=canvas.getContext('2d');try{if(ctx){ctx.drawImage(video,0,0,canvas.width,canvas.height);
if(!this.options.allowTaint){ctx.getImageData(0,0,canvas.width,canvas.height);}}return canvas;}catch(e){this.context.logger.info("Unable to clone video as it is tainted",video);}var blankCanvas=video.ownerDocument.createElement('canvas');blankCanvas.width=video.offsetWidth;blankCanvas.height=video.offsetHeight;return blankCanvas;};DocumentCloner.prototype.appendChildNode=function(clone,child,copyStyles){if(!isElementNode(child)||(!isScriptElement(child)&&!child.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!=='function'||!this.options.ignoreElements(child)))){if(!this.options.copyStyles||!isElementNode(child)||!isStyleElement(child)){clone.appendChild(this.cloneNode(child,copyStyles));}}};DocumentCloner.prototype.cloneChildNodes=function(node,clone,copyStyles){var _this=this;for(var child=node.shadowRoot?node.shadowRoot.firstChild:node.firstChild;child;child=child.nextSibling){if(isElementNode(child)&&isSlotElement(child)&&typeof child.assignedNodes==='function'){
var assignedNodes=child.assignedNodes();if(assignedNodes.length){assignedNodes.forEach(function(assignedNode){return _this.appendChildNode(clone,assignedNode,copyStyles);});}}else{this.appendChildNode(clone,child,copyStyles);}}};DocumentCloner.prototype.cloneNode=function(node,copyStyles){if(isTextNode(node)){return document.createTextNode(node.data);}if(!node.ownerDocument){return node.cloneNode(false);}var window=node.ownerDocument.defaultView;if(window&&isElementNode(node)&&(isHTMLElementNode(node)||isSVGElementNode(node))){var clone=this.createElementClone(node);clone.style.transitionProperty='none';var style=window.getComputedStyle(node);var styleBefore=window.getComputedStyle(node,':before');var styleAfter=window.getComputedStyle(node,':after');if(this.referenceElement===node&&isHTMLElementNode(clone)){this.clonedReferenceElement=clone;}if(isBodyElement(clone)){createPseudoHideStyles(clone);}var counters=this.counters.parse(new CSSParsedCounterDeclaration(this.context,style));var before=this.resolvePseudoContent(node,clone,styleBefore,PseudoElementType.BEFORE);
if(isCustomElement(node)){copyStyles=true;}if(!isVideoElement(node)){this.cloneChildNodes(node,clone,copyStyles);}if(before){clone.insertBefore(before,clone.firstChild);}var after=this.resolvePseudoContent(node,clone,styleAfter,PseudoElementType.AFTER);if(after){clone.appendChild(after);}this.counters.pop(counters);if((style&&(this.options.copyStyles||isSVGElementNode(node))&&!isIFrameElement(node))||copyStyles){copyCSSStyles(style,clone);}if(node.scrollTop!==0||node.scrollLeft!==0){this.scrolledElements.push([clone,node.scrollLeft,node.scrollTop]);}if((isTextareaElement(node)||isSelectElement(node))&&(isTextareaElement(clone)||isSelectElement(clone))){clone.value=node.value;}return clone;}return node.cloneNode(false);};DocumentCloner.prototype.resolvePseudoContent=function(node,clone,style,pseudoElt){var _this=this;if(!style){return;}var value=style.content;var document=clone.ownerDocument;if(!document||!value||value==='none'||value==='-moz-alt-content'||style.display==='none'){return;
}this.counters.parse(new CSSParsedCounterDeclaration(this.context,style));var declaration=new CSSParsedPseudoDeclaration(this.context,style);var anonymousReplacedElement=document.createElement('html2canvaspseudoelement');copyCSSStyles(style,anonymousReplacedElement);declaration.content.forEach(function(token){if(token.type===0){anonymousReplacedElement.appendChild(document.createTextNode(token.value));}else if(token.type===22){var img=document.createElement('img');img.src=token.value;img.style.opacity='1';anonymousReplacedElement.appendChild(img);}else if(token.type===18){if(token.name==='attr'){var attr=token.values.filter(isIdentToken);if(attr.length){anonymousReplacedElement.appendChild(document.createTextNode(node.getAttribute(attr[0].value)||''));}}else if(token.name==='counter'){var _a=token.values.filter(nonFunctionArgSeparator),counter=_a[0],counterStyle=_a[1];if(counter&&isIdentToken(counter)){var counterState=_this.counters.getCounterValue(counter.value);var counterType=counterStyle&&isIdentToken(counterStyle)
?listStyleType.parse(_this.context,counterStyle.value):3;anonymousReplacedElement.appendChild(document.createTextNode(createCounterText(counterState,counterType,false)));}}else if(token.name==='counters'){var _b=token.values.filter(nonFunctionArgSeparator),counter=_b[0],delim=_b[1],counterStyle=_b[2];if(counter&&isIdentToken(counter)){var counterStates=_this.counters.getCounterValues(counter.value);var counterType_1=counterStyle&&isIdentToken(counterStyle)?listStyleType.parse(_this.context,counterStyle.value):3;var separator=delim&&delim.type===0?delim.value:'';var text=counterStates.map(function(value){return createCounterText(value,counterType_1,false);}).join(separator);anonymousReplacedElement.appendChild(document.createTextNode(text));}}else;}else if(token.type===20){switch(token.value){case'open-quote':anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes,_this.quoteDepth++,true)));break;case'close-quote':anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes,--_this.quoteDepth,false)));
break;default:anonymousReplacedElement.appendChild(document.createTextNode(token.value));}}});anonymousReplacedElement.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var newClassName=pseudoElt===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;if(isSVGElementNode(clone)){clone.className.baseValue+=newClassName;}else{clone.className+=newClassName;}return anonymousReplacedElement;};DocumentCloner.destroy=function(container){if(container.parentNode){container.parentNode.removeChild(container);return true;}return false;};return DocumentCloner;}());var PseudoElementType;(function(PseudoElementType){PseudoElementType[PseudoElementType["BEFORE"]=0]="BEFORE";PseudoElementType[PseudoElementType["AFTER"]=1]="AFTER";})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(ownerDocument,bounds){var cloneIframeContainer=ownerDocument.createElement('iframe');cloneIframeContainer.className='html2canvas-container';
cloneIframeContainer.style.visibility='hidden';cloneIframeContainer.style.position='fixed';cloneIframeContainer.style.left='-10000px';cloneIframeContainer.style.top='0px';cloneIframeContainer.style.border='0';cloneIframeContainer.width=bounds.width.toString();cloneIframeContainer.height=bounds.height.toString();cloneIframeContainer.scrolling='no';cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE,'true');ownerDocument.body.appendChild(cloneIframeContainer);return cloneIframeContainer;};var imageReady=function(img){return new Promise(function(resolve){if(img.complete){resolve();return;}if(!img.src){resolve();return;}img.onload=resolve;img.onerror=resolve;});};var imagesReady=function(document){return Promise.all([].slice.call(document.images,0).map(imageReady));};var iframeLoader=function(iframe){return new Promise(function(resolve,reject){var cloneWindow=iframe.contentWindow;if(!cloneWindow){return reject("No window assigned for iframe");}var documentClone=cloneWindow.document;
cloneWindow.onload=iframe.onload=function(){cloneWindow.onload=iframe.onload=null;var interval=setInterval(function(){if(documentClone.body.childNodes.length>0&&documentClone.readyState==='complete'){clearInterval(interval);resolve(iframe);}},50);};});};var ignoredStyleProperties=['all','d','content'];var copyCSSStyles=function(style,target){for(var i=style.length-1;i>=0;i--){var property=style.item(i);if(ignoredStyleProperties.indexOf(property)===-1){target.style.setProperty(property,style.getPropertyValue(property));}}return target;};var serializeDoctype=function(doctype){var str='';if(doctype){str+='<!DOCTYPE ';if(doctype.name){str+=doctype.name;}if(doctype.internalSubset){str+=doctype.internalSubset;}if(doctype.publicId){str+="\""+doctype.publicId+"\"";}if(doctype.systemId){str+="\""+doctype.systemId+"\"";}str+='>';}return str;};var restoreOwnerScroll=function(ownerDocument,x,y){if(ownerDocument&&ownerDocument.defaultView&&(x!==ownerDocument.defaultView.pageXOffset||y!==ownerDocument.defaultView.pageYOffset)){
ownerDocument.defaultView.scrollTo(x,y);}};var restoreNodeScroll=function(_a){var element=_a[0],x=_a[1],y=_a[2];element.scrollLeft=x;element.scrollTop=y;};var PSEUDO_BEFORE=':before';var PSEUDO_AFTER=':after';var PSEUDO_HIDE_ELEMENT_CLASS_BEFORE='___html2canvas___pseudoelement_before';var PSEUDO_HIDE_ELEMENT_CLASS_AFTER='___html2canvas___pseudoelement_after';var PSEUDO_HIDE_ELEMENT_STYLE="{\n    content: \"\" !important;\n    display: none !important;\n}";var createPseudoHideStyles=function(body){createStyles(body,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+"\n         ."+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE);};var createStyles=function(body,styles){var document=body.ownerDocument;if(document){var style=document.createElement('style');style.textContent=styles;body.appendChild(style);}};var CacheStorage=(function(){function CacheStorage(){}CacheStorage.getOrigin=function(url){var link=CacheStorage._link;if(!link){return'about:blank';
}link.href=url;link.href=link.href;return link.protocol+link.hostname+link.port;};CacheStorage.isSameOrigin=function(src){return CacheStorage.getOrigin(src)===CacheStorage._origin;};CacheStorage.setContext=function(window){CacheStorage._link=window.document.createElement('a');CacheStorage._origin=CacheStorage.getOrigin(window.location.href);};CacheStorage._origin='about:blank';return CacheStorage;}());var Cache=(function(){function Cache(context,_options){this.context=context;this._options=_options;this._cache={};}Cache.prototype.addImage=function(src){var result=Promise.resolve();if(this.has(src)){return result;}if(isBlobImage(src)||isRenderable(src)){(this._cache[src]=this.loadImage(src)).catch(function(){});return result;}return result;};Cache.prototype.match=function(src){return this._cache[src];};Cache.prototype.loadImage=function(key){return __awaiter(this,void 0,void 0,function(){var isSameOrigin,useCORS,useProxy,src;var _this=this;return __generator(this,function(_a){switch(_a.label){
case 0:isSameOrigin=CacheStorage.isSameOrigin(key);useCORS=!isInlineImage(key)&&this._options.useCORS===true&&FEATURES.SUPPORT_CORS_IMAGES&&!isSameOrigin;useProxy=!isInlineImage(key)&&!isSameOrigin&&!isBlobImage(key)&&typeof this._options.proxy==='string'&&FEATURES.SUPPORT_CORS_XHR&&!useCORS;if(!isSameOrigin&&this._options.allowTaint===false&&!isInlineImage(key)&&!isBlobImage(key)&&!useProxy&&!useCORS){return[2];}src=key;if(!useProxy)return[3,2];return[4,this.proxy(src)];case 1:src=_a.sent();_a.label=2;case 2:this.context.logger.debug("Added image "+key.substring(0,256));return[4,new Promise(function(resolve,reject){var img=new Image();img.onload=function(){return resolve(img);};img.onerror=reject;if(isInlineBase64Image(src)||useCORS){img.crossOrigin='anonymous';}img.src=src;if(img.complete===true){setTimeout(function(){return resolve(img);},500);}if(_this._options.imageTimeout>0){setTimeout(function(){return reject("Timed out ("+_this._options.imageTimeout+"ms) loading image");},_this._options.imageTimeout);
}})];case 3:return[2,_a.sent()];}});});};Cache.prototype.has=function(key){return typeof this._cache[key]!=='undefined';};Cache.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache));};Cache.prototype.proxy=function(src){var _this=this;var proxy=this._options.proxy;if(!proxy){throw new Error('No proxy defined');}var key=src.substring(0,256);return new Promise(function(resolve,reject){var responseType=FEATURES.SUPPORT_RESPONSE_TYPE?'blob':'text';var xhr=new XMLHttpRequest();xhr.onload=function(){if(xhr.status===200){if(responseType==='text'){resolve(xhr.response);}else{var reader_1=new FileReader();reader_1.addEventListener('load',function(){return resolve(reader_1.result);},false);reader_1.addEventListener('error',function(e){return reject(e);},false);reader_1.readAsDataURL(xhr.response);}}else{reject("Failed to proxy resource "+key+" with status code "+xhr.status);}};xhr.onerror=reject;var queryString=proxy.indexOf('?')>-1?'&':'?';xhr.open('GET',""+proxy+queryString+"url="+encodeURIComponent(src)+"&responseType="+responseType);
if(responseType!=='text'&&xhr instanceof XMLHttpRequest){xhr.responseType=responseType;}if(_this._options.imageTimeout){var timeout_1=_this._options.imageTimeout;xhr.timeout=timeout_1;xhr.ontimeout=function(){return reject("Timed out ("+timeout_1+"ms) proxying "+key);};}xhr.send();});};return Cache;}());var INLINE_SVG=/^data:image\/svg\+xml/i;var INLINE_BASE64=/^data:image\/.*;base64,/i;var INLINE_IMG=/^data:image\/.*/i;var isRenderable=function(src){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(src);};var isInlineImage=function(src){return INLINE_IMG.test(src);};var isInlineBase64Image=function(src){return INLINE_BASE64.test(src);};var isBlobImage=function(src){return src.substr(0,4)==='blob';};var isSVG=function(src){return src.substr(-3).toLowerCase()==='svg'||INLINE_SVG.test(src);};var Vector=(function(){function Vector(x,y){this.type=0;this.x=x;this.y=y;}Vector.prototype.add=function(deltaX,deltaY){return new Vector(this.x+deltaX,this.y+deltaY);};return Vector;}());var lerp=function(a,b,t){
return new Vector(a.x+(b.x-a.x)*t,a.y+(b.y-a.y)*t);};var BezierCurve=(function(){function BezierCurve(start,startControl,endControl,end){this.type=1;this.start=start;this.startControl=startControl;this.endControl=endControl;this.end=end;}BezierCurve.prototype.subdivide=function(t,firstHalf){var ab=lerp(this.start,this.startControl,t);var bc=lerp(this.startControl,this.endControl,t);var cd=lerp(this.endControl,this.end,t);var abbc=lerp(ab,bc,t);var bccd=lerp(bc,cd,t);var dest=lerp(abbc,bccd,t);return firstHalf?new BezierCurve(this.start,ab,abbc,dest):new BezierCurve(dest,bccd,cd,this.end);};BezierCurve.prototype.add=function(deltaX,deltaY){return new BezierCurve(this.start.add(deltaX,deltaY),this.startControl.add(deltaX,deltaY),this.endControl.add(deltaX,deltaY),this.end.add(deltaX,deltaY));};BezierCurve.prototype.reverse=function(){return new BezierCurve(this.end,this.endControl,this.startControl,this.start);};return BezierCurve;}());var isBezierCurve=function(path){return path.type===1;};
var BoundCurves=(function(){function BoundCurves(element){var styles=element.styles;var bounds=element.bounds;var _a=getAbsoluteValueForTuple(styles.borderTopLeftRadius,bounds.width,bounds.height),tlh=_a[0],tlv=_a[1];var _b=getAbsoluteValueForTuple(styles.borderTopRightRadius,bounds.width,bounds.height),trh=_b[0],trv=_b[1];var _c=getAbsoluteValueForTuple(styles.borderBottomRightRadius,bounds.width,bounds.height),brh=_c[0],brv=_c[1];var _d=getAbsoluteValueForTuple(styles.borderBottomLeftRadius,bounds.width,bounds.height),blh=_d[0],blv=_d[1];var factors=[];factors.push((tlh+trh)/bounds.width);factors.push((blh+brh)/bounds.width);factors.push((tlv+blv)/bounds.height);factors.push((trv+brv)/bounds.height);var maxFactor=Math.max.apply(Math,factors);if(maxFactor>1){tlh/=maxFactor;tlv/=maxFactor;trh/=maxFactor;trv/=maxFactor;brh/=maxFactor;brv/=maxFactor;blh/=maxFactor;blv/=maxFactor;}var topWidth=bounds.width-trh;var rightHeight=bounds.height-brv;var bottomWidth=bounds.width-brh;var leftHeight=bounds.height-blv;
var borderTopWidth=styles.borderTopWidth;var borderRightWidth=styles.borderRightWidth;var borderBottomWidth=styles.borderBottomWidth;var borderLeftWidth=styles.borderLeftWidth;var paddingTop=getAbsoluteValue(styles.paddingTop,element.bounds.width);var paddingRight=getAbsoluteValue(styles.paddingRight,element.bounds.width);var paddingBottom=getAbsoluteValue(styles.paddingBottom,element.bounds.width);var paddingLeft=getAbsoluteValue(styles.paddingLeft,element.bounds.width);this.topLeftBorderDoubleOuterBox=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth/3,bounds.top+borderTopWidth/3,tlh-borderLeftWidth/3,tlv-borderTopWidth/3,CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth/3,bounds.top+borderTopWidth/3);this.topRightBorderDoubleOuterBox=tlh>0||tlv>0?getCurvePoints(bounds.left+topWidth,bounds.top+borderTopWidth/3,trh-borderRightWidth/3,trv-borderTopWidth/3,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/3,bounds.top+borderTopWidth/3);this.bottomRightBorderDoubleOuterBox=
brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh-borderRightWidth/3,brv-borderBottomWidth/3,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/3,bounds.top+bounds.height-borderBottomWidth/3);this.bottomLeftBorderDoubleOuterBox=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth/3,bounds.top+leftHeight,blh-borderLeftWidth/3,blv-borderBottomWidth/3,CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth/3,bounds.top+bounds.height-borderBottomWidth/3);this.topLeftBorderDoubleInnerBox=tlh>0||tlv>0?getCurvePoints(bounds.left+(borderLeftWidth*2)/3,bounds.top+(borderTopWidth*2)/3,tlh-(borderLeftWidth*2)/3,tlv-(borderTopWidth*2)/3,CORNER.TOP_LEFT):new Vector(bounds.left+(borderLeftWidth*2)/3,bounds.top+(borderTopWidth*2)/3);this.topRightBorderDoubleInnerBox=tlh>0||tlv>0?getCurvePoints(bounds.left+topWidth,bounds.top+(borderTopWidth*2)/3,trh-(borderRightWidth*2)/3,trv-(borderTopWidth*2)/3,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-(borderRightWidth*2)/3,bounds.top+(borderTopWidth*2)/3);
this.bottomRightBorderDoubleInnerBox=brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh-(borderRightWidth*2)/3,brv-(borderBottomWidth*2)/3,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-(borderRightWidth*2)/3,bounds.top+bounds.height-(borderBottomWidth*2)/3);this.bottomLeftBorderDoubleInnerBox=blh>0||blv>0?getCurvePoints(bounds.left+(borderLeftWidth*2)/3,bounds.top+leftHeight,blh-(borderLeftWidth*2)/3,blv-(borderBottomWidth*2)/3,CORNER.BOTTOM_LEFT):new Vector(bounds.left+(borderLeftWidth*2)/3,bounds.top+bounds.height-(borderBottomWidth*2)/3);this.topLeftBorderStroke=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth/2,bounds.top+borderTopWidth/2,tlh-borderLeftWidth/2,tlv-borderTopWidth/2,CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth/2,bounds.top+borderTopWidth/2);this.topRightBorderStroke=tlh>0||tlv>0?getCurvePoints(bounds.left+topWidth,bounds.top+borderTopWidth/2,trh-borderRightWidth/2,trv-borderTopWidth/2,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/2,bounds.top+borderTopWidth/2);
this.bottomRightBorderStroke=brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh-borderRightWidth/2,brv-borderBottomWidth/2,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth/2,bounds.top+bounds.height-borderBottomWidth/2);this.bottomLeftBorderStroke=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth/2,bounds.top+leftHeight,blh-borderLeftWidth/2,blv-borderBottomWidth/2,CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth/2,bounds.top+bounds.height-borderBottomWidth/2);this.topLeftBorderBox=tlh>0||tlv>0?getCurvePoints(bounds.left,bounds.top,tlh,tlv,CORNER.TOP_LEFT):new Vector(bounds.left,bounds.top);this.topRightBorderBox=trh>0||trv>0?getCurvePoints(bounds.left+topWidth,bounds.top,trh,trv,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width,bounds.top);this.bottomRightBorderBox=brh>0||brv>0?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh,brv,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width,bounds.top+bounds.height);
this.bottomLeftBorderBox=blh>0||blv>0?getCurvePoints(bounds.left,bounds.top+leftHeight,blh,blv,CORNER.BOTTOM_LEFT):new Vector(bounds.left,bounds.top+bounds.height);this.topLeftPaddingBox=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth,bounds.top+borderTopWidth,Math.max(0,tlh-borderLeftWidth),Math.max(0,tlv-borderTopWidth),CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth,bounds.top+borderTopWidth);this.topRightPaddingBox=trh>0||trv>0?getCurvePoints(bounds.left+Math.min(topWidth,bounds.width-borderRightWidth),bounds.top+borderTopWidth,topWidth>bounds.width+borderRightWidth?0:Math.max(0,trh-borderRightWidth),Math.max(0,trv-borderTopWidth),CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth,bounds.top+borderTopWidth);this.bottomRightPaddingBox=brh>0||brv>0?getCurvePoints(bounds.left+Math.min(bottomWidth,bounds.width-borderLeftWidth),bounds.top+Math.min(rightHeight,bounds.height-borderBottomWidth),Math.max(0,brh-borderRightWidth),Math.max(0,brv-borderBottomWidth),CORNER.BOTTOM_RIGHT)
:new Vector(bounds.left+bounds.width-borderRightWidth,bounds.top+bounds.height-borderBottomWidth);this.bottomLeftPaddingBox=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth,bounds.top+Math.min(leftHeight,bounds.height-borderBottomWidth),Math.max(0,blh-borderLeftWidth),Math.max(0,blv-borderBottomWidth),CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth,bounds.top+bounds.height-borderBottomWidth);this.topLeftContentBox=tlh>0||tlv>0?getCurvePoints(bounds.left+borderLeftWidth+paddingLeft,bounds.top+borderTopWidth+paddingTop,Math.max(0,tlh-(borderLeftWidth+paddingLeft)),Math.max(0,tlv-(borderTopWidth+paddingTop)),CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth+paddingLeft,bounds.top+borderTopWidth+paddingTop);this.topRightContentBox=trh>0||trv>0?getCurvePoints(bounds.left+Math.min(topWidth,bounds.width+borderLeftWidth+paddingLeft),bounds.top+borderTopWidth+paddingTop,topWidth>bounds.width+borderLeftWidth+paddingLeft?0:trh-borderLeftWidth+paddingLeft,trv-(borderTopWidth+paddingTop),CORNER.TOP_RIGHT)
:new Vector(bounds.left+bounds.width-(borderRightWidth+paddingRight),bounds.top+borderTopWidth+paddingTop);this.bottomRightContentBox=brh>0||brv>0?getCurvePoints(bounds.left+Math.min(bottomWidth,bounds.width-(borderLeftWidth+paddingLeft)),bounds.top+Math.min(rightHeight,bounds.height+borderTopWidth+paddingTop),Math.max(0,brh-(borderRightWidth+paddingRight)),brv-(borderBottomWidth+paddingBottom),CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-(borderRightWidth+paddingRight),bounds.top+bounds.height-(borderBottomWidth+paddingBottom));this.bottomLeftContentBox=blh>0||blv>0?getCurvePoints(bounds.left+borderLeftWidth+paddingLeft,bounds.top+leftHeight,Math.max(0,blh-(borderLeftWidth+paddingLeft)),blv-(borderBottomWidth+paddingBottom),CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth+paddingLeft,bounds.top+bounds.height-(borderBottomWidth+paddingBottom));}return BoundCurves;}());var CORNER;(function(CORNER){CORNER[CORNER["TOP_LEFT"]=0]="TOP_LEFT";CORNER[CORNER["TOP_RIGHT"]=1]="TOP_RIGHT";
CORNER[CORNER["BOTTOM_RIGHT"]=2]="BOTTOM_RIGHT";CORNER[CORNER["BOTTOM_LEFT"]=3]="BOTTOM_LEFT";})(CORNER||(CORNER={}));var getCurvePoints=function(x,y,r1,r2,position){var kappa=4*((Math.sqrt(2)-1)/3);var ox=r1*kappa;var oy=r2*kappa;var xm=x+r1;var ym=y+r2;switch(position){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(x,ym),new Vector(x,ym-oy),new Vector(xm-ox,y),new Vector(xm,y));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(x,y),new Vector(x+ox,y),new Vector(xm,ym-oy),new Vector(xm,ym));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(xm,y),new Vector(xm,y+oy),new Vector(x+ox,ym),new Vector(x,ym));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(xm,ym),new Vector(xm-ox,ym),new Vector(x,y+oy),new Vector(x,y));}};var calculateBorderBoxPath=function(curves){return[curves.topLeftBorderBox,curves.topRightBorderBox,curves.bottomRightBorderBox,curves.bottomLeftBorderBox];};var calculateContentBoxPath=function(curves){return[curves.topLeftContentBox,
curves.topRightContentBox,curves.bottomRightContentBox,curves.bottomLeftContentBox];};var calculatePaddingBoxPath=function(curves){return[curves.topLeftPaddingBox,curves.topRightPaddingBox,curves.bottomRightPaddingBox,curves.bottomLeftPaddingBox];};var TransformEffect=(function(){function TransformEffect(offsetX,offsetY,matrix){this.offsetX=offsetX;this.offsetY=offsetY;this.matrix=matrix;this.type=0;this.target=2|4;}return TransformEffect;}());var ClipEffect=(function(){function ClipEffect(path,target){this.path=path;this.target=target;this.type=1;}return ClipEffect;}());var OpacityEffect=(function(){function OpacityEffect(opacity){this.opacity=opacity;this.type=2;this.target=2|4;}return OpacityEffect;}());var isTransformEffect=function(effect){return effect.type===0;};var isClipEffect=function(effect){return effect.type===1;};var isOpacityEffect=function(effect){return effect.type===2;};var equalPath=function(a,b){if(a.length===b.length){return a.some(function(v,i){return v===b[i];});
}return false;};var transformPath=function(path,deltaX,deltaY,deltaW,deltaH){return path.map(function(point,index){switch(index){case 0:return point.add(deltaX,deltaY);case 1:return point.add(deltaX+deltaW,deltaY);case 2:return point.add(deltaX+deltaW,deltaY+deltaH);case 3:return point.add(deltaX,deltaY+deltaH);}return point;});};var StackingContext=(function(){function StackingContext(container){this.element=container;this.inlineLevel=[];this.nonInlineLevel=[];this.negativeZIndex=[];this.zeroOrAutoZIndexOrTransformedOrOpacity=[];this.positiveZIndex=[];this.nonPositionedFloats=[];this.nonPositionedInlineLevel=[];}return StackingContext;}());var ElementPaint=(function(){function ElementPaint(container,parent){this.container=container;this.parent=parent;this.effects=[];this.curves=new BoundCurves(this.container);if(this.container.styles.opacity<1){this.effects.push(new OpacityEffect(this.container.styles.opacity));}if(this.container.styles.transform!==null){var offsetX=this.container.bounds.left+this.container.styles.transformOrigin[0].number;
var offsetY=this.container.bounds.top+this.container.styles.transformOrigin[1].number;var matrix=this.container.styles.transform;this.effects.push(new TransformEffect(offsetX,offsetY,matrix));}if(this.container.styles.overflowX!==0){var borderBox=calculateBorderBoxPath(this.curves);var paddingBox=calculatePaddingBoxPath(this.curves);if(equalPath(borderBox,paddingBox)){this.effects.push(new ClipEffect(borderBox,2|4));}else{this.effects.push(new ClipEffect(borderBox,2));this.effects.push(new ClipEffect(paddingBox,4));}}}ElementPaint.prototype.getEffects=function(target){var inFlow=[2,3].indexOf(this.container.styles.position)===-1;var parent=this.parent;var effects=this.effects.slice(0);while(parent){var croplessEffects=parent.effects.filter(function(effect){return!isClipEffect(effect);});if(inFlow||parent.container.styles.position!==0||!parent.parent){effects.unshift.apply(effects,croplessEffects);inFlow=[2,3].indexOf(parent.container.styles.position)===-1;if(parent.container.styles.overflowX!==0){
var borderBox=calculateBorderBoxPath(parent.curves);var paddingBox=calculatePaddingBoxPath(parent.curves);if(!equalPath(borderBox,paddingBox)){effects.unshift(new ClipEffect(paddingBox,2|4));}}}else{effects.unshift.apply(effects,croplessEffects);}parent=parent.parent;}return effects.filter(function(effect){return contains(effect.target,target);});};return ElementPaint;}());var parseStackTree=function(parent,stackingContext,realStackingContext,listItems){parent.container.elements.forEach(function(child){var treatAsRealStackingContext=contains(child.flags,4);var createsStackingContext=contains(child.flags,2);var paintContainer=new ElementPaint(child,parent);if(contains(child.styles.display,2048)){listItems.push(paintContainer);}var listOwnerItems=contains(child.flags,8)?[]:listItems;if(treatAsRealStackingContext||createsStackingContext){var parentStack=treatAsRealStackingContext||child.styles.isPositioned()?realStackingContext:stackingContext;var stack=new StackingContext(paintContainer);
if(child.styles.isPositioned()||child.styles.opacity<1||child.styles.isTransformed()){var order_1=child.styles.zIndex.order;if(order_1<0){var index_1=0;parentStack.negativeZIndex.some(function(current,i){if(order_1>current.element.container.styles.zIndex.order){index_1=i;return false;}else if(index_1>0){return true;}return false;});parentStack.negativeZIndex.splice(index_1,0,stack);}else if(order_1>0){var index_2=0;parentStack.positiveZIndex.some(function(current,i){if(order_1>=current.element.container.styles.zIndex.order){index_2=i+1;return false;}else if(index_2>0){return true;}return false;});parentStack.positiveZIndex.splice(index_2,0,stack);}else{parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);}}else{if(child.styles.isFloating()){parentStack.nonPositionedFloats.push(stack);}else{parentStack.nonPositionedInlineLevel.push(stack);}}parseStackTree(paintContainer,stack,treatAsRealStackingContext?stack:realStackingContext,listOwnerItems);}else{if(child.styles.isInlineLevel()){
stackingContext.inlineLevel.push(paintContainer);}else{stackingContext.nonInlineLevel.push(paintContainer);}parseStackTree(paintContainer,stackingContext,realStackingContext,listOwnerItems);}if(contains(child.flags,8)){processListItems(child,listOwnerItems);}});};var processListItems=function(owner,elements){var numbering=owner instanceof OLElementContainer?owner.start:1;var reversed=owner instanceof OLElementContainer?owner.reversed:false;for(var i=0;i<elements.length;i++){var item=elements[i];if(item.container instanceof LIElementContainer&&typeof item.container.value==='number'&&item.container.value!==0){numbering=item.container.value;}item.listValue=createCounterText(numbering,item.container.styles.listStyleType,true);numbering+=reversed?-1:1;}};var parseStackingContexts=function(container){var paintContainer=new ElementPaint(container,null);var root=new StackingContext(paintContainer);var listItems=[];parseStackTree(paintContainer,root,root,listItems);processListItems(paintContainer.container,listItems);
return root;};var parsePathForBorder=function(curves,borderSide){switch(borderSide){case 0:return createPathFromCurves(curves.topLeftBorderBox,curves.topLeftPaddingBox,curves.topRightBorderBox,curves.topRightPaddingBox);case 1:return createPathFromCurves(curves.topRightBorderBox,curves.topRightPaddingBox,curves.bottomRightBorderBox,curves.bottomRightPaddingBox);case 2:return createPathFromCurves(curves.bottomRightBorderBox,curves.bottomRightPaddingBox,curves.bottomLeftBorderBox,curves.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(curves.bottomLeftBorderBox,curves.bottomLeftPaddingBox,curves.topLeftBorderBox,curves.topLeftPaddingBox);}};var parsePathForBorderDoubleOuter=function(curves,borderSide){switch(borderSide){case 0:return createPathFromCurves(curves.topLeftBorderBox,curves.topLeftBorderDoubleOuterBox,curves.topRightBorderBox,curves.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(curves.topRightBorderBox,curves.topRightBorderDoubleOuterBox,curves.bottomRightBorderBox,curves.bottomRightBorderDoubleOuterBox);
case 2:return createPathFromCurves(curves.bottomRightBorderBox,curves.bottomRightBorderDoubleOuterBox,curves.bottomLeftBorderBox,curves.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(curves.bottomLeftBorderBox,curves.bottomLeftBorderDoubleOuterBox,curves.topLeftBorderBox,curves.topLeftBorderDoubleOuterBox);}};var parsePathForBorderDoubleInner=function(curves,borderSide){switch(borderSide){case 0:return createPathFromCurves(curves.topLeftBorderDoubleInnerBox,curves.topLeftPaddingBox,curves.topRightBorderDoubleInnerBox,curves.topRightPaddingBox);case 1:return createPathFromCurves(curves.topRightBorderDoubleInnerBox,curves.topRightPaddingBox,curves.bottomRightBorderDoubleInnerBox,curves.bottomRightPaddingBox);case 2:return createPathFromCurves(curves.bottomRightBorderDoubleInnerBox,curves.bottomRightPaddingBox,curves.bottomLeftBorderDoubleInnerBox,curves.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(curves.bottomLeftBorderDoubleInnerBox,curves.bottomLeftPaddingBox,curves.topLeftBorderDoubleInnerBox,curves.topLeftPaddingBox);
}};var parsePathForBorderStroke=function(curves,borderSide){switch(borderSide){case 0:return createStrokePathFromCurves(curves.topLeftBorderStroke,curves.topRightBorderStroke);case 1:return createStrokePathFromCurves(curves.topRightBorderStroke,curves.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(curves.bottomRightBorderStroke,curves.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(curves.bottomLeftBorderStroke,curves.topLeftBorderStroke);}};var createStrokePathFromCurves=function(outer1,outer2){var path=[];if(isBezierCurve(outer1)){path.push(outer1.subdivide(0.5,false));}else{path.push(outer1);}if(isBezierCurve(outer2)){path.push(outer2.subdivide(0.5,true));}else{path.push(outer2);}return path;};var createPathFromCurves=function(outer1,inner1,outer2,inner2){var path=[];if(isBezierCurve(outer1)){path.push(outer1.subdivide(0.5,false));}else{path.push(outer1);}if(isBezierCurve(outer2)){path.push(outer2.subdivide(0.5,true));}else{path.push(outer2);
}if(isBezierCurve(inner2)){path.push(inner2.subdivide(0.5,true).reverse());}else{path.push(inner2);}if(isBezierCurve(inner1)){path.push(inner1.subdivide(0.5,false).reverse());}else{path.push(inner1);}return path;};var paddingBox=function(element){var bounds=element.bounds;var styles=element.styles;return bounds.add(styles.borderLeftWidth,styles.borderTopWidth,-(styles.borderRightWidth+styles.borderLeftWidth),-(styles.borderTopWidth+styles.borderBottomWidth));};var contentBox=function(element){var styles=element.styles;var bounds=element.bounds;var paddingLeft=getAbsoluteValue(styles.paddingLeft,bounds.width);var paddingRight=getAbsoluteValue(styles.paddingRight,bounds.width);var paddingTop=getAbsoluteValue(styles.paddingTop,bounds.width);var paddingBottom=getAbsoluteValue(styles.paddingBottom,bounds.width);return bounds.add(paddingLeft+styles.borderLeftWidth,paddingTop+styles.borderTopWidth,-(styles.borderRightWidth+styles.borderLeftWidth+paddingLeft+paddingRight),-(styles.borderTopWidth+styles.borderBottomWidth+paddingTop+paddingBottom));
};var calculateBackgroundPositioningArea=function(backgroundOrigin,element){if(backgroundOrigin===0){return element.bounds;}if(backgroundOrigin===2){return contentBox(element);}return paddingBox(element);};var calculateBackgroundPaintingArea=function(backgroundClip,element){if(backgroundClip===0){return element.bounds;}if(backgroundClip===2){return contentBox(element);}return paddingBox(element);};var calculateBackgroundRendering=function(container,index,intrinsicSize){var backgroundPositioningArea=calculateBackgroundPositioningArea(getBackgroundValueForIndex(container.styles.backgroundOrigin,index),container);var backgroundPaintingArea=calculateBackgroundPaintingArea(getBackgroundValueForIndex(container.styles.backgroundClip,index),container);var backgroundImageSize=calculateBackgroundSize(getBackgroundValueForIndex(container.styles.backgroundSize,index),intrinsicSize,backgroundPositioningArea);var sizeWidth=backgroundImageSize[0],sizeHeight=backgroundImageSize[1];var position=getAbsoluteValueForTuple(getBackgroundValueForIndex(container.styles.backgroundPosition,index),backgroundPositioningArea.width-sizeWidth,backgroundPositioningArea.height-sizeHeight);
var path=calculateBackgroundRepeatPath(getBackgroundValueForIndex(container.styles.backgroundRepeat,index),position,backgroundImageSize,backgroundPositioningArea,backgroundPaintingArea);var offsetX=Math.round(backgroundPositioningArea.left+position[0]);var offsetY=Math.round(backgroundPositioningArea.top+position[1]);return[path,offsetX,offsetY,sizeWidth,sizeHeight];};var isAuto=function(token){return isIdentToken(token)&&token.value===BACKGROUND_SIZE.AUTO;};var hasIntrinsicValue=function(value){return typeof value==='number';};var calculateBackgroundSize=function(size,_a,bounds){var intrinsicWidth=_a[0],intrinsicHeight=_a[1],intrinsicProportion=_a[2];var first=size[0],second=size[1];if(!first){return[0,0];}if(isLengthPercentage(first)&&second&&isLengthPercentage(second)){return[getAbsoluteValue(first,bounds.width),getAbsoluteValue(second,bounds.height)];}var hasIntrinsicProportion=hasIntrinsicValue(intrinsicProportion);if(isIdentToken(first)&&(first.value===BACKGROUND_SIZE.CONTAIN||first.value===BACKGROUND_SIZE.COVER)){
if(hasIntrinsicValue(intrinsicProportion)){var targetRatio=bounds.width/bounds.height;return targetRatio<intrinsicProportion!==(first.value===BACKGROUND_SIZE.COVER)?[bounds.width,bounds.width/intrinsicProportion]:[bounds.height*intrinsicProportion,bounds.height];}return[bounds.width,bounds.height];}var hasIntrinsicWidth=hasIntrinsicValue(intrinsicWidth);var hasIntrinsicHeight=hasIntrinsicValue(intrinsicHeight);var hasIntrinsicDimensions=hasIntrinsicWidth||hasIntrinsicHeight;if(isAuto(first)&&(!second||isAuto(second))){if(hasIntrinsicWidth&&hasIntrinsicHeight){return[intrinsicWidth,intrinsicHeight];}if(!hasIntrinsicProportion&&!hasIntrinsicDimensions){return[bounds.width,bounds.height];}if(hasIntrinsicDimensions&&hasIntrinsicProportion){var width_1=hasIntrinsicWidth?intrinsicWidth:intrinsicHeight*intrinsicProportion;var height_1=hasIntrinsicHeight?intrinsicHeight:intrinsicWidth/intrinsicProportion;return[width_1,height_1];}var width_2=hasIntrinsicWidth?intrinsicWidth:bounds.width;var height_2=hasIntrinsicHeight?intrinsicHeight:bounds.height;
return[width_2,height_2];}if(hasIntrinsicProportion){var width_3=0;var height_3=0;if(isLengthPercentage(first)){width_3=getAbsoluteValue(first,bounds.width);}else if(isLengthPercentage(second)){height_3=getAbsoluteValue(second,bounds.height);}if(isAuto(first)){width_3=height_3*intrinsicProportion;}else if(!second||isAuto(second)){height_3=width_3/intrinsicProportion;}return[width_3,height_3];}var width=null;var height=null;if(isLengthPercentage(first)){width=getAbsoluteValue(first,bounds.width);}else if(second&&isLengthPercentage(second)){height=getAbsoluteValue(second,bounds.height);}if(width!==null&&(!second||isAuto(second))){height=hasIntrinsicWidth&&hasIntrinsicHeight?(width/intrinsicWidth)*intrinsicHeight:bounds.height;}if(height!==null&&isAuto(first)){width=hasIntrinsicWidth&&hasIntrinsicHeight?(height/intrinsicHeight)*intrinsicWidth:bounds.width;}if(width!==null&&height!==null){return[width,height];}throw new Error("Unable to calculate background-size for element");};var getBackgroundValueForIndex=function(values,index){
var value=values[index];if(typeof value==='undefined'){return values[0];}return value;};var calculateBackgroundRepeatPath=function(repeat,_a,_b,backgroundPositioningArea,backgroundPaintingArea){var x=_a[0],y=_a[1];var width=_b[0],height=_b[1];switch(repeat){case 2:return[new Vector(Math.round(backgroundPositioningArea.left),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+backgroundPositioningArea.width),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+backgroundPositioningArea.width),Math.round(height+backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left),Math.round(height+backgroundPositioningArea.top+y))];case 3:return[new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.height+backgroundPositioningArea.top)),
new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.height+backgroundPositioningArea.top))];case 1:return[new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top+y+height)),new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top+y+height))];default:return[new Vector(Math.round(backgroundPaintingArea.left),Math.round(backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left+backgroundPaintingArea.width),Math.round(backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left+backgroundPaintingArea.width),Math.round(backgroundPaintingArea.height+backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left),Math.round(backgroundPaintingArea.height+backgroundPaintingArea.top))
];}};var SMALL_IMAGE='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';var SAMPLE_TEXT='Hidden Text';var FontMetrics=(function(){function FontMetrics(document){this._data={};this._document=document;}FontMetrics.prototype.parseMetrics=function(fontFamily,fontSize){var container=this._document.createElement('div');var img=this._document.createElement('img');var span=this._document.createElement('span');var body=this._document.body;container.style.visibility='hidden';container.style.fontFamily=fontFamily;container.style.fontSize=fontSize;container.style.margin='0';container.style.padding='0';container.style.whiteSpace='nowrap';body.appendChild(container);img.src=SMALL_IMAGE;img.width=1;img.height=1;img.style.margin='0';img.style.padding='0';img.style.verticalAlign='baseline';span.style.fontFamily=fontFamily;span.style.fontSize=fontSize;span.style.margin='0';span.style.padding='0';span.appendChild(this._document.createTextNode(SAMPLE_TEXT));container.appendChild(span);
container.appendChild(img);var baseline=img.offsetTop-span.offsetTop+2;container.removeChild(span);container.appendChild(this._document.createTextNode(SAMPLE_TEXT));container.style.lineHeight='normal';img.style.verticalAlign='super';var middle=img.offsetTop-container.offsetTop+2;body.removeChild(container);return{baseline:baseline,middle:middle};};FontMetrics.prototype.getMetrics=function(fontFamily,fontSize){var key=fontFamily+" "+fontSize;if(typeof this._data[key]==='undefined'){this._data[key]=this.parseMetrics(fontFamily,fontSize);}return this._data[key];};return FontMetrics;}());var Renderer=(function(){function Renderer(context,options){this.context=context;this.options=options;}return Renderer;}());var MASK_OFFSET=10000;var CanvasRenderer=(function(_super){__extends(CanvasRenderer,_super);function CanvasRenderer(context,options){var _this=_super.call(this,context,options)||this;_this._activeEffects=[];_this.canvas=options.canvas?options.canvas:document.createElement('canvas');
_this.ctx=_this.canvas.getContext('2d');if(!options.canvas){_this.canvas.width=Math.floor(options.width*options.scale);_this.canvas.height=Math.floor(options.height*options.scale);_this.canvas.style.width=options.width+"px";_this.canvas.style.height=options.height+"px";}_this.fontMetrics=new FontMetrics(document);_this.ctx.scale(_this.options.scale,_this.options.scale);_this.ctx.translate(-options.x,-options.y);_this.ctx.textBaseline='bottom';_this._activeEffects=[];_this.context.logger.debug("Canvas renderer initialized ("+options.width+"x"+options.height+") with scale "+options.scale);return _this;}CanvasRenderer.prototype.applyEffects=function(effects){var _this=this;while(this._activeEffects.length){this.popEffect();}effects.forEach(function(effect){return _this.applyEffect(effect);});};CanvasRenderer.prototype.applyEffect=function(effect){this.ctx.save();if(isOpacityEffect(effect)){this.ctx.globalAlpha=effect.opacity;}if(isTransformEffect(effect)){this.ctx.translate(effect.offsetX,effect.offsetY);
this.ctx.transform(effect.matrix[0],effect.matrix[1],effect.matrix[2],effect.matrix[3],effect.matrix[4],effect.matrix[5]);this.ctx.translate(-effect.offsetX,-effect.offsetY);}if(isClipEffect(effect)){this.path(effect.path);this.ctx.clip();}this._activeEffects.push(effect);};CanvasRenderer.prototype.popEffect=function(){this._activeEffects.pop();this.ctx.restore();};CanvasRenderer.prototype.renderStack=function(stack){return __awaiter(this,void 0,void 0,function(){var styles;return __generator(this,function(_a){switch(_a.label){case 0:styles=stack.element.container.styles;if(!styles.isVisible())return[3,2];return[4,this.renderStackContent(stack)];case 1:_a.sent();_a.label=2;case 2:return[2];}});});};CanvasRenderer.prototype.renderNode=function(paint){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:if(contains(paint.container.flags,16)){debugger;}if(!paint.container.styles.isVisible())return[3,3];return[4,this.renderNodeBackgroundAndBorders(paint)];
case 1:_a.sent();return[4,this.renderNodeContent(paint)];case 2:_a.sent();_a.label=3;case 3:return[2];}});});};CanvasRenderer.prototype.renderTextWithLetterSpacing=function(text,letterSpacing,baseline){var _this=this;if(letterSpacing===0){this.ctx.fillText(text.text,text.bounds.left,text.bounds.top+baseline);}else{var letters=segmentGraphemes(text.text);letters.reduce(function(left,letter){_this.ctx.fillText(letter,left,text.bounds.top+baseline);return left+_this.ctx.measureText(letter).width;},text.bounds.left);}};CanvasRenderer.prototype.createFontStyle=function(styles){var fontVariant=styles.fontVariant.filter(function(variant){return variant==='normal'||variant==='small-caps';}).join('');var fontFamily=fixIOSSystemFonts(styles.fontFamily).join(', ');var fontSize=isDimensionToken(styles.fontSize)?""+styles.fontSize.number+styles.fontSize.unit:styles.fontSize.number+"px";return[[styles.fontStyle,fontVariant,styles.fontWeight,fontSize,fontFamily].join(' '),fontFamily,fontSize];};
CanvasRenderer.prototype.renderTextNode=function(text,styles){return __awaiter(this,void 0,void 0,function(){var _a,font,fontFamily,fontSize,_b,baseline,middle,paintOrder;var _this=this;return __generator(this,function(_c){_a=this.createFontStyle(styles),font=_a[0],fontFamily=_a[1],fontSize=_a[2];this.ctx.font=font;this.ctx.direction=styles.direction===1?'rtl':'ltr';this.ctx.textAlign='left';this.ctx.textBaseline='alphabetic';_b=this.fontMetrics.getMetrics(fontFamily,fontSize),baseline=_b.baseline,middle=_b.middle;paintOrder=styles.paintOrder;text.textBounds.forEach(function(text){paintOrder.forEach(function(paintOrderLayer){switch(paintOrderLayer){case 0:_this.ctx.fillStyle=asString(styles.color);_this.renderTextWithLetterSpacing(text,styles.letterSpacing,baseline);var textShadows=styles.textShadow;if(textShadows.length&&text.text.trim().length){textShadows.slice(0).reverse().forEach(function(textShadow){_this.ctx.shadowColor=asString(textShadow.color);_this.ctx.shadowOffsetX=textShadow.offsetX.number*_this.options.scale;
_this.ctx.shadowOffsetY=textShadow.offsetY.number*_this.options.scale;_this.ctx.shadowBlur=textShadow.blur.number;_this.renderTextWithLetterSpacing(text,styles.letterSpacing,baseline);});_this.ctx.shadowColor='';_this.ctx.shadowOffsetX=0;_this.ctx.shadowOffsetY=0;_this.ctx.shadowBlur=0;}if(styles.textDecorationLine.length){_this.ctx.fillStyle=asString(styles.textDecorationColor||styles.color);styles.textDecorationLine.forEach(function(textDecorationLine){switch(textDecorationLine){case 1:_this.ctx.fillRect(text.bounds.left,Math.round(text.bounds.top+baseline),text.bounds.width,1);break;case 2:_this.ctx.fillRect(text.bounds.left,Math.round(text.bounds.top),text.bounds.width,1);break;case 3:_this.ctx.fillRect(text.bounds.left,Math.ceil(text.bounds.top+middle),text.bounds.width,1);break;}});}break;case 1:if(styles.webkitTextStrokeWidth&&text.text.trim().length){_this.ctx.strokeStyle=asString(styles.webkitTextStrokeColor);_this.ctx.lineWidth=styles.webkitTextStrokeWidth;_this.ctx.lineJoin=!!window.chrome?'miter':'round';
_this.ctx.strokeText(text.text,text.bounds.left,text.bounds.top+baseline);}_this.ctx.strokeStyle='';_this.ctx.lineWidth=0;_this.ctx.lineJoin='miter';break;}});});return[2];});});};CanvasRenderer.prototype.renderReplacedElement=function(container,curves,image){if(image&&container.intrinsicWidth>0&&container.intrinsicHeight>0){var box=contentBox(container);var path=calculatePaddingBoxPath(curves);this.path(path);this.ctx.save();this.ctx.clip();this.ctx.drawImage(image,0,0,container.intrinsicWidth,container.intrinsicHeight,box.left,box.top,box.width,box.height);this.ctx.restore();}};CanvasRenderer.prototype.renderNodeContent=function(paint){return __awaiter(this,void 0,void 0,function(){var container,curves,styles,_i,_a,child,image,image,iframeRenderer,canvas,size,_b,fontFamily,fontSize,baseline,bounds,x,textBounds,img,image,url,fontFamily,bounds;return __generator(this,function(_c){switch(_c.label){case 0:this.applyEffects(paint.getEffects(4));container=paint.container;curves=paint.curves;
styles=container.styles;_i=0,_a=container.textNodes;_c.label=1;case 1:if(!(_i<_a.length))return[3,4];child=_a[_i];return[4,this.renderTextNode(child,styles)];case 2:_c.sent();_c.label=3;case 3:_i++;return[3,1];case 4:if(!(container instanceof ImageElementContainer))return[3,8];_c.label=5;case 5:_c.trys.push([5,7,,8]);return[4,this.context.cache.match(container.src)];case 6:image=_c.sent();this.renderReplacedElement(container,curves,image);return[3,8];case 7:_c.sent();this.context.logger.error("Error loading image "+container.src);return[3,8];case 8:if(container instanceof CanvasElementContainer){this.renderReplacedElement(container,curves,container.canvas);}if(!(container instanceof SVGElementContainer))return[3,12];_c.label=9;case 9:_c.trys.push([9,11,,12]);return[4,this.context.cache.match(container.svg)];case 10:image=_c.sent();this.renderReplacedElement(container,curves,image);return[3,12];case 11:_c.sent();this.context.logger.error("Error loading svg "+container.svg.substring(0,255));
return[3,12];case 12:if(!(container instanceof IFrameElementContainer&&container.tree))return[3,14];iframeRenderer=new CanvasRenderer(this.context,{scale:this.options.scale,backgroundColor:container.backgroundColor,x:0,y:0,width:container.width,height:container.height});return[4,iframeRenderer.render(container.tree)];case 13:canvas=_c.sent();if(container.width&&container.height){this.ctx.drawImage(canvas,0,0,container.width,container.height,container.bounds.left,container.bounds.top,container.bounds.width,container.bounds.height);}_c.label=14;case 14:if(container instanceof InputElementContainer){size=Math.min(container.bounds.width,container.bounds.height);if(container.type===CHECKBOX){if(container.checked){this.ctx.save();this.path([new Vector(container.bounds.left+size*0.39363,container.bounds.top+size*0.79),new Vector(container.bounds.left+size*0.16,container.bounds.top+size*0.5549),new Vector(container.bounds.left+size*0.27347,container.bounds.top+size*0.44071),new Vector(container.bounds.left+size*0.39694,container.bounds.top+size*0.5649),
new Vector(container.bounds.left+size*0.72983,container.bounds.top+size*0.23),new Vector(container.bounds.left+size*0.84,container.bounds.top+size*0.34085),new Vector(container.bounds.left+size*0.39363,container.bounds.top+size*0.79)]);this.ctx.fillStyle=asString(INPUT_COLOR);this.ctx.fill();this.ctx.restore();}}else if(container.type===RADIO){if(container.checked){this.ctx.save();this.ctx.beginPath();this.ctx.arc(container.bounds.left+size/2,container.bounds.top+size/2,size/4,0,Math.PI*2,true);this.ctx.fillStyle=asString(INPUT_COLOR);this.ctx.fill();this.ctx.restore();}}}if(isTextInputElement(container)&&container.value.length){_b=this.createFontStyle(styles),fontFamily=_b[0],fontSize=_b[1];baseline=this.fontMetrics.getMetrics(fontFamily,fontSize).baseline;this.ctx.font=fontFamily;this.ctx.fillStyle=asString(styles.color);this.ctx.textBaseline='alphabetic';this.ctx.textAlign=canvasTextAlign(container.styles.textAlign);bounds=contentBox(container);x=0;switch(container.styles.textAlign){
case 1:x+=bounds.width/2;break;case 2:x+=bounds.width;break;}textBounds=bounds.add(x,0,0,-bounds.height/2+1);this.ctx.save();this.path([new Vector(bounds.left,bounds.top),new Vector(bounds.left+bounds.width,bounds.top),new Vector(bounds.left+bounds.width,bounds.top+bounds.height),new Vector(bounds.left,bounds.top+bounds.height)]);this.ctx.clip();this.renderTextWithLetterSpacing(new TextBounds(container.value,textBounds),styles.letterSpacing,baseline);this.ctx.restore();this.ctx.textBaseline='alphabetic';this.ctx.textAlign='left';}if(!contains(container.styles.display,2048))return[3,20];if(!(container.styles.listStyleImage!==null))return[3,19];img=container.styles.listStyleImage;if(!(img.type===0))return[3,18];image=void 0;url=img.url;_c.label=15;case 15:_c.trys.push([15,17,,18]);return[4,this.context.cache.match(url)];case 16:image=_c.sent();this.ctx.drawImage(image,container.bounds.left-(image.width+10),container.bounds.top);return[3,18];case 17:_c.sent();this.context.logger.error("Error loading list-style-image "+url);
return[3,18];case 18:return[3,20];case 19:if(paint.listValue&&container.styles.listStyleType!==-1){fontFamily=this.createFontStyle(styles)[0];this.ctx.font=fontFamily;this.ctx.fillStyle=asString(styles.color);this.ctx.textBaseline='middle';this.ctx.textAlign='right';bounds=new Bounds(container.bounds.left,container.bounds.top+getAbsoluteValue(container.styles.paddingTop,container.bounds.width),container.bounds.width,computeLineHeight(styles.lineHeight,styles.fontSize.number)/2+1);this.renderTextWithLetterSpacing(new TextBounds(paint.listValue,bounds),styles.letterSpacing,computeLineHeight(styles.lineHeight,styles.fontSize.number)/2+2);this.ctx.textBaseline='bottom';this.ctx.textAlign='left';}_c.label=20;case 20:return[2];}});});};CanvasRenderer.prototype.renderStackContent=function(stack){return __awaiter(this,void 0,void 0,function(){var _i,_a,child,_b,_c,child,_d,_e,child,_f,_g,child,_h,_j,child,_k,_l,child,_m,_o,child;return __generator(this,function(_p){switch(_p.label){case 0:if(contains(stack.element.container.flags,16)){
debugger;}return[4,this.renderNodeBackgroundAndBorders(stack.element)];case 1:_p.sent();_i=0,_a=stack.negativeZIndex;_p.label=2;case 2:if(!(_i<_a.length))return[3,5];child=_a[_i];return[4,this.renderStack(child)];case 3:_p.sent();_p.label=4;case 4:_i++;return[3,2];case 5:return[4,this.renderNodeContent(stack.element)];case 6:_p.sent();_b=0,_c=stack.nonInlineLevel;_p.label=7;case 7:if(!(_b<_c.length))return[3,10];child=_c[_b];return[4,this.renderNode(child)];case 8:_p.sent();_p.label=9;case 9:_b++;return[3,7];case 10:_d=0,_e=stack.nonPositionedFloats;_p.label=11;case 11:if(!(_d<_e.length))return[3,14];child=_e[_d];return[4,this.renderStack(child)];case 12:_p.sent();_p.label=13;case 13:_d++;return[3,11];case 14:_f=0,_g=stack.nonPositionedInlineLevel;_p.label=15;case 15:if(!(_f<_g.length))return[3,18];child=_g[_f];return[4,this.renderStack(child)];case 16:_p.sent();_p.label=17;case 17:_f++;return[3,15];case 18:_h=0,_j=stack.inlineLevel;_p.label=19;case 19:if(!(_h<_j.length))return[3,22];
child=_j[_h];return[4,this.renderNode(child)];case 20:_p.sent();_p.label=21;case 21:_h++;return[3,19];case 22:_k=0,_l=stack.zeroOrAutoZIndexOrTransformedOrOpacity;_p.label=23;case 23:if(!(_k<_l.length))return[3,26];child=_l[_k];return[4,this.renderStack(child)];case 24:_p.sent();_p.label=25;case 25:_k++;return[3,23];case 26:_m=0,_o=stack.positiveZIndex;_p.label=27;case 27:if(!(_m<_o.length))return[3,30];child=_o[_m];return[4,this.renderStack(child)];case 28:_p.sent();_p.label=29;case 29:_m++;return[3,27];case 30:return[2];}});});};CanvasRenderer.prototype.mask=function(paths){this.ctx.beginPath();this.ctx.moveTo(0,0);this.ctx.lineTo(this.canvas.width,0);this.ctx.lineTo(this.canvas.width,this.canvas.height);this.ctx.lineTo(0,this.canvas.height);this.ctx.lineTo(0,0);this.formatPath(paths.slice(0).reverse());this.ctx.closePath();};CanvasRenderer.prototype.path=function(paths){this.ctx.beginPath();this.formatPath(paths);this.ctx.closePath();};CanvasRenderer.prototype.formatPath=function(paths){
var _this=this;paths.forEach(function(point,index){var start=isBezierCurve(point)?point.start:point;if(index===0){_this.ctx.moveTo(start.x,start.y);}else{_this.ctx.lineTo(start.x,start.y);}if(isBezierCurve(point)){_this.ctx.bezierCurveTo(point.startControl.x,point.startControl.y,point.endControl.x,point.endControl.y,point.end.x,point.end.y);}});};CanvasRenderer.prototype.renderRepeat=function(path,pattern,offsetX,offsetY){this.path(path);this.ctx.fillStyle=pattern;this.ctx.translate(offsetX,offsetY);this.ctx.fill();this.ctx.translate(-offsetX,-offsetY);};CanvasRenderer.prototype.resizeImage=function(image,width,height){var _a;if(image.width===width&&image.height===height){return image;}var ownerDocument=(_a=this.canvas.ownerDocument)!==null&&_a!==void 0?_a:document;var canvas=ownerDocument.createElement('canvas');canvas.width=Math.max(1,width);canvas.height=Math.max(1,height);var ctx=canvas.getContext('2d');ctx.drawImage(image,0,0,image.width,image.height,0,0,width,height);return canvas;
};CanvasRenderer.prototype.renderBackgroundImage=function(container){return __awaiter(this,void 0,void 0,function(){var index,_loop_1,this_1,_i,_a,backgroundImage;return __generator(this,function(_b){switch(_b.label){case 0:index=container.styles.backgroundImage.length-1;_loop_1=function(backgroundImage){var image,url,_c,path,x,y,width,height,pattern,_d,path,x,y,width,height,_e,lineLength,x0,x1,y0,y1,canvas,ctx,gradient_1,pattern,_f,path,left,top_1,width,height,position,x,y,_g,rx,ry,radialGradient_1,midX,midY,f,invF;return __generator(this,function(_h){switch(_h.label){case 0:if(!(backgroundImage.type===0))return[3,5];image=void 0;url=backgroundImage.url;_h.label=1;case 1:_h.trys.push([1,3,,4]);return[4,this_1.context.cache.match(url)];case 2:image=_h.sent();return[3,4];case 3:_h.sent();this_1.context.logger.error("Error loading background-image "+url);return[3,4];case 4:if(image){_c=calculateBackgroundRendering(container,index,[image.width,image.height,image.width/image.height]),path=_c[0],x=_c[1],y=_c[2],width=_c[3],height=_c[4];
pattern=this_1.ctx.createPattern(this_1.resizeImage(image,width,height),'repeat');this_1.renderRepeat(path,pattern,x,y);}return[3,6];case 5:if(isLinearGradient(backgroundImage)){_d=calculateBackgroundRendering(container,index,[null,null,null]),path=_d[0],x=_d[1],y=_d[2],width=_d[3],height=_d[4];_e=calculateGradientDirection(backgroundImage.angle,width,height),lineLength=_e[0],x0=_e[1],x1=_e[2],y0=_e[3],y1=_e[4];canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;ctx=canvas.getContext('2d');gradient_1=ctx.createLinearGradient(x0,y0,x1,y1);processColorStops(backgroundImage.stops,lineLength).forEach(function(colorStop){return gradient_1.addColorStop(colorStop.stop,asString(colorStop.color));});ctx.fillStyle=gradient_1;ctx.fillRect(0,0,width,height);if(width>0&&height>0){pattern=this_1.ctx.createPattern(canvas,'repeat');this_1.renderRepeat(path,pattern,x,y);}}else if(isRadialGradient(backgroundImage)){_f=calculateBackgroundRendering(container,index,[null,null,
null]),path=_f[0],left=_f[1],top_1=_f[2],width=_f[3],height=_f[4];position=backgroundImage.position.length===0?[FIFTY_PERCENT]:backgroundImage.position;x=getAbsoluteValue(position[0],width);y=getAbsoluteValue(position[position.length-1],height);_g=calculateRadius(backgroundImage,x,y,width,height),rx=_g[0],ry=_g[1];if(rx>0&&ry>0){radialGradient_1=this_1.ctx.createRadialGradient(left+x,top_1+y,0,left+x,top_1+y,rx);processColorStops(backgroundImage.stops,rx*2).forEach(function(colorStop){return radialGradient_1.addColorStop(colorStop.stop,asString(colorStop.color));});this_1.path(path);this_1.ctx.fillStyle=radialGradient_1;if(rx!==ry){midX=container.bounds.left+0.5*container.bounds.width;midY=container.bounds.top+0.5*container.bounds.height;f=ry/rx;invF=1/f;this_1.ctx.save();this_1.ctx.translate(midX,midY);this_1.ctx.transform(1,0,0,f,0,0);this_1.ctx.translate(-midX,-midY);this_1.ctx.fillRect(left,invF*(top_1-midY)+midY,width,height*invF);this_1.ctx.restore();}else{this_1.ctx.fill();}}}_h.label=6;
case 6:index--;return[2];}});};this_1=this;_i=0,_a=container.styles.backgroundImage.slice(0).reverse();_b.label=1;case 1:if(!(_i<_a.length))return[3,4];backgroundImage=_a[_i];return[5,_loop_1(backgroundImage)];case 2:_b.sent();_b.label=3;case 3:_i++;return[3,1];case 4:return[2];}});});};CanvasRenderer.prototype.renderSolidBorder=function(color,side,curvePoints){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){this.path(parsePathForBorder(curvePoints,side));this.ctx.fillStyle=asString(color);this.ctx.fill();return[2];});});};CanvasRenderer.prototype.renderDoubleBorder=function(color,width,side,curvePoints){return __awaiter(this,void 0,void 0,function(){var outerPaths,innerPaths;return __generator(this,function(_a){switch(_a.label){case 0:if(!(width<3))return[3,2];return[4,this.renderSolidBorder(color,side,curvePoints)];case 1:_a.sent();return[2];case 2:outerPaths=parsePathForBorderDoubleOuter(curvePoints,side);this.path(outerPaths);this.ctx.fillStyle=asString(color);
this.ctx.fill();innerPaths=parsePathForBorderDoubleInner(curvePoints,side);this.path(innerPaths);this.ctx.fill();return[2];}});});};CanvasRenderer.prototype.renderNodeBackgroundAndBorders=function(paint){return __awaiter(this,void 0,void 0,function(){var styles,hasBackground,borders,backgroundPaintingArea,side,_i,borders_1,border;var _this=this;return __generator(this,function(_a){switch(_a.label){case 0:this.applyEffects(paint.getEffects(2));styles=paint.container.styles;hasBackground=!isTransparent(styles.backgroundColor)||styles.backgroundImage.length;borders=[{style:styles.borderTopStyle,color:styles.borderTopColor,width:styles.borderTopWidth},{style:styles.borderRightStyle,color:styles.borderRightColor,width:styles.borderRightWidth},{style:styles.borderBottomStyle,color:styles.borderBottomColor,width:styles.borderBottomWidth},{style:styles.borderLeftStyle,color:styles.borderLeftColor,width:styles.borderLeftWidth}];backgroundPaintingArea=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(styles.backgroundClip,0),paint.curves);
if(!(hasBackground||styles.boxShadow.length))return[3,2];this.ctx.save();this.path(backgroundPaintingArea);this.ctx.clip();if(!isTransparent(styles.backgroundColor)){this.ctx.fillStyle=asString(styles.backgroundColor);this.ctx.fill();}return[4,this.renderBackgroundImage(paint.container)];case 1:_a.sent();this.ctx.restore();styles.boxShadow.slice(0).reverse().forEach(function(shadow){_this.ctx.save();var borderBoxArea=calculateBorderBoxPath(paint.curves);var maskOffset=shadow.inset?0:MASK_OFFSET;var shadowPaintingArea=transformPath(borderBoxArea,-maskOffset+(shadow.inset?1:-1)*shadow.spread.number,(shadow.inset?1:-1)*shadow.spread.number,shadow.spread.number*(shadow.inset?-2:2),shadow.spread.number*(shadow.inset?-2:2));if(shadow.inset){_this.path(borderBoxArea);_this.ctx.clip();_this.mask(shadowPaintingArea);}else{_this.mask(borderBoxArea);_this.ctx.clip();_this.path(shadowPaintingArea);}_this.ctx.shadowOffsetX=shadow.offsetX.number+maskOffset;_this.ctx.shadowOffsetY=shadow.offsetY.number;
_this.ctx.shadowColor=asString(shadow.color);_this.ctx.shadowBlur=shadow.blur.number;_this.ctx.fillStyle=shadow.inset?asString(shadow.color):'rgba(0,0,0,1)';_this.ctx.fill();_this.ctx.restore();});_a.label=2;case 2:side=0;_i=0,borders_1=borders;_a.label=3;case 3:if(!(_i<borders_1.length))return[3,13];border=borders_1[_i];if(!(border.style!==0&&!isTransparent(border.color)&&border.width>0))return[3,11];if(!(border.style===2))return[3,5];return[4,this.renderDashedDottedBorder(border.color,border.width,side,paint.curves,2)];case 4:_a.sent();return[3,11];case 5:if(!(border.style===3))return[3,7];return[4,this.renderDashedDottedBorder(border.color,border.width,side,paint.curves,3)];case 6:_a.sent();return[3,11];case 7:if(!(border.style===4))return[3,9];return[4,this.renderDoubleBorder(border.color,border.width,side,paint.curves)];case 8:_a.sent();return[3,11];case 9:return[4,this.renderSolidBorder(border.color,side,paint.curves)];case 10:_a.sent();_a.label=11;case 11:side++;_a.label=12;case 12:
_i++;return[3,3];case 13:return[2];}});});};CanvasRenderer.prototype.renderDashedDottedBorder=function(color,width,side,curvePoints,style){return __awaiter(this,void 0,void 0,function(){var strokePaths,boxPaths,startX,startY,endX,endY,length,dashLength,spaceLength,useLineDash,multiplier,numberOfDashes,minSpace,maxSpace,path1,path2,path1,path2;return __generator(this,function(_a){this.ctx.save();strokePaths=parsePathForBorderStroke(curvePoints,side);boxPaths=parsePathForBorder(curvePoints,side);if(style===2){this.path(boxPaths);this.ctx.clip();}if(isBezierCurve(boxPaths[0])){startX=boxPaths[0].start.x;startY=boxPaths[0].start.y;}else{startX=boxPaths[0].x;startY=boxPaths[0].y;}if(isBezierCurve(boxPaths[1])){endX=boxPaths[1].end.x;endY=boxPaths[1].end.y;}else{endX=boxPaths[1].x;endY=boxPaths[1].y;}if(side===0||side===2){length=Math.abs(startX-endX);}else{length=Math.abs(startY-endY);}this.ctx.beginPath();if(style===3){this.formatPath(strokePaths);}else{this.formatPath(boxPaths.slice(0,2));
}dashLength=width<3?width*3:width*2;spaceLength=width<3?width*2:width;if(style===3){dashLength=width;spaceLength=width;}useLineDash=true;if(length<=dashLength*2){useLineDash=false;}else if(length<=dashLength*2+spaceLength){multiplier=length/(2*dashLength+spaceLength);dashLength*=multiplier;spaceLength*=multiplier;}else{numberOfDashes=Math.floor((length+spaceLength)/(dashLength+spaceLength));minSpace=(length-numberOfDashes*dashLength)/(numberOfDashes-1);maxSpace=(length-(numberOfDashes+1)*dashLength)/numberOfDashes;spaceLength=maxSpace<=0||Math.abs(spaceLength-minSpace)<Math.abs(spaceLength-maxSpace)?minSpace:maxSpace;}if(useLineDash){if(style===3){this.ctx.setLineDash([0,dashLength+spaceLength]);}else{this.ctx.setLineDash([dashLength,spaceLength]);}}if(style===3){this.ctx.lineCap='round';this.ctx.lineWidth=width;}else{this.ctx.lineWidth=width*2+1.1;}this.ctx.strokeStyle=asString(color);this.ctx.stroke();this.ctx.setLineDash([]);if(style===2){if(isBezierCurve(boxPaths[0])){path1=boxPaths[3];
path2=boxPaths[0];this.ctx.beginPath();this.formatPath([new Vector(path1.end.x,path1.end.y),new Vector(path2.start.x,path2.start.y)]);this.ctx.stroke();}if(isBezierCurve(boxPaths[1])){path1=boxPaths[1];path2=boxPaths[2];this.ctx.beginPath();this.formatPath([new Vector(path1.end.x,path1.end.y),new Vector(path2.start.x,path2.start.y)]);this.ctx.stroke();}}this.ctx.restore();return[2];});});};CanvasRenderer.prototype.render=function(element){return __awaiter(this,void 0,void 0,function(){var stack;return __generator(this,function(_a){switch(_a.label){case 0:if(this.options.backgroundColor){this.ctx.fillStyle=asString(this.options.backgroundColor);this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height);}stack=parseStackingContexts(element);return[4,this.renderStack(stack)];case 1:_a.sent();this.applyEffects([]);return[2,this.canvas];}});});};return CanvasRenderer;}(Renderer));var isTextInputElement=function(container){if(container instanceof TextareaElementContainer){
return true;}else if(container instanceof SelectElementContainer){return true;}else if(container instanceof InputElementContainer&&container.type!==RADIO&&container.type!==CHECKBOX){return true;}return false;};var calculateBackgroundCurvedPaintingArea=function(clip,curves){switch(clip){case 0:return calculateBorderBoxPath(curves);case 2:return calculateContentBoxPath(curves);case 1:default:return calculatePaddingBoxPath(curves);}};var canvasTextAlign=function(textAlign){switch(textAlign){case 1:return'center';case 2:return'right';case 0:default:return'left';}};var iOSBrokenFonts=['-apple-system','system-ui'];var fixIOSSystemFonts=function(fontFamilies){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?fontFamilies.filter(function(fontFamily){return iOSBrokenFonts.indexOf(fontFamily)===-1;}):fontFamilies;};var ForeignObjectRenderer=(function(_super){__extends(ForeignObjectRenderer,_super);function ForeignObjectRenderer(context,options){var _this=_super.call(this,context,options)||this;
_this.canvas=options.canvas?options.canvas:document.createElement('canvas');_this.ctx=_this.canvas.getContext('2d');_this.options=options;_this.canvas.width=Math.floor(options.width*options.scale);_this.canvas.height=Math.floor(options.height*options.scale);_this.canvas.style.width=options.width+"px";_this.canvas.style.height=options.height+"px";_this.ctx.scale(_this.options.scale,_this.options.scale);_this.ctx.translate(-options.x,-options.y);_this.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+options.width+"x"+options.height+" at "+options.x+","+options.y+") with scale "+options.scale);return _this;}ForeignObjectRenderer.prototype.render=function(element){return __awaiter(this,void 0,void 0,function(){var svg,img;return __generator(this,function(_a){switch(_a.label){case 0:svg=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,element);return[4,loadSerializedSVG(svg)];
case 1:img=_a.sent();if(this.options.backgroundColor){this.ctx.fillStyle=asString(this.options.backgroundColor);this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale);}this.ctx.drawImage(img,-this.options.x*this.options.scale,-this.options.y*this.options.scale);return[2,this.canvas];}});});};return ForeignObjectRenderer;}(Renderer));var loadSerializedSVG=function(svg){return new Promise(function(resolve,reject){var img=new Image();img.onload=function(){resolve(img);};img.onerror=reject;img.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(svg));});};var Logger=(function(){function Logger(_a){var id=_a.id,enabled=_a.enabled;this.id=id;this.enabled=enabled;this.start=Date.now();}Logger.prototype.debug=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){if(typeof window!=='undefined'&&window.console&&typeof console.debug==='function'){console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));
}else{this.info.apply(this,args);}}};Logger.prototype.getTime=function(){return Date.now()-this.start;};Logger.prototype.info=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){if(typeof window!=='undefined'&&window.console&&typeof console.info==='function'){console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));}}};Logger.prototype.warn=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){if(typeof window!=='undefined'&&window.console&&typeof console.warn==='function'){console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));}else{this.info.apply(this,args);}}};Logger.prototype.error=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}if(this.enabled){if(typeof window!=='undefined'&&window.console&&typeof console.error==='function'){console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],args));
}else{this.info.apply(this,args);}}};Logger.instances={};return Logger;}());var Context=(function(){function Context(options,windowBounds){var _a;this.windowBounds=windowBounds;this.instanceName="#"+Context.instanceCount++;this.logger=new Logger({id:this.instanceName,enabled:options.logging});this.cache=(_a=options.cache)!==null&&_a!==void 0?_a:new Cache(this,options);}Context.instanceCount=1;return Context;}());var html2canvas=function(element,options){if(options===void 0){options={};}return renderElement(element,options);};if(typeof window!=='undefined'){CacheStorage.setContext(window);}var renderElement=function(element,opts){return __awaiter(void 0,void 0,void 0,function(){var ownerDocument,defaultView,resourceOptions,contextOptions,windowOptions,windowBounds,context,foreignObjectRendering,cloneOptions,documentCloner,clonedElement,container,_a,width,height,left,top,backgroundColor,renderOptions,canvas,renderer,root,renderer;var _b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t;
return __generator(this,function(_u){switch(_u.label){case 0:if(!element||typeof element!=='object'){return[2,Promise.reject('Invalid element provided as first argument')];}ownerDocument=element.ownerDocument;if(!ownerDocument){throw new Error("Element is not attached to a Document");}defaultView=ownerDocument.defaultView;if(!defaultView){throw new Error("Document is not attached to a Window");}resourceOptions={allowTaint:(_b=opts.allowTaint)!==null&&_b!==void 0?_b:false,imageTimeout:(_c=opts.imageTimeout)!==null&&_c!==void 0?_c:15000,proxy:opts.proxy,useCORS:(_d=opts.useCORS)!==null&&_d!==void 0?_d:false};contextOptions=__assign({logging:(_e=opts.logging)!==null&&_e!==void 0?_e:true,cache:opts.cache},resourceOptions);windowOptions={windowWidth:(_f=opts.windowWidth)!==null&&_f!==void 0?_f:defaultView.innerWidth,windowHeight:(_g=opts.windowHeight)!==null&&_g!==void 0?_g:defaultView.innerHeight,scrollX:(_h=opts.scrollX)!==null&&_h!==void 0?_h:defaultView.pageXOffset,scrollY:(_j=opts.scrollY)!==null&&_j!==void 0?_j:defaultView.pageYOffset
};windowBounds=new Bounds(windowOptions.scrollX,windowOptions.scrollY,windowOptions.windowWidth,windowOptions.windowHeight);context=new Context(contextOptions,windowBounds);foreignObjectRendering=(_k=opts.foreignObjectRendering)!==null&&_k!==void 0?_k:false;cloneOptions={allowTaint:(_l=opts.allowTaint)!==null&&_l!==void 0?_l:false,onclone:opts.onclone,ignoreElements:opts.ignoreElements,inlineImages:foreignObjectRendering,copyStyles:foreignObjectRendering};context.logger.debug("Starting document clone with size "+windowBounds.width+"x"+windowBounds.height+" scrolled to "+-windowBounds.left+","+-windowBounds.top);documentCloner=new DocumentCloner(context,element,cloneOptions);clonedElement=documentCloner.clonedReferenceElement;if(!clonedElement){return[2,Promise.reject("Unable to find element in cloned iframe")];}return[4,documentCloner.toIFrame(ownerDocument,windowBounds)];case 1:container=_u.sent();_a=isBodyElement(clonedElement)||isHTMLElement(clonedElement)?parseDocumentSize(clonedElement.ownerDocument)
:parseBounds(context,clonedElement),width=_a.width,height=_a.height,left=_a.left,top=_a.top;backgroundColor=parseBackgroundColor(context,clonedElement,opts.backgroundColor);renderOptions={canvas:opts.canvas,backgroundColor:backgroundColor,scale:(_o=(_m=opts.scale)!==null&&_m!==void 0?_m:defaultView.devicePixelRatio)!==null&&_o!==void 0?_o:1,x:((_p=opts.x)!==null&&_p!==void 0?_p:0)+left,y:((_q=opts.y)!==null&&_q!==void 0?_q:0)+top,width:(_r=opts.width)!==null&&_r!==void 0?_r:Math.ceil(width),height:(_s=opts.height)!==null&&_s!==void 0?_s:Math.ceil(height)};if(!foreignObjectRendering)return[3,3];context.logger.debug("Document cloned, using foreign object rendering");renderer=new ForeignObjectRenderer(context,renderOptions);return[4,renderer.render(clonedElement)];case 2:canvas=_u.sent();return[3,5];case 3:context.logger.debug("Document cloned, element located at "+left+","+top+" with size "+width+"x"+height+" using computed rendering");context.logger.debug("Starting DOM parsing");root=parseTree(context,clonedElement);
if(backgroundColor===root.styles.backgroundColor){root.styles.backgroundColor=COLORS.TRANSPARENT;}context.logger.debug("Starting renderer for element at "+renderOptions.x+","+renderOptions.y+" with size "+renderOptions.width+"x"+renderOptions.height);renderer=new CanvasRenderer(context,renderOptions);return[4,renderer.render(root)];case 4:canvas=_u.sent();_u.label=5;case 5:if((_t=opts.removeContainer)!==null&&_t!==void 0?_t:true){if(!DocumentCloner.destroy(container)){context.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore");}}context.logger.debug("Finished rendering");return[2,canvas];}});});};var parseBackgroundColor=function(context,element,backgroundColorOverride){var ownerDocument=element.ownerDocument;var documentBackgroundColor=ownerDocument.documentElement?parseColor(context,getComputedStyle(ownerDocument.documentElement).backgroundColor):COLORS.TRANSPARENT;var bodyBackgroundColor=ownerDocument.body?parseColor(context,getComputedStyle(ownerDocument.body).backgroundColor)
:COLORS.TRANSPARENT;var defaultBackgroundColor=typeof backgroundColorOverride==='string'?parseColor(context,backgroundColorOverride):backgroundColorOverride===null?COLORS.TRANSPARENT:0xffffffff;return element===ownerDocument.documentElement?isTransparent(documentBackgroundColor)?isTransparent(bodyBackgroundColor)?defaultBackgroundColor:bodyBackgroundColor:documentBackgroundColor:defaultBackgroundColor;};return html2canvas;})));;(function(root,factory){if(typeof exports==='object'){module.exports=factory();}else{root.VanillaToasts=factory();}})(this,function(){if(document.readyState==='complete'){init();}else{window.addEventListener('DOMContentLoaded',init);}function init(){var container=document.createElement('div');container.id='vanillatoasts-container';document.body.appendChild(container);}var VanillaToasts={};var autoincrement=0;VanillaToasts.create=function(options){var toast=document.createElement('div');toast.id=++autoincrement;toast.id='toast-'+toast.id;toast.className='vanillatoasts-toast';
var closeButton=document.createElement('span');closeButton.className='close'
closeButton.innerHTML='<svg class="svg-icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M574.293333 512L810.666667 748.373333V810.666667h-62.293334L512 574.293333 275.626667 810.666667H213.333333v-62.293334L449.706667 512 213.333333 275.626667V213.333333h62.293334L512 449.706667 748.373333 213.333333H810.666667v62.293334L574.293333 512z" fill="" /></svg>';toast.appendChild(closeButton);if(options.title){var h4=document.createElement('h4');h4.className='vanillatoasts-title';h4.innerHTML=options.title;toast.appendChild(h4);}if(options.text){var p=document.createElement('p');p.className='vanillatoasts-text';p.innerHTML=options.text;toast.appendChild(p);}if(options.icon){var img=document.createElement('img');img.src=options.icon;img.className='vanillatoasts-icon';toast.appendChild(img);}if(typeof options.callback==='function'){toast.addEventListener('click',options.callback);
}toast.hide=function(){toast.className+=' vanillatoasts-fadeOut';toast.addEventListener('animationend',removeToast,false);};if(options.timeout){setTimeout(toast.hide,options.timeout);}if(options.type){toast.className+=' vanillatoasts-'+options.type;}toast.addEventListener('click',toast.hide);function removeToast(){document.getElementById('vanillatoasts-container').removeChild(toast);}document.getElementById('vanillatoasts-container').appendChild(toast);return toast;};return VanillaToasts;});;window.MD5_js_loaded=true;var hexcase=0;var b64pad="";function hex_md5(s){return rstr2hex(rstr_md5(str2rstr_utf8(s)));}function b64_md5(s){return rstr2b64(rstr_md5(str2rstr_utf8(s)));}function any_md5(s,e){return rstr2any(rstr_md5(str2rstr_utf8(s)),e);}function hex_hmac_md5(k,d){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)));}function b64_hmac_md5(k,d){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)));}function any_hmac_md5(k,d,e){return rstr2any(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)),e);
}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72";}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),s.length*8));}function rstr_hmac_md5(key,data){var bkey=rstr2binl(key);if(bkey.length>16)bkey=binl_md5(bkey,key.length*8);var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^0x36363636;opad[i]=bkey[i]^0x5C5C5C5C;}var hash=binl_md5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binl_md5(opad.concat(hash),512+128));}function rstr2hex(input){var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var output="";var x;for(var i=0;i<input.length;i++){x=input.charCodeAt(i);output+=hex_tab.charAt((x>>>4)&0x0F)+hex_tab.charAt(x&0x0F);}return output;}function rstr2b64(input){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var output="";var len=input.length;for(var i=0;i<len;i+=3){var triplet=(input.charCodeAt(i)<<16)|(i+1<len?input.charCodeAt(i+1)<<8:0)|(i+2<len?input.charCodeAt(i+2):0);
for(var j=0;j<4;j++){if(i*8+j*6>input.length*8)output+=b64pad;else output+=tab.charAt((triplet>>>6*(3-j))&0x3F);}}return output;}function rstr2any(input,encoding){var divisor=encoding.length;var remainders=Array();var i,q,x,quotient;var dividend=Array(input.length/2);for(i=0;i<dividend.length;i++){dividend[i]=(input.charCodeAt(i*2)<<8)|input.charCodeAt(i*2+1);}while(dividend.length>0){quotient=Array();x=0;for(i=0;i<dividend.length;i++){x=(x<<16)+dividend[i];q=Math.floor(x/divisor);x-=q*divisor;if(quotient.length>0||q>0)quotient[quotient.length]=q;}remainders[remainders.length]=x;dividend=quotient;}var output="";for(i=remainders.length-1;i>=0;i--)output+=encoding.charAt(remainders[i]);return output;}function str2rstr_utf8(input){var output="";var i=-1;var x,y;while(++i<input.length){x=input.charCodeAt(i);y=i+1<input.length?input.charCodeAt(i+1):0;if(0xD800<=x&&x<=0xDBFF&&0xDC00<=y&&y<=0xDFFF){x=0x10000+((x&0x03FF)<<10)+(y&0x03FF);i++;}if(x<=0x7F)output+=String.fromCharCode(x);else if(x<=0x7FF)
output+=String.fromCharCode(0xC0|((x>>>6)&0x1F),0x80|(x&0x3F));else if(x<=0xFFFF)output+=String.fromCharCode(0xE0|((x>>>12)&0x0F),0x80|((x>>>6)&0x3F),0x80|(x&0x3F));else if(x<=0x1FFFFF)output+=String.fromCharCode(0xF0|((x>>>18)&0x07),0x80|((x>>>12)&0x3F),0x80|((x>>>6)&0x3F),0x80|(x&0x3F));}return output;}function str2rstr_utf16le(input){var output="";for(var i=0;i<input.length;i++)output+=String.fromCharCode(input.charCodeAt(i)&0xFF,(input.charCodeAt(i)>>>8)&0xFF);return output;}function str2rstr_utf16be(input){var output="";for(var i=0;i<input.length;i++)output+=String.fromCharCode((input.charCodeAt(i)>>>8)&0xFF,input.charCodeAt(i)&0xFF);return output;}function rstr2binl(input){var output=Array(input.length>>2);for(var i=0;i<output.length;i++)output[i]=0;for(var i=0;i<input.length*8;i+=8)output[i>>5]|=(input.charCodeAt(i/8)&0xFF)<<(i%32);return output;}function binl2rstr(input){var output="";for(var i=0;i<input.length*32;i+=8)output+=String.fromCharCode((input[i>>5]>>>(i%32))&0xFF);
return output;}function binl_md5(x,len){x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);
a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);
c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);}return Array(a,b,c,d);}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b);}function md5_ff(a,b,c,d,x,s,t){return md5_cmn((b&c)|((~b)&d),a,b,x,s,t);}function md5_gg(a,b,c,d,x,s,t){
return md5_cmn((b&d)|(c&(~d)),a,b,x,s,t);}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t);}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|(~d)),a,b,x,s,t);}function safe_add(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);}function bit_rol(num,cnt){return(num<<cnt)|(num>>>(32-cnt));};var SmartComments={isMobile:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)),
userRights:undefined,enabled:undefined,alternativeParsing:$('.sc-highlighting-method').data('parser')==="alternative",bodyContainer:$(mw.config.get('wgSmartComments').bodyContainer),activeSkin:mw.config.get('skin'),enabledAddons:mw.config.get('wgSmartComments').enabledAddons,init:function(rights){var self=this;setTimeout(function(){self.userRights=rights;self.bindGlobalEvents();rangy.init();if(window.location.href.indexOf('scenabled=1')!==-1){SmartComments.Events.trigger(SmartComments.Events.enums.DEBUG_MODE);}},200);},bindGlobalEvents:function(){SmartComments.Buttons.bindEvents();},enableCommentMode:function(e){var self=this;SmartComments.helperFunctions.toggleSpinner(e.pageX,e.pageY);SmartComments.Api.Comments.list('open',function(commentsOnPage){SmartComments.Api.Comments.inBlockedMode(function(inBlockedMode){var onSpecialPage=mw.config.get('wgCanonicalSpecialPageName')==='SmartComments';SmartComments.Selection.enabled=!inBlockedMode&&!onSpecialPage;SmartComments.Highlighting.bindEvents();
SmartComments.Highlighting.loadFromCommentsOnPage(commentsOnPage);if(self.enabled===undefined){SmartComments.Selection.bindEvents();}self.enabled=true;$('body').addClass('sc-enabled');SmartComments.helperFunctions.toggleSpinner();SmartComments.Events.trigger(SmartComments.Events.enums.OPEN_COMMENT_ID);});});},disableCommentMode:function(){this.enabled=false;SmartComments.Selection.enabled=false;SmartComments.Highlighting.destruct();$('body').removeClass('sc-enabled');},getNodeRoot:function(){return document.getElementById('mw-content-text');},helperFunctions:{getIdFromClass:function(elementClass){return elementClass.match(/smartcomment-hl-(\d+)/)[1];},encodeHTML:function(dirtyString){var container=document.createElement('div');var text=document.createTextNode(dirtyString);container.appendChild(text);return container.innerHTML;},decodeHTML:function(encodedString){var div=document.createElement('div');div.innerHTML=encodedString;return div.textContent;},screenshot:function(element,options,callback){
element=element==="default"?$('#mw-content-text'):$(element);html2canvas(document.body,options).then(function(canvas){canvas.classList.add('sic-canvas');var dataURL=canvas.toDataURL("image/jpeg");canvas.remove();callback(dataURL);});},toggleSpinner:function(x,y){var id='sic-spinner';if($('#'+id).length!==0){$('#'+id).remove();return;}var spinner=$('<div id="'+id+'" ><svg width="36" height="36" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_OSmW{transform-origin:center;animation:spinner_T6mA .75s step-end infinite}@keyframes spinner_T6mA{8.3%{transform:rotate(30deg)}16.6%{transform:rotate(60deg)}25%{transform:rotate(90deg)}33.3%{transform:rotate(120deg)}41.6%{transform:rotate(150deg)}50%{transform:rotate(180deg)}58.3%{transform:rotate(210deg)}66.6%{transform:rotate(240deg)}75%{transform:rotate(270deg)}83.3%{transform:rotate(300deg)}91.6%{transform:rotate(330deg)}100%{transform:rotate(360deg)}}</style><g class="spinner_OSmW"><rect x="11" y="1" width="2" height="5" opacity=".14"/><rect x="11" y="1" width="2" height="5" transform="rotate(30 12 12)" opacity=".29"/><rect x="11" y="1" width="2" height="5" transform="rotate(60 12 12)" opacity=".43"/><rect x="11" y="1" width="2" height="5" transform="rotate(90 12 12)" opacity=".57"/><rect x="11" y="1" width="2" height="5" transform="rotate(120 12 12)" opacity=".71"/><rect x="11" y="1" width="2" height="5" transform="rotate(150 12 12)" opacity=".86"/><rect x="11" y="1" width="2" height="5" transform="rotate(180 12 12)"/></g></svg></div>');
spinner.css('position','absolute');spinner.css('top',y);spinner.css('left',x);$('body').append(spinner);}},user:{canManageComments:function(){return SmartComments.userRights.indexOf("manage-inlinecomments")!==-1;},canAddComments:function(){return SmartComments.userRights.indexOf("add-inlinecomments")!==-1;}},};if(!SmartComments.isMobile){mw.user.getRights().then(function(rights){SmartComments.init(rights);});};;var SmartComments=SmartComments||{};SmartComments.Events={enums:{SELECTION_ACTIVE:'sc-selection-active',COMMENT_GROUP_OPEN:'sc-comment-group-open',DEBUG_MODE:'sc-debug-mode',OPEN_COMMENT_ID:'sc-open-comment'},trigger:function(id,data){$(window).trigger(id,data??{});}};;$(window).on(SmartComments.Events.enums.SELECTION_ACTIVE,function(){SmartComments.Panels.CommentGroup.close();});;$(window).on(SmartComments.Events.enums.DEBUG_MODE,function(e){console.log("Auto enabling SmartComments due debug mode");if(e){SmartComments.enableCommentMode(e);}else{$('.sic-enable-commenting').click();
}});;$(window).on(SmartComments.Events.enums.OPEN_COMMENT_ID,function(data){var queryString=window.location.search;var urlParams=new URLSearchParams(queryString);var commentId=urlParams.get('focusId');if(mw.config.get('wgCanonicalSpecialPageName')==='SmartComments'){var commentId=data.pass;if($('div.sc-group-main').length!==0){SmartComments.Panels.CommentGroup.close();}SmartComments.Panels.CommentGroup.open(commentId,null,null,true);}else if(commentId){$('span[data-comment-id=\''+commentId+'\']').click();}});;var SmartComments=SmartComments||{};SmartComments.Api=SmartComments.Api||{};SmartComments.Api.Comments={mwApi:new mw.Api(),save:function(text){if(mw.config.get('wgCanonicalSpecialPageName')!='SmartComments'&&!this.isValid()){return{success:'0',message:'selection-error'};}var posString=typeof SmartComments.Selection.selection==="string"?SmartComments.Selection.selection:SmartComments.Selection.selection.text+"|"+SmartComments.Selection.selection.index,result=JSON.parse($.ajax({type:'POST',
url:mw.util.wikiScript('api')+'?action=smartcomments&method=new&format=json',data:{pos:posString,comment:typeof SmartComments.Selection.parent!=='undefined'?SmartComments.Selection.parent:'',text:text,page:mw.config.get('wgPageName'),image:SmartComments.Selection.image},async:false}).responseText);return typeof result.smartcomments==='undefined'?{success:'0',message:'api-error'}:result.smartcomments;},get:function(commentid,group,callback){this.mwApi.get({action:'smartcomments',method:'get',comment:commentid}).done(function(data){var result=(typeof data.smartcomments!=='undefined'&&typeof data.smartcomments.comment!=='undefined')?data.smartcomments.comment:null;callback(group,result);});},list:function(status,callback){this.mwApi.get({action:'smartcomments',method:'lista',page:mw.config.get('wgPageName'),status:status}).done(function(data){var result=typeof data.smartcomments!=='undefined'&&typeof data.smartcomments.anchors!=='undefined'?data.smartcomments.anchors:[];callback(result);});
},isValid:function(){return SmartComments.Selection.enabled||typeof SmartComments.Selection.selection==='undefined';},update:function(commentid,status,text,page){if(typeof page==='undefined'){page=mw.config.get('wgPageName');}var result=JSON.parse($.ajax({type:'POST',url:mw.util.wikiScript('api')+'?action=smartcomments&method=update&format=json',data:{comment:commentid,status:status,text:text,page:page},async:false}).responseText);return(typeof result.smartcomments==='undefined')?{success:'0',message:'api-error'}:result.smartcomments;},delete:function(commentid,page){if(typeof page==='undefined'){page=mw.config.get('wgPageName');}var result=JSON.parse($.ajax({type:'POST',url:mw.util.wikiScript('api')+'?action=smartcomments&method=delete&format=json',data:{comment:commentid,page:page},async:false}).responseText);return(typeof result.smartcomments==='undefined')?{success:'0',message:'api-error'}:result.smartcomments;},inBlockedMode:function(callback){this.mwApi.get({action:'smartcomments',
method:'blockedmode'}).done(function(data){var result=(typeof data.smartcomments!=='undefined'&&typeof data.smartcomments.message!=='undefined')?data.smartcomments.message:null;callback(result=='true');});}};;SmartComments.notifications={error:function(title,message){this.echo("error",title,message);},success:function(title,message){this.echo("success",title,message);},info:function(title,message){this.echo(null,title,message);},echo:function(type,title,text){VanillaToasts.create({title:title,text:text,type:type,timeout:mw.config.get("wgSmartComments").popupTimeout});}};SmartComments.popup={popupString:undefined,widget:undefined,close:function(visible){if(!visible){SmartComments.Selection.deselect(false);$('#sic-popup').remove();}},open:function(){this.widget.toggle(true);},create:function(x,y,linkElement){var self=this;if(typeof this.widget!=="undefined"){$('#sic-popup').remove();}this.widget=new OO.ui.PopupWidget({$content:$('<p>'+this.buttons(linkElement)+'</p>'),padded:true,anchor:false,
autoClose:true,width:'auto',id:'sic-popup'});this.widget.on('toggle',this.close);$(document.body).append(this.widget.$element);setTimeout(function(){$('#sic-popup').css({top:y,left:x});},10);return this;},buttons:function(linkElement){var newCommentButton=new OO.ui.ButtonWidget({label:mw.msg('sic-button-new-comment'),id:'sc-add-comment',icon:'ongoingConversation'});var linkButton=new OO.ui.ButtonWidget({label:mw.msg('sic-button-goto-link'),id:'sc-goto-link',icon:'link'});var button2=(typeof linkElement!=='undefined')?linkButton:false;var buttonGroup=new OO.ui.ButtonGroupWidget({items:(button2)?[newCommentButton,button2]:[newCommentButton]});return buttonGroup.$element.html();}};;var SmartComments=SmartComments||{};SmartComments.Buttons={bindEvents:function(){SmartComments.Buttons.AddComment.bindEvents();SmartComments.Buttons.EnableCommenting.bindEvents();SmartComments.Buttons.DisableCommenting.bindEvents();SmartComments.Buttons.CommentLinks.bindEvents();}};var SmartComments=SmartComments||{};
SmartComments.Buttons=SmartComments.Buttons||{};SmartComments.Buttons.AddComment={bindEvents:function(){$(document).on('click','#sc-add-comment',function(e){SmartComments.Selection.deselect(false);SmartComments.Dialogs.NewCommentDialog.open();SmartComments.popup.close();e.preventDefault();});}};;var SmartComments=SmartComments||{};SmartComments.Buttons=SmartComments.Buttons||{};SmartComments.Buttons.EnableCommenting={bindEvents:function(){$(document).on('click','.sic-enable-commenting',function(e){$('.sic-enable-commenting a').parent().addClass('active selected');$('.sic-enable-commenting').removeClass('sic-enable-commenting').addClass('sic-disable-commenting');$(this).find('a').addClass('active');SmartComments.enableCommentMode(e);e.preventDefault();});}};;var SmartComments=SmartComments||{};SmartComments.Buttons=SmartComments.Buttons||{};SmartComments.Buttons.DisableCommenting={bindEvents:function(){$(document).on('click','.sic-disable-commenting',function(e){$('.sic-disable-commenting a')
.parent().removeClass('active selected');$('.sic-disable-commenting').removeClass('sic-disable-commenting').addClass('sic-enable-commenting');$(this).find('a').removeClass('active');SmartComments.disableCommentMode();e.preventDefault();});}};;var SmartComments=SmartComments||{};SmartComments.Buttons=SmartComments.Buttons||{};SmartComments.Buttons.CommentLinks={openComment:function(commentId,refElement,isBroken){if(SmartComments.enabled===true){if($('div.sc-group-main').length!==0){SmartComments.Panels.CommentGroup.close();}SmartComments.Panels.CommentGroup.open(commentId,'.smartcomment-hl-'+commentId,refElement,isBroken);}},bindEvents:function(){var self=this;$(document).on('click','*[class*=smartcomment-hl-]',function(e){var $class=$(this).attr('class'),$id=SmartComments.helperFunctions.getIdFromClass($class);self.openComment($id,$(this));if(SmartComments.enabled===true){e.preventDefault();}});}};;var SmartComments=SmartComments||{};SmartComments.Dialogs={destruct:function(dialog){
SmartComments.Selection.deselect();if(typeof dialog!=='undefined'){dialog.close();}}};var SmartComments=SmartComments||{};SmartComments.Dialogs=SmartComments.Dialogs||{};SmartComments.Dialogs.Actions=SmartComments.Dialogs.Actions||{};SmartComments.Dialogs.Actions.CommentSaveProcess={minCommentLength:1,doCancel:function(dialog){SmartComments.Dialogs.destruct(dialog);},doSave:function(dialog,commentText){var self=this;return new OO.ui.Process(function(){if(commentText.length<self.minCommentLength){return typeof dialog==="undefined"?mw.msg('sic-error-empty'):new OO.ui.Error(mw.msg('sic-error-empty'));}else{var result=SmartComments.Api.Comments.save(commentText);if(result.success=="1"||result.success===true){if(typeof dialog!=="undefined"){dialog.close();SmartComments.notifications.success(mw.msg('sic-added-comment'),mw.msg('sic-added-comment-refreshing'));setTimeout(function(){var parser=new URL(window.location);parser.searchParams.set('action','screfresh');window.location=parser.href;},2000);
}if(typeof dialog==="undefined"){return true;}}else if(typeof result.message!=='undefined'){return typeof dialog==="undefined"?result.message:new OO.ui.Error(result.message);}else{return typeof dialog==="undefined"?'Unknown error':new OO.ui.Error("Undefined error happened");}}});}};var SmartComments=SmartComments||{};SmartComments.Dialogs=SmartComments.Dialogs||{};SmartComments.Dialogs.NewCommentDialog={open:function(){function commentDialog(config){commentDialog.super.call(this,config);}OO.inheritClass(commentDialog,OO.ui.ProcessDialog);commentDialog.static.name='newComment';commentDialog.static.title=mw.msg('sic-title-new');commentDialog.static.actions=[{label:mw.msg('sic-button-save'),action:'save',flags:['primary','progressive']},{flags:'safe',action:'cancel',label:mw.msg('sic-button-cancel')}];commentDialog.prototype.getBodyHeight=function(){return 235;};commentDialog.prototype.initialize=function(){commentDialog.super.prototype.initialize.call(this);this.panel=new OO.ui.PanelLayout({
padded:true,expanded:false});this.content=new OO.ui.FieldsetLayout();this.commentInput=new OO.ui.MultilineTextInputWidget({value:'',autosize:true,maxRows:8});this.field=new OO.ui.FieldLayout(this.commentInput,{label:mw.msg('sic-input-newcomment'),align:'top'});this.content.addItems([this.field]);this.panel.$element.prepend($('<img class="sic-selected-content" src="'+SmartComments.Selection.image+'" />'));this.panel.$element.append(this.content.$element);this.$body.append(this.panel.$element);this.commentInput.connect(this,{'change':'onCommentInputChange'});};commentDialog.prototype.onCommentInputChange=function(value){this.actions.setAbilities({save:value.length>0&&value.length});};commentDialog.prototype.getActionProcess=function(action){if(action==='cancel'){SmartComments.Dialogs.Actions.CommentSaveProcess.doCancel(this);}else if(action==='save'){return SmartComments.Dialogs.Actions.CommentSaveProcess.doSave(this,this.commentInput.getValue());}return commentDialog.super.prototype.getActionProcess.call(this,action);
};commentDialog.prototype.getTeardownProcess=function(data){return commentDialog.super.prototype.getTeardownProcess.call(this,data).first(function(){$('#sc-wm').remove();},this);};var windowManager=new OO.ui.WindowManager({id:'sc-wm'});$(document.body).append(windowManager.$element);var myDialog=new commentDialog();windowManager.addWindows([myDialog]);windowManager.openWindow(myDialog);}};;var SmartComments=SmartComments||{};SmartComments.Panels={bindEvents:function(){}};var SmartComments=SmartComments||{};SmartComments.Panels=SmartComments.Panels||{};SmartComments.Panels.CommentGroup={refElement:null,active:false,isBroken:false,replies:[],anchor:undefined,last:{referringElement:undefined},enums:{ACTION_CLOSED:0,ACTION_COMPLETED:1,ACTION_DELETED:2},getBaseSelector:function(){if(SmartComments.activeSkin==='vector'){return SmartComments.bodyContainer.parent().parent();}else if(SmartComments.activeSkin==='rhswiki'){return SmartComments.bodyContainer.parent().parent().parent();}else if(SmartComments.activeSkin==='gemmaonline'){
return SmartComments.bodyContainer;}else{return SmartComments.bodyContainer;}},templating:{group:$($.parseHTML('<div class="sc-group-main"><!--<div class="smartcomment-overlay"></div>--><div class="smartcomment-panel"></div></div>')),comment:$($.parseHTML('<span><div class="meta"><h5>$AUTHOR$</h5><span class="date">$DATE$</span></div><div class="comment"><p>$TEXT$</p></div></span>'))},close:function(action){try{this.refElement=null;this.setActive(false);this.last.referringElement.removeClass("sc-active");this.refElement=null;$('.smartcomment-panel').empty();$('div.sc-group-main').remove();if(action===this.enums.ACTION_COMPLETED){SmartComments.notifications.success(mw.msg('sic-popup-completed'),mw.msg('sic-added-comment-refreshing'));}else if(action===this.enums.ACTION_DELETED){SmartComments.notifications.success(mw.msg('sic-popup-deleted'),mw.msg('sic-added-comment-refreshing'));}else if(action===this.enums.ACTION_CLOSED){SmartComments.notifications.success(mw.msg('sic-popup-closed'),
mw.msg('sic-added-comment-refreshing'));}}catch(e){}},create:function(comment){this.anchor=SmartComments.Highlighting.anchors[comment.id];var baseSelector=this.getBaseSelector();var that=this;var toolFactory=new OO.ui.ToolFactory();var toolGroupFactory=new OO.ui.ToolGroupFactory();var toolbar=new OO.ui.Toolbar(toolFactory,toolGroupFactory);var includes=[];function closeButton(){closeButton.parent.apply(this,arguments);}OO.inheritClass(closeButton,OO.ui.Tool);closeButton.static.name='close';closeButton.static.icon='close';closeButton.static.title=mw.msg('sic-button-close');closeButton.prototype.onSelect=function(){SmartComments.Panels.CommentGroup.close();};closeButton.prototype.onUpdateState=function(){};toolFactory.register(closeButton);includes.push('close');if(!mw.config.get('wgSmartComments').directComment){function replyButton(){replyButton.parent.apply(this,arguments);}OO.inheritClass(replyButton,OO.ui.Tool);replyButton.static.name='newComment';replyButton.static.icon='speechBubbleAdd';
replyButton.static.title=mw.msg('sic-button-new-reply');replyButton.prototype.onSelect=function(){SmartComments.Panels.CommentGroup.createReply(comment.id);this.setActive(false);};replyButton.prototype.onUpdateState=function(){};toolFactory.register(replyButton);includes.push('newComment');}if(comment.author===mw.config.get('wgUserName')||SmartComments.user.canManageComments()){function completeButton(){completeButton.parent.apply(this,arguments);}OO.inheritClass(completeButton,OO.ui.Tool);completeButton.static.name='complete';completeButton.static.icon='check';completeButton.static.title=mw.msg('sic-button-complete');completeButton.prototype.onSelect=function(){SmartComments.Panels.CommentGroup.complete(comment.id);this.setActive(false);};completeButton.prototype.onUpdateState=function(){};toolFactory.register(completeButton);includes.push('complete');}if(comment.author===mw.config.get('wgUserName')||SmartComments.user.canManageComments()){function deleteButton(){deleteButton.parent.apply(this,arguments);
}OO.inheritClass(deleteButton,OO.ui.Tool);deleteButton.static.name='delete';deleteButton.static.icon='trash';deleteButton.static.title=mw.msg('sic-button-delete');deleteButton.prototype.onSelect=function(){SmartComments.Panels.CommentGroup.delete(comment.id);this.setActive(false);};deleteButton.prototype.onUpdateState=function(){};toolFactory.register(deleteButton);includes.push('delete');}if(SmartComments.user.canManageComments()){function overviewButton(){overviewButton.parent.apply(this,arguments);}OO.inheritClass(overviewButton,OO.ui.Tool);overviewButton.static.name='overview';if(mw.config.get('wgCanonicalSpecialPageName')==='SmartComments'){overviewButton.static.icon='article';overviewButton.static.title=mw.msg('sic-button-see-page');}else{overviewButton.static.icon='articles';overviewButton.static.title=mw.msg('sic-button-overview');}overviewButton.prototype.onSelect=function(){SmartComments.Panels.CommentGroup.goToOverview(comment.id,comment.page);this.setActive(false);};
overviewButton.prototype.onUpdateState=function(){};toolFactory.register(overviewButton);includes.push('overview');}toolbar.setup([{type:'bar',include:includes}]);var commentGroupFrame=new OO.ui.PanelLayout({expanded:false,framed:true,classes:['smartcomment-commentgroup'],id:'sc-commentgroup-'+comment.id});var contentFrame=new OO.ui.PanelLayout({expanded:false,padded:true,classes:['sic-container sc-plh']});if(this.isBroken){contentFrame.$element.append(new OO.ui.PanelLayout({expanded:false,padded:false,$content:$('<img src="'+comment.positionImage+'" />'),classes:['sc-broken']}).$element);}contentFrame.$element.append(new OO.ui.PanelLayout({expanded:false,padded:false,$content:this.parseComment(comment),classes:['smartcomment-comment','comment-type-anchor']}).$element);var lastAuthor=comment.modifiedBy;$.each(comment.replies,function(k,reply){contentFrame.$element.append(new OO.ui.PanelLayout({expanded:false,padded:true,$content:that.parseComment(reply),classes:['smartcomment-comment-reply']
}).$element);lastAuthor=reply.modifiedBy;});if(mw.config.get('wgSmartComments').directComment&&lastAuthor!==mw.user.getName()){SmartComments.Api.Comments.inBlockedMode(function(inBlockedMode){if(!inBlockedMode){contentFrame.$element.append(SmartComments.Panels.InlineReply.create(contentFrame).$element);}});}commentGroupFrame.$element.append(toolbar.$element,contentFrame.$element);baseSelector.before().append(this.templating.group);baseSelector.find('div.smartcomment-panel').append(commentGroupFrame.$element);commentGroupFrame.$element.animate({left:"0px"},250);var top=$(window).scrollTop();if(this.anchor&&typeof this.anchor.elementPos!=="undefined"){top=this.anchor.elementPos.top-100;}else if(this.refElement!==null){top=this.refElement.position().top;}baseSelector.find('div.smartcomment-panel').css({top:top,'max-height':"calc(100% - "+(this.isBroken?0:top)+'px)'});this.setActive(true);},complete:function(commentid){if(SmartComments.Api.Comments.update(commentid,'completed','')){this.close(this.enums.ACTION_COMPLETED);
setTimeout(function(){var parser=new URL(window.location);parser.searchParams.set('action','screfresh');window.location=parser.href;},1500);}else{SmartComments.notifications.error('Error!','Couldnt close comment thread');}},delete:function(commentid){if(SmartComments.Api.Comments.delete(commentid)){this.close(this.enums.ACTION_DELETED);setTimeout(function(){var parser=new URL(window.location);parser.searchParams.set('action','screfresh');window.location=parser.href;},1500);}else{SmartComments.notifications.error('Error!','Couldnt close comment thread');}},edit:function(comment){var $anchorElement=$('div.smartcomment-panel div.comment-type-anchor');var commentTextField=$anchorElement.find('div.comment');commentTextField.html(SmartComments.comment.forms.inlineEditPanel(commentTextField.text(),commentTextField).$element.html());},goToOverview:function(commentId,pageTitle){if(mw.config.get('wgCanonicalSpecialPageName')==='SmartComments'){var commentPage=new mw.Title(pageTitle);location.assign(commentPage.getUrl({'scenabled':'1','focusId':commentId}));
}else{var pageName=mw.config.get('wgPageName');var scSpecial=new mw.Title('SmartComments',-1);var redirectUrl=mw.config.get('wgServer')+scSpecial.getUrl({'page':pageName});location.assign(redirectUrl);}},open:function(anchorId,elementClass,refElement,isBroken){$(elementClass).addClass("sc-active");this.isBroken=isBroken;this.last.referringElement=$(elementClass).css({'z-index':100,'position':'relative'});SmartComments.Api.Comments.get(anchorId,this,function(group,comment){SmartComments.Events.trigger(SmartComments.Events.enums.COMMENT_GROUP_OPEN);SmartComments.Selection.setSelectionFromString(comment.position);SmartComments.Selection.parent=comment.id;if(!isBroken){group.refElement=refElement;}group.create(comment);});},parseComment:function(comment,antiXss){antiXss=typeof antiXss!=='undefined'?antiXss:false;return this.templating.comment.html().replace('$AUTHOR$',comment.author).replace('$DATE$',comment.datetime).replace('$TEXT$',antiXss?SmartComments.helperFunctions.encodeHTML(comment.text):$(comment.text).text());
},addReply:function(text){var replyFrame=new OO.ui.PanelLayout({expanded:false,padded:true,$content:this.parseComment({datetime:mw.msg('sic-date-justnow'),text:text,author:mw.config.get('wgUserName')}),classes:['smartcomment-comment-reply']}).$element;$('div.sc-plh').append(replyFrame);},setActive:function(active){this.active=active;}};var SmartComments=SmartComments||{};SmartComments.Panels=SmartComments.Panels||{};SmartComments.Panels.InlineReply={create:function(contentFrame){this.panel=new OO.ui.PanelLayout({padded:true,expanded:false,classes:['smartcomment-reply']});this.content=new OO.ui.FieldsetLayout();this.commentInput=new OO.ui.MultilineTextInputWidget({value:'',maxRows:5,autosize:true});this.commentSaveButton=new OO.ui.ButtonWidget({label:mw.msg('sic-button-new-reply')});var self=this;var wasSubmittedBefore=false;this.commentSaveButton.on('click',function(){if(wasSubmittedBefore){return false;}var commentText=self.commentInput.getValue(),wasSaved=SmartComments.Dialogs.Actions.CommentSaveProcess.doSave(undefined,commentText).steps[0].callback();
if(wasSaved!==true){SmartComments.notifications.error(mw.msg('sic-error-title'),wasSaved);}else{contentFrame.$element.append(new OO.ui.PanelLayout({expanded:false,padded:true,$content:SmartComments.Panels.CommentGroup.parseComment({author:mw.config.get('wgUserName'),datetime:mw.msg('sic-date-justnow'),text:commentText},true),classes:['smartcomment-comment-reply']}).$element);self.commentInput.setValue("");$('div.smartcomment-panel div.smartcomment-commentgroup div.smartcomment-reply').appendTo('div.sc-plh');wasSubmittedBefore=true;$('.smartcomment-reply').remove();}});this.fieldComment=new OO.ui.FieldLayout(this.commentInput,{label:mw.msg('sic-input-commenttext'),align:'top'});this.fieldSaveButton=new OO.ui.FieldLayout(this.commentSaveButton);this.content.addItems([this.fieldComment,this.fieldSaveButton]);this.panel.$element.append(this.content.$element);return this.panel;}};var SmartComments=SmartComments||{};SmartComments.Panels=SmartComments.Panels||{};SmartComments.Panels.CommentTimeline={
supportedSkins:['vector','gemmaonline','rhswiki'],positions:[],idsHandled:[],templates:{base:$('<div class="sic-timeline-container" />'),item:$('<div class="sic-timeline-item"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="13" fill="currentColor" class="bi bi-chat-right-text" viewBox="0 0 16 12"><path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/></svg></div>'),hover:$('<div class="sic-timeline-item-hover" />')},skinSelectors:{vector:$('.mw-body'),gemmaonline:$('section#mainContent'),rhswiki:$('main.mainContainer'),getSelector:function(){console.log(SmartComments.activeSkin);if(SmartComments.activeSkin==='gemmaonline'){return this.gemmaonline;}else if(SmartComments.activeSkin==='rhswiki'){return this.rhswiki;}else{return this.vector;}},getMargin:function(){if(SmartComments.activeSkin==='gemmaonline'){return 135;}else if(SmartComments.activeSkin==='rhswiki'){
return 115;}else{return 80;}}},isSkinSupported:function(){return SmartComments.Panels.CommentTimeline.supportedSkins.indexOf(SmartComments.activeSkin)!==-1;},createBase:function(){this.templates.base.appendTo(SmartComments.getNodeRoot(true)).css({top:-this.skinSelectors.getSelector().position().top-this.skinSelectors.getMargin()});this.bindEvents();},addToBase:function(comment){var self=this,id=typeof comment.data_id!=="undefined"?comment.data_id:comment;if(this.idsHandled.indexOf(id)!==-1){return;}setTimeout(function(){var item=self.templates.item.clone(),ref=$('.smartcomment-hl-'+id),positionTop=0,isBroken=ref.length===0;if(SmartComments.activeSkin==='rhswiki'){positionTop=$('main.mainContainer').height()+SmartComments.Panels.CommentTimeline.skinSelectors.getMargin()+120;}else{positionTop=$('#bodyContent').height()+90;}if(!isBroken){positionTop=typeof comment.elementPos!=="undefined"?comment.elementPos.top:ref.offset().top;}else{item.addClass('broken');item.attr('data-selection',comment.posimg);
}if(self.positions.indexOf(positionTop)!==-1){positionTop+=5;}if(comment.hasReplies==='true'){item.addClass('sic-timeline-item-hasreplies');}item.css({top:positionTop,right:-3,position:'absolute'});item.appendTo(self.templates.base);item.on('mouseover',function(){ref.addClass('active');}).on('mouseout',function(){ref.removeClass('active');}).on('click',function(){SmartComments.Buttons.CommentLinks.openComment(id,isBroken?item:ref,isBroken);});self.positions.push(positionTop);self.idsHandled.push(id);},1);},bindEvents:function(){$(document).on('mouseover','.sic-timeline-item.broken',function(e){var selection=$(this).data('selection'),hover=SmartComments.Panels.CommentTimeline.templates.hover.clone(),img=$('<img src="'+selection+'" width="500" />');if(typeof selection!=="undefined"){hover.append('<h2>'+mw.msg("sic-unlocalized-comment")+'</h2>');hover.append(img);hover.css({position:'absolute',right:"30px",top:e.pageY-50,border:"2px solid #ff000050"});$('body').append(hover);}}).on('mouseout','.sic-timeline-item.broken',function(){
$('.sic-timeline-item-hover').each(function(){$(this).remove();});});},destruct:function(){$('.sic-timeline-container').remove();}};;var SmartComments=SmartComments||{};SmartComments.Highlighting={highlighter:rangy.createHighlighter(),enums:{HIGHLIGHT_CLASS:'sic-highlighted-item'},comments:[],anchors:[],Types:{Callers:{main:[],addon:[]},Enums:{MAIN:'main',ADDON:'addon'},Register:function(type,handler){this.Callers[type].push(handler);}},bindEvents:function(){this.highlighter.addClassApplier(rangy.createClassApplier(this.enums.HIGHLIGHT_CLASS,{ignoreWhiteSpace:true}));},destruct:function(){for(var i=0;i<this.Types.Callers[this.Types.Enums.ADDON].length;i++){this.Types.Callers[this.Types.Enums.ADDON][i].destruct();}$.each(this.comments,function(k,comment){if(comment){$('*.smartcomment-hl-'+comment.data_id).removeClass('smartcomment-hl-'+comment.data_id).removeAttr('data-comment-id');}});SmartComments.Panels.CommentTimeline.destruct();},loadFromCommentsOnPage:function(commentsOnPage){this.comments=commentsOnPage;
if(SmartComments.Panels.CommentTimeline.isSkinSupported()){SmartComments.Panels.CommentTimeline.createBase();}for(var i=0;i<commentsOnPage.length;i++){var comment=this.highlightOnPage(commentsOnPage[i]);if(SmartComments.Panels.CommentTimeline.isSkinSupported()){SmartComments.Panels.CommentTimeline.addToBase(commentsOnPage[i]);}this.anchors[comment.data_id]=comment;}},highlightOnPage:function(comment){for(var i=0;i<this.Types.Callers[this.Types.Enums.MAIN].length;i++){var caller=this.Types.Callers[this.Types.Enums.MAIN][i].init(comment);if(caller.isCorrectType()){return caller.highlight();}}for(var i=0;i<this.Types.Callers[this.Types.Enums.ADDON].length;i++){var caller=this.Types.Callers[this.Types.Enums.ADDON][i].init(comment);if(caller.isCorrectType()){comment.pos=comment.pos.split('%')[1];return caller.highlight();}}return false;},addDataAttributesToElement:function(element,comment){element.attr('data-comment-id',comment.data_id);}};;var SmartComments=SmartComments||{};var highlighter=SmartComments.Highlighting=SmartComments.Highlighting||{};
SmartComments.Highlighting.Types.WordIndex={comment:undefined,highlighter:rangy.createHighlighter(),init:function(comment){this.comment=comment;return this;},isCorrectType:function(){return!/<[^>]*>/.test(this.comment.pos.replace(/&lt;/g,'<').replace(/&gt;/g,'>'))&&this.comment.pos.indexOf('|')!==-1;},highlight:function(){var lastPipePos=this.comment.pos.lastIndexOf('|'),text=this.comment.pos.substring(0,lastPipePos),index=parseInt(this.comment.pos.substring(lastPipePos+1),10),word=text.replace(/&lt;/g,'<').replace(/&gt;/g,'>'),baseEl=SmartComments.getNodeRoot(),range=rangy.createRange(),searchScopeRange=rangy.createRange(),i=0;console.log(text,index,word);if(index===-1){return false;}range.selectNodeContents(baseEl);searchScopeRange.selectNodeContents(baseEl);var options={caseSensitive:true,withinRange:searchScopeRange};while(range.findText(word,options)){if(i===index){this.highlightRange(range,this.comment);return this.comment;}range.collapse(false);++i;}return false;},highlightRange:function(range,comment,commentClassName){
commentClassName=typeof commentClassName==="undefined"?'smartcomment-hl-'+comment.data_id:commentClassName;var sel=rangy.getSelection();sel.setSingleRange(range);this.highlighter.addClassApplier(rangy.createClassApplier(commentClassName,{ignoreWhiteSpace:true}));this.highlighter.highlightSelection(commentClassName,{selection:sel});sel.removeAllRanges();if(comment){SmartComments.Highlighting.addDataAttributesToElement($('.smartcomment-hl-'+comment.data_id),comment);}}};highlighter.Types.Register(highlighter.Types.Enums.MAIN,SmartComments.Highlighting.Types.WordIndex);;var SmartComments=SmartComments||{};var highlighter=SmartComments.Highlighting=SmartComments.Highlighting||{};highlighter.Types.Register(highlighter.Types.Enums.MAIN,{comment:undefined,init:function(comment){this.comment=comment;return this;},isCorrectType:function(){return this.comment.pos.indexOf('[')!==-1&&this.comment.pos.indexOf(']')!==-1;},highlight:function(){this.comment.pos=SmartComments.helperFunctions.decodeHTML(this.comment.pos);
var element=undefined,isImage=false;if(this.comment.pos.indexOf('img')!==-1){element=this.determineImageLocation(this.comment.pos);isImage=true;}else{element=$(this.comment.pos);}if(this.comment&&element){if(isImage){element.parent().addClass('smartcomment-hl-'+this.comment.data_id);}else{element.addClass('smartcomment-hl-'+this.comment.data_id);}SmartComments.Highlighting.addDataAttributesToElement($('.smartcomment-hl-'+this.comment.data_id),this.comment);}return this.comment;},determineImageLocation(hash){hash=hash.replace('img[','').replace(']','');var element=null;SmartComments.bodyContainer.find('img').each(function(){var imageHash=SmartComments.Selection.ImageSelection.getHash($(this));if(hash===imageHash){element=$(this);}});return element;}});;var SmartComments=SmartComments||{};var highlighter=SmartComments.Highlighting=SmartComments.Highlighting||{};SmartComments.Highlighting.Types.FindSelectionIndex={comment:undefined,init:function(comment){this.comment=comment;return this;},
isCorrectType:function(){return/<[^>]*>/.test(this.comment.pos.replace(/&lt;/g,'<').replace(/&gt;/g,'>'))&&this.comment.pos.indexOf('|')!==-1;},highlight:function(){var lastPipePos=this.comment.pos.lastIndexOf('|'),text=this.comment.pos.substring(0,lastPipePos),index=parseInt(this.comment.pos.substring(lastPipePos+1),10),word=text.replace(/&lt;/g,'<').replace(/&gt;/g,'>'),baseEl=SmartComments.getNodeRoot(),range=rangy.createRange(),searchScopeRange=rangy.createRange(),i=0;if(index===-1){return false;}range.selectNodeContents(baseEl);searchScopeRange.selectNodeContents(baseEl);var options={caseSensitive:true,withinRange:searchScopeRange};word=word.replace(/(<([^>]+)>)/gi,"");while(range.findText(word,options)){if(i===index){this.highlightRange(range,this.comment);return this.comment;}range.collapse(false);++i;}return false;},highlightRange:function(range,comment,commentClassName){commentClassName=typeof commentClassName==="undefined"?'smartcomment-hl-'+comment.data_id:commentClassName;
var span=document.createElement('span');span.className=commentClassName;span.setAttribute('data-comment-id',comment.data_id);try{span.appendChild(range.extractContents());}catch(error){console.error('Error extracting contents:',error);return;}range.insertNode(span);var sel=rangy.getSelection();sel.removeAllRanges();if(comment){SmartComments.Highlighting.addDataAttributesToElement($(span),comment);}}};highlighter.Types.Register(highlighter.Types.Enums.MAIN,SmartComments.Highlighting.Types.FindSelectionIndex);;var SmartComments=SmartComments||{};SmartComments.Selection={enabled:false,selection:undefined,parent:undefined,image:undefined,enums:{SELECTION_VALID:0,INVALID_SELECTION_ALREADY_COMMENTED:1,INVALID_SELECTION_INCLUDES_DYNAMIC_CONTENT:2,INVALID_SELECTION_CONTAINS_LINEBREAKS:3,INVALID_SELECTION_IS_EMPTY:4},lastPos:{x:0,y:0},startPos:{x:0,y:0},lastRange:undefined,addons:[],isCapturing:false,executeSelectionAction:function(selection){console.warn('SmartComments.Selection.executeSelectionAction is deprecated');
console.warn('Use SmartComments.Selection.preSelection and SmartComments.Selection.postSelection instead');var self=this;this.selection=selection;SmartComments.helperFunctions.toggleSpinner(this.lastPos.x,this.lastPos.y);this.screenshotSelection(function(canvasBase64){self.image=canvasBase64;self.parent=undefined;SmartComments.popup.create((SmartComments.Selection.lastPos.x+5),(SmartComments.Selection.lastPos.y+5)).open();SmartComments.helperFunctions.toggleSpinner();SmartComments.Events.trigger(SmartComments.Events.enums.SELECTION_ACTIVE);});},preSelection:function(range){SmartComments.Selection.lastRange=range;SmartComments.helperFunctions.toggleSpinner(this.lastPos.x,this.lastPos.y);this.isCapturing=true;},postSelection:function(selection){var self=this;this.selection=selection;SmartComments.Highlighting.Types.WordIndex.highlightRange(this.lastRange,null,SmartComments.Highlighting.enums.HIGHLIGHT_CLASS);this.screenshotSelection(function(canvasBase64){self.image=canvasBase64;self.parent=undefined;
SmartComments.popup.create((self.startPos.x+5),(self.startPos.y+5)).open();SmartComments.helperFunctions.toggleSpinner();SmartComments.Events.trigger(SmartComments.Events.enums.SELECTION_ACTIVE);$('.'+SmartComments.Highlighting.enums.HIGHLIGHT_CLASS).removeClass(SmartComments.Highlighting.enums.HIGHLIGHT_CLASS);self.isCapturing=false;});},deselect:function(resetState){rangy.getSelection().removeAllRanges();resetState=typeof resetState==='undefined'?true:resetState;SmartComments.Selection.DynamicBlockSelection.deselect();if(resetState){this.lastPos={x:0,y:0};this.selection=undefined;this.parent=undefined;SmartComments.Selection.image=undefined;$('.sic-canvas').remove();}},validateSelection:function(wrappedSelection){var selectionHTML=typeof wrappedSelection==='string'?wrappedSelection:wrappedSelection.toHtml(),res=this.enums.SELECTION_VALID;if(selectionHTML.indexOf('smartcomment-hl-')!==-1){res=this.enums.INVALID_SELECTION_ALREADY_COMMENTED;}else if(selectionHTML.indexOf('sc-dynamic-block')!==-1){
res=this.enums.INVALID_SELECTION_INCLUDES_DYNAMIC_CONTENT;}else if(selectionHTML.trim()===''){res=this.enums.INVALID_SELECTION_IS_EMPTY;}else if(selectionHTML.match(/[\n\r]/)){res=this.enums.INVALID_SELECTION_CONTAINS_LINEBREAKS;}if(res!==this.enums.SELECTION_VALID){this.showError(res);}return res;},bindEvents:function(){SmartComments.Selection.ImageSelection.bindEvents();SmartComments.Selection.TextSelection.bindEvents();SmartComments.Selection.DynamicBlockSelection.bindEvents();var self=this;$(document.body).mousemove(function(event){if(self.isCapturing){return;}self.lastPos.x=event.pageX;self.lastPos.y=event.pageY;});},showError:function(id){SmartComments.notifications.error(mw.msg('sic-selection-error-title'),mw.msg('sic-selection-error-'+id));},setSelectionFromString:function(position){if(position.indexOf("|")!==-1){var parts=position.split("|");this.selection={text:parts[0],index:parts[1]};}else this.selection=position;},screenshotSelection:function(callback){var minMaxWidth=500,
minMaxHeight=50,maxChars=45,width=this.lastPos.x-this.startPos.x,height=this.lastPos.y-this.startPos.y,scale=100;if(width<minMaxWidth||width>minMaxWidth){width=minMaxWidth;}if(height<minMaxHeight||height>minMaxHeight){height=minMaxHeight;}var x=this.lastPos.x-(this.lastPos.x-this.startPos.x)/2,y=this.lastPos.y-(this.lastPos.y-this.startPos.y)/2;if(typeof SmartComments.Selection.selection!=='undefined'&&typeof SmartComments.Selection.selection.text!=='undefined'&&SmartComments.Selection.selection.text.length>maxChars){scale=(100*maxChars)/SmartComments.Selection.selection.text.length;}SmartComments.helperFunctions.screenshot("default",{x:x-width/2,y:y-height/2,width:minMaxWidth,height:minMaxHeight,onclone:function(clone){var activeItems=clone.getElementsByClassName(SmartComments.Highlighting.enums.HIGHLIGHT_CLASS);for(var i=0;i<activeItems.length;i++){activeItems[i].style.background="#ffffe0";activeItems[i].style["border-top"]="1px solid rgba(0,0,0,0.2)";activeItems[i].style["border-bottom"]="1px solid rgba(0,0,0,0.2)";
if(i===0){activeItems[i].style["border-left"]="1px solid rgba(0,0,0,0.2)";}if(i===activeItems.length-1){activeItems[i].style["border-right"]="1px solid rgba(0,0,0,0.2)";}}clone.getElementById('sic-spinner').remove();$(clone).find('image').remove();return clone;}},function(canvas){callback(canvas);});},registerAddon:function(name,addon){if(SmartComments.enabledAddons.indexOf(name)!==-1){addon.bindEvents();}}};;var SmartComments=SmartComments||{};SmartComments.Selection=SmartComments.Selection||{};SmartComments.Selection.TextSelection={active:false,select:function(event){if(this.active){return;}this.active=true;var selection=rangy.getSelection(SmartComments.getNodeRoot()),self=this;if(SmartComments.Selection.validateSelection(selection)===SmartComments.Selection.enums.SELECTION_VALID){var range=selection.getRangeAt(0);if(!range.endContainer.parentNode.isSameNode(range.startContainer.parentNode)&&!range.endContainer.parentNode.contains(range.startContainer.parentNode)){range.setEnd(range.endContainer,range.endContainer.length);
}if(!range.startContainer.parentNode.contains(range.endContainer.parentNode)){range.setStart(range.startContainer,0);}SmartComments.Selection.preSelection(range);this.getTextAndIndexAsync(range).then(result=>{SmartComments.Selection.postSelection(result);self.active=false;}).catch((e)=>{self.active=false;console.log("Exception caught",e);});}else{self.active=false;}},getTextAndIndex:function(selection){var baseEl=SmartComments.getNodeRoot(),selectionPos=rangy.serializeSelection(selection),searchFor=selection.toString(),range=rangy.createRange(),searchScopeRange=rangy.createRange(),i=0;range.selectNodeContents(baseEl);searchScopeRange.selectNodeContents(baseEl);var options={caseSensitive:true,withinRange:searchScopeRange},res={text:searchFor,index:i,range:selectionPos}
if(searchFor!==""){while(range.findText(searchFor,options)){if(rangy.serializeRange(range)===selectionPos){res.index=i;res.range=range;SmartComments.Selection.lastRange=range;SmartComments.Highlighting.Types.WordIndex.highlightRange(range,null,SmartComments.Highlighting.enums.HIGHLIGHT_CLASS);}range.collapse(false);++i;}}return res;},getTextAndIndexAsync:function(selectionRange){return new Promise((resolve,reject)=>{var baseEl=SmartComments.getNodeRoot(),selectionPos=rangy.serializeRange(selectionRange),searchFor=selectionRange.toString(),searchForHtml=selectionRange.toHtml(),range=rangy.createRange(),searchScopeRange=rangy.createRange(),i=0;const asyncSearchHtml=()=>{let content=document.querySelectorAll("#mw-content-text > .mw-parser-output")[0],currentNode,currentText=searchForHtml,iterator=document.createNodeIterator(content,NodeFilter.SHOW_TEXT),found=-1;while((currentNode=iterator.nextNode())){for(let i=0;i<currentNode.data.length;i++){if(currentNode.data[i]===currentText[0]){
currentText=currentText.substring(1);if(currentText.length===0){found++;if(currentNode.parentNode.contains(selectionRange.endContainer)){res.index=found;resolve(res);return;}}}else{currentText=selectionRange.toString();}}}SmartComments.notifications.error(mw.msg('sic-selection-error-title'));};const asyncSearch=()=>{if(range.findText(searchFor,options)){if(rangy.serializeRange(range)===selectionPos){res.index=i;}range.collapse(false);++i;requestAnimationFrame(asyncSearch);}else{resolve(res);}};var res={index:i,};if(/<[^>]*>/.test(searchForHtml)){res.text=searchForHtml;asyncSearchHtml();}else{searchScopeRange.selectNodeContents(baseEl);res.text=searchFor;var options={caseSensitive:true,withinRange:searchScopeRange};asyncSearch();}});},bindEvents:function(){var self=this;$(SmartComments.getNodeRoot()).mouseup(function(event){if(SmartComments.Selection.enabled){setTimeout(function(){if(!rangy.getSelection().isCollapsed&&!SmartComments.Panels.CommentGroup.active){self.select(event);}},1);}
});$(document).mousedown(function(event){if(SmartComments.Selection.enabled){SmartComments.Selection.startPos={x:event.pageX,y:event.pageY};}});}};;var SmartComments=SmartComments||{};SmartComments.Selection=SmartComments.Selection||{};SmartComments.Selection.DynamicBlockSelection={viewActive:false,select:function(element){if(element.parent().attr('class').indexOf('smartcomment-hl-')!==-1){return;}this.viewActive=true;SmartComments.Selection.executeSelectionAction(element.data('hash'));},deselect:function(){$('div.sc-dynamic-block').removeClass('hover');this.viewActive=false;},bindEvents:function(){var self=this;$(document).on('click','div.sc-dynamic-block',function(e){if(SmartComments.Selection.enabled){self.select($(this));e.preventDefault();}});$(document).on('mouseover','div.sc-dynamic-block',function(){if($(this).parent().attr('class').indexOf('smartcomment-hl-')===-1){$(this).addClass('hover ');}}).on('mouseout','div.sc-dynamic-block',function(){if(!self.viewActive){$(this).removeClass('hover');
}});}};;var SmartComments=SmartComments||{};SmartComments.Selection=SmartComments.Selection||{};SmartComments.Selection.ImageSelection={select:function(){},deselect:function(){},bindEvents:function(){var instance=this;SmartComments.bodyContainer.find('img').each(function(){var wrapper="<div class=\"sc-dynamic-block\" data-hash=\"##HASH##\" />",hash=instance.getHash($(this));$(this).wrap($(wrapper.replace('##HASH##',"img["+hash+"]")));});},getHash(element){return hex_md5(element.attr('src')+'|'+element.width()+'|'+element.height());}};;var SmartComments=SmartComments||{};SmartComments.Selection=SmartComments.Selection||{};SmartComments.Selection.SmartConnectArchiMate={originalState:undefined,select:function(event,target){if(target.attr('class').indexOf('smartcomment-hl')!==-1||SmartComments.enabled!==true){return;}target.select();var viewNodeId=target.find('metadata').html().match(/(archimedes:viewnodeid="(.*)\") /gm)[0].split('"')[1];SmartComments.Selection.executeSelectionAction("addon^SmartConnectArchiMate%"+viewNodeId);
event.preventDefault();},bindEvents:function(){$(document).find('.archimate-viewdiagram > svg > a').each(function(){$(this).on('mouseover',SmartComments.Selection.SmartConnectArchiMate.hoverElement);$(this).on('mouseout',SmartComments.Selection.SmartConnectArchiMate.hoverOutElement);$(this).on('click',function(e){SmartComments.Selection.SmartConnectArchiMate.select(e,$(this));});});},hoverElement:function(){if(SmartComments.enabled!==true){return;}this.originalState=$(this).find('rect').attr('style');$(this).find('rect:not(.sic-scam-text-bg)').css({'fill':'#ffffe0'});$(this).addClass('sic-highlighted-item');$(this).find('text, image, tspan').css({'pointer-events':'none'});},hoverOutElement:function(){if(SmartComments.enabled!==true){return;}$(this).find('rect:not(.sic-scam-text-bg)').attr('style',this.originalState);$(this).removeClass('sic-highlighted-item');$(this).find('text, image, tspan').css({'pointer-events':'auto'});}};if($('.archimate-viewdiagram').length!==0){SmartComments.Selection.registerAddon('SmartConnectArchiMate',SmartComments.Selection.SmartConnectArchiMate);
};var SmartComments=SmartComments||{};SmartComments.Highlighting=SmartComments.Highlighting||{};if($('.archimate-viewdiagram').length!==0){SmartComments.Highlighting.Types.Register(SmartComments.Highlighting.Types.Enums.ADDON,{padding:5,height:undefined,init:function(comment){this.comment=comment;return this;},isCorrectType:function(){return this.comment.pos.indexOf('SmartConnectArchiMate')!==-1;},highlight:function(){var selector=$('*[archimedes\\:viewnodeid="'+this.comment.pos+'"]').parent().parent().parent();if(selector.length===0){return this.comment;}this.addBackgroundOnTextElement(selector.find('text'));var position=selector.position();selector.addClass('smartcomment-hl-'+this.comment.data_id);this.comment.elementPos={top:position.top+(this.height+this.padding),left:position.left};return this.comment;},addBackgroundOnTextElement:function(selector){var svgns="http://www.w3.org/2000/svg",bounds=selector.get(0).getBBox(),bg=document.createElementNS(svgns,'rect'),padding=this.padding;
this.height=bounds.height+padding;bg.setAttribute('x',bounds.x-padding/2);bg.setAttribute('y',bounds.y-padding/2);bg.setAttribute('width',bounds.width+padding);bg.setAttribute('height',bounds.height+padding);bg.setAttribute('fill','#ffffe0');bg.setAttribute('class','sic-scam-text-bg');bg.setAttribute('stroke','#00000020');bg.setAttribute('stroke-width','1px');bg.setAttribute('style','pointer-events:none;');selector.get(0).parentNode.insertBefore(bg,selector.get(0));},destruct:function(){$('.sic-scam-text-bg').remove();}});};